2023-05-10 20:48:42.966 INFO  com.jiawa.wiki.WikiApplication                    :55   [32m                  [0;39m Starting WikiApplication using Java 1.8.0_271 on LAPTOP-TLCI2GAA with PID 6484 (D:\work\jiawawiki\target\classes started by k in D:\work\jiawawiki)
2023-05-10 20:48:42.971 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.1.6.Final
2023-05-10 20:48:42.976 INFO  com.jiawa.wiki.WikiApplication                    :660  [32m                  [0;39m No active profile set, falling back to default profiles: default
2023-05-10 20:48:43.046 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-05-10 20:48:43.046 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-05-10 20:48:44.029 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :250  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2023-05-10 20:48:44.029 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :128  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-05-10 20:48:44.066 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :188  [32m                  [0;39m Finished Spring Data repository scanning in 15 ms. Found 0 Redis repository interfaces.
2023-05-10 20:48:44.316 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration$$EnhancerBySpringCGLIB$$7da95da6] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-10 20:48:44.338 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-10 20:48:45.245 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'defaultMQProducer' of type [org.apache.rocketmq.client.producer.DefaultMQProducer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-10 20:48:45.246 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonConfig' of type [com.jiawa.wiki.config.JacksonConfig$$EnhancerBySpringCGLIB$$1fe3d2a7] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-10 20:48:45.246 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-10 20:48:45.246 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-10 20:48:45.251 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'spring.jackson-org.springframework.boot.autoconfigure.jackson.JacksonProperties' of type [org.springframework.boot.autoconfigure.jackson.JacksonProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-10 20:48:45.251 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'standardJacksonObjectMapperBuilderCustomizer' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration$StandardJackson2ObjectMapperBuilderCustomizer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-10 20:48:45.256 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-10 20:48:45.256 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'parameterNamesModule' of type [com.fasterxml.jackson.module.paramnames.ParameterNamesModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-10 20:48:45.256 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-10 20:48:45.278 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jsonComponentModule' of type [org.springframework.boot.jackson.JsonComponentModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-10 20:48:45.278 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.data.web.config.SpringDataJacksonConfiguration' of type [org.springframework.data.web.config.SpringDataJacksonConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-10 20:48:45.286 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonGeoModule' of type [org.springframework.data.geo.GeoModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-10 20:48:45.291 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapperBuilder' of type [org.springframework.http.converter.json.Jackson2ObjectMapperBuilder] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-10 20:48:45.306 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapper' of type [com.fasterxml.jackson.databind.ObjectMapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-10 20:48:47.517 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketMQTemplate' of type [org.apache.rocketmq.spring.core.RocketMQTemplate] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-10 20:48:47.520 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'transactionHandlerRegistry' of type [org.apache.rocketmq.spring.config.TransactionHandlerRegistry] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-10 20:48:48.160 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2023-05-10 20:48:48.166 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2023-05-10 20:48:48.166 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2023-05-10 20:48:48.166 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.39]
2023-05-10 20:48:48.286 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2023-05-10 20:48:48.286 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :289  [32m                  [0;39m Root WebApplicationContext: initialization completed in 5240 ms
2023-05-10 20:48:49.326 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2023-05-10 20:48:49.861 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2023-05-10 20:48:49.936 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2023-05-10 20:48:49.984 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:48:50.079 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:48:55.077 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:48:55.078 INFO  o.a.r.s.support.DefaultRocketMQListenerContainer  :243  [32m                  [0;39m running container: DefaultRocketMQListenerContainer{consumerGroup='default', nameServer='127.0.0.1:9876', topic='VOTE_TOPIC', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
2023-05-10 20:48:55.078 INFO  o.a.r.s.a.ListenerContainerConfiguration          :107  [32m                  [0;39m Register the listener to container, listenerBeanName:voteTopicConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-05-10 20:48:55.086 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2023-05-10 20:48:55.096 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2023-05-10 20:48:55.119 INFO  com.jiawa.wiki.WikiApplication                    :61   [32m                  [0;39m Started WikiApplication in 12.679 seconds (JVM running for 13.936)
2023-05-10 20:48:55.126 INFO  com.jiawa.wiki.WikiApplication                    :26   [32m                  [0;39m 启动成功！！
2023-05-10 20:48:55.126 INFO  com.jiawa.wiki.WikiApplication                    :27   [32m                  [0;39m 地址: 	http://127.0.0.1:8880
2023-05-10 20:48:57.115 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:48:59.166 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:49:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m37239756190519296 [0;39m 生成今日电子书快照开始
2023-05-10 20:49:00.039 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m37239756190519296 [0;39m HikariPool-1 - Starting...
2023-05-10 20:49:00.666 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m37239756190519296 [0;39m HikariPool-1 - Start completed.
2023-05-10 20:49:00.676 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37239756190519296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-10 20:49:00.690 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37239756190519296 [0;39m ==> Parameters: 
2023-05-10 20:49:00.716 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37239756190519296 [0;39m <==    Updates: 5
2023-05-10 20:49:00.716 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m37239756190519296 [0;39m 生成今日电子书快照结束，耗时：700毫秒
2023-05-10 20:49:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37239777141067776 [0;39m 更新电子书下的文档数据开始
2023-05-10 20:49:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37239777141067776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 20:49:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37239777141067776 [0;39m ==> Parameters: 
2023-05-10 20:49:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37239777141067776 [0;39m <==    Updates: 1
2023-05-10 20:49:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37239777141067776 [0;39m 更新电子书下的文档数据结束，耗时：12毫秒
2023-05-10 20:49:12.950 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-05-10 20:49:12.950 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2023-05-10 20:49:12.950 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 0 ms
2023-05-10 20:49:13.081 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37239810955546624 [0;39m ------------- 开始 -------------
2023-05-10 20:49:13.081 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37239810955546625 [0;39m ------------- 开始 -------------
2023-05-10 20:49:13.081 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37239810955546626 [0;39m ------------- 开始 -------------
2023-05-10 20:49:13.081 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37239810955546624 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-05-10 20:49:13.081 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37239810955546626 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2023-05-10 20:49:13.081 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37239810955546625 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-05-10 20:49:13.081 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37239810955546624 [0;39m 类名方法: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-05-10 20:49:13.081 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37239810955546625 [0;39m 类名方法: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-05-10 20:49:13.081 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37239810955546626 [0;39m 类名方法: com.jiawa.wiki.controller.CategoryController.all
2023-05-10 20:49:13.081 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37239810955546624 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:49:13.081 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37239810955546626 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:49:13.081 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37239810955546625 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:49:13.128 INFO  com.jiawa.wiki.websocket.WebSocketServer          :32   [32m                  [0;39m 有新连接：token：thovGP79Ep，session id：0，当前连接数：1
2023-05-10 20:49:13.284 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37239810955546626 [0;39m 请求参数: []
2023-05-10 20:49:13.284 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37239810955546624 [0;39m 请求参数: []
2023-05-10 20:49:13.284 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37239810955546625 [0;39m 请求参数: []
2023-05-10 20:49:13.456 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m37239810955546625 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-05-10 20:49:13.456 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m37239810955546625 [0;39m ==> Parameters: 
2023-05-10 20:49:13.746 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m37239810955546624 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-05-10 20:49:13.746 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m37239810955546624 [0;39m ==> Parameters: 
2023-05-10 20:49:13.836 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m37239810955546624 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-05-10 20:49:13.836 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m37239810955546624 [0;39m <==        Row: 2023-04-24, 10, 7
2023-05-10 20:49:13.842 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m37239810955546625 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-05-10 20:49:13.842 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m37239810955546625 [0;39m <==        Row: 2023-05-10, 10, 7, 10, 7
2023-05-10 20:49:13.842 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m37239810955546624 [0;39m <==      Total: 1
2023-05-10 20:49:13.842 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m37239810955546625 [0;39m <==      Total: 1
2023-05-10 20:49:13.866 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37239810955546626 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-05-10 20:49:13.866 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37239810955546626 [0;39m ==> Parameters: 
2023-05-10 20:49:13.874 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37239810955546626 [0;39m <==    Columns: id, parent, name, sort
2023-05-10 20:49:13.874 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37239810955546626 [0;39m <==        Row: 100, 0, 前端开发, 100
2023-05-10 20:49:13.876 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37239810955546626 [0;39m <==        Row: 101, 100, Vue, 101
2023-05-10 20:49:13.876 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37239810955546626 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-05-10 20:49:13.876 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37239810955546626 [0;39m <==        Row: 200, 0, Java, 200
2023-05-10 20:49:13.876 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37239810955546626 [0;39m <==        Row: 201, 200, 基础应用, 201
2023-05-10 20:49:13.876 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37239810955546626 [0;39m <==        Row: 202, 200, 框架应用, 202
2023-05-10 20:49:13.876 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37239810955546626 [0;39m <==        Row: 300, 0, Python, 300
2023-05-10 20:49:13.876 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37239810955546626 [0;39m <==        Row: 301, 300, 基础应用, 301
2023-05-10 20:49:13.906 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37239810955546626 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2023-05-10 20:49:13.906 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37239810955546626 [0;39m <==        Row: 400, 0, 数据库, 400
2023-05-10 20:49:13.906 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37239810955546626 [0;39m <==        Row: 401, 400, MySQL, 401
2023-05-10 20:49:13.906 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37239810955546626 [0;39m <==        Row: 500, 0, 其它, 500
2023-05-10 20:49:13.911 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37239810955546626 [0;39m <==        Row: 501, 500, 服务器, 501
2023-05-10 20:49:13.911 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37239810955546626 [0;39m <==        Row: 502, 500, 开发工具, 502
2023-05-10 20:49:13.911 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37239810955546626 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2023-05-10 20:49:13.911 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37239810955546626 [0;39m <==      Total: 15
2023-05-10 20:49:13.928 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37239810955546625 [0;39m 返回结果: {"content":[{"date":1683648000000,"viewCount":10,"viewIncrease":10,"voteCount":7,"voteIncrease":7}],"success":true}
2023-05-10 20:49:13.928 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37239810955546624 [0;39m 返回结果: {"content":[{"date":1682265600000,"viewCount":0,"viewIncrease":10,"voteCount":0,"voteIncrease":7}],"success":true}
2023-05-10 20:49:13.928 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37239810955546626 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2023-05-10 20:49:13.928 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37239810955546625 [0;39m ------------- 结束 耗时：857 ms -------------
2023-05-10 20:49:13.928 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37239810955546624 [0;39m ------------- 结束 耗时：857 ms -------------
2023-05-10 20:49:13.941 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37239810955546626 [0;39m ------------- 结束 耗时：870 ms -------------
2023-05-10 20:49:19.056 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:49:19.621 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:49:21.118 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:49:23.146 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:49:25.201 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:49:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37239902991159296 [0;39m 更新电子书下的文档数据开始
2023-05-10 20:49:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37239902991159296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 20:49:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37239902991159296 [0;39m ==> Parameters: 
2023-05-10 20:49:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37239902991159296 [0;39m <==    Updates: 1
2023-05-10 20:49:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37239902991159296 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-05-10 20:49:49.314 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:49:49.567 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:49:51.366 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:49:53.405 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:49:55.434 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:49:55.531 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37239989045694464 [0;39m ------------- 开始 -------------
2023-05-10 20:49:55.532 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37239989045694464 [0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2023-05-10 20:49:55.532 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37239989045694464 [0;39m 类名方法: com.jiawa.wiki.controller.EbookController.list
2023-05-10 20:49:55.533 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37239989045694464 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:49:55.536 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37239989045694464 [0;39m 请求参数: [{"categoryId2":101,"page":1,"size":1000}]
2023-05-10 20:49:55.638 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m37239989045694464 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-05-10 20:49:55.639 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m37239989045694464 [0;39m ==> Parameters: 101(Long)
2023-05-10 20:49:55.641 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m37239989045694464 [0;39m <==    Columns: count(0)
2023-05-10 20:49:55.641 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m37239989045694464 [0;39m <==        Row: 1
2023-05-10 20:49:55.642 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m37239989045694464 [0;39m <==      Total: 1
2023-05-10 20:49:55.646 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m37239989045694464 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-05-10 20:49:55.647 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m37239989045694464 [0;39m ==> Parameters: 101(Long), 1000(Integer)
2023-05-10 20:49:55.648 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m37239989045694464 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-05-10 20:49:55.648 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m37239989045694464 [0;39m <==        Row: 2, Vue 入门教程, 100, 101, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-05-10 20:49:55.649 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m37239989045694464 [0;39m <==      Total: 1
2023-05-10 20:49:55.651 INFO  com.jiawa.wiki.service.EbookService               :48   [32m37239989045694464 [0;39m 总行数：1
2023-05-10 20:49:55.651 INFO  com.jiawa.wiki.service.EbookService               :49   [32m37239989045694464 [0;39m 总页数：1
2023-05-10 20:49:55.666 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37239989045694464 [0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0}],"total":1},"success":true}
2023-05-10 20:49:55.666 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37239989045694464 [0;39m ------------- 结束 耗时：135 ms -------------
2023-05-10 20:49:56.718 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37239994024333312 [0;39m ------------- 开始 -------------
2023-05-10 20:49:56.719 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37239994024333312 [0;39m 请求地址: http://127.0.0.1:8880/doc/all/2 GET
2023-05-10 20:49:56.719 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37239994024333312 [0;39m 类名方法: com.jiawa.wiki.controller.DocController.all
2023-05-10 20:49:56.719 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37239994024333312 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:49:56.720 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37239994024333312 [0;39m 请求参数: [2]
2023-05-10 20:49:56.805 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m37239994024333312 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-05-10 20:49:56.806 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m37239994024333312 [0;39m ==> Parameters: 2(Long)
2023-05-10 20:49:56.808 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m37239994024333312 [0;39m <==      Total: 0
2023-05-10 20:49:56.809 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37239994024333312 [0;39m 返回结果: {"content":[],"success":true}
2023-05-10 20:49:56.809 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37239994024333312 [0;39m ------------- 结束 耗时：91 ms -------------
2023-05-10 20:49:58.470 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37240001372753920 [0;39m ------------- 开始 -------------
2023-05-10 20:49:58.470 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37240001372753920 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-05-10 20:49:58.470 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37240001372753921 [0;39m ------------- 开始 -------------
2023-05-10 20:49:58.470 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37240001372753920 [0;39m 类名方法: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-05-10 20:49:58.470 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37240001372753921 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2023-05-10 20:49:58.470 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37240001372753920 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:49:58.470 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37240001372753922 [0;39m ------------- 开始 -------------
2023-05-10 20:49:58.476 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37240001372753922 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-05-10 20:49:58.476 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37240001372753922 [0;39m 类名方法: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-05-10 20:49:58.476 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37240001372753922 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:49:58.470 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37240001372753921 [0;39m 类名方法: com.jiawa.wiki.controller.CategoryController.all
2023-05-10 20:49:58.476 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37240001372753922 [0;39m 请求参数: []
2023-05-10 20:49:58.476 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37240001372753921 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:49:58.476 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37240001372753921 [0;39m 请求参数: []
2023-05-10 20:49:58.476 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m37240001372753922 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-05-10 20:49:58.476 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37240001372753921 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-05-10 20:49:58.476 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m37240001372753922 [0;39m ==> Parameters: 
2023-05-10 20:49:58.476 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37240001372753921 [0;39m ==> Parameters: 
2023-05-10 20:49:58.476 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37240001372753920 [0;39m 请求参数: []
2023-05-10 20:49:58.476 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m37240001372753922 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-05-10 20:49:58.476 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240001372753921 [0;39m <==    Columns: id, parent, name, sort
2023-05-10 20:49:58.481 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m37240001372753922 [0;39m <==        Row: 2023-04-24, 10, 7
2023-05-10 20:49:58.481 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240001372753921 [0;39m <==        Row: 100, 0, 前端开发, 100
2023-05-10 20:49:58.481 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m37240001372753922 [0;39m <==      Total: 1
2023-05-10 20:49:58.481 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m37240001372753920 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-05-10 20:49:58.481 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37240001372753922 [0;39m 返回结果: {"content":[{"date":1682265600000,"viewCount":0,"viewIncrease":10,"voteCount":0,"voteIncrease":7}],"success":true}
2023-05-10 20:49:58.481 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37240001372753922 [0;39m ------------- 结束 耗时：11 ms -------------
2023-05-10 20:49:58.481 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m37240001372753920 [0;39m ==> Parameters: 
2023-05-10 20:49:58.486 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m37240001372753920 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-05-10 20:49:58.486 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m37240001372753920 [0;39m <==        Row: 2023-05-10, 10, 7, 10, 7
2023-05-10 20:49:58.486 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m37240001372753920 [0;39m <==      Total: 1
2023-05-10 20:49:58.486 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37240001372753920 [0;39m 返回结果: {"content":[{"date":1683648000000,"viewCount":10,"viewIncrease":10,"voteCount":7,"voteIncrease":7}],"success":true}
2023-05-10 20:49:58.486 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37240001372753920 [0;39m ------------- 结束 耗时：16 ms -------------
2023-05-10 20:49:58.486 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240001372753921 [0;39m <==        Row: 101, 100, Vue, 101
2023-05-10 20:49:58.491 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240001372753921 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-05-10 20:49:58.491 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240001372753921 [0;39m <==        Row: 200, 0, Java, 200
2023-05-10 20:49:58.491 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240001372753921 [0;39m <==        Row: 201, 200, 基础应用, 201
2023-05-10 20:49:58.491 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240001372753921 [0;39m <==        Row: 202, 200, 框架应用, 202
2023-05-10 20:49:58.491 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240001372753921 [0;39m <==        Row: 300, 0, Python, 300
2023-05-10 20:49:58.496 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240001372753921 [0;39m <==        Row: 301, 300, 基础应用, 301
2023-05-10 20:49:58.497 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240001372753921 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2023-05-10 20:49:58.497 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240001372753921 [0;39m <==        Row: 400, 0, 数据库, 400
2023-05-10 20:49:58.497 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240001372753921 [0;39m <==        Row: 401, 400, MySQL, 401
2023-05-10 20:49:58.497 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240001372753921 [0;39m <==        Row: 500, 0, 其它, 500
2023-05-10 20:49:58.497 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240001372753921 [0;39m <==        Row: 501, 500, 服务器, 501
2023-05-10 20:49:58.497 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240001372753921 [0;39m <==        Row: 502, 500, 开发工具, 502
2023-05-10 20:49:58.497 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240001372753921 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2023-05-10 20:49:58.497 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37240001372753921 [0;39m <==      Total: 15
2023-05-10 20:49:58.501 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37240001372753921 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2023-05-10 20:49:58.501 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37240001372753921 [0;39m ------------- 结束 耗时：31 ms -------------
2023-05-10 20:50:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m37240007844564992 [0;39m 生成今日电子书快照开始
2023-05-10 20:50:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37240007844564992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-10 20:50:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37240007844564992 [0;39m ==> Parameters: 
2023-05-10 20:50:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37240007844564992 [0;39m <==    Updates: 0
2023-05-10 20:50:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m37240007844564992 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-05-10 20:50:00.986 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37240011925622784 [0;39m ------------- 开始 -------------
2023-05-10 20:50:00.986 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37240011925622784 [0;39m 请求地址: http://127.0.0.1:8880/user/login POST
2023-05-10 20:50:00.986 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37240011925622784 [0;39m 类名方法: com.jiawa.wiki.controller.UserController.login
2023-05-10 20:50:00.986 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37240011925622784 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:50:00.986 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37240011925622784 [0;39m 请求参数: [{"loginName":"test"}]
2023-05-10 20:50:00.998 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m37240011925622784 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2023-05-10 20:50:00.998 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m37240011925622784 [0;39m ==> Parameters: test(String)
2023-05-10 20:50:00.998 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m37240011925622784 [0;39m <==    Columns: id, login_name, name, password
2023-05-10 20:50:00.998 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m37240011925622784 [0;39m <==        Row: 1, test, 测试, e70e2222a9d67c4f2eae107533359aa4
2023-05-10 20:50:00.998 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m37240011925622784 [0;39m <==      Total: 1
2023-05-10 20:50:01.009 INFO  com.jiawa.wiki.controller.UserController          :79   [32m37240011925622784 [0;39m 生成单点登录token：37240012022091776，并放入redis中
2023-05-10 20:50:01.266 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37240011925622784 [0;39m 返回结果: {"content":{"id":1,"loginName":"test","name":"测试","token":"37240012022091776"},"success":true}
2023-05-10 20:50:01.266 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37240011925622784 [0;39m ------------- 结束 耗时：280 ms -------------
2023-05-10 20:50:02.247 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m37239810955546626 [0;39m ------------- LoginInterceptor 开始 -------------
2023-05-10 20:50:02.247 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m37239810955546626 [0;39m ------------- LoginInterceptor 结束 耗时：0 ms -------------
2023-05-10 20:50:02.256 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m37239810955546625 [0;39m ------------- LoginInterceptor 开始 -------------
2023-05-10 20:50:02.256 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m37239810955546625 [0;39m 接口登录拦截：，path：http://127.0.0.1:8880/user/list
2023-05-10 20:50:02.256 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m37239810955546625 [0;39m 登录校验开始，token：37240012022091776
2023-05-10 20:50:02.256 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m37239810955546625 [0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"37240012022091776"}
2023-05-10 20:50:02.280 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37240017353052160 [0;39m ------------- 开始 -------------
2023-05-10 20:50:02.280 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37240017353052160 [0;39m 请求地址: http://127.0.0.1:8880/user/list GET
2023-05-10 20:50:02.280 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37240017353052160 [0;39m 类名方法: com.jiawa.wiki.controller.UserController.list
2023-05-10 20:50:02.280 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37240017353052160 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:50:02.280 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37240017353052160 [0;39m 请求参数: [{"page":1,"size":10}]
2023-05-10 20:50:02.288 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m37240017353052160 [0;39m ==>  Preparing: SELECT count(0) FROM user
2023-05-10 20:50:02.288 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m37240017353052160 [0;39m ==> Parameters: 
2023-05-10 20:50:02.292 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m37240017353052160 [0;39m <==    Columns: count(0)
2023-05-10 20:50:02.292 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m37240017353052160 [0;39m <==        Row: 1
2023-05-10 20:50:02.292 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m37240017353052160 [0;39m <==      Total: 1
2023-05-10 20:50:02.296 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m37240017353052160 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2023-05-10 20:50:02.296 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m37240017353052160 [0;39m ==> Parameters: 10(Integer)
2023-05-10 20:50:02.296 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m37240017353052160 [0;39m <==    Columns: id, login_name, name, password
2023-05-10 20:50:02.296 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m37240017353052160 [0;39m <==        Row: 1, test, 测试, e70e2222a9d67c4f2eae107533359aa4
2023-05-10 20:50:02.296 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m37240017353052160 [0;39m <==      Total: 1
2023-05-10 20:50:02.301 INFO  com.jiawa.wiki.service.UserService                :49   [32m37240017353052160 [0;39m 总行数：1
2023-05-10 20:50:02.301 INFO  com.jiawa.wiki.service.UserService                :50   [32m37240017353052160 [0;39m 总页数：1
2023-05-10 20:50:02.306 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37240017353052160 [0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"}],"total":1},"success":true}
2023-05-10 20:50:02.306 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37240017353052160 [0;39m ------------- 结束 耗时：26 ms -------------
2023-05-10 20:50:02.311 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m37240017353052160 [0;39m ------------- LoginInterceptor 结束 耗时：55 ms -------------
2023-05-10 20:50:03.550 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37240022679818240 [0;39m ------------- 开始 -------------
2023-05-10 20:50:03.550 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37240022679818240 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2023-05-10 20:50:03.550 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37240022679818240 [0;39m 类名方法: com.jiawa.wiki.controller.CategoryController.all
2023-05-10 20:50:03.550 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37240022679818240 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:50:03.550 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37240022679818240 [0;39m 请求参数: []
2023-05-10 20:50:03.550 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37240022679818240 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-05-10 20:50:03.550 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37240022679818240 [0;39m ==> Parameters: 
2023-05-10 20:50:03.558 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240022679818240 [0;39m <==    Columns: id, parent, name, sort
2023-05-10 20:50:03.558 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240022679818240 [0;39m <==        Row: 100, 0, 前端开发, 100
2023-05-10 20:50:03.558 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240022679818240 [0;39m <==        Row: 101, 100, Vue, 101
2023-05-10 20:50:03.558 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240022679818240 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-05-10 20:50:03.558 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240022679818240 [0;39m <==        Row: 200, 0, Java, 200
2023-05-10 20:50:03.558 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240022679818240 [0;39m <==        Row: 201, 200, 基础应用, 201
2023-05-10 20:50:03.558 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240022679818240 [0;39m <==        Row: 202, 200, 框架应用, 202
2023-05-10 20:50:03.558 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240022679818240 [0;39m <==        Row: 300, 0, Python, 300
2023-05-10 20:50:03.558 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240022679818240 [0;39m <==        Row: 301, 300, 基础应用, 301
2023-05-10 20:50:03.558 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240022679818240 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2023-05-10 20:50:03.558 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240022679818240 [0;39m <==        Row: 400, 0, 数据库, 400
2023-05-10 20:50:03.558 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240022679818240 [0;39m <==        Row: 401, 400, MySQL, 401
2023-05-10 20:50:03.558 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240022679818240 [0;39m <==        Row: 500, 0, 其它, 500
2023-05-10 20:50:03.558 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240022679818240 [0;39m <==        Row: 501, 500, 服务器, 501
2023-05-10 20:50:03.558 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240022679818240 [0;39m <==        Row: 502, 500, 开发工具, 502
2023-05-10 20:50:03.558 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240022679818240 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2023-05-10 20:50:03.558 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37240022679818240 [0;39m <==      Total: 15
2023-05-10 20:50:03.566 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37240022679818240 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2023-05-10 20:50:03.567 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37240022679818240 [0;39m ------------- 结束 耗时：17 ms -------------
2023-05-10 20:50:03.591 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37240022851784704 [0;39m ------------- 开始 -------------
2023-05-10 20:50:03.591 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37240022851784704 [0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2023-05-10 20:50:03.591 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37240022851784704 [0;39m 类名方法: com.jiawa.wiki.controller.EbookController.list
2023-05-10 20:50:03.591 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37240022851784704 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:50:03.591 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37240022851784704 [0;39m 请求参数: [{"page":1,"size":10}]
2023-05-10 20:50:03.598 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m37240022851784704 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-05-10 20:50:03.598 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m37240022851784704 [0;39m ==> Parameters: 
2023-05-10 20:50:03.603 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m37240022851784704 [0;39m <==    Columns: count(0)
2023-05-10 20:50:03.603 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m37240022851784704 [0;39m <==        Row: 5
2023-05-10 20:50:03.603 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m37240022851784704 [0;39m <==      Total: 1
2023-05-10 20:50:03.606 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m37240022851784704 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-05-10 20:50:03.606 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m37240022851784704 [0;39m ==> Parameters: 10(Integer)
2023-05-10 20:50:03.609 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m37240022851784704 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-05-10 20:50:03.609 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m37240022851784704 [0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 10, 7
2023-05-10 20:50:03.609 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m37240022851784704 [0;39m <==        Row: 2, Vue 入门教程, 100, 101, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-05-10 20:50:03.609 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m37240022851784704 [0;39m <==        Row: 3, Python 入门教程, 300, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-05-10 20:50:03.609 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m37240022851784704 [0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-05-10 20:50:03.609 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m37240022851784704 [0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-05-10 20:50:03.609 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m37240022851784704 [0;39m <==      Total: 5
2023-05-10 20:50:03.614 INFO  com.jiawa.wiki.service.EbookService               :48   [32m37240022851784704 [0;39m 总行数：5
2023-05-10 20:50:03.614 INFO  com.jiawa.wiki.service.EbookService               :49   [32m37240022851784704 [0;39m 总页数：1
2023-05-10 20:50:03.616 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37240022851784704 [0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":10,"voteCount":7},{"category1Id":100,"category2Id":101,"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"category1Id":300,"category2Id":301,"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-05-10 20:50:03.616 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37240022851784704 [0;39m ------------- 结束 耗时：25 ms -------------
2023-05-10 20:50:04.207 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37240025435475968 [0;39m ------------- 开始 -------------
2023-05-10 20:50:04.207 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37240025435475968 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2023-05-10 20:50:04.207 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37240025435475968 [0;39m 类名方法: com.jiawa.wiki.controller.CategoryController.all
2023-05-10 20:50:04.207 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37240025435475968 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:50:04.207 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37240025435475968 [0;39m 请求参数: []
2023-05-10 20:50:04.216 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37240025435475968 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-05-10 20:50:04.216 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37240025435475968 [0;39m ==> Parameters: 
2023-05-10 20:50:04.216 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240025435475968 [0;39m <==    Columns: id, parent, name, sort
2023-05-10 20:50:04.216 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240025435475968 [0;39m <==        Row: 100, 0, 前端开发, 100
2023-05-10 20:50:04.216 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240025435475968 [0;39m <==        Row: 101, 100, Vue, 101
2023-05-10 20:50:04.216 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240025435475968 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-05-10 20:50:04.216 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240025435475968 [0;39m <==        Row: 200, 0, Java, 200
2023-05-10 20:50:04.216 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240025435475968 [0;39m <==        Row: 201, 200, 基础应用, 201
2023-05-10 20:50:04.216 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240025435475968 [0;39m <==        Row: 202, 200, 框架应用, 202
2023-05-10 20:50:04.216 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240025435475968 [0;39m <==        Row: 300, 0, Python, 300
2023-05-10 20:50:04.216 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240025435475968 [0;39m <==        Row: 301, 300, 基础应用, 301
2023-05-10 20:50:04.224 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240025435475968 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2023-05-10 20:50:04.224 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240025435475968 [0;39m <==        Row: 400, 0, 数据库, 400
2023-05-10 20:50:04.224 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240025435475968 [0;39m <==        Row: 401, 400, MySQL, 401
2023-05-10 20:50:04.224 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240025435475968 [0;39m <==        Row: 500, 0, 其它, 500
2023-05-10 20:50:04.224 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240025435475968 [0;39m <==        Row: 501, 500, 服务器, 501
2023-05-10 20:50:04.224 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240025435475968 [0;39m <==        Row: 502, 500, 开发工具, 502
2023-05-10 20:50:04.226 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240025435475968 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2023-05-10 20:50:04.226 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37240025435475968 [0;39m <==      Total: 15
2023-05-10 20:50:04.226 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37240025435475968 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2023-05-10 20:50:04.226 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37240025435475968 [0;39m ------------- 结束 耗时：19 ms -------------
2023-05-10 20:50:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37240028811890688 [0;39m 更新电子书下的文档数据开始
2023-05-10 20:50:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37240028811890688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 20:50:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37240028811890688 [0;39m ==> Parameters: 
2023-05-10 20:50:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37240028811890688 [0;39m <==    Updates: 1
2023-05-10 20:50:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37240028811890688 [0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-05-10 20:50:05.146 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37240029373927424 [0;39m ------------- 开始 -------------
2023-05-10 20:50:05.154 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37240029373927424 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2023-05-10 20:50:05.154 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37240029373927424 [0;39m 类名方法: com.jiawa.wiki.controller.CategoryController.all
2023-05-10 20:50:05.154 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37240029373927424 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:50:05.154 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37240029373927424 [0;39m 请求参数: []
2023-05-10 20:50:05.156 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37240029373927424 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-05-10 20:50:05.156 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37240029373927424 [0;39m ==> Parameters: 
2023-05-10 20:50:05.156 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240029373927424 [0;39m <==    Columns: id, parent, name, sort
2023-05-10 20:50:05.156 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240029373927424 [0;39m <==        Row: 100, 0, 前端开发, 100
2023-05-10 20:50:05.156 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240029373927424 [0;39m <==        Row: 101, 100, Vue, 101
2023-05-10 20:50:05.156 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240029373927424 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-05-10 20:50:05.156 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240029373927424 [0;39m <==        Row: 200, 0, Java, 200
2023-05-10 20:50:05.156 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240029373927424 [0;39m <==        Row: 201, 200, 基础应用, 201
2023-05-10 20:50:05.161 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240029373927424 [0;39m <==        Row: 202, 200, 框架应用, 202
2023-05-10 20:50:05.161 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240029373927424 [0;39m <==        Row: 300, 0, Python, 300
2023-05-10 20:50:05.161 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240029373927424 [0;39m <==        Row: 301, 300, 基础应用, 301
2023-05-10 20:50:05.162 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240029373927424 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2023-05-10 20:50:05.162 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240029373927424 [0;39m <==        Row: 400, 0, 数据库, 400
2023-05-10 20:50:05.162 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240029373927424 [0;39m <==        Row: 401, 400, MySQL, 401
2023-05-10 20:50:05.162 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240029373927424 [0;39m <==        Row: 500, 0, 其它, 500
2023-05-10 20:50:05.162 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240029373927424 [0;39m <==        Row: 501, 500, 服务器, 501
2023-05-10 20:50:05.162 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240029373927424 [0;39m <==        Row: 502, 500, 开发工具, 502
2023-05-10 20:50:05.162 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37240029373927424 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2023-05-10 20:50:05.162 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37240029373927424 [0;39m <==      Total: 15
2023-05-10 20:50:05.166 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37240029373927424 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2023-05-10 20:50:05.166 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37240029373927424 [0;39m ------------- 结束 耗时：20 ms -------------
2023-05-10 20:50:05.206 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37240029625585664 [0;39m ------------- 开始 -------------
2023-05-10 20:50:05.210 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37240029625585664 [0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2023-05-10 20:50:05.211 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37240029625585664 [0;39m 类名方法: com.jiawa.wiki.controller.EbookController.list
2023-05-10 20:50:05.211 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37240029625585664 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:50:05.211 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37240029625585664 [0;39m 请求参数: [{"page":1,"size":10}]
2023-05-10 20:50:05.211 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m37240029625585664 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-05-10 20:50:05.211 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m37240029625585664 [0;39m ==> Parameters: 
2023-05-10 20:50:05.216 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m37240029625585664 [0;39m <==    Columns: count(0)
2023-05-10 20:50:05.216 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m37240029625585664 [0;39m <==        Row: 5
2023-05-10 20:50:05.216 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m37240029625585664 [0;39m <==      Total: 1
2023-05-10 20:50:05.220 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m37240029625585664 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-05-10 20:50:05.220 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m37240029625585664 [0;39m ==> Parameters: 10(Integer)
2023-05-10 20:50:05.222 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m37240029625585664 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-05-10 20:50:05.222 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m37240029625585664 [0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 10, 7
2023-05-10 20:50:05.222 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m37240029625585664 [0;39m <==        Row: 2, Vue 入门教程, 100, 101, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-05-10 20:50:05.222 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m37240029625585664 [0;39m <==        Row: 3, Python 入门教程, 300, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-05-10 20:50:05.222 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m37240029625585664 [0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-05-10 20:50:05.222 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m37240029625585664 [0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-05-10 20:50:05.226 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m37240029625585664 [0;39m <==      Total: 5
2023-05-10 20:50:05.227 INFO  com.jiawa.wiki.service.EbookService               :48   [32m37240029625585664 [0;39m 总行数：5
2023-05-10 20:50:05.227 INFO  com.jiawa.wiki.service.EbookService               :49   [32m37240029625585664 [0;39m 总页数：1
2023-05-10 20:50:05.227 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37240029625585664 [0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":10,"voteCount":7},{"category1Id":100,"category2Id":101,"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"category1Id":300,"category2Id":301,"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-05-10 20:50:05.227 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37240029625585664 [0;39m ------------- 结束 耗时：21 ms -------------
2023-05-10 20:50:11.357 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:50:13.371 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:50:19.588 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:50:20.732 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:50:22.756 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:50:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37240154632622080 [0;39m 更新电子书下的文档数据开始
2023-05-10 20:50:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37240154632622080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 20:50:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37240154632622080 [0;39m ==> Parameters: 
2023-05-10 20:50:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37240154632622080 [0;39m <==    Updates: 1
2023-05-10 20:50:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37240154632622080 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-05-10 20:50:35.436 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:50:37.469 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:50:48.701 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:50:49.586 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:50:52.773 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:50:59.566 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:51:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m37240259473444864 [0;39m 生成今日电子书快照开始
2023-05-10 20:51:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37240259473444864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-10 20:51:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37240259473444864 [0;39m ==> Parameters: 
2023-05-10 20:51:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37240259473444864 [0;39m <==    Updates: 0
2023-05-10 20:51:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m37240259473444864 [0;39m 生成今日电子书快照结束，耗时：8毫秒
2023-05-10 20:51:01.600 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:51:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37240280465936384 [0;39m 更新电子书下的文档数据开始
2023-05-10 20:51:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37240280465936384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 20:51:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37240280465936384 [0;39m ==> Parameters: 
2023-05-10 20:51:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37240280465936384 [0;39m <==    Updates: 1
2023-05-10 20:51:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37240280465936384 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-05-10 20:51:18.686 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:51:19.573 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:51:20.726 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:51:22.786 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:51:24.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:51:26.846 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:51:35.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37240406316027904 [0;39m 更新电子书下的文档数据开始
2023-05-10 20:51:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37240406316027904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 20:51:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37240406316027904 [0;39m ==> Parameters: 
2023-05-10 20:51:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37240406316027904 [0;39m <==    Updates: 1
2023-05-10 20:51:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37240406316027904 [0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-05-10 20:51:48.705 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:51:49.539 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:51:52.768 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:51:54.790 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:52:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m37240511110713344 [0;39m 生成今日电子书快照开始
2023-05-10 20:52:00.001 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37240511110713344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-10 20:52:00.001 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37240511110713344 [0;39m ==> Parameters: 
2023-05-10 20:52:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37240511110713344 [0;39m <==    Updates: 0
2023-05-10 20:52:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m37240511110713344 [0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-05-10 20:52:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37240532115787776 [0;39m 更新电子书下的文档数据开始
2023-05-10 20:52:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37240532115787776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 20:52:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37240532115787776 [0;39m ==> Parameters: 
2023-05-10 20:52:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37240532115787776 [0;39m <==    Updates: 1
2023-05-10 20:52:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37240532115787776 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-05-10 20:52:16.885 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:52:18.906 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:52:19.560 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:52:25.001 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:52:35.017 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37240657978462208 [0;39m 更新电子书下的文档数据开始
2023-05-10 20:52:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37240657978462208 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 20:52:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37240657978462208 [0;39m ==> Parameters: 
2023-05-10 20:52:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37240657978462208 [0;39m <==    Updates: 1
2023-05-10 20:52:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37240657978462208 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-05-10 20:52:40.950 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:52:42.970 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:52:49.583 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:52:50.706 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:52:52.742 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:53:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m37240762789924864 [0;39m 生成今日电子书快照开始
2023-05-10 20:53:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37240762789924864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-10 20:53:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37240762789924864 [0;39m ==> Parameters: 
2023-05-10 20:53:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37240762789924864 [0;39m <==    Updates: 0
2023-05-10 20:53:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m37240762789924864 [0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-05-10 20:53:04.997 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:53:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37240783761444864 [0;39m 更新电子书下的文档数据开始
2023-05-10 20:53:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37240783761444864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 20:53:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37240783761444864 [0;39m ==> Parameters: 
2023-05-10 20:53:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37240783761444864 [0;39m <==    Updates: 1
2023-05-10 20:53:05.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37240783761444864 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-05-10 20:53:07.016 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:53:19.574 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:53:22.745 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:53:29.037 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:53:31.076 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:53:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37240909619924992 [0;39m 更新电子书下的文档数据开始
2023-05-10 20:53:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37240909619924992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 20:53:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37240909619924992 [0;39m ==> Parameters: 
2023-05-10 20:53:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37240909619924992 [0;39m <==    Updates: 1
2023-05-10 20:53:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37240909619924992 [0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-05-10 20:53:48.682 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:53:49.586 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:53:50.716 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:53:52.755 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:53:56.817 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:54:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m37241014427193344 [0;39m 生成今日电子书快照开始
2023-05-10 20:54:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37241014427193344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-10 20:54:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37241014427193344 [0;39m ==> Parameters: 
2023-05-10 20:54:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37241014427193344 [0;39m <==    Updates: 0
2023-05-10 20:54:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m37241014427193344 [0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-05-10 20:54:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37241035407101952 [0;39m 更新电子书下的文档数据开始
2023-05-10 20:54:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37241035407101952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 20:54:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37241035407101952 [0;39m ==> Parameters: 
2023-05-10 20:54:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37241035407101952 [0;39m <==    Updates: 1
2023-05-10 20:54:05.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37241035407101952 [0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-05-10 20:54:19.556 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:54:22.967 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:54:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37241161282359296 [0;39m 更新电子书下的文档数据开始
2023-05-10 20:54:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37241161282359296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 20:54:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37241161282359296 [0;39m ==> Parameters: 
2023-05-10 20:54:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37241161282359296 [0;39m <==    Updates: 1
2023-05-10 20:54:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37241161282359296 [0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-05-10 20:54:44.922 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:54:46.936 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:54:49.570 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:54:51.012 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:54:53.035 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:55:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m37241266152542208 [0;39m 生成今日电子书快照开始
2023-05-10 20:55:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37241266152542208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-10 20:55:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37241266152542208 [0;39m ==> Parameters: 
2023-05-10 20:55:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37241266152542208 [0;39m <==    Updates: 0
2023-05-10 20:55:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m37241266152542208 [0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-05-10 20:55:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37241287077924864 [0;39m 更新电子书下的文档数据开始
2023-05-10 20:55:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37241287077924864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 20:55:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37241287077924864 [0;39m ==> Parameters: 
2023-05-10 20:55:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37241287077924864 [0;39m <==    Updates: 1
2023-05-10 20:55:05.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37241287077924864 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-05-10 20:55:08.972 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:55:10.996 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:55:19.566 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:55:22.765 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:55:33.027 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:55:35.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37241412948987904 [0;39m 更新电子书下的文档数据开始
2023-05-10 20:55:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37241412948987904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 20:55:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37241412948987904 [0;39m ==> Parameters: 
2023-05-10 20:55:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37241412948987904 [0;39m <==    Updates: 1
2023-05-10 20:55:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37241412948987904 [0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-05-10 20:55:35.065 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:55:49.565 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:55:50.720 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:55:52.761 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:55:59.132 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:56:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m37241517760450560 [0;39m 生成今日电子书快照开始
2023-05-10 20:56:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37241517760450560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-10 20:56:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37241517760450560 [0;39m ==> Parameters: 
2023-05-10 20:56:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37241517760450560 [0;39m <==    Updates: 0
2023-05-10 20:56:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m37241517760450560 [0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-05-10 20:56:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37241538769719296 [0;39m 更新电子书下的文档数据开始
2023-05-10 20:56:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37241538769719296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 20:56:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37241538769719296 [0;39m ==> Parameters: 
2023-05-10 20:56:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37241538769719296 [0;39m <==    Updates: 1
2023-05-10 20:56:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37241538769719296 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-05-10 20:56:19.579 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:56:20.714 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:56:22.740 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:56:24.782 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:56:35.000 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37241664540119040 [0;39m 更新电子书下的文档数据开始
2023-05-10 20:56:35.000 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37241664540119040 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 20:56:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37241664540119040 [0;39m ==> Parameters: 
2023-05-10 20:56:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37241664540119040 [0;39m <==    Updates: 1
2023-05-10 20:56:35.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37241664540119040 [0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-05-10 20:56:40.720 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37241688531537920 [0;39m ------------- 开始 -------------
2023-05-10 20:56:40.720 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37241688531537920 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2023-05-10 20:56:40.720 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37241688531537920 [0;39m 类名方法: com.jiawa.wiki.controller.CategoryController.all
2023-05-10 20:56:40.720 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37241688531537920 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:56:40.720 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37241688531537920 [0;39m 请求参数: []
2023-05-10 20:56:40.725 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37241688531537920 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-05-10 20:56:40.725 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37241688531537920 [0;39m ==> Parameters: 
2023-05-10 20:56:40.725 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241688531537920 [0;39m <==    Columns: id, parent, name, sort
2023-05-10 20:56:40.725 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241688531537920 [0;39m <==        Row: 100, 0, 前端开发, 100
2023-05-10 20:56:40.728 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241688531537920 [0;39m <==        Row: 101, 100, Vue, 101
2023-05-10 20:56:40.728 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241688531537920 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-05-10 20:56:40.728 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241688531537920 [0;39m <==        Row: 200, 0, Java, 200
2023-05-10 20:56:40.728 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241688531537920 [0;39m <==        Row: 201, 200, 基础应用, 201
2023-05-10 20:56:40.728 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241688531537920 [0;39m <==        Row: 202, 200, 框架应用, 202
2023-05-10 20:56:40.728 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241688531537920 [0;39m <==        Row: 300, 0, Python, 300
2023-05-10 20:56:40.728 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241688531537920 [0;39m <==        Row: 301, 300, 基础应用, 301
2023-05-10 20:56:40.728 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241688531537920 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2023-05-10 20:56:40.728 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241688531537920 [0;39m <==        Row: 400, 0, 数据库, 400
2023-05-10 20:56:40.728 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241688531537920 [0;39m <==        Row: 401, 400, MySQL, 401
2023-05-10 20:56:40.728 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241688531537920 [0;39m <==        Row: 500, 0, 其它, 500
2023-05-10 20:56:40.728 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241688531537920 [0;39m <==        Row: 501, 500, 服务器, 501
2023-05-10 20:56:40.728 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241688531537920 [0;39m <==        Row: 502, 500, 开发工具, 502
2023-05-10 20:56:40.728 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241688531537920 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2023-05-10 20:56:40.728 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37241688531537920 [0;39m <==      Total: 15
2023-05-10 20:56:40.735 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37241688531537920 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2023-05-10 20:56:40.735 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37241688531537920 [0;39m ------------- 结束 耗时：15 ms -------------
2023-05-10 20:56:44.756 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m37240022679818240 [0;39m ------------- LoginInterceptor 开始 -------------
2023-05-10 20:56:44.756 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m37240022679818240 [0;39m 接口登录拦截：，path：http://127.0.0.1:8880/user/list
2023-05-10 20:56:44.756 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m37240022679818240 [0;39m 登录校验开始，token：37240012022091776
2023-05-10 20:56:44.756 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m37240022679818240 [0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"37240012022091776"}
2023-05-10 20:56:44.756 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37241705459748864 [0;39m ------------- 开始 -------------
2023-05-10 20:56:44.756 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37241705459748864 [0;39m 请求地址: http://127.0.0.1:8880/user/list GET
2023-05-10 20:56:44.756 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37241705459748864 [0;39m 类名方法: com.jiawa.wiki.controller.UserController.list
2023-05-10 20:56:44.756 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37241705459748864 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:56:44.756 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37241705459748864 [0;39m 请求参数: [{"page":1,"size":10}]
2023-05-10 20:56:44.765 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m37241705459748864 [0;39m ==>  Preparing: SELECT count(0) FROM user
2023-05-10 20:56:44.765 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m37241705459748864 [0;39m ==> Parameters: 
2023-05-10 20:56:44.765 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m37241705459748864 [0;39m <==    Columns: count(0)
2023-05-10 20:56:44.765 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m37241705459748864 [0;39m <==        Row: 1
2023-05-10 20:56:44.765 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m37241705459748864 [0;39m <==      Total: 1
2023-05-10 20:56:44.765 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m37241705459748864 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2023-05-10 20:56:44.765 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m37241705459748864 [0;39m ==> Parameters: 10(Integer)
2023-05-10 20:56:44.765 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m37241705459748864 [0;39m <==    Columns: id, login_name, name, password
2023-05-10 20:56:44.765 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m37241705459748864 [0;39m <==        Row: 1, test, 测试, e70e2222a9d67c4f2eae107533359aa4
2023-05-10 20:56:44.773 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m37241705459748864 [0;39m <==      Total: 1
2023-05-10 20:56:44.773 INFO  com.jiawa.wiki.service.UserService                :49   [32m37241705459748864 [0;39m 总行数：1
2023-05-10 20:56:44.773 INFO  com.jiawa.wiki.service.UserService                :50   [32m37241705459748864 [0;39m 总页数：1
2023-05-10 20:56:44.773 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37241705459748864 [0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"}],"total":1},"success":true}
2023-05-10 20:56:44.773 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37241705459748864 [0;39m ------------- 结束 耗时：17 ms -------------
2023-05-10 20:56:44.775 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m37241705459748864 [0;39m ------------- LoginInterceptor 结束 耗时：19 ms -------------
2023-05-10 20:56:45.540 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37241708748083201 [0;39m ------------- 开始 -------------
2023-05-10 20:56:45.540 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37241708748083200 [0;39m ------------- 开始 -------------
2023-05-10 20:56:45.540 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37241708748083201 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2023-05-10 20:56:45.540 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37241708748083202 [0;39m ------------- 开始 -------------
2023-05-10 20:56:45.540 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37241708748083201 [0;39m 类名方法: com.jiawa.wiki.controller.CategoryController.all
2023-05-10 20:56:45.540 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37241708748083202 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-05-10 20:56:45.540 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37241708748083201 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:56:45.540 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37241708748083202 [0;39m 类名方法: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-05-10 20:56:45.540 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37241708748083200 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-05-10 20:56:45.540 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37241708748083201 [0;39m 请求参数: []
2023-05-10 20:56:45.540 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37241708748083200 [0;39m 类名方法: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-05-10 20:56:45.540 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37241708748083202 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:56:45.540 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37241708748083200 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:56:45.540 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37241708748083202 [0;39m 请求参数: []
2023-05-10 20:56:45.540 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37241708748083200 [0;39m 请求参数: []
2023-05-10 20:56:45.540 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m37241708748083200 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-05-10 20:56:45.540 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m37241708748083202 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-05-10 20:56:45.540 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37241708748083201 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-05-10 20:56:45.540 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m37241708748083200 [0;39m ==> Parameters: 
2023-05-10 20:56:45.540 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m37241708748083202 [0;39m ==> Parameters: 
2023-05-10 20:56:45.540 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37241708748083201 [0;39m ==> Parameters: 
2023-05-10 20:56:45.545 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m37241708748083202 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-05-10 20:56:45.545 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m37241708748083200 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-05-10 20:56:45.545 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241708748083201 [0;39m <==    Columns: id, parent, name, sort
2023-05-10 20:56:45.545 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241708748083201 [0;39m <==        Row: 100, 0, 前端开发, 100
2023-05-10 20:56:45.545 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m37241708748083202 [0;39m <==        Row: 2023-04-24, 10, 7
2023-05-10 20:56:45.545 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m37241708748083200 [0;39m <==        Row: 2023-05-10, 10, 7, 10, 7
2023-05-10 20:56:45.545 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241708748083201 [0;39m <==        Row: 101, 100, Vue, 101
2023-05-10 20:56:45.545 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m37241708748083200 [0;39m <==      Total: 1
2023-05-10 20:56:45.545 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m37241708748083202 [0;39m <==      Total: 1
2023-05-10 20:56:45.545 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241708748083201 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-05-10 20:56:45.545 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37241708748083202 [0;39m 返回结果: {"content":[{"date":1682265600000,"viewCount":0,"viewIncrease":10,"voteCount":0,"voteIncrease":7}],"success":true}
2023-05-10 20:56:45.545 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241708748083201 [0;39m <==        Row: 200, 0, Java, 200
2023-05-10 20:56:45.548 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37241708748083202 [0;39m ------------- 结束 耗时：8 ms -------------
2023-05-10 20:56:45.548 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241708748083201 [0;39m <==        Row: 201, 200, 基础应用, 201
2023-05-10 20:56:45.548 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37241708748083200 [0;39m 返回结果: {"content":[{"date":1683648000000,"viewCount":10,"viewIncrease":10,"voteCount":7,"voteIncrease":7}],"success":true}
2023-05-10 20:56:45.548 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37241708748083200 [0;39m ------------- 结束 耗时：8 ms -------------
2023-05-10 20:56:45.548 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241708748083201 [0;39m <==        Row: 202, 200, 框架应用, 202
2023-05-10 20:56:45.548 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241708748083201 [0;39m <==        Row: 300, 0, Python, 300
2023-05-10 20:56:45.548 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241708748083201 [0;39m <==        Row: 301, 300, 基础应用, 301
2023-05-10 20:56:45.548 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241708748083201 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2023-05-10 20:56:45.548 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241708748083201 [0;39m <==        Row: 400, 0, 数据库, 400
2023-05-10 20:56:45.548 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241708748083201 [0;39m <==        Row: 401, 400, MySQL, 401
2023-05-10 20:56:45.548 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241708748083201 [0;39m <==        Row: 500, 0, 其它, 500
2023-05-10 20:56:45.548 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241708748083201 [0;39m <==        Row: 501, 500, 服务器, 501
2023-05-10 20:56:45.548 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241708748083201 [0;39m <==        Row: 502, 500, 开发工具, 502
2023-05-10 20:56:45.548 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241708748083201 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2023-05-10 20:56:45.548 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37241708748083201 [0;39m <==      Total: 15
2023-05-10 20:56:45.548 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37241708748083201 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2023-05-10 20:56:45.548 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37241708748083201 [0;39m ------------- 结束 耗时：8 ms -------------
2023-05-10 20:56:46.903 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37241714464919552 [0;39m ------------- 开始 -------------
2023-05-10 20:56:46.903 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37241714464919552 [0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2023-05-10 20:56:46.907 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37241714464919552 [0;39m 类名方法: com.jiawa.wiki.controller.EbookController.list
2023-05-10 20:56:46.907 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37241714464919552 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:56:46.907 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37241714464919552 [0;39m 请求参数: [{"categoryId2":102,"page":1,"size":1000}]
2023-05-10 20:56:46.913 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m37241714464919552 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-05-10 20:56:46.913 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m37241714464919552 [0;39m ==> Parameters: 102(Long)
2023-05-10 20:56:46.915 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m37241714464919552 [0;39m <==    Columns: count(0)
2023-05-10 20:56:46.915 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m37241714464919552 [0;39m <==        Row: 0
2023-05-10 20:56:46.915 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m37241714464919552 [0;39m <==      Total: 1
2023-05-10 20:56:46.915 INFO  com.jiawa.wiki.service.EbookService               :48   [32m37241714464919552 [0;39m 总行数：0
2023-05-10 20:56:46.915 INFO  com.jiawa.wiki.service.EbookService               :49   [32m37241714464919552 [0;39m 总页数：0
2023-05-10 20:56:46.915 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37241714464919552 [0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2023-05-10 20:56:46.915 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37241714464919552 [0;39m ------------- 结束 耗时：12 ms -------------
2023-05-10 20:56:47.688 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37241717757448192 [0;39m ------------- 开始 -------------
2023-05-10 20:56:47.688 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37241717757448192 [0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2023-05-10 20:56:47.695 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37241717757448192 [0;39m 类名方法: com.jiawa.wiki.controller.EbookController.list
2023-05-10 20:56:47.695 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37241717757448192 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:56:47.695 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37241717757448192 [0;39m 请求参数: [{"categoryId2":101,"page":1,"size":1000}]
2023-05-10 20:56:47.696 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m37241717757448192 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-05-10 20:56:47.705 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m37241717757448192 [0;39m ==> Parameters: 101(Long)
2023-05-10 20:56:47.705 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m37241717757448192 [0;39m <==    Columns: count(0)
2023-05-10 20:56:47.705 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m37241717757448192 [0;39m <==        Row: 1
2023-05-10 20:56:47.705 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m37241717757448192 [0;39m <==      Total: 1
2023-05-10 20:56:47.705 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m37241717757448192 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-05-10 20:56:47.705 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m37241717757448192 [0;39m ==> Parameters: 101(Long), 1000(Integer)
2023-05-10 20:56:47.705 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m37241717757448192 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-05-10 20:56:47.705 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m37241717757448192 [0;39m <==        Row: 2, Vue 入门教程, 100, 101, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-05-10 20:56:47.705 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m37241717757448192 [0;39m <==      Total: 1
2023-05-10 20:56:47.713 INFO  com.jiawa.wiki.service.EbookService               :48   [32m37241717757448192 [0;39m 总行数：1
2023-05-10 20:56:47.713 INFO  com.jiawa.wiki.service.EbookService               :49   [32m37241717757448192 [0;39m 总页数：1
2023-05-10 20:56:47.714 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37241717757448192 [0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0}],"total":1},"success":true}
2023-05-10 20:56:47.714 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37241717757448192 [0;39m ------------- 结束 耗时：26 ms -------------
2023-05-10 20:56:48.907 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:56:49.155 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37241723910492160 [0;39m ------------- 开始 -------------
2023-05-10 20:56:49.155 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37241723910492160 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2023-05-10 20:56:49.155 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37241723910492160 [0;39m 类名方法: com.jiawa.wiki.controller.CategoryController.all
2023-05-10 20:56:49.155 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37241723910492160 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:56:49.155 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37241723910492160 [0;39m 请求参数: []
2023-05-10 20:56:49.155 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37241723910492160 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-05-10 20:56:49.163 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37241723910492160 [0;39m ==> Parameters: 
2023-05-10 20:56:49.165 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241723910492160 [0;39m <==    Columns: id, parent, name, sort
2023-05-10 20:56:49.165 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241723910492160 [0;39m <==        Row: 100, 0, 前端开发, 100
2023-05-10 20:56:49.165 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241723910492160 [0;39m <==        Row: 101, 100, Vue, 101
2023-05-10 20:56:49.165 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241723910492160 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-05-10 20:56:49.165 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241723910492160 [0;39m <==        Row: 200, 0, Java, 200
2023-05-10 20:56:49.165 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241723910492160 [0;39m <==        Row: 201, 200, 基础应用, 201
2023-05-10 20:56:49.165 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241723910492160 [0;39m <==        Row: 202, 200, 框架应用, 202
2023-05-10 20:56:49.165 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241723910492160 [0;39m <==        Row: 300, 0, Python, 300
2023-05-10 20:56:49.165 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241723910492160 [0;39m <==        Row: 301, 300, 基础应用, 301
2023-05-10 20:56:49.165 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241723910492160 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2023-05-10 20:56:49.165 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241723910492160 [0;39m <==        Row: 400, 0, 数据库, 400
2023-05-10 20:56:49.165 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241723910492160 [0;39m <==        Row: 401, 400, MySQL, 401
2023-05-10 20:56:49.165 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241723910492160 [0;39m <==        Row: 500, 0, 其它, 500
2023-05-10 20:56:49.165 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241723910492160 [0;39m <==        Row: 501, 500, 服务器, 501
2023-05-10 20:56:49.165 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241723910492160 [0;39m <==        Row: 502, 500, 开发工具, 502
2023-05-10 20:56:49.171 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241723910492160 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2023-05-10 20:56:49.171 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37241723910492160 [0;39m <==      Total: 15
2023-05-10 20:56:49.171 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37241723910492160 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2023-05-10 20:56:49.171 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37241723910492160 [0;39m ------------- 结束 耗时：16 ms -------------
2023-05-10 20:56:49.201 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37241724103430144 [0;39m ------------- 开始 -------------
2023-05-10 20:56:49.201 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37241724103430144 [0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2023-05-10 20:56:49.201 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37241724103430144 [0;39m 类名方法: com.jiawa.wiki.controller.EbookController.list
2023-05-10 20:56:49.201 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37241724103430144 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:56:49.201 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37241724103430144 [0;39m 请求参数: [{"page":1,"size":10}]
2023-05-10 20:56:49.205 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m37241724103430144 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-05-10 20:56:49.205 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m37241724103430144 [0;39m ==> Parameters: 
2023-05-10 20:56:49.208 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m37241724103430144 [0;39m <==    Columns: count(0)
2023-05-10 20:56:49.208 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m37241724103430144 [0;39m <==        Row: 5
2023-05-10 20:56:49.208 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m37241724103430144 [0;39m <==      Total: 1
2023-05-10 20:56:49.208 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m37241724103430144 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-05-10 20:56:49.212 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m37241724103430144 [0;39m ==> Parameters: 10(Integer)
2023-05-10 20:56:49.213 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m37241724103430144 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-05-10 20:56:49.213 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m37241724103430144 [0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 10, 7
2023-05-10 20:56:49.213 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m37241724103430144 [0;39m <==        Row: 2, Vue 入门教程, 100, 101, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-05-10 20:56:49.215 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m37241724103430144 [0;39m <==        Row: 3, Python 入门教程, 300, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-05-10 20:56:49.215 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m37241724103430144 [0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-05-10 20:56:49.215 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m37241724103430144 [0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-05-10 20:56:49.215 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m37241724103430144 [0;39m <==      Total: 5
2023-05-10 20:56:49.218 INFO  com.jiawa.wiki.service.EbookService               :48   [32m37241724103430144 [0;39m 总行数：5
2023-05-10 20:56:49.218 INFO  com.jiawa.wiki.service.EbookService               :49   [32m37241724103430144 [0;39m 总页数：1
2023-05-10 20:56:49.219 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37241724103430144 [0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":10,"voteCount":7},{"category1Id":100,"category2Id":101,"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"category1Id":300,"category2Id":301,"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-05-10 20:56:49.219 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37241724103430144 [0;39m ------------- 结束 耗时：18 ms -------------
2023-05-10 20:56:49.559 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:56:49.803 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37241726628401152 [0;39m ------------- 开始 -------------
2023-05-10 20:56:49.803 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37241726628401152 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2023-05-10 20:56:49.803 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37241726628401152 [0;39m 类名方法: com.jiawa.wiki.controller.CategoryController.all
2023-05-10 20:56:49.803 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37241726628401152 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:56:49.803 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37241726628401152 [0;39m 请求参数: []
2023-05-10 20:56:49.807 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37241726628401152 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-05-10 20:56:49.807 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37241726628401152 [0;39m ==> Parameters: 
2023-05-10 20:56:49.807 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241726628401152 [0;39m <==    Columns: id, parent, name, sort
2023-05-10 20:56:49.807 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241726628401152 [0;39m <==        Row: 100, 0, 前端开发, 100
2023-05-10 20:56:49.807 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241726628401152 [0;39m <==        Row: 101, 100, Vue, 101
2023-05-10 20:56:49.807 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241726628401152 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-05-10 20:56:49.807 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241726628401152 [0;39m <==        Row: 200, 0, Java, 200
2023-05-10 20:56:49.807 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241726628401152 [0;39m <==        Row: 201, 200, 基础应用, 201
2023-05-10 20:56:49.807 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241726628401152 [0;39m <==        Row: 202, 200, 框架应用, 202
2023-05-10 20:56:49.807 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241726628401152 [0;39m <==        Row: 300, 0, Python, 300
2023-05-10 20:56:49.807 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241726628401152 [0;39m <==        Row: 301, 300, 基础应用, 301
2023-05-10 20:56:49.811 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241726628401152 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2023-05-10 20:56:49.811 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241726628401152 [0;39m <==        Row: 400, 0, 数据库, 400
2023-05-10 20:56:49.811 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241726628401152 [0;39m <==        Row: 401, 400, MySQL, 401
2023-05-10 20:56:49.811 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241726628401152 [0;39m <==        Row: 500, 0, 其它, 500
2023-05-10 20:56:49.811 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241726628401152 [0;39m <==        Row: 501, 500, 服务器, 501
2023-05-10 20:56:49.814 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241726628401152 [0;39m <==        Row: 502, 500, 开发工具, 502
2023-05-10 20:56:49.814 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241726628401152 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2023-05-10 20:56:49.814 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37241726628401152 [0;39m <==      Total: 15
2023-05-10 20:56:49.815 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37241726628401152 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2023-05-10 20:56:49.815 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37241726628401152 [0;39m ------------- 结束 耗时：12 ms -------------
2023-05-10 20:56:52.593 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37241738330509312 [0;39m ------------- 开始 -------------
2023-05-10 20:56:52.595 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37241738330509312 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2023-05-10 20:56:52.595 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37241738330509312 [0;39m 类名方法: com.jiawa.wiki.controller.CategoryController.all
2023-05-10 20:56:52.595 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37241738330509312 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:56:52.595 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37241738330509312 [0;39m 请求参数: []
2023-05-10 20:56:52.595 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37241738330509312 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-05-10 20:56:52.595 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37241738330509312 [0;39m ==> Parameters: 
2023-05-10 20:56:52.595 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241738330509312 [0;39m <==    Columns: id, parent, name, sort
2023-05-10 20:56:52.595 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241738330509312 [0;39m <==        Row: 100, 0, 前端开发, 100
2023-05-10 20:56:52.595 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241738330509312 [0;39m <==        Row: 101, 100, Vue, 101
2023-05-10 20:56:52.595 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241738330509312 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-05-10 20:56:52.595 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241738330509312 [0;39m <==        Row: 200, 0, Java, 200
2023-05-10 20:56:52.601 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241738330509312 [0;39m <==        Row: 201, 200, 基础应用, 201
2023-05-10 20:56:52.601 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241738330509312 [0;39m <==        Row: 202, 200, 框架应用, 202
2023-05-10 20:56:52.602 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241738330509312 [0;39m <==        Row: 300, 0, Python, 300
2023-05-10 20:56:52.602 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241738330509312 [0;39m <==        Row: 301, 300, 基础应用, 301
2023-05-10 20:56:52.602 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241738330509312 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2023-05-10 20:56:52.603 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241738330509312 [0;39m <==        Row: 400, 0, 数据库, 400
2023-05-10 20:56:52.603 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241738330509312 [0;39m <==        Row: 401, 400, MySQL, 401
2023-05-10 20:56:52.604 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241738330509312 [0;39m <==        Row: 500, 0, 其它, 500
2023-05-10 20:56:52.604 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241738330509312 [0;39m <==        Row: 501, 500, 服务器, 501
2023-05-10 20:56:52.604 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241738330509312 [0;39m <==        Row: 502, 500, 开发工具, 502
2023-05-10 20:56:52.605 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241738330509312 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2023-05-10 20:56:52.605 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37241738330509312 [0;39m <==      Total: 15
2023-05-10 20:56:52.606 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37241738330509312 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2023-05-10 20:56:52.606 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37241738330509312 [0;39m ------------- 结束 耗时：13 ms -------------
2023-05-10 20:56:52.639 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37241738523447296 [0;39m ------------- 开始 -------------
2023-05-10 20:56:52.645 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37241738523447296 [0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2023-05-10 20:56:52.645 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37241738523447296 [0;39m 类名方法: com.jiawa.wiki.controller.EbookController.list
2023-05-10 20:56:52.645 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37241738523447296 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:56:52.645 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37241738523447296 [0;39m 请求参数: [{"page":1,"size":10}]
2023-05-10 20:56:52.655 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m37241738523447296 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-05-10 20:56:52.655 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m37241738523447296 [0;39m ==> Parameters: 
2023-05-10 20:56:52.663 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m37241738523447296 [0;39m <==    Columns: count(0)
2023-05-10 20:56:52.665 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m37241738523447296 [0;39m <==        Row: 5
2023-05-10 20:56:52.665 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m37241738523447296 [0;39m <==      Total: 1
2023-05-10 20:56:52.665 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m37241738523447296 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-05-10 20:56:52.665 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m37241738523447296 [0;39m ==> Parameters: 10(Integer)
2023-05-10 20:56:52.670 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m37241738523447296 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-05-10 20:56:52.670 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m37241738523447296 [0;39m <==        Row: 1, Spring Boot 入门教程, 200, 202, 零基础入门 Java 开发，企业级应用开发最佳首选框架, null, 6, 10, 7
2023-05-10 20:56:52.671 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m37241738523447296 [0;39m <==        Row: 2, Vue 入门教程, 100, 101, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-05-10 20:56:52.671 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m37241738523447296 [0;39m <==        Row: 3, Python 入门教程, 300, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-05-10 20:56:52.675 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m37241738523447296 [0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-05-10 20:56:52.675 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m37241738523447296 [0;39m <==        Row: 5, Oracle 入门教程, null, null, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-05-10 20:56:52.675 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m37241738523447296 [0;39m <==      Total: 5
2023-05-10 20:56:52.675 INFO  com.jiawa.wiki.service.EbookService               :48   [32m37241738523447296 [0;39m 总行数：5
2023-05-10 20:56:52.675 INFO  com.jiawa.wiki.service.EbookService               :49   [32m37241738523447296 [0;39m 总页数：1
2023-05-10 20:56:52.675 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37241738523447296 [0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":10,"voteCount":7},{"category1Id":100,"category2Id":101,"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0},{"category1Id":300,"category2Id":301,"description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle 入门教程","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-05-10 20:56:52.675 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37241738523447296 [0;39m ------------- 结束 耗时：36 ms -------------
2023-05-10 20:56:52.958 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:56:53.032 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m37241708748083201 [0;39m ------------- LoginInterceptor 开始 -------------
2023-05-10 20:56:53.032 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m37241708748083201 [0;39m 接口登录拦截：，path：http://127.0.0.1:8880/user/list
2023-05-10 20:56:53.032 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m37241708748083201 [0;39m 登录校验开始，token：37240012022091776
2023-05-10 20:56:53.035 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m37241708748083201 [0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"37240012022091776"}
2023-05-10 20:56:53.035 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37241740184391680 [0;39m ------------- 开始 -------------
2023-05-10 20:56:53.035 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37241740184391680 [0;39m 请求地址: http://127.0.0.1:8880/user/list GET
2023-05-10 20:56:53.035 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37241740184391680 [0;39m 类名方法: com.jiawa.wiki.controller.UserController.list
2023-05-10 20:56:53.035 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37241740184391680 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:56:53.035 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37241740184391680 [0;39m 请求参数: [{"page":1,"size":10}]
2023-05-10 20:56:53.040 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m37241740184391680 [0;39m ==>  Preparing: SELECT count(0) FROM user
2023-05-10 20:56:53.040 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m37241740184391680 [0;39m ==> Parameters: 
2023-05-10 20:56:53.040 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m37241740184391680 [0;39m <==    Columns: count(0)
2023-05-10 20:56:53.040 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m37241740184391680 [0;39m <==        Row: 1
2023-05-10 20:56:53.040 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m37241740184391680 [0;39m <==      Total: 1
2023-05-10 20:56:53.045 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m37241740184391680 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2023-05-10 20:56:53.045 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m37241740184391680 [0;39m ==> Parameters: 10(Integer)
2023-05-10 20:56:53.045 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m37241740184391680 [0;39m <==    Columns: id, login_name, name, password
2023-05-10 20:56:53.045 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m37241740184391680 [0;39m <==        Row: 1, test, 测试, e70e2222a9d67c4f2eae107533359aa4
2023-05-10 20:56:53.045 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m37241740184391680 [0;39m <==      Total: 1
2023-05-10 20:56:53.048 INFO  com.jiawa.wiki.service.UserService                :49   [32m37241740184391680 [0;39m 总行数：1
2023-05-10 20:56:53.048 INFO  com.jiawa.wiki.service.UserService                :50   [32m37241740184391680 [0;39m 总页数：1
2023-05-10 20:56:53.048 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37241740184391680 [0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"}],"total":1},"success":true}
2023-05-10 20:56:53.048 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37241740184391680 [0;39m ------------- 结束 耗时：13 ms -------------
2023-05-10 20:56:53.048 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m37241740184391680 [0;39m ------------- LoginInterceptor 结束 耗时：16 ms -------------
2023-05-10 20:56:53.735 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37241743120404480 [0;39m ------------- 开始 -------------
2023-05-10 20:56:53.735 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37241743120404480 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-05-10 20:56:53.735 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37241743120404482 [0;39m ------------- 开始 -------------
2023-05-10 20:56:53.735 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37241743120404480 [0;39m 类名方法: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-05-10 20:56:53.735 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37241743120404482 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2023-05-10 20:56:53.735 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37241743120404480 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:56:53.735 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37241743120404482 [0;39m 类名方法: com.jiawa.wiki.controller.CategoryController.all
2023-05-10 20:56:53.742 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37241743120404480 [0;39m 请求参数: []
2023-05-10 20:56:53.742 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37241743120404482 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:56:53.735 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37241743120404481 [0;39m ------------- 开始 -------------
2023-05-10 20:56:53.742 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37241743120404482 [0;39m 请求参数: []
2023-05-10 20:56:53.742 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m37241743120404480 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-05-10 20:56:53.742 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37241743120404482 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-05-10 20:56:53.742 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37241743120404481 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-05-10 20:56:53.742 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m37241743120404480 [0;39m ==> Parameters: 
2023-05-10 20:56:53.742 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37241743120404482 [0;39m ==> Parameters: 
2023-05-10 20:56:53.742 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37241743120404481 [0;39m 类名方法: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-05-10 20:56:53.742 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37241743120404481 [0;39m 远程地址: 127.0.0.1
2023-05-10 20:56:53.742 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37241743120404481 [0;39m 请求参数: []
2023-05-10 20:56:53.742 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241743120404482 [0;39m <==    Columns: id, parent, name, sort
2023-05-10 20:56:53.742 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m37241743120404480 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-05-10 20:56:53.742 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241743120404482 [0;39m <==        Row: 100, 0, 前端开发, 100
2023-05-10 20:56:53.745 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m37241743120404480 [0;39m <==        Row: 2023-05-10, 10, 7, 10, 7
2023-05-10 20:56:53.745 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241743120404482 [0;39m <==        Row: 101, 100, Vue, 101
2023-05-10 20:56:53.745 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241743120404482 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-05-10 20:56:53.745 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m37241743120404480 [0;39m <==      Total: 1
2023-05-10 20:56:53.745 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241743120404482 [0;39m <==        Row: 200, 0, Java, 200
2023-05-10 20:56:53.745 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241743120404482 [0;39m <==        Row: 201, 200, 基础应用, 201
2023-05-10 20:56:53.745 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37241743120404480 [0;39m 返回结果: {"content":[{"date":1683648000000,"viewCount":10,"viewIncrease":10,"voteCount":7,"voteIncrease":7}],"success":true}
2023-05-10 20:56:53.745 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37241743120404480 [0;39m ------------- 结束 耗时：10 ms -------------
2023-05-10 20:56:53.745 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241743120404482 [0;39m <==        Row: 202, 200, 框架应用, 202
2023-05-10 20:56:53.745 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241743120404482 [0;39m <==        Row: 300, 0, Python, 300
2023-05-10 20:56:53.745 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241743120404482 [0;39m <==        Row: 301, 300, 基础应用, 301
2023-05-10 20:56:53.745 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m37241743120404481 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-05-10 20:56:53.745 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241743120404482 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2023-05-10 20:56:53.745 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241743120404482 [0;39m <==        Row: 400, 0, 数据库, 400
2023-05-10 20:56:53.745 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241743120404482 [0;39m <==        Row: 401, 400, MySQL, 401
2023-05-10 20:56:53.745 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m37241743120404481 [0;39m ==> Parameters: 
2023-05-10 20:56:53.745 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241743120404482 [0;39m <==        Row: 500, 0, 其它, 500
2023-05-10 20:56:53.745 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241743120404482 [0;39m <==        Row: 501, 500, 服务器, 501
2023-05-10 20:56:53.750 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241743120404482 [0;39m <==        Row: 502, 500, 开发工具, 502
2023-05-10 20:56:53.750 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37241743120404482 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2023-05-10 20:56:53.750 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37241743120404482 [0;39m <==      Total: 15
2023-05-10 20:56:53.750 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m37241743120404481 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-05-10 20:56:53.750 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m37241743120404481 [0;39m <==        Row: 2023-04-24, 10, 7
2023-05-10 20:56:53.750 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37241743120404482 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2023-05-10 20:56:53.750 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m37241743120404481 [0;39m <==      Total: 1
2023-05-10 20:56:53.750 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37241743120404482 [0;39m ------------- 结束 耗时：15 ms -------------
2023-05-10 20:56:53.750 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37241743120404481 [0;39m 返回结果: {"content":[{"date":1682265600000,"viewCount":0,"viewIncrease":10,"voteCount":0,"voteIncrease":7}],"success":true}
2023-05-10 20:56:53.750 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37241743120404481 [0;39m ------------- 结束 耗时：15 ms -------------
2023-05-10 20:56:54.985 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:57:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m37241769431273472 [0;39m 生成今日电子书快照开始
2023-05-10 20:57:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37241769431273472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-10 20:57:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37241769431273472 [0;39m ==> Parameters: 
2023-05-10 20:57:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37241769431273472 [0;39m <==    Updates: 0
2023-05-10 20:57:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m37241769431273472 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2023-05-10 20:57:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37241790402793472 [0;39m 更新电子书下的文档数据开始
2023-05-10 20:57:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37241790402793472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 20:57:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37241790402793472 [0;39m ==> Parameters: 
2023-05-10 20:57:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37241790402793472 [0;39m <==    Updates: 1
2023-05-10 20:57:05.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37241790402793472 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-05-10 20:57:10.927 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:57:12.971 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:57:19.577 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:57:20.741 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:57:22.775 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:57:34.996 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:57:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37241916219330560 [0;39m 更新电子书下的文档数据开始
2023-05-10 20:57:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37241916219330560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 20:57:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37241916219330560 [0;39m ==> Parameters: 
2023-05-10 20:57:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37241916219330560 [0;39m <==    Updates: 1
2023-05-10 20:57:35.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37241916219330560 [0;39m 更新电子书下的文档数据结束，耗时：1毫秒
2023-05-10 20:57:37.039 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:57:48.695 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:57:49.564 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:57:50.723 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:57:52.757 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:57:59.082 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:58:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m37242021118873600 [0;39m 生成今日电子书快照开始
2023-05-10 20:58:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37242021118873600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-10 20:58:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37242021118873600 [0;39m ==> Parameters: 
2023-05-10 20:58:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37242021118873600 [0;39m <==    Updates: 0
2023-05-10 20:58:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m37242021118873600 [0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-05-10 20:58:01.134 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:58:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37242042094587904 [0;39m 更新电子书下的文档数据开始
2023-05-10 20:58:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37242042094587904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 20:58:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37242042094587904 [0;39m ==> Parameters: 
2023-05-10 20:58:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37242042094587904 [0;39m <==    Updates: 1
2023-05-10 20:58:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37242042094587904 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-05-10 20:58:18.698 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:58:19.571 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:58:20.707 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:58:22.733 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:58:26.801 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:58:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37242167898542080 [0;39m 更新电子书下的文档数据开始
2023-05-10 20:58:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37242167898542080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 20:58:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37242167898542080 [0;39m ==> Parameters: 
2023-05-10 20:58:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37242167898542080 [0;39m <==    Updates: 1
2023-05-10 20:58:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37242167898542080 [0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-05-10 20:58:48.711 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:58:49.563 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:58:50.743 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:58:52.773 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:58:54.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:59:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m37242272760336384 [0;39m 生成今日电子书快照开始
2023-05-10 20:59:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37242272760336384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-10 20:59:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37242272760336384 [0;39m ==> Parameters: 
2023-05-10 20:59:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37242272760336384 [0;39m <==    Updates: 0
2023-05-10 20:59:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m37242272760336384 [0;39m 生成今日电子书快照结束，耗时：6毫秒
2023-05-10 20:59:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37242293710884864 [0;39m 更新电子书下的文档数据开始
2023-05-10 20:59:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37242293710884864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 20:59:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37242293710884864 [0;39m ==> Parameters: 
2023-05-10 20:59:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37242293710884864 [0;39m <==    Updates: 1
2023-05-10 20:59:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37242293710884864 [0;39m 更新电子书下的文档数据结束，耗时：2毫秒
2023-05-10 20:59:16.859 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:59:18.896 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:59:19.576 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:59:20.915 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:59:22.945 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:59:24.962 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:59:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37242419569364992 [0;39m 更新电子书下的文档数据开始
2023-05-10 20:59:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37242419569364992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 20:59:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37242419569364992 [0;39m ==> Parameters: 
2023-05-10 20:59:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37242419569364992 [0;39m <==    Updates: 1
2023-05-10 20:59:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37242419569364992 [0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-05-10 20:59:40.947 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:59:42.991 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:59:48.698 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:59:49.588 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:59:50.746 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 20:59:52.790 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:00:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m37242524422770688 [0;39m 生成今日电子书快照开始
2023-05-10 21:00:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37242524422770688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-10 21:00:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37242524422770688 [0;39m ==> Parameters: 
2023-05-10 21:00:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37242524422770688 [0;39m <==    Updates: 0
2023-05-10 21:00:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m37242524422770688 [0;39m 生成今日电子书快照结束，耗时：3毫秒
2023-05-10 21:00:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37242545364930560 [0;39m 更新电子书下的文档数据开始
2023-05-10 21:00:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37242545364930560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 21:00:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37242545364930560 [0;39m ==> Parameters: 
2023-05-10 21:00:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37242545364930560 [0;39m <==    Updates: 1
2023-05-10 21:00:05.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37242545364930560 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-05-10 21:00:05.073 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:00:07.139 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:00:18.708 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:00:19.581 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:00:20.763 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:00:22.802 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:00:29.195 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:00:31.224 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:00:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37242671219216384 [0;39m 更新电子书下的文档数据开始
2023-05-10 21:00:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37242671219216384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 21:00:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37242671219216384 [0;39m ==> Parameters: 
2023-05-10 21:00:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37242671219216384 [0;39m <==    Updates: 1
2023-05-10 21:00:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37242671219216384 [0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-05-10 21:00:49.617 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:00:50.744 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:00:52.780 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:00:57.119 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:01:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m37242776106176512 [0;39m 生成今日电子书快照开始
2023-05-10 21:01:00.064 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37242776106176512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-10 21:01:00.069 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37242776106176512 [0;39m ==> Parameters: 
2023-05-10 21:01:00.078 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37242776106176512 [0;39m <==    Updates: 0
2023-05-10 21:01:00.079 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m37242776106176512 [0;39m 生成今日电子书快照结束，耗时：44毫秒
2023-05-10 21:01:05.056 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37242797216108544 [0;39m 更新电子书下的文档数据开始
2023-05-10 21:01:05.061 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37242797216108544 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 21:01:05.061 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37242797216108544 [0;39m ==> Parameters: 
2023-05-10 21:01:05.066 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37242797216108544 [0;39m <==    Updates: 1
2023-05-10 21:01:05.071 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37242797216108544 [0;39m 更新电子书下的文档数据结束，耗时：10毫秒
2023-05-10 21:01:19.563 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:01:24.795 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:01:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37242922852290560 [0;39m 更新电子书下的文档数据开始
2023-05-10 21:01:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37242922852290560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 21:01:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37242922852290560 [0;39m ==> Parameters: 
2023-05-10 21:01:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37242922852290560 [0;39m <==    Updates: 1
2023-05-10 21:01:35.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37242922852290560 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-05-10 21:01:48.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:01:49.554 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:01:52.880 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:02:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m37243027718279168 [0;39m 生成今日电子书快照开始
2023-05-10 21:02:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37243027718279168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-10 21:02:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37243027718279168 [0;39m ==> Parameters: 
2023-05-10 21:02:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37243027718279168 [0;39m <==    Updates: 0
2023-05-10 21:02:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m37243027718279168 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2023-05-10 21:02:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37243048698187776 [0;39m 更新电子书下的文档数据开始
2023-05-10 21:02:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37243048698187776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 21:02:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37243048698187776 [0;39m ==> Parameters: 
2023-05-10 21:02:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37243048698187776 [0;39m <==    Updates: 1
2023-05-10 21:02:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37243048698187776 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-05-10 21:02:13.904 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:02:19.559 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:02:22.733 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:02:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37243174523113472 [0;39m 更新电子书下的文档数据开始
2023-05-10 21:02:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37243174523113472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 21:02:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37243174523113472 [0;39m ==> Parameters: 
2023-05-10 21:02:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37243174523113472 [0;39m <==    Updates: 1
2023-05-10 21:02:35.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37243174523113472 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-05-10 21:02:35.935 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:02:37.972 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:02:49.563 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:02:50.724 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:02:52.787 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:03:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m37243279372324864 [0;39m 生成今日电子书快照开始
2023-05-10 21:03:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37243279372324864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-10 21:03:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37243279372324864 [0;39m ==> Parameters: 
2023-05-10 21:03:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37243279372324864 [0;39m <==    Updates: 0
2023-05-10 21:03:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m37243279372324864 [0;39m 生成今日电子书快照结束，耗时：1毫秒
2023-05-10 21:03:02.047 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:03:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37243300373204992 [0;39m 更新电子书下的文档数据开始
2023-05-10 21:03:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37243300373204992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 21:03:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37243300373204992 [0;39m ==> Parameters: 
2023-05-10 21:03:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37243300373204992 [0;39m <==    Updates: 1
2023-05-10 21:03:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37243300373204992 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-05-10 21:03:19.558 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:03:22.775 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:03:26.830 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:03:33.742 INFO  com.jiawa.wiki.websocket.WebSocketServer          :41   [32m37241726628401152 [0;39m 连接关闭，token：thovGP79Ep，session id：0！当前连接数：0
2023-05-10 21:03:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37243426164576256 [0;39m 更新电子书下的文档数据开始
2023-05-10 21:03:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37243426164576256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 21:03:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37243426164576256 [0;39m ==> Parameters: 
2023-05-10 21:03:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37243426164576256 [0;39m <==    Updates: 1
2023-05-10 21:03:35.004 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37243426164576256 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-05-10 21:03:37.030 INFO  com.jiawa.wiki.websocket.WebSocketServer          :32   [32m37241738330509312 [0;39m 有新连接：token：HUOBgTghyH，session id：1，当前连接数：1
2023-05-10 21:03:37.222 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37243435467542528 [0;39m ------------- 开始 -------------
2023-05-10 21:03:37.227 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37243435488514048 [0;39m ------------- 开始 -------------
2023-05-10 21:03:37.227 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37243435467542528 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-05-10 21:03:37.227 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37243435467542528 [0;39m 类名方法: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-05-10 21:03:37.227 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37243435488514048 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-05-10 21:03:37.227 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37243435467542528 [0;39m 远程地址: 127.0.0.1
2023-05-10 21:03:37.227 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37243435488514048 [0;39m 类名方法: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-05-10 21:03:37.227 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37243435467542528 [0;39m 请求参数: []
2023-05-10 21:03:37.227 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37243435488514048 [0;39m 远程地址: 127.0.0.1
2023-05-10 21:03:37.227 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37243435488514048 [0;39m 请求参数: []
2023-05-10 21:03:37.231 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m37243435488514048 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-05-10 21:03:37.231 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m37243435467542528 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-05-10 21:03:37.231 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37243435505291264 [0;39m ------------- 开始 -------------
2023-05-10 21:03:37.231 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37243435505291264 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2023-05-10 21:03:37.231 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m37243435488514048 [0;39m ==> Parameters: 
2023-05-10 21:03:37.231 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37243435505291264 [0;39m 类名方法: com.jiawa.wiki.controller.CategoryController.all
2023-05-10 21:03:37.231 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m37243435467542528 [0;39m ==> Parameters: 
2023-05-10 21:03:37.231 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37243435505291264 [0;39m 远程地址: 127.0.0.1
2023-05-10 21:03:37.231 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37243435505291264 [0;39m 请求参数: []
2023-05-10 21:03:37.231 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m37243435488514048 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-05-10 21:03:37.231 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37243435505291264 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-05-10 21:03:37.231 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m37243435467542528 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-05-10 21:03:37.231 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m37243435488514048 [0;39m <==        Row: 2023-04-24, 10, 7
2023-05-10 21:03:37.231 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m37243435467542528 [0;39m <==        Row: 2023-05-10, 10, 7, 10, 7
2023-05-10 21:03:37.231 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37243435505291264 [0;39m ==> Parameters: 
2023-05-10 21:03:37.231 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m37243435467542528 [0;39m <==      Total: 1
2023-05-10 21:03:37.231 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m37243435488514048 [0;39m <==      Total: 1
2023-05-10 21:03:37.231 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37243435467542528 [0;39m 返回结果: {"content":[{"date":1683648000000,"viewCount":10,"viewIncrease":10,"voteCount":7,"voteIncrease":7}],"success":true}
2023-05-10 21:03:37.231 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37243435467542528 [0;39m ------------- 结束 耗时：9 ms -------------
2023-05-10 21:03:37.231 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37243435488514048 [0;39m 返回结果: {"content":[{"date":1682265600000,"viewCount":0,"viewIncrease":10,"voteCount":0,"voteIncrease":7}],"success":true}
2023-05-10 21:03:37.231 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37243435488514048 [0;39m ------------- 结束 耗时：4 ms -------------
2023-05-10 21:03:37.231 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37243435505291264 [0;39m <==    Columns: id, parent, name, sort
2023-05-10 21:03:37.231 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37243435505291264 [0;39m <==        Row: 100, 0, 前端开发, 100
2023-05-10 21:03:37.237 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37243435505291264 [0;39m <==        Row: 101, 100, Vue, 101
2023-05-10 21:03:37.237 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37243435505291264 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-05-10 21:03:37.237 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37243435505291264 [0;39m <==        Row: 200, 0, Java, 200
2023-05-10 21:03:37.238 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37243435505291264 [0;39m <==        Row: 201, 200, 基础应用, 201
2023-05-10 21:03:37.238 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37243435505291264 [0;39m <==        Row: 202, 200, 框架应用, 202
2023-05-10 21:03:37.238 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37243435505291264 [0;39m <==        Row: 300, 0, Python, 300
2023-05-10 21:03:37.238 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37243435505291264 [0;39m <==        Row: 301, 300, 基础应用, 301
2023-05-10 21:03:37.238 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37243435505291264 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2023-05-10 21:03:37.238 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37243435505291264 [0;39m <==        Row: 400, 0, 数据库, 400
2023-05-10 21:03:37.238 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37243435505291264 [0;39m <==        Row: 401, 400, MySQL, 401
2023-05-10 21:03:37.238 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37243435505291264 [0;39m <==        Row: 500, 0, 其它, 500
2023-05-10 21:03:37.242 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37243435505291264 [0;39m <==        Row: 501, 500, 服务器, 501
2023-05-10 21:03:37.242 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37243435505291264 [0;39m <==        Row: 502, 500, 开发工具, 502
2023-05-10 21:03:37.242 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m37243435505291264 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2023-05-10 21:03:37.242 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m37243435505291264 [0;39m <==      Total: 15
2023-05-10 21:03:37.242 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37243435505291264 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2023-05-10 21:03:37.242 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37243435505291264 [0;39m ------------- 结束 耗时：11 ms -------------
2023-05-10 21:03:49.557 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:03:52.754 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:03:54.788 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:04:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m37243531034759168 [0;39m 生成今日电子书快照开始
2023-05-10 21:04:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37243531034759168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-10 21:04:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37243531034759168 [0;39m ==> Parameters: 
2023-05-10 21:04:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37243531034759168 [0;39m <==    Updates: 0
2023-05-10 21:04:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m37243531034759168 [0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-05-10 21:04:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37243552010473472 [0;39m 更新电子书下的文档数据开始
2023-05-10 21:04:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37243552010473472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 21:04:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37243552010473472 [0;39m ==> Parameters: 
2023-05-10 21:04:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37243552010473472 [0;39m <==    Updates: 1
2023-05-10 21:04:05.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37243552010473472 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-05-10 21:04:17.202 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m37243603155816448 [0;39m ------------- 开始 -------------
2023-05-10 21:04:17.202 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m37243603155816448 [0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2023-05-10 21:04:17.205 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m37243603155816448 [0;39m 类名方法: com.jiawa.wiki.controller.EbookController.list
2023-05-10 21:04:17.205 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m37243603155816448 [0;39m 远程地址: 127.0.0.1
2023-05-10 21:04:17.205 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m37243603155816448 [0;39m 请求参数: [{"categoryId2":101,"page":1,"size":1000}]
2023-05-10 21:04:17.212 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m37243603155816448 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-05-10 21:04:17.212 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m37243603155816448 [0;39m ==> Parameters: 101(Long)
2023-05-10 21:04:17.213 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m37243603155816448 [0;39m <==    Columns: count(0)
2023-05-10 21:04:17.213 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m37243603155816448 [0;39m <==        Row: 1
2023-05-10 21:04:17.217 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m37243603155816448 [0;39m <==      Total: 1
2023-05-10 21:04:17.217 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m37243603155816448 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-05-10 21:04:17.217 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m37243603155816448 [0;39m ==> Parameters: 101(Long), 1000(Integer)
2023-05-10 21:04:17.217 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m37243603155816448 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-05-10 21:04:17.221 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m37243603155816448 [0;39m <==        Row: 2, Vue 入门教程, 100, 101, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, null, 0, 0, 0
2023-05-10 21:04:17.221 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m37243603155816448 [0;39m <==      Total: 1
2023-05-10 21:04:17.221 INFO  com.jiawa.wiki.service.EbookService               :48   [32m37243603155816448 [0;39m 总行数：1
2023-05-10 21:04:17.221 INFO  com.jiawa.wiki.service.EbookService               :49   [32m37243603155816448 [0;39m 总页数：1
2023-05-10 21:04:17.221 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m37243603155816448 [0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":0,"id":2,"name":"Vue 入门教程","viewCount":0,"voteCount":0}],"total":1},"success":true}
2023-05-10 21:04:17.221 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m37243603155816448 [0;39m ------------- 结束 耗时：19 ms -------------
2023-05-10 21:04:19.562 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:04:22.975 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:04:25.005 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:04:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37243677839593472 [0;39m 更新电子书下的文档数据开始
2023-05-10 21:04:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37243677839593472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 21:04:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37243677839593472 [0;39m ==> Parameters: 
2023-05-10 21:04:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37243677839593472 [0;39m <==    Updates: 1
2023-05-10 21:04:35.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37243677839593472 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-05-10 21:04:42.929 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:04:49.574 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:04:52.754 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:05:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m37243782697193472 [0;39m 生成今日电子书快照开始
2023-05-10 21:05:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37243782697193472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-10 21:05:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37243782697193472 [0;39m ==> Parameters: 
2023-05-10 21:05:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37243782697193472 [0;39m <==    Updates: 0
2023-05-10 21:05:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m37243782697193472 [0;39m 生成今日电子书快照结束，耗时：0毫秒
2023-05-10 21:05:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37243803693879296 [0;39m 更新电子书下的文档数据开始
2023-05-10 21:05:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37243803693879296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 21:05:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37243803693879296 [0;39m ==> Parameters: 
2023-05-10 21:05:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37243803693879296 [0;39m <==    Updates: 1
2023-05-10 21:05:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37243803693879296 [0;39m 更新电子书下的文档数据结束，耗时：0毫秒
2023-05-10 21:05:06.995 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:05:19.235 INFO  com.jiawa.wiki.websocket.WebSocketServer          :41   [32m37241724103430144 [0;39m 连接关闭，token：HUOBgTghyH，session id：1！当前连接数：0
2023-05-10 21:05:19.567 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:05:22.721 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:05:31.070 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:05:35.018 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37243929539776512 [0;39m 更新电子书下的文档数据开始
2023-05-10 21:05:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37243929539776512 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 21:05:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37243929539776512 [0;39m ==> Parameters: 
2023-05-10 21:05:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37243929539776512 [0;39m <==    Updates: 1
2023-05-10 21:05:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37243929539776512 [0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-05-10 21:05:49.576 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:05:56.865 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:06:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m37244034368016384 [0;39m 生成今日电子书快照开始
2023-05-10 21:06:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37244034368016384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-10 21:06:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37244034368016384 [0;39m ==> Parameters: 
2023-05-10 21:06:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37244034368016384 [0;39m <==    Updates: 0
2023-05-10 21:06:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m37244034368016384 [0;39m 生成今日电子书快照结束，耗时：4毫秒
2023-05-10 21:06:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37244055326953472 [0;39m 更新电子书下的文档数据开始
2023-05-10 21:06:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37244055326953472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 21:06:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37244055326953472 [0;39m ==> Parameters: 
2023-05-10 21:06:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37244055326953472 [0;39m <==    Updates: 1
2023-05-10 21:06:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37244055326953472 [0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-05-10 21:06:18.699 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:06:19.572 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:06:22.801 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:06:24.825 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:06:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37244181172850688 [0;39m 更新电子书下的文档数据开始
2023-05-10 21:06:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37244181172850688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 21:06:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37244181172850688 [0;39m ==> Parameters: 
2023-05-10 21:06:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37244181172850688 [0;39m <==    Updates: 1
2023-05-10 21:06:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37244181172850688 [0;39m 更新电子书下的文档数据结束，耗时：4毫秒
2023-05-10 21:06:46.891 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:06:49.562 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:06:53.014 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:07:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m37244286030450688 [0;39m 生成今日电子书快照开始
2023-05-10 21:07:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37244286030450688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-10 21:07:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37244286030450688 [0;39m ==> Parameters: 
2023-05-10 21:07:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m37244286030450688 [0;39m <==    Updates: 0
2023-05-10 21:07:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m37244286030450688 [0;39m 生成今日电子书快照结束，耗时：5毫秒
2023-05-10 21:07:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37244307006164992 [0;39m 更新电子书下的文档数据开始
2023-05-10 21:07:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37244307006164992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 21:07:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37244307006164992 [0;39m ==> Parameters: 
2023-05-10 21:07:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37244307006164992 [0;39m <==    Updates: 1
2023-05-10 21:07:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37244307006164992 [0;39m 更新电子书下的文档数据结束，耗时：3毫秒
2023-05-10 21:07:10.986 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:07:18.692 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:07:19.582 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:07:20.725 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:07:22.755 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:07:33.033 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-10 21:07:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m37244432843673600 [0;39m 更新电子书下的文档数据开始
2023-05-10 21:07:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37244432843673600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-10 21:07:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37244432843673600 [0;39m ==> Parameters: 
2023-05-10 21:07:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m37244432843673600 [0;39m <==    Updates: 1
2023-05-10 21:07:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m37244432843673600 [0;39m 更新电子书下的文档数据结束，耗时：5毫秒
2023-05-10 21:07:35.080 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
