2023-03-06 14:45:44.933 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.1.6.Final
2023-03-06 14:45:44.941 INFO  com.jiawa.wiki.WikiApplication                    :55   [32m                  [0;39m Starting WikiApplication using Java 1.8.0_271 on LAPTOP-TLCI2GAA with PID 19996 (D:\work\jiawawiki\target\classes started by k in D:\work\jiawawiki)
2023-03-06 14:45:44.941 INFO  com.jiawa.wiki.WikiApplication                    :660  [32m                  [0;39m No active profile set, falling back to default profiles: default
2023-03-06 14:45:44.988 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-03-06 14:45:44.989 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-03-06 14:45:45.741 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :250  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-06 14:45:45.743 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :128  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-03-06 14:45:45.771 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :188  [32m                  [0;39m Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
2023-03-06 14:45:45.953 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration$$EnhancerBySpringCGLIB$$c7a4ee3b] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:45:45.960 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:45:46.404 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'defaultMQProducer' of type [org.apache.rocketmq.client.producer.DefaultMQProducer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:45:46.406 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonConfig' of type [com.jiawa.wiki.config.JacksonConfig$$EnhancerBySpringCGLIB$$69df633c] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:45:46.407 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:45:46.409 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:45:46.412 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'spring.jackson-org.springframework.boot.autoconfigure.jackson.JacksonProperties' of type [org.springframework.boot.autoconfigure.jackson.JacksonProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:45:46.414 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'standardJacksonObjectMapperBuilderCustomizer' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration$StandardJackson2ObjectMapperBuilderCustomizer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:45:46.418 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:45:46.429 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'parameterNamesModule' of type [com.fasterxml.jackson.module.paramnames.ParameterNamesModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:45:46.429 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:45:46.444 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jsonComponentModule' of type [org.springframework.boot.jackson.JsonComponentModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:45:46.444 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.data.web.config.SpringDataJacksonConfiguration' of type [org.springframework.data.web.config.SpringDataJacksonConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:45:46.448 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonGeoModule' of type [org.springframework.data.geo.GeoModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:45:46.451 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapperBuilder' of type [org.springframework.http.converter.json.Jackson2ObjectMapperBuilder] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:45:46.466 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapper' of type [com.fasterxml.jackson.databind.ObjectMapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:45:47.796 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketMQTemplate' of type [org.apache.rocketmq.spring.core.RocketMQTemplate] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:45:47.800 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'transactionHandlerRegistry' of type [org.apache.rocketmq.spring.config.TransactionHandlerRegistry] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:45:48.308 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2023-03-06 14:45:48.315 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2023-03-06 14:45:48.316 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2023-03-06 14:45:48.316 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.39]
2023-03-06 14:45:48.406 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2023-03-06 14:45:48.407 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :289  [32m                  [0;39m Root WebApplicationContext: initialization completed in 3417 ms
2023-03-06 14:45:49.463 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2023-03-06 14:45:49.786 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2023-03-06 14:45:49.820 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2023-03-06 14:45:49.968 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-06 14:45:49.978 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-06 14:45:52.468 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-06 14:45:54.489 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-06 14:45:54.492 INFO  o.a.r.s.support.DefaultRocketMQListenerContainer  :243  [32m                  [0;39m running container: DefaultRocketMQListenerContainer{consumerGroup='default', nameServer='127.0.0.1:9876', topic='VOTE_TOPIC', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
2023-03-06 14:45:54.492 INFO  o.a.r.s.a.ListenerContainerConfiguration          :107  [32m                  [0;39m Register the listener to container, listenerBeanName:voteTopicConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-03-06 14:45:54.504 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2023-03-06 14:45:54.517 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2023-03-06 14:45:54.531 INFO  com.jiawa.wiki.WikiApplication                    :61   [32m                  [0;39m Started WikiApplication in 10.134 seconds (JVM running for 11.596)
2023-03-06 14:45:54.533 INFO  com.jiawa.wiki.WikiApplication                    :26   [32m                  [0;39m å¯åŠ¨æˆåŠŸï¼ï¼
2023-03-06 14:45:54.533 INFO  com.jiawa.wiki.WikiApplication                    :27   [32m                  [0;39m åœ°å€: 	http://127.0.0.1:8880
2023-03-06 14:45:56.508 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-06 14:45:58.534 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-06 14:46:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13593192947650560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 14:46:00.027 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m13593192947650560 [0;39m HikariPool-1 - Starting...
2023-03-06 14:46:00.143 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m13593192947650560 [0;39m HikariPool-1 - Start completed.
2023-03-06 14:46:00.149 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13593192947650560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 14:46:00.164 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13593192947650560 [0;39m ==> Parameters: 
2023-03-06 14:46:00.172 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13593192947650560 [0;39m <==    Updates: 5
2023-03-06 14:46:00.174 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13593192947650560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š168æ¯«ç§’
2023-03-06 14:46:04.257 INFO  o.a.r.s.support.DefaultRocketMQListenerContainer  :216  [32m                  [0;39m container destroyed, DefaultRocketMQListenerContainer{consumerGroup='default', nameServer='127.0.0.1:9876', topic='VOTE_TOPIC', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
2023-03-06 14:46:04.259 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :218  [32m                  [0;39m Shutting down ExecutorService 'taskScheduler'
2023-03-06 14:46:04.260 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :218  [32m                  [0;39m Shutting down ExecutorService 'applicationTaskExecutor'
2023-03-06 14:46:04.260 INFO  com.zaxxer.hikari.HikariDataSource                :350  [32m                  [0;39m HikariPool-1 - Shutdown initiated...
2023-03-06 14:46:04.272 INFO  com.zaxxer.hikari.HikariDataSource                :352  [32m                  [0;39m HikariPool-1 - Shutdown completed.
2023-03-06 14:46:04.452 INFO  com.jiawa.wiki.WikiApplication                    :55   [32m                  [0;39m Starting WikiApplication using Java 1.8.0_271 on LAPTOP-TLCI2GAA with PID 19996 (D:\work\jiawawiki\target\classes started by k in D:\work\jiawawiki)
2023-03-06 14:46:04.452 INFO  com.jiawa.wiki.WikiApplication                    :660  [32m                  [0;39m No active profile set, falling back to default profiles: default
2023-03-06 14:46:04.677 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :250  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-06 14:46:04.678 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :128  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-03-06 14:46:04.689 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :188  [32m                  [0;39m Finished Spring Data repository scanning in 11 ms. Found 0 Redis repository interfaces.
2023-03-06 14:46:04.736 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration$$EnhancerBySpringCGLIB$$c7a4ee3b] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:46:04.741 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:46:05.366 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'defaultMQProducer' of type [org.apache.rocketmq.client.producer.DefaultMQProducer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:46:05.367 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonConfig' of type [com.jiawa.wiki.config.JacksonConfig$$EnhancerBySpringCGLIB$$69df633c] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:46:05.367 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:46:05.370 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:46:05.372 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'spring.jackson-org.springframework.boot.autoconfigure.jackson.JacksonProperties' of type [org.springframework.boot.autoconfigure.jackson.JacksonProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:46:05.373 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'standardJacksonObjectMapperBuilderCustomizer' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration$StandardJackson2ObjectMapperBuilderCustomizer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:46:05.373 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:46:05.374 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'parameterNamesModule' of type [com.fasterxml.jackson.module.paramnames.ParameterNamesModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:46:05.374 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:46:05.378 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jsonComponentModule' of type [org.springframework.boot.jackson.JsonComponentModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:46:05.378 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.data.web.config.SpringDataJacksonConfiguration' of type [org.springframework.data.web.config.SpringDataJacksonConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:46:05.379 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonGeoModule' of type [org.springframework.data.geo.GeoModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:46:05.379 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapperBuilder' of type [org.springframework.http.converter.json.Jackson2ObjectMapperBuilder] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:46:05.381 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapper' of type [com.fasterxml.jackson.databind.ObjectMapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:46:06.243 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketMQTemplate' of type [org.apache.rocketmq.spring.core.RocketMQTemplate] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:46:06.244 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'transactionHandlerRegistry' of type [org.apache.rocketmq.spring.config.TransactionHandlerRegistry] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:46:06.319 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2023-03-06 14:46:06.320 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2023-03-06 14:46:06.320 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2023-03-06 14:46:06.321 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.39]
2023-03-06 14:46:06.345 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2023-03-06 14:46:06.346 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :289  [32m                  [0;39m Root WebApplicationContext: initialization completed in 1887 ms
2023-03-06 14:46:06.566 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2023-03-06 14:46:06.671 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2023-03-06 14:46:06.685 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2023-03-06 14:46:07.884 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-06 14:46:08.322 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-06 14:46:09.905 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-06 14:46:11.940 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-06 14:46:11.940 INFO  o.a.r.s.support.DefaultRocketMQListenerContainer  :243  [32m                  [0;39m running container: DefaultRocketMQListenerContainer{consumerGroup='default', nameServer='127.0.0.1:9876', topic='VOTE_TOPIC', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
2023-03-06 14:46:11.942 INFO  o.a.r.s.a.ListenerContainerConfiguration          :107  [32m                  [0;39m Register the listener to container, listenerBeanName:voteTopicConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-03-06 14:46:11.949 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2023-03-06 14:46:11.951 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2023-03-06 14:46:11.955 INFO  com.jiawa.wiki.WikiApplication                    :61   [32m                  [0;39m Started WikiApplication in 7.55 seconds (JVM running for 29.021)
2023-03-06 14:46:11.956 INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener :63   [32m                  [0;39m Condition evaluation unchanged
2023-03-06 14:46:11.958 INFO  com.jiawa.wiki.WikiApplication                    :26   [32m                  [0;39m å¯åŠ¨æˆåŠŸï¼ï¼
2023-03-06 14:46:11.958 INFO  com.jiawa.wiki.WikiApplication                    :27   [32m                  [0;39m åœ°å€: 	http://127.0.0.1:8880
2023-03-06 14:46:13.974 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-06 14:46:16.012 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-06 14:46:35.000 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13593339727319040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 14:46:35.005 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m13593339727319040 [0;39m HikariPool-2 - Starting...
2023-03-06 14:46:35.008 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m13593339727319040 [0;39m HikariPool-2 - Start completed.
2023-03-06 14:46:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13593339727319040 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 14:46:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13593339727319040 [0;39m ==> Parameters: 
2023-03-06 14:46:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13593339727319040 [0;39m <==    Updates: 1
2023-03-06 14:46:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13593339727319040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-06 14:46:38.587 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-06 14:46:40.305 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-06 14:46:42.361 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-06 14:47:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13593444647833600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 14:47:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13593444647833600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 14:47:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13593444647833600 [0;39m ==> Parameters: 
2023-03-06 14:47:00.026 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13593444647833600 [0;39m <==    Updates: 0
2023-03-06 14:47:00.027 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13593444647833600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-06 14:47:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13593465564827648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 14:47:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13593465564827648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 14:47:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13593465564827648 [0;39m ==> Parameters: 
2023-03-06 14:47:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13593465564827648 [0;39m <==    Updates: 1
2023-03-06 14:47:05.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13593465564827648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-06 14:47:06.143 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-06 14:47:08.199 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-06 14:47:08.310 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-06 14:47:12.312 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-06 14:47:28.211 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-06 14:47:30.249 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-06 14:47:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13593591423307776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 14:47:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13593591423307776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 14:47:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13593591423307776 [0;39m ==> Parameters: 
2023-03-06 14:47:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13593591423307776 [0;39m <==    Updates: 1
2023-03-06 14:47:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13593591423307776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-06 14:47:38.307 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-06 14:47:39.929 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-06 14:47:41.955 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-06 14:48:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13593696280907776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 14:48:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13593696280907776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 14:48:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13593696280907776 [0;39m ==> Parameters: 
2023-03-06 14:48:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13593696280907776 [0;39m <==    Updates: 0
2023-03-06 14:48:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13593696280907776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 14:48:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13593717269204992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 14:48:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13593717269204992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 14:48:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13593717269204992 [0;39m ==> Parameters: 
2023-03-06 14:48:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13593717269204992 [0;39m <==    Updates: 1
2023-03-06 14:48:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13593717269204992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-06 14:48:15.660 INFO  com.jiawa.wiki.WikiApplication                    :55   [32m                  [0;39m Starting WikiApplication using Java 1.8.0_271 on LAPTOP-TLCI2GAA with PID 2500 (D:\work\jiawawiki\target\classes started by k in D:\work\jiawawiki)
2023-03-06 14:48:15.668 INFO  com.jiawa.wiki.WikiApplication                    :660  [32m                  [0;39m No active profile set, falling back to default profiles: default
2023-03-06 14:48:15.730 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.1.6.Final
2023-03-06 14:48:15.754 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-03-06 14:48:15.755 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-03-06 14:48:16.454 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :250  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-06 14:48:16.456 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :128  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-03-06 14:48:16.491 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :188  [32m                  [0;39m Finished Spring Data repository scanning in 19 ms. Found 0 Redis repository interfaces.
2023-03-06 14:48:16.695 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration$$EnhancerBySpringCGLIB$$f9872527] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:48:16.706 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:48:17.198 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'defaultMQProducer' of type [org.apache.rocketmq.client.producer.DefaultMQProducer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:48:17.199 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonConfig' of type [com.jiawa.wiki.config.JacksonConfig$$EnhancerBySpringCGLIB$$9bc19a28] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:48:17.200 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:48:17.202 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:48:17.204 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'spring.jackson-org.springframework.boot.autoconfigure.jackson.JacksonProperties' of type [org.springframework.boot.autoconfigure.jackson.JacksonProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:48:17.204 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'standardJacksonObjectMapperBuilderCustomizer' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration$StandardJackson2ObjectMapperBuilderCustomizer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:48:17.205 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:48:17.207 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'parameterNamesModule' of type [com.fasterxml.jackson.module.paramnames.ParameterNamesModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:48:17.208 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:48:17.218 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jsonComponentModule' of type [org.springframework.boot.jackson.JsonComponentModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:48:17.219 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.data.web.config.SpringDataJacksonConfiguration' of type [org.springframework.data.web.config.SpringDataJacksonConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:48:17.222 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonGeoModule' of type [org.springframework.data.geo.GeoModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:48:17.224 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapperBuilder' of type [org.springframework.http.converter.json.Jackson2ObjectMapperBuilder] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:48:17.236 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapper' of type [com.fasterxml.jackson.databind.ObjectMapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:48:18.525 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketMQTemplate' of type [org.apache.rocketmq.spring.core.RocketMQTemplate] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:48:18.526 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'transactionHandlerRegistry' of type [org.apache.rocketmq.spring.config.TransactionHandlerRegistry] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-06 14:48:18.943 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2023-03-06 14:48:18.949 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2023-03-06 14:48:18.950 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2023-03-06 14:48:18.950 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.39]
2023-03-06 14:48:19.031 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2023-03-06 14:48:19.031 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :289  [32m                  [0;39m Root WebApplicationContext: initialization completed in 3275 ms
2023-03-06 14:48:19.692 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2023-03-06 14:48:20.002 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2023-03-06 14:48:20.042 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2023-03-06 14:48:20.518 INFO  o.a.r.s.support.DefaultRocketMQListenerContainer  :243  [32m                  [0;39m running container: DefaultRocketMQListenerContainer{consumerGroup='default', nameServer='127.0.0.1:9876', topic='VOTE_TOPIC', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
2023-03-06 14:48:20.519 INFO  o.a.r.s.a.ListenerContainerConfiguration          :107  [32m                  [0;39m Register the listener to container, listenerBeanName:voteTopicConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-03-06 14:48:20.530 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2023-03-06 14:48:20.541 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2023-03-06 14:48:20.560 INFO  com.jiawa.wiki.WikiApplication                    :61   [32m                  [0;39m Started WikiApplication in 5.485 seconds (JVM running for 7.15)
2023-03-06 14:48:20.565 INFO  com.jiawa.wiki.WikiApplication                    :26   [32m                  [0;39m å¯åŠ¨æˆåŠŸï¼ï¼
2023-03-06 14:48:20.566 INFO  com.jiawa.wiki.WikiApplication                    :27   [32m                  [0;39m åœ°å€: 	http://127.0.0.1:8880
2023-03-06 14:48:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13593843098324992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 14:48:35.033 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m13593843098324992 [0;39m HikariPool-1 - Starting...
2023-03-06 14:48:35.124 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m13593843098324992 [0;39m HikariPool-1 - Start completed.
2023-03-06 14:48:35.131 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13593843098324992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 14:48:35.144 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13593843098324992 [0;39m ==> Parameters: 
2023-03-06 14:48:35.146 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13593843098324992 [0;39m <==    Updates: 1
2023-03-06 14:48:35.147 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13593843098324992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š133æ¯«ç§’
2023-03-06 14:49:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13593947943342080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 14:49:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13593947943342080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 14:49:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13593947943342080 [0;39m ==> Parameters: 
2023-03-06 14:49:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13593947943342080 [0;39m <==    Updates: 0
2023-03-06 14:49:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13593947943342080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š14æ¯«ç§’
2023-03-06 14:49:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13593968923250688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 14:49:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13593968923250688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 14:49:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13593968923250688 [0;39m ==> Parameters: 
2023-03-06 14:49:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13593968923250688 [0;39m <==    Updates: 1
2023-03-06 14:49:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13593968923250688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 14:49:26.245 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-03-06 14:49:26.245 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2023-03-06 14:49:26.247 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 2 ms
2023-03-06 14:49:26.303 INFO  com.jiawa.wiki.websocket.WebSocketServer          :32   [32m                  [0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šAqVu2SkcoPï¼Œsession idï¼š0ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2023-03-06 14:49:26.444 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594058811379712 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:49:26.444 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594058811379713 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:49:26.444 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594058811379714 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:49:26.445 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594058811379714 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-06 14:49:26.445 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594058811379713 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-03-06 14:49:26.445 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594058811379712 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-03-06 14:49:26.446 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594058811379712 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-03-06 14:49:26.446 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594058811379714 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-06 14:49:26.446 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594058811379713 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-03-06 14:49:26.446 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594058811379713 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:49:26.446 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594058811379712 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:49:26.446 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594058811379714 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:49:26.448 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594058811379712 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 14:49:26.448 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594058811379713 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 14:49:26.448 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594058811379714 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 14:49:26.455 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13594058811379713 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-06 14:49:26.455 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13594058811379712 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-06 14:49:26.456 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13594058811379712 [0;39m ==> Parameters: 
2023-03-06 14:49:26.456 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13594058811379713 [0;39m ==> Parameters: 
2023-03-06 14:49:26.475 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13594058811379713 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-03-06 14:49:26.475 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13594058811379712 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-03-06 14:49:26.476 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13594058811379712 [0;39m <==        Row: 2023-03-05, 8, 5, 8, 5
2023-03-06 14:49:26.476 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13594058811379713 [0;39m <==        Row: 2023-03-02, 0, 0
2023-03-06 14:49:26.479 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13594058811379713 [0;39m <==        Row: 2023-03-05, 8, 5
2023-03-06 14:49:26.479 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13594058811379713 [0;39m <==      Total: 2
2023-03-06 14:49:26.480 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13594058811379712 [0;39m <==        Row: 2023-03-06, 8, 5, 0, 0
2023-03-06 14:49:26.480 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13594058811379712 [0;39m <==      Total: 2
2023-03-06 14:49:26.481 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13594058811379714 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-06 14:49:26.482 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13594058811379714 [0;39m ==> Parameters: 
2023-03-06 14:49:26.484 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594058811379714 [0;39m <==    Columns: id, parent, name, sort
2023-03-06 14:49:26.484 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594058811379714 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-06 14:49:26.485 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594058811379714 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-06 14:49:26.485 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594058811379714 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-06 14:49:26.486 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594058811379714 [0;39m <==        Row: 200, 0, Java, 200
2023-03-06 14:49:26.486 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594058811379714 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-06 14:49:26.487 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594058811379714 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-06 14:49:26.488 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594058811379714 [0;39m <==        Row: 300, 0, Python, 300
2023-03-06 14:49:26.488 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594058811379714 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-06 14:49:26.489 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594058811379713 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1677945600000,"viewCount":0,"viewIncrease":8,"voteCount":0,"voteIncrease":5}],"success":true}
2023-03-06 14:49:26.489 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594058811379714 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-06 14:49:26.489 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594058811379713 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š46 ms -------------
2023-03-06 14:49:26.489 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594058811379714 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-06 14:49:26.490 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594058811379714 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-06 14:49:26.491 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594058811379714 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-06 14:49:26.491 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594058811379712 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677945600000,"viewCount":8,"viewIncrease":8,"voteCount":5,"voteIncrease":5},{"date":1678032000000,"viewCount":8,"viewIncrease":0,"voteCount":5,"voteIncrease":0}],"success":true}
2023-03-06 14:49:26.491 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594058811379714 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-06 14:49:26.491 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594058811379712 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š48 ms -------------
2023-03-06 14:49:26.491 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594058811379714 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-06 14:49:26.492 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594058811379714 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-06 14:49:26.492 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13594058811379714 [0;39m <==      Total: 15
2023-03-06 14:49:26.503 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594058811379714 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-06 14:49:26.503 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594058811379714 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š60 ms -------------
2023-03-06 14:49:29.802 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594072900046848 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:49:29.802 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594072900046848 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-06 14:49:29.802 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594072900046848 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-06 14:49:29.803 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594072900046848 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:49:29.804 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594072900046848 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":301,"page":1,"size":1000}]
2023-03-06 14:49:29.844 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13594072900046848 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-06 14:49:29.844 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13594072900046848 [0;39m ==> Parameters: 301(Long)
2023-03-06 14:49:29.845 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13594072900046848 [0;39m <==    Columns: count(0)
2023-03-06 14:49:29.845 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13594072900046848 [0;39m <==        Row: 0
2023-03-06 14:49:29.846 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13594072900046848 [0;39m <==      Total: 1
2023-03-06 14:49:29.847 INFO  com.jiawa.wiki.service.EbookService               :48   [32m13594072900046848 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-06 14:49:29.847 INFO  com.jiawa.wiki.service.EbookService               :49   [32m13594072900046848 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-06 14:49:29.849 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594072900046848 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-06 14:49:29.849 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594072900046848 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š47 ms -------------
2023-03-06 14:49:33.309 INFO  com.jiawa.wiki.websocket.WebSocketServer          :41   [32m                  [0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šAqVu2SkcoPï¼Œsession idï¼š0ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2023-03-06 14:49:34.716 INFO  com.jiawa.wiki.websocket.WebSocketServer          :32   [32m                  [0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šxuVbzZGv0Hï¼Œsession idï¼š1ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2023-03-06 14:49:34.901 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594094286802944 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:49:34.902 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594094286802944 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-03-06 14:49:34.902 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594094286802944 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-03-06 14:49:34.902 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594094286802944 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:49:34.902 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594094286802944 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 14:49:34.903 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594094295191552 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:49:34.903 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594094295191552 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-03-06 14:49:34.903 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594094295191553 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:49:34.903 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594094295191552 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-03-06 14:49:34.903 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594094295191553 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-06 14:49:34.903 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13594094286802944 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-06 14:49:34.903 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594094295191552 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:49:34.903 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594094295191553 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-06 14:49:34.903 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594094295191553 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:49:34.903 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13594094286802944 [0;39m ==> Parameters: 
2023-03-06 14:49:34.903 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594094295191552 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 14:49:34.903 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594094295191553 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 14:49:34.904 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13594094295191552 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-06 14:49:34.904 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13594094286802944 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-03-06 14:49:34.905 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13594094295191552 [0;39m ==> Parameters: 
2023-03-06 14:49:34.905 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13594094295191553 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-06 14:49:34.905 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13594094286802944 [0;39m <==        Row: 2023-03-05, 8, 5, 8, 5
2023-03-06 14:49:34.905 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13594094295191553 [0;39m ==> Parameters: 
2023-03-06 14:49:34.905 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13594094286802944 [0;39m <==        Row: 2023-03-06, 8, 5, 0, 0
2023-03-06 14:49:34.905 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13594094295191552 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-03-06 14:49:34.905 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594094295191553 [0;39m <==    Columns: id, parent, name, sort
2023-03-06 14:49:34.906 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13594094286802944 [0;39m <==      Total: 2
2023-03-06 14:49:34.906 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594094295191553 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-06 14:49:34.906 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594094286802944 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677945600000,"viewCount":8,"viewIncrease":8,"voteCount":5,"voteIncrease":5},{"date":1678032000000,"viewCount":8,"viewIncrease":0,"voteCount":5,"voteIncrease":0}],"success":true}
2023-03-06 14:49:34.906 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594094286802944 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-03-06 14:49:34.907 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594094295191553 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-06 14:49:34.907 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594094295191553 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-06 14:49:34.908 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594094295191553 [0;39m <==        Row: 200, 0, Java, 200
2023-03-06 14:49:34.906 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13594094295191552 [0;39m <==        Row: 2023-03-02, 0, 0
2023-03-06 14:49:34.908 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594094295191553 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-06 14:49:34.908 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594094295191553 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-06 14:49:34.909 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594094295191553 [0;39m <==        Row: 300, 0, Python, 300
2023-03-06 14:49:34.909 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594094295191553 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-06 14:49:34.909 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594094295191553 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-06 14:49:34.909 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594094295191553 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-06 14:49:34.910 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594094295191553 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-06 14:49:34.910 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594094295191553 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-06 14:49:34.910 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13594094295191552 [0;39m <==        Row: 2023-03-05, 8, 5
2023-03-06 14:49:34.910 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594094295191553 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-06 14:49:34.911 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13594094295191552 [0;39m <==      Total: 2
2023-03-06 14:49:34.911 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594094295191553 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-06 14:49:34.911 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594094295191553 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-06 14:49:34.911 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594094295191552 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1677945600000,"viewCount":0,"viewIncrease":8,"voteCount":0,"voteIncrease":5}],"success":true}
2023-03-06 14:49:34.911 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594094295191552 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-03-06 14:49:34.911 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13594094295191553 [0;39m <==      Total: 15
2023-03-06 14:49:34.916 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594094295191553 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-06 14:49:34.916 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594094295191553 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š13 ms -------------
2023-03-06 14:49:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13594094714621952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 14:49:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13594094714621952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 14:49:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13594094714621952 [0;39m ==> Parameters: 
2023-03-06 14:49:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13594094714621952 [0;39m <==    Updates: 1
2023-03-06 14:49:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13594094714621952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 14:49:51.046 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594162003841024 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:49:51.047 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594162003841024 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/user/login POST
2023-03-06 14:49:51.047 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594162003841024 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.UserController.login
2023-03-06 14:49:51.047 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594162003841024 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:49:51.049 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594162003841024 [0;39m è¯·æ±‚å‚æ•°: [{"loginName":"test"}]
2023-03-06 14:49:51.054 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m13594162003841024 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2023-03-06 14:49:51.055 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m13594162003841024 [0;39m ==> Parameters: test(String)
2023-03-06 14:49:51.058 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m13594162003841024 [0;39m <==    Columns: id, login_name, name, password
2023-03-06 14:49:51.058 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m13594162003841024 [0;39m <==        Row: 1, test, æµ‹è¯•, e70e2222a9d67c4f2eae107533359aa4
2023-03-06 14:49:51.059 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m13594162003841024 [0;39m <==      Total: 1
2023-03-06 14:49:51.062 INFO  com.jiawa.wiki.controller.UserController          :77   [32m13594162003841024 [0;39m ç”Ÿæˆå•ç‚¹ç™»å½•tokenï¼š13594162070949888ï¼Œå¹¶æ”¾å…¥redisä¸­
2023-03-06 14:49:51.187 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594162003841024 [0;39m è¿”å›žç»“æžœ: {"content":{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"13594162070949888"},"success":true}
2023-03-06 14:49:51.187 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594162003841024 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š141 ms -------------
2023-03-06 14:49:52.209 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594166881816576 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:49:52.209 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594166881816576 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-06 14:49:52.209 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594166881816576 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-06 14:49:52.210 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594166881816576 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:49:52.210 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594166881816576 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 14:49:52.211 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13594166881816576 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-06 14:49:52.211 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13594166881816576 [0;39m ==> Parameters: 
2023-03-06 14:49:52.212 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594166881816576 [0;39m <==    Columns: id, parent, name, sort
2023-03-06 14:49:52.212 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594166881816576 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-06 14:49:52.212 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594166881816576 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-06 14:49:52.212 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594166881816576 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-06 14:49:52.213 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594166881816576 [0;39m <==        Row: 200, 0, Java, 200
2023-03-06 14:49:52.213 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594166881816576 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-06 14:49:52.213 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594166881816576 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-06 14:49:52.213 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594166881816576 [0;39m <==        Row: 300, 0, Python, 300
2023-03-06 14:49:52.213 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594166881816576 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-06 14:49:52.214 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594166881816576 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-06 14:49:52.214 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594166881816576 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-06 14:49:52.214 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594166881816576 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-06 14:49:52.214 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594166881816576 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-06 14:49:52.214 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594166881816576 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-06 14:49:52.215 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594166881816576 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-06 14:49:52.215 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594166881816576 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-06 14:49:52.215 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13594166881816576 [0;39m <==      Total: 15
2023-03-06 14:49:52.216 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594166881816576 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-06 14:49:52.216 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594166881816576 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-03-06 14:49:52.272 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594167146057728 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:49:52.272 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594167146057728 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-06 14:49:52.273 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594167146057728 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-06 14:49:52.273 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594167146057728 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:49:52.273 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594167146057728 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-03-06 14:49:52.274 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13594167146057728 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-03-06 14:49:52.275 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13594167146057728 [0;39m ==> Parameters: 
2023-03-06 14:49:52.275 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13594167146057728 [0;39m <==    Columns: count(0)
2023-03-06 14:49:52.275 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13594167146057728 [0;39m <==        Row: 5
2023-03-06 14:49:52.275 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13594167146057728 [0;39m <==      Total: 1
2023-03-06 14:49:52.278 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13594167146057728 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-03-06 14:49:52.278 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13594167146057728 [0;39m ==> Parameters: 10(Integer)
2023-03-06 14:49:52.279 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594167146057728 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-06 14:49:52.279 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594167146057728 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 8, 5
2023-03-06 14:49:52.280 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594167146057728 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 14:49:52.280 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594167146057728 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 14:49:52.280 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594167146057728 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 14:49:52.281 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594167146057728 [0;39m <==        Row: 5, Oracle å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 14:49:52.281 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13594167146057728 [0;39m <==      Total: 5
2023-03-06 14:49:52.281 INFO  com.jiawa.wiki.service.EbookService               :48   [32m13594167146057728 [0;39m æ€»è¡Œæ•°ï¼š5
2023-03-06 14:49:52.281 INFO  com.jiawa.wiki.service.EbookService               :49   [32m13594167146057728 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-06 14:49:52.288 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594167146057728 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":8,"voteCount":5},{"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":5,"name":"Oracle å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-03-06 14:49:52.288 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594167146057728 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š16 ms -------------
2023-03-06 14:49:56.799 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m                  [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-06 14:49:56.799 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m                  [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š0 ms -------------
2023-03-06 14:49:56.802 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m13594094286802944 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-06 14:49:56.802 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m13594094286802944 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/ebook/save
2023-03-06 14:49:56.802 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m13594094286802944 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š13594162070949888
2023-03-06 14:49:56.806 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m13594094286802944 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"13594162070949888"}
2023-03-06 14:49:56.826 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594186246918144 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:49:56.826 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594186246918144 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/save POST
2023-03-06 14:49:56.826 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594186246918144 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.save
2023-03-06 14:49:56.826 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594186246918144 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:49:56.829 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594186246918144 [0;39m è¯·æ±‚å‚æ•°: [{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}]
2023-03-06 14:49:56.833 DEBUG c.jiawa.wiki.mapper.EbookMapper.updateByPrimaryKey:137  [32m13594186246918144 [0;39m ==>  Preparing: update ebook set `name` = ?, category1_id = ?, category2_id = ?, description = ?, cover = ?, doc_count = ?, view_count = ?, vote_count = ? where id = ?
2023-03-06 14:49:56.835 DEBUG c.jiawa.wiki.mapper.EbookMapper.updateByPrimaryKey:137  [32m13594186246918144 [0;39m ==> Parameters: Vue å…¥é—¨æ•™ç¨‹(String), 200(Long), 202(Long), é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶(String), null, 0(Integer), 0(Integer), 0(Integer), 2(Long)
2023-03-06 14:49:56.837 DEBUG c.jiawa.wiki.mapper.EbookMapper.updateByPrimaryKey:137  [32m13594186246918144 [0;39m <==    Updates: 1
2023-03-06 14:49:56.837 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594186246918144 [0;39m è¿”å›žç»“æžœ: {"success":true}
2023-03-06 14:49:56.837 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594186246918144 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š11 ms -------------
2023-03-06 14:49:56.838 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m13594186246918144 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š36 ms -------------
2023-03-06 14:49:56.853 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594186360164352 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:49:56.853 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594186360164352 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-06 14:49:56.853 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594186360164352 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-06 14:49:56.853 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594186360164352 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:49:56.853 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594186360164352 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-03-06 14:49:56.855 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13594186360164352 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-03-06 14:49:56.855 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13594186360164352 [0;39m ==> Parameters: 
2023-03-06 14:49:56.855 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13594186360164352 [0;39m <==    Columns: count(0)
2023-03-06 14:49:56.856 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13594186360164352 [0;39m <==        Row: 5
2023-03-06 14:49:56.856 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13594186360164352 [0;39m <==      Total: 1
2023-03-06 14:49:56.856 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13594186360164352 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-03-06 14:49:56.856 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13594186360164352 [0;39m ==> Parameters: 10(Integer)
2023-03-06 14:49:56.857 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594186360164352 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-06 14:49:56.857 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594186360164352 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 8, 5
2023-03-06 14:49:56.858 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594186360164352 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 14:49:56.858 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594186360164352 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 14:49:56.859 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594186360164352 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 14:49:56.859 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594186360164352 [0;39m <==        Row: 5, Oracle å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 14:49:56.859 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13594186360164352 [0;39m <==      Total: 5
2023-03-06 14:49:56.860 INFO  com.jiawa.wiki.service.EbookService               :48   [32m13594186360164352 [0;39m æ€»è¡Œæ•°ï¼š5
2023-03-06 14:49:56.860 INFO  com.jiawa.wiki.service.EbookService               :49   [32m13594186360164352 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-06 14:49:56.861 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594186360164352 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":8,"voteCount":5},{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":5,"name":"Oracle å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-03-06 14:49:56.861 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594186360164352 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-03-06 14:50:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13594199576416256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 14:50:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13594199576416256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 14:50:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13594199576416256 [0;39m ==> Parameters: 
2023-03-06 14:50:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13594199576416256 [0;39m <==    Updates: 0
2023-03-06 14:50:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13594199576416256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 14:50:04.515 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m13594094295191553 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-06 14:50:04.516 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m13594094295191553 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/ebook/save
2023-03-06 14:50:04.516 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m13594094295191553 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š13594162070949888
2023-03-06 14:50:04.517 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m13594094295191553 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"13594162070949888"}
2023-03-06 14:50:04.518 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594218509504512 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:50:04.518 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594218509504512 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/save POST
2023-03-06 14:50:04.518 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594218509504512 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.save
2023-03-06 14:50:04.519 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594218509504512 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:50:04.519 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594218509504512 [0;39m è¯·æ±‚å‚æ•°: [{"category1Id":100,"category2Id":101,"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}]
2023-03-06 14:50:04.520 DEBUG c.jiawa.wiki.mapper.EbookMapper.updateByPrimaryKey:137  [32m13594218509504512 [0;39m ==>  Preparing: update ebook set `name` = ?, category1_id = ?, category2_id = ?, description = ?, cover = ?, doc_count = ?, view_count = ?, vote_count = ? where id = ?
2023-03-06 14:50:04.521 DEBUG c.jiawa.wiki.mapper.EbookMapper.updateByPrimaryKey:137  [32m13594218509504512 [0;39m ==> Parameters: Vue å…¥é—¨æ•™ç¨‹(String), 100(Long), 101(Long), é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶(String), null, 0(Integer), 0(Integer), 0(Integer), 2(Long)
2023-03-06 14:50:04.528 DEBUG c.jiawa.wiki.mapper.EbookMapper.updateByPrimaryKey:137  [32m13594218509504512 [0;39m <==    Updates: 1
2023-03-06 14:50:04.528 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594218509504512 [0;39m è¿”å›žç»“æžœ: {"success":true}
2023-03-06 14:50:04.528 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594218509504512 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š10 ms -------------
2023-03-06 14:50:04.529 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m13594218509504512 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š13 ms -------------
2023-03-06 14:50:04.552 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594218652110848 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:50:04.552 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594218652110848 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-06 14:50:04.552 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594218652110848 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-06 14:50:04.552 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594218652110848 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:50:04.553 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594218652110848 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-03-06 14:50:04.554 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13594218652110848 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-03-06 14:50:04.555 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13594218652110848 [0;39m ==> Parameters: 
2023-03-06 14:50:04.556 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13594218652110848 [0;39m <==    Columns: count(0)
2023-03-06 14:50:04.557 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13594218652110848 [0;39m <==        Row: 5
2023-03-06 14:50:04.557 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13594218652110848 [0;39m <==      Total: 1
2023-03-06 14:50:04.558 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13594218652110848 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-03-06 14:50:04.558 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13594218652110848 [0;39m ==> Parameters: 10(Integer)
2023-03-06 14:50:04.559 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594218652110848 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-06 14:50:04.559 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594218652110848 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 8, 5
2023-03-06 14:50:04.559 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594218652110848 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, 100, 101, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 14:50:04.560 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594218652110848 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 14:50:04.560 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594218652110848 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 14:50:04.560 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594218652110848 [0;39m <==        Row: 5, Oracle å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 14:50:04.561 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13594218652110848 [0;39m <==      Total: 5
2023-03-06 14:50:04.561 INFO  com.jiawa.wiki.service.EbookService               :48   [32m13594218652110848 [0;39m æ€»è¡Œæ•°ï¼š5
2023-03-06 14:50:04.561 INFO  com.jiawa.wiki.service.EbookService               :49   [32m13594218652110848 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-06 14:50:04.562 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594218652110848 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":8,"voteCount":5},{"category1Id":100,"category2Id":101,"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":5,"name":"Oracle å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-03-06 14:50:04.562 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594218652110848 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š10 ms -------------
2023-03-06 14:50:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13594220543741952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 14:50:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13594220543741952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 14:50:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13594220543741952 [0;39m ==> Parameters: 
2023-03-06 14:50:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13594220543741952 [0;39m <==    Updates: 1
2023-03-06 14:50:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13594220543741952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 14:50:08.566 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m13594162003841024 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-06 14:50:08.566 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m13594162003841024 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/ebook/save
2023-03-06 14:50:08.566 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m13594162003841024 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š13594162070949888
2023-03-06 14:50:08.568 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m13594162003841024 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"13594162070949888"}
2023-03-06 14:50:08.569 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594235500630016 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:50:08.570 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594235500630016 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/save POST
2023-03-06 14:50:08.570 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594235500630016 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.save
2023-03-06 14:50:08.570 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594235500630016 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:50:08.570 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594235500630016 [0;39m è¯·æ±‚å‚æ•°: [{"category1Id":300,"category2Id":301,"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}]
2023-03-06 14:50:08.571 DEBUG c.jiawa.wiki.mapper.EbookMapper.updateByPrimaryKey:137  [32m13594235500630016 [0;39m ==>  Preparing: update ebook set `name` = ?, category1_id = ?, category2_id = ?, description = ?, cover = ?, doc_count = ?, view_count = ?, vote_count = ? where id = ?
2023-03-06 14:50:08.571 DEBUG c.jiawa.wiki.mapper.EbookMapper.updateByPrimaryKey:137  [32m13594235500630016 [0;39m ==> Parameters: Python å…¥é—¨æ•™ç¨‹(String), 300(Long), 301(Long), é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶(String), null, 0(Integer), 0(Integer), 0(Integer), 3(Long)
2023-03-06 14:50:08.578 DEBUG c.jiawa.wiki.mapper.EbookMapper.updateByPrimaryKey:137  [32m13594235500630016 [0;39m <==    Updates: 1
2023-03-06 14:50:08.580 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594235500630016 [0;39m è¿”å›žç»“æžœ: {"success":true}
2023-03-06 14:50:08.580 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594235500630016 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š11 ms -------------
2023-03-06 14:50:08.581 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m13594235500630016 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š15 ms -------------
2023-03-06 14:50:08.600 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594235630653440 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:50:08.600 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594235630653440 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-06 14:50:08.601 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594235630653440 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-06 14:50:08.601 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594235630653440 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:50:08.601 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594235630653440 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-03-06 14:50:08.602 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13594235630653440 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-03-06 14:50:08.603 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13594235630653440 [0;39m ==> Parameters: 
2023-03-06 14:50:08.604 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13594235630653440 [0;39m <==    Columns: count(0)
2023-03-06 14:50:08.604 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13594235630653440 [0;39m <==        Row: 5
2023-03-06 14:50:08.606 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13594235630653440 [0;39m <==      Total: 1
2023-03-06 14:50:08.607 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13594235630653440 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-03-06 14:50:08.607 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13594235630653440 [0;39m ==> Parameters: 10(Integer)
2023-03-06 14:50:08.608 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594235630653440 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-06 14:50:08.608 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594235630653440 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 8, 5
2023-03-06 14:50:08.610 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594235630653440 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, 100, 101, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 14:50:08.610 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594235630653440 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, 300, 301, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 14:50:08.610 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594235630653440 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 14:50:08.610 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594235630653440 [0;39m <==        Row: 5, Oracle å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 14:50:08.610 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13594235630653440 [0;39m <==      Total: 5
2023-03-06 14:50:08.611 INFO  com.jiawa.wiki.service.EbookService               :48   [32m13594235630653440 [0;39m æ€»è¡Œæ•°ï¼š5
2023-03-06 14:50:08.611 INFO  com.jiawa.wiki.service.EbookService               :49   [32m13594235630653440 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-06 14:50:08.614 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594235630653440 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":8,"voteCount":5},{"category1Id":100,"category2Id":101,"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":300,"category2Id":301,"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":5,"name":"Oracle å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-03-06 14:50:08.614 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594235630653440 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š14 ms -------------
2023-03-06 14:50:13.002 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m13594166881816576 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-06 14:50:13.003 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m13594166881816576 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/ebook/save
2023-03-06 14:50:13.003 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m13594166881816576 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š13594162070949888
2023-03-06 14:50:13.004 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m13594166881816576 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"13594162070949888"}
2023-03-06 14:50:13.005 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594254106562560 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:50:13.006 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594254106562560 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/save POST
2023-03-06 14:50:13.006 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594254106562560 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.save
2023-03-06 14:50:13.006 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594254106562560 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:50:13.007 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594254106562560 [0;39m è¯·æ±‚å‚æ•°: [{"category1Id":400,"category2Id":401,"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}]
2023-03-06 14:50:13.007 DEBUG c.jiawa.wiki.mapper.EbookMapper.updateByPrimaryKey:137  [32m13594254106562560 [0;39m ==>  Preparing: update ebook set `name` = ?, category1_id = ?, category2_id = ?, description = ?, cover = ?, doc_count = ?, view_count = ?, vote_count = ? where id = ?
2023-03-06 14:50:13.010 DEBUG c.jiawa.wiki.mapper.EbookMapper.updateByPrimaryKey:137  [32m13594254106562560 [0;39m ==> Parameters: Mysql å…¥é—¨æ•™ç¨‹(String), 400(Long), 401(Long), é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶(String), null, 0(Integer), 0(Integer), 0(Integer), 4(Long)
2023-03-06 14:50:13.011 DEBUG c.jiawa.wiki.mapper.EbookMapper.updateByPrimaryKey:137  [32m13594254106562560 [0;39m <==    Updates: 1
2023-03-06 14:50:13.012 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594254106562560 [0;39m è¿”å›žç»“æžœ: {"success":true}
2023-03-06 14:50:13.012 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594254106562560 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-03-06 14:50:13.013 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m13594254106562560 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š10 ms -------------
2023-03-06 14:50:13.034 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594254228197376 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:50:13.035 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594254228197376 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-06 14:50:13.035 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594254228197376 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-06 14:50:13.035 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594254228197376 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:50:13.035 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594254228197376 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-03-06 14:50:13.036 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13594254228197376 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-03-06 14:50:13.037 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13594254228197376 [0;39m ==> Parameters: 
2023-03-06 14:50:13.037 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13594254228197376 [0;39m <==    Columns: count(0)
2023-03-06 14:50:13.038 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13594254228197376 [0;39m <==        Row: 5
2023-03-06 14:50:13.038 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13594254228197376 [0;39m <==      Total: 1
2023-03-06 14:50:13.039 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13594254228197376 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-03-06 14:50:13.039 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13594254228197376 [0;39m ==> Parameters: 10(Integer)
2023-03-06 14:50:13.041 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594254228197376 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-06 14:50:13.041 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594254228197376 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 8, 5
2023-03-06 14:50:13.041 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594254228197376 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, 100, 101, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 14:50:13.041 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594254228197376 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, 300, 301, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 14:50:13.042 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594254228197376 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, 400, 401, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 14:50:13.042 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594254228197376 [0;39m <==        Row: 5, Oracle å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 14:50:13.042 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13594254228197376 [0;39m <==      Total: 5
2023-03-06 14:50:13.043 INFO  com.jiawa.wiki.service.EbookService               :48   [32m13594254228197376 [0;39m æ€»è¡Œæ•°ï¼š5
2023-03-06 14:50:13.043 INFO  com.jiawa.wiki.service.EbookService               :49   [32m13594254228197376 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-06 14:50:13.043 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594254228197376 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":8,"voteCount":5},{"category1Id":100,"category2Id":101,"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":300,"category2Id":301,"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":5,"name":"Oracle å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-03-06 14:50:13.044 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594254228197376 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š10 ms -------------
2023-03-06 14:50:22.400 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m13594167146057728 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-06 14:50:22.400 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m13594167146057728 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/ebook/save
2023-03-06 14:50:22.400 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m13594167146057728 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š13594162070949888
2023-03-06 14:50:22.402 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m13594167146057728 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"13594162070949888"}
2023-03-06 14:50:22.404 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594293528825856 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:50:22.404 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594293528825856 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/save POST
2023-03-06 14:50:22.404 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594293528825856 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.save
2023-03-06 14:50:22.404 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594293528825856 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:50:22.404 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594293528825856 [0;39m è¯·æ±‚å‚æ•°: [{"description":"é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":5,"name":"Oracle å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}]
2023-03-06 14:50:22.405 DEBUG c.jiawa.wiki.mapper.EbookMapper.updateByPrimaryKey:137  [32m13594293528825856 [0;39m ==>  Preparing: update ebook set `name` = ?, category1_id = ?, category2_id = ?, description = ?, cover = ?, doc_count = ?, view_count = ?, vote_count = ? where id = ?
2023-03-06 14:50:22.406 DEBUG c.jiawa.wiki.mapper.EbookMapper.updateByPrimaryKey:137  [32m13594293528825856 [0;39m ==> Parameters: Oracle å…¥é—¨æ•™ç¨‹(String), null, null, é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶(String), null, 0(Integer), 0(Integer), 0(Integer), 5(Long)
2023-03-06 14:50:22.413 DEBUG c.jiawa.wiki.mapper.EbookMapper.updateByPrimaryKey:137  [32m13594293528825856 [0;39m <==    Updates: 1
2023-03-06 14:50:22.413 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594293528825856 [0;39m è¿”å›žç»“æžœ: {"success":true}
2023-03-06 14:50:22.413 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594293528825856 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š10 ms -------------
2023-03-06 14:50:22.414 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m13594293528825856 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š14 ms -------------
2023-03-06 14:50:22.449 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594293713375232 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:50:22.449 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594293713375232 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-06 14:50:22.449 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594293713375232 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-06 14:50:22.449 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594293713375232 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:50:22.449 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594293713375232 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-03-06 14:50:22.450 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13594293713375232 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-03-06 14:50:22.451 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13594293713375232 [0;39m ==> Parameters: 
2023-03-06 14:50:22.452 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13594293713375232 [0;39m <==    Columns: count(0)
2023-03-06 14:50:22.452 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13594293713375232 [0;39m <==        Row: 5
2023-03-06 14:50:22.452 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13594293713375232 [0;39m <==      Total: 1
2023-03-06 14:50:22.452 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13594293713375232 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-03-06 14:50:22.453 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13594293713375232 [0;39m ==> Parameters: 10(Integer)
2023-03-06 14:50:22.453 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594293713375232 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-06 14:50:22.454 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594293713375232 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 8, 5
2023-03-06 14:50:22.454 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594293713375232 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, 100, 101, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 14:50:22.454 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594293713375232 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, 300, 301, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 14:50:22.454 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594293713375232 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, 400, 401, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 14:50:22.455 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594293713375232 [0;39m <==        Row: 5, Oracle å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 14:50:22.455 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13594293713375232 [0;39m <==      Total: 5
2023-03-06 14:50:22.456 INFO  com.jiawa.wiki.service.EbookService               :48   [32m13594293713375232 [0;39m æ€»è¡Œæ•°ï¼š5
2023-03-06 14:50:22.456 INFO  com.jiawa.wiki.service.EbookService               :49   [32m13594293713375232 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-06 14:50:22.456 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594293713375232 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":8,"voteCount":5},{"category1Id":100,"category2Id":101,"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":300,"category2Id":301,"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":5,"name":"Oracle å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-03-06 14:50:22.456 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594293713375232 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-03-06 14:50:24.765 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594303431577600 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:50:24.765 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594303431577601 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:50:24.765 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594303431577600 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-06 14:50:24.765 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594303431577601 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-03-06 14:50:24.765 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594303431577602 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:50:24.765 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594303431577600 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-06 14:50:24.765 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594303431577601 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-03-06 14:50:24.765 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594303431577600 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:50:24.765 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594303431577602 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-03-06 14:50:24.766 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594303431577601 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:50:24.766 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594303431577602 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-03-06 14:50:24.766 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594303431577600 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 14:50:24.766 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594303431577602 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:50:24.766 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594303431577601 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 14:50:24.766 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594303431577602 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 14:50:24.766 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13594303431577602 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-06 14:50:24.766 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13594303431577601 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-06 14:50:24.766 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13594303431577600 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-06 14:50:24.767 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13594303431577600 [0;39m ==> Parameters: 
2023-03-06 14:50:24.767 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13594303431577601 [0;39m ==> Parameters: 
2023-03-06 14:50:24.767 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13594303431577602 [0;39m ==> Parameters: 
2023-03-06 14:50:24.768 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594303431577600 [0;39m <==    Columns: id, parent, name, sort
2023-03-06 14:50:24.768 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594303431577600 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-06 14:50:24.768 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13594303431577601 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-03-06 14:50:24.768 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594303431577600 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-06 14:50:24.768 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594303431577600 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-06 14:50:24.768 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13594303431577601 [0;39m <==        Row: 2023-03-05, 8, 5, 8, 5
2023-03-06 14:50:24.769 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594303431577600 [0;39m <==        Row: 200, 0, Java, 200
2023-03-06 14:50:24.769 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13594303431577602 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-03-06 14:50:24.769 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13594303431577601 [0;39m <==        Row: 2023-03-06, 8, 5, 0, 0
2023-03-06 14:50:24.769 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594303431577600 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-06 14:50:24.769 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13594303431577602 [0;39m <==        Row: 2023-03-02, 0, 0
2023-03-06 14:50:24.769 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13594303431577601 [0;39m <==      Total: 2
2023-03-06 14:50:24.769 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594303431577600 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-06 14:50:24.769 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594303431577600 [0;39m <==        Row: 300, 0, Python, 300
2023-03-06 14:50:24.769 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13594303431577602 [0;39m <==        Row: 2023-03-05, 8, 5
2023-03-06 14:50:24.769 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594303431577600 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-06 14:50:24.769 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13594303431577602 [0;39m <==      Total: 2
2023-03-06 14:50:24.769 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594303431577601 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677945600000,"viewCount":8,"viewIncrease":8,"voteCount":5,"voteIncrease":5},{"date":1678032000000,"viewCount":8,"viewIncrease":0,"voteCount":5,"voteIncrease":0}],"success":true}
2023-03-06 14:50:24.770 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594303431577600 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-06 14:50:24.770 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594303431577601 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-03-06 14:50:24.770 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594303431577600 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-06 14:50:24.770 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594303431577600 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-06 14:50:24.770 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594303431577602 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1677945600000,"viewCount":0,"viewIncrease":8,"voteCount":0,"voteIncrease":5}],"success":true}
2023-03-06 14:50:24.770 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594303431577600 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-06 14:50:24.770 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594303431577602 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-03-06 14:50:24.770 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594303431577600 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-06 14:50:24.771 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594303431577600 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-06 14:50:24.771 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594303431577600 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-06 14:50:24.771 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13594303431577600 [0;39m <==      Total: 15
2023-03-06 14:50:24.772 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594303431577600 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-06 14:50:24.772 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594303431577600 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-03-06 14:50:25.701 INFO  com.jiawa.wiki.websocket.WebSocketServer          :41   [32m13594235630653440 [0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šxuVbzZGv0Hï¼Œsession idï¼š1ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2023-03-06 14:50:27.309 INFO  com.jiawa.wiki.websocket.WebSocketServer          :32   [32m13594254106562560 [0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šXCaFBEl6okï¼Œsession idï¼š2ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2023-03-06 14:50:27.469 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594314772975616 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:50:27.470 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594314772975617 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:50:27.469 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594314772975616 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-03-06 14:50:27.470 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594314772975617 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-03-06 14:50:27.470 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594314772975616 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-03-06 14:50:27.470 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594314772975617 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-03-06 14:50:27.470 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594314772975616 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:50:27.470 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594314772975617 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:50:27.470 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594314772975616 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 14:50:27.470 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594314772975617 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 14:50:27.470 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594314777169920 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:50:27.470 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594314777169920 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-06 14:50:27.471 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594314777169920 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-06 14:50:27.471 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13594314772975617 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-06 14:50:27.471 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594314777169920 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:50:27.471 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594314777169920 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 14:50:27.471 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13594314772975617 [0;39m ==> Parameters: 
2023-03-06 14:50:27.471 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13594314777169920 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-06 14:50:27.472 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13594314772975616 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-06 14:50:27.472 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13594314777169920 [0;39m ==> Parameters: 
2023-03-06 14:50:27.472 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13594314772975616 [0;39m ==> Parameters: 
2023-03-06 14:50:27.472 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13594314772975617 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-03-06 14:50:27.472 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594314777169920 [0;39m <==    Columns: id, parent, name, sort
2023-03-06 14:50:27.472 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13594314772975617 [0;39m <==        Row: 2023-03-02, 0, 0
2023-03-06 14:50:27.472 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13594314772975616 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-03-06 14:50:27.472 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594314777169920 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-06 14:50:27.473 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13594314772975616 [0;39m <==        Row: 2023-03-05, 8, 5, 8, 5
2023-03-06 14:50:27.473 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13594314772975617 [0;39m <==        Row: 2023-03-05, 8, 5
2023-03-06 14:50:27.473 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13594314772975617 [0;39m <==      Total: 2
2023-03-06 14:50:27.473 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594314777169920 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-06 14:50:27.473 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13594314772975616 [0;39m <==        Row: 2023-03-06, 8, 5, 0, 0
2023-03-06 14:50:27.473 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594314777169920 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-06 14:50:27.473 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594314772975617 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1677945600000,"viewCount":0,"viewIncrease":8,"voteCount":0,"voteIncrease":5}],"success":true}
2023-03-06 14:50:27.473 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594314772975617 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-03-06 14:50:27.474 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13594314772975616 [0;39m <==      Total: 2
2023-03-06 14:50:27.473 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594314777169920 [0;39m <==        Row: 200, 0, Java, 200
2023-03-06 14:50:27.474 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594314772975616 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677945600000,"viewCount":8,"viewIncrease":8,"voteCount":5,"voteIncrease":5},{"date":1678032000000,"viewCount":8,"viewIncrease":0,"voteCount":5,"voteIncrease":0}],"success":true}
2023-03-06 14:50:27.475 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594314772975616 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-03-06 14:50:27.475 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594314777169920 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-06 14:50:27.475 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594314777169920 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-06 14:50:27.475 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594314777169920 [0;39m <==        Row: 300, 0, Python, 300
2023-03-06 14:50:27.476 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594314777169920 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-06 14:50:27.476 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594314777169920 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-06 14:50:27.476 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594314777169920 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-06 14:50:27.476 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594314777169920 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-06 14:50:27.477 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594314777169920 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-06 14:50:27.477 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594314777169920 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-06 14:50:27.477 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594314777169920 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-06 14:50:27.477 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594314777169920 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-06 14:50:27.478 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13594314777169920 [0;39m <==      Total: 15
2023-03-06 14:50:27.478 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594314777169920 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-06 14:50:27.479 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594314777169920 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2023-03-06 14:50:28.329 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594318380077056 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:50:28.329 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594318380077056 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-06 14:50:28.329 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594318380077056 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-06 14:50:28.329 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594318380077056 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:50:28.330 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594318380077056 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":101,"page":1,"size":1000}]
2023-03-06 14:50:28.337 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13594318380077056 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-06 14:50:28.338 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13594318380077056 [0;39m ==> Parameters: 101(Long)
2023-03-06 14:50:28.339 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13594318380077056 [0;39m <==    Columns: count(0)
2023-03-06 14:50:28.339 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13594318380077056 [0;39m <==        Row: 1
2023-03-06 14:50:28.339 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13594318380077056 [0;39m <==      Total: 1
2023-03-06 14:50:28.339 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13594318380077056 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-03-06 14:50:28.341 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13594318380077056 [0;39m ==> Parameters: 101(Long), 1000(Integer)
2023-03-06 14:50:28.341 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594318380077056 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-06 14:50:28.341 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594318380077056 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, 100, 101, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 14:50:28.341 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13594318380077056 [0;39m <==      Total: 1
2023-03-06 14:50:28.342 INFO  com.jiawa.wiki.service.EbookService               :48   [32m13594318380077056 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-06 14:50:28.342 INFO  com.jiawa.wiki.service.EbookService               :49   [32m13594318380077056 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-06 14:50:28.342 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594318380077056 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":100,"category2Id":101,"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":1},"success":true}
2023-03-06 14:50:28.342 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594318380077056 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š13 ms -------------
2023-03-06 14:50:29.380 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594322788290560 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:50:29.380 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594322788290560 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/2 GET
2023-03-06 14:50:29.380 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594322788290560 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-03-06 14:50:29.380 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594322788290560 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:50:29.380 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594322788290560 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-03-06 14:50:29.387 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m13594322788290560 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-03-06 14:50:29.387 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m13594322788290560 [0;39m ==> Parameters: 2(Long)
2023-03-06 14:50:29.388 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m13594322788290560 [0;39m <==      Total: 0
2023-03-06 14:50:29.389 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594322788290560 [0;39m è¿”å›žç»“æžœ: {"content":[],"success":true}
2023-03-06 14:50:29.389 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594322788290560 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2023-03-06 14:50:31.053 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594329805361152 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:50:31.055 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594329805361152 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-06 14:50:31.055 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594329805361152 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-06 14:50:31.055 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594329805361152 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:50:31.055 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594329805361152 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 14:50:31.055 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13594329805361152 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-06 14:50:31.056 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13594329805361152 [0;39m ==> Parameters: 
2023-03-06 14:50:31.056 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594329805361152 [0;39m <==    Columns: id, parent, name, sort
2023-03-06 14:50:31.056 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594329805361152 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-06 14:50:31.057 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594329805361152 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-06 14:50:31.057 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594329805361152 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-06 14:50:31.057 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594329805361152 [0;39m <==        Row: 200, 0, Java, 200
2023-03-06 14:50:31.058 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594329805361152 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-06 14:50:31.058 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594329805361152 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-06 14:50:31.058 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594329805361152 [0;39m <==        Row: 300, 0, Python, 300
2023-03-06 14:50:31.058 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594329805361152 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-06 14:50:31.058 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594329805361152 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-06 14:50:31.059 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594329805361152 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-06 14:50:31.059 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594329805361152 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-06 14:50:31.059 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594329805361152 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-06 14:50:31.059 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594329805361152 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-06 14:50:31.059 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594329805361152 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-06 14:50:31.060 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594329805361152 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-06 14:50:31.060 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13594329805361152 [0;39m <==      Total: 15
2023-03-06 14:50:31.060 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594329805361152 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-06 14:50:31.061 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594329805361152 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-03-06 14:50:31.085 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594329939578880 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:50:31.085 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594329939578880 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-06 14:50:31.085 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594329939578880 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-06 14:50:31.085 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594329939578880 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:50:31.085 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594329939578880 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-03-06 14:50:31.090 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13594329939578880 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-03-06 14:50:31.091 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13594329939578880 [0;39m ==> Parameters: 
2023-03-06 14:50:31.091 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13594329939578880 [0;39m <==    Columns: count(0)
2023-03-06 14:50:31.091 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13594329939578880 [0;39m <==        Row: 5
2023-03-06 14:50:31.091 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13594329939578880 [0;39m <==      Total: 1
2023-03-06 14:50:31.092 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13594329939578880 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-03-06 14:50:31.092 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13594329939578880 [0;39m ==> Parameters: 10(Integer)
2023-03-06 14:50:31.092 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594329939578880 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-06 14:50:31.093 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594329939578880 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 8, 5
2023-03-06 14:50:31.093 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594329939578880 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, 100, 101, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 14:50:31.093 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594329939578880 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, 300, 301, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 14:50:31.094 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594329939578880 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, 400, 401, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 14:50:31.094 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594329939578880 [0;39m <==        Row: 5, Oracle å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 14:50:31.094 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13594329939578880 [0;39m <==      Total: 5
2023-03-06 14:50:31.095 INFO  com.jiawa.wiki.service.EbookService               :48   [32m13594329939578880 [0;39m æ€»è¡Œæ•°ï¼š5
2023-03-06 14:50:31.095 INFO  com.jiawa.wiki.service.EbookService               :49   [32m13594329939578880 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-06 14:50:31.095 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594329939578880 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":8,"voteCount":5},{"category1Id":100,"category2Id":101,"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":300,"category2Id":301,"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":5,"name":"Oracle å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-03-06 14:50:31.095 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594329939578880 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š10 ms -------------
2023-03-06 14:50:32.225 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594334721085442 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:50:32.225 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594334721085441 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:50:32.225 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594334721085440 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:50:32.225 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594334721085441 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-06 14:50:32.225 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594334721085442 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-03-06 14:50:32.225 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594334721085440 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-03-06 14:50:32.227 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594334721085441 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-06 14:50:32.227 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594334721085442 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-03-06 14:50:32.227 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594334721085440 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-03-06 14:50:32.227 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594334721085441 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:50:32.227 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594334721085442 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:50:32.227 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594334721085441 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 14:50:32.227 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594334721085442 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 14:50:32.228 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13594334721085442 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-06 14:50:32.228 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13594334721085441 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-06 14:50:32.228 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13594334721085441 [0;39m ==> Parameters: 
2023-03-06 14:50:32.228 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13594334721085442 [0;39m ==> Parameters: 
2023-03-06 14:50:32.227 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594334721085440 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:50:32.228 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594334721085440 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 14:50:32.229 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13594334721085440 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-06 14:50:32.229 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13594334721085442 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-03-06 14:50:32.229 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13594334721085440 [0;39m ==> Parameters: 
2023-03-06 14:50:32.229 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13594334721085442 [0;39m <==        Row: 2023-03-02, 0, 0
2023-03-06 14:50:32.229 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594334721085441 [0;39m <==    Columns: id, parent, name, sort
2023-03-06 14:50:32.230 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13594334721085440 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-03-06 14:50:32.230 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13594334721085442 [0;39m <==        Row: 2023-03-05, 8, 5
2023-03-06 14:50:32.230 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594334721085441 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-06 14:50:32.230 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13594334721085442 [0;39m <==      Total: 2
2023-03-06 14:50:32.230 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13594334721085440 [0;39m <==        Row: 2023-03-05, 8, 5, 8, 5
2023-03-06 14:50:32.230 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594334721085441 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-06 14:50:32.230 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594334721085442 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1677945600000,"viewCount":0,"viewIncrease":8,"voteCount":0,"voteIncrease":5}],"success":true}
2023-03-06 14:50:32.230 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594334721085441 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-06 14:50:32.230 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594334721085442 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-03-06 14:50:32.230 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594334721085441 [0;39m <==        Row: 200, 0, Java, 200
2023-03-06 14:50:32.231 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594334721085441 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-06 14:50:32.231 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13594334721085440 [0;39m <==        Row: 2023-03-06, 8, 5, 0, 0
2023-03-06 14:50:32.231 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594334721085441 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-06 14:50:32.231 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13594334721085440 [0;39m <==      Total: 2
2023-03-06 14:50:32.231 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594334721085441 [0;39m <==        Row: 300, 0, Python, 300
2023-03-06 14:50:32.232 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594334721085440 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677945600000,"viewCount":8,"viewIncrease":8,"voteCount":5,"voteIncrease":5},{"date":1678032000000,"viewCount":8,"viewIncrease":0,"voteCount":5,"voteIncrease":0}],"success":true}
2023-03-06 14:50:32.232 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594334721085441 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-06 14:50:32.232 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594334721085440 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-03-06 14:50:32.232 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594334721085441 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-06 14:50:32.232 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594334721085441 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-06 14:50:32.232 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594334721085441 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-06 14:50:32.233 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594334721085441 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-06 14:50:32.233 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594334721085441 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-06 14:50:32.233 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594334721085441 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-06 14:50:32.234 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13594334721085441 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-06 14:50:32.234 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13594334721085441 [0;39m <==      Total: 15
2023-03-06 14:50:32.235 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594334721085441 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-06 14:50:32.235 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594334721085441 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š10 ms -------------
2023-03-06 14:50:33.184 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594338743422976 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:50:33.185 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594338743422976 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-06 14:50:33.185 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594338743422976 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-06 14:50:33.185 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594338743422976 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:50:33.185 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594338743422976 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":202,"page":1,"size":1000}]
2023-03-06 14:50:33.187 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13594338743422976 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-06 14:50:33.187 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13594338743422976 [0;39m ==> Parameters: 202(Long)
2023-03-06 14:50:33.188 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13594338743422976 [0;39m <==    Columns: count(0)
2023-03-06 14:50:33.188 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13594338743422976 [0;39m <==        Row: 1
2023-03-06 14:50:33.188 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13594338743422976 [0;39m <==      Total: 1
2023-03-06 14:50:33.189 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13594338743422976 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-03-06 14:50:33.189 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13594338743422976 [0;39m ==> Parameters: 202(Long), 1000(Integer)
2023-03-06 14:50:33.190 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594338743422976 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-06 14:50:33.190 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13594338743422976 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 8, 5
2023-03-06 14:50:33.190 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13594338743422976 [0;39m <==      Total: 1
2023-03-06 14:50:33.191 INFO  com.jiawa.wiki.service.EbookService               :48   [32m13594338743422976 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-06 14:50:33.191 INFO  com.jiawa.wiki.service.EbookService               :49   [32m13594338743422976 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-06 14:50:33.191 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594338743422976 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":8,"voteCount":5}],"total":1},"success":true}
2023-03-06 14:50:33.191 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594338743422976 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-03-06 14:50:34.669 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594344971964416 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:50:34.670 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594344971964416 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/1 GET
2023-03-06 14:50:34.670 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594344971964416 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-03-06 14:50:34.670 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594344971964416 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:50:34.671 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594344971964416 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-03-06 14:50:34.672 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m13594344971964416 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-03-06 14:50:34.672 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m13594344971964416 [0;39m ==> Parameters: 1(Long)
2023-03-06 14:50:34.673 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m13594344971964416 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-03-06 14:50:34.673 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m13594344971964416 [0;39m <==        Row: 1, 1, 0, æ–‡æ¡£1, 1, 3, 1
2023-03-06 14:50:34.674 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m13594344971964416 [0;39m <==        Row: 2, 1, 1, æ–‡æ¡£1.1, 1, 1, 1
2023-03-06 14:50:34.674 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m13594344971964416 [0;39m <==        Row: 4, 1, 3, æ–‡æ¡£2.1, 1, 2, 1
2023-03-06 14:50:34.674 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m13594344971964416 [0;39m <==        Row: 6, 1, 5, æ–‡æ¡£2.2.1, 1, 1, 1
2023-03-06 14:50:34.674 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m13594344971964416 [0;39m <==        Row: 3, 1, 0, æ–‡æ¡£2, 2, 0, 0
2023-03-06 14:50:34.675 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m13594344971964416 [0;39m <==        Row: 5, 1, 3, æ–‡æ¡£2.2, 2, 1, 1
2023-03-06 14:50:34.675 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m13594344971964416 [0;39m <==      Total: 6
2023-03-06 14:50:34.683 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594344971964416 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":1,"id":1,"name":"æ–‡æ¡£1","parent":0,"sort":1,"viewCount":3,"voteCount":1},{"ebookId":1,"id":2,"name":"æ–‡æ¡£1.1","parent":1,"sort":1,"viewCount":1,"voteCount":1},{"ebookId":1,"id":4,"name":"æ–‡æ¡£2.1","parent":3,"sort":1,"viewCount":2,"voteCount":1},{"ebookId":1,"id":6,"name":"æ–‡æ¡£2.2.1","parent":5,"sort":1,"viewCount":1,"voteCount":1},{"ebookId":1,"id":3,"name":"æ–‡æ¡£2","parent":0,"sort":2,"viewCount":0,"voteCount":0},{"ebookId":1,"id":5,"name":"æ–‡æ¡£2.2","parent":3,"sort":2,"viewCount":1,"voteCount":1}],"success":true}
2023-03-06 14:50:34.684 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594344971964416 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š15 ms -------------
2023-03-06 14:50:34.702 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594345110376448 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:50:34.702 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594345110376448 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/1 GET
2023-03-06 14:50:34.703 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594345110376448 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-03-06 14:50:34.703 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594345110376448 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:50:34.703 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594345110376448 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-03-06 14:50:34.703 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m13594345110376448 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-03-06 14:50:34.704 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m13594345110376448 [0;39m ==> Parameters: 1(Long)
2023-03-06 14:50:34.708 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m13594345110376448 [0;39m <==      Total: 0
2023-03-06 14:50:34.710 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m13594345110376448 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-03-06 14:50:34.710 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m13594345110376448 [0;39m ==> Parameters: 1(Long)
2023-03-06 14:50:34.711 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m13594345110376448 [0;39m <==    Updates: 1
2023-03-06 14:50:34.711 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594345110376448 [0;39m è¿”å›žç»“æžœ: {"content":"","success":true}
2023-03-06 14:50:34.711 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594345110376448 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2023-03-06 14:50:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13594346418999296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 14:50:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13594346418999296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 14:50:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13594346418999296 [0;39m ==> Parameters: 
2023-03-06 14:50:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13594346418999296 [0;39m <==    Updates: 1
2023-03-06 14:50:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13594346418999296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 14:50:35.978 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13594350462308352 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:50:35.979 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13594350462308352 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/vote/1 GET
2023-03-06 14:50:35.979 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13594350462308352 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.vote
2023-03-06 14:50:35.979 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13594350462308352 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:50:35.979 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13594350462308352 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-03-06 14:50:35.982 INFO  com.jiawa.wiki.util.RedisUtil                     :31   [32m13594350462308352 [0;39m keyä¸å­˜åœ¨ï¼Œæ”¾å…¥ï¼šDOC_VOTE_1_127.0.0.1ï¼Œè¿‡æœŸ 5000 ç§’
2023-03-06 14:50:35.984 DEBUG c.j.wiki.mapper.DocMapperCust.increaseVoteCount   :137  [32m13594350462308352 [0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2023-03-06 14:50:35.984 DEBUG c.j.wiki.mapper.DocMapperCust.increaseVoteCount   :137  [32m13594350462308352 [0;39m ==> Parameters: 1(Long)
2023-03-06 14:50:35.985 DEBUG c.j.wiki.mapper.DocMapperCust.increaseVoteCount   :137  [32m13594350462308352 [0;39m <==    Updates: 1
2023-03-06 14:50:35.985 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:137  [32m13594350462308352 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2023-03-06 14:50:35.986 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:137  [32m13594350462308352 [0;39m ==> Parameters: 1(Long)
2023-03-06 14:50:35.986 TRACE com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:143  [32m13594350462308352 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-03-06 14:50:35.986 TRACE com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:143  [32m13594350462308352 [0;39m <==        Row: 1, 1, 0, æ–‡æ¡£1, 1, 4, 2
2023-03-06 14:50:35.987 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:137  [32m13594350462308352 [0;39m <==      Total: 1
2023-03-06 14:50:36.616 INFO  com.jiawa.wiki.rocketmq.VoteTopicConsumer         :25   [32m                  [0;39m ROCKETMQæ”¶åˆ°æ¶ˆæ¯ï¼šã€æ–‡æ¡£1ã€‘è¢«ç‚¹èµžï¼
2023-03-06 14:50:36.617 INFO  com.jiawa.wiki.websocket.WebSocketServer          :71   [32m                  [0;39m æŽ¨é€æ¶ˆæ¯ï¼šXCaFBEl6okï¼Œå†…å®¹ï¼šã€æ–‡æ¡£1ã€‘è¢«ç‚¹èµžï¼
2023-03-06 14:50:36.621 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13594350462308352 [0;39m è¿”å›žç»“æžœ: {"success":true}
2023-03-06 14:50:36.621 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13594350462308352 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š643 ms -------------
2023-03-06 14:51:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13594451280793600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 14:51:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13594451280793600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 14:51:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13594451280793600 [0;39m ==> Parameters: 
2023-03-06 14:51:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13594451280793600 [0;39m <==    Updates: 0
2023-03-06 14:51:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13594451280793600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 14:51:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13594472214564864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 14:51:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13594472214564864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 14:51:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13594472214564864 [0;39m ==> Parameters: 
2023-03-06 14:51:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13594472214564864 [0;39m <==    Updates: 1
2023-03-06 14:51:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13594472214564864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 14:51:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13594598022713344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 14:51:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13594598022713344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 14:51:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13594598022713344 [0;39m ==> Parameters: 
2023-03-06 14:51:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13594598022713344 [0;39m <==    Updates: 1
2023-03-06 14:51:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13594598022713344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 14:52:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13594702934839296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 14:52:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13594702934839296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 14:52:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13594702934839296 [0;39m ==> Parameters: 
2023-03-06 14:52:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13594702934839296 [0;39m <==    Updates: 0
2023-03-06 14:52:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13594702934839296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 14:52:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13594723868610560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 14:52:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13594723868610560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 14:52:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13594723868610560 [0;39m ==> Parameters: 
2023-03-06 14:52:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13594723868610560 [0;39m <==    Updates: 1
2023-03-06 14:52:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13594723868610560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 14:52:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13594849701924864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 14:52:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13594849701924864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 14:52:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13594849701924864 [0;39m ==> Parameters: 
2023-03-06 14:52:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13594849701924864 [0;39m <==    Updates: 1
2023-03-06 14:52:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13594849701924864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 14:53:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13594954593079296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 14:53:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13594954593079296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 14:53:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13594954593079296 [0;39m ==> Parameters: 
2023-03-06 14:53:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13594954593079296 [0;39m <==    Updates: 0
2023-03-06 14:53:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13594954593079296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 14:53:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13594975556210688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 14:53:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13594975556210688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 14:53:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13594975556210688 [0;39m ==> Parameters: 
2023-03-06 14:53:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13594975556210688 [0;39m <==    Updates: 1
2023-03-06 14:53:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13594975556210688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 14:53:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13595101389524992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 14:53:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13595101389524992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 14:53:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13595101389524992 [0;39m ==> Parameters: 
2023-03-06 14:53:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13595101389524992 [0;39m <==    Updates: 1
2023-03-06 14:53:35.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13595101389524992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 14:54:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13595206196793344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 14:54:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13595206196793344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 14:54:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13595206196793344 [0;39m ==> Parameters: 
2023-03-06 14:54:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13595206196793344 [0;39m <==    Updates: 0
2023-03-06 14:54:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13595206196793344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 14:54:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13595227176701952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 14:54:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13595227176701952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 14:54:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13595227176701952 [0;39m ==> Parameters: 
2023-03-06 14:54:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13595227176701952 [0;39m <==    Updates: 1
2023-03-06 14:54:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13595227176701952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 14:54:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13595353026793472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 14:54:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13595353026793472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 14:54:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13595353026793472 [0;39m ==> Parameters: 
2023-03-06 14:54:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13595353026793472 [0;39m <==    Updates: 1
2023-03-06 14:54:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13595353026793472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 14:55:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13595457871810560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 14:55:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13595457871810560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 14:55:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13595457871810560 [0;39m ==> Parameters: 
2023-03-06 14:55:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13595457871810560 [0;39m <==    Updates: 0
2023-03-06 14:55:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13595457871810560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š14æ¯«ç§’
2023-03-06 14:55:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13595478872690688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 14:55:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13595478872690688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 14:55:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13595478872690688 [0;39m ==> Parameters: 
2023-03-06 14:55:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13595478872690688 [0;39m <==    Updates: 1
2023-03-06 14:55:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13595478872690688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 14:55:35.017 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13595604722782208 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 14:55:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13595604722782208 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 14:55:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13595604722782208 [0;39m ==> Parameters: 
2023-03-06 14:55:35.026 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13595604722782208 [0;39m <==    Updates: 1
2023-03-06 14:55:35.026 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13595604722782208 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 14:56:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13595709513273344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 14:56:00.001 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13595709513273344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 14:56:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13595709513273344 [0;39m ==> Parameters: 
2023-03-06 14:56:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13595709513273344 [0;39m <==    Updates: 0
2023-03-06 14:56:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13595709513273344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 14:56:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13595730518347776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 14:56:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13595730518347776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 14:56:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13595730518347776 [0;39m ==> Parameters: 
2023-03-06 14:56:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13595730518347776 [0;39m <==    Updates: 1
2023-03-06 14:56:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13595730518347776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 14:56:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13595856330690560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 14:56:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13595856330690560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 14:56:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13595856330690560 [0;39m ==> Parameters: 
2023-03-06 14:56:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13595856330690560 [0;39m <==    Updates: 1
2023-03-06 14:56:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13595856330690560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 14:57:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13595961226039296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 14:57:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13595961226039296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 14:57:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13595961226039296 [0;39m ==> Parameters: 
2023-03-06 14:57:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13595961226039296 [0;39m <==    Updates: 0
2023-03-06 14:57:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13595961226039296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 14:57:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13595982159810560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 14:57:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13595982159810560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 14:57:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13595982159810560 [0;39m ==> Parameters: 
2023-03-06 14:57:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13595982159810560 [0;39m <==    Updates: 1
2023-03-06 14:57:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13595982159810560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 14:57:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13596108014096384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 14:57:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13596108014096384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 14:57:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13596108014096384 [0;39m ==> Parameters: 
2023-03-06 14:57:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13596108014096384 [0;39m <==    Updates: 1
2023-03-06 14:57:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13596108014096384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 14:58:00.028 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13596212942999552 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 14:58:00.029 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13596212942999552 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 14:58:00.030 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13596212942999552 [0;39m ==> Parameters: 
2023-03-06 14:58:00.064 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13596212942999552 [0;39m <==    Updates: 0
2023-03-06 14:58:00.064 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13596212942999552 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š35æ¯«ç§’
2023-03-06 14:58:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13596233859993600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 14:58:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13596233859993600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 14:58:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13596233859993600 [0;39m ==> Parameters: 
2023-03-06 14:58:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13596233859993600 [0;39m <==    Updates: 1
2023-03-06 14:58:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13596233859993600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 14:58:35.000 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13596359626199040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 14:58:35.000 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13596359626199040 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 14:58:35.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13596359626199040 [0;39m ==> Parameters: 
2023-03-06 14:58:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13596359626199040 [0;39m <==    Updates: 1
2023-03-06 14:58:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13596359626199040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 14:59:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13596464538324992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 14:59:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13596464538324992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 14:59:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13596464538324992 [0;39m ==> Parameters: 
2023-03-06 14:59:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13596464538324992 [0;39m <==    Updates: 0
2023-03-06 14:59:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13596464538324992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-06 14:59:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13596485514039296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 14:59:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13596485514039296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 14:59:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13596485514039296 [0;39m ==> Parameters: 
2023-03-06 14:59:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13596485514039296 [0;39m <==    Updates: 1
2023-03-06 14:59:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13596485514039296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 14:59:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13596611297021952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 14:59:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13596611297021952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 14:59:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13596611297021952 [0;39m ==> Parameters: 
2023-03-06 14:59:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13596611297021952 [0;39m <==    Updates: 1
2023-03-06 14:59:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13596611297021952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 14:59:48.791 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m13594338743422976 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-06 14:59:48.791 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m13594338743422976 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š0 ms -------------
2023-03-06 14:59:48.806 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m13594318380077056 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-06 14:59:48.807 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m13594318380077056 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/list
2023-03-06 14:59:48.807 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m13594318380077056 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š13594162070949888
2023-03-06 14:59:48.808 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m13594318380077056 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"13594162070949888"}
2023-03-06 14:59:48.817 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13596669237137408 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 14:59:48.817 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13596669237137408 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/user/list GET
2023-03-06 14:59:48.817 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13596669237137408 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.UserController.list
2023-03-06 14:59:48.817 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13596669237137408 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 14:59:48.819 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13596669237137408 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-03-06 14:59:48.820 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m13596669237137408 [0;39m ==>  Preparing: SELECT count(0) FROM user
2023-03-06 14:59:48.821 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m13596669237137408 [0;39m ==> Parameters: 
2023-03-06 14:59:48.821 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m13596669237137408 [0;39m <==    Columns: count(0)
2023-03-06 14:59:48.822 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m13596669237137408 [0;39m <==        Row: 1
2023-03-06 14:59:48.822 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m13596669237137408 [0;39m <==      Total: 1
2023-03-06 14:59:48.822 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m13596669237137408 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2023-03-06 14:59:48.823 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m13596669237137408 [0;39m ==> Parameters: 10(Integer)
2023-03-06 14:59:48.823 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m13596669237137408 [0;39m <==    Columns: id, login_name, name, password
2023-03-06 14:59:48.823 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m13596669237137408 [0;39m <==        Row: 1, test, æµ‹è¯•, e70e2222a9d67c4f2eae107533359aa4
2023-03-06 14:59:48.824 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m13596669237137408 [0;39m <==      Total: 1
2023-03-06 14:59:48.824 INFO  com.jiawa.wiki.service.UserService                :49   [32m13596669237137408 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-06 14:59:48.824 INFO  com.jiawa.wiki.service.UserService                :50   [32m13596669237137408 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-06 14:59:48.828 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13596669237137408 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"id":1,"loginName":"test","name":"æµ‹è¯•"}],"total":1},"success":true}
2023-03-06 14:59:48.829 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13596669237137408 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š12 ms -------------
2023-03-06 14:59:48.830 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m13596669237137408 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š23 ms -------------
2023-03-06 15:00:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13596716158816256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:00:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13596716158816256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:00:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13596716158816256 [0;39m ==> Parameters: 
2023-03-06 15:00:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13596716158816256 [0;39m <==    Updates: 0
2023-03-06 15:00:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13596716158816256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 15:00:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13596737121947648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:00:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13596737121947648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:00:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13596737121947648 [0;39m ==> Parameters: 
2023-03-06 15:00:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13596737121947648 [0;39m <==    Updates: 1
2023-03-06 15:00:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13596737121947648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:00:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13596862959456256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:00:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13596862959456256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:00:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13596862959456256 [0;39m ==> Parameters: 
2023-03-06 15:00:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13596862959456256 [0;39m <==    Updates: 1
2023-03-06 15:00:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13596862959456256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-06 15:01:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13596967833833472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:01:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13596967833833472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:01:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13596967833833472 [0;39m ==> Parameters: 
2023-03-06 15:01:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13596967833833472 [0;39m <==    Updates: 0
2023-03-06 15:01:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13596967833833472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-06 15:01:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13596988817936384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:01:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13596988817936384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:01:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13596988817936384 [0;39m ==> Parameters: 
2023-03-06 15:01:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13596988817936384 [0;39m <==    Updates: 1
2023-03-06 15:01:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13596988817936384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 15:01:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13597114621890560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:01:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13597114621890560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:01:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13597114621890560 [0;39m ==> Parameters: 
2023-03-06 15:01:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13597114621890560 [0;39m <==    Updates: 1
2023-03-06 15:01:35.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13597114621890560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 15:02:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13597219513044992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:02:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13597219513044992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:02:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13597219513044992 [0;39m ==> Parameters: 
2023-03-06 15:02:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13597219513044992 [0;39m <==    Updates: 0
2023-03-06 15:02:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13597219513044992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 15:02:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13597240451010560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:02:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13597240451010560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:02:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13597240451010560 [0;39m ==> Parameters: 
2023-03-06 15:02:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13597240451010560 [0;39m <==    Updates: 1
2023-03-06 15:02:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13597240451010560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:02:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13597366280130560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:02:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13597366280130560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:02:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13597366280130560 [0;39m ==> Parameters: 
2023-03-06 15:02:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13597366280130560 [0;39m <==    Updates: 1
2023-03-06 15:02:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13597366280130560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:03:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13597471133536256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:03:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13597471133536256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:03:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13597471133536256 [0;39m ==> Parameters: 
2023-03-06 15:03:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13597471133536256 [0;39m <==    Updates: 0
2023-03-06 15:03:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13597471133536256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-06 15:03:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13597492092473344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:03:05.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13597492092473344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:03:05.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13597492092473344 [0;39m ==> Parameters: 
2023-03-06 15:03:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13597492092473344 [0;39m <==    Updates: 1
2023-03-06 15:03:05.004 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13597492092473344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 15:03:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13597617938370560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:03:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13597617938370560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:03:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13597617938370560 [0;39m ==> Parameters: 
2023-03-06 15:03:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13597617938370560 [0;39m <==    Updates: 1
2023-03-06 15:03:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13597617938370560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:04:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13597722825330688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:04:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13597722825330688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:04:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13597722825330688 [0;39m ==> Parameters: 
2023-03-06 15:04:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13597722825330688 [0;39m <==    Updates: 0
2023-03-06 15:04:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13597722825330688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 15:04:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13597743771684864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:04:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13597743771684864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:04:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13597743771684864 [0;39m ==> Parameters: 
2023-03-06 15:04:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13597743771684864 [0;39m <==    Updates: 1
2023-03-06 15:04:05.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13597743771684864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 15:04:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13597869621776384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:04:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13597869621776384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:04:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13597869621776384 [0;39m ==> Parameters: 
2023-03-06 15:04:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13597869621776384 [0;39m <==    Updates: 1
2023-03-06 15:04:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13597869621776384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-06 15:05:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13597974450016256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:05:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13597974450016256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:05:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13597974450016256 [0;39m ==> Parameters: 
2023-03-06 15:05:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13597974450016256 [0;39m <==    Updates: 0
2023-03-06 15:05:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13597974450016256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:05:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13597995446702080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:05:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13597995446702080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:05:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13597995446702080 [0;39m ==> Parameters: 
2023-03-06 15:05:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13597995446702080 [0;39m <==    Updates: 1
2023-03-06 15:05:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13597995446702080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 15:05:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13598121259044864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:05:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13598121259044864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:05:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13598121259044864 [0;39m ==> Parameters: 
2023-03-06 15:05:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13598121259044864 [0;39m <==    Updates: 1
2023-03-06 15:05:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13598121259044864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:06:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13598226141810688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:06:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13598226141810688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:06:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13598226141810688 [0;39m ==> Parameters: 
2023-03-06 15:06:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13598226141810688 [0;39m <==    Updates: 0
2023-03-06 15:06:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13598226141810688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:06:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13598247104942080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:06:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13598247104942080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:06:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13598247104942080 [0;39m ==> Parameters: 
2023-03-06 15:06:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13598247104942080 [0;39m <==    Updates: 1
2023-03-06 15:06:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13598247104942080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:06:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13598372904701952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:06:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13598372904701952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:06:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13598372904701952 [0;39m ==> Parameters: 
2023-03-06 15:06:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13598372904701952 [0;39m <==    Updates: 1
2023-03-06 15:06:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13598372904701952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:07:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13598477758107648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:07:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13598477758107648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:07:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13598477758107648 [0;39m ==> Parameters: 
2023-03-06 15:07:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13598477758107648 [0;39m <==    Updates: 0
2023-03-06 15:07:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13598477758107648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 15:07:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13598498767376384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:07:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13598498767376384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:07:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13598498767376384 [0;39m ==> Parameters: 
2023-03-06 15:07:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13598498767376384 [0;39m <==    Updates: 1
2023-03-06 15:07:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13598498767376384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:07:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13598624579719168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:07:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13598624579719168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:07:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13598624579719168 [0;39m ==> Parameters: 
2023-03-06 15:07:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13598624579719168 [0;39m <==    Updates: 1
2023-03-06 15:07:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13598624579719168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:08:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13598729458290688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:08:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13598729458290688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:08:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13598729458290688 [0;39m ==> Parameters: 
2023-03-06 15:08:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13598729458290688 [0;39m <==    Updates: 0
2023-03-06 15:08:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13598729458290688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 15:08:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13598750429810688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:08:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13598750429810688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:08:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13598750429810688 [0;39m ==> Parameters: 
2023-03-06 15:08:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13598750429810688 [0;39m <==    Updates: 1
2023-03-06 15:08:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13598750429810688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:08:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13598876246347776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:08:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13598876246347776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:08:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13598876246347776 [0;39m ==> Parameters: 
2023-03-06 15:08:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13598876246347776 [0;39m <==    Updates: 1
2023-03-06 15:08:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13598876246347776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:09:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13598981133307904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:09:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13598981133307904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:09:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13598981133307904 [0;39m ==> Parameters: 
2023-03-06 15:09:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13598981133307904 [0;39m <==    Updates: 0
2023-03-06 15:09:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13598981133307904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 15:09:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13599002041913344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:09:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13599002041913344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:09:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13599002041913344 [0;39m ==> Parameters: 
2023-03-06 15:09:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13599002041913344 [0;39m <==    Updates: 1
2023-03-06 15:09:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13599002041913344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:09:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13599127917170688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:09:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13599127917170688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:09:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13599127917170688 [0;39m ==> Parameters: 
2023-03-06 15:09:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13599127917170688 [0;39m <==    Updates: 1
2023-03-06 15:09:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13599127917170688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:10:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13599232766382080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:10:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13599232766382080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:10:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13599232766382080 [0;39m ==> Parameters: 
2023-03-06 15:10:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13599232766382080 [0;39m <==    Updates: 0
2023-03-06 15:10:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13599232766382080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 15:10:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13599253733707776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:10:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13599253733707776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:10:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13599253733707776 [0;39m ==> Parameters: 
2023-03-06 15:10:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13599253733707776 [0;39m <==    Updates: 1
2023-03-06 15:10:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13599253733707776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:10:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13599379529273344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:10:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13599379529273344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:10:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13599379529273344 [0;39m ==> Parameters: 
2023-03-06 15:10:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13599379529273344 [0;39m <==    Updates: 1
2023-03-06 15:10:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13599379529273344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:11:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13599484437204992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:11:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13599484437204992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:11:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13599484437204992 [0;39m ==> Parameters: 
2023-03-06 15:11:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13599484437204992 [0;39m <==    Updates: 0
2023-03-06 15:11:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13599484437204992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 15:11:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13599505404530688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:11:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13599505404530688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:11:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13599505404530688 [0;39m ==> Parameters: 
2023-03-06 15:11:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13599505404530688 [0;39m <==    Updates: 1
2023-03-06 15:11:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13599505404530688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:11:35.000 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13599631183319040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:11:35.000 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13599631183319040 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:11:35.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13599631183319040 [0;39m ==> Parameters: 
2023-03-06 15:11:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13599631183319040 [0;39m <==    Updates: 1
2023-03-06 15:11:35.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13599631183319040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:12:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13599736053501952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:12:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13599736053501952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:12:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13599736053501952 [0;39m ==> Parameters: 
2023-03-06 15:12:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13599736053501952 [0;39m <==    Updates: 0
2023-03-06 15:12:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13599736053501952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 15:12:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13599757058576384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:12:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13599757058576384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:12:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13599757058576384 [0;39m ==> Parameters: 
2023-03-06 15:12:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13599757058576384 [0;39m <==    Updates: 1
2023-03-06 15:12:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13599757058576384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:12:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13599882866724864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:12:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13599882866724864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:12:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13599882866724864 [0;39m ==> Parameters: 
2023-03-06 15:12:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13599882866724864 [0;39m <==    Updates: 1
2023-03-06 15:12:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13599882866724864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:13:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13599987728519168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:13:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13599987728519168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:13:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13599987728519168 [0;39m ==> Parameters: 
2023-03-06 15:13:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13599987728519168 [0;39m <==    Updates: 0
2023-03-06 15:13:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13599987728519168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 15:13:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13600008695844864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:13:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13600008695844864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:13:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13600008695844864 [0;39m ==> Parameters: 
2023-03-06 15:13:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13600008695844864 [0;39m <==    Updates: 1
2023-03-06 15:13:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13600008695844864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:13:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13600134554324992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:13:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13600134554324992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:13:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13600134554324992 [0;39m ==> Parameters: 
2023-03-06 15:13:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13600134554324992 [0;39m <==    Updates: 1
2023-03-06 15:13:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13600134554324992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:14:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13600239403536384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:14:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13600239403536384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:14:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13600239403536384 [0;39m ==> Parameters: 
2023-03-06 15:14:00.031 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13600239403536384 [0;39m <==    Updates: 0
2023-03-06 15:14:00.032 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13600239403536384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š21æ¯«ç§’
2023-03-06 15:14:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13600260383444992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:14:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13600260383444992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:14:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13600260383444992 [0;39m ==> Parameters: 
2023-03-06 15:14:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13600260383444992 [0;39m <==    Updates: 1
2023-03-06 15:14:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13600260383444992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:14:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13600386166427648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:14:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13600386166427648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:14:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13600386166427648 [0;39m ==> Parameters: 
2023-03-06 15:14:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13600386166427648 [0;39m <==    Updates: 1
2023-03-06 15:14:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13600386166427648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:15:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13600491053387776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:15:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13600491053387776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:15:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13600491053387776 [0;39m ==> Parameters: 
2023-03-06 15:15:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13600491053387776 [0;39m <==    Updates: 0
2023-03-06 15:15:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13600491053387776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 15:15:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13600512045879296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:15:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13600512045879296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:15:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13600512045879296 [0;39m ==> Parameters: 
2023-03-06 15:15:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13600512045879296 [0;39m <==    Updates: 1
2023-03-06 15:15:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13600512045879296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:15:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13600637849833472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:15:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13600637849833472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:15:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13600637849833472 [0;39m ==> Parameters: 
2023-03-06 15:15:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13600637849833472 [0;39m <==    Updates: 1
2023-03-06 15:15:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13600637849833472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 15:16:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13600742728404992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:16:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13600742728404992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:16:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13600742728404992 [0;39m ==> Parameters: 
2023-03-06 15:16:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13600742728404992 [0;39m <==    Updates: 0
2023-03-06 15:16:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13600742728404992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 15:16:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13600763670564864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:16:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13600763670564864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:16:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13600763670564864 [0;39m ==> Parameters: 
2023-03-06 15:16:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13600763670564864 [0;39m <==    Updates: 1
2023-03-06 15:16:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13600763670564864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:16:35.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13600889541627904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:16:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13600889541627904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:16:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13600889541627904 [0;39m ==> Parameters: 
2023-03-06 15:16:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13600889541627904 [0;39m <==    Updates: 1
2023-03-06 15:16:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13600889541627904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 15:17:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13600994374062080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:17:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13600994374062080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:17:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13600994374062080 [0;39m ==> Parameters: 
2023-03-06 15:17:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13600994374062080 [0;39m <==    Updates: 0
2023-03-06 15:17:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13600994374062080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 15:17:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13601015353970688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:17:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13601015353970688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:17:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13601015353970688 [0;39m ==> Parameters: 
2023-03-06 15:17:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13601015353970688 [0;39m <==    Updates: 1
2023-03-06 15:17:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13601015353970688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:17:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13601141191479296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:17:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13601141191479296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:17:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13601141191479296 [0;39m ==> Parameters: 
2023-03-06 15:17:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13601141191479296 [0;39m <==    Updates: 1
2023-03-06 15:17:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13601141191479296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 15:18:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13601246023913472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:18:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13601246023913472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:18:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13601246023913472 [0;39m ==> Parameters: 
2023-03-06 15:18:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13601246023913472 [0;39m <==    Updates: 0
2023-03-06 15:18:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13601246023913472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-06 15:18:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13601267028987904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:18:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13601267028987904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:18:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13601267028987904 [0;39m ==> Parameters: 
2023-03-06 15:18:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13601267028987904 [0;39m <==    Updates: 1
2023-03-06 15:18:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13601267028987904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 15:18:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13601392832942080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:18:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13601392832942080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:18:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13601392832942080 [0;39m ==> Parameters: 
2023-03-06 15:18:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13601392832942080 [0;39m <==    Updates: 1
2023-03-06 15:18:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13601392832942080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 15:19:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13601497661181952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:19:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13601497661181952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:19:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13601497661181952 [0;39m ==> Parameters: 
2023-03-06 15:19:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13601497661181952 [0;39m <==    Updates: 0
2023-03-06 15:19:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13601497661181952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 15:19:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13601518678839296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:19:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13601518678839296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:19:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13601518678839296 [0;39m ==> Parameters: 
2023-03-06 15:19:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13601518678839296 [0;39m <==    Updates: 1
2023-03-06 15:19:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13601518678839296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:19:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13601644507959296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:19:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13601644507959296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:19:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13601644507959296 [0;39m ==> Parameters: 
2023-03-06 15:19:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13601644507959296 [0;39m <==    Updates: 1
2023-03-06 15:19:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13601644507959296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 15:20:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13601749340393472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:20:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13601749340393472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:20:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13601749340393472 [0;39m ==> Parameters: 
2023-03-06 15:20:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13601749340393472 [0;39m <==    Updates: 0
2023-03-06 15:20:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13601749340393472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 15:20:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13601770290941952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:20:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13601770290941952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:20:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13601770290941952 [0;39m ==> Parameters: 
2023-03-06 15:20:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13601770290941952 [0;39m <==    Updates: 1
2023-03-06 15:20:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13601770290941952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:20:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13601896115867648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:20:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13601896115867648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:20:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13601896115867648 [0;39m ==> Parameters: 
2023-03-06 15:20:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13601896115867648 [0;39m <==    Updates: 1
2023-03-06 15:20:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13601896115867648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:21:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13602001019604992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:21:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13602001019604992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:21:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13602001019604992 [0;39m ==> Parameters: 
2023-03-06 15:21:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13602001019604992 [0;39m <==    Updates: 0
2023-03-06 15:21:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13602001019604992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 15:21:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13602021982736384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:21:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13602021982736384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:21:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13602021982736384 [0;39m ==> Parameters: 
2023-03-06 15:21:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13602021982736384 [0;39m <==    Updates: 1
2023-03-06 15:21:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13602021982736384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:21:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13602147782496256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:21:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13602147782496256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:21:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13602147782496256 [0;39m ==> Parameters: 
2023-03-06 15:21:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13602147782496256 [0;39m <==    Updates: 1
2023-03-06 15:21:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13602147782496256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:22:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13602252635901952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:22:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13602252635901952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:22:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13602252635901952 [0;39m ==> Parameters: 
2023-03-06 15:22:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13602252635901952 [0;39m <==    Updates: 0
2023-03-06 15:22:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13602252635901952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:22:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13602273607421952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:22:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13602273607421952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:22:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13602273607421952 [0;39m ==> Parameters: 
2023-03-06 15:22:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13602273607421952 [0;39m <==    Updates: 1
2023-03-06 15:22:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13602273607421952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:22:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13602399444930560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:22:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13602399444930560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:22:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13602399444930560 [0;39m ==> Parameters: 
2023-03-06 15:22:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13602399444930560 [0;39m <==    Updates: 1
2023-03-06 15:22:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13602399444930560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:23:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13602504352862208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:23:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13602504352862208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:23:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13602504352862208 [0;39m ==> Parameters: 
2023-03-06 15:23:00.026 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13602504352862208 [0;39m <==    Updates: 0
2023-03-06 15:23:00.026 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13602504352862208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:23:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13602525315993600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:23:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13602525315993600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:23:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13602525315993600 [0;39m ==> Parameters: 
2023-03-06 15:23:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13602525315993600 [0;39m <==    Updates: 1
2023-03-06 15:23:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13602525315993600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:23:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13602651119947776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:23:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13602651119947776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:23:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13602651119947776 [0;39m ==> Parameters: 
2023-03-06 15:23:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13602651119947776 [0;39m <==    Updates: 1
2023-03-06 15:23:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13602651119947776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 15:24:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13602755973353472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:24:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13602755973353472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:24:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13602755973353472 [0;39m ==> Parameters: 
2023-03-06 15:24:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13602755973353472 [0;39m <==    Updates: 0
2023-03-06 15:24:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13602755973353472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 15:24:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13602776953262080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:24:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13602776953262080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:24:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13602776953262080 [0;39m ==> Parameters: 
2023-03-06 15:24:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13602776953262080 [0;39m <==    Updates: 1
2023-03-06 15:24:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13602776953262080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:24:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13602902769799168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:24:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13602902769799168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:24:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13602902769799168 [0;39m ==> Parameters: 
2023-03-06 15:24:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13602902769799168 [0;39m <==    Updates: 1
2023-03-06 15:24:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13602902769799168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 15:25:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13603007606427648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:25:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13603007606427648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:25:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13603007606427648 [0;39m ==> Parameters: 
2023-03-06 15:25:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13603007606427648 [0;39m <==    Updates: 0
2023-03-06 15:25:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13603007606427648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:25:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13603028586336256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:25:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13603028586336256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:25:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13603028586336256 [0;39m ==> Parameters: 
2023-03-06 15:25:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13603028586336256 [0;39m <==    Updates: 1
2023-03-06 15:25:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13603028586336256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 15:25:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13603154402873344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:25:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13603154402873344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:25:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13603154402873344 [0;39m ==> Parameters: 
2023-03-06 15:25:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13603154402873344 [0;39m <==    Updates: 1
2023-03-06 15:25:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13603154402873344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:26:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13603259273056256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:26:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13603259273056256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:26:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13603259273056256 [0;39m ==> Parameters: 
2023-03-06 15:26:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13603259273056256 [0;39m <==    Updates: 0
2023-03-06 15:26:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13603259273056256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-06 15:26:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13603280248770560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:26:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13603280248770560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:26:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13603280248770560 [0;39m ==> Parameters: 
2023-03-06 15:26:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13603280248770560 [0;39m <==    Updates: 1
2023-03-06 15:26:05.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13603280248770560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 15:26:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13603406098862080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:26:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13603406098862080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:26:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13603406098862080 [0;39m ==> Parameters: 
2023-03-06 15:26:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13603406098862080 [0;39m <==    Updates: 1
2023-03-06 15:26:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13603406098862080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:27:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13603510952267776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:27:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13603510952267776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:27:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13603510952267776 [0;39m ==> Parameters: 
2023-03-06 15:27:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13603510952267776 [0;39m <==    Updates: 0
2023-03-06 15:27:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13603510952267776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 15:27:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13603531940564992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:27:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13603531940564992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:27:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13603531940564992 [0;39m ==> Parameters: 
2023-03-06 15:27:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13603531940564992 [0;39m <==    Updates: 1
2023-03-06 15:27:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13603531940564992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:27:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13603657740324864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:27:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13603657740324864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:27:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13603657740324864 [0;39m ==> Parameters: 
2023-03-06 15:27:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13603657740324864 [0;39m <==    Updates: 1
2023-03-06 15:27:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13603657740324864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 15:28:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13603762602119168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:28:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13603762602119168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:28:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13603762602119168 [0;39m ==> Parameters: 
2023-03-06 15:28:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13603762602119168 [0;39m <==    Updates: 0
2023-03-06 15:28:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13603762602119168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:28:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13603783569444864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:28:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13603783569444864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:28:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13603783569444864 [0;39m ==> Parameters: 
2023-03-06 15:28:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13603783569444864 [0;39m <==    Updates: 1
2023-03-06 15:28:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13603783569444864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:28:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13603909427924992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:28:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13603909427924992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:28:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13603909427924992 [0;39m ==> Parameters: 
2023-03-06 15:28:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13603909427924992 [0;39m <==    Updates: 1
2023-03-06 15:28:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13603909427924992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 15:29:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13604014260359168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:29:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13604014260359168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:29:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13604014260359168 [0;39m ==> Parameters: 
2023-03-06 15:29:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13604014260359168 [0;39m <==    Updates: 0
2023-03-06 15:29:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13604014260359168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 15:29:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13604035265433600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:29:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13604035265433600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:29:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13604035265433600 [0;39m ==> Parameters: 
2023-03-06 15:29:05.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13604035265433600 [0;39m <==    Updates: 1
2023-03-06 15:29:05.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13604035265433600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:29:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13604161052610560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:29:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13604161052610560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:29:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13604161052610560 [0;39m ==> Parameters: 
2023-03-06 15:29:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13604161052610560 [0;39m <==    Updates: 1
2023-03-06 15:29:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13604161052610560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:30:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13604265918599168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:30:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13604265918599168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:30:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13604265918599168 [0;39m ==> Parameters: 
2023-03-06 15:30:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13604265918599168 [0;39m <==    Updates: 0
2023-03-06 15:30:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13604265918599168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-06 15:30:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13604286873341952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:30:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13604286873341952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:30:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13604286873341952 [0;39m ==> Parameters: 
2023-03-06 15:30:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13604286873341952 [0;39m <==    Updates: 1
2023-03-06 15:30:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13604286873341952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:30:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13604412698267648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:30:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13604412698267648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:30:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13604412698267648 [0;39m ==> Parameters: 
2023-03-06 15:30:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13604412698267648 [0;39m <==    Updates: 1
2023-03-06 15:30:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13604412698267648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:31:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13604517589422080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:31:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13604517589422080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:31:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13604517589422080 [0;39m ==> Parameters: 
2023-03-06 15:31:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13604517589422080 [0;39m <==    Updates: 0
2023-03-06 15:31:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13604517589422080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 15:31:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13604538535776256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:31:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13604538535776256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:31:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13604538535776256 [0;39m ==> Parameters: 
2023-03-06 15:31:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13604538535776256 [0;39m <==    Updates: 1
2023-03-06 15:31:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13604538535776256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:31:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13604664373284864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:31:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13604664373284864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:31:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13604664373284864 [0;39m ==> Parameters: 
2023-03-06 15:31:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13604664373284864 [0;39m <==    Updates: 1
2023-03-06 15:31:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13604664373284864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:32:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13604769235079168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:32:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13604769235079168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:32:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13604769235079168 [0;39m ==> Parameters: 
2023-03-06 15:32:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13604769235079168 [0;39m <==    Updates: 0
2023-03-06 15:32:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13604769235079168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-06 15:32:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13604790189821952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:32:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13604790189821952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:32:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13604790189821952 [0;39m ==> Parameters: 
2023-03-06 15:32:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13604790189821952 [0;39m <==    Updates: 1
2023-03-06 15:32:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13604790189821952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:32:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13604916023136256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:32:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13604916023136256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:32:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13604916023136256 [0;39m ==> Parameters: 
2023-03-06 15:32:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13604916023136256 [0;39m <==    Updates: 1
2023-03-06 15:32:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13604916023136256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:33:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13605020918484992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:33:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13605020918484992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:33:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13605020918484992 [0;39m ==> Parameters: 
2023-03-06 15:33:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13605020918484992 [0;39m <==    Updates: 0
2023-03-06 15:33:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13605020918484992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 15:33:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13605041839673344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:33:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13605041839673344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:33:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13605041839673344 [0;39m ==> Parameters: 
2023-03-06 15:33:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13605041839673344 [0;39m <==    Updates: 1
2023-03-06 15:33:05.003 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13605041839673344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 15:33:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13605167714930688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:33:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13605167714930688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:33:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13605167714930688 [0;39m ==> Parameters: 
2023-03-06 15:33:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13605167714930688 [0;39m <==    Updates: 1
2023-03-06 15:33:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13605167714930688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:33:42.691 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13605199922991104 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 15:33:42.692 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13605199922991104 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-06 15:33:42.692 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13605199922991104 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-06 15:33:42.692 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13605199922991104 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 15:33:42.692 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13605199922991104 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 15:33:42.693 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13605199922991104 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-06 15:33:42.693 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13605199922991104 [0;39m ==> Parameters: 
2023-03-06 15:33:42.694 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605199922991104 [0;39m <==    Columns: id, parent, name, sort
2023-03-06 15:33:42.694 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605199922991104 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-06 15:33:42.694 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605199922991104 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-06 15:33:42.694 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605199922991104 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-06 15:33:42.695 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605199922991104 [0;39m <==        Row: 200, 0, Java, 200
2023-03-06 15:33:42.695 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605199922991104 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-06 15:33:42.695 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605199922991104 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-06 15:33:42.695 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605199922991104 [0;39m <==        Row: 300, 0, Python, 300
2023-03-06 15:33:42.696 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605199922991104 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-06 15:33:42.696 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605199922991104 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-06 15:33:42.696 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605199922991104 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-06 15:33:42.696 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605199922991104 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-06 15:33:42.696 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605199922991104 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-06 15:33:42.697 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605199922991104 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-06 15:33:42.697 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605199922991104 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-06 15:33:42.697 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605199922991104 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-06 15:33:42.697 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13605199922991104 [0;39m <==      Total: 15
2023-03-06 15:33:42.697 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13605199922991104 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-06 15:33:42.697 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13605199922991104 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-03-06 15:33:42.717 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13605200032043008 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 15:33:42.717 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13605200032043008 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-06 15:33:42.717 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13605200032043008 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-06 15:33:42.717 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13605200032043008 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 15:33:42.719 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13605200032043008 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-03-06 15:33:42.721 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13605200032043008 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-03-06 15:33:42.721 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13605200032043008 [0;39m ==> Parameters: 
2023-03-06 15:33:42.722 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13605200032043008 [0;39m <==    Columns: count(0)
2023-03-06 15:33:42.722 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13605200032043008 [0;39m <==        Row: 5
2023-03-06 15:33:42.722 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13605200032043008 [0;39m <==      Total: 1
2023-03-06 15:33:42.722 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13605200032043008 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-03-06 15:33:42.722 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13605200032043008 [0;39m ==> Parameters: 10(Integer)
2023-03-06 15:33:42.723 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13605200032043008 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-06 15:33:42.723 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13605200032043008 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 9, 6
2023-03-06 15:33:42.723 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13605200032043008 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, 100, 101, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 15:33:42.723 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13605200032043008 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, 300, 301, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 15:33:42.723 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13605200032043008 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, 400, 401, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 15:33:42.723 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13605200032043008 [0;39m <==        Row: 5, Oracle å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 15:33:42.724 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13605200032043008 [0;39m <==      Total: 5
2023-03-06 15:33:42.724 INFO  com.jiawa.wiki.service.EbookService               :48   [32m13605200032043008 [0;39m æ€»è¡Œæ•°ï¼š5
2023-03-06 15:33:42.724 INFO  com.jiawa.wiki.service.EbookService               :49   [32m13605200032043008 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-06 15:33:42.724 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13605200032043008 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":9,"voteCount":6},{"category1Id":100,"category2Id":101,"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":300,"category2Id":301,"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":5,"name":"Oracle å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-03-06 15:33:42.724 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13605200032043008 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-03-06 15:33:43.476 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13605203215519744 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 15:33:43.476 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13605203215519744 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-06 15:33:43.476 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13605203215519744 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-06 15:33:43.476 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13605203215519744 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 15:33:43.477 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13605203215519744 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 15:33:43.477 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13605203215519744 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-06 15:33:43.477 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13605203215519744 [0;39m ==> Parameters: 
2023-03-06 15:33:43.478 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605203215519744 [0;39m <==    Columns: id, parent, name, sort
2023-03-06 15:33:43.478 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605203215519744 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-06 15:33:43.478 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605203215519744 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-06 15:33:43.479 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605203215519744 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-06 15:33:43.479 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605203215519744 [0;39m <==        Row: 200, 0, Java, 200
2023-03-06 15:33:43.479 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605203215519744 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-06 15:33:43.479 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605203215519744 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-06 15:33:43.479 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605203215519744 [0;39m <==        Row: 300, 0, Python, 300
2023-03-06 15:33:43.480 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605203215519744 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-06 15:33:43.480 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605203215519744 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-06 15:33:43.480 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605203215519744 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-06 15:33:43.480 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605203215519744 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-06 15:33:43.480 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605203215519744 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-06 15:33:43.481 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605203215519744 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-06 15:33:43.481 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605203215519744 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-06 15:33:43.481 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13605203215519744 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-06 15:33:43.481 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13605203215519744 [0;39m <==      Total: 15
2023-03-06 15:33:43.482 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13605203215519744 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-06 15:33:43.482 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13605203215519744 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-03-06 15:34:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13605272530587648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:34:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13605272530587648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:34:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13605272530587648 [0;39m ==> Parameters: 
2023-03-06 15:34:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13605272530587648 [0;39m <==    Updates: 0
2023-03-06 15:34:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13605272530587648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-06 15:34:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13605293548244992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:34:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13605293548244992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:34:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13605293548244992 [0;39m ==> Parameters: 
2023-03-06 15:34:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13605293548244992 [0;39m <==    Updates: 1
2023-03-06 15:34:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13605293548244992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:34:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13605419343810560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:34:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13605419343810560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:34:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13605419343810560 [0;39m ==> Parameters: 
2023-03-06 15:34:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13605419343810560 [0;39m <==    Updates: 1
2023-03-06 15:34:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13605419343810560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:35:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13605524218187776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:35:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13605524218187776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:35:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13605524218187776 [0;39m ==> Parameters: 
2023-03-06 15:35:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13605524218187776 [0;39m <==    Updates: 0
2023-03-06 15:35:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13605524218187776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-06 15:35:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13605545172930560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:35:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13605545172930560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:35:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13605545172930560 [0;39m ==> Parameters: 
2023-03-06 15:35:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13605545172930560 [0;39m <==    Updates: 1
2023-03-06 15:35:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13605545172930560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:35:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13605671031410688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:35:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13605671031410688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:35:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13605671031410688 [0;39m ==> Parameters: 
2023-03-06 15:35:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13605671031410688 [0;39m <==    Updates: 1
2023-03-06 15:35:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13605671031410688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:36:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13605775880622080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:36:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13605775880622080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:36:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13605775880622080 [0;39m ==> Parameters: 
2023-03-06 15:36:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13605775880622080 [0;39m <==    Updates: 0
2023-03-06 15:36:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13605775880622080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-06 15:36:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13605796856336384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:36:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13605796856336384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:36:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13605796856336384 [0;39m ==> Parameters: 
2023-03-06 15:36:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13605796856336384 [0;39m <==    Updates: 1
2023-03-06 15:36:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13605796856336384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:36:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13605922693844992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:36:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13605922693844992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:36:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13605922693844992 [0;39m ==> Parameters: 
2023-03-06 15:36:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13605922693844992 [0;39m <==    Updates: 1
2023-03-06 15:36:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13605922693844992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:37:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13606027538862080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:37:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13606027538862080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:37:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13606027538862080 [0;39m ==> Parameters: 
2023-03-06 15:37:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13606027538862080 [0;39m <==    Updates: 0
2023-03-06 15:37:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13606027538862080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 15:37:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13606048485216256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:37:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13606048485216256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:37:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13606048485216256 [0;39m ==> Parameters: 
2023-03-06 15:37:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13606048485216256 [0;39m <==    Updates: 1
2023-03-06 15:37:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13606048485216256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:37:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13606174322724864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:37:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13606174322724864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:37:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13606174322724864 [0;39m ==> Parameters: 
2023-03-06 15:37:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13606174322724864 [0;39m <==    Updates: 1
2023-03-06 15:37:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13606174322724864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:38:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13606279188713472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:38:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13606279188713472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:38:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13606279188713472 [0;39m ==> Parameters: 
2023-03-06 15:38:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13606279188713472 [0;39m <==    Updates: 0
2023-03-06 15:38:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13606279188713472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 15:38:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13606300139261952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:38:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13606300139261952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:38:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13606300139261952 [0;39m ==> Parameters: 
2023-03-06 15:38:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13606300139261952 [0;39m <==    Updates: 1
2023-03-06 15:38:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13606300139261952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:38:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13606425976770560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:38:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13606425976770560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:38:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13606425976770560 [0;39m ==> Parameters: 
2023-03-06 15:38:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13606425976770560 [0;39m <==    Updates: 1
2023-03-06 15:38:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13606425976770560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:39:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13606530838564864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:39:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13606530838564864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:39:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13606530838564864 [0;39m ==> Parameters: 
2023-03-06 15:39:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13606530838564864 [0;39m <==    Updates: 0
2023-03-06 15:39:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13606530838564864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 15:39:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13606551818473472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:39:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13606551818473472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:39:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13606551818473472 [0;39m ==> Parameters: 
2023-03-06 15:39:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13606551818473472 [0;39m <==    Updates: 1
2023-03-06 15:39:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13606551818473472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:39:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13606677672759296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:39:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13606677672759296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:39:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13606677672759296 [0;39m ==> Parameters: 
2023-03-06 15:39:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13606677672759296 [0;39m <==    Updates: 1
2023-03-06 15:39:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13606677672759296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:40:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13606782526164992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:40:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13606782526164992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:40:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13606782526164992 [0;39m ==> Parameters: 
2023-03-06 15:40:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13606782526164992 [0;39m <==    Updates: 0
2023-03-06 15:40:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13606782526164992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 15:40:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13606803472519168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:40:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13606803472519168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:40:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13606803472519168 [0;39m ==> Parameters: 
2023-03-06 15:40:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13606803472519168 [0;39m <==    Updates: 1
2023-03-06 15:40:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13606803472519168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:40:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13606929305833472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:40:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13606929305833472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:40:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13606929305833472 [0;39m ==> Parameters: 
2023-03-06 15:40:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13606929305833472 [0;39m <==    Updates: 1
2023-03-06 15:40:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13606929305833472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:41:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13607034171822080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:41:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13607034171822080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:41:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13607034171822080 [0;39m ==> Parameters: 
2023-03-06 15:41:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13607034171822080 [0;39m <==    Updates: 0
2023-03-06 15:41:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13607034171822080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-06 15:41:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13607055134953472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:41:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13607055134953472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:41:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13607055134953472 [0;39m ==> Parameters: 
2023-03-06 15:41:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13607055134953472 [0;39m <==    Updates: 1
2023-03-06 15:41:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13607055134953472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:41:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13607180938907648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:41:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13607180938907648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:41:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13607180938907648 [0;39m ==> Parameters: 
2023-03-06 15:41:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13607180938907648 [0;39m <==    Updates: 1
2023-03-06 15:41:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13607180938907648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 15:42:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13607285792313344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:42:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13607285792313344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:42:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13607285792313344 [0;39m ==> Parameters: 
2023-03-06 15:42:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13607285792313344 [0;39m <==    Updates: 0
2023-03-06 15:42:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13607285792313344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 15:42:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13607306797387776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:42:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13607306797387776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:42:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13607306797387776 [0;39m ==> Parameters: 
2023-03-06 15:42:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13607306797387776 [0;39m <==    Updates: 1
2023-03-06 15:42:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13607306797387776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:42:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13607432609730560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:42:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13607432609730560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:42:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13607432609730560 [0;39m ==> Parameters: 
2023-03-06 15:42:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13607432609730560 [0;39m <==    Updates: 1
2023-03-06 15:42:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13607432609730560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:43:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13607537479913472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:43:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13607537479913472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:43:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13607537479913472 [0;39m ==> Parameters: 
2023-03-06 15:43:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13607537479913472 [0;39m <==    Updates: 0
2023-03-06 15:43:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13607537479913472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 15:43:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13607558451433472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:43:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13607558451433472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:43:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13607558451433472 [0;39m ==> Parameters: 
2023-03-06 15:43:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13607558451433472 [0;39m <==    Updates: 1
2023-03-06 15:43:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13607558451433472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:43:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13607684297330688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:43:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13607684297330688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:43:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13607684297330688 [0;39m ==> Parameters: 
2023-03-06 15:43:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13607684297330688 [0;39m <==    Updates: 1
2023-03-06 15:43:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13607684297330688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:44:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13607789167513600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:44:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13607789167513600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:44:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13607789167513600 [0;39m ==> Parameters: 
2023-03-06 15:44:00.026 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13607789167513600 [0;39m <==    Updates: 0
2023-03-06 15:44:00.027 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13607789167513600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-06 15:44:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13607810080313344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:44:05.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13607810080313344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:44:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13607810080313344 [0;39m ==> Parameters: 
2023-03-06 15:44:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13607810080313344 [0;39m <==    Updates: 1
2023-03-06 15:44:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13607810080313344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:44:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13607935951376384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:44:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13607935951376384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:44:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13607935951376384 [0;39m ==> Parameters: 
2023-03-06 15:44:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13607935951376384 [0;39m <==    Updates: 1
2023-03-06 15:44:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13607935951376384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 15:45:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13608040813170688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:45:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13608040813170688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:45:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13608040813170688 [0;39m ==> Parameters: 
2023-03-06 15:45:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13608040813170688 [0;39m <==    Updates: 0
2023-03-06 15:45:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13608040813170688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 15:45:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13608061797273600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:45:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13608061797273600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:45:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13608061797273600 [0;39m ==> Parameters: 
2023-03-06 15:45:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13608061797273600 [0;39m <==    Updates: 1
2023-03-06 15:45:05.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13608061797273600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:45:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13608187626393600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:45:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13608187626393600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:45:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13608187626393600 [0;39m ==> Parameters: 
2023-03-06 15:45:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13608187626393600 [0;39m <==    Updates: 1
2023-03-06 15:45:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13608187626393600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 15:46:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13608292446244864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:46:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13608292446244864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:46:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13608292446244864 [0;39m ==> Parameters: 
2023-03-06 15:46:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13608292446244864 [0;39m <==    Updates: 0
2023-03-06 15:46:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13608292446244864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:46:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13608313455513600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:46:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13608313455513600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:46:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13608313455513600 [0;39m ==> Parameters: 
2023-03-06 15:46:05.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13608313455513600 [0;39m <==    Updates: 1
2023-03-06 15:46:05.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13608313455513600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:46:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13608439251079168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:46:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13608439251079168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:46:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13608439251079168 [0;39m ==> Parameters: 
2023-03-06 15:46:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13608439251079168 [0;39m <==    Updates: 1
2023-03-06 15:46:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13608439251079168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:47:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13608544138039296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:47:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13608544138039296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:47:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13608544138039296 [0;39m ==> Parameters: 
2023-03-06 15:47:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13608544138039296 [0;39m <==    Updates: 0
2023-03-06 15:47:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13608544138039296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 15:47:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13608565084393472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:47:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13608565084393472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:47:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13608565084393472 [0;39m ==> Parameters: 
2023-03-06 15:47:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13608565084393472 [0;39m <==    Updates: 1
2023-03-06 15:47:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13608565084393472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:47:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13608690892541952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:47:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13608690892541952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:47:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13608690892541952 [0;39m ==> Parameters: 
2023-03-06 15:47:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13608690892541952 [0;39m <==    Updates: 1
2023-03-06 15:47:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13608690892541952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:48:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13608795825639424 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:48:00.026 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13608795825639424 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:48:00.027 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13608795825639424 [0;39m ==> Parameters: 
2023-03-06 15:48:00.037 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13608795825639424 [0;39m <==    Updates: 0
2023-03-06 15:48:00.038 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13608795825639424 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š17æ¯«ç§’
2023-03-06 15:48:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13608816730050560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:48:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13608816730050560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:48:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13608816730050560 [0;39m ==> Parameters: 
2023-03-06 15:48:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13608816730050560 [0;39m <==    Updates: 1
2023-03-06 15:48:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13608816730050560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:48:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13608942571753472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:48:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13608942571753472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:48:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13608942571753472 [0;39m ==> Parameters: 
2023-03-06 15:48:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13608942571753472 [0;39m <==    Updates: 1
2023-03-06 15:48:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13608942571753472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:49:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13609047425159168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:49:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13609047425159168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:49:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13609047425159168 [0;39m ==> Parameters: 
2023-03-06 15:49:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13609047425159168 [0;39m <==    Updates: 0
2023-03-06 15:49:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13609047425159168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 15:49:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13609068405067776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:49:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13609068405067776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:49:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13609068405067776 [0;39m ==> Parameters: 
2023-03-06 15:49:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13609068405067776 [0;39m <==    Updates: 1
2023-03-06 15:49:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13609068405067776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:49:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13609194242576384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:49:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13609194242576384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:49:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13609194242576384 [0;39m ==> Parameters: 
2023-03-06 15:49:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13609194242576384 [0;39m <==    Updates: 1
2023-03-06 15:49:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13609194242576384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:50:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13609299079204864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:50:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13609299079204864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:50:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13609299079204864 [0;39m ==> Parameters: 
2023-03-06 15:50:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13609299079204864 [0;39m <==    Updates: 0
2023-03-06 15:50:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13609299079204864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 15:50:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13609320071696384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:50:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13609320071696384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:50:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13609320071696384 [0;39m ==> Parameters: 
2023-03-06 15:50:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13609320071696384 [0;39m <==    Updates: 1
2023-03-06 15:50:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13609320071696384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:50:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13609445909204992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:50:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13609445909204992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:50:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13609445909204992 [0;39m ==> Parameters: 
2023-03-06 15:50:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13609445909204992 [0;39m <==    Updates: 1
2023-03-06 15:50:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13609445909204992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 15:51:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13609550770999296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:51:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13609550770999296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:51:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13609550770999296 [0;39m ==> Parameters: 
2023-03-06 15:51:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13609550770999296 [0;39m <==    Updates: 0
2023-03-06 15:51:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13609550770999296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 15:51:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13609571696381952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:51:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13609571696381952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:51:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13609571696381952 [0;39m ==> Parameters: 
2023-03-06 15:51:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13609571696381952 [0;39m <==    Updates: 1
2023-03-06 15:51:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13609571696381952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:51:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13609697521307648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:51:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13609697521307648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:51:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13609697521307648 [0;39m ==> Parameters: 
2023-03-06 15:51:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13609697521307648 [0;39m <==    Updates: 1
2023-03-06 15:51:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13609697521307648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:52:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13609802433433600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:52:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13609802433433600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:52:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13609802433433600 [0;39m ==> Parameters: 
2023-03-06 15:52:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13609802433433600 [0;39m <==    Updates: 0
2023-03-06 15:52:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13609802433433600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:52:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13609823350427648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:52:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13609823350427648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:52:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13609823350427648 [0;39m ==> Parameters: 
2023-03-06 15:52:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13609823350427648 [0;39m <==    Updates: 1
2023-03-06 15:52:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13609823350427648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:52:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13609949204713472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:52:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13609949204713472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:52:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13609949204713472 [0;39m ==> Parameters: 
2023-03-06 15:52:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13609949204713472 [0;39m <==    Updates: 1
2023-03-06 15:52:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13609949204713472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:53:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13610054041341952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:53:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13610054041341952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:53:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13610054041341952 [0;39m ==> Parameters: 
2023-03-06 15:53:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13610054041341952 [0;39m <==    Updates: 0
2023-03-06 15:53:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13610054041341952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 15:53:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13610075021250560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:53:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13610075021250560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:53:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13610075021250560 [0;39m ==> Parameters: 
2023-03-06 15:53:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13610075021250560 [0;39m <==    Updates: 1
2023-03-06 15:53:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13610075021250560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:53:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13610200871342080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:53:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13610200871342080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:53:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13610200871342080 [0;39m ==> Parameters: 
2023-03-06 15:53:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13610200871342080 [0;39m <==    Updates: 1
2023-03-06 15:53:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13610200871342080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:54:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13610305728942080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:54:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13610305728942080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:54:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13610305728942080 [0;39m ==> Parameters: 
2023-03-06 15:54:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13610305728942080 [0;39m <==    Updates: 0
2023-03-06 15:54:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13610305728942080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 15:54:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13610326675296256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:54:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13610326675296256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:54:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13610326675296256 [0;39m ==> Parameters: 
2023-03-06 15:54:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13610326675296256 [0;39m <==    Updates: 1
2023-03-06 15:54:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13610326675296256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:54:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13610452550553600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:54:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13610452550553600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:54:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13610452550553600 [0;39m ==> Parameters: 
2023-03-06 15:54:35.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13610452550553600 [0;39m <==    Updates: 1
2023-03-06 15:54:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13610452550553600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:55:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13610557382987776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:55:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13610557382987776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:55:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13610557382987776 [0;39m ==> Parameters: 
2023-03-06 15:55:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13610557382987776 [0;39m <==    Updates: 0
2023-03-06 15:55:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13610557382987776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 15:55:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13610578341924864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:55:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13610578341924864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:55:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13610578341924864 [0;39m ==> Parameters: 
2023-03-06 15:55:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13610578341924864 [0;39m <==    Updates: 1
2023-03-06 15:55:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13610578341924864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:55:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13610704204599296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:55:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13610704204599296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:55:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13610704204599296 [0;39m ==> Parameters: 
2023-03-06 15:55:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13610704204599296 [0;39m <==    Updates: 1
2023-03-06 15:55:35.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13610704204599296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:56:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13610809049616384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:56:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13610809049616384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:56:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13610809049616384 [0;39m ==> Parameters: 
2023-03-06 15:56:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13610809049616384 [0;39m <==    Updates: 0
2023-03-06 15:56:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13610809049616384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:56:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13610830037913600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:56:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13610830037913600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:56:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13610830037913600 [0;39m ==> Parameters: 
2023-03-06 15:56:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13610830037913600 [0;39m <==    Updates: 1
2023-03-06 15:56:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13610830037913600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 15:56:35.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13610955871227904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:56:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13610955871227904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:56:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13610955871227904 [0;39m ==> Parameters: 
2023-03-06 15:56:35.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13610955871227904 [0;39m <==    Updates: 1
2023-03-06 15:56:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13610955871227904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:57:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13611060728827904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:57:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13611060728827904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:57:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13611060728827904 [0;39m ==> Parameters: 
2023-03-06 15:57:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13611060728827904 [0;39m <==    Updates: 0
2023-03-06 15:57:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13611060728827904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:57:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13611081666793472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:57:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13611081666793472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:57:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13611081666793472 [0;39m ==> Parameters: 
2023-03-06 15:57:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13611081666793472 [0;39m <==    Updates: 1
2023-03-06 15:57:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13611081666793472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:57:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13611207491719168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:57:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13611207491719168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:57:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13611207491719168 [0;39m ==> Parameters: 
2023-03-06 15:57:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13611207491719168 [0;39m <==    Updates: 1
2023-03-06 15:57:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13611207491719168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:58:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13611312361902080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:58:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13611312361902080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:58:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13611312361902080 [0;39m ==> Parameters: 
2023-03-06 15:58:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13611312361902080 [0;39m <==    Updates: 0
2023-03-06 15:58:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13611312361902080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 15:58:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13611333299867648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:58:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13611333299867648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:58:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13611333299867648 [0;39m ==> Parameters: 
2023-03-06 15:58:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13611333299867648 [0;39m <==    Updates: 1
2023-03-06 15:58:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13611333299867648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 15:58:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13611459145764864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:58:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13611459145764864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:58:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13611459145764864 [0;39m ==> Parameters: 
2023-03-06 15:58:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13611459145764864 [0;39m <==    Updates: 1
2023-03-06 15:58:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13611459145764864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 15:59:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13611563982393344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 15:59:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13611563982393344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 15:59:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13611563982393344 [0;39m ==> Parameters: 
2023-03-06 15:59:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13611563982393344 [0;39m <==    Updates: 0
2023-03-06 15:59:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13611563982393344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-06 15:59:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13611585004244992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:59:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13611585004244992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:59:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13611585004244992 [0;39m ==> Parameters: 
2023-03-06 15:59:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13611585004244992 [0;39m <==    Updates: 1
2023-03-06 15:59:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13611585004244992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 15:59:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13611710791421952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 15:59:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13611710791421952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 15:59:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13611710791421952 [0;39m ==> Parameters: 
2023-03-06 15:59:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13611710791421952 [0;39m <==    Updates: 1
2023-03-06 15:59:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13611710791421952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:00:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13611815657410560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:00:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13611815657410560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:00:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13611815657410560 [0;39m ==> Parameters: 
2023-03-06 16:00:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13611815657410560 [0;39m <==    Updates: 0
2023-03-06 16:00:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13611815657410560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 16:00:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13611836658290688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:00:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13611836658290688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:00:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13611836658290688 [0;39m ==> Parameters: 
2023-03-06 16:00:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13611836658290688 [0;39m <==    Updates: 1
2023-03-06 16:00:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13611836658290688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:00:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13611962479022080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:00:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13611962479022080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:00:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13611962479022080 [0;39m ==> Parameters: 
2023-03-06 16:00:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13611962479022080 [0;39m <==    Updates: 1
2023-03-06 16:00:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13611962479022080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:01:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13612067307261952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:01:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13612067307261952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:01:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13612067307261952 [0;39m ==> Parameters: 
2023-03-06 16:01:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13612067307261952 [0;39m <==    Updates: 0
2023-03-06 16:01:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13612067307261952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 16:01:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13612088303947776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:01:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13612088303947776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:01:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13612088303947776 [0;39m ==> Parameters: 
2023-03-06 16:01:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13612088303947776 [0;39m <==    Updates: 1
2023-03-06 16:01:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13612088303947776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:01:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13612214158233600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:01:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13612214158233600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:01:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13612214158233600 [0;39m ==> Parameters: 
2023-03-06 16:01:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13612214158233600 [0;39m <==    Updates: 1
2023-03-06 16:01:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13612214158233600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:02:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13612318969696256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:02:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13612318969696256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:02:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13612318969696256 [0;39m ==> Parameters: 
2023-03-06 16:02:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13612318969696256 [0;39m <==    Updates: 0
2023-03-06 16:02:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13612318969696256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 16:02:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13612339941216256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:02:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13612339941216256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:02:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13612339941216256 [0;39m ==> Parameters: 
2023-03-06 16:02:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13612339941216256 [0;39m <==    Updates: 1
2023-03-06 16:02:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13612339941216256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 16:02:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13612465778724864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:02:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13612465778724864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:02:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13612465778724864 [0;39m ==> Parameters: 
2023-03-06 16:02:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13612465778724864 [0;39m <==    Updates: 1
2023-03-06 16:02:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13612465778724864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:03:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13612570661490688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:03:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13612570661490688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:03:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13612570661490688 [0;39m ==> Parameters: 
2023-03-06 16:03:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13612570661490688 [0;39m <==    Updates: 0
2023-03-06 16:03:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13612570661490688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 16:03:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13612591620427776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:03:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13612591620427776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:03:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13612591620427776 [0;39m ==> Parameters: 
2023-03-06 16:03:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13612591620427776 [0;39m <==    Updates: 1
2023-03-06 16:03:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13612591620427776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:03:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13612717441159168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:03:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13612717441159168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:03:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13612717441159168 [0;39m ==> Parameters: 
2023-03-06 16:03:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13612717441159168 [0;39m <==    Updates: 1
2023-03-06 16:03:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13612717441159168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:04:00.000 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13612822269399040 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:04:00.001 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13612822269399040 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:04:00.001 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13612822269399040 [0;39m ==> Parameters: 
2023-03-06 16:04:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13612822269399040 [0;39m <==    Updates: 0
2023-03-06 16:04:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13612822269399040 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 16:04:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13612843257696256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:04:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13612843257696256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:04:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13612843257696256 [0;39m ==> Parameters: 
2023-03-06 16:04:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13612843257696256 [0;39m <==    Updates: 1
2023-03-06 16:04:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13612843257696256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:04:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13612969082621952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:04:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13612969082621952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:04:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13612969082621952 [0;39m ==> Parameters: 
2023-03-06 16:04:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13612969082621952 [0;39m <==    Updates: 1
2023-03-06 16:04:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13612969082621952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:05:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13613073961193472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:05:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13613073961193472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:05:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13613073961193472 [0;39m ==> Parameters: 
2023-03-06 16:05:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13613073961193472 [0;39m <==    Updates: 0
2023-03-06 16:05:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13613073961193472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 16:05:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13613094957879296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:05:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13613094957879296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:05:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13613094957879296 [0;39m ==> Parameters: 
2023-03-06 16:05:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13613094957879296 [0;39m <==    Updates: 1
2023-03-06 16:05:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13613094957879296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 16:05:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13613220791193600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:05:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13613220791193600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:05:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13613220791193600 [0;39m ==> Parameters: 
2023-03-06 16:05:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13613220791193600 [0;39m <==    Updates: 1
2023-03-06 16:05:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13613220791193600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 16:06:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13613325602656256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:06:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13613325602656256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:06:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13613325602656256 [0;39m ==> Parameters: 
2023-03-06 16:06:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13613325602656256 [0;39m <==    Updates: 0
2023-03-06 16:06:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13613325602656256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:06:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13613346616119296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:06:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13613346616119296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:06:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13613346616119296 [0;39m ==> Parameters: 
2023-03-06 16:06:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13613346616119296 [0;39m <==    Updates: 1
2023-03-06 16:06:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13613346616119296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 16:06:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13613472394907648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:06:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13613472394907648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:06:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13613472394907648 [0;39m ==> Parameters: 
2023-03-06 16:06:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13613472394907648 [0;39m <==    Updates: 1
2023-03-06 16:06:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13613472394907648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 16:07:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13613577298644992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:07:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13613577298644992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:07:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13613577298644992 [0;39m ==> Parameters: 
2023-03-06 16:07:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13613577298644992 [0;39m <==    Updates: 0
2023-03-06 16:07:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13613577298644992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 16:07:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13613598249193472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:07:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13613598249193472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:07:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13613598249193472 [0;39m ==> Parameters: 
2023-03-06 16:07:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13613598249193472 [0;39m <==    Updates: 1
2023-03-06 16:07:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13613598249193472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 16:07:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13613724086702080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:07:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13613724086702080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:07:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13613724086702080 [0;39m ==> Parameters: 
2023-03-06 16:07:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13613724086702080 [0;39m <==    Updates: 1
2023-03-06 16:07:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13613724086702080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-06 16:08:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13613828948496384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:08:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13613828948496384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:08:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13613828948496384 [0;39m ==> Parameters: 
2023-03-06 16:08:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13613828948496384 [0;39m <==    Updates: 0
2023-03-06 16:08:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13613828948496384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:08:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13613849899044864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:08:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13613849899044864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:08:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13613849899044864 [0;39m ==> Parameters: 
2023-03-06 16:08:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13613849899044864 [0;39m <==    Updates: 1
2023-03-06 16:08:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13613849899044864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 16:08:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13613975753330688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:08:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13613975753330688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:08:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13613975753330688 [0;39m ==> Parameters: 
2023-03-06 16:08:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13613975753330688 [0;39m <==    Updates: 1
2023-03-06 16:08:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13613975753330688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:09:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13614080594153472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:09:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13614080594153472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:09:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13614080594153472 [0;39m ==> Parameters: 
2023-03-06 16:09:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13614080594153472 [0;39m <==    Updates: 0
2023-03-06 16:09:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13614080594153472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:09:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13614101569867776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:09:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13614101569867776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:09:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13614101569867776 [0;39m ==> Parameters: 
2023-03-06 16:09:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13614101569867776 [0;39m <==    Updates: 1
2023-03-06 16:09:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13614101569867776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 16:09:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13614227382210560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:09:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13614227382210560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:09:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13614227382210560 [0;39m ==> Parameters: 
2023-03-06 16:09:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13614227382210560 [0;39m <==    Updates: 1
2023-03-06 16:09:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13614227382210560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:10:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13614332248199168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:10:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13614332248199168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:10:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13614332248199168 [0;39m ==> Parameters: 
2023-03-06 16:10:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13614332248199168 [0;39m <==    Updates: 0
2023-03-06 16:10:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13614332248199168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 16:10:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13614353257467904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:10:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13614353257467904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:10:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13614353257467904 [0;39m ==> Parameters: 
2023-03-06 16:10:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13614353257467904 [0;39m <==    Updates: 1
2023-03-06 16:10:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13614353257467904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 16:10:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13614479074004992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:10:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13614479074004992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:10:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13614479074004992 [0;39m ==> Parameters: 
2023-03-06 16:10:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13614479074004992 [0;39m <==    Updates: 1
2023-03-06 16:10:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13614479074004992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 16:11:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13614583893856256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:11:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13614583893856256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:11:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13614583893856256 [0;39m ==> Parameters: 
2023-03-06 16:11:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13614583893856256 [0;39m <==    Updates: 0
2023-03-06 16:11:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13614583893856256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 16:11:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13614604852793344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:11:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13614604852793344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:11:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13614604852793344 [0;39m ==> Parameters: 
2023-03-06 16:11:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13614604852793344 [0;39m <==    Updates: 1
2023-03-06 16:11:05.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13614604852793344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-06 16:11:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13614730740633600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:11:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13614730740633600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:11:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13614730740633600 [0;39m ==> Parameters: 
2023-03-06 16:11:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13614730740633600 [0;39m <==    Updates: 1
2023-03-06 16:11:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13614730740633600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 16:12:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13614835589844992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:12:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13614835589844992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:12:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13614835589844992 [0;39m ==> Parameters: 
2023-03-06 16:12:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13614835589844992 [0;39m <==    Updates: 0
2023-03-06 16:12:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13614835589844992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 16:12:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13614856573947904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:12:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13614856573947904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:12:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13614856573947904 [0;39m ==> Parameters: 
2023-03-06 16:12:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13614856573947904 [0;39m <==    Updates: 1
2023-03-06 16:12:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13614856573947904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 16:12:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13614982361124864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:12:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13614982361124864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:12:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13614982361124864 [0;39m ==> Parameters: 
2023-03-06 16:12:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13614982361124864 [0;39m <==    Updates: 1
2023-03-06 16:12:35.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13614982361124864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 16:13:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13615087248084992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:13:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13615087248084992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:13:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13615087248084992 [0;39m ==> Parameters: 
2023-03-06 16:13:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13615087248084992 [0;39m <==    Updates: 0
2023-03-06 16:13:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13615087248084992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 16:13:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13615108211216384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:13:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13615108211216384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:13:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13615108211216384 [0;39m ==> Parameters: 
2023-03-06 16:13:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13615108211216384 [0;39m <==    Updates: 1
2023-03-06 16:13:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13615108211216384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-03-06 16:13:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13615234006781952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:13:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13615234006781952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:13:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13615234006781952 [0;39m ==> Parameters: 
2023-03-06 16:13:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13615234006781952 [0;39m <==    Updates: 1
2023-03-06 16:13:35.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13615234006781952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-06 16:14:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13615338864381952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:14:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13615338864381952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:14:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13615338864381952 [0;39m ==> Parameters: 
2023-03-06 16:14:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13615338864381952 [0;39m <==    Updates: 0
2023-03-06 16:14:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13615338864381952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 16:14:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13615359869456384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:14:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13615359869456384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:14:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13615359869456384 [0;39m ==> Parameters: 
2023-03-06 16:14:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13615359869456384 [0;39m <==    Updates: 1
2023-03-06 16:14:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13615359869456384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 16:14:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13615485694382080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:14:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13615485694382080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:14:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13615485694382080 [0;39m ==> Parameters: 
2023-03-06 16:14:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13615485694382080 [0;39m <==    Updates: 1
2023-03-06 16:14:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13615485694382080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 16:15:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13615590551982080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:15:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13615590551982080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:15:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13615590551982080 [0;39m ==> Parameters: 
2023-03-06 16:15:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13615590551982080 [0;39m <==    Updates: 0
2023-03-06 16:15:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13615590551982080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 16:15:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13615611502530560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:15:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13615611502530560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:15:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13615611502530560 [0;39m ==> Parameters: 
2023-03-06 16:15:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13615611502530560 [0;39m <==    Updates: 1
2023-03-06 16:15:05.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13615611502530560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 16:15:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13615737331650560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:15:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13615737331650560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:15:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13615737331650560 [0;39m ==> Parameters: 
2023-03-06 16:15:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13615737331650560 [0;39m <==    Updates: 1
2023-03-06 16:15:35.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13615737331650560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 16:16:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13615842185056256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:16:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13615842185056256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:16:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13615842185056256 [0;39m ==> Parameters: 
2023-03-06 16:16:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13615842185056256 [0;39m <==    Updates: 0
2023-03-06 16:16:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13615842185056256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 16:16:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13615863177547776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:16:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13615863177547776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:16:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13615863177547776 [0;39m ==> Parameters: 
2023-03-06 16:16:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13615863177547776 [0;39m <==    Updates: 1
2023-03-06 16:16:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13615863177547776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 16:16:35.022 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13615989061193728 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:16:35.027 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13615989061193728 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:16:35.027 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13615989061193728 [0;39m ==> Parameters: 
2023-03-06 16:16:35.029 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13615989061193728 [0;39m <==    Updates: 1
2023-03-06 16:16:35.030 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13615989061193728 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:17:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13616093876850688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:17:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13616093876850688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:17:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13616093876850688 [0;39m ==> Parameters: 
2023-03-06 16:17:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13616093876850688 [0;39m <==    Updates: 0
2023-03-06 16:17:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13616093876850688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 16:17:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13616114802233344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:17:05.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13616114802233344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:17:05.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13616114802233344 [0;39m ==> Parameters: 
2023-03-06 16:17:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13616114802233344 [0;39m <==    Updates: 1
2023-03-06 16:17:05.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13616114802233344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 16:17:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13616240681684992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:17:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13616240681684992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:17:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13616240681684992 [0;39m ==> Parameters: 
2023-03-06 16:17:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13616240681684992 [0;39m <==    Updates: 1
2023-03-06 16:17:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13616240681684992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:18:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13616345493147648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:18:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13616345493147648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:18:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13616345493147648 [0;39m ==> Parameters: 
2023-03-06 16:18:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13616345493147648 [0;39m <==    Updates: 0
2023-03-06 16:18:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13616345493147648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 16:18:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13616366523387904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:18:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13616366523387904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:18:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13616366523387904 [0;39m ==> Parameters: 
2023-03-06 16:18:05.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13616366523387904 [0;39m <==    Updates: 1
2023-03-06 16:18:05.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13616366523387904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:18:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13616492306370560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:18:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13616492306370560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:18:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13616492306370560 [0;39m ==> Parameters: 
2023-03-06 16:18:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13616492306370560 [0;39m <==    Updates: 1
2023-03-06 16:18:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13616492306370560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:19:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13616597201719296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:19:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13616597201719296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:19:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13616597201719296 [0;39m ==> Parameters: 
2023-03-06 16:19:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13616597201719296 [0;39m <==    Updates: 0
2023-03-06 16:19:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13616597201719296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 16:19:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13616618118713344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:19:05.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13616618118713344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:19:05.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13616618118713344 [0;39m ==> Parameters: 
2023-03-06 16:19:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13616618118713344 [0;39m <==    Updates: 1
2023-03-06 16:19:05.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13616618118713344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 16:19:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13616743985582080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:19:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13616743985582080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:19:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13616743985582080 [0;39m ==> Parameters: 
2023-03-06 16:19:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13616743985582080 [0;39m <==    Updates: 1
2023-03-06 16:19:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13616743985582080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:20:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13616848838987776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:20:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13616848838987776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:20:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13616848838987776 [0;39m ==> Parameters: 
2023-03-06 16:20:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13616848838987776 [0;39m <==    Updates: 0
2023-03-06 16:20:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13616848838987776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 16:20:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13616869831479296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:20:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13616869831479296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:20:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13616869831479296 [0;39m ==> Parameters: 
2023-03-06 16:20:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13616869831479296 [0;39m <==    Updates: 1
2023-03-06 16:20:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13616869831479296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:20:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13616995627044864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:20:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13616995627044864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:20:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13616995627044864 [0;39m ==> Parameters: 
2023-03-06 16:20:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13616995627044864 [0;39m <==    Updates: 1
2023-03-06 16:20:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13616995627044864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:21:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13617100480450560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:21:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13617100480450560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:21:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13617100480450560 [0;39m ==> Parameters: 
2023-03-06 16:21:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13617100480450560 [0;39m <==    Updates: 0
2023-03-06 16:21:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13617100480450560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-06 16:21:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13617121451970560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:21:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13617121451970560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:21:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13617121451970560 [0;39m ==> Parameters: 
2023-03-06 16:21:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13617121451970560 [0;39m <==    Updates: 1
2023-03-06 16:21:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13617121451970560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:21:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13617247293673472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:21:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13617247293673472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:21:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13617247293673472 [0;39m ==> Parameters: 
2023-03-06 16:21:35.028 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13617247293673472 [0;39m <==    Updates: 1
2023-03-06 16:21:35.028 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13617247293673472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š20æ¯«ç§’
2023-03-06 16:22:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13617352151273472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:22:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13617352151273472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:22:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13617352151273472 [0;39m ==> Parameters: 
2023-03-06 16:22:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13617352151273472 [0;39m <==    Updates: 0
2023-03-06 16:22:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13617352151273472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-06 16:22:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13617373093433344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:22:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13617373093433344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:22:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13617373093433344 [0;39m ==> Parameters: 
2023-03-06 16:22:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13617373093433344 [0;39m <==    Updates: 1
2023-03-06 16:22:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13617373093433344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:22:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13617498951913472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:22:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13617498951913472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:22:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13617498951913472 [0;39m ==> Parameters: 
2023-03-06 16:22:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13617498951913472 [0;39m <==    Updates: 1
2023-03-06 16:22:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13617498951913472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:23:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13617603838873600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:23:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13617603838873600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:23:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13617603838873600 [0;39m ==> Parameters: 
2023-03-06 16:23:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13617603838873600 [0;39m <==    Updates: 0
2023-03-06 16:23:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13617603838873600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 16:23:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13617624797810688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:23:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13617624797810688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:23:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13617624797810688 [0;39m ==> Parameters: 
2023-03-06 16:23:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13617624797810688 [0;39m <==    Updates: 1
2023-03-06 16:23:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13617624797810688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:23:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13617750618542080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:23:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13617750618542080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:23:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13617750618542080 [0;39m ==> Parameters: 
2023-03-06 16:23:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13617750618542080 [0;39m <==    Updates: 1
2023-03-06 16:23:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13617750618542080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 16:23:56.341 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13617840087240704 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:23:56.341 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13617840087240704 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-03-06 16:23:56.341 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13617840087240704 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-03-06 16:23:56.342 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13617840087240704 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:23:56.342 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13617840087240704 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 16:23:56.342 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13617840087240704 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-06 16:23:56.343 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13617840087240704 [0;39m ==> Parameters: 
2023-03-06 16:23:56.344 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13617840087240704 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-03-06 16:23:56.344 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13617840087240704 [0;39m <==        Row: 2023-03-02, 0, 0
2023-03-06 16:23:56.345 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13617840087240704 [0;39m <==        Row: 2023-03-05, 8, 5
2023-03-06 16:23:56.345 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13617840087240704 [0;39m <==      Total: 2
2023-03-06 16:23:56.345 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13617840087240704 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1677945600000,"viewCount":0,"viewIncrease":8,"voteCount":0,"voteIncrease":5}],"success":true}
2023-03-06 16:23:56.345 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13617840087240704 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-03-06 16:23:56.388 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13617840284372992 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:23:56.388 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13617840284372992 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-03-06 16:23:56.388 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13617840284372992 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-03-06 16:23:56.388 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13617840284372992 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:23:56.388 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13617840284372992 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 16:23:56.389 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13617840284372992 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-06 16:23:56.390 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13617840284372992 [0;39m ==> Parameters: 
2023-03-06 16:23:56.391 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13617840284372992 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-03-06 16:23:56.391 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13617840284372992 [0;39m <==        Row: 2023-03-05, 8, 5, 8, 5
2023-03-06 16:23:56.391 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13617840284372992 [0;39m <==        Row: 2023-03-06, 9, 6, 1, 1
2023-03-06 16:23:56.392 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13617840284372992 [0;39m <==      Total: 2
2023-03-06 16:23:56.392 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13617840284372992 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677945600000,"viewCount":8,"viewIncrease":8,"voteCount":5,"voteIncrease":5},{"date":1678032000000,"viewCount":9,"viewIncrease":1,"voteCount":6,"voteIncrease":1}],"success":true}
2023-03-06 16:23:56.392 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13617840284372992 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-03-06 16:23:56.402 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13617840343093248 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:23:56.402 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13617840343093248 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-06 16:23:56.402 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13617840343093248 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-06 16:23:56.403 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13617840343093248 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:23:56.403 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13617840343093248 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 16:23:56.403 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13617840343093248 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-06 16:23:56.404 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13617840343093248 [0;39m ==> Parameters: 
2023-03-06 16:23:56.405 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617840343093248 [0;39m <==    Columns: id, parent, name, sort
2023-03-06 16:23:56.405 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617840343093248 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-06 16:23:56.405 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617840343093248 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-06 16:23:56.406 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617840343093248 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-06 16:23:56.406 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617840343093248 [0;39m <==        Row: 200, 0, Java, 200
2023-03-06 16:23:56.406 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617840343093248 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-06 16:23:56.406 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617840343093248 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-06 16:23:56.406 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617840343093248 [0;39m <==        Row: 300, 0, Python, 300
2023-03-06 16:23:56.407 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617840343093248 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-06 16:23:56.407 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617840343093248 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-06 16:23:56.407 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617840343093248 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-06 16:23:56.407 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617840343093248 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-06 16:23:56.407 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617840343093248 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-06 16:23:56.408 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617840343093248 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-06 16:23:56.408 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617840343093248 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-06 16:23:56.408 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617840343093248 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-06 16:23:56.408 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13617840343093248 [0;39m <==      Total: 15
2023-03-06 16:23:56.409 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13617840343093248 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-06 16:23:56.409 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13617840343093248 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-03-06 16:23:59.076 INFO  com.jiawa.wiki.websocket.WebSocketServer          :41   [32m13605199922991104 [0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šXCaFBEl6okï¼Œsession idï¼š2ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2023-03-06 16:24:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13617855467753472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:24:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13617855467753472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:24:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13617855467753472 [0;39m ==> Parameters: 
2023-03-06 16:24:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13617855467753472 [0;39m <==    Updates: 0
2023-03-06 16:24:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13617855467753472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 16:24:01.625 INFO  com.jiawa.wiki.websocket.WebSocketServer          :32   [32m13605200032043008 [0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šQPmlaaiSs4ï¼Œsession idï¼š3ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2023-03-06 16:24:01.866 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13617863260770304 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:24:01.866 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13617863260770304 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-03-06 16:24:01.866 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13617863260770304 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-03-06 16:24:01.866 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13617863260770305 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:24:01.867 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13617863260770304 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:24:01.867 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13617863260770305 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-03-06 16:24:01.867 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13617863260770305 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-03-06 16:24:01.867 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13617863260770304 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 16:24:01.867 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13617863260770305 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:24:01.867 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13617863260770305 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 16:24:01.867 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13617863260770304 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-06 16:24:01.868 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13617863260770304 [0;39m ==> Parameters: 
2023-03-06 16:24:01.868 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13617863260770305 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-06 16:24:01.869 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13617863260770305 [0;39m ==> Parameters: 
2023-03-06 16:24:01.869 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13617863260770304 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-03-06 16:24:01.869 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13617863260770304 [0;39m <==        Row: 2023-03-05, 8, 5, 8, 5
2023-03-06 16:24:01.870 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13617863260770305 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-03-06 16:24:01.870 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13617863260770304 [0;39m <==        Row: 2023-03-06, 9, 6, 1, 1
2023-03-06 16:24:01.870 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13617863260770305 [0;39m <==        Row: 2023-03-02, 0, 0
2023-03-06 16:24:01.870 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13617863260770304 [0;39m <==      Total: 2
2023-03-06 16:24:01.870 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13617863260770305 [0;39m <==        Row: 2023-03-05, 8, 5
2023-03-06 16:24:01.870 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13617863260770304 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677945600000,"viewCount":8,"viewIncrease":8,"voteCount":5,"voteIncrease":5},{"date":1678032000000,"viewCount":9,"viewIncrease":1,"voteCount":6,"voteIncrease":1}],"success":true}
2023-03-06 16:24:01.870 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13617863260770305 [0;39m <==      Total: 2
2023-03-06 16:24:01.871 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13617863260770304 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-03-06 16:24:01.871 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13617863260770305 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1677945600000,"viewCount":0,"viewIncrease":8,"voteCount":0,"voteIncrease":5}],"success":true}
2023-03-06 16:24:01.871 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13617863260770305 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-03-06 16:24:01.876 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13617863302713344 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:24:01.876 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13617863302713344 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-06 16:24:01.877 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13617863302713344 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-06 16:24:01.877 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13617863302713344 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:24:01.877 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13617863302713344 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 16:24:01.878 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13617863302713344 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-06 16:24:01.878 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13617863302713344 [0;39m ==> Parameters: 
2023-03-06 16:24:01.879 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617863302713344 [0;39m <==    Columns: id, parent, name, sort
2023-03-06 16:24:01.879 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617863302713344 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-06 16:24:01.879 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617863302713344 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-06 16:24:01.880 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617863302713344 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-06 16:24:01.880 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617863302713344 [0;39m <==        Row: 200, 0, Java, 200
2023-03-06 16:24:01.880 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617863302713344 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-06 16:24:01.880 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617863302713344 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-06 16:24:01.880 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617863302713344 [0;39m <==        Row: 300, 0, Python, 300
2023-03-06 16:24:01.881 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617863302713344 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-06 16:24:01.881 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617863302713344 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-06 16:24:01.881 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617863302713344 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-06 16:24:01.881 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617863302713344 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-06 16:24:01.881 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617863302713344 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-06 16:24:01.882 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617863302713344 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-06 16:24:01.882 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617863302713344 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-06 16:24:01.882 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13617863302713344 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-06 16:24:01.882 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13617863302713344 [0;39m <==      Total: 15
2023-03-06 16:24:01.885 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13617863302713344 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-06 16:24:01.885 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13617863302713344 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2023-03-06 16:24:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13617876426690560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:24:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13617876426690560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:24:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13617876426690560 [0;39m ==> Parameters: 
2023-03-06 16:24:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13617876426690560 [0;39m <==    Updates: 1
2023-03-06 16:24:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13617876426690560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 16:24:33.019 INFO  com.jiawa.wiki.websocket.WebSocketServer          :41   [32m13594334721085441 [0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šQPmlaaiSs4ï¼Œsession idï¼š3ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2023-03-06 16:24:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13618002260004864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:24:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13618002260004864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:24:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13618002260004864 [0;39m ==> Parameters: 
2023-03-06 16:24:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13618002260004864 [0;39m <==    Updates: 1
2023-03-06 16:24:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13618002260004864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:24:35.611 INFO  com.jiawa.wiki.websocket.WebSocketServer          :32   [32m13594314777169920 [0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šcw13GYVgUqï¼Œsession idï¼š4ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2023-03-06 16:24:35.792 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13618005556727808 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:24:35.792 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13618005556727808 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-03-06 16:24:35.793 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13618005556727808 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-03-06 16:24:35.793 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13618005556727808 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:24:35.793 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13618005556727808 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 16:24:35.794 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13618005556727808 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-06 16:24:35.794 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13618005556727808 [0;39m ==> Parameters: 
2023-03-06 16:24:35.795 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13618005556727808 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-03-06 16:24:35.795 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13618005556727808 [0;39m <==        Row: 2023-03-05, 8, 5, 8, 5
2023-03-06 16:24:35.795 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13618005569310720 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:24:35.795 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13618005569310721 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:24:35.795 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13618005569310721 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-03-06 16:24:35.795 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13618005569310720 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-06 16:24:35.795 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13618005556727808 [0;39m <==        Row: 2023-03-06, 9, 6, 1, 1
2023-03-06 16:24:35.795 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13618005569310721 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-03-06 16:24:35.795 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13618005569310720 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-06 16:24:35.796 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13618005569310721 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:24:35.796 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13618005569310720 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:24:35.796 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13618005569310721 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 16:24:35.796 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13618005556727808 [0;39m <==      Total: 2
2023-03-06 16:24:35.796 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13618005556727808 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677945600000,"viewCount":8,"viewIncrease":8,"voteCount":5,"voteIncrease":5},{"date":1678032000000,"viewCount":9,"viewIncrease":1,"voteCount":6,"voteIncrease":1}],"success":true}
2023-03-06 16:24:35.796 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13618005569310721 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-06 16:24:35.797 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13618005556727808 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-03-06 16:24:35.796 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13618005569310720 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 16:24:35.797 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13618005569310721 [0;39m ==> Parameters: 
2023-03-06 16:24:35.797 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13618005569310720 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-06 16:24:35.798 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13618005569310721 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-03-06 16:24:35.798 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13618005569310721 [0;39m <==        Row: 2023-03-02, 0, 0
2023-03-06 16:24:35.798 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13618005569310720 [0;39m ==> Parameters: 
2023-03-06 16:24:35.798 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13618005569310721 [0;39m <==        Row: 2023-03-05, 8, 5
2023-03-06 16:24:35.799 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13618005569310721 [0;39m <==      Total: 2
2023-03-06 16:24:35.799 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618005569310720 [0;39m <==    Columns: id, parent, name, sort
2023-03-06 16:24:35.799 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13618005569310721 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1677945600000,"viewCount":0,"viewIncrease":8,"voteCount":0,"voteIncrease":5}],"success":true}
2023-03-06 16:24:35.799 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13618005569310721 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-03-06 16:24:35.799 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618005569310720 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-06 16:24:35.799 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618005569310720 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-06 16:24:35.799 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618005569310720 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-06 16:24:35.800 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618005569310720 [0;39m <==        Row: 200, 0, Java, 200
2023-03-06 16:24:35.800 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618005569310720 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-06 16:24:35.800 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618005569310720 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-06 16:24:35.801 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618005569310720 [0;39m <==        Row: 300, 0, Python, 300
2023-03-06 16:24:35.801 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618005569310720 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-06 16:24:35.801 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618005569310720 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-06 16:24:35.801 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618005569310720 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-06 16:24:35.801 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618005569310720 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-06 16:24:35.802 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618005569310720 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-06 16:24:35.802 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618005569310720 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-06 16:24:35.802 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618005569310720 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-06 16:24:35.802 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618005569310720 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-06 16:24:35.803 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13618005569310720 [0;39m <==      Total: 15
2023-03-06 16:24:35.803 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13618005569310720 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-06 16:24:35.803 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13618005569310720 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-03-06 16:25:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13618107117604864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:25:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13618107117604864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:25:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13618107117604864 [0;39m ==> Parameters: 
2023-03-06 16:25:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13618107117604864 [0;39m <==    Updates: 0
2023-03-06 16:25:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13618107117604864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 16:25:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13618128084930560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:25:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13618128084930560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:25:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13618128084930560 [0;39m ==> Parameters: 
2023-03-06 16:25:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13618128084930560 [0;39m <==    Updates: 1
2023-03-06 16:25:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13618128084930560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-06 16:25:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13618253947604992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:25:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13618253947604992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:25:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13618253947604992 [0;39m ==> Parameters: 
2023-03-06 16:25:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13618253947604992 [0;39m <==    Updates: 1
2023-03-06 16:25:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13618253947604992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:25:40.040 INFO  com.jiawa.wiki.websocket.WebSocketServer          :41   [32m13617863260770305 [0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šcw13GYVgUqï¼Œsession idï¼š4ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2023-03-06 16:25:42.095 INFO  com.jiawa.wiki.websocket.WebSocketServer          :32   [32m13617863302713344 [0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šaoHEvihqY3ï¼Œsession idï¼š5ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2023-03-06 16:25:42.382 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13618284855431168 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:25:42.383 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13618284855431168 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-03-06 16:25:42.383 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13618284855431168 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-03-06 16:25:42.383 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13618284855431168 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:25:42.383 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13618284855431168 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 16:25:42.384 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13618284855431168 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-06 16:25:42.385 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13618284855431168 [0;39m ==> Parameters: 
2023-03-06 16:25:42.386 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13618284855431168 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-03-06 16:25:42.386 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13618284855431168 [0;39m <==        Row: 2023-03-05, 8, 5, 8, 5
2023-03-06 16:25:42.387 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13618284855431168 [0;39m <==        Row: 2023-03-06, 9, 6, 1, 1
2023-03-06 16:25:42.387 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13618284855431168 [0;39m <==      Total: 2
2023-03-06 16:25:42.387 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13618284855431168 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677945600000,"viewCount":8,"viewIncrease":8,"voteCount":5,"voteIncrease":5},{"date":1678032000000,"viewCount":9,"viewIncrease":1,"voteCount":6,"voteIncrease":1}],"success":true}
2023-03-06 16:25:42.388 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13618284855431168 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-03-06 16:25:42.391 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13618284888985600 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:25:42.391 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13618284888985600 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-03-06 16:25:42.391 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13618284888985600 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-03-06 16:25:42.391 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13618284888985600 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:25:42.392 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13618284888985600 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 16:25:42.392 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13618284888985600 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-06 16:25:42.392 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13618284888985600 [0;39m ==> Parameters: 
2023-03-06 16:25:42.392 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13618284897374208 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:25:42.392 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13618284897374208 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-06 16:25:42.393 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13618284897374208 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-06 16:25:42.393 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13618284897374208 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:25:42.393 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13618284897374208 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 16:25:42.393 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13618284888985600 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-03-06 16:25:42.393 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13618284888985600 [0;39m <==        Row: 2023-03-02, 0, 0
2023-03-06 16:25:42.393 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13618284897374208 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-06 16:25:42.394 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13618284897374208 [0;39m ==> Parameters: 
2023-03-06 16:25:42.394 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13618284888985600 [0;39m <==        Row: 2023-03-05, 8, 5
2023-03-06 16:25:42.394 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13618284888985600 [0;39m <==      Total: 2
2023-03-06 16:25:42.394 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618284897374208 [0;39m <==    Columns: id, parent, name, sort
2023-03-06 16:25:42.394 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13618284888985600 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1677945600000,"viewCount":0,"viewIncrease":8,"voteCount":0,"voteIncrease":5}],"success":true}
2023-03-06 16:25:42.394 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618284897374208 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-06 16:25:42.394 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13618284888985600 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-03-06 16:25:42.394 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618284897374208 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-06 16:25:42.395 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618284897374208 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-06 16:25:42.395 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618284897374208 [0;39m <==        Row: 200, 0, Java, 200
2023-03-06 16:25:42.395 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618284897374208 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-06 16:25:42.395 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618284897374208 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-06 16:25:42.395 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618284897374208 [0;39m <==        Row: 300, 0, Python, 300
2023-03-06 16:25:42.395 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618284897374208 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-06 16:25:42.396 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618284897374208 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-06 16:25:42.396 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618284897374208 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-06 16:25:42.396 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618284897374208 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-06 16:25:42.397 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618284897374208 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-06 16:25:42.397 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618284897374208 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-06 16:25:42.397 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618284897374208 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-06 16:25:42.397 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13618284897374208 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-06 16:25:42.398 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13618284897374208 [0;39m <==      Total: 15
2023-03-06 16:25:42.399 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13618284897374208 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-06 16:25:42.399 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13618284897374208 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-03-06 16:26:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13618358784233472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:26:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13618358784233472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:26:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13618358784233472 [0;39m ==> Parameters: 
2023-03-06 16:26:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13618358784233472 [0;39m <==    Updates: 0
2023-03-06 16:26:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13618358784233472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-06 16:26:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13618379734781952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:26:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13618379734781952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:26:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13618379734781952 [0;39m ==> Parameters: 
2023-03-06 16:26:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13618379734781952 [0;39m <==    Updates: 1
2023-03-06 16:26:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13618379734781952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 16:26:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13618505572290560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:26:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13618505572290560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:26:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13618505572290560 [0;39m ==> Parameters: 
2023-03-06 16:26:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13618505572290560 [0;39m <==    Updates: 1
2023-03-06 16:26:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13618505572290560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 16:27:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13618610463444992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:27:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13618610463444992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:27:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13618610463444992 [0;39m ==> Parameters: 
2023-03-06 16:27:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13618610463444992 [0;39m <==    Updates: 0
2023-03-06 16:27:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13618610463444992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-06 16:27:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13618631439159296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:27:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13618631439159296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:27:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13618631439159296 [0;39m ==> Parameters: 
2023-03-06 16:27:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13618631439159296 [0;39m <==    Updates: 1
2023-03-06 16:27:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13618631439159296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 16:27:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13618757226336256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:27:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13618757226336256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:27:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13618757226336256 [0;39m ==> Parameters: 
2023-03-06 16:27:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13618757226336256 [0;39m <==    Updates: 1
2023-03-06 16:27:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13618757226336256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:28:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13618862083936256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:28:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13618862083936256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:28:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13618862083936256 [0;39m ==> Parameters: 
2023-03-06 16:28:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13618862083936256 [0;39m <==    Updates: 0
2023-03-06 16:28:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13618862083936256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-06 16:28:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13618883068039168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:28:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13618883068039168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:28:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13618883068039168 [0;39m ==> Parameters: 
2023-03-06 16:28:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13618883068039168 [0;39m <==    Updates: 1
2023-03-06 16:28:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13618883068039168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:28:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13619008880381952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:28:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13619008880381952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:28:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13619008880381952 [0;39m ==> Parameters: 
2023-03-06 16:28:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13619008880381952 [0;39m <==    Updates: 1
2023-03-06 16:28:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13619008880381952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:29:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13619113742176256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:29:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13619113742176256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:29:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13619113742176256 [0;39m ==> Parameters: 
2023-03-06 16:29:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13619113742176256 [0;39m <==    Updates: 0
2023-03-06 16:29:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13619113742176256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 16:29:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13619134730473472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:29:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13619134730473472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:29:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13619134730473472 [0;39m ==> Parameters: 
2023-03-06 16:29:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13619134730473472 [0;39m <==    Updates: 1
2023-03-06 16:29:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13619134730473472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:29:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13619260563787776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:29:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13619260563787776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:29:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13619260563787776 [0;39m ==> Parameters: 
2023-03-06 16:29:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13619260563787776 [0;39m <==    Updates: 1
2023-03-06 16:29:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13619260563787776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:30:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13619365454942208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:30:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13619365454942208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:30:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13619365454942208 [0;39m ==> Parameters: 
2023-03-06 16:30:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13619365454942208 [0;39m <==    Updates: 0
2023-03-06 16:30:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13619365454942208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-06 16:30:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13619386405490688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:30:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13619386405490688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:30:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13619386405490688 [0;39m ==> Parameters: 
2023-03-06 16:30:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13619386405490688 [0;39m <==    Updates: 1
2023-03-06 16:30:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13619386405490688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 16:30:25.752 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13619473395355648 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:30:25.752 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13619473395355648 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-06 16:30:25.752 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13619473395355648 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-06 16:30:25.753 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13619473395355648 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:30:25.753 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13619473395355648 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":401,"page":1,"size":1000}]
2023-03-06 16:30:25.757 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13619473395355648 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-06 16:30:25.758 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13619473395355648 [0;39m ==> Parameters: 401(Long)
2023-03-06 16:30:25.759 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13619473395355648 [0;39m <==    Columns: count(0)
2023-03-06 16:30:25.759 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13619473395355648 [0;39m <==        Row: 1
2023-03-06 16:30:25.759 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13619473395355648 [0;39m <==      Total: 1
2023-03-06 16:30:25.759 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13619473395355648 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-03-06 16:30:25.760 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13619473395355648 [0;39m ==> Parameters: 401(Long), 1000(Integer)
2023-03-06 16:30:25.760 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13619473395355648 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-06 16:30:25.760 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13619473395355648 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, 400, 401, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 16:30:25.761 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13619473395355648 [0;39m <==      Total: 1
2023-03-06 16:30:25.761 INFO  com.jiawa.wiki.service.EbookService               :48   [32m13619473395355648 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-06 16:30:25.761 INFO  com.jiawa.wiki.service.EbookService               :49   [32m13619473395355648 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-06 16:30:25.762 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13619473395355648 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":400,"category2Id":401,"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":1},"success":true}
2023-03-06 16:30:25.762 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13619473395355648 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š10 ms -------------
2023-03-06 16:30:27.662 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13619481406476288 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:30:27.662 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13619481406476288 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-06 16:30:27.662 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13619481406476288 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-06 16:30:27.662 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13619481406476288 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:30:27.662 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13619481406476288 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":101,"page":1,"size":1000}]
2023-03-06 16:30:27.666 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13619481406476288 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-06 16:30:27.666 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13619481406476288 [0;39m ==> Parameters: 101(Long)
2023-03-06 16:30:27.667 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13619481406476288 [0;39m <==    Columns: count(0)
2023-03-06 16:30:27.667 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13619481406476288 [0;39m <==        Row: 1
2023-03-06 16:30:27.667 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13619481406476288 [0;39m <==      Total: 1
2023-03-06 16:30:27.668 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13619481406476288 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-03-06 16:30:27.668 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13619481406476288 [0;39m ==> Parameters: 101(Long), 1000(Integer)
2023-03-06 16:30:27.668 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13619481406476288 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-06 16:30:27.669 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13619481406476288 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, 100, 101, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 16:30:27.669 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13619481406476288 [0;39m <==      Total: 1
2023-03-06 16:30:27.669 INFO  com.jiawa.wiki.service.EbookService               :48   [32m13619481406476288 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-06 16:30:27.669 INFO  com.jiawa.wiki.service.EbookService               :49   [32m13619481406476288 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-06 16:30:27.670 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13619481406476288 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":100,"category2Id":101,"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":1},"success":true}
2023-03-06 16:30:27.670 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13619481406476288 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-03-06 16:30:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13619512188473344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:30:35.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13619512188473344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:30:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13619512188473344 [0;39m ==> Parameters: 
2023-03-06 16:30:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13619512188473344 [0;39m <==    Updates: 1
2023-03-06 16:30:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13619512188473344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:31:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13619617104793600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:31:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13619617104793600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:31:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13619617104793600 [0;39m ==> Parameters: 
2023-03-06 16:31:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13619617104793600 [0;39m <==    Updates: 0
2023-03-06 16:31:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13619617104793600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 16:31:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13619638059536384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:31:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13619638059536384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:31:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13619638059536384 [0;39m ==> Parameters: 
2023-03-06 16:31:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13619638059536384 [0;39m <==    Updates: 1
2023-03-06 16:31:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13619638059536384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:31:30.342 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13619744305451008 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:31:30.343 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13619744305451008 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-06 16:31:30.343 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13619744305451008 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-06 16:31:30.343 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13619744305451008 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:31:30.343 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13619744305451008 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":101,"page":1,"size":1000}]
2023-03-06 16:31:30.344 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13619744305451008 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-06 16:31:30.345 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13619744305451008 [0;39m ==> Parameters: 101(Long)
2023-03-06 16:31:30.345 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13619744305451008 [0;39m <==    Columns: count(0)
2023-03-06 16:31:30.345 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13619744305451008 [0;39m <==        Row: 1
2023-03-06 16:31:30.346 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13619744305451008 [0;39m <==      Total: 1
2023-03-06 16:31:30.346 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13619744305451008 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-03-06 16:31:30.346 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13619744305451008 [0;39m ==> Parameters: 101(Long), 1000(Integer)
2023-03-06 16:31:30.347 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13619744305451008 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-06 16:31:30.347 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13619744305451008 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, 100, 101, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 16:31:30.348 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13619744305451008 [0;39m <==      Total: 1
2023-03-06 16:31:30.348 INFO  com.jiawa.wiki.service.EbookService               :48   [32m13619744305451008 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-06 16:31:30.348 INFO  com.jiawa.wiki.service.EbookService               :49   [32m13619744305451008 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-06 16:31:30.349 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13619744305451008 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":100,"category2Id":101,"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":1},"success":true}
2023-03-06 16:31:30.349 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13619744305451008 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-03-06 16:31:30.976 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13619746964639744 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:31:30.978 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13619746964639744 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-06 16:31:30.978 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13619746964639744 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-06 16:31:30.978 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13619746964639744 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:31:30.978 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13619746964639744 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":102,"page":1,"size":1000}]
2023-03-06 16:31:30.981 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13619746964639744 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-06 16:31:30.981 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13619746964639744 [0;39m ==> Parameters: 102(Long)
2023-03-06 16:31:30.982 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13619746964639744 [0;39m <==    Columns: count(0)
2023-03-06 16:31:30.982 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13619746964639744 [0;39m <==        Row: 0
2023-03-06 16:31:30.982 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13619746964639744 [0;39m <==      Total: 1
2023-03-06 16:31:30.982 INFO  com.jiawa.wiki.service.EbookService               :48   [32m13619746964639744 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-06 16:31:30.983 INFO  com.jiawa.wiki.service.EbookService               :49   [32m13619746964639744 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-06 16:31:30.983 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13619746964639744 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-06 16:31:30.983 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13619746964639744 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-03-06 16:31:32.835 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m13618005569310721 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-06 16:31:32.835 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m13618005569310721 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š0 ms -------------
2023-03-06 16:31:32.838 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m13605199922991104 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-06 16:31:32.838 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m13605199922991104 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/list
2023-03-06 16:31:32.838 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m13605199922991104 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š13594162070949888
2023-03-06 16:31:32.839 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m13605199922991104 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"13594162070949888"}
2023-03-06 16:31:32.840 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13619754782822400 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:31:32.840 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13619754782822400 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/user/list GET
2023-03-06 16:31:32.841 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13619754782822400 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.UserController.list
2023-03-06 16:31:32.841 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13619754782822400 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:31:32.841 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13619754782822400 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-03-06 16:31:32.842 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m13619754782822400 [0;39m ==>  Preparing: SELECT count(0) FROM user
2023-03-06 16:31:32.842 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m13619754782822400 [0;39m ==> Parameters: 
2023-03-06 16:31:32.843 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m13619754782822400 [0;39m <==    Columns: count(0)
2023-03-06 16:31:32.843 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m13619754782822400 [0;39m <==        Row: 1
2023-03-06 16:31:32.843 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m13619754782822400 [0;39m <==      Total: 1
2023-03-06 16:31:32.843 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m13619754782822400 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2023-03-06 16:31:32.844 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m13619754782822400 [0;39m ==> Parameters: 10(Integer)
2023-03-06 16:31:32.844 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m13619754782822400 [0;39m <==    Columns: id, login_name, name, password
2023-03-06 16:31:32.844 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m13619754782822400 [0;39m <==        Row: 1, test, æµ‹è¯•, e70e2222a9d67c4f2eae107533359aa4
2023-03-06 16:31:32.844 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m13619754782822400 [0;39m <==      Total: 1
2023-03-06 16:31:32.845 INFO  com.jiawa.wiki.service.UserService                :49   [32m13619754782822400 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-06 16:31:32.845 INFO  com.jiawa.wiki.service.UserService                :50   [32m13619754782822400 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-06 16:31:32.845 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13619754782822400 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"id":1,"loginName":"test","name":"æµ‹è¯•"}],"total":1},"success":true}
2023-03-06 16:31:32.845 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13619754782822400 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-03-06 16:31:32.846 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m13619754782822400 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-03-06 16:31:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13619763892850688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:31:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13619763892850688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:31:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13619763892850688 [0;39m ==> Parameters: 
2023-03-06 16:31:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13619763892850688 [0;39m <==    Updates: 1
2023-03-06 16:31:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13619763892850688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:32:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13619868758839296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:32:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13619868758839296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:32:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13619868758839296 [0;39m ==> Parameters: 
2023-03-06 16:32:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13619868758839296 [0;39m <==    Updates: 0
2023-03-06 16:32:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13619868758839296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-06 16:32:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13619889692610560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:32:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13619889692610560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:32:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13619889692610560 [0;39m ==> Parameters: 
2023-03-06 16:32:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13619889692610560 [0;39m <==    Updates: 1
2023-03-06 16:32:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13619889692610560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:32:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13620015517536256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:32:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13620015517536256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:32:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13620015517536256 [0;39m ==> Parameters: 
2023-03-06 16:32:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13620015517536256 [0;39m <==    Updates: 1
2023-03-06 16:32:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13620015517536256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:33:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13620120383524864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:33:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13620120383524864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:33:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13620120383524864 [0;39m ==> Parameters: 
2023-03-06 16:33:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13620120383524864 [0;39m <==    Updates: 0
2023-03-06 16:33:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13620120383524864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-06 16:33:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13620141342461952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:33:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13620141342461952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:33:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13620141342461952 [0;39m ==> Parameters: 
2023-03-06 16:33:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13620141342461952 [0;39m <==    Updates: 1
2023-03-06 16:33:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13620141342461952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:33:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13620267196747776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:33:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13620267196747776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:33:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13620267196747776 [0;39m ==> Parameters: 
2023-03-06 16:33:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13620267196747776 [0;39m <==    Updates: 1
2023-03-06 16:33:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13620267196747776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:34:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13620372075319296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:34:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13620372075319296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:34:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13620372075319296 [0;39m ==> Parameters: 
2023-03-06 16:34:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13620372075319296 [0;39m <==    Updates: 0
2023-03-06 16:34:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13620372075319296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-06 16:34:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13620393021673472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:34:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13620393021673472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:34:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13620393021673472 [0;39m ==> Parameters: 
2023-03-06 16:34:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13620393021673472 [0;39m <==    Updates: 1
2023-03-06 16:34:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13620393021673472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:34:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13620518871764992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:34:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13620518871764992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:34:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13620518871764992 [0;39m ==> Parameters: 
2023-03-06 16:34:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13620518871764992 [0;39m <==    Updates: 1
2023-03-06 16:34:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13620518871764992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:35:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13620623695810560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:35:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13620623695810560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:35:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13620623695810560 [0;39m ==> Parameters: 
2023-03-06 16:35:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13620623695810560 [0;39m <==    Updates: 0
2023-03-06 16:35:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13620623695810560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 16:35:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13620644700884992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:35:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13620644700884992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:35:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13620644700884992 [0;39m ==> Parameters: 
2023-03-06 16:35:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13620644700884992 [0;39m <==    Updates: 1
2023-03-06 16:35:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13620644700884992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:35:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13620770500644864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:35:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13620770500644864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:35:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13620770500644864 [0;39m ==> Parameters: 
2023-03-06 16:35:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13620770500644864 [0;39m <==    Updates: 1
2023-03-06 16:35:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13620770500644864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:36:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13620875358244864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:36:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13620875358244864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:36:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13620875358244864 [0;39m ==> Parameters: 
2023-03-06 16:36:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13620875358244864 [0;39m <==    Updates: 0
2023-03-06 16:36:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13620875358244864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-06 16:36:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13620896325570560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:36:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13620896325570560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:36:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13620896325570560 [0;39m ==> Parameters: 
2023-03-06 16:36:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13620896325570560 [0;39m <==    Updates: 1
2023-03-06 16:36:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13620896325570560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:36:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13621022184050688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:36:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13621022184050688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:36:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13621022184050688 [0;39m ==> Parameters: 
2023-03-06 16:36:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13621022184050688 [0;39m <==    Updates: 1
2023-03-06 16:36:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13621022184050688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:37:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13621126995513344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:37:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13621126995513344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:37:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13621126995513344 [0;39m ==> Parameters: 
2023-03-06 16:37:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13621126995513344 [0;39m <==    Updates: 0
2023-03-06 16:37:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13621126995513344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 16:37:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13621147979616256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:37:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13621147979616256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:37:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13621147979616256 [0;39m ==> Parameters: 
2023-03-06 16:37:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13621147979616256 [0;39m <==    Updates: 1
2023-03-06 16:37:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13621147979616256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:37:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13621273808736256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:37:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13621273808736256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:37:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13621273808736256 [0;39m ==> Parameters: 
2023-03-06 16:37:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13621273808736256 [0;39m <==    Updates: 1
2023-03-06 16:37:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13621273808736256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:38:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13621378691502080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:38:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13621378691502080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:38:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13621378691502080 [0;39m ==> Parameters: 
2023-03-06 16:38:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13621378691502080 [0;39m <==    Updates: 0
2023-03-06 16:38:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13621378691502080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-06 16:38:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13621399671410688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:38:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13621399671410688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:38:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13621399671410688 [0;39m ==> Parameters: 
2023-03-06 16:38:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13621399671410688 [0;39m <==    Updates: 1
2023-03-06 16:38:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13621399671410688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:38:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13621525504724992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:38:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13621525504724992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:38:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13621525504724992 [0;39m ==> Parameters: 
2023-03-06 16:38:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13621525504724992 [0;39m <==    Updates: 1
2023-03-06 16:38:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13621525504724992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:39:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13621630328770560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:39:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13621630328770560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:39:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13621630328770560 [0;39m ==> Parameters: 
2023-03-06 16:39:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13621630328770560 [0;39m <==    Updates: 0
2023-03-06 16:39:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13621630328770560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:39:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13621651333844992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:39:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13621651333844992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:39:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13621651333844992 [0;39m ==> Parameters: 
2023-03-06 16:39:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13621651333844992 [0;39m <==    Updates: 1
2023-03-06 16:39:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13621651333844992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:39:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13621777121021952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:39:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13621777121021952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:39:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13621777121021952 [0;39m ==> Parameters: 
2023-03-06 16:39:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13621777121021952 [0;39m <==    Updates: 1
2023-03-06 16:39:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13621777121021952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:40:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13621882016370688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:40:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13621882016370688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:40:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13621882016370688 [0;39m ==> Parameters: 
2023-03-06 16:40:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13621882016370688 [0;39m <==    Updates: 0
2023-03-06 16:40:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13621882016370688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-06 16:40:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13621902971113472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:40:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13621902971113472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:40:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13621902971113472 [0;39m ==> Parameters: 
2023-03-06 16:40:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13621902971113472 [0;39m <==    Updates: 1
2023-03-06 16:40:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13621902971113472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:40:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13622028804427776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:40:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13622028804427776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:40:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13622028804427776 [0;39m ==> Parameters: 
2023-03-06 16:40:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13622028804427776 [0;39m <==    Updates: 1
2023-03-06 16:40:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13622028804427776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:41:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13622133674610688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:41:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13622133674610688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:41:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13622133674610688 [0;39m ==> Parameters: 
2023-03-06 16:41:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13622133674610688 [0;39m <==    Updates: 0
2023-03-06 16:41:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13622133674610688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 16:41:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13622154646130688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:41:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13622154646130688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:41:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13622154646130688 [0;39m ==> Parameters: 
2023-03-06 16:41:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13622154646130688 [0;39m <==    Updates: 1
2023-03-06 16:41:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13622154646130688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:41:21.646 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13622224414183424 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:41:21.648 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13622224422572032 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:41:21.648 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13622224414183424 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-03-06 16:41:21.648 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13622224422572032 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-06 16:41:21.648 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13622224414183424 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-03-06 16:41:21.648 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13622224422572032 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-06 16:41:21.648 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13622224414183424 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:41:21.648 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13622224414183424 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 16:41:21.648 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13622224422572032 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:41:21.649 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13622224422572032 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 16:41:21.649 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13622224414183424 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-06 16:41:21.649 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13622224414183424 [0;39m ==> Parameters: 
2023-03-06 16:41:21.649 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13622224422572032 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-06 16:41:21.650 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13622224422572032 [0;39m ==> Parameters: 
2023-03-06 16:41:21.650 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13622224414183424 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-03-06 16:41:21.650 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622224422572032 [0;39m <==    Columns: id, parent, name, sort
2023-03-06 16:41:21.651 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13622224414183424 [0;39m <==        Row: 2023-03-05, 8, 5, 8, 5
2023-03-06 16:41:21.651 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622224422572032 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-06 16:41:21.651 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622224422572032 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-06 16:41:21.651 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13622224414183424 [0;39m <==        Row: 2023-03-06, 9, 6, 1, 1
2023-03-06 16:41:21.651 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622224422572032 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-06 16:41:21.651 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13622224414183424 [0;39m <==      Total: 2
2023-03-06 16:41:21.651 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622224422572032 [0;39m <==        Row: 200, 0, Java, 200
2023-03-06 16:41:21.651 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13622224414183424 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677945600000,"viewCount":8,"viewIncrease":8,"voteCount":5,"voteIncrease":5},{"date":1678032000000,"viewCount":9,"viewIncrease":1,"voteCount":6,"voteIncrease":1}],"success":true}
2023-03-06 16:41:21.651 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622224422572032 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-06 16:41:21.652 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13622224414183424 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-03-06 16:41:21.652 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622224422572032 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-06 16:41:21.652 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622224422572032 [0;39m <==        Row: 300, 0, Python, 300
2023-03-06 16:41:21.652 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622224422572032 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-06 16:41:21.652 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622224422572032 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-06 16:41:21.653 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622224422572032 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-06 16:41:21.653 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622224422572032 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-06 16:41:21.653 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622224422572032 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-06 16:41:21.653 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622224422572032 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-06 16:41:21.653 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622224422572032 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-06 16:41:21.654 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622224422572032 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-06 16:41:21.654 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13622224447737856 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:41:21.654 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13622224422572032 [0;39m <==      Total: 15
2023-03-06 16:41:21.654 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13622224447737856 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-03-06 16:41:21.654 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13622224447737856 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-03-06 16:41:21.654 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13622224447737856 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:41:21.654 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13622224422572032 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-06 16:41:21.654 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13622224447737856 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 16:41:21.655 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13622224422572032 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-03-06 16:41:21.655 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13622224447737856 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-06 16:41:21.656 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13622224447737856 [0;39m ==> Parameters: 
2023-03-06 16:41:21.657 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13622224447737856 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-03-06 16:41:21.657 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13622224447737856 [0;39m <==        Row: 2023-03-02, 0, 0
2023-03-06 16:41:21.657 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13622224447737856 [0;39m <==        Row: 2023-03-05, 8, 5
2023-03-06 16:41:21.657 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13622224447737856 [0;39m <==      Total: 2
2023-03-06 16:41:21.658 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13622224447737856 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1677945600000,"viewCount":0,"viewIncrease":8,"voteCount":0,"voteIncrease":5}],"success":true}
2023-03-06 16:41:21.658 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13622224447737856 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-03-06 16:41:22.497 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13622227983536128 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:41:22.498 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13622227983536128 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-06 16:41:22.498 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13622227983536128 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-06 16:41:22.498 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13622227983536128 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:41:22.498 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13622227983536128 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":102,"page":1,"size":1000}]
2023-03-06 16:41:22.500 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13622227983536128 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-06 16:41:22.500 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13622227983536128 [0;39m ==> Parameters: 102(Long)
2023-03-06 16:41:22.501 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13622227983536128 [0;39m <==    Columns: count(0)
2023-03-06 16:41:22.501 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13622227983536128 [0;39m <==        Row: 0
2023-03-06 16:41:22.501 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13622227983536128 [0;39m <==      Total: 1
2023-03-06 16:41:22.501 INFO  com.jiawa.wiki.service.EbookService               :48   [32m13622227983536128 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-06 16:41:22.501 INFO  com.jiawa.wiki.service.EbookService               :49   [32m13622227983536128 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-06 16:41:22.502 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13622227983536128 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-06 16:41:22.502 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13622227983536128 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-03-06 16:41:22.852 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13622229472514048 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:41:22.852 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13622229472514048 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-06 16:41:22.852 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13622229472514048 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-06 16:41:22.853 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13622229472514048 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:41:22.853 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13622229472514048 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":101,"page":1,"size":1000}]
2023-03-06 16:41:22.856 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13622229472514048 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-06 16:41:22.856 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13622229472514048 [0;39m ==> Parameters: 101(Long)
2023-03-06 16:41:22.857 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13622229472514048 [0;39m <==    Columns: count(0)
2023-03-06 16:41:22.857 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13622229472514048 [0;39m <==        Row: 1
2023-03-06 16:41:22.857 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13622229472514048 [0;39m <==      Total: 1
2023-03-06 16:41:22.857 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13622229472514048 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-03-06 16:41:22.858 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13622229472514048 [0;39m ==> Parameters: 101(Long), 1000(Integer)
2023-03-06 16:41:22.858 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13622229472514048 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-06 16:41:22.858 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13622229472514048 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, 100, 101, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 16:41:22.858 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13622229472514048 [0;39m <==      Total: 1
2023-03-06 16:41:22.858 INFO  com.jiawa.wiki.service.EbookService               :48   [32m13622229472514048 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-06 16:41:22.858 INFO  com.jiawa.wiki.service.EbookService               :49   [32m13622229472514048 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-06 16:41:22.859 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13622229472514048 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":100,"category2Id":101,"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":1},"success":true}
2023-03-06 16:41:22.859 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13622229472514048 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-03-06 16:41:25.110 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13622238943252480 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:41:25.111 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13622238943252480 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/2 GET
2023-03-06 16:41:25.111 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13622238943252480 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-03-06 16:41:25.111 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13622238943252480 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:41:25.111 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13622238943252480 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-03-06 16:41:25.112 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m13622238943252480 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-03-06 16:41:25.113 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m13622238943252480 [0;39m ==> Parameters: 2(Long)
2023-03-06 16:41:25.113 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m13622238943252480 [0;39m <==      Total: 0
2023-03-06 16:41:25.114 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13622238943252480 [0;39m è¿”å›žç»“æžœ: {"content":[],"success":true}
2023-03-06 16:41:25.114 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13622238943252480 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-03-06 16:41:25.937 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13622242411941888 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:41:25.937 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13622242411941889 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:41:25.938 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13622242416136192 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:41:25.938 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13622242411941889 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-03-06 16:41:25.938 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13622242411941888 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-06 16:41:25.938 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13622242416136192 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-03-06 16:41:25.938 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13622242411941889 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-03-06 16:41:25.938 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13622242411941888 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-06 16:41:25.938 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13622242416136192 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-03-06 16:41:25.938 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13622242411941889 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:41:25.938 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13622242411941888 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:41:25.938 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13622242416136192 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:41:25.938 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13622242411941888 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 16:41:25.938 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13622242416136192 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 16:41:25.938 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13622242411941889 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 16:41:25.939 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13622242416136192 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-06 16:41:25.939 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13622242411941889 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-06 16:41:25.940 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13622242411941889 [0;39m ==> Parameters: 
2023-03-06 16:41:25.940 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13622242416136192 [0;39m ==> Parameters: 
2023-03-06 16:41:25.940 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13622242411941888 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-06 16:41:25.941 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13622242411941889 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-03-06 16:41:25.941 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13622242411941888 [0;39m ==> Parameters: 
2023-03-06 16:41:25.941 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13622242411941889 [0;39m <==        Row: 2023-03-05, 8, 5, 8, 5
2023-03-06 16:41:25.941 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13622242416136192 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-03-06 16:41:25.941 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622242411941888 [0;39m <==    Columns: id, parent, name, sort
2023-03-06 16:41:25.941 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13622242416136192 [0;39m <==        Row: 2023-03-02, 0, 0
2023-03-06 16:41:25.941 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622242411941888 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-06 16:41:25.941 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13622242411941889 [0;39m <==        Row: 2023-03-06, 9, 6, 1, 1
2023-03-06 16:41:25.941 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622242411941888 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-06 16:41:25.941 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13622242411941889 [0;39m <==      Total: 2
2023-03-06 16:41:25.941 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13622242416136192 [0;39m <==        Row: 2023-03-05, 8, 5
2023-03-06 16:41:25.942 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622242411941888 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-06 16:41:25.942 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13622242411941889 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677945600000,"viewCount":8,"viewIncrease":8,"voteCount":5,"voteIncrease":5},{"date":1678032000000,"viewCount":9,"viewIncrease":1,"voteCount":6,"voteIncrease":1}],"success":true}
2023-03-06 16:41:25.942 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13622242416136192 [0;39m <==      Total: 2
2023-03-06 16:41:25.942 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13622242411941889 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-03-06 16:41:25.942 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622242411941888 [0;39m <==        Row: 200, 0, Java, 200
2023-03-06 16:41:25.942 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13622242416136192 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1677945600000,"viewCount":0,"viewIncrease":8,"voteCount":0,"voteIncrease":5}],"success":true}
2023-03-06 16:41:25.942 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622242411941888 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-06 16:41:25.942 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13622242416136192 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-03-06 16:41:25.942 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622242411941888 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-06 16:41:25.942 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622242411941888 [0;39m <==        Row: 300, 0, Python, 300
2023-03-06 16:41:25.943 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622242411941888 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-06 16:41:25.943 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622242411941888 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-06 16:41:25.943 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622242411941888 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-06 16:41:25.943 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622242411941888 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-06 16:41:25.943 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622242411941888 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-06 16:41:25.944 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622242411941888 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-06 16:41:25.944 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622242411941888 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-06 16:41:25.944 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622242411941888 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-06 16:41:25.944 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13622242411941888 [0;39m <==      Total: 15
2023-03-06 16:41:25.945 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13622242411941888 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-06 16:41:25.945 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13622242411941888 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-03-06 16:41:26.319 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m13622224414183424 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-06 16:41:26.319 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m13622224414183424 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/list
2023-03-06 16:41:26.319 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m13622224414183424 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š13594162070949888
2023-03-06 16:41:26.320 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m13622224414183424 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"13594162070949888"}
2023-03-06 16:41:26.320 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13622244018360320 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:41:26.321 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13622244018360320 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/user/list GET
2023-03-06 16:41:26.321 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13622244018360320 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.UserController.list
2023-03-06 16:41:26.321 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13622244018360320 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:41:26.321 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13622244018360320 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-03-06 16:41:26.322 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m13622244018360320 [0;39m ==>  Preparing: SELECT count(0) FROM user
2023-03-06 16:41:26.322 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m13622244018360320 [0;39m ==> Parameters: 
2023-03-06 16:41:26.323 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m13622244018360320 [0;39m <==    Columns: count(0)
2023-03-06 16:41:26.323 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m13622244018360320 [0;39m <==        Row: 1
2023-03-06 16:41:26.323 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m13622244018360320 [0;39m <==      Total: 1
2023-03-06 16:41:26.323 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m13622244018360320 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2023-03-06 16:41:26.324 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m13622244018360320 [0;39m ==> Parameters: 10(Integer)
2023-03-06 16:41:26.324 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m13622244018360320 [0;39m <==    Columns: id, login_name, name, password
2023-03-06 16:41:26.324 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m13622244018360320 [0;39m <==        Row: 1, test, æµ‹è¯•, e70e2222a9d67c4f2eae107533359aa4
2023-03-06 16:41:26.325 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m13622244018360320 [0;39m <==      Total: 1
2023-03-06 16:41:26.325 INFO  com.jiawa.wiki.service.UserService                :49   [32m13622244018360320 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-06 16:41:26.325 INFO  com.jiawa.wiki.service.UserService                :50   [32m13622244018360320 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-06 16:41:26.325 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13622244018360320 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"id":1,"loginName":"test","name":"æµ‹è¯•"}],"total":1},"success":true}
2023-03-06 16:41:26.325 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13622244018360320 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-03-06 16:41:26.326 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m13622244018360320 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-03-06 16:41:26.753 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13622245834493952 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:41:26.753 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13622245834493953 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:41:26.753 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13622245834493952 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-03-06 16:41:26.754 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13622245834493953 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-03-06 16:41:26.754 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13622245834493952 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-03-06 16:41:26.754 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13622245834493953 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-03-06 16:41:26.754 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13622245834493952 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:41:26.754 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13622245834493953 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:41:26.754 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13622245838688256 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:41:26.754 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13622245834493953 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 16:41:26.754 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13622245838688256 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-06 16:41:26.754 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13622245834493952 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 16:41:26.754 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13622245838688256 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-06 16:41:26.754 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13622245838688256 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:41:26.754 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13622245834493953 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-06 16:41:26.754 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13622245834493952 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-06 16:41:26.755 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13622245838688256 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 16:41:26.755 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13622245834493952 [0;39m ==> Parameters: 
2023-03-06 16:41:26.755 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13622245834493953 [0;39m ==> Parameters: 
2023-03-06 16:41:26.755 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13622245838688256 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-06 16:41:26.756 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13622245838688256 [0;39m ==> Parameters: 
2023-03-06 16:41:26.756 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13622245834493953 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-03-06 16:41:26.756 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13622245834493952 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-03-06 16:41:26.756 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13622245834493953 [0;39m <==        Row: 2023-03-05, 8, 5, 8, 5
2023-03-06 16:41:26.756 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13622245834493952 [0;39m <==        Row: 2023-03-02, 0, 0
2023-03-06 16:41:26.756 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622245838688256 [0;39m <==    Columns: id, parent, name, sort
2023-03-06 16:41:26.756 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622245838688256 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-06 16:41:26.756 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13622245834493953 [0;39m <==        Row: 2023-03-06, 9, 6, 1, 1
2023-03-06 16:41:26.756 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13622245834493952 [0;39m <==        Row: 2023-03-05, 8, 5
2023-03-06 16:41:26.756 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622245838688256 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-06 16:41:26.756 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13622245834493953 [0;39m <==      Total: 2
2023-03-06 16:41:26.756 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13622245834493952 [0;39m <==      Total: 2
2023-03-06 16:41:26.757 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13622245834493953 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677945600000,"viewCount":8,"viewIncrease":8,"voteCount":5,"voteIncrease":5},{"date":1678032000000,"viewCount":9,"viewIncrease":1,"voteCount":6,"voteIncrease":1}],"success":true}
2023-03-06 16:41:26.757 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13622245834493953 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-03-06 16:41:26.757 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13622245834493952 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1677945600000,"viewCount":0,"viewIncrease":8,"voteCount":0,"voteIncrease":5}],"success":true}
2023-03-06 16:41:26.757 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622245838688256 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-06 16:41:26.757 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13622245834493952 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-03-06 16:41:26.757 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622245838688256 [0;39m <==        Row: 200, 0, Java, 200
2023-03-06 16:41:26.757 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622245838688256 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-06 16:41:26.758 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622245838688256 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-06 16:41:26.758 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622245838688256 [0;39m <==        Row: 300, 0, Python, 300
2023-03-06 16:41:26.758 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622245838688256 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-06 16:41:26.758 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622245838688256 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-06 16:41:26.758 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622245838688256 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-06 16:41:26.759 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622245838688256 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-06 16:41:26.759 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622245838688256 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-06 16:41:26.759 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622245838688256 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-06 16:41:26.759 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622245838688256 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-06 16:41:26.760 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622245838688256 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-06 16:41:26.760 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13622245838688256 [0;39m <==      Total: 15
2023-03-06 16:41:26.760 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13622245838688256 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-06 16:41:26.760 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13622245838688256 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-03-06 16:41:27.454 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13622248774701056 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:41:27.454 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13622248774701056 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-06 16:41:27.455 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13622248774701056 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-06 16:41:27.455 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13622248774701056 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:41:27.455 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13622248774701056 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":202,"page":1,"size":1000}]
2023-03-06 16:41:27.456 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13622248774701056 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-06 16:41:27.457 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13622248774701056 [0;39m ==> Parameters: 202(Long)
2023-03-06 16:41:27.457 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13622248774701056 [0;39m <==    Columns: count(0)
2023-03-06 16:41:27.457 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13622248774701056 [0;39m <==        Row: 1
2023-03-06 16:41:27.457 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13622248774701056 [0;39m <==      Total: 1
2023-03-06 16:41:27.457 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13622248774701056 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-03-06 16:41:27.457 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13622248774701056 [0;39m ==> Parameters: 202(Long), 1000(Integer)
2023-03-06 16:41:27.459 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13622248774701056 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-06 16:41:27.459 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13622248774701056 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 9, 6
2023-03-06 16:41:27.459 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13622248774701056 [0;39m <==      Total: 1
2023-03-06 16:41:27.459 INFO  com.jiawa.wiki.service.EbookService               :48   [32m13622248774701056 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-06 16:41:27.459 INFO  com.jiawa.wiki.service.EbookService               :49   [32m13622248774701056 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-06 16:41:27.459 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13622248774701056 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":9,"voteCount":6}],"total":1},"success":true}
2023-03-06 16:41:27.459 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13622248774701056 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-03-06 16:41:27.834 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13622250368536576 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:41:27.834 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13622250368536576 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-06 16:41:27.834 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13622250368536576 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-06 16:41:27.834 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13622250368536576 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:41:27.835 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13622250368536576 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":301,"page":1,"size":1000}]
2023-03-06 16:41:27.836 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13622250368536576 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-06 16:41:27.837 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13622250368536576 [0;39m ==> Parameters: 301(Long)
2023-03-06 16:41:27.838 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13622250368536576 [0;39m <==    Columns: count(0)
2023-03-06 16:41:27.838 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13622250368536576 [0;39m <==        Row: 1
2023-03-06 16:41:27.838 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13622250368536576 [0;39m <==      Total: 1
2023-03-06 16:41:27.838 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13622250368536576 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-03-06 16:41:27.838 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13622250368536576 [0;39m ==> Parameters: 301(Long), 1000(Integer)
2023-03-06 16:41:27.839 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13622250368536576 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-06 16:41:27.839 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13622250368536576 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, 300, 301, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-06 16:41:27.839 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13622250368536576 [0;39m <==      Total: 1
2023-03-06 16:41:27.839 INFO  com.jiawa.wiki.service.EbookService               :48   [32m13622250368536576 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-06 16:41:27.840 INFO  com.jiawa.wiki.service.EbookService               :49   [32m13622250368536576 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-06 16:41:27.840 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13622250368536576 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":300,"category2Id":301,"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":1},"success":true}
2023-03-06 16:41:27.840 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13622250368536576 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-03-06 16:41:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13622280454279168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:41:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13622280454279168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:41:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13622280454279168 [0;39m ==> Parameters: 
2023-03-06 16:41:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13622280454279168 [0;39m <==    Updates: 1
2023-03-06 16:41:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13622280454279168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:42:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13622385341239296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:42:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13622385341239296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:42:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13622385341239296 [0;39m ==> Parameters: 
2023-03-06 16:42:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13622385341239296 [0;39m <==    Updates: 0
2023-03-06 16:42:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13622385341239296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 16:42:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13622406266621952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:42:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13622406266621952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:42:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13622406266621952 [0;39m ==> Parameters: 
2023-03-06 16:42:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13622406266621952 [0;39m <==    Updates: 1
2023-03-06 16:42:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13622406266621952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:42:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13622532125102080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:42:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13622532125102080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:42:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13622532125102080 [0;39m ==> Parameters: 
2023-03-06 16:42:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13622532125102080 [0;39m <==    Updates: 1
2023-03-06 16:42:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13622532125102080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 16:42:49.221 INFO  com.jiawa.wiki.websocket.WebSocketServer          :41   [32m13622245834493952 [0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šaoHEvihqY3ï¼Œsession idï¼š5ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2023-03-06 16:42:50.711 INFO  com.jiawa.wiki.websocket.WebSocketServer          :32   [32m13622245834493953 [0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šh2IKNQjFTjï¼Œsession idï¼š6ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2023-03-06 16:42:50.849 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13622598558683136 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:42:50.849 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13622598558683136 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-03-06 16:42:50.850 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13622598558683136 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-03-06 16:42:50.850 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13622598558683136 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:42:50.850 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13622598558683136 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 16:42:50.850 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13622598558683136 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-06 16:42:50.851 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13622598558683136 [0;39m ==> Parameters: 
2023-03-06 16:42:50.852 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13622598558683136 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-03-06 16:42:50.852 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13622598558683136 [0;39m <==        Row: 2023-03-05, 8, 5, 8, 5
2023-03-06 16:42:50.852 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13622598558683136 [0;39m <==        Row: 2023-03-06, 9, 6, 1, 1
2023-03-06 16:42:50.853 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13622598558683136 [0;39m <==      Total: 2
2023-03-06 16:42:50.853 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13622598558683136 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677945600000,"viewCount":8,"viewIncrease":8,"voteCount":5,"voteIncrease":5},{"date":1678032000000,"viewCount":9,"viewIncrease":1,"voteCount":6,"voteIncrease":1}],"success":true}
2023-03-06 16:42:50.853 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13622598558683136 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-03-06 16:42:50.855 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13622598583848961 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:42:50.855 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13622598583848961 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-06 16:42:50.855 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13622598583848961 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-06 16:42:50.855 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13622598583848961 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:42:50.855 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13622598583848961 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 16:42:50.856 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13622598583848961 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-06 16:42:50.856 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13622598583848961 [0;39m ==> Parameters: 
2023-03-06 16:42:50.855 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13622598583848960 [0;39m ------------- å¼€å§‹ -------------
2023-03-06 16:42:50.856 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13622598583848960 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-03-06 16:42:50.856 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13622598583848960 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-03-06 16:42:50.856 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622598583848961 [0;39m <==    Columns: id, parent, name, sort
2023-03-06 16:42:50.857 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622598583848961 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-06 16:42:50.857 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13622598583848960 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-06 16:42:50.857 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622598583848961 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-06 16:42:50.857 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13622598583848960 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-06 16:42:50.857 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622598583848961 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-06 16:42:50.857 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622598583848961 [0;39m <==        Row: 200, 0, Java, 200
2023-03-06 16:42:50.857 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13622598583848960 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-06 16:42:50.857 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622598583848961 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-06 16:42:50.858 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13622598583848960 [0;39m ==> Parameters: 
2023-03-06 16:42:50.858 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622598583848961 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-06 16:42:50.858 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622598583848961 [0;39m <==        Row: 300, 0, Python, 300
2023-03-06 16:42:50.858 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622598583848961 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-06 16:42:50.858 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622598583848961 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-06 16:42:50.858 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13622598583848960 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-03-06 16:42:50.858 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622598583848961 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-06 16:42:50.859 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13622598583848960 [0;39m <==        Row: 2023-03-02, 0, 0
2023-03-06 16:42:50.859 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622598583848961 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-06 16:42:50.859 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622598583848961 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-06 16:42:50.859 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13622598583848960 [0;39m <==        Row: 2023-03-05, 8, 5
2023-03-06 16:42:50.859 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622598583848961 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-06 16:42:50.859 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13622598583848960 [0;39m <==      Total: 2
2023-03-06 16:42:50.859 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622598583848961 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-06 16:42:50.860 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13622598583848960 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1677945600000,"viewCount":0,"viewIncrease":8,"voteCount":0,"voteIncrease":5}],"success":true}
2023-03-06 16:42:50.860 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13622598583848961 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-06 16:42:50.860 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13622598583848960 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-03-06 16:42:50.860 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13622598583848961 [0;39m <==      Total: 15
2023-03-06 16:42:50.860 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13622598583848961 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-06 16:42:50.861 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13622598583848961 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-03-06 16:43:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13622636991090688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:43:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13622636991090688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:43:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13622636991090688 [0;39m ==> Parameters: 
2023-03-06 16:43:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13622636991090688 [0;39m <==    Updates: 0
2023-03-06 16:43:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13622636991090688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 16:43:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13622657920667648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:43:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13622657920667648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:43:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13622657920667648 [0;39m ==> Parameters: 
2023-03-06 16:43:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13622657920667648 [0;39m <==    Updates: 1
2023-03-06 16:43:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13622657920667648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:43:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13622783779147776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:43:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13622783779147776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:43:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13622783779147776 [0;39m ==> Parameters: 
2023-03-06 16:43:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13622783779147776 [0;39m <==    Updates: 1
2023-03-06 16:43:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13622783779147776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:44:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13622888611581952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:44:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13622888611581952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:44:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13622888611581952 [0;39m ==> Parameters: 
2023-03-06 16:44:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13622888611581952 [0;39m <==    Updates: 0
2023-03-06 16:44:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13622888611581952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:44:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13622909591490560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:44:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13622909591490560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:44:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13622909591490560 [0;39m ==> Parameters: 
2023-03-06 16:44:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13622909591490560 [0;39m <==    Updates: 1
2023-03-06 16:44:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13622909591490560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:44:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13623035454164992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:44:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13623035454164992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:44:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13623035454164992 [0;39m ==> Parameters: 
2023-03-06 16:44:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13623035454164992 [0;39m <==    Updates: 1
2023-03-06 16:44:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13623035454164992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:45:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13623140265627648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:45:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13623140265627648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:45:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13623140265627648 [0;39m ==> Parameters: 
2023-03-06 16:45:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13623140265627648 [0;39m <==    Updates: 0
2023-03-06 16:45:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13623140265627648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 16:45:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13623161270702080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:45:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13623161270702080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:45:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13623161270702080 [0;39m ==> Parameters: 
2023-03-06 16:45:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13623161270702080 [0;39m <==    Updates: 1
2023-03-06 16:45:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13623161270702080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 16:45:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13623287091433472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:45:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13623287091433472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:45:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13623287091433472 [0;39m ==> Parameters: 
2023-03-06 16:45:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13623287091433472 [0;39m <==    Updates: 1
2023-03-06 16:45:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13623287091433472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:46:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13623391919673344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:46:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13623391919673344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:46:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13623391919673344 [0;39m ==> Parameters: 
2023-03-06 16:46:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13623391919673344 [0;39m <==    Updates: 0
2023-03-06 16:46:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13623391919673344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 16:46:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13623412912164864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:46:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13623412912164864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:46:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13623412912164864 [0;39m ==> Parameters: 
2023-03-06 16:46:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13623412912164864 [0;39m <==    Updates: 1
2023-03-06 16:46:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13623412912164864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:46:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13623538728701952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:46:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13623538728701952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:46:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13623538728701952 [0;39m ==> Parameters: 
2023-03-06 16:46:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13623538728701952 [0;39m <==    Updates: 1
2023-03-06 16:46:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13623538728701952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 16:47:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13623643594690560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:47:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13623643594690560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:47:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13623643594690560 [0;39m ==> Parameters: 
2023-03-06 16:47:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13623643594690560 [0;39m <==    Updates: 0
2023-03-06 16:47:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13623643594690560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-06 16:47:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13623664595570688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:47:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13623664595570688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:47:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13623664595570688 [0;39m ==> Parameters: 
2023-03-06 16:47:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13623664595570688 [0;39m <==    Updates: 1
2023-03-06 16:47:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13623664595570688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 16:47:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13623790420496384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:47:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13623790420496384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:47:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13623790420496384 [0;39m ==> Parameters: 
2023-03-06 16:47:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13623790420496384 [0;39m <==    Updates: 1
2023-03-06 16:47:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13623790420496384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:48:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13623895273902080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:48:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13623895273902080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:48:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13623895273902080 [0;39m ==> Parameters: 
2023-03-06 16:48:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13623895273902080 [0;39m <==    Updates: 0
2023-03-06 16:48:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13623895273902080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 16:48:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13623916232839168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:48:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13623916232839168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:48:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13623916232839168 [0;39m ==> Parameters: 
2023-03-06 16:48:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13623916232839168 [0;39m <==    Updates: 1
2023-03-06 16:48:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13623916232839168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 16:48:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13624042061959168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:48:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13624042061959168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:48:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13624042061959168 [0;39m ==> Parameters: 
2023-03-06 16:48:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13624042061959168 [0;39m <==    Updates: 1
2023-03-06 16:48:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13624042061959168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:49:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13624146940530688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:49:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13624146940530688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:49:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13624146940530688 [0;39m ==> Parameters: 
2023-03-06 16:49:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13624146940530688 [0;39m <==    Updates: 0
2023-03-06 16:49:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13624146940530688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 16:49:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13624167895273472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:49:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13624167895273472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:49:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13624167895273472 [0;39m ==> Parameters: 
2023-03-06 16:49:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13624167895273472 [0;39m <==    Updates: 1
2023-03-06 16:49:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13624167895273472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:49:35.000 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13624293690839040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:49:35.000 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13624293690839040 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:49:35.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13624293690839040 [0;39m ==> Parameters: 
2023-03-06 16:49:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13624293690839040 [0;39m <==    Updates: 1
2023-03-06 16:49:35.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13624293690839040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:50:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13624398598770688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:50:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13624398598770688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:50:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13624398598770688 [0;39m ==> Parameters: 
2023-03-06 16:50:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13624398598770688 [0;39m <==    Updates: 0
2023-03-06 16:50:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13624398598770688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 16:50:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13624419545124864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:50:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13624419545124864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:50:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13624419545124864 [0;39m ==> Parameters: 
2023-03-06 16:50:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13624419545124864 [0;39m <==    Updates: 1
2023-03-06 16:50:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13624419545124864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:50:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13624545395216384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:50:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13624545395216384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:50:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13624545395216384 [0;39m ==> Parameters: 
2023-03-06 16:50:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13624545395216384 [0;39m <==    Updates: 1
2023-03-06 16:50:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13624545395216384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:51:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13624650223456256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:51:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13624650223456256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:51:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13624650223456256 [0;39m ==> Parameters: 
2023-03-06 16:51:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13624650223456256 [0;39m <==    Updates: 0
2023-03-06 16:51:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13624650223456256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 16:51:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13624671228530688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:51:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13624671228530688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:51:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13624671228530688 [0;39m ==> Parameters: 
2023-03-06 16:51:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13624671228530688 [0;39m <==    Updates: 1
2023-03-06 16:51:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13624671228530688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:51:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13624797032484864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:51:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13624797032484864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:51:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13624797032484864 [0;39m ==> Parameters: 
2023-03-06 16:51:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13624797032484864 [0;39m <==    Updates: 1
2023-03-06 16:51:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13624797032484864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 16:52:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13624901906862080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:52:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13624901906862080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:52:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13624901906862080 [0;39m ==> Parameters: 
2023-03-06 16:52:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13624901906862080 [0;39m <==    Updates: 0
2023-03-06 16:52:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13624901906862080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 16:52:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13624922886770688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:52:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13624922886770688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:52:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13624922886770688 [0;39m ==> Parameters: 
2023-03-06 16:52:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13624922886770688 [0;39m <==    Updates: 1
2023-03-06 16:52:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13624922886770688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:52:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13625048690724864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:52:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13625048690724864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:52:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13625048690724864 [0;39m ==> Parameters: 
2023-03-06 16:52:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13625048690724864 [0;39m <==    Updates: 1
2023-03-06 16:52:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13625048690724864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:53:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13625153573490688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:53:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13625153573490688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:53:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13625153573490688 [0;39m ==> Parameters: 
2023-03-06 16:53:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13625153573490688 [0;39m <==    Updates: 0
2023-03-06 16:53:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13625153573490688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 16:53:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13625174515650560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:53:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13625174515650560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:53:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13625174515650560 [0;39m ==> Parameters: 
2023-03-06 16:53:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13625174515650560 [0;39m <==    Updates: 1
2023-03-06 16:53:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13625174515650560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:53:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13625300348964864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:53:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13625300348964864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:53:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13625300348964864 [0;39m ==> Parameters: 
2023-03-06 16:53:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13625300348964864 [0;39m <==    Updates: 1
2023-03-06 16:53:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13625300348964864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 16:54:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13625405244313600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:54:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13625405244313600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:54:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13625405244313600 [0;39m ==> Parameters: 
2023-03-06 16:54:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13625405244313600 [0;39m <==    Updates: 0
2023-03-06 16:54:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13625405244313600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:54:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13625426194862080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:54:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13625426194862080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:54:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13625426194862080 [0;39m ==> Parameters: 
2023-03-06 16:54:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13625426194862080 [0;39m <==    Updates: 1
2023-03-06 16:54:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13625426194862080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:54:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13625552011399168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:54:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13625552011399168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:54:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13625552011399168 [0;39m ==> Parameters: 
2023-03-06 16:54:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13625552011399168 [0;39m <==    Updates: 1
2023-03-06 16:54:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13625552011399168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:55:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13625656856416256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:55:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13625656856416256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:55:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13625656856416256 [0;39m ==> Parameters: 
2023-03-06 16:55:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13625656856416256 [0;39m <==    Updates: 0
2023-03-06 16:55:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13625656856416256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 16:55:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13625677827936256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:55:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13625677827936256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:55:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13625677827936256 [0;39m ==> Parameters: 
2023-03-06 16:55:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13625677827936256 [0;39m <==    Updates: 1
2023-03-06 16:55:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13625677827936256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 16:55:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13625803686416384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:55:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13625803686416384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:55:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13625803686416384 [0;39m ==> Parameters: 
2023-03-06 16:55:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13625803686416384 [0;39m <==    Updates: 1
2023-03-06 16:55:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13625803686416384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:56:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13625908539822080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:56:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13625908539822080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:56:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13625908539822080 [0;39m ==> Parameters: 
2023-03-06 16:56:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13625908539822080 [0;39m <==    Updates: 0
2023-03-06 16:56:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13625908539822080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 16:56:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13625929532313600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:56:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13625929532313600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:56:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13625929532313600 [0;39m ==> Parameters: 
2023-03-06 16:56:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13625929532313600 [0;39m <==    Updates: 1
2023-03-06 16:56:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13625929532313600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 16:56:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13626055306907648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:56:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13626055306907648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:56:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13626055306907648 [0;39m ==> Parameters: 
2023-03-06 16:56:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13626055306907648 [0;39m <==    Updates: 1
2023-03-06 16:56:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13626055306907648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:57:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13626160168701952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:57:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13626160168701952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:57:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13626160168701952 [0;39m ==> Parameters: 
2023-03-06 16:57:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13626160168701952 [0;39m <==    Updates: 0
2023-03-06 16:57:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13626160168701952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 16:57:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13626181131833344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:57:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13626181131833344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:57:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13626181131833344 [0;39m ==> Parameters: 
2023-03-06 16:57:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13626181131833344 [0;39m <==    Updates: 1
2023-03-06 16:57:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13626181131833344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:57:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13626306960953344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:57:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13626306960953344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:57:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13626306960953344 [0;39m ==> Parameters: 
2023-03-06 16:57:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13626306960953344 [0;39m <==    Updates: 1
2023-03-06 16:57:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13626306960953344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 16:58:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13626411822747648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:58:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13626411822747648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:58:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13626411822747648 [0;39m ==> Parameters: 
2023-03-06 16:58:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13626411822747648 [0;39m <==    Updates: 0
2023-03-06 16:58:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13626411822747648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 16:58:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13626432806850560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:58:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13626432806850560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:58:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13626432806850560 [0;39m ==> Parameters: 
2023-03-06 16:58:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13626432806850560 [0;39m <==    Updates: 1
2023-03-06 16:58:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13626432806850560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:58:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13626558619193344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:58:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13626558619193344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:58:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13626558619193344 [0;39m ==> Parameters: 
2023-03-06 16:58:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13626558619193344 [0;39m <==    Updates: 1
2023-03-06 16:58:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13626558619193344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:59:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13626663514542080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 16:59:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13626663514542080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 16:59:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13626663514542080 [0;39m ==> Parameters: 
2023-03-06 16:59:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13626663514542080 [0;39m <==    Updates: 0
2023-03-06 16:59:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13626663514542080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-06 16:59:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13626684498644992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:59:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13626684498644992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:59:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13626684498644992 [0;39m ==> Parameters: 
2023-03-06 16:59:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13626684498644992 [0;39m <==    Updates: 1
2023-03-06 16:59:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13626684498644992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 16:59:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13626810290016256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 16:59:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13626810290016256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 16:59:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13626810290016256 [0;39m ==> Parameters: 
2023-03-06 16:59:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13626810290016256 [0;39m <==    Updates: 1
2023-03-06 16:59:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13626810290016256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 17:00:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13626915176976384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:00:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13626915176976384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:00:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13626915176976384 [0;39m ==> Parameters: 
2023-03-06 17:00:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13626915176976384 [0;39m <==    Updates: 0
2023-03-06 17:00:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13626915176976384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:00:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13626936123330560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:00:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13626936123330560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:00:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13626936123330560 [0;39m ==> Parameters: 
2023-03-06 17:00:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13626936123330560 [0;39m <==    Updates: 1
2023-03-06 17:00:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13626936123330560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 17:00:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13627061994393600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:00:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13627061994393600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:00:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13627061994393600 [0;39m ==> Parameters: 
2023-03-06 17:00:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13627061994393600 [0;39m <==    Updates: 1
2023-03-06 17:00:35.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13627061994393600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:01:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13627166805856256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:01:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13627166805856256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:01:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13627166805856256 [0;39m ==> Parameters: 
2023-03-06 17:01:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13627166805856256 [0;39m <==    Updates: 0
2023-03-06 17:01:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13627166805856256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 17:01:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13627187781570560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:01:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13627187781570560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:01:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13627187781570560 [0;39m ==> Parameters: 
2023-03-06 17:01:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13627187781570560 [0;39m <==    Updates: 1
2023-03-06 17:01:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13627187781570560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:01:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13627313610690560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:01:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13627313610690560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:01:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13627313610690560 [0;39m ==> Parameters: 
2023-03-06 17:01:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13627313610690560 [0;39m <==    Updates: 1
2023-03-06 17:01:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13627313610690560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:02:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13627418485067776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:02:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13627418485067776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:02:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13627418485067776 [0;39m ==> Parameters: 
2023-03-06 17:02:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13627418485067776 [0;39m <==    Updates: 0
2023-03-06 17:02:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13627418485067776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 17:02:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13627439439810560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:02:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13627439439810560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:02:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13627439439810560 [0;39m ==> Parameters: 
2023-03-06 17:02:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13627439439810560 [0;39m <==    Updates: 1
2023-03-06 17:02:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13627439439810560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 17:02:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13627565260541952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:02:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13627565260541952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:02:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13627565260541952 [0;39m ==> Parameters: 
2023-03-06 17:02:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13627565260541952 [0;39m <==    Updates: 1
2023-03-06 17:02:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13627565260541952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 17:03:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13627670118141952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:03:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13627670118141952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:03:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13627670118141952 [0;39m ==> Parameters: 
2023-03-06 17:03:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13627670118141952 [0;39m <==    Updates: 0
2023-03-06 17:03:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13627670118141952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 17:03:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13627691139993600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:03:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13627691139993600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:03:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13627691139993600 [0;39m ==> Parameters: 
2023-03-06 17:03:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13627691139993600 [0;39m <==    Updates: 1
2023-03-06 17:03:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13627691139993600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 17:03:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13627816948142080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:03:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13627816948142080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:03:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13627816948142080 [0;39m ==> Parameters: 
2023-03-06 17:03:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13627816948142080 [0;39m <==    Updates: 1
2023-03-06 17:03:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13627816948142080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 17:04:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13627921780576256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:04:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13627921780576256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:04:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13627921780576256 [0;39m ==> Parameters: 
2023-03-06 17:04:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13627921780576256 [0;39m <==    Updates: 0
2023-03-06 17:04:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13627921780576256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 17:04:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13627942756290560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:04:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13627942756290560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:04:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13627942756290560 [0;39m ==> Parameters: 
2023-03-06 17:04:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13627942756290560 [0;39m <==    Updates: 1
2023-03-06 17:04:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13627942756290560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:04:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13628068618964992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:04:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13628068618964992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:04:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13628068618964992 [0;39m ==> Parameters: 
2023-03-06 17:04:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13628068618964992 [0;39m <==    Updates: 1
2023-03-06 17:04:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13628068618964992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:05:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13628173463982080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:05:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13628173463982080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:05:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13628173463982080 [0;39m ==> Parameters: 
2023-03-06 17:05:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13628173463982080 [0;39m <==    Updates: 0
2023-03-06 17:05:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13628173463982080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 17:05:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13628194414530560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:05:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13628194414530560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:05:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13628194414530560 [0;39m ==> Parameters: 
2023-03-06 17:05:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13628194414530560 [0;39m <==    Updates: 1
2023-03-06 17:05:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13628194414530560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:05:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13628320260427776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:05:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13628320260427776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:05:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13628320260427776 [0;39m ==> Parameters: 
2023-03-06 17:05:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13628320260427776 [0;39m <==    Updates: 1
2023-03-06 17:05:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13628320260427776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 17:06:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13628425113833472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:06:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13628425113833472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:06:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13628425113833472 [0;39m ==> Parameters: 
2023-03-06 17:06:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13628425113833472 [0;39m <==    Updates: 0
2023-03-06 17:06:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13628425113833472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-03-06 17:06:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13628446102130688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:06:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13628446102130688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:06:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13628446102130688 [0;39m ==> Parameters: 
2023-03-06 17:06:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13628446102130688 [0;39m <==    Updates: 1
2023-03-06 17:06:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13628446102130688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:06:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13628571935444992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:06:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13628571935444992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:06:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13628571935444992 [0;39m ==> Parameters: 
2023-03-06 17:06:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13628571935444992 [0;39m <==    Updates: 1
2023-03-06 17:06:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13628571935444992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 17:07:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13628676805627904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:07:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13628676805627904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:07:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13628676805627904 [0;39m ==> Parameters: 
2023-03-06 17:07:00.026 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13628676805627904 [0;39m <==    Updates: 0
2023-03-06 17:07:00.026 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13628676805627904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 17:07:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13628697751982080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:07:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13628697751982080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:07:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13628697751982080 [0;39m ==> Parameters: 
2023-03-06 17:07:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13628697751982080 [0;39m <==    Updates: 1
2023-03-06 17:07:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13628697751982080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:07:35.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13628823606267904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:07:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13628823606267904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:07:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13628823606267904 [0;39m ==> Parameters: 
2023-03-06 17:07:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13628823606267904 [0;39m <==    Updates: 1
2023-03-06 17:07:35.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13628823606267904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 17:08:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13628928463867904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:08:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13628928463867904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:08:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13628928463867904 [0;39m ==> Parameters: 
2023-03-06 17:08:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13628928463867904 [0;39m <==    Updates: 0
2023-03-06 17:08:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13628928463867904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:08:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13628949426999296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:08:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13628949426999296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:08:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13628949426999296 [0;39m ==> Parameters: 
2023-03-06 17:08:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13628949426999296 [0;39m <==    Updates: 1
2023-03-06 17:08:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13628949426999296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:08:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13629075209981952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:08:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13629075209981952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:08:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13629075209981952 [0;39m ==> Parameters: 
2023-03-06 17:08:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13629075209981952 [0;39m <==    Updates: 1
2023-03-06 17:08:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13629075209981952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:09:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13629180067581952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:09:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13629180067581952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:09:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13629180067581952 [0;39m ==> Parameters: 
2023-03-06 17:09:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13629180067581952 [0;39m <==    Updates: 0
2023-03-06 17:09:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13629180067581952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 17:09:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13629201089433600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:09:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13629201089433600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:09:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13629201089433600 [0;39m ==> Parameters: 
2023-03-06 17:09:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13629201089433600 [0;39m <==    Updates: 1
2023-03-06 17:09:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13629201089433600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 17:09:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13629326884999168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:09:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13629326884999168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:09:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13629326884999168 [0;39m ==> Parameters: 
2023-03-06 17:09:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13629326884999168 [0;39m <==    Updates: 1
2023-03-06 17:09:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13629326884999168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 17:10:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13629431755182080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:10:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13629431755182080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:10:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13629431755182080 [0;39m ==> Parameters: 
2023-03-06 17:10:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13629431755182080 [0;39m <==    Updates: 0
2023-03-06 17:10:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13629431755182080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 17:10:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13629452705730560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:10:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13629452705730560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:10:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13629452705730560 [0;39m ==> Parameters: 
2023-03-06 17:10:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13629452705730560 [0;39m <==    Updates: 1
2023-03-06 17:10:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13629452705730560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:10:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13629578572599296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:10:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13629578572599296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:10:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13629578572599296 [0;39m ==> Parameters: 
2023-03-06 17:10:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13629578572599296 [0;39m <==    Updates: 1
2023-03-06 17:10:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13629578572599296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:11:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13629683417616384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:11:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13629683417616384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:11:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13629683417616384 [0;39m ==> Parameters: 
2023-03-06 17:11:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13629683417616384 [0;39m <==    Updates: 0
2023-03-06 17:11:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13629683417616384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 17:11:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13629704405913600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:11:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13629704405913600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:11:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13629704405913600 [0;39m ==> Parameters: 
2023-03-06 17:11:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13629704405913600 [0;39m <==    Updates: 1
2023-03-06 17:11:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13629704405913600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 17:11:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13629830222450688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:11:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13629830222450688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:11:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13629830222450688 [0;39m ==> Parameters: 
2023-03-06 17:11:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13629830222450688 [0;39m <==    Updates: 1
2023-03-06 17:11:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13629830222450688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:12:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13629935071662080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:12:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13629935071662080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:12:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13629935071662080 [0;39m ==> Parameters: 
2023-03-06 17:12:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13629935071662080 [0;39m <==    Updates: 0
2023-03-06 17:12:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13629935071662080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 17:12:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13629956013821952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:12:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13629956013821952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:12:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13629956013821952 [0;39m ==> Parameters: 
2023-03-06 17:12:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13629956013821952 [0;39m <==    Updates: 1
2023-03-06 17:12:05.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13629956013821952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 17:12:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13630081876496384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:12:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13630081876496384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:12:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13630081876496384 [0;39m ==> Parameters: 
2023-03-06 17:12:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13630081876496384 [0;39m <==    Updates: 1
2023-03-06 17:12:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13630081876496384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:13:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13630186692153344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:13:00.001 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13630186692153344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:13:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13630186692153344 [0;39m ==> Parameters: 
2023-03-06 17:13:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13630186692153344 [0;39m <==    Updates: 0
2023-03-06 17:13:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13630186692153344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 17:13:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13630207663673344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:13:05.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13630207663673344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:13:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13630207663673344 [0;39m ==> Parameters: 
2023-03-06 17:13:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13630207663673344 [0;39m <==    Updates: 1
2023-03-06 17:13:05.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13630207663673344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 17:13:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13630333530542080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:13:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13630333530542080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:13:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13630333530542080 [0;39m ==> Parameters: 
2023-03-06 17:13:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13630333530542080 [0;39m <==    Updates: 1
2023-03-06 17:13:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13630333530542080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 17:14:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13630438362976256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:14:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13630438362976256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:14:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13630438362976256 [0;39m ==> Parameters: 
2023-03-06 17:14:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13630438362976256 [0;39m <==    Updates: 0
2023-03-06 17:14:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13630438362976256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 17:14:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13630459334496256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:14:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13630459334496256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:14:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13630459334496256 [0;39m ==> Parameters: 
2023-03-06 17:14:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13630459334496256 [0;39m <==    Updates: 1
2023-03-06 17:14:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13630459334496256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:14:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13630585201364992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:14:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13630585201364992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:14:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13630585201364992 [0;39m ==> Parameters: 
2023-03-06 17:14:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13630585201364992 [0;39m <==    Updates: 1
2023-03-06 17:14:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13630585201364992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 17:15:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13630690058964992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:15:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13630690058964992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:15:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13630690058964992 [0;39m ==> Parameters: 
2023-03-06 17:15:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13630690058964992 [0;39m <==    Updates: 0
2023-03-06 17:15:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13630690058964992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 17:15:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13630711034679296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:15:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13630711034679296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:15:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13630711034679296 [0;39m ==> Parameters: 
2023-03-06 17:15:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13630711034679296 [0;39m <==    Updates: 1
2023-03-06 17:15:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13630711034679296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 17:15:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13630836851216384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:15:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13630836851216384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:15:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13630836851216384 [0;39m ==> Parameters: 
2023-03-06 17:15:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13630836851216384 [0;39m <==    Updates: 1
2023-03-06 17:15:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13630836851216384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:16:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13630941683650560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:16:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13630941683650560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:16:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13630941683650560 [0;39m ==> Parameters: 
2023-03-06 17:16:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13630941683650560 [0;39m <==    Updates: 0
2023-03-06 17:16:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13630941683650560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 17:16:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13630962688724992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:16:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13630962688724992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:16:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13630962688724992 [0;39m ==> Parameters: 
2023-03-06 17:16:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13630962688724992 [0;39m <==    Updates: 1
2023-03-06 17:16:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13630962688724992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:16:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13631088475901952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:16:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13631088475901952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:16:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13631088475901952 [0;39m ==> Parameters: 
2023-03-06 17:16:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13631088475901952 [0;39m <==    Updates: 1
2023-03-06 17:16:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13631088475901952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 17:17:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13631193375444992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:17:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13631193375444992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:17:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13631193375444992 [0;39m ==> Parameters: 
2023-03-06 17:17:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13631193375444992 [0;39m <==    Updates: 0
2023-03-06 17:17:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13631193375444992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 17:17:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13631214325993472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:17:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13631214325993472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:17:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13631214325993472 [0;39m ==> Parameters: 
2023-03-06 17:17:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13631214325993472 [0;39m <==    Updates: 1
2023-03-06 17:17:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13631214325993472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:17:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13631340155113472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:17:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13631340155113472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:17:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13631340155113472 [0;39m ==> Parameters: 
2023-03-06 17:17:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13631340155113472 [0;39m <==    Updates: 1
2023-03-06 17:17:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13631340155113472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:18:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13631445033684992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:18:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13631445033684992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:18:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13631445033684992 [0;39m ==> Parameters: 
2023-03-06 17:18:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13631445033684992 [0;39m <==    Updates: 0
2023-03-06 17:18:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13631445033684992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 17:18:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13631465971650560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:18:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13631465971650560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:18:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13631465971650560 [0;39m ==> Parameters: 
2023-03-06 17:18:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13631465971650560 [0;39m <==    Updates: 1
2023-03-06 17:18:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13631465971650560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 17:18:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13631591825936384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:18:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13631591825936384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:18:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13631591825936384 [0;39m ==> Parameters: 
2023-03-06 17:18:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13631591825936384 [0;39m <==    Updates: 1
2023-03-06 17:18:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13631591825936384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:19:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13631696641593344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:19:00.001 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13631696641593344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:19:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13631696641593344 [0;39m ==> Parameters: 
2023-03-06 17:19:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13631696641593344 [0;39m <==    Updates: 0
2023-03-06 17:19:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13631696641593344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 17:19:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13631717659250688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:19:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13631717659250688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:19:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13631717659250688 [0;39m ==> Parameters: 
2023-03-06 17:19:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13631717659250688 [0;39m <==    Updates: 1
2023-03-06 17:19:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13631717659250688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:19:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13631843484176384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:19:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13631843484176384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:19:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13631843484176384 [0;39m ==> Parameters: 
2023-03-06 17:19:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13631843484176384 [0;39m <==    Updates: 1
2023-03-06 17:19:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13631843484176384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 17:20:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13631948350164992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:20:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13631948350164992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:20:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13631948350164992 [0;39m ==> Parameters: 
2023-03-06 17:20:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13631948350164992 [0;39m <==    Updates: 0
2023-03-06 17:20:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13631948350164992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 17:20:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13631969309102080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:20:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13631969309102080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:20:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13631969309102080 [0;39m ==> Parameters: 
2023-03-06 17:20:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13631969309102080 [0;39m <==    Updates: 1
2023-03-06 17:20:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13631969309102080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:20:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13632095154999296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:20:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13632095154999296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:20:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13632095154999296 [0;39m ==> Parameters: 
2023-03-06 17:20:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13632095154999296 [0;39m <==    Updates: 1
2023-03-06 17:20:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13632095154999296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:21:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13632199962267648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:21:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13632199962267648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:21:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13632199962267648 [0;39m ==> Parameters: 
2023-03-06 17:21:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13632199962267648 [0;39m <==    Updates: 0
2023-03-06 17:21:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13632199962267648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 17:21:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13632220933787648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:21:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13632220933787648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:21:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13632220933787648 [0;39m ==> Parameters: 
2023-03-06 17:21:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13632220933787648 [0;39m <==    Updates: 1
2023-03-06 17:21:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13632220933787648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 17:21:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13632346779684864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:21:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13632346779684864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:21:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13632346779684864 [0;39m ==> Parameters: 
2023-03-06 17:21:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13632346779684864 [0;39m <==    Updates: 1
2023-03-06 17:21:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13632346779684864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:22:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13632451637284864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:22:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13632451637284864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:22:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13632451637284864 [0;39m ==> Parameters: 
2023-03-06 17:22:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13632451637284864 [0;39m <==    Updates: 0
2023-03-06 17:22:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13632451637284864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 17:22:05.017 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13632472654942208 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:22:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13632472654942208 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:22:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13632472654942208 [0;39m ==> Parameters: 
2023-03-06 17:22:05.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13632472654942208 [0;39m <==    Updates: 1
2023-03-06 17:22:05.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13632472654942208 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 17:22:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13632598471479296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:22:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13632598471479296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:22:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13632598471479296 [0;39m ==> Parameters: 
2023-03-06 17:22:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13632598471479296 [0;39m <==    Updates: 1
2023-03-06 17:22:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13632598471479296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:23:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13632703308107776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:23:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13632703308107776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:23:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13632703308107776 [0;39m ==> Parameters: 
2023-03-06 17:23:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13632703308107776 [0;39m <==    Updates: 0
2023-03-06 17:23:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13632703308107776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 17:23:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13632724300599296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:23:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13632724300599296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:23:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13632724300599296 [0;39m ==> Parameters: 
2023-03-06 17:23:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13632724300599296 [0;39m <==    Updates: 1
2023-03-06 17:23:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13632724300599296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 17:23:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13632850079387648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:23:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13632850079387648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:23:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13632850079387648 [0;39m ==> Parameters: 
2023-03-06 17:23:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13632850079387648 [0;39m <==    Updates: 1
2023-03-06 17:23:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13632850079387648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:24:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13632954936987648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:24:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13632954936987648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:24:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13632954936987648 [0;39m ==> Parameters: 
2023-03-06 17:24:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13632954936987648 [0;39m <==    Updates: 0
2023-03-06 17:24:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13632954936987648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 17:24:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13632975942062080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:24:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13632975942062080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:24:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13632975942062080 [0;39m ==> Parameters: 
2023-03-06 17:24:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13632975942062080 [0;39m <==    Updates: 1
2023-03-06 17:24:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13632975942062080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:24:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13633101741821952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:24:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13633101741821952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:24:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13633101741821952 [0;39m ==> Parameters: 
2023-03-06 17:24:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13633101741821952 [0;39m <==    Updates: 1
2023-03-06 17:24:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13633101741821952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:25:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13633206628782080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:25:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13633206628782080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:25:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13633206628782080 [0;39m ==> Parameters: 
2023-03-06 17:25:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13633206628782080 [0;39m <==    Updates: 0
2023-03-06 17:25:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13633206628782080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 17:25:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13633227621273600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:25:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13633227621273600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:25:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13633227621273600 [0;39m ==> Parameters: 
2023-03-06 17:25:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13633227621273600 [0;39m <==    Updates: 1
2023-03-06 17:25:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13633227621273600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:25:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13633353408450560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:25:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13633353408450560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:25:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13633353408450560 [0;39m ==> Parameters: 
2023-03-06 17:25:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13633353408450560 [0;39m <==    Updates: 1
2023-03-06 17:25:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13633353408450560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:26:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13633458278633472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:26:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13633458278633472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:26:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13633458278633472 [0;39m ==> Parameters: 
2023-03-06 17:26:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13633458278633472 [0;39m <==    Updates: 0
2023-03-06 17:26:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13633458278633472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-06 17:26:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13633479250153472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:26:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13633479250153472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:26:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13633479250153472 [0;39m ==> Parameters: 
2023-03-06 17:26:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13633479250153472 [0;39m <==    Updates: 1
2023-03-06 17:26:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13633479250153472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 17:26:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13633605104439296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:26:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13633605104439296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:26:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13633605104439296 [0;39m ==> Parameters: 
2023-03-06 17:26:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13633605104439296 [0;39m <==    Updates: 1
2023-03-06 17:26:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13633605104439296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 17:27:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13633709945262080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:27:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13633709945262080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:27:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13633709945262080 [0;39m ==> Parameters: 
2023-03-06 17:27:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13633709945262080 [0;39m <==    Updates: 0
2023-03-06 17:27:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13633709945262080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 17:27:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13633730895810560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:27:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13633730895810560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:27:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13633730895810560 [0;39m ==> Parameters: 
2023-03-06 17:27:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13633730895810560 [0;39m <==    Updates: 1
2023-03-06 17:27:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13633730895810560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:27:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13633856750096384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:27:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13633856750096384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:27:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13633856750096384 [0;39m ==> Parameters: 
2023-03-06 17:27:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13633856750096384 [0;39m <==    Updates: 1
2023-03-06 17:27:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13633856750096384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 17:28:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13633961590919168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:28:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13633961590919168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:28:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13633961590919168 [0;39m ==> Parameters: 
2023-03-06 17:28:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13633961590919168 [0;39m <==    Updates: 0
2023-03-06 17:28:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13633961590919168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 17:28:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13633982554050560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:28:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13633982554050560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:28:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13633982554050560 [0;39m ==> Parameters: 
2023-03-06 17:28:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13633982554050560 [0;39m <==    Updates: 1
2023-03-06 17:28:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13633982554050560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-06 17:28:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13634108374781952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:28:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13634108374781952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:28:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13634108374781952 [0;39m ==> Parameters: 
2023-03-06 17:28:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13634108374781952 [0;39m <==    Updates: 1
2023-03-06 17:28:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13634108374781952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 17:29:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13634213278519296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:29:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13634213278519296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:29:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13634213278519296 [0;39m ==> Parameters: 
2023-03-06 17:29:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13634213278519296 [0;39m <==    Updates: 0
2023-03-06 17:29:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13634213278519296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 17:29:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13634234224873472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:29:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13634234224873472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:29:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13634234224873472 [0;39m ==> Parameters: 
2023-03-06 17:29:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13634234224873472 [0;39m <==    Updates: 1
2023-03-06 17:29:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13634234224873472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:29:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13634360033021952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:29:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13634360033021952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:29:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13634360033021952 [0;39m ==> Parameters: 
2023-03-06 17:29:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13634360033021952 [0;39m <==    Updates: 1
2023-03-06 17:29:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13634360033021952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-06 17:30:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13634464890621952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:30:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13634464890621952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:30:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13634464890621952 [0;39m ==> Parameters: 
2023-03-06 17:30:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13634464890621952 [0;39m <==    Updates: 0
2023-03-06 17:30:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13634464890621952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 17:30:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13634485878919168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:30:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13634485878919168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:30:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13634485878919168 [0;39m ==> Parameters: 
2023-03-06 17:30:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13634485878919168 [0;39m <==    Updates: 1
2023-03-06 17:30:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13634485878919168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 17:30:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13634611695456256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:30:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13634611695456256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:30:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13634611695456256 [0;39m ==> Parameters: 
2023-03-06 17:30:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13634611695456256 [0;39m <==    Updates: 1
2023-03-06 17:30:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13634611695456256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-06 17:31:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13634716594999296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:31:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13634716594999296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:31:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13634716594999296 [0;39m ==> Parameters: 
2023-03-06 17:31:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13634716594999296 [0;39m <==    Updates: 0
2023-03-06 17:31:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13634716594999296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-06 17:31:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13634737520381952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:31:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13634737520381952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:31:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13634737520381952 [0;39m ==> Parameters: 
2023-03-06 17:31:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13634737520381952 [0;39m <==    Updates: 1
2023-03-06 17:31:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13634737520381952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:31:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13634863345307648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:31:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13634863345307648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:31:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13634863345307648 [0;39m ==> Parameters: 
2023-03-06 17:31:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13634863345307648 [0;39m <==    Updates: 1
2023-03-06 17:31:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13634863345307648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 17:32:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13634968240656384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:32:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13634968240656384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:32:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13634968240656384 [0;39m ==> Parameters: 
2023-03-06 17:32:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13634968240656384 [0;39m <==    Updates: 0
2023-03-06 17:32:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13634968240656384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 17:32:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13634989207982080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:32:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13634989207982080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:32:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13634989207982080 [0;39m ==> Parameters: 
2023-03-06 17:32:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13634989207982080 [0;39m <==    Updates: 1
2023-03-06 17:32:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13634989207982080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 17:32:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13635115028713472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:32:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13635115028713472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:32:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13635115028713472 [0;39m ==> Parameters: 
2023-03-06 17:32:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13635115028713472 [0;39m <==    Updates: 1
2023-03-06 17:32:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13635115028713472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:33:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13635219886313472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:33:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13635219886313472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:33:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13635219886313472 [0;39m ==> Parameters: 
2023-03-06 17:33:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13635219886313472 [0;39m <==    Updates: 0
2023-03-06 17:33:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13635219886313472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 17:33:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13635240849444864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:33:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13635240849444864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:33:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13635240849444864 [0;39m ==> Parameters: 
2023-03-06 17:33:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13635240849444864 [0;39m <==    Updates: 1
2023-03-06 17:33:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13635240849444864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:33:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13635366678564864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:33:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13635366678564864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:33:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13635366678564864 [0;39m ==> Parameters: 
2023-03-06 17:33:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13635366678564864 [0;39m <==    Updates: 1
2023-03-06 17:33:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13635366678564864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 17:34:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13635471540359168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:34:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13635471540359168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:34:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13635471540359168 [0;39m ==> Parameters: 
2023-03-06 17:34:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13635471540359168 [0;39m <==    Updates: 0
2023-03-06 17:34:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13635471540359168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 17:34:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13635492524462080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:34:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13635492524462080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:34:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13635492524462080 [0;39m ==> Parameters: 
2023-03-06 17:34:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13635492524462080 [0;39m <==    Updates: 1
2023-03-06 17:34:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13635492524462080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 17:34:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13635618315833344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:34:35.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13635618315833344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:34:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13635618315833344 [0;39m ==> Parameters: 
2023-03-06 17:34:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13635618315833344 [0;39m <==    Updates: 1
2023-03-06 17:34:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13635618315833344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:35:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13635723211182080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:35:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13635723211182080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:35:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13635723211182080 [0;39m ==> Parameters: 
2023-03-06 17:35:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13635723211182080 [0;39m <==    Updates: 0
2023-03-06 17:35:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13635723211182080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 17:35:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13635744191090688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:35:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13635744191090688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:35:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13635744191090688 [0;39m ==> Parameters: 
2023-03-06 17:35:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13635744191090688 [0;39m <==    Updates: 1
2023-03-06 17:35:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13635744191090688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:35:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13635869986656256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:35:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13635869986656256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:35:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13635869986656256 [0;39m ==> Parameters: 
2023-03-06 17:35:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13635869986656256 [0;39m <==    Updates: 1
2023-03-06 17:35:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13635869986656256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 17:36:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13635974840061952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:36:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13635974840061952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:36:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13635974840061952 [0;39m ==> Parameters: 
2023-03-06 17:36:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13635974840061952 [0;39m <==    Updates: 0
2023-03-06 17:36:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13635974840061952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 17:36:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13635995840942080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:36:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13635995840942080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:36:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13635995840942080 [0;39m ==> Parameters: 
2023-03-06 17:36:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13635995840942080 [0;39m <==    Updates: 1
2023-03-06 17:36:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13635995840942080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 17:36:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13636121665867776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:36:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13636121665867776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:36:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13636121665867776 [0;39m ==> Parameters: 
2023-03-06 17:36:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13636121665867776 [0;39m <==    Updates: 1
2023-03-06 17:36:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13636121665867776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 17:36:45.100 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m13622242411941889 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-06 17:36:45.100 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m13622242411941889 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/
2023-03-06 17:36:45.101 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m13622242411941889 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼šnull
2023-03-06 17:36:45.101 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :49   [32m13622242411941889 [0;39m tokenä¸ºç©ºï¼Œè¯·æ±‚è¢«æ‹¦æˆª
2023-03-06 17:37:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13636226502496256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:37:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13636226502496256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:37:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13636226502496256 [0;39m ==> Parameters: 
2023-03-06 17:37:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13636226502496256 [0;39m <==    Updates: 0
2023-03-06 17:37:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13636226502496256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 17:37:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13636247520153600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:37:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13636247520153600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:37:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13636247520153600 [0;39m ==> Parameters: 
2023-03-06 17:37:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13636247520153600 [0;39m <==    Updates: 1
2023-03-06 17:37:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13636247520153600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:37:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13636373303136256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:37:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13636373303136256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:37:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13636373303136256 [0;39m ==> Parameters: 
2023-03-06 17:37:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13636373303136256 [0;39m <==    Updates: 1
2023-03-06 17:37:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13636373303136256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:38:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13636478152347648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:38:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13636478152347648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:38:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13636478152347648 [0;39m ==> Parameters: 
2023-03-06 17:38:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13636478152347648 [0;39m <==    Updates: 0
2023-03-06 17:38:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13636478152347648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 17:38:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13636499149033472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:38:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13636499149033472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:38:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13636499149033472 [0;39m ==> Parameters: 
2023-03-06 17:38:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13636499149033472 [0;39m <==    Updates: 1
2023-03-06 17:38:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13636499149033472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:38:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13636624957181952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:38:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13636624957181952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:38:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13636624957181952 [0;39m ==> Parameters: 
2023-03-06 17:38:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13636624957181952 [0;39m <==    Updates: 1
2023-03-06 17:38:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13636624957181952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:39:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13636729823170560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:39:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13636729823170560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:39:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13636729823170560 [0;39m ==> Parameters: 
2023-03-06 17:39:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13636729823170560 [0;39m <==    Updates: 0
2023-03-06 17:39:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13636729823170560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 17:39:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13636750794690560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:39:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13636750794690560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:39:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13636750794690560 [0;39m ==> Parameters: 
2023-03-06 17:39:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13636750794690560 [0;39m <==    Updates: 1
2023-03-06 17:39:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13636750794690560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:39:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13636876648976384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:39:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13636876648976384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:39:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13636876648976384 [0;39m ==> Parameters: 
2023-03-06 17:39:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13636876648976384 [0;39m <==    Updates: 1
2023-03-06 17:39:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13636876648976384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:40:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13636981468827648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:40:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13636981468827648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:40:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13636981468827648 [0;39m ==> Parameters: 
2023-03-06 17:40:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13636981468827648 [0;39m <==    Updates: 0
2023-03-06 17:40:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13636981468827648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 17:40:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13637002494873600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:40:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13637002494873600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:40:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13637002494873600 [0;39m ==> Parameters: 
2023-03-06 17:40:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13637002494873600 [0;39m <==    Updates: 1
2023-03-06 17:40:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13637002494873600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:40:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13637128273661952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:40:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13637128273661952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:40:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13637128273661952 [0;39m ==> Parameters: 
2023-03-06 17:40:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13637128273661952 [0;39m <==    Updates: 1
2023-03-06 17:40:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13637128273661952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 17:41:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13637233152233472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:41:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13637233152233472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:41:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13637233152233472 [0;39m ==> Parameters: 
2023-03-06 17:41:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13637233152233472 [0;39m <==    Updates: 0
2023-03-06 17:41:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13637233152233472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 17:41:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13637254119559168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:41:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13637254119559168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:41:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13637254119559168 [0;39m ==> Parameters: 
2023-03-06 17:41:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13637254119559168 [0;39m <==    Updates: 1
2023-03-06 17:41:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13637254119559168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 17:41:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13637379965456384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:41:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13637379965456384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:41:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13637379965456384 [0;39m ==> Parameters: 
2023-03-06 17:41:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13637379965456384 [0;39m <==    Updates: 1
2023-03-06 17:41:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13637379965456384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:42:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13637484781113344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:42:00.001 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13637484781113344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:42:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13637484781113344 [0;39m ==> Parameters: 
2023-03-06 17:42:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13637484781113344 [0;39m <==    Updates: 0
2023-03-06 17:42:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13637484781113344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 17:42:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13637505811353600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:42:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13637505811353600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:42:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13637505811353600 [0;39m ==> Parameters: 
2023-03-06 17:42:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13637505811353600 [0;39m <==    Updates: 1
2023-03-06 17:42:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13637505811353600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 17:42:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13637631585947648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:42:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13637631585947648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:42:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13637631585947648 [0;39m ==> Parameters: 
2023-03-06 17:42:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13637631585947648 [0;39m <==    Updates: 1
2023-03-06 17:42:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13637631585947648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 17:43:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13637736447741952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:43:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13637736447741952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:43:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13637736447741952 [0;39m ==> Parameters: 
2023-03-06 17:43:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13637736447741952 [0;39m <==    Updates: 0
2023-03-06 17:43:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13637736447741952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 17:43:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13637757436039168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:43:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13637757436039168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:43:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13637757436039168 [0;39m ==> Parameters: 
2023-03-06 17:43:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13637757436039168 [0;39m <==    Updates: 1
2023-03-06 17:43:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13637757436039168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:43:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13637883273547776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:43:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13637883273547776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:43:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13637883273547776 [0;39m ==> Parameters: 
2023-03-06 17:43:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13637883273547776 [0;39m <==    Updates: 1
2023-03-06 17:43:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13637883273547776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:44:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13637988135342080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:44:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13637988135342080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:44:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13637988135342080 [0;39m ==> Parameters: 
2023-03-06 17:44:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13637988135342080 [0;39m <==    Updates: 0
2023-03-06 17:44:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13637988135342080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 17:44:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13638009094279168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:44:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13638009094279168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:44:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13638009094279168 [0;39m ==> Parameters: 
2023-03-06 17:44:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13638009094279168 [0;39m <==    Updates: 1
2023-03-06 17:44:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13638009094279168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:44:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13638134923399168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:44:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13638134923399168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:44:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13638134923399168 [0;39m ==> Parameters: 
2023-03-06 17:44:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13638134923399168 [0;39m <==    Updates: 1
2023-03-06 17:44:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13638134923399168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 17:45:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13638239760027648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:45:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13638239760027648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:45:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13638239760027648 [0;39m ==> Parameters: 
2023-03-06 17:45:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13638239760027648 [0;39m <==    Updates: 0
2023-03-06 17:45:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13638239760027648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 17:45:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13638260760907776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:45:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13638260760907776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:45:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13638260760907776 [0;39m ==> Parameters: 
2023-03-06 17:45:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13638260760907776 [0;39m <==    Updates: 1
2023-03-06 17:45:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13638260760907776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:45:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13638386585833472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:45:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13638386585833472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:45:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13638386585833472 [0;39m ==> Parameters: 
2023-03-06 17:45:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13638386585833472 [0;39m <==    Updates: 1
2023-03-06 17:45:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13638386585833472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-06 17:46:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13638491460210688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:46:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13638491460210688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:46:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13638491460210688 [0;39m ==> Parameters: 
2023-03-06 17:46:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13638491460210688 [0;39m <==    Updates: 0
2023-03-06 17:46:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13638491460210688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-06 17:46:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13638512385593344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:46:05.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13638512385593344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:46:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13638512385593344 [0;39m ==> Parameters: 
2023-03-06 17:46:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13638512385593344 [0;39m <==    Updates: 1
2023-03-06 17:46:05.004 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13638512385593344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 17:46:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13638638260850688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:46:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13638638260850688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:46:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13638638260850688 [0;39m ==> Parameters: 
2023-03-06 17:46:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13638638260850688 [0;39m <==    Updates: 1
2023-03-06 17:46:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13638638260850688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 17:47:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13638743126839296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:47:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13638743126839296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:47:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13638743126839296 [0;39m ==> Parameters: 
2023-03-06 17:47:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13638743126839296 [0;39m <==    Updates: 0
2023-03-06 17:47:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13638743126839296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 17:47:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13638764081582080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:47:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13638764081582080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:47:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13638764081582080 [0;39m ==> Parameters: 
2023-03-06 17:47:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13638764081582080 [0;39m <==    Updates: 1
2023-03-06 17:47:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13638764081582080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 17:47:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13638889923284992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:47:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13638889923284992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:47:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13638889923284992 [0;39m ==> Parameters: 
2023-03-06 17:47:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13638889923284992 [0;39m <==    Updates: 1
2023-03-06 17:47:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13638889923284992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 17:48:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13638994738941952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:48:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13638994738941952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:48:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13638994738941952 [0;39m ==> Parameters: 
2023-03-06 17:48:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13638994738941952 [0;39m <==    Updates: 0
2023-03-06 17:48:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13638994738941952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 17:48:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13639015752404992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:48:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13639015752404992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:48:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13639015752404992 [0;39m ==> Parameters: 
2023-03-06 17:48:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13639015752404992 [0;39m <==    Updates: 1
2023-03-06 17:48:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13639015752404992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 17:48:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13639141552164864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:48:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13639141552164864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:48:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13639141552164864 [0;39m ==> Parameters: 
2023-03-06 17:48:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13639141552164864 [0;39m <==    Updates: 1
2023-03-06 17:48:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13639141552164864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 17:49:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13639246401376256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:49:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13639246401376256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:49:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13639246401376256 [0;39m ==> Parameters: 
2023-03-06 17:49:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13639246401376256 [0;39m <==    Updates: 0
2023-03-06 17:49:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13639246401376256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 17:49:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13639267406450688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:49:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13639267406450688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:49:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13639267406450688 [0;39m ==> Parameters: 
2023-03-06 17:49:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13639267406450688 [0;39m <==    Updates: 1
2023-03-06 17:49:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13639267406450688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 17:49:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13639393235570688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:49:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13639393235570688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:49:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13639393235570688 [0;39m ==> Parameters: 
2023-03-06 17:49:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13639393235570688 [0;39m <==    Updates: 1
2023-03-06 17:49:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13639393235570688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 17:50:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13639498072199168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:50:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13639498072199168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:50:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13639498072199168 [0;39m ==> Parameters: 
2023-03-06 17:50:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13639498072199168 [0;39m <==    Updates: 0
2023-03-06 17:50:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13639498072199168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:50:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13639519031136256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:50:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13639519031136256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:50:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13639519031136256 [0;39m ==> Parameters: 
2023-03-06 17:50:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13639519031136256 [0;39m <==    Updates: 1
2023-03-06 17:50:05.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13639519031136256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 17:50:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13639644893810688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:50:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13639644893810688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:50:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13639644893810688 [0;39m ==> Parameters: 
2023-03-06 17:50:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13639644893810688 [0;39m <==    Updates: 1
2023-03-06 17:50:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13639644893810688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 17:51:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13639749717856256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:51:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13639749717856256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:51:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13639749717856256 [0;39m ==> Parameters: 
2023-03-06 17:51:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13639749717856256 [0;39m <==    Updates: 0
2023-03-06 17:51:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13639749717856256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 17:51:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13639770722930688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:51:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13639770722930688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:51:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13639770722930688 [0;39m ==> Parameters: 
2023-03-06 17:51:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13639770722930688 [0;39m <==    Updates: 1
2023-03-06 17:51:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13639770722930688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 17:51:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13639896547856384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:51:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13639896547856384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:51:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13639896547856384 [0;39m ==> Parameters: 
2023-03-06 17:51:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13639896547856384 [0;39m <==    Updates: 1
2023-03-06 17:51:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13639896547856384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 17:52:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13640001413844992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:52:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13640001413844992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:52:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13640001413844992 [0;39m ==> Parameters: 
2023-03-06 17:52:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13640001413844992 [0;39m <==    Updates: 0
2023-03-06 17:52:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13640001413844992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 17:52:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13640022372782080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:52:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13640022372782080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:52:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13640022372782080 [0;39m ==> Parameters: 
2023-03-06 17:52:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13640022372782080 [0;39m <==    Updates: 1
2023-03-06 17:52:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13640022372782080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 17:52:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13640148197707776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:52:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13640148197707776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:52:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13640148197707776 [0;39m ==> Parameters: 
2023-03-06 17:52:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13640148197707776 [0;39m <==    Updates: 1
2023-03-06 17:52:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13640148197707776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:53:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13640253059502080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:53:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13640253059502080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:53:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13640253059502080 [0;39m ==> Parameters: 
2023-03-06 17:53:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13640253059502080 [0;39m <==    Updates: 0
2023-03-06 17:53:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13640253059502080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 17:53:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13640274043604992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:53:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13640274043604992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:53:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13640274043604992 [0;39m ==> Parameters: 
2023-03-06 17:53:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13640274043604992 [0;39m <==    Updates: 1
2023-03-06 17:53:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13640274043604992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 17:53:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13640399855947776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:53:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13640399855947776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:53:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13640399855947776 [0;39m ==> Parameters: 
2023-03-06 17:53:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13640399855947776 [0;39m <==    Updates: 1
2023-03-06 17:53:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13640399855947776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:54:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13640504688381952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:54:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13640504688381952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:54:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13640504688381952 [0;39m ==> Parameters: 
2023-03-06 17:54:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13640504688381952 [0;39m <==    Updates: 0
2023-03-06 17:54:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13640504688381952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 17:54:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13640525693456384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:54:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13640525693456384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:54:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13640525693456384 [0;39m ==> Parameters: 
2023-03-06 17:54:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13640525693456384 [0;39m <==    Updates: 1
2023-03-06 17:54:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13640525693456384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 17:54:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13640651497410560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:54:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13640651497410560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:54:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13640651497410560 [0;39m ==> Parameters: 
2023-03-06 17:54:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13640651497410560 [0;39m <==    Updates: 1
2023-03-06 17:54:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13640651497410560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:55:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13640756346621952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:55:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13640756346621952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:55:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13640756346621952 [0;39m ==> Parameters: 
2023-03-06 17:55:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13640756346621952 [0;39m <==    Updates: 0
2023-03-06 17:55:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13640756346621952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 17:55:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13640777351696384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:55:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13640777351696384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:55:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13640777351696384 [0;39m ==> Parameters: 
2023-03-06 17:55:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13640777351696384 [0;39m <==    Updates: 1
2023-03-06 17:55:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13640777351696384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-06 17:55:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13640903176622080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:55:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13640903176622080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:55:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13640903176622080 [0;39m ==> Parameters: 
2023-03-06 17:55:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13640903176622080 [0;39m <==    Updates: 1
2023-03-06 17:55:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13640903176622080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:56:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13641007996473344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:56:00.001 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13641007996473344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:56:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13641007996473344 [0;39m ==> Parameters: 
2023-03-06 17:56:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13641007996473344 [0;39m <==    Updates: 0
2023-03-06 17:56:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13641007996473344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-06 17:56:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13641028972187648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:56:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13641028972187648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:56:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13641028972187648 [0;39m ==> Parameters: 
2023-03-06 17:56:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13641028972187648 [0;39m <==    Updates: 1
2023-03-06 17:56:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13641028972187648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 17:56:35.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13641154860027904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:56:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13641154860027904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:56:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13641154860027904 [0;39m ==> Parameters: 
2023-03-06 17:56:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13641154860027904 [0;39m <==    Updates: 1
2023-03-06 17:56:35.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13641154860027904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 17:57:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13641259679879168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:57:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13641259679879168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:57:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13641259679879168 [0;39m ==> Parameters: 
2023-03-06 17:57:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13641259679879168 [0;39m <==    Updates: 0
2023-03-06 17:57:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13641259679879168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 17:57:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13641280647204864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:57:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13641280647204864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:57:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13641280647204864 [0;39m ==> Parameters: 
2023-03-06 17:57:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13641280647204864 [0;39m <==    Updates: 1
2023-03-06 17:57:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13641280647204864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 17:57:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13641406476324864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:57:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13641406476324864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:57:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13641406476324864 [0;39m ==> Parameters: 
2023-03-06 17:57:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13641406476324864 [0;39m <==    Updates: 1
2023-03-06 17:57:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13641406476324864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:58:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13641511333924864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:58:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13641511333924864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:58:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13641511333924864 [0;39m ==> Parameters: 
2023-03-06 17:58:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13641511333924864 [0;39m <==    Updates: 0
2023-03-06 17:58:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13641511333924864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 17:58:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13641532338999296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:58:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13641532338999296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:58:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13641532338999296 [0;39m ==> Parameters: 
2023-03-06 17:58:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13641532338999296 [0;39m <==    Updates: 1
2023-03-06 17:58:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13641532338999296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 17:58:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13641658126176256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:58:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13641658126176256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:58:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13641658126176256 [0;39m ==> Parameters: 
2023-03-06 17:58:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13641658126176256 [0;39m <==    Updates: 1
2023-03-06 17:58:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13641658126176256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 17:59:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13641763025719296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 17:59:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13641763025719296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 17:59:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13641763025719296 [0;39m ==> Parameters: 
2023-03-06 17:59:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13641763025719296 [0;39m <==    Updates: 0
2023-03-06 17:59:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13641763025719296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-06 17:59:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13641783976267776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:59:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13641783976267776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:59:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13641783976267776 [0;39m ==> Parameters: 
2023-03-06 17:59:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13641783976267776 [0;39m <==    Updates: 1
2023-03-06 17:59:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13641783976267776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 17:59:35.000 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13641909767639040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 17:59:35.000 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13641909767639040 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 17:59:35.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13641909767639040 [0;39m ==> Parameters: 
2023-03-06 17:59:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13641909767639040 [0;39m <==    Updates: 1
2023-03-06 17:59:35.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13641909767639040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 18:00:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13642014688153600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 18:00:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13642014688153600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 18:00:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13642014688153600 [0;39m ==> Parameters: 
2023-03-06 18:00:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13642014688153600 [0;39m <==    Updates: 0
2023-03-06 18:00:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13642014688153600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 18:00:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13642035647090688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:00:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13642035647090688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:00:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13642035647090688 [0;39m ==> Parameters: 
2023-03-06 18:00:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13642035647090688 [0;39m <==    Updates: 1
2023-03-06 18:00:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13642035647090688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 18:00:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13642161430073344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:00:35.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13642161430073344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:00:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13642161430073344 [0;39m ==> Parameters: 
2023-03-06 18:00:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13642161430073344 [0;39m <==    Updates: 1
2023-03-06 18:00:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13642161430073344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 18:01:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13642266312839168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 18:01:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13642266312839168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 18:01:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13642266312839168 [0;39m ==> Parameters: 
2023-03-06 18:01:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13642266312839168 [0;39m <==    Updates: 0
2023-03-06 18:01:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13642266312839168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 18:01:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13642287288553472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:01:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13642287288553472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:01:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13642287288553472 [0;39m ==> Parameters: 
2023-03-06 18:01:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13642287288553472 [0;39m <==    Updates: 1
2023-03-06 18:01:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13642287288553472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 18:01:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13642413134450688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:01:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13642413134450688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:01:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13642413134450688 [0;39m ==> Parameters: 
2023-03-06 18:01:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13642413134450688 [0;39m <==    Updates: 1
2023-03-06 18:01:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13642413134450688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 18:02:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13642517975273472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 18:02:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13642517975273472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 18:02:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13642517975273472 [0;39m ==> Parameters: 
2023-03-06 18:02:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13642517975273472 [0;39m <==    Updates: 0
2023-03-06 18:02:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13642517975273472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 18:02:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13642538963570688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:02:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13642538963570688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:02:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13642538963570688 [0;39m ==> Parameters: 
2023-03-06 18:02:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13642538963570688 [0;39m <==    Updates: 1
2023-03-06 18:02:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13642538963570688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 18:02:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13642664754941952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:02:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13642664754941952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:02:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13642664754941952 [0;39m ==> Parameters: 
2023-03-06 18:02:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13642664754941952 [0;39m <==    Updates: 1
2023-03-06 18:02:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13642664754941952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 18:03:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13642769612541952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 18:03:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13642769612541952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 18:03:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13642769612541952 [0;39m ==> Parameters: 
2023-03-06 18:03:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13642769612541952 [0;39m <==    Updates: 0
2023-03-06 18:03:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13642769612541952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 18:03:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13642790621810688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:03:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13642790621810688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:03:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13642790621810688 [0;39m ==> Parameters: 
2023-03-06 18:03:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13642790621810688 [0;39m <==    Updates: 1
2023-03-06 18:03:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13642790621810688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-06 18:03:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13642916417376256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:03:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13642916417376256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:03:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13642916417376256 [0;39m ==> Parameters: 
2023-03-06 18:03:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13642916417376256 [0;39m <==    Updates: 1
2023-03-06 18:03:35.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13642916417376256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 18:04:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13643021291753472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 18:04:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13643021291753472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 18:04:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13643021291753472 [0;39m ==> Parameters: 
2023-03-06 18:04:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13643021291753472 [0;39m <==    Updates: 0
2023-03-06 18:04:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13643021291753472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 18:04:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13643042254884864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:04:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13643042254884864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:04:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13643042254884864 [0;39m ==> Parameters: 
2023-03-06 18:04:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13643042254884864 [0;39m <==    Updates: 1
2023-03-06 18:04:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13643042254884864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 18:04:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13643168084004864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:04:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13643168084004864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:04:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13643168084004864 [0;39m ==> Parameters: 
2023-03-06 18:04:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13643168084004864 [0;39m <==    Updates: 1
2023-03-06 18:04:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13643168084004864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-03-06 18:05:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13643272929021952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 18:05:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13643272929021952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 18:05:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13643272929021952 [0;39m ==> Parameters: 
2023-03-06 18:05:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13643272929021952 [0;39m <==    Updates: 0
2023-03-06 18:05:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13643272929021952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 18:05:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13643293900541952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:05:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13643293900541952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:05:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13643293900541952 [0;39m ==> Parameters: 
2023-03-06 18:05:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13643293900541952 [0;39m <==    Updates: 1
2023-03-06 18:05:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13643293900541952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 18:05:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13643419771604992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:05:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13643419771604992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:05:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13643419771604992 [0;39m ==> Parameters: 
2023-03-06 18:05:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13643419771604992 [0;39m <==    Updates: 1
2023-03-06 18:05:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13643419771604992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 18:06:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13643524637593600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 18:06:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13643524637593600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 18:06:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13643524637593600 [0;39m ==> Parameters: 
2023-03-06 18:06:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13643524637593600 [0;39m <==    Updates: 0
2023-03-06 18:06:00.026 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13643524637593600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 18:06:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13643545600724992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:06:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13643545600724992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:06:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13643545600724992 [0;39m ==> Parameters: 
2023-03-06 18:06:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13643545600724992 [0;39m <==    Updates: 1
2023-03-06 18:06:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13643545600724992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 18:06:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13643671396290560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:06:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13643671396290560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:06:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13643671396290560 [0;39m ==> Parameters: 
2023-03-06 18:06:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13643671396290560 [0;39m <==    Updates: 1
2023-03-06 18:06:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13643671396290560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 18:07:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13643776258084864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 18:07:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13643776258084864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 18:07:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13643776258084864 [0;39m ==> Parameters: 
2023-03-06 18:07:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13643776258084864 [0;39m <==    Updates: 0
2023-03-06 18:07:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13643776258084864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-06 18:07:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13643797258964992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:07:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13643797258964992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:07:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13643797258964992 [0;39m ==> Parameters: 
2023-03-06 18:07:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13643797258964992 [0;39m <==    Updates: 1
2023-03-06 18:07:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13643797258964992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 18:07:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13643923054530560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:07:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13643923054530560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:07:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13643923054530560 [0;39m ==> Parameters: 
2023-03-06 18:07:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13643923054530560 [0;39m <==    Updates: 1
2023-03-06 18:07:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13643923054530560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 18:08:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13644027899547648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 18:08:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13644027899547648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 18:08:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13644027899547648 [0;39m ==> Parameters: 
2023-03-06 18:08:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13644027899547648 [0;39m <==    Updates: 0
2023-03-06 18:08:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13644027899547648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 18:08:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13644048908816384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:08:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13644048908816384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:08:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13644048908816384 [0;39m ==> Parameters: 
2023-03-06 18:08:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13644048908816384 [0;39m <==    Updates: 1
2023-03-06 18:08:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13644048908816384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 18:08:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13644174733742080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:08:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13644174733742080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:08:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13644174733742080 [0;39m ==> Parameters: 
2023-03-06 18:08:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13644174733742080 [0;39m <==    Updates: 1
2023-03-06 18:08:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13644174733742080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 18:09:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13644279612313600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 18:09:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13644279612313600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 18:09:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13644279612313600 [0;39m ==> Parameters: 
2023-03-06 18:09:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13644279612313600 [0;39m <==    Updates: 0
2023-03-06 18:09:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13644279612313600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 18:09:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13644300579639296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:09:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13644300579639296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:09:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13644300579639296 [0;39m ==> Parameters: 
2023-03-06 18:09:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13644300579639296 [0;39m <==    Updates: 1
2023-03-06 18:09:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13644300579639296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 18:09:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13644426375204864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:09:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13644426375204864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:09:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13644426375204864 [0;39m ==> Parameters: 
2023-03-06 18:09:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13644426375204864 [0;39m <==    Updates: 1
2023-03-06 18:09:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13644426375204864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 18:10:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13644531270553600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 18:10:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13644531270553600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 18:10:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13644531270553600 [0;39m ==> Parameters: 
2023-03-06 18:10:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13644531270553600 [0;39m <==    Updates: 0
2023-03-06 18:10:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13644531270553600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 18:10:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13644552204324864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:10:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13644552204324864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:10:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13644552204324864 [0;39m ==> Parameters: 
2023-03-06 18:10:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13644552204324864 [0;39m <==    Updates: 1
2023-03-06 18:10:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13644552204324864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 18:10:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13644678020861952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:10:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13644678020861952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:10:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13644678020861952 [0;39m ==> Parameters: 
2023-03-06 18:10:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13644678020861952 [0;39m <==    Updates: 1
2023-03-06 18:10:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13644678020861952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 18:11:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13644782920404992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 18:11:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13644782920404992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 18:11:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13644782920404992 [0;39m ==> Parameters: 
2023-03-06 18:11:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13644782920404992 [0;39m <==    Updates: 0
2023-03-06 18:11:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13644782920404992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 18:11:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13644803870953472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:11:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13644803870953472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:11:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13644803870953472 [0;39m ==> Parameters: 
2023-03-06 18:11:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13644803870953472 [0;39m <==    Updates: 1
2023-03-06 18:11:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13644803870953472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 18:11:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13644929687490560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:11:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13644929687490560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:11:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13644929687490560 [0;39m ==> Parameters: 
2023-03-06 18:11:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13644929687490560 [0;39m <==    Updates: 1
2023-03-06 18:11:35.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13644929687490560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 18:12:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13645034578644992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 18:12:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13645034578644992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 18:12:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13645034578644992 [0;39m ==> Parameters: 
2023-03-06 18:12:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13645034578644992 [0;39m <==    Updates: 0
2023-03-06 18:12:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13645034578644992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 18:12:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13645055533387776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:12:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13645055533387776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:12:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13645055533387776 [0;39m ==> Parameters: 
2023-03-06 18:12:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13645055533387776 [0;39m <==    Updates: 1
2023-03-06 18:12:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13645055533387776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 18:12:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13645181370896384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:12:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13645181370896384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:12:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13645181370896384 [0;39m ==> Parameters: 
2023-03-06 18:12:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13645181370896384 [0;39m <==    Updates: 1
2023-03-06 18:12:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13645181370896384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 18:13:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13645286186553344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 18:13:00.001 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13645286186553344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 18:13:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13645286186553344 [0;39m ==> Parameters: 
2023-03-06 18:13:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13645286186553344 [0;39m <==    Updates: 0
2023-03-06 18:13:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13645286186553344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 18:13:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13645307200016384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:13:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13645307200016384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:13:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13645307200016384 [0;39m ==> Parameters: 
2023-03-06 18:13:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13645307200016384 [0;39m <==    Updates: 1
2023-03-06 18:13:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13645307200016384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 18:13:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13645433029136384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:13:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13645433029136384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:13:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13645433029136384 [0;39m ==> Parameters: 
2023-03-06 18:13:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13645433029136384 [0;39m <==    Updates: 1
2023-03-06 18:13:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13645433029136384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 18:14:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13645537903513600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 18:14:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13645537903513600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 18:14:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13645537903513600 [0;39m ==> Parameters: 
2023-03-06 18:14:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13645537903513600 [0;39m <==    Updates: 0
2023-03-06 18:14:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13645537903513600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 18:14:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13645558866644992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:14:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13645558866644992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:14:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13645558866644992 [0;39m ==> Parameters: 
2023-03-06 18:14:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13645558866644992 [0;39m <==    Updates: 1
2023-03-06 18:14:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13645558866644992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-06 18:14:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13645684662210560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:14:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13645684662210560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:14:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13645684662210560 [0;39m ==> Parameters: 
2023-03-06 18:14:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13645684662210560 [0;39m <==    Updates: 1
2023-03-06 18:14:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13645684662210560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 18:15:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13645789536587776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 18:15:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13645789536587776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 18:15:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13645789536587776 [0;39m ==> Parameters: 
2023-03-06 18:15:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13645789536587776 [0;39m <==    Updates: 0
2023-03-06 18:15:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13645789536587776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 18:15:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13645810487136256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:15:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13645810487136256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:15:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13645810487136256 [0;39m ==> Parameters: 
2023-03-06 18:15:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13645810487136256 [0;39m <==    Updates: 1
2023-03-06 18:15:05.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13645810487136256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 18:15:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13645936333033472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:15:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13645936333033472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:15:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13645936333033472 [0;39m ==> Parameters: 
2023-03-06 18:15:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13645936333033472 [0;39m <==    Updates: 1
2023-03-06 18:15:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13645936333033472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 18:16:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13646041215799296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 18:16:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13646041215799296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 18:16:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13646041215799296 [0;39m ==> Parameters: 
2023-03-06 18:16:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13646041215799296 [0;39m <==    Updates: 0
2023-03-06 18:16:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13646041215799296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 18:16:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13646062141181952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:16:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13646062141181952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:16:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13646062141181952 [0;39m ==> Parameters: 
2023-03-06 18:16:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13646062141181952 [0;39m <==    Updates: 1
2023-03-06 18:16:05.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13646062141181952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 18:16:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13646187995467776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:16:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13646187995467776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:16:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13646187995467776 [0;39m ==> Parameters: 
2023-03-06 18:16:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13646187995467776 [0;39m <==    Updates: 1
2023-03-06 18:16:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13646187995467776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 18:17:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13646292882427904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 18:17:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13646292882427904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 18:17:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13646292882427904 [0;39m ==> Parameters: 
2023-03-06 18:17:00.027 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13646292882427904 [0;39m <==    Updates: 0
2023-03-06 18:17:00.027 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13646292882427904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 18:17:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13646313837170688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:17:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13646313837170688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:17:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13646313837170688 [0;39m ==> Parameters: 
2023-03-06 18:17:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13646313837170688 [0;39m <==    Updates: 1
2023-03-06 18:17:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13646313837170688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-06 18:17:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13646439678873600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:17:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13646439678873600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:17:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13646439678873600 [0;39m ==> Parameters: 
2023-03-06 18:17:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13646439678873600 [0;39m <==    Updates: 1
2023-03-06 18:17:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13646439678873600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 18:18:00.000 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13646544473559040 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 18:18:00.000 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13646544473559040 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 18:18:00.001 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13646544473559040 [0;39m ==> Parameters: 
2023-03-06 18:18:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13646544473559040 [0;39m <==    Updates: 0
2023-03-06 18:18:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13646544473559040 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 18:18:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13646565482827776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:18:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13646565482827776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:18:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13646565482827776 [0;39m ==> Parameters: 
2023-03-06 18:18:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13646565482827776 [0;39m <==    Updates: 1
2023-03-06 18:18:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13646565482827776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-06 18:18:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13646691299364864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:18:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13646691299364864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:18:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13646691299364864 [0;39m ==> Parameters: 
2023-03-06 18:18:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13646691299364864 [0;39m <==    Updates: 1
2023-03-06 18:18:35.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13646691299364864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 18:19:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13646796161159168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 18:19:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13646796161159168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 18:19:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13646796161159168 [0;39m ==> Parameters: 
2023-03-06 18:19:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13646796161159168 [0;39m <==    Updates: 0
2023-03-06 18:19:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13646796161159168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 18:19:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13646817128484864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:19:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13646817128484864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:19:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13646817128484864 [0;39m ==> Parameters: 
2023-03-06 18:19:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13646817128484864 [0;39m <==    Updates: 1
2023-03-06 18:19:05.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13646817128484864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 18:19:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13646942974382080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:19:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13646942974382080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:19:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13646942974382080 [0;39m ==> Parameters: 
2023-03-06 18:19:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13646942974382080 [0;39m <==    Updates: 1
2023-03-06 18:19:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13646942974382080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 18:20:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13647047819399168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 18:20:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13647047819399168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 18:20:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13647047819399168 [0;39m ==> Parameters: 
2023-03-06 18:20:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13647047819399168 [0;39m <==    Updates: 0
2023-03-06 18:20:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13647047819399168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 18:20:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13647068824473600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:20:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13647068824473600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:20:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13647068824473600 [0;39m ==> Parameters: 
2023-03-06 18:20:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13647068824473600 [0;39m <==    Updates: 1
2023-03-06 18:20:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13647068824473600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 18:20:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13647194653593600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:20:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13647194653593600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:20:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13647194653593600 [0;39m ==> Parameters: 
2023-03-06 18:20:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13647194653593600 [0;39m <==    Updates: 1
2023-03-06 18:20:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13647194653593600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 18:21:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13647299494416384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 18:21:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13647299494416384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 18:21:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13647299494416384 [0;39m ==> Parameters: 
2023-03-06 18:21:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13647299494416384 [0;39m <==    Updates: 0
2023-03-06 18:21:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13647299494416384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 18:21:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13647320465936384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:21:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13647320465936384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:21:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13647320465936384 [0;39m ==> Parameters: 
2023-03-06 18:21:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13647320465936384 [0;39m <==    Updates: 1
2023-03-06 18:21:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13647320465936384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 18:21:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13647446307639296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:21:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13647446307639296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:21:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13647446307639296 [0;39m ==> Parameters: 
2023-03-06 18:21:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13647446307639296 [0;39m <==    Updates: 1
2023-03-06 18:21:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13647446307639296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 18:22:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13647551161044992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 18:22:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13647551161044992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 18:22:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13647551161044992 [0;39m ==> Parameters: 
2023-03-06 18:22:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13647551161044992 [0;39m <==    Updates: 0
2023-03-06 18:22:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13647551161044992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-06 18:22:05.000 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13647572078039040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:22:05.000 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13647572078039040 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:22:05.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13647572078039040 [0;39m ==> Parameters: 
2023-03-06 18:22:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13647572078039040 [0;39m <==    Updates: 1
2023-03-06 18:22:05.003 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13647572078039040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-06 18:22:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13647697932324864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:22:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13647697932324864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:22:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13647697932324864 [0;39m ==> Parameters: 
2023-03-06 18:22:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13647697932324864 [0;39m <==    Updates: 1
2023-03-06 18:22:35.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13647697932324864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 18:23:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13647802773147648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 18:23:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13647802773147648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 18:23:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13647802773147648 [0;39m ==> Parameters: 
2023-03-06 18:23:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13647802773147648 [0;39m <==    Updates: 0
2023-03-06 18:23:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13647802773147648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-06 18:23:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13647823799193600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:23:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13647823799193600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:23:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13647823799193600 [0;39m ==> Parameters: 
2023-03-06 18:23:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13647823799193600 [0;39m <==    Updates: 1
2023-03-06 18:23:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13647823799193600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 18:23:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13647949619924992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:23:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13647949619924992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:23:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13647949619924992 [0;39m ==> Parameters: 
2023-03-06 18:23:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13647949619924992 [0;39m <==    Updates: 1
2023-03-06 18:23:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13647949619924992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 18:24:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13648054469136384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-06 18:24:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13648054469136384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-06 18:24:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13648054469136384 [0;39m ==> Parameters: 
2023-03-06 18:24:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13648054469136384 [0;39m <==    Updates: 0
2023-03-06 18:24:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13648054469136384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-06 18:24:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13648075419684864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:24:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13648075419684864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:24:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13648075419684864 [0;39m ==> Parameters: 
2023-03-06 18:24:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13648075419684864 [0;39m <==    Updates: 1
2023-03-06 18:24:05.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13648075419684864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-06 18:24:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13648201261387776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-06 18:24:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13648201261387776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-06 18:24:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13648201261387776 [0;39m ==> Parameters: 
2023-03-06 18:24:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13648201261387776 [0;39m <==    Updates: 1
2023-03-06 18:24:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13648201261387776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
