2023-05-14 00:00:00.000 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38374986452439040 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:00:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38374986452439040 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:00:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38374986452439040 [0;39m ==> Parameters: 
2023-05-14 00:00:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38374986452439040 [0;39m <==    Updates: 5
2023-05-14 00:00:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38374986452439040 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-05-14 00:00:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38375007482679296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:00:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38375007482679296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:00:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38375007482679296 [0;39m ==> Parameters: 
2023-05-14 00:00:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38375007482679296 [0;39m <==    Updates: 1
2023-05-14 00:00:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38375007482679296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:00:05.371 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:00:07.397 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:00:13.113 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:00:14.272 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:00:15.171 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:00:17.228 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:00:29.427 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:00:31.451 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:00:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38375133295022080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:00:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38375133295022080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:00:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38375133295022080 [0;39m ==> Parameters: 
2023-05-14 00:00:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38375133295022080 [0;39m <==    Updates: 1
2023-05-14 00:00:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38375133295022080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:00:44.274 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:00:45.168 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:00:47.211 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:00:55.582 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:01:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38375238148427776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:01:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38375238148427776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:01:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38375238148427776 [0;39m ==> Parameters: 
2023-05-14 00:01:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38375238148427776 [0;39m <==    Updates: 0
2023-05-14 00:01:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38375238148427776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-05-14 00:01:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38375259149307904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:01:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38375259149307904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:01:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38375259149307904 [0;39m ==> Parameters: 
2023-05-14 00:01:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38375259149307904 [0;39m <==    Updates: 1
2023-05-14 00:01:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38375259149307904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:01:14.271 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:01:15.173 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:01:17.208 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:01:19.251 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:01:21.298 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:01:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38375384970039296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:01:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38375384970039296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:01:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38375384970039296 [0;39m ==> Parameters: 
2023-05-14 00:01:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38375384970039296 [0;39m <==    Updates: 1
2023-05-14 00:01:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38375384970039296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:01:43.101 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:01:44.284 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:01:45.143 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:01:47.177 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:01:49.221 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:02:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38375489819250688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:02:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38375489819250688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:02:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38375489819250688 [0;39m ==> Parameters: 
2023-05-14 00:02:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38375489819250688 [0;39m <==    Updates: 0
2023-05-14 00:02:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38375489819250688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:02:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38375510753021952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:02:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38375510753021952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:02:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38375510753021952 [0;39m ==> Parameters: 
2023-05-14 00:02:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38375510753021952 [0;39m <==    Updates: 1
2023-05-14 00:02:05.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38375510753021952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:02:11.268 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:02:13.321 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:02:14.275 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:02:19.428 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:02:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38375636594724864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:02:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38375636594724864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:02:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38375636594724864 [0;39m ==> Parameters: 
2023-05-14 00:02:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38375636594724864 [0;39m <==    Updates: 1
2023-05-14 00:02:35.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38375636594724864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:02:37.393 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:02:43.128 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:02:44.253 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:02:47.232 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:03:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38375741439741952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:03:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38375741439741952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:03:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38375741439741952 [0;39m ==> Parameters: 
2023-05-14 00:03:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38375741439741952 [0;39m <==    Updates: 0
2023-05-14 00:03:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38375741439741952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-05-14 00:03:01.476 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:03:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38375762457399296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:03:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38375762457399296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:03:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38375762457399296 [0;39m ==> Parameters: 
2023-05-14 00:03:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38375762457399296 [0;39m <==    Updates: 1
2023-05-14 00:03:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38375762457399296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:03:14.287 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:03:15.159 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:03:17.182 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:03:23.531 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:03:25.574 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:03:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38375888286519296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:03:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38375888286519296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:03:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38375888286519296 [0;39m ==> Parameters: 
2023-05-14 00:03:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38375888286519296 [0;39m <==    Updates: 1
2023-05-14 00:03:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38375888286519296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:03:43.120 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:03:44.287 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:03:45.161 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:03:47.203 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:03:49.261 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:03:51.322 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:04:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38375993089593344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:04:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38375993089593344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:04:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38375993089593344 [0;39m ==> Parameters: 
2023-05-14 00:04:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38375993089593344 [0;39m <==    Updates: 0
2023-05-14 00:04:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38375993089593344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:04:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38376014094667776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:04:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38376014094667776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:04:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38376014094667776 [0;39m ==> Parameters: 
2023-05-14 00:04:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38376014094667776 [0;39m <==    Updates: 1
2023-05-14 00:04:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38376014094667776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-05-14 00:04:13.128 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:04:14.274 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:04:15.176 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:04:19.263 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:04:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38376139894427648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:04:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38376139894427648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:04:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38376139894427648 [0;39m ==> Parameters: 
2023-05-14 00:04:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38376139894427648 [0;39m <==    Updates: 1
2023-05-14 00:04:35.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38376139894427648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-05-14 00:04:43.344 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:04:44.269 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:04:45.384 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:04:49.499 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:05:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38376244806553600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:05:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38376244806553600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:05:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38376244806553600 [0;39m ==> Parameters: 
2023-05-14 00:05:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38376244806553600 [0;39m <==    Updates: 0
2023-05-14 00:05:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38376244806553600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-05-14 00:05:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38376265736130560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:05:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38376265736130560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:05:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38376265736130560 [0;39m ==> Parameters: 
2023-05-14 00:05:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38376265736130560 [0;39m <==    Updates: 1
2023-05-14 00:05:05.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38376265736130560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:05:05.394 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:05:07.423 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:05:13.117 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:05:14.287 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:05:17.182 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:05:29.481 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:05:31.516 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:05:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38376391590416384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:05:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38376391590416384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:05:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38376391590416384 [0;39m ==> Parameters: 
2023-05-14 00:05:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38376391590416384 [0;39m <==    Updates: 1
2023-05-14 00:05:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38376391590416384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:05:43.108 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:05:44.276 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:05:45.146 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:05:47.193 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:05:55.587 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:06:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38376496418656256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:06:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38376496418656256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:06:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38376496418656256 [0;39m ==> Parameters: 
2023-05-14 00:06:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38376496418656256 [0;39m <==    Updates: 0
2023-05-14 00:06:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38376496418656256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:06:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38376517423730688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:06:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38376517423730688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:06:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38376517423730688 [0;39m ==> Parameters: 
2023-05-14 00:06:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38376517423730688 [0;39m <==    Updates: 1
2023-05-14 00:06:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38376517423730688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:06:14.264 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:06:17.199 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:06:19.208 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:06:21.254 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:06:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38376643240267776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:06:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38376643240267776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:06:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38376643240267776 [0;39m ==> Parameters: 
2023-05-14 00:06:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38376643240267776 [0;39m <==    Updates: 1
2023-05-14 00:06:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38376643240267776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-14 00:06:44.279 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:06:45.185 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:06:47.212 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:06:49.252 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:07:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38376748127227904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:07:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38376748127227904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:07:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38376748127227904 [0;39m ==> Parameters: 
2023-05-14 00:07:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38376748127227904 [0;39m <==    Updates: 0
2023-05-14 00:07:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38376748127227904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:07:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38376769073582080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:07:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38376769073582080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:07:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38376769073582080 [0;39m ==> Parameters: 
2023-05-14 00:07:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38376769073582080 [0;39m <==    Updates: 1
2023-05-14 00:07:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38376769073582080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:07:11.321 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:07:13.353 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:07:14.248 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:07:15.385 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:07:17.426 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:07:19.474 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:07:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38376894864953344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:07:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38376894864953344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:07:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38376894864953344 [0;39m ==> Parameters: 
2023-05-14 00:07:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38376894864953344 [0;39m <==    Updates: 1
2023-05-14 00:07:35.003 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38376894864953344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:07:35.409 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:07:37.470 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:07:44.266 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:07:45.157 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:07:47.207 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:07:59.527 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:08:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38376999764496384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:08:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38376999764496384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:08:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38376999764496384 [0;39m ==> Parameters: 
2023-05-14 00:08:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38376999764496384 [0;39m <==    Updates: 0
2023-05-14 00:08:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38376999764496384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-05-14 00:08:01.571 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:08:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38377020694073344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:08:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38377020694073344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:08:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38377020694073344 [0;39m ==> Parameters: 
2023-05-14 00:08:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38377020694073344 [0;39m <==    Updates: 1
2023-05-14 00:08:05.004 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38377020694073344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:08:14.279 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:08:17.189 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:08:23.633 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:08:25.661 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:08:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38377146548359168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:08:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38377146548359168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:08:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38377146548359168 [0;39m ==> Parameters: 
2023-05-14 00:08:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38377146548359168 [0;39m <==    Updates: 1
2023-05-14 00:08:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38377146548359168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-05-14 00:08:43.097 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:08:44.267 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:08:45.155 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:08:47.188 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:08:51.275 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:09:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38377251431124992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:09:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38377251431124992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:09:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38377251431124992 [0;39m ==> Parameters: 
2023-05-14 00:09:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38377251431124992 [0;39m <==    Updates: 0
2023-05-14 00:09:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38377251431124992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-05-14 00:09:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38377272406839296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:09:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38377272406839296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:09:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38377272406839296 [0;39m ==> Parameters: 
2023-05-14 00:09:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38377272406839296 [0;39m <==    Updates: 1
2023-05-14 00:09:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38377272406839296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-14 00:09:14.278 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:09:15.180 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:09:17.216 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:09:19.261 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:09:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38377398235959296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:09:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38377398235959296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:09:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38377398235959296 [0;39m ==> Parameters: 
2023-05-14 00:09:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38377398235959296 [0;39m <==    Updates: 1
2023-05-14 00:09:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38377398235959296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:09:41.310 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:09:43.345 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:09:44.294 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:09:45.400 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:09:47.429 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:09:49.473 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:10:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38377503097753600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:10:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38377503097753600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:10:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38377503097753600 [0;39m ==> Parameters: 
2023-05-14 00:10:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38377503097753600 [0;39m <==    Updates: 0
2023-05-14 00:10:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38377503097753600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:10:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38377524031524864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:10:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38377524031524864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:10:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38377524031524864 [0;39m ==> Parameters: 
2023-05-14 00:10:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38377524031524864 [0;39m <==    Updates: 1
2023-05-14 00:10:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38377524031524864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:10:05.381 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:10:07.423 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:10:13.125 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:10:14.276 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:10:17.226 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:10:31.524 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:10:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38377649843867648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:10:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38377649843867648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:10:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38377649843867648 [0;39m ==> Parameters: 
2023-05-14 00:10:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38377649843867648 [0;39m <==    Updates: 1
2023-05-14 00:10:35.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38377649843867648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:10:44.275 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:10:47.159 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:10:53.587 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:10:55.621 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:11:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38377754755993600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:11:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38377754755993600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:11:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38377754755993600 [0;39m ==> Parameters: 
2023-05-14 00:11:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38377754755993600 [0;39m <==    Updates: 0
2023-05-14 00:11:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38377754755993600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:11:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38377775672987648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:11:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38377775672987648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:11:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38377775672987648 [0;39m ==> Parameters: 
2023-05-14 00:11:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38377775672987648 [0;39m <==    Updates: 1
2023-05-14 00:11:05.003 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38377775672987648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-14 00:11:13.122 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:11:14.294 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:11:15.169 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:11:17.228 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:11:19.273 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:11:21.313 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:11:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38377901556633600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:11:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38377901556633600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:11:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38377901556633600 [0;39m ==> Parameters: 
2023-05-14 00:11:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38377901556633600 [0;39m <==    Updates: 1
2023-05-14 00:11:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38377901556633600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:11:44.286 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:11:47.228 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:11:49.257 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:12:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38378006410039296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:12:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38378006410039296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:12:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38378006410039296 [0;39m ==> Parameters: 
2023-05-14 00:12:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38378006410039296 [0;39m <==    Updates: 0
2023-05-14 00:12:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38378006410039296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:12:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38378027352199168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:12:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38378027352199168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:12:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38378027352199168 [0;39m ==> Parameters: 
2023-05-14 00:12:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38378027352199168 [0;39m <==    Updates: 1
2023-05-14 00:12:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38378027352199168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:12:13.344 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:12:14.265 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:12:19.481 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:12:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38378153206484992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:12:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38378153206484992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:12:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38378153206484992 [0;39m ==> Parameters: 
2023-05-14 00:12:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38378153206484992 [0;39m <==    Updates: 1
2023-05-14 00:12:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38378153206484992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:12:35.372 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:12:37.429 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:12:43.139 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:12:44.264 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:12:47.248 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:13:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38378258064084992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:13:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38378258064084992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:13:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38378258064084992 [0;39m ==> Parameters: 
2023-05-14 00:13:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38378258064084992 [0;39m <==    Updates: 0
2023-05-14 00:13:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38378258064084992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-05-14 00:13:01.524 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:13:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38378279043993600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:13:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38378279043993600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:13:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38378279043993600 [0;39m ==> Parameters: 
2023-05-14 00:13:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38378279043993600 [0;39m <==    Updates: 1
2023-05-14 00:13:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38378279043993600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:13:13.104 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:13:14.276 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:13:15.120 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:13:17.159 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:13:23.568 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:13:25.611 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:13:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38378404839559168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:13:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38378404839559168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:13:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38378404839559168 [0;39m ==> Parameters: 
2023-05-14 00:13:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38378404839559168 [0;39m <==    Updates: 1
2023-05-14 00:13:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38378404839559168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-14 00:13:44.291 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:13:45.152 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:13:47.181 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:13:49.234 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:13:51.275 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:14:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38378509713936384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:14:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38378509713936384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:14:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38378509713936384 [0;39m ==> Parameters: 
2023-05-14 00:14:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38378509713936384 [0;39m <==    Updates: 0
2023-05-14 00:14:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38378509713936384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:14:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38378530656096256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:14:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38378530656096256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:14:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38378530656096256 [0;39m ==> Parameters: 
2023-05-14 00:14:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38378530656096256 [0;39m <==    Updates: 1
2023-05-14 00:14:05.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38378530656096256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:14:14.276 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:14:17.213 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:14:19.257 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:14:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38378656510382080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:14:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38378656510382080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:14:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38378656510382080 [0;39m ==> Parameters: 
2023-05-14 00:14:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38378656510382080 [0;39m <==    Updates: 1
2023-05-14 00:14:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38378656510382080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-14 00:14:43.325 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:14:44.246 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:14:47.420 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:14:49.464 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:15:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38378761363787776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:15:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38378761363787776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:15:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38378761363787776 [0;39m ==> Parameters: 
2023-05-14 00:15:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38378761363787776 [0;39m <==    Updates: 0
2023-05-14 00:15:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38378761363787776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:15:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38378782326919168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:15:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38378782326919168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:15:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38378782326919168 [0;39m ==> Parameters: 
2023-05-14 00:15:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38378782326919168 [0;39m <==    Updates: 1
2023-05-14 00:15:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38378782326919168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:15:05.378 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:15:07.426 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:15:13.114 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:15:14.269 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:15:17.195 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:15:29.468 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:15:31.509 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:15:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38378908185399296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:15:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38378908185399296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:15:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38378908185399296 [0;39m ==> Parameters: 
2023-05-14 00:15:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38378908185399296 [0;39m <==    Updates: 1
2023-05-14 00:15:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38378908185399296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-14 00:15:44.285 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:15:47.229 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:15:55.598 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:16:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38379013042999296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:16:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38379013042999296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:16:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38379013042999296 [0;39m ==> Parameters: 
2023-05-14 00:16:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38379013042999296 [0;39m <==    Updates: 0
2023-05-14 00:16:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38379013042999296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:16:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38379033989353472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:16:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38379033989353472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:16:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38379033989353472 [0;39m ==> Parameters: 
2023-05-14 00:16:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38379033989353472 [0;39m <==    Updates: 1
2023-05-14 00:16:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38379033989353472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-14 00:16:13.266 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:16:14.419 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:16:17.864 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:16:22.257 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:16:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38379159831056384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:16:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38379159831056384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:16:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38379159831056384 [0;39m ==> Parameters: 
2023-05-14 00:16:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38379159831056384 [0;39m <==    Updates: 1
2023-05-14 00:16:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38379159831056384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:16:43.387 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:16:44.729 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:16:47.457 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:16:49.479 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:17:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38379264671879168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:17:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38379264671879168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:17:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38379264671879168 [0;39m ==> Parameters: 
2023-05-14 00:17:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38379264671879168 [0;39m <==    Updates: 0
2023-05-14 00:17:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38379264671879168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:17:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38379285639204864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:17:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38379285639204864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:17:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38379285639204864 [0;39m ==> Parameters: 
2023-05-14 00:17:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38379285639204864 [0;39m <==    Updates: 1
2023-05-14 00:17:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38379285639204864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:17:13.841 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:17:14.275 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:17:17.922 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:17:19.960 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:17:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38379411476713472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:17:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38379411476713472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:17:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38379411476713472 [0;39m ==> Parameters: 
2023-05-14 00:17:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38379411476713472 [0;39m <==    Updates: 1
2023-05-14 00:17:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38379411476713472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:17:38.577 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:17:43.220 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:17:43.534 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38379447237349376 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:17:43.535 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38379447237349376 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/1 GET
2023-05-14 00:17:43.535 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38379447237349376 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-05-14 00:17:43.535 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38379447237349376 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:17:43.535 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38379447237349376 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:17:43.537 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38379447237349376 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-05-14 00:17:43.537 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38379447237349376 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:17:43.538 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38379447237349376 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-05-14 00:17:43.538 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38379447237349376 [0;39m <==        Row: 1, 1, 0, æ–‡æ¡£1, 1, 180, 7
2023-05-14 00:17:43.538 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38379447237349376 [0;39m <==        Row: 2, 1, 1, æ–‡æ¡£1.1, 1, 9, 2
2023-05-14 00:17:43.538 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38379447237349376 [0;39m <==        Row: 4, 1, 3, æ–‡æ¡£2.1, 1, 6, 1
2023-05-14 00:17:43.539 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38379447237349376 [0;39m <==        Row: 6, 1, 5, æ–‡æ¡£2.2.1, 1, 5, 1
2023-05-14 00:17:43.539 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38379447237349376 [0;39m <==        Row: 37841703666847744, 1, 5, æ–‡æ¡£2.2.2, 1, 3, 0
2023-05-14 00:17:43.539 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38379447237349376 [0;39m <==        Row: 37841746528440320, 1, 37841703666847744, æ–‡æ¡£2.2.2.1, 1, 3, 0
2023-05-14 00:17:43.539 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38379447237349376 [0;39m <==        Row: 3, 1, 0, æ–‡æ¡£2, 2, 3, 0
2023-05-14 00:17:43.539 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38379447237349376 [0;39m <==        Row: 5, 1, 3, æ–‡æ¡£2.2, 2, 5, 1
2023-05-14 00:17:43.540 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38379447237349376 [0;39m <==      Total: 8
2023-05-14 00:17:43.540 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38379447237349376 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":1,"id":1,"name":"æ–‡æ¡£1","parent":0,"sort":1,"viewCount":180,"voteCount":7},{"ebookId":1,"id":2,"name":"æ–‡æ¡£1.1","parent":1,"sort":1,"viewCount":9,"voteCount":2},{"ebookId":1,"id":4,"name":"æ–‡æ¡£2.1","parent":3,"sort":1,"viewCount":6,"voteCount":1},{"ebookId":1,"id":6,"name":"æ–‡æ¡£2.2.1","parent":5,"sort":1,"viewCount":5,"voteCount":1},{"ebookId":1,"id":37841703666847744,"name":"æ–‡æ¡£2.2.2","parent":5,"sort":1,"viewCount":3,"voteCount":0},{"ebookId":1,"id":37841746528440320,"name":"æ–‡æ¡£2.2.2.1","parent":37841703666847744,"sort":1,"viewCount":3,"voteCount":0},{"ebookId":1,"id":3,"name":"æ–‡æ¡£2","parent":0,"sort":2,"viewCount":3,"voteCount":0},{"ebookId":1,"id":5,"name":"æ–‡æ¡£2.2","parent":3,"sort":2,"viewCount":5,"voteCount":1}],"success":true}
2023-05-14 00:17:43.540 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38379447237349376 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-05-14 00:17:43.571 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38379447392538624 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:17:43.571 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38379447392538624 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:17:43.627 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38379447627419648 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:17:44.473 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38379447392538624 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:17:44.473 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38379447627419648 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/1 GET
2023-05-14 00:17:44.473 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38379447392538624 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:17:44.473 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38379447627419648 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-05-14 00:17:44.473 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38379447392538624 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:17:44.473 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38379447627419648 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:17:44.473 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38379447627419648 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:17:44.474 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38379447392538624 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:17:44.475 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38379447392538624 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:17:44.476 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38379447392538624 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:17:44.476 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38379447392538624 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:17:44.477 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38379447392538624 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:17:44.477 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38379447627419648 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-05-14 00:17:44.477 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38379447392538624 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:17:44.477 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38379447627419648 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:17:44.477 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38379447392538624 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:17:44.483 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38379447392538624 [0;39m <==      Total: 4
2023-05-14 00:17:44.483 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38379447392538624 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:17:44.483 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38379447392538624 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š912 ms -------------
2023-05-14 00:17:44.481 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m38379447627419648 [0;39m <==    Columns: id, content
2023-05-14 00:17:44.485 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m38379447627419648 [0;39m <==        Row: 1, <<BLOB>>
2023-05-14 00:17:44.485 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38379447627419648 [0;39m <==      Total: 1
2023-05-14 00:17:44.486 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38379447627419648 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-05-14 00:17:44.486 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38379447627419648 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:17:44.489 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38379447627419648 [0;39m <==    Updates: 1
2023-05-14 00:17:44.490 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38379447627419648 [0;39m è¿”å›žç»“æžœ: {"content":"<p>Spring Boot makes it easy to create stand-alone, production-grade Spring based Applications that you can \"just run\".</p><p>We take an opinionated view of the Spring platform and third-party libraries so you can get started with minimum fuss. Most Spring Boot applications need minimal Spring configuration.</p><p>If youâ€™re looking for information about a specific version, or instructions about how to upgrade from an earlier release, check out&nbsp;<a href=\"https://github.com/spring-projects/spring-boot/wiki#release-notes\">the project release notes section</a>&nbsp;on our wiki.</p><h2><a href=\"https://spring.io/projects/spring-boot#features\"></a>Features</h2><ul><li><p>Create stand-alone Spring applications</p></li><li><p>Embed Tomcat, Jetty or Undertow directly (no need to deploy WAR files)</p></li><li><p>Provide opinionated 'starter' dependencies to simplify your build configuration</p></li><li><p>Automatically configure Spring and 3rd party libraries whenever possible</p></li><li><p>Provide production-ready features such as metrics, health checks, and externalized configuration</p></li><li><p>Absolutely no code generation and no requirement for XML configuration</p></li></ul><h2><a href=\"https://spring.io/projects/spring-boot#getting-started\"></a>Getting Started</h2><ul><li><p>Super quick â€” try the&nbsp;<a href=\"https://spring.io/quickstart\">Quickstart Guide</a>.</p></li><li><p>More general â€” try&nbsp;<a href=\"https://spring.io/guides/gs/spring-boot/\">Building an Application with Spring Boot</a></p></li><li><p>More specific â€” try&nbsp;<a href=\"https://spring.io/guides/gs/rest-service/\">Building a RESTful Web Service</a>.</p></li><li><p>Or search through all our guides on the&nbsp;<a href=\"https://spring.io/guides\">Guides</a>&nbsp;homepage.</p></li></ul><h2><a href=\"https://spring.io/projects/spring-boot#talks-and-videos\"></a>Talks and videos</h2><ul><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/its-a-kind-of-magic-under-the-covers-of-spring-boot-brian-clozel-st%C3%A9phane-nicoll\">Itâ€™s a Kind of Magic: Under the Covers of Spring Boot</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/whats-new-in-spring-boot-2-0-phillip-webb-madhura-bhave\">Whatâ€™s New in Spring Boot 2.0</a></p></li><li><p><a href=\"https://content.pivotal.io/webinars/mar-13-introducing-spring-boot-2-0-webinar\">Introducing Spring Boot 2.0 webinar</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/test-driven-development-with-spring-boot-sannidhi-jalukar-madhura-bhave\">Test Driven Development with Spring Boot</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/from-zero-to-hero-with-spring-boot-brian-clozel\">From Zero to Hero with Spring Boot 2.0</a></p></li></ul><p>You can also join the&nbsp;<a href=\"https://gitter.im/spring-projects/spring-boot\">Spring Boot community on Gitter</a>!</p>","success":true}
2023-05-14 00:17:44.490 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38379447627419648 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š863 ms -------------
2023-05-14 00:17:44.712 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:17:45.575 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:17:45.640 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38379456070553600 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:17:45.640 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38379456070553600 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:17:45.641 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38379456070553600 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:17:45.641 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38379456070553600 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:17:45.641 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38379456070553600 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:17:45.641 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38379456070553600 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:17:45.641 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38379456070553600 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:17:45.642 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38379456070553600 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:17:45.642 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38379456070553600 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:17:45.642 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38379456070553600 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:17:45.643 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38379456070553600 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:17:45.643 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38379456070553600 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:17:45.643 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38379456070553600 [0;39m <==      Total: 4
2023-05-14 00:17:45.643 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38379456070553600 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:17:45.644 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38379456070553600 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-05-14 00:17:48.012 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:18:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38379516355284992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:18:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38379516355284992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:18:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38379516355284992 [0;39m ==> Parameters: 
2023-05-14 00:18:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38379516355284992 [0;39m <==    Updates: 0
2023-05-14 00:18:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38379516355284992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:18:00.825 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:18:02.857 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:18:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38379537322610688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:18:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38379537322610688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:18:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38379537322610688 [0;39m ==> Parameters: 
2023-05-14 00:18:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38379537322610688 [0;39m <==    Updates: 1
2023-05-14 00:18:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38379537322610688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-05-14 00:18:14.258 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:18:16.133 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:18:18.474 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:18:18.565 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38379594168012800 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:18:18.565 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38379594168012800 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/1 GET
2023-05-14 00:18:18.565 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38379594168012800 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-05-14 00:18:18.565 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38379594168012800 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:18:18.565 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38379594168012800 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:18:18.566 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38379594172207104 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:18:18.566 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38379594172207104 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:18:18.567 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38379594168012800 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-05-14 00:18:18.567 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38379594172207104 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:18:18.567 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38379594172207104 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:18:18.567 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38379594168012800 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:18:18.567 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38379594172207104 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:18:18.567 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38379594172207104 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:18:18.567 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38379594172207104 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:18:18.567 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38379594168012800 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-05-14 00:18:18.568 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38379594168012800 [0;39m <==        Row: 1, 1, 0, æ–‡æ¡£1, 1, 181, 7
2023-05-14 00:18:18.568 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38379594168012800 [0;39m <==        Row: 2, 1, 1, æ–‡æ¡£1.1, 1, 9, 2
2023-05-14 00:18:18.568 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38379594168012800 [0;39m <==        Row: 4, 1, 3, æ–‡æ¡£2.1, 1, 6, 1
2023-05-14 00:18:18.568 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38379594168012800 [0;39m <==        Row: 6, 1, 5, æ–‡æ¡£2.2.1, 1, 5, 1
2023-05-14 00:18:18.568 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38379594172207104 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:18:18.569 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38379594172207104 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:18:18.569 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38379594168012800 [0;39m <==        Row: 37841703666847744, 1, 5, æ–‡æ¡£2.2.2, 1, 3, 0
2023-05-14 00:18:18.569 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38379594168012800 [0;39m <==        Row: 37841746528440320, 1, 37841703666847744, æ–‡æ¡£2.2.2.1, 1, 3, 0
2023-05-14 00:18:18.569 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38379594172207104 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:18:18.569 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38379594168012800 [0;39m <==        Row: 3, 1, 0, æ–‡æ¡£2, 2, 3, 0
2023-05-14 00:18:18.569 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38379594172207104 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:18:18.569 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38379594168012800 [0;39m <==        Row: 5, 1, 3, æ–‡æ¡£2.2, 2, 5, 1
2023-05-14 00:18:18.569 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38379594168012800 [0;39m <==      Total: 8
2023-05-14 00:18:18.569 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38379594172207104 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:18:18.570 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38379594172207104 [0;39m <==      Total: 4
2023-05-14 00:18:18.570 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38379594168012800 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":1,"id":1,"name":"æ–‡æ¡£1","parent":0,"sort":1,"viewCount":181,"voteCount":7},{"ebookId":1,"id":2,"name":"æ–‡æ¡£1.1","parent":1,"sort":1,"viewCount":9,"voteCount":2},{"ebookId":1,"id":4,"name":"æ–‡æ¡£2.1","parent":3,"sort":1,"viewCount":6,"voteCount":1},{"ebookId":1,"id":6,"name":"æ–‡æ¡£2.2.1","parent":5,"sort":1,"viewCount":5,"voteCount":1},{"ebookId":1,"id":37841703666847744,"name":"æ–‡æ¡£2.2.2","parent":5,"sort":1,"viewCount":3,"voteCount":0},{"ebookId":1,"id":37841746528440320,"name":"æ–‡æ¡£2.2.2.1","parent":37841703666847744,"sort":1,"viewCount":3,"voteCount":0},{"ebookId":1,"id":3,"name":"æ–‡æ¡£2","parent":0,"sort":2,"viewCount":3,"voteCount":0},{"ebookId":1,"id":5,"name":"æ–‡æ¡£2.2","parent":3,"sort":2,"viewCount":5,"voteCount":1}],"success":true}
2023-05-14 00:18:18.571 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38379594168012800 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-05-14 00:18:18.571 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38379594172207104 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:18:18.571 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38379594172207104 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-05-14 00:18:18.601 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38379594319007744 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:18:18.605 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38379594319007744 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/1 GET
2023-05-14 00:18:18.605 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38379594319007744 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-05-14 00:18:18.606 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38379594319007744 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:18:18.606 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38379594319007744 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:18:18.607 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38379594319007744 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-05-14 00:18:18.607 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38379594319007744 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:18:18.609 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m38379594319007744 [0;39m <==    Columns: id, content
2023-05-14 00:18:18.609 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m38379594319007744 [0;39m <==        Row: 1, <<BLOB>>
2023-05-14 00:18:18.609 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38379594319007744 [0;39m <==      Total: 1
2023-05-14 00:18:18.610 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38379594319007744 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-05-14 00:18:18.610 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38379594319007744 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:18:18.612 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38379594319007744 [0;39m <==    Updates: 1
2023-05-14 00:18:18.614 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38379594319007744 [0;39m è¿”å›žç»“æžœ: {"content":"<p>Spring Boot makes it easy to create stand-alone, production-grade Spring based Applications that you can \"just run\".</p><p>We take an opinionated view of the Spring platform and third-party libraries so you can get started with minimum fuss. Most Spring Boot applications need minimal Spring configuration.</p><p>If youâ€™re looking for information about a specific version, or instructions about how to upgrade from an earlier release, check out&nbsp;<a href=\"https://github.com/spring-projects/spring-boot/wiki#release-notes\">the project release notes section</a>&nbsp;on our wiki.</p><h2><a href=\"https://spring.io/projects/spring-boot#features\"></a>Features</h2><ul><li><p>Create stand-alone Spring applications</p></li><li><p>Embed Tomcat, Jetty or Undertow directly (no need to deploy WAR files)</p></li><li><p>Provide opinionated 'starter' dependencies to simplify your build configuration</p></li><li><p>Automatically configure Spring and 3rd party libraries whenever possible</p></li><li><p>Provide production-ready features such as metrics, health checks, and externalized configuration</p></li><li><p>Absolutely no code generation and no requirement for XML configuration</p></li></ul><h2><a href=\"https://spring.io/projects/spring-boot#getting-started\"></a>Getting Started</h2><ul><li><p>Super quick â€” try the&nbsp;<a href=\"https://spring.io/quickstart\">Quickstart Guide</a>.</p></li><li><p>More general â€” try&nbsp;<a href=\"https://spring.io/guides/gs/spring-boot/\">Building an Application with Spring Boot</a></p></li><li><p>More specific â€” try&nbsp;<a href=\"https://spring.io/guides/gs/rest-service/\">Building a RESTful Web Service</a>.</p></li><li><p>Or search through all our guides on the&nbsp;<a href=\"https://spring.io/guides\">Guides</a>&nbsp;homepage.</p></li></ul><h2><a href=\"https://spring.io/projects/spring-boot#talks-and-videos\"></a>Talks and videos</h2><ul><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/its-a-kind-of-magic-under-the-covers-of-spring-boot-brian-clozel-st%C3%A9phane-nicoll\">Itâ€™s a Kind of Magic: Under the Covers of Spring Boot</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/whats-new-in-spring-boot-2-0-phillip-webb-madhura-bhave\">Whatâ€™s New in Spring Boot 2.0</a></p></li><li><p><a href=\"https://content.pivotal.io/webinars/mar-13-introducing-spring-boot-2-0-webinar\">Introducing Spring Boot 2.0 webinar</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/test-driven-development-with-spring-boot-sannidhi-jalukar-madhura-bhave\">Test Driven Development with Spring Boot</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/from-zero-to-hero-with-spring-boot-brian-clozel\">From Zero to Hero with Spring Boot 2.0</a></p></li></ul><p>You can also join the&nbsp;<a href=\"https://gitter.im/spring-projects/spring-boot\">Spring Boot community on Gitter</a>!</p>","success":true}
2023-05-14 00:18:18.614 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38379594319007744 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š13 ms -------------
2023-05-14 00:18:27.401 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38379631228882944 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:18:27.401 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38379631228882944 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:18:27.401 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38379631228882944 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:18:27.401 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38379631228882944 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:18:27.402 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38379631228882944 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:18:27.402 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38379631228882944 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:18:27.403 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38379631228882944 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:18:27.404 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38379631228882944 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:18:27.404 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38379631228882944 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:18:27.405 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38379631228882944 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:18:27.405 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38379631228882944 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:18:27.405 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38379631228882944 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:18:27.405 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38379631228882944 [0;39m <==      Total: 4
2023-05-14 00:18:27.406 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38379631228882944 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:18:27.406 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38379631228882944 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-05-14 00:18:27.546 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:18:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38379663151730688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:18:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38379663151730688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:18:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38379663151730688 [0;39m ==> Parameters: 
2023-05-14 00:18:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38379663151730688 [0;39m <==    Updates: 1
2023-05-14 00:18:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38379663151730688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-05-14 00:18:43.149 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:18:44.274 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:18:45.183 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:18:47.239 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:18:49.582 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:18:51.628 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:19:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38379768000942080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:19:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38379768000942080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:19:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38379768000942080 [0;39m ==> Parameters: 
2023-05-14 00:19:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38379768000942080 [0;39m <==    Updates: 0
2023-05-14 00:19:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38379768000942080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-05-14 00:19:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38379788964073472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:19:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38379788964073472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:19:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38379788964073472 [0;39m ==> Parameters: 
2023-05-14 00:19:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38379788964073472 [0;39m <==    Updates: 1
2023-05-14 00:19:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38379788964073472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:19:14.269 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:19:15.126 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:19:17.155 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:19:19.188 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:19:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38379914801582080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:19:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38379914801582080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:19:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38379914801582080 [0;39m ==> Parameters: 
2023-05-14 00:19:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38379914801582080 [0;39m <==    Updates: 1
2023-05-14 00:19:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38379914801582080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:19:41.271 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:19:43.302 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:19:44.246 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:19:49.377 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:20:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38380019675959296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:20:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38380019675959296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:20:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38380019675959296 [0;39m ==> Parameters: 
2023-05-14 00:20:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38380019675959296 [0;39m <==    Updates: 0
2023-05-14 00:20:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38380019675959296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:20:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38380040592953344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:20:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38380040592953344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:20:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38380040592953344 [0;39m ==> Parameters: 
2023-05-14 00:20:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38380040592953344 [0;39m <==    Updates: 1
2023-05-14 00:20:05.003 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38380040592953344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:20:07.405 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:20:13.113 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:20:14.281 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:20:17.198 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:20:29.440 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:20:31.476 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:20:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38380166422073344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:20:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38380166422073344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:20:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38380166422073344 [0;39m ==> Parameters: 
2023-05-14 00:20:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38380166422073344 [0;39m <==    Updates: 1
2023-05-14 00:20:35.003 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38380166422073344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:20:43.131 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:20:44.286 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:20:47.658 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:20:53.715 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38380244914278400 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:20:53.716 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38380244914278400 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:20:53.716 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38380244914278400 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:20:53.716 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38380244914278400 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:20:53.716 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38380244914278400 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:20:53.717 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38380244914278400 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:20:53.717 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38380244914278400 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:20:53.718 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38380244914278400 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:20:53.718 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38380244914278400 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:20:53.719 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38380244914278400 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:20:53.719 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38380244914278400 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:20:53.719 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38380244914278400 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:20:53.719 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38380244914278400 [0;39m <==      Total: 4
2023-05-14 00:20:53.720 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38380244914278400 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:20:53.720 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38380244914278400 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-05-14 00:20:55.587 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:21:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38380271330004992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:21:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38380271330004992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:21:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38380271330004992 [0;39m ==> Parameters: 
2023-05-14 00:21:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38380271330004992 [0;39m <==    Updates: 0
2023-05-14 00:21:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38380271330004992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:21:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38380292305719296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:21:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38380292305719296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:21:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38380292305719296 [0;39m ==> Parameters: 
2023-05-14 00:21:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38380292305719296 [0;39m <==    Updates: 1
2023-05-14 00:21:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38380292305719296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:21:14.284 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:21:17.215 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:21:19.253 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:21:21.286 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:21:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38380418097090560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:21:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38380418097090560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:21:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38380418097090560 [0;39m ==> Parameters: 
2023-05-14 00:21:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38380418097090560 [0;39m <==    Updates: 1
2023-05-14 00:21:35.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38380418097090560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:21:44.269 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:21:45.150 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:21:47.178 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:21:49.400 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:22:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38380523000827904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:22:00.032 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38380523000827904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:22:00.033 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38380523000827904 [0;39m ==> Parameters: 
2023-05-14 00:22:00.034 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38380523000827904 [0;39m <==    Updates: 0
2023-05-14 00:22:00.034 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38380523000827904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š17æ¯«ç§’
2023-05-14 00:22:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38380543926210560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:22:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38380543926210560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:22:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38380543926210560 [0;39m ==> Parameters: 
2023-05-14 00:22:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38380543926210560 [0;39m <==    Updates: 1
2023-05-14 00:22:05.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38380543926210560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-14 00:22:11.618 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38380571663142912 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:22:11.619 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38380571663142912 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/1 GET
2023-05-14 00:22:11.619 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38380571663142912 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-05-14 00:22:11.620 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38380571663142912 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:22:11.620 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38380571663142912 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:22:11.622 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38380571663142912 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-05-14 00:22:11.623 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38380571663142912 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:22:11.624 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38380571663142912 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-05-14 00:22:11.625 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38380571663142912 [0;39m <==        Row: 1, 1, 0, æ–‡æ¡£1, 1, 182, 7
2023-05-14 00:22:11.627 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38380571663142912 [0;39m <==        Row: 2, 1, 1, æ–‡æ¡£1.1, 1, 9, 2
2023-05-14 00:22:11.627 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38380571663142912 [0;39m <==        Row: 4, 1, 3, æ–‡æ¡£2.1, 1, 6, 1
2023-05-14 00:22:11.627 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38380571663142912 [0;39m <==        Row: 6, 1, 5, æ–‡æ¡£2.2.1, 1, 5, 1
2023-05-14 00:22:11.627 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38380571663142912 [0;39m <==        Row: 37841703666847744, 1, 5, æ–‡æ¡£2.2.2, 1, 3, 0
2023-05-14 00:22:11.628 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38380571663142912 [0;39m <==        Row: 37841746528440320, 1, 37841703666847744, æ–‡æ¡£2.2.2.1, 1, 3, 0
2023-05-14 00:22:11.628 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38380571663142912 [0;39m <==        Row: 3, 1, 0, æ–‡æ¡£2, 2, 3, 0
2023-05-14 00:22:11.629 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38380571663142912 [0;39m <==        Row: 5, 1, 3, æ–‡æ¡£2.2, 2, 5, 1
2023-05-14 00:22:11.629 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38380571663142912 [0;39m <==      Total: 8
2023-05-14 00:22:11.629 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38380571663142912 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":1,"id":1,"name":"æ–‡æ¡£1","parent":0,"sort":1,"viewCount":182,"voteCount":7},{"ebookId":1,"id":2,"name":"æ–‡æ¡£1.1","parent":1,"sort":1,"viewCount":9,"voteCount":2},{"ebookId":1,"id":4,"name":"æ–‡æ¡£2.1","parent":3,"sort":1,"viewCount":6,"voteCount":1},{"ebookId":1,"id":6,"name":"æ–‡æ¡£2.2.1","parent":5,"sort":1,"viewCount":5,"voteCount":1},{"ebookId":1,"id":37841703666847744,"name":"æ–‡æ¡£2.2.2","parent":5,"sort":1,"viewCount":3,"voteCount":0},{"ebookId":1,"id":37841746528440320,"name":"æ–‡æ¡£2.2.2.1","parent":37841703666847744,"sort":1,"viewCount":3,"voteCount":0},{"ebookId":1,"id":3,"name":"æ–‡æ¡£2","parent":0,"sort":2,"viewCount":3,"voteCount":0},{"ebookId":1,"id":5,"name":"æ–‡æ¡£2.2","parent":3,"sort":2,"viewCount":5,"voteCount":1}],"success":true}
2023-05-14 00:22:11.629 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38380571663142912 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š11 ms -------------
2023-05-14 00:22:11.750 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38380572216791040 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:22:11.751 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38380572216791040 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:22:11.752 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38380572216791040 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:22:11.752 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38380572216791040 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:22:11.753 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38380572216791040 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:22:11.753 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38380572216791040 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:22:11.755 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38380572216791040 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:22:11.755 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38380572216791040 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:22:11.756 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38380572216791040 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:22:11.756 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38380572216791040 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:22:11.756 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38380572216791040 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:22:11.756 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38380572216791040 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:22:11.757 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38380572216791040 [0;39m <==      Total: 4
2023-05-14 00:22:11.757 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38380572216791040 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:22:11.757 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38380572216791040 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-05-14 00:22:11.843 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38380572606861312 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:22:11.844 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38380572606861312 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/1 GET
2023-05-14 00:22:11.845 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38380572606861312 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-05-14 00:22:11.845 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38380572606861312 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:22:11.845 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38380572606861312 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:22:11.846 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38380572606861312 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-05-14 00:22:11.846 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38380572606861312 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:22:11.847 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m38380572606861312 [0;39m <==    Columns: id, content
2023-05-14 00:22:11.847 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m38380572606861312 [0;39m <==        Row: 1, <<BLOB>>
2023-05-14 00:22:11.847 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38380572606861312 [0;39m <==      Total: 1
2023-05-14 00:22:11.848 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38380572606861312 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-05-14 00:22:11.848 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38380572606861312 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:22:11.880 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38380572606861312 [0;39m <==    Updates: 1
2023-05-14 00:22:11.880 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38380572606861312 [0;39m è¿”å›žç»“æžœ: {"content":"<p>Spring Boot makes it easy to create stand-alone, production-grade Spring based Applications that you can \"just run\".</p><p>We take an opinionated view of the Spring platform and third-party libraries so you can get started with minimum fuss. Most Spring Boot applications need minimal Spring configuration.</p><p>If youâ€™re looking for information about a specific version, or instructions about how to upgrade from an earlier release, check out&nbsp;<a href=\"https://github.com/spring-projects/spring-boot/wiki#release-notes\">the project release notes section</a>&nbsp;on our wiki.</p><h2><a href=\"https://spring.io/projects/spring-boot#features\"></a>Features</h2><ul><li><p>Create stand-alone Spring applications</p></li><li><p>Embed Tomcat, Jetty or Undertow directly (no need to deploy WAR files)</p></li><li><p>Provide opinionated 'starter' dependencies to simplify your build configuration</p></li><li><p>Automatically configure Spring and 3rd party libraries whenever possible</p></li><li><p>Provide production-ready features such as metrics, health checks, and externalized configuration</p></li><li><p>Absolutely no code generation and no requirement for XML configuration</p></li></ul><h2><a href=\"https://spring.io/projects/spring-boot#getting-started\"></a>Getting Started</h2><ul><li><p>Super quick â€” try the&nbsp;<a href=\"https://spring.io/quickstart\">Quickstart Guide</a>.</p></li><li><p>More general â€” try&nbsp;<a href=\"https://spring.io/guides/gs/spring-boot/\">Building an Application with Spring Boot</a></p></li><li><p>More specific â€” try&nbsp;<a href=\"https://spring.io/guides/gs/rest-service/\">Building a RESTful Web Service</a>.</p></li><li><p>Or search through all our guides on the&nbsp;<a href=\"https://spring.io/guides\">Guides</a>&nbsp;homepage.</p></li></ul><h2><a href=\"https://spring.io/projects/spring-boot#talks-and-videos\"></a>Talks and videos</h2><ul><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/its-a-kind-of-magic-under-the-covers-of-spring-boot-brian-clozel-st%C3%A9phane-nicoll\">Itâ€™s a Kind of Magic: Under the Covers of Spring Boot</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/whats-new-in-spring-boot-2-0-phillip-webb-madhura-bhave\">Whatâ€™s New in Spring Boot 2.0</a></p></li><li><p><a href=\"https://content.pivotal.io/webinars/mar-13-introducing-spring-boot-2-0-webinar\">Introducing Spring Boot 2.0 webinar</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/test-driven-development-with-spring-boot-sannidhi-jalukar-madhura-bhave\">Test Driven Development with Spring Boot</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/from-zero-to-hero-with-spring-boot-brian-clozel\">From Zero to Hero with Spring Boot 2.0</a></p></li></ul><p>You can also join the&nbsp;<a href=\"https://gitter.im/spring-projects/spring-boot\">Spring Boot community on Gitter</a>!</p>","success":true}
2023-05-14 00:22:11.881 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38380572606861312 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š38 ms -------------
2023-05-14 00:22:13.593 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:22:14.608 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:22:19.934 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:22:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38380669742747648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:22:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38380669742747648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:22:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38380669742747648 [0;39m ==> Parameters: 
2023-05-14 00:22:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38380669742747648 [0;39m <==    Updates: 1
2023-05-14 00:22:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38380669742747648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-05-14 00:22:35.652 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:22:37.713 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:22:43.107 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:22:44.265 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:22:47.201 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:23:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38380774642290688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:23:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38380774642290688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:23:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38380774642290688 [0;39m ==> Parameters: 
2023-05-14 00:23:00.026 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38380774642290688 [0;39m <==    Updates: 0
2023-05-14 00:23:00.026 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38380774642290688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š14æ¯«ç§’
2023-05-14 00:23:01.806 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:23:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38380795584450560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:23:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38380795584450560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:23:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38380795584450560 [0;39m ==> Parameters: 
2023-05-14 00:23:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38380795584450560 [0;39m <==    Updates: 1
2023-05-14 00:23:05.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38380795584450560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:23:13.123 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:23:14.266 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:23:17.206 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:23:25.888 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:23:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38380921405181952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:23:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38380921405181952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:23:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38380921405181952 [0;39m ==> Parameters: 
2023-05-14 00:23:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38380921405181952 [0;39m <==    Updates: 1
2023-05-14 00:23:35.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38380921405181952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:23:43.111 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:23:44.381 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:23:45.143 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:23:47.325 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:23:49.530 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:23:51.855 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:24:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38381026258587648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:24:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38381026258587648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:24:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38381026258587648 [0;39m ==> Parameters: 
2023-05-14 00:24:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38381026258587648 [0;39m <==    Updates: 0
2023-05-14 00:24:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38381026258587648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:24:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38381047272050688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:24:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38381047272050688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:24:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38381047272050688 [0;39m ==> Parameters: 
2023-05-14 00:24:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38381047272050688 [0;39m <==    Updates: 1
2023-05-14 00:24:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38381047272050688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:24:13.113 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:24:14.265 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:24:17.196 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:24:19.231 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:24:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38381173076004864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:24:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38381173076004864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:24:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38381173076004864 [0;39m ==> Parameters: 
2023-05-14 00:24:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38381173076004864 [0;39m <==    Updates: 1
2023-05-14 00:24:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38381173076004864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:24:43.688 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:24:44.255 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:24:45.727 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:24:49.789 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:25:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38381277933604864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:25:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38381277933604864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:25:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38381277933604864 [0;39m ==> Parameters: 
2023-05-14 00:25:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38381277933604864 [0;39m <==    Updates: 0
2023-05-14 00:25:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38381277933604864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:25:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38381298913513472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:25:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38381298913513472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:25:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38381298913513472 [0;39m ==> Parameters: 
2023-05-14 00:25:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38381298913513472 [0;39m <==    Updates: 1
2023-05-14 00:25:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38381298913513472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:25:05.741 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:25:07.797 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:25:14.286 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:25:17.177 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:25:29.839 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:25:31.877 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:25:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38381424767799296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:25:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38381424767799296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:25:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38381424767799296 [0;39m ==> Parameters: 
2023-05-14 00:25:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38381424767799296 [0;39m <==    Updates: 1
2023-05-14 00:25:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38381424767799296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:25:45.024 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:25:45.408 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:25:47.687 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:25:55.949 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:26:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38381529596039168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:26:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38381529596039168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:26:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38381529596039168 [0;39m ==> Parameters: 
2023-05-14 00:26:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38381529596039168 [0;39m <==    Updates: 0
2023-05-14 00:26:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38381529596039168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:26:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38381550588530688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:26:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38381550588530688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:26:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38381550588530688 [0;39m ==> Parameters: 
2023-05-14 00:26:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38381550588530688 [0;39m <==    Updates: 1
2023-05-14 00:26:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38381550588530688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:26:14.280 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:26:15.138 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:26:17.193 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:26:21.268 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:26:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38381676388290560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:26:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38381676388290560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:26:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38381676388290560 [0;39m ==> Parameters: 
2023-05-14 00:26:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38381676388290560 [0;39m <==    Updates: 1
2023-05-14 00:26:35.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38381676388290560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:26:44.437 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:26:48.084 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:27:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38381781233307648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:27:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38381781233307648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:27:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38381781233307648 [0;39m ==> Parameters: 
2023-05-14 00:27:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38381781233307648 [0;39m <==    Updates: 0
2023-05-14 00:27:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38381781233307648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:27:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38381802242576384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:27:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38381802242576384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:27:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38381802242576384 [0;39m ==> Parameters: 
2023-05-14 00:27:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38381802242576384 [0;39m <==    Updates: 1
2023-05-14 00:27:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38381802242576384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:27:12.202 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:27:14.260 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:27:16.285 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:27:18.327 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:27:34.248 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:27:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38381928080084992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:27:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38381928080084992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:27:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38381928080084992 [0;39m ==> Parameters: 
2023-05-14 00:27:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38381928080084992 [0;39m <==    Updates: 1
2023-05-14 00:27:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38381928080084992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:27:36.286 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:27:44.278 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:27:45.203 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:27:47.233 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:27:58.328 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:28:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38382032925102080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:28:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38382032925102080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:28:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38382032925102080 [0;39m ==> Parameters: 
2023-05-14 00:28:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38382032925102080 [0;39m <==    Updates: 0
2023-05-14 00:28:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38382032925102080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:28:00.384 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:28:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38382053884039168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:28:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38382053884039168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:28:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38382053884039168 [0;39m ==> Parameters: 
2023-05-14 00:28:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38382053884039168 [0;39m <==    Updates: 1
2023-05-14 00:28:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38382053884039168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:28:14.270 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:28:15.160 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:28:17.179 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:28:22.437 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:28:24.499 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:28:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38382179738324992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:28:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38382179738324992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:28:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38382179738324992 [0;39m ==> Parameters: 
2023-05-14 00:28:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38382179738324992 [0;39m <==    Updates: 1
2023-05-14 00:28:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38382179738324992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-05-14 00:28:43.591 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:28:44.605 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:28:48.607 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:28:50.994 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:29:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38382284591730688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:29:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38382284591730688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:29:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38382284591730688 [0;39m ==> Parameters: 
2023-05-14 00:29:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38382284591730688 [0;39m <==    Updates: 0
2023-05-14 00:29:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38382284591730688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-05-14 00:29:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38382305529696256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:29:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38382305529696256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:29:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38382305529696256 [0;39m ==> Parameters: 
2023-05-14 00:29:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38382305529696256 [0;39m <==    Updates: 1
2023-05-14 00:29:05.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38382305529696256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-14 00:29:13.061 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:29:14.270 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:29:15.112 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:29:19.182 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:29:34.689 INFO  com.jiawa.wiki.websocket.WebSocketServer          :41   [32m38379594319007744 [0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šCUJ6PYHLUdï¼Œsession idï¼š1cï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2023-05-14 00:29:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38382431354621952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:29:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38382431354621952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:29:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38382431354621952 [0;39m ==> Parameters: 
2023-05-14 00:29:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38382431354621952 [0;39m <==    Updates: 1
2023-05-14 00:29:35.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38382431354621952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-05-14 00:29:37.318 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:29:39.428 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:29:41.032 INFO  com.jiawa.wiki.websocket.WebSocketServer          :32   [32m38379631228882944 [0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šFrwxtxMOhWï¼Œsession idï¼š1dï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2023-05-14 00:29:41.385 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38382458122670080 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:29:41.385 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38382458122670080 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/1 GET
2023-05-14 00:29:41.386 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38382458122670080 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-05-14 00:29:41.386 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38382458122670080 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:29:41.386 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38382458122670080 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:29:41.387 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38382458122670080 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-05-14 00:29:41.387 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38382458122670080 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:29:41.388 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38382458122670080 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-05-14 00:29:41.388 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38382458122670080 [0;39m <==        Row: 1, 1, 0, æ–‡æ¡£1, 1, 183, 7
2023-05-14 00:29:41.389 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38382458122670080 [0;39m <==        Row: 2, 1, 1, æ–‡æ¡£1.1, 1, 9, 2
2023-05-14 00:29:41.389 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38382458122670080 [0;39m <==        Row: 4, 1, 3, æ–‡æ¡£2.1, 1, 6, 1
2023-05-14 00:29:41.389 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38382458139447296 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:29:41.389 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38382458122670080 [0;39m <==        Row: 6, 1, 5, æ–‡æ¡£2.2.1, 1, 5, 1
2023-05-14 00:29:41.389 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38382458139447296 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:29:41.389 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38382458122670080 [0;39m <==        Row: 37841703666847744, 1, 5, æ–‡æ¡£2.2.2, 1, 3, 0
2023-05-14 00:29:41.389 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38382458139447296 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:29:41.390 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38382458122670080 [0;39m <==        Row: 37841746528440320, 1, 37841703666847744, æ–‡æ¡£2.2.2.1, 1, 3, 0
2023-05-14 00:29:41.390 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38382458139447296 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:29:41.390 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38382458139447296 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:29:41.390 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38382458122670080 [0;39m <==        Row: 3, 1, 0, æ–‡æ¡£2, 2, 3, 0
2023-05-14 00:29:41.390 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38382458122670080 [0;39m <==        Row: 5, 1, 3, æ–‡æ¡£2.2, 2, 5, 1
2023-05-14 00:29:41.391 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38382458122670080 [0;39m <==      Total: 8
2023-05-14 00:29:41.392 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38382458122670080 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":1,"id":1,"name":"æ–‡æ¡£1","parent":0,"sort":1,"viewCount":183,"voteCount":7},{"ebookId":1,"id":2,"name":"æ–‡æ¡£1.1","parent":1,"sort":1,"viewCount":9,"voteCount":2},{"ebookId":1,"id":4,"name":"æ–‡æ¡£2.1","parent":3,"sort":1,"viewCount":6,"voteCount":1},{"ebookId":1,"id":6,"name":"æ–‡æ¡£2.2.1","parent":5,"sort":1,"viewCount":5,"voteCount":1},{"ebookId":1,"id":37841703666847744,"name":"æ–‡æ¡£2.2.2","parent":5,"sort":1,"viewCount":3,"voteCount":0},{"ebookId":1,"id":37841746528440320,"name":"æ–‡æ¡£2.2.2.1","parent":37841703666847744,"sort":1,"viewCount":3,"voteCount":0},{"ebookId":1,"id":3,"name":"æ–‡æ¡£2","parent":0,"sort":2,"viewCount":3,"voteCount":0},{"ebookId":1,"id":5,"name":"æ–‡æ¡£2.2","parent":3,"sort":2,"viewCount":5,"voteCount":1}],"success":true}
2023-05-14 00:29:41.392 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38382458122670080 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-05-14 00:29:41.393 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38382458139447296 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:29:41.394 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38382458139447296 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:29:41.395 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38382458139447296 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:29:41.395 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38382458139447296 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:29:41.395 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38382458139447296 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:29:41.395 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38382458139447296 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:29:41.396 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38382458139447296 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:29:41.396 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38382458139447296 [0;39m <==      Total: 4
2023-05-14 00:29:41.396 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38382458139447296 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:29:41.396 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38382458139447296 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-05-14 00:29:41.603 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38382459037028352 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:29:41.607 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38382459037028352 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/1 GET
2023-05-14 00:29:41.608 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38382459037028352 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-05-14 00:29:41.608 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38382459037028352 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:29:41.608 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38382459037028352 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:29:41.609 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38382459037028352 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-05-14 00:29:41.609 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38382459037028352 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:29:41.610 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m38382459037028352 [0;39m <==    Columns: id, content
2023-05-14 00:29:41.610 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m38382459037028352 [0;39m <==        Row: 1, <<BLOB>>
2023-05-14 00:29:41.611 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38382459037028352 [0;39m <==      Total: 1
2023-05-14 00:29:41.611 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38382459037028352 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-05-14 00:29:41.611 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38382459037028352 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:29:41.702 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38382459037028352 [0;39m <==    Updates: 1
2023-05-14 00:29:41.703 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38382459037028352 [0;39m è¿”å›žç»“æžœ: {"content":"<p>Spring Boot makes it easy to create stand-alone, production-grade Spring based Applications that you can \"just run\".</p><p>We take an opinionated view of the Spring platform and third-party libraries so you can get started with minimum fuss. Most Spring Boot applications need minimal Spring configuration.</p><p>If youâ€™re looking for information about a specific version, or instructions about how to upgrade from an earlier release, check out&nbsp;<a href=\"https://github.com/spring-projects/spring-boot/wiki#release-notes\">the project release notes section</a>&nbsp;on our wiki.</p><h2><a href=\"https://spring.io/projects/spring-boot#features\"></a>Features</h2><ul><li><p>Create stand-alone Spring applications</p></li><li><p>Embed Tomcat, Jetty or Undertow directly (no need to deploy WAR files)</p></li><li><p>Provide opinionated 'starter' dependencies to simplify your build configuration</p></li><li><p>Automatically configure Spring and 3rd party libraries whenever possible</p></li><li><p>Provide production-ready features such as metrics, health checks, and externalized configuration</p></li><li><p>Absolutely no code generation and no requirement for XML configuration</p></li></ul><h2><a href=\"https://spring.io/projects/spring-boot#getting-started\"></a>Getting Started</h2><ul><li><p>Super quick â€” try the&nbsp;<a href=\"https://spring.io/quickstart\">Quickstart Guide</a>.</p></li><li><p>More general â€” try&nbsp;<a href=\"https://spring.io/guides/gs/spring-boot/\">Building an Application with Spring Boot</a></p></li><li><p>More specific â€” try&nbsp;<a href=\"https://spring.io/guides/gs/rest-service/\">Building a RESTful Web Service</a>.</p></li><li><p>Or search through all our guides on the&nbsp;<a href=\"https://spring.io/guides\">Guides</a>&nbsp;homepage.</p></li></ul><h2><a href=\"https://spring.io/projects/spring-boot#talks-and-videos\"></a>Talks and videos</h2><ul><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/its-a-kind-of-magic-under-the-covers-of-spring-boot-brian-clozel-st%C3%A9phane-nicoll\">Itâ€™s a Kind of Magic: Under the Covers of Spring Boot</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/whats-new-in-spring-boot-2-0-phillip-webb-madhura-bhave\">Whatâ€™s New in Spring Boot 2.0</a></p></li><li><p><a href=\"https://content.pivotal.io/webinars/mar-13-introducing-spring-boot-2-0-webinar\">Introducing Spring Boot 2.0 webinar</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/test-driven-development-with-spring-boot-sannidhi-jalukar-madhura-bhave\">Test Driven Development with Spring Boot</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/from-zero-to-hero-with-spring-boot-brian-clozel\">From Zero to Hero with Spring Boot 2.0</a></p></li></ul><p>You can also join the&nbsp;<a href=\"https://gitter.im/spring-projects/spring-boot\">Spring Boot community on Gitter</a>!</p>","success":true}
2023-05-14 00:29:41.703 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38382459037028352 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š100 ms -------------
2023-05-14 00:29:43.395 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:29:44.385 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:29:44.535 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38382471334727680 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:29:44.536 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38382471334727680 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:29:44.536 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38382471334727680 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:29:44.537 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38382471334727680 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:29:44.537 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38382471334727680 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:29:44.537 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38382471334727680 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:29:44.538 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38382471334727680 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:29:44.540 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38382471334727680 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:29:44.540 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38382471334727680 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:29:44.540 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38382471334727680 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:29:44.541 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38382471334727680 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:29:44.541 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38382471334727680 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:29:44.541 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38382471334727680 [0;39m <==      Total: 4
2023-05-14 00:29:44.541 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38382471334727680 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:29:44.541 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38382471334727680 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-05-14 00:29:45.447 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38382475159932928 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:29:45.447 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38382475159932928 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:29:45.448 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38382475159932928 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:29:45.448 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38382475159932928 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:29:45.448 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38382475159932928 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:29:45.448 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38382475159932928 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:29:45.449 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38382475159932928 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:29:45.450 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38382475159932928 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:29:45.450 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38382475159932928 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:29:45.450 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38382475159932928 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:29:45.450 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38382475159932928 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:29:45.451 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38382475159932928 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:29:45.451 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38382475159932928 [0;39m <==      Total: 4
2023-05-14 00:29:45.451 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38382475159932928 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:29:45.451 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38382475159932928 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-05-14 00:29:45.791 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:29:47.972 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:30:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38382536258359296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:30:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38382536258359296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:30:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38382536258359296 [0;39m ==> Parameters: 
2023-05-14 00:30:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38382536258359296 [0;39m <==    Updates: 0
2023-05-14 00:30:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38382536258359296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:30:01.880 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:30:04.195 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:30:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38382557196324864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:30:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38382557196324864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:30:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38382557196324864 [0;39m ==> Parameters: 
2023-05-14 00:30:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38382557196324864 [0;39m <==    Updates: 1
2023-05-14 00:30:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38382557196324864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-05-14 00:30:14.334 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:30:17.289 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:30:28.481 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:30:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38382683054804992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:30:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38382683054804992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:30:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38382683054804992 [0;39m ==> Parameters: 
2023-05-14 00:30:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38382683054804992 [0;39m <==    Updates: 1
2023-05-14 00:30:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38382683054804992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:30:44.337 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:30:47.422 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:30:52.568 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:31:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38382787920793600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:31:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38382787920793600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:31:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38382787920793600 [0;39m ==> Parameters: 
2023-05-14 00:31:00.031 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38382787920793600 [0;39m <==    Updates: 0
2023-05-14 00:31:00.031 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38382787920793600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š15æ¯«ç§’
2023-05-14 00:31:02.901 INFO  com.jiawa.wiki.websocket.WebSocketServer          :41   [32m38379594168012800 [0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šFrwxtxMOhWï¼Œsession idï¼š1dï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2023-05-14 00:31:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38382808858759168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:31:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38382808858759168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:31:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38382808858759168 [0;39m ==> Parameters: 
2023-05-14 00:31:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38382808858759168 [0;39m <==    Updates: 1
2023-05-14 00:31:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38382808858759168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-05-14 00:31:14.144 INFO  com.jiawa.wiki.websocket.WebSocketServer          :32   [32m38379594319007744 [0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼štVJvIyv4Z9ï¼Œsession idï¼š1eï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2023-05-14 00:31:14.608 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:31:14.648 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38382849296044032 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:31:14.648 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38382849296044032 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/1 GET
2023-05-14 00:31:14.648 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38382849296044032 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-05-14 00:31:14.648 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38382849296044032 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:31:14.649 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38382849296044032 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:31:14.649 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38382849296044032 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-05-14 00:31:14.650 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38382849296044032 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:31:14.650 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38382849296044032 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-05-14 00:31:14.651 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38382849296044032 [0;39m <==        Row: 1, 1, 0, æ–‡æ¡£1, 1, 184, 7
2023-05-14 00:31:14.651 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38382849296044032 [0;39m <==        Row: 2, 1, 1, æ–‡æ¡£1.1, 1, 9, 2
2023-05-14 00:31:14.651 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38382849296044032 [0;39m <==        Row: 4, 1, 3, æ–‡æ¡£2.1, 1, 6, 1
2023-05-14 00:31:14.651 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38382849308626944 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:31:14.651 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38382849296044032 [0;39m <==        Row: 6, 1, 5, æ–‡æ¡£2.2.1, 1, 5, 1
2023-05-14 00:31:14.651 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38382849308626944 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:31:14.651 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38382849296044032 [0;39m <==        Row: 37841703666847744, 1, 5, æ–‡æ¡£2.2.2, 1, 3, 0
2023-05-14 00:31:14.652 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38382849296044032 [0;39m <==        Row: 37841746528440320, 1, 37841703666847744, æ–‡æ¡£2.2.2.1, 1, 3, 0
2023-05-14 00:31:14.652 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38382849296044032 [0;39m <==        Row: 3, 1, 0, æ–‡æ¡£2, 2, 3, 0
2023-05-14 00:31:14.652 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38382849296044032 [0;39m <==        Row: 5, 1, 3, æ–‡æ¡£2.2, 2, 5, 1
2023-05-14 00:31:14.651 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38382849308626944 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:31:14.652 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38382849296044032 [0;39m <==      Total: 8
2023-05-14 00:31:14.652 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38382849308626944 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:31:14.652 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38382849308626944 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:31:14.653 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38382849296044032 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":1,"id":1,"name":"æ–‡æ¡£1","parent":0,"sort":1,"viewCount":184,"voteCount":7},{"ebookId":1,"id":2,"name":"æ–‡æ¡£1.1","parent":1,"sort":1,"viewCount":9,"voteCount":2},{"ebookId":1,"id":4,"name":"æ–‡æ¡£2.1","parent":3,"sort":1,"viewCount":6,"voteCount":1},{"ebookId":1,"id":6,"name":"æ–‡æ¡£2.2.1","parent":5,"sort":1,"viewCount":5,"voteCount":1},{"ebookId":1,"id":37841703666847744,"name":"æ–‡æ¡£2.2.2","parent":5,"sort":1,"viewCount":3,"voteCount":0},{"ebookId":1,"id":37841746528440320,"name":"æ–‡æ¡£2.2.2.1","parent":37841703666847744,"sort":1,"viewCount":3,"voteCount":0},{"ebookId":1,"id":3,"name":"æ–‡æ¡£2","parent":0,"sort":2,"viewCount":3,"voteCount":0},{"ebookId":1,"id":5,"name":"æ–‡æ¡£2.2","parent":3,"sort":2,"viewCount":5,"voteCount":1}],"success":true}
2023-05-14 00:31:14.653 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38382849296044032 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-05-14 00:31:14.653 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38382849308626944 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:31:14.653 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38382849308626944 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:31:14.655 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38382849308626944 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:31:14.655 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38382849308626944 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:31:14.655 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38382849308626944 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:31:14.656 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38382849308626944 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:31:14.656 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38382849308626944 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:31:14.656 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38382849308626944 [0;39m <==      Total: 4
2023-05-14 00:31:14.656 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38382849308626944 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:31:14.656 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38382849308626944 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-05-14 00:31:15.104 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38382851208646656 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:31:15.104 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38382851208646656 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/1 GET
2023-05-14 00:31:15.105 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38382851208646656 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-05-14 00:31:15.105 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38382851208646656 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:31:15.105 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38382851208646656 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:31:15.105 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38382851208646656 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-05-14 00:31:15.106 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38382851208646656 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:31:15.106 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m38382851208646656 [0;39m <==    Columns: id, content
2023-05-14 00:31:15.107 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m38382851208646656 [0;39m <==        Row: 1, <<BLOB>>
2023-05-14 00:31:15.107 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38382851208646656 [0;39m <==      Total: 1
2023-05-14 00:31:15.107 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38382851208646656 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-05-14 00:31:15.107 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38382851208646656 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:31:15.114 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38382851208646656 [0;39m <==    Updates: 1
2023-05-14 00:31:15.115 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38382851208646656 [0;39m è¿”å›žç»“æžœ: {"content":"<p>Spring Boot makes it easy to create stand-alone, production-grade Spring based Applications that you can \"just run\".</p><p>We take an opinionated view of the Spring platform and third-party libraries so you can get started with minimum fuss. Most Spring Boot applications need minimal Spring configuration.</p><p>If youâ€™re looking for information about a specific version, or instructions about how to upgrade from an earlier release, check out&nbsp;<a href=\"https://github.com/spring-projects/spring-boot/wiki#release-notes\">the project release notes section</a>&nbsp;on our wiki.</p><h2><a href=\"https://spring.io/projects/spring-boot#features\"></a>Features</h2><ul><li><p>Create stand-alone Spring applications</p></li><li><p>Embed Tomcat, Jetty or Undertow directly (no need to deploy WAR files)</p></li><li><p>Provide opinionated 'starter' dependencies to simplify your build configuration</p></li><li><p>Automatically configure Spring and 3rd party libraries whenever possible</p></li><li><p>Provide production-ready features such as metrics, health checks, and externalized configuration</p></li><li><p>Absolutely no code generation and no requirement for XML configuration</p></li></ul><h2><a href=\"https://spring.io/projects/spring-boot#getting-started\"></a>Getting Started</h2><ul><li><p>Super quick â€” try the&nbsp;<a href=\"https://spring.io/quickstart\">Quickstart Guide</a>.</p></li><li><p>More general â€” try&nbsp;<a href=\"https://spring.io/guides/gs/spring-boot/\">Building an Application with Spring Boot</a></p></li><li><p>More specific â€” try&nbsp;<a href=\"https://spring.io/guides/gs/rest-service/\">Building a RESTful Web Service</a>.</p></li><li><p>Or search through all our guides on the&nbsp;<a href=\"https://spring.io/guides\">Guides</a>&nbsp;homepage.</p></li></ul><h2><a href=\"https://spring.io/projects/spring-boot#talks-and-videos\"></a>Talks and videos</h2><ul><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/its-a-kind-of-magic-under-the-covers-of-spring-boot-brian-clozel-st%C3%A9phane-nicoll\">Itâ€™s a Kind of Magic: Under the Covers of Spring Boot</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/whats-new-in-spring-boot-2-0-phillip-webb-madhura-bhave\">Whatâ€™s New in Spring Boot 2.0</a></p></li><li><p><a href=\"https://content.pivotal.io/webinars/mar-13-introducing-spring-boot-2-0-webinar\">Introducing Spring Boot 2.0 webinar</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/test-driven-development-with-spring-boot-sannidhi-jalukar-madhura-bhave\">Test Driven Development with Spring Boot</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/from-zero-to-hero-with-spring-boot-brian-clozel\">From Zero to Hero with Spring Boot 2.0</a></p></li></ul><p>You can also join the&nbsp;<a href=\"https://gitter.im/spring-projects/spring-boot\">Spring Boot community on Gitter</a>!</p>","success":true}
2023-05-14 00:31:15.115 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38382851208646656 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š11 ms -------------
2023-05-14 00:31:18.342 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:31:20.494 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:31:23.258 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38382885409001472 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:31:23.258 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38382885409001472 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:31:23.259 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38382885409001472 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:31:23.259 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38382885409001472 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:31:23.259 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38382885409001472 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:31:23.260 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38382885409001472 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:31:23.260 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38382885409001472 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:31:23.261 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38382885409001472 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:31:23.261 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38382885409001472 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:31:23.261 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38382885409001472 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:31:23.261 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38382885409001472 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:31:23.262 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38382885409001472 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:31:23.262 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38382885409001472 [0;39m <==      Total: 4
2023-05-14 00:31:23.262 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38382885409001472 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:31:23.262 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38382885409001472 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-05-14 00:31:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38382934675296256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:31:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38382934675296256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:31:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38382934675296256 [0;39m ==> Parameters: 
2023-05-14 00:31:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38382934675296256 [0;39m <==    Updates: 1
2023-05-14 00:31:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38382934675296256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-05-14 00:31:44.275 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:31:45.031 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:31:49.106 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:32:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38383039604199424 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:32:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38383039604199424 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:32:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38383039604199424 [0;39m ==> Parameters: 
2023-05-14 00:32:00.137 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38383039604199424 [0;39m <==    Updates: 0
2023-05-14 00:32:00.137 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38383039604199424 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š116æ¯«ç§’
2023-05-14 00:32:04.719 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38383059309039616 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:32:04.719 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38383059309039616 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/1 GET
2023-05-14 00:32:04.719 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38383059309039616 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-05-14 00:32:04.719 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38383059309039616 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:32:04.720 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38383059309039616 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:32:04.720 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38383059309039616 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-05-14 00:32:04.721 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38383059309039616 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:32:04.722 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383059309039616 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-05-14 00:32:04.722 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383059309039616 [0;39m <==        Row: 1, 1, 0, æ–‡æ¡£1, 1, 185, 7
2023-05-14 00:32:04.723 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383059309039616 [0;39m <==        Row: 2, 1, 1, æ–‡æ¡£1.1, 1, 9, 2
2023-05-14 00:32:04.723 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383059309039616 [0;39m <==        Row: 4, 1, 3, æ–‡æ¡£2.1, 1, 6, 1
2023-05-14 00:32:04.723 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383059309039616 [0;39m <==        Row: 6, 1, 5, æ–‡æ¡£2.2.1, 1, 5, 1
2023-05-14 00:32:04.723 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383059309039616 [0;39m <==        Row: 37841703666847744, 1, 5, æ–‡æ¡£2.2.2, 1, 3, 0
2023-05-14 00:32:04.724 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383059309039616 [0;39m <==        Row: 37841746528440320, 1, 37841703666847744, æ–‡æ¡£2.2.2.1, 1, 3, 0
2023-05-14 00:32:04.724 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383059309039616 [0;39m <==        Row: 3, 1, 0, æ–‡æ¡£2, 2, 3, 0
2023-05-14 00:32:04.724 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383059309039616 [0;39m <==        Row: 5, 1, 3, æ–‡æ¡£2.2, 2, 5, 1
2023-05-14 00:32:04.724 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38383059309039616 [0;39m <==      Total: 8
2023-05-14 00:32:04.725 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38383059309039616 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":1,"id":1,"name":"æ–‡æ¡£1","parent":0,"sort":1,"viewCount":185,"voteCount":7},{"ebookId":1,"id":2,"name":"æ–‡æ¡£1.1","parent":1,"sort":1,"viewCount":9,"voteCount":2},{"ebookId":1,"id":4,"name":"æ–‡æ¡£2.1","parent":3,"sort":1,"viewCount":6,"voteCount":1},{"ebookId":1,"id":6,"name":"æ–‡æ¡£2.2.1","parent":5,"sort":1,"viewCount":5,"voteCount":1},{"ebookId":1,"id":37841703666847744,"name":"æ–‡æ¡£2.2.2","parent":5,"sort":1,"viewCount":3,"voteCount":0},{"ebookId":1,"id":37841746528440320,"name":"æ–‡æ¡£2.2.2.1","parent":37841703666847744,"sort":1,"viewCount":3,"voteCount":0},{"ebookId":1,"id":3,"name":"æ–‡æ¡£2","parent":0,"sort":2,"viewCount":3,"voteCount":0},{"ebookId":1,"id":5,"name":"æ–‡æ¡£2.2","parent":3,"sort":2,"viewCount":5,"voteCount":1}],"success":true}
2023-05-14 00:32:04.725 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38383059309039616 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-05-14 00:32:04.768 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38383059514560512 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:32:04.769 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38383059514560512 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:32:04.770 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38383059514560512 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:32:04.770 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38383059514560512 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:32:04.771 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38383059514560512 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:32:04.771 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38383059514560512 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:32:04.771 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38383059514560512 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:32:04.773 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383059514560512 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:32:04.773 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383059514560512 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:32:04.774 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383059514560512 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:32:04.774 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383059514560512 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:32:04.774 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383059514560512 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:32:04.774 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38383059514560512 [0;39m <==      Total: 4
2023-05-14 00:32:04.775 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38383059514560512 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:32:04.775 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38383059514560512 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-05-14 00:32:04.838 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38383059808161792 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:32:04.838 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38383059808161792 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/1 GET
2023-05-14 00:32:04.839 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38383059808161792 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-05-14 00:32:04.839 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38383059808161792 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:32:04.839 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38383059808161792 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:32:04.839 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38383059808161792 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-05-14 00:32:04.839 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38383059808161792 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:32:04.840 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m38383059808161792 [0;39m <==    Columns: id, content
2023-05-14 00:32:04.841 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m38383059808161792 [0;39m <==        Row: 1, <<BLOB>>
2023-05-14 00:32:04.841 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38383059808161792 [0;39m <==      Total: 1
2023-05-14 00:32:04.841 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38383059808161792 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-05-14 00:32:04.841 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38383059808161792 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:32:04.843 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38383059808161792 [0;39m <==    Updates: 1
2023-05-14 00:32:04.843 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38383059808161792 [0;39m è¿”å›žç»“æžœ: {"content":"<p>Spring Boot makes it easy to create stand-alone, production-grade Spring based Applications that you can \"just run\".</p><p>We take an opinionated view of the Spring platform and third-party libraries so you can get started with minimum fuss. Most Spring Boot applications need minimal Spring configuration.</p><p>If youâ€™re looking for information about a specific version, or instructions about how to upgrade from an earlier release, check out&nbsp;<a href=\"https://github.com/spring-projects/spring-boot/wiki#release-notes\">the project release notes section</a>&nbsp;on our wiki.</p><h2><a href=\"https://spring.io/projects/spring-boot#features\"></a>Features</h2><ul><li><p>Create stand-alone Spring applications</p></li><li><p>Embed Tomcat, Jetty or Undertow directly (no need to deploy WAR files)</p></li><li><p>Provide opinionated 'starter' dependencies to simplify your build configuration</p></li><li><p>Automatically configure Spring and 3rd party libraries whenever possible</p></li><li><p>Provide production-ready features such as metrics, health checks, and externalized configuration</p></li><li><p>Absolutely no code generation and no requirement for XML configuration</p></li></ul><h2><a href=\"https://spring.io/projects/spring-boot#getting-started\"></a>Getting Started</h2><ul><li><p>Super quick â€” try the&nbsp;<a href=\"https://spring.io/quickstart\">Quickstart Guide</a>.</p></li><li><p>More general â€” try&nbsp;<a href=\"https://spring.io/guides/gs/spring-boot/\">Building an Application with Spring Boot</a></p></li><li><p>More specific â€” try&nbsp;<a href=\"https://spring.io/guides/gs/rest-service/\">Building a RESTful Web Service</a>.</p></li><li><p>Or search through all our guides on the&nbsp;<a href=\"https://spring.io/guides\">Guides</a>&nbsp;homepage.</p></li></ul><h2><a href=\"https://spring.io/projects/spring-boot#talks-and-videos\"></a>Talks and videos</h2><ul><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/its-a-kind-of-magic-under-the-covers-of-spring-boot-brian-clozel-st%C3%A9phane-nicoll\">Itâ€™s a Kind of Magic: Under the Covers of Spring Boot</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/whats-new-in-spring-boot-2-0-phillip-webb-madhura-bhave\">Whatâ€™s New in Spring Boot 2.0</a></p></li><li><p><a href=\"https://content.pivotal.io/webinars/mar-13-introducing-spring-boot-2-0-webinar\">Introducing Spring Boot 2.0 webinar</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/test-driven-development-with-spring-boot-sannidhi-jalukar-madhura-bhave\">Test Driven Development with Spring Boot</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/from-zero-to-hero-with-spring-boot-brian-clozel\">From Zero to Hero with Spring Boot 2.0</a></p></li></ul><p>You can also join the&nbsp;<a href=\"https://gitter.im/spring-projects/spring-boot\">Spring Boot community on Gitter</a>!</p>","success":true}
2023-05-14 00:32:04.843 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38383059808161792 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-05-14 00:32:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38383060521193472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:32:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38383060521193472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:32:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38383060521193472 [0;39m ==> Parameters: 
2023-05-14 00:32:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38383060521193472 [0;39m <==    Updates: 1
2023-05-14 00:32:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38383060521193472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-05-14 00:32:09.280 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:32:14.274 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:32:15.198 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:32:15.977 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38383106528514048 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:32:15.978 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38383106528514048 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:32:15.978 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38383106528514048 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:32:15.978 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38383106528514048 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:32:15.979 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38383106528514048 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:32:15.979 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38383106528514048 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:32:15.979 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38383106528514048 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:32:15.981 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383106528514048 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:32:15.981 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383106528514048 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:32:15.981 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383106528514048 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:32:15.982 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383106528514048 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:32:15.982 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383106528514048 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:32:15.982 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38383106528514048 [0;39m <==      Total: 4
2023-05-14 00:32:15.982 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38383106528514048 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:32:15.982 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38383106528514048 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-05-14 00:32:17.236 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:32:33.374 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:32:35.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38383186383867904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:32:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38383186383867904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:32:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38383186383867904 [0;39m ==> Parameters: 
2023-05-14 00:32:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38383186383867904 [0;39m <==    Updates: 1
2023-05-14 00:32:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38383186383867904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:32:44.524 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:32:45.617 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38383230847684608 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:32:45.618 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38383230847684608 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/1 GET
2023-05-14 00:32:45.619 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38383230847684608 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-05-14 00:32:45.619 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38383230847684608 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:32:45.619 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38383230847684608 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:32:45.622 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38383230847684608 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-05-14 00:32:45.623 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38383230847684608 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:32:45.625 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383230847684608 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-05-14 00:32:45.625 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383230847684608 [0;39m <==        Row: 1, 1, 0, æ–‡æ¡£1, 1, 186, 7
2023-05-14 00:32:45.626 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383230847684608 [0;39m <==        Row: 2, 1, 1, æ–‡æ¡£1.1, 1, 9, 2
2023-05-14 00:32:45.626 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383230847684608 [0;39m <==        Row: 4, 1, 3, æ–‡æ¡£2.1, 1, 6, 1
2023-05-14 00:32:45.626 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383230847684608 [0;39m <==        Row: 6, 1, 5, æ–‡æ¡£2.2.1, 1, 5, 1
2023-05-14 00:32:45.627 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383230847684608 [0;39m <==        Row: 37841703666847744, 1, 5, æ–‡æ¡£2.2.2, 1, 3, 0
2023-05-14 00:32:45.627 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383230847684608 [0;39m <==        Row: 37841746528440320, 1, 37841703666847744, æ–‡æ¡£2.2.2.1, 1, 3, 0
2023-05-14 00:32:45.627 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383230847684608 [0;39m <==        Row: 3, 1, 0, æ–‡æ¡£2, 2, 3, 0
2023-05-14 00:32:45.627 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383230847684608 [0;39m <==        Row: 5, 1, 3, æ–‡æ¡£2.2, 2, 5, 1
2023-05-14 00:32:45.627 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38383230847684608 [0;39m <==      Total: 8
2023-05-14 00:32:45.631 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38383230847684608 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":1,"id":1,"name":"æ–‡æ¡£1","parent":0,"sort":1,"viewCount":186,"voteCount":7},{"ebookId":1,"id":2,"name":"æ–‡æ¡£1.1","parent":1,"sort":1,"viewCount":9,"voteCount":2},{"ebookId":1,"id":4,"name":"æ–‡æ¡£2.1","parent":3,"sort":1,"viewCount":6,"voteCount":1},{"ebookId":1,"id":6,"name":"æ–‡æ¡£2.2.1","parent":5,"sort":1,"viewCount":5,"voteCount":1},{"ebookId":1,"id":37841703666847744,"name":"æ–‡æ¡£2.2.2","parent":5,"sort":1,"viewCount":3,"voteCount":0},{"ebookId":1,"id":37841746528440320,"name":"æ–‡æ¡£2.2.2.1","parent":37841703666847744,"sort":1,"viewCount":3,"voteCount":0},{"ebookId":1,"id":3,"name":"æ–‡æ¡£2","parent":0,"sort":2,"viewCount":3,"voteCount":0},{"ebookId":1,"id":5,"name":"æ–‡æ¡£2.2","parent":3,"sort":2,"viewCount":5,"voteCount":1}],"success":true}
2023-05-14 00:32:45.631 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38383230847684608 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š14 ms -------------
2023-05-14 00:32:46.041 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38383232626069504 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:32:46.041 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38383232626069504 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:32:46.042 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38383232626069504 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:32:46.042 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38383232626069504 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:32:46.042 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38383232626069504 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:32:46.042 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38383232626069504 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:32:46.043 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38383232626069504 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:32:46.044 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383232626069504 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:32:46.044 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383232626069504 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:32:46.044 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383232626069504 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:32:46.045 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383232626069504 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:32:46.045 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383232626069504 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:32:46.045 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38383232626069504 [0;39m <==      Total: 4
2023-05-14 00:32:46.046 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38383232626069504 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:32:46.046 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38383232626069504 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-05-14 00:32:46.561 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38383234807107584 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:32:46.561 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38383234807107584 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/1 GET
2023-05-14 00:32:46.562 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38383234807107584 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-05-14 00:32:46.562 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38383234807107584 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:32:46.562 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38383234807107584 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:32:46.562 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38383234807107584 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-05-14 00:32:46.563 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38383234807107584 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:32:46.563 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m38383234807107584 [0;39m <==    Columns: id, content
2023-05-14 00:32:46.564 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m38383234807107584 [0;39m <==        Row: 1, <<BLOB>>
2023-05-14 00:32:46.564 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38383234807107584 [0;39m <==      Total: 1
2023-05-14 00:32:46.564 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38383234807107584 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-05-14 00:32:46.565 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38383234807107584 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:32:46.573 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38383234807107584 [0;39m <==    Updates: 1
2023-05-14 00:32:46.573 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38383234807107584 [0;39m è¿”å›žç»“æžœ: {"content":"<p>Spring Boot makes it easy to create stand-alone, production-grade Spring based Applications that you can \"just run\".</p><p>We take an opinionated view of the Spring platform and third-party libraries so you can get started with minimum fuss. Most Spring Boot applications need minimal Spring configuration.</p><p>If youâ€™re looking for information about a specific version, or instructions about how to upgrade from an earlier release, check out&nbsp;<a href=\"https://github.com/spring-projects/spring-boot/wiki#release-notes\">the project release notes section</a>&nbsp;on our wiki.</p><h2><a href=\"https://spring.io/projects/spring-boot#features\"></a>Features</h2><ul><li><p>Create stand-alone Spring applications</p></li><li><p>Embed Tomcat, Jetty or Undertow directly (no need to deploy WAR files)</p></li><li><p>Provide opinionated 'starter' dependencies to simplify your build configuration</p></li><li><p>Automatically configure Spring and 3rd party libraries whenever possible</p></li><li><p>Provide production-ready features such as metrics, health checks, and externalized configuration</p></li><li><p>Absolutely no code generation and no requirement for XML configuration</p></li></ul><h2><a href=\"https://spring.io/projects/spring-boot#getting-started\"></a>Getting Started</h2><ul><li><p>Super quick â€” try the&nbsp;<a href=\"https://spring.io/quickstart\">Quickstart Guide</a>.</p></li><li><p>More general â€” try&nbsp;<a href=\"https://spring.io/guides/gs/spring-boot/\">Building an Application with Spring Boot</a></p></li><li><p>More specific â€” try&nbsp;<a href=\"https://spring.io/guides/gs/rest-service/\">Building a RESTful Web Service</a>.</p></li><li><p>Or search through all our guides on the&nbsp;<a href=\"https://spring.io/guides\">Guides</a>&nbsp;homepage.</p></li></ul><h2><a href=\"https://spring.io/projects/spring-boot#talks-and-videos\"></a>Talks and videos</h2><ul><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/its-a-kind-of-magic-under-the-covers-of-spring-boot-brian-clozel-st%C3%A9phane-nicoll\">Itâ€™s a Kind of Magic: Under the Covers of Spring Boot</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/whats-new-in-spring-boot-2-0-phillip-webb-madhura-bhave\">Whatâ€™s New in Spring Boot 2.0</a></p></li><li><p><a href=\"https://content.pivotal.io/webinars/mar-13-introducing-spring-boot-2-0-webinar\">Introducing Spring Boot 2.0 webinar</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/test-driven-development-with-spring-boot-sannidhi-jalukar-madhura-bhave\">Test Driven Development with Spring Boot</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/from-zero-to-hero-with-spring-boot-brian-clozel\">From Zero to Hero with Spring Boot 2.0</a></p></li></ul><p>You can also join the&nbsp;<a href=\"https://gitter.im/spring-projects/spring-boot\">Spring Boot community on Gitter</a>!</p>","success":true}
2023-05-14 00:32:46.574 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38383234807107584 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š13 ms -------------
2023-05-14 00:32:47.828 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:32:57.427 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:33:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38383291212107776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:33:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38383291212107776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:33:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38383291212107776 [0;39m ==> Parameters: 
2023-05-14 00:33:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38383291212107776 [0;39m <==    Updates: 0
2023-05-14 00:33:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38383291212107776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-05-14 00:33:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38383312154267648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:33:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38383312154267648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:33:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38383312154267648 [0;39m ==> Parameters: 
2023-05-14 00:33:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38383312154267648 [0;39m <==    Updates: 1
2023-05-14 00:33:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38383312154267648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-05-14 00:33:14.268 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:33:15.171 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:33:17.226 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:33:21.513 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:33:29.883 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38383416512745472 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:33:29.884 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38383416512745472 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:33:29.884 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38383416512745472 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:33:29.884 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38383416512745472 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:33:29.885 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38383416512745472 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:33:29.885 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38383416512745472 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:33:29.886 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38383416512745472 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:33:29.887 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383416512745472 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:33:29.887 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383416512745472 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:33:29.888 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383416512745472 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:33:29.888 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383416512745472 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:33:29.888 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383416512745472 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:33:29.889 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38383416512745472 [0;39m <==      Total: 4
2023-05-14 00:33:29.889 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38383416512745472 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:33:29.889 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38383416512745472 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-05-14 00:33:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38383438000164864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:33:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38383438000164864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:33:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38383438000164864 [0;39m ==> Parameters: 
2023-05-14 00:33:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38383438000164864 [0;39m <==    Updates: 1
2023-05-14 00:33:35.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38383438000164864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-14 00:33:39.453 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38383456652234752 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:33:39.454 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38383456652234752 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/1 GET
2023-05-14 00:33:39.455 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38383456652234752 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-05-14 00:33:39.455 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38383456652234752 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:33:39.455 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38383456652234752 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:33:39.456 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38383456652234752 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-05-14 00:33:39.459 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38383456652234752 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:33:39.462 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383456652234752 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-05-14 00:33:39.463 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383456652234752 [0;39m <==        Row: 1, 1, 0, æ–‡æ¡£1, 1, 187, 7
2023-05-14 00:33:39.463 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383456652234752 [0;39m <==        Row: 2, 1, 1, æ–‡æ¡£1.1, 1, 9, 2
2023-05-14 00:33:39.463 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383456652234752 [0;39m <==        Row: 4, 1, 3, æ–‡æ¡£2.1, 1, 6, 1
2023-05-14 00:33:39.463 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383456652234752 [0;39m <==        Row: 6, 1, 5, æ–‡æ¡£2.2.1, 1, 5, 1
2023-05-14 00:33:39.464 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383456652234752 [0;39m <==        Row: 37841703666847744, 1, 5, æ–‡æ¡£2.2.2, 1, 3, 0
2023-05-14 00:33:39.464 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383456652234752 [0;39m <==        Row: 37841746528440320, 1, 37841703666847744, æ–‡æ¡£2.2.2.1, 1, 3, 0
2023-05-14 00:33:39.464 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383456652234752 [0;39m <==        Row: 3, 1, 0, æ–‡æ¡£2, 2, 3, 0
2023-05-14 00:33:39.464 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383456652234752 [0;39m <==        Row: 5, 1, 3, æ–‡æ¡£2.2, 2, 5, 1
2023-05-14 00:33:39.455 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38383456660623360 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:33:39.465 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38383456652234752 [0;39m <==      Total: 8
2023-05-14 00:33:39.465 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38383456652234752 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":1,"id":1,"name":"æ–‡æ¡£1","parent":0,"sort":1,"viewCount":187,"voteCount":7},{"ebookId":1,"id":2,"name":"æ–‡æ¡£1.1","parent":1,"sort":1,"viewCount":9,"voteCount":2},{"ebookId":1,"id":4,"name":"æ–‡æ¡£2.1","parent":3,"sort":1,"viewCount":6,"voteCount":1},{"ebookId":1,"id":6,"name":"æ–‡æ¡£2.2.1","parent":5,"sort":1,"viewCount":5,"voteCount":1},{"ebookId":1,"id":37841703666847744,"name":"æ–‡æ¡£2.2.2","parent":5,"sort":1,"viewCount":3,"voteCount":0},{"ebookId":1,"id":37841746528440320,"name":"æ–‡æ¡£2.2.2.1","parent":37841703666847744,"sort":1,"viewCount":3,"voteCount":0},{"ebookId":1,"id":3,"name":"æ–‡æ¡£2","parent":0,"sort":2,"viewCount":3,"voteCount":0},{"ebookId":1,"id":5,"name":"æ–‡æ¡£2.2","parent":3,"sort":2,"viewCount":5,"voteCount":1}],"success":true}
2023-05-14 00:33:39.465 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38383456652234752 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š12 ms -------------
2023-05-14 00:33:39.465 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38383456660623360 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:33:39.468 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38383456660623360 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:33:39.468 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38383456660623360 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:33:39.469 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38383456660623360 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:33:39.469 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38383456660623360 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:33:39.469 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38383456660623360 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:33:39.470 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383456660623360 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:33:39.470 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383456660623360 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:33:39.471 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383456660623360 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:33:39.471 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383456660623360 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:33:39.471 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383456660623360 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:33:39.471 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38383456660623360 [0;39m <==      Total: 4
2023-05-14 00:33:39.472 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38383456660623360 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:33:39.472 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38383456660623360 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š17 ms -------------
2023-05-14 00:33:39.528 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38383456966807552 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:33:39.529 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38383456966807552 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/1 GET
2023-05-14 00:33:39.529 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38383456966807552 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-05-14 00:33:39.529 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38383456966807552 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:33:39.529 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38383456966807552 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:33:39.530 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38383456966807552 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-05-14 00:33:39.530 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38383456966807552 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:33:39.532 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m38383456966807552 [0;39m <==    Columns: id, content
2023-05-14 00:33:39.533 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m38383456966807552 [0;39m <==        Row: 1, <<BLOB>>
2023-05-14 00:33:39.533 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38383456966807552 [0;39m <==      Total: 1
2023-05-14 00:33:39.534 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38383456966807552 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-05-14 00:33:39.534 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38383456966807552 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:33:39.536 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38383456966807552 [0;39m <==    Updates: 1
2023-05-14 00:33:39.536 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38383456966807552 [0;39m è¿”å›žç»“æžœ: {"content":"<p>Spring Boot makes it easy to create stand-alone, production-grade Spring based Applications that you can \"just run\".</p><p>We take an opinionated view of the Spring platform and third-party libraries so you can get started with minimum fuss. Most Spring Boot applications need minimal Spring configuration.</p><p>If youâ€™re looking for information about a specific version, or instructions about how to upgrade from an earlier release, check out&nbsp;<a href=\"https://github.com/spring-projects/spring-boot/wiki#release-notes\">the project release notes section</a>&nbsp;on our wiki.</p><h2><a href=\"https://spring.io/projects/spring-boot#features\"></a>Features</h2><ul><li><p>Create stand-alone Spring applications</p></li><li><p>Embed Tomcat, Jetty or Undertow directly (no need to deploy WAR files)</p></li><li><p>Provide opinionated 'starter' dependencies to simplify your build configuration</p></li><li><p>Automatically configure Spring and 3rd party libraries whenever possible</p></li><li><p>Provide production-ready features such as metrics, health checks, and externalized configuration</p></li><li><p>Absolutely no code generation and no requirement for XML configuration</p></li></ul><h2><a href=\"https://spring.io/projects/spring-boot#getting-started\"></a>Getting Started</h2><ul><li><p>Super quick â€” try the&nbsp;<a href=\"https://spring.io/quickstart\">Quickstart Guide</a>.</p></li><li><p>More general â€” try&nbsp;<a href=\"https://spring.io/guides/gs/spring-boot/\">Building an Application with Spring Boot</a></p></li><li><p>More specific â€” try&nbsp;<a href=\"https://spring.io/guides/gs/rest-service/\">Building a RESTful Web Service</a>.</p></li><li><p>Or search through all our guides on the&nbsp;<a href=\"https://spring.io/guides\">Guides</a>&nbsp;homepage.</p></li></ul><h2><a href=\"https://spring.io/projects/spring-boot#talks-and-videos\"></a>Talks and videos</h2><ul><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/its-a-kind-of-magic-under-the-covers-of-spring-boot-brian-clozel-st%C3%A9phane-nicoll\">Itâ€™s a Kind of Magic: Under the Covers of Spring Boot</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/whats-new-in-spring-boot-2-0-phillip-webb-madhura-bhave\">Whatâ€™s New in Spring Boot 2.0</a></p></li><li><p><a href=\"https://content.pivotal.io/webinars/mar-13-introducing-spring-boot-2-0-webinar\">Introducing Spring Boot 2.0 webinar</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/test-driven-development-with-spring-boot-sannidhi-jalukar-madhura-bhave\">Test Driven Development with Spring Boot</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/from-zero-to-hero-with-spring-boot-brian-clozel\">From Zero to Hero with Spring Boot 2.0</a></p></li></ul><p>You can also join the&nbsp;<a href=\"https://gitter.im/spring-projects/spring-boot\">Spring Boot community on Gitter</a>!</p>","success":true}
2023-05-14 00:33:39.537 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38383456966807552 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2023-05-14 00:33:42.333 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38383468731830272 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:33:42.333 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38383468731830272 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:33:42.333 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38383468731830272 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:33:42.334 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38383468731830272 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:33:42.334 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38383468731830272 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:33:42.335 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38383468731830272 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:33:42.335 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38383468731830272 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:33:42.336 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383468731830272 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:33:42.336 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383468731830272 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:33:42.336 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383468731830272 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:33:42.336 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383468731830272 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:33:42.337 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383468731830272 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:33:42.337 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38383468731830272 [0;39m <==      Total: 4
2023-05-14 00:33:42.337 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38383468731830272 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:33:42.337 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38383468731830272 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-05-14 00:33:44.719 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:33:49.978 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:34:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38383542874542080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:34:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38383542874542080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:34:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38383542874542080 [0;39m ==> Parameters: 
2023-05-14 00:34:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38383542874542080 [0;39m <==    Updates: 0
2023-05-14 00:34:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38383542874542080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-05-14 00:34:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38383563867033600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:34:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38383563867033600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:34:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38383563867033600 [0;39m ==> Parameters: 
2023-05-14 00:34:05.048 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38383563867033600 [0;39m <==    Updates: 1
2023-05-14 00:34:05.048 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38383563867033600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š33æ¯«ç§’
2023-05-14 00:34:14.253 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:34:18.285 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:34:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38383689650016256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:34:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38383689650016256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:34:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38383689650016256 [0;39m ==> Parameters: 
2023-05-14 00:34:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38383689650016256 [0;39m <==    Updates: 1
2023-05-14 00:34:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38383689650016256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-05-14 00:34:35.940 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:34:44.245 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:34:47.752 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38383743119003648 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:34:47.753 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38383743119003648 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/1 GET
2023-05-14 00:34:47.753 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38383743119003648 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-05-14 00:34:47.753 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38383743119003648 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:34:47.754 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38383743119003648 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:34:47.754 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38383743119003648 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-05-14 00:34:47.757 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38383743119003648 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:34:47.759 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383743119003648 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-05-14 00:34:47.764 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383743119003648 [0;39m <==        Row: 1, 1, 0, æ–‡æ¡£1, 1, 188, 7
2023-05-14 00:34:47.766 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383743119003648 [0;39m <==        Row: 2, 1, 1, æ–‡æ¡£1.1, 1, 9, 2
2023-05-14 00:34:47.767 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383743119003648 [0;39m <==        Row: 4, 1, 3, æ–‡æ¡£2.1, 1, 6, 1
2023-05-14 00:34:47.767 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38383743181918208 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:34:47.767 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383743119003648 [0;39m <==        Row: 6, 1, 5, æ–‡æ¡£2.2.1, 1, 5, 1
2023-05-14 00:34:47.767 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38383743181918208 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:34:47.767 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38383743181918208 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:34:47.767 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383743119003648 [0;39m <==        Row: 37841703666847744, 1, 5, æ–‡æ¡£2.2.2, 1, 3, 0
2023-05-14 00:34:47.767 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38383743181918208 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:34:47.767 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383743119003648 [0;39m <==        Row: 37841746528440320, 1, 37841703666847744, æ–‡æ¡£2.2.2.1, 1, 3, 0
2023-05-14 00:34:47.768 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383743119003648 [0;39m <==        Row: 3, 1, 0, æ–‡æ¡£2, 2, 3, 0
2023-05-14 00:34:47.768 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38383743119003648 [0;39m <==        Row: 5, 1, 3, æ–‡æ¡£2.2, 2, 5, 1
2023-05-14 00:34:47.768 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38383743119003648 [0;39m <==      Total: 8
2023-05-14 00:34:47.768 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38383743119003648 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":1,"id":1,"name":"æ–‡æ¡£1","parent":0,"sort":1,"viewCount":188,"voteCount":7},{"ebookId":1,"id":2,"name":"æ–‡æ¡£1.1","parent":1,"sort":1,"viewCount":9,"voteCount":2},{"ebookId":1,"id":4,"name":"æ–‡æ¡£2.1","parent":3,"sort":1,"viewCount":6,"voteCount":1},{"ebookId":1,"id":6,"name":"æ–‡æ¡£2.2.1","parent":5,"sort":1,"viewCount":5,"voteCount":1},{"ebookId":1,"id":37841703666847744,"name":"æ–‡æ¡£2.2.2","parent":5,"sort":1,"viewCount":3,"voteCount":0},{"ebookId":1,"id":37841746528440320,"name":"æ–‡æ¡£2.2.2.1","parent":37841703666847744,"sort":1,"viewCount":3,"voteCount":0},{"ebookId":1,"id":3,"name":"æ–‡æ¡£2","parent":0,"sort":2,"viewCount":3,"voteCount":0},{"ebookId":1,"id":5,"name":"æ–‡æ¡£2.2","parent":3,"sort":2,"viewCount":5,"voteCount":1}],"success":true}
2023-05-14 00:34:47.770 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38383743119003648 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š18 ms -------------
2023-05-14 00:34:47.815 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38383743181918208 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:34:47.815 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38383743181918208 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:34:47.816 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38383743181918208 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:34:47.817 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383743181918208 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:34:47.817 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383743181918208 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:34:47.818 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383743181918208 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:34:47.818 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383743181918208 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:34:47.818 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383743181918208 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:34:47.819 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38383743181918208 [0;39m <==      Total: 4
2023-05-14 00:34:47.819 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38383743181918208 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:34:47.819 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38383743181918208 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š52 ms -------------
2023-05-14 00:34:47.842 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:34:47.878 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38383743647485952 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:34:47.879 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38383743647485952 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/1 GET
2023-05-14 00:34:47.880 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38383743647485952 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-05-14 00:34:47.880 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38383743647485952 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:34:47.880 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38383743647485952 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:34:47.880 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38383743647485952 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-05-14 00:34:47.881 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38383743647485952 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:34:47.882 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m38383743647485952 [0;39m <==    Columns: id, content
2023-05-14 00:34:47.882 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m38383743647485952 [0;39m <==        Row: 1, <<BLOB>>
2023-05-14 00:34:47.882 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38383743647485952 [0;39m <==      Total: 1
2023-05-14 00:34:47.882 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38383743647485952 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-05-14 00:34:47.883 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38383743647485952 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:34:47.892 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38383743647485952 [0;39m <==    Updates: 1
2023-05-14 00:34:47.892 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38383743647485952 [0;39m è¿”å›žç»“æžœ: {"content":"<p>Spring Boot makes it easy to create stand-alone, production-grade Spring based Applications that you can \"just run\".</p><p>We take an opinionated view of the Spring platform and third-party libraries so you can get started with minimum fuss. Most Spring Boot applications need minimal Spring configuration.</p><p>If youâ€™re looking for information about a specific version, or instructions about how to upgrade from an earlier release, check out&nbsp;<a href=\"https://github.com/spring-projects/spring-boot/wiki#release-notes\">the project release notes section</a>&nbsp;on our wiki.</p><h2><a href=\"https://spring.io/projects/spring-boot#features\"></a>Features</h2><ul><li><p>Create stand-alone Spring applications</p></li><li><p>Embed Tomcat, Jetty or Undertow directly (no need to deploy WAR files)</p></li><li><p>Provide opinionated 'starter' dependencies to simplify your build configuration</p></li><li><p>Automatically configure Spring and 3rd party libraries whenever possible</p></li><li><p>Provide production-ready features such as metrics, health checks, and externalized configuration</p></li><li><p>Absolutely no code generation and no requirement for XML configuration</p></li></ul><h2><a href=\"https://spring.io/projects/spring-boot#getting-started\"></a>Getting Started</h2><ul><li><p>Super quick â€” try the&nbsp;<a href=\"https://spring.io/quickstart\">Quickstart Guide</a>.</p></li><li><p>More general â€” try&nbsp;<a href=\"https://spring.io/guides/gs/spring-boot/\">Building an Application with Spring Boot</a></p></li><li><p>More specific â€” try&nbsp;<a href=\"https://spring.io/guides/gs/rest-service/\">Building a RESTful Web Service</a>.</p></li><li><p>Or search through all our guides on the&nbsp;<a href=\"https://spring.io/guides\">Guides</a>&nbsp;homepage.</p></li></ul><h2><a href=\"https://spring.io/projects/spring-boot#talks-and-videos\"></a>Talks and videos</h2><ul><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/its-a-kind-of-magic-under-the-covers-of-spring-boot-brian-clozel-st%C3%A9phane-nicoll\">Itâ€™s a Kind of Magic: Under the Covers of Spring Boot</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/whats-new-in-spring-boot-2-0-phillip-webb-madhura-bhave\">Whatâ€™s New in Spring Boot 2.0</a></p></li><li><p><a href=\"https://content.pivotal.io/webinars/mar-13-introducing-spring-boot-2-0-webinar\">Introducing Spring Boot 2.0 webinar</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/test-driven-development-with-spring-boot-sannidhi-jalukar-madhura-bhave\">Test Driven Development with Spring Boot</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/from-zero-to-hero-with-spring-boot-brian-clozel\">From Zero to Hero with Spring Boot 2.0</a></p></li></ul><p>You can also join the&nbsp;<a href=\"https://gitter.im/spring-projects/spring-boot\">Spring Boot community on Gitter</a>!</p>","success":true}
2023-05-14 00:34:47.893 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38383743647485952 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š15 ms -------------
2023-05-14 00:34:49.947 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38383752325500928 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:34:49.948 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38383752325500928 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:34:49.948 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38383752325500928 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:34:49.948 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38383752325500928 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:34:49.949 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38383752325500928 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:34:49.949 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38383752325500928 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:34:49.949 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38383752325500928 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:34:49.950 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383752325500928 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:34:49.950 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383752325500928 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:34:49.950 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383752325500928 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:34:49.951 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383752325500928 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:34:49.951 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383752325500928 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:34:49.951 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38383752325500928 [0;39m <==      Total: 4
2023-05-14 00:34:49.952 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38383752325500928 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:34:49.952 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38383752325500928 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-05-14 00:34:50.594 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38383755039215616 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:34:50.594 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38383755039215616 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:34:50.594 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38383755039215616 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:34:50.595 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38383755039215616 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:34:50.595 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38383755039215616 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:34:50.595 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38383755039215616 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:34:50.596 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38383755039215616 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:34:50.596 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383755039215616 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:34:50.597 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383755039215616 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:34:50.597 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383755039215616 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:34:50.597 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383755039215616 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:34:50.597 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38383755039215616 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:34:50.597 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38383755039215616 [0;39m <==      Total: 4
2023-05-14 00:34:50.598 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38383755039215616 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:34:50.598 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38383755039215616 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-05-14 00:35:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38383794541170688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:35:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38383794541170688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:35:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38383794541170688 [0;39m ==> Parameters: 
2023-05-14 00:35:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38383794541170688 [0;39m <==    Updates: 0
2023-05-14 00:35:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38383794541170688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-05-14 00:35:00.117 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:35:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38383815487524864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:35:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38383815487524864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:35:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38383815487524864 [0;39m ==> Parameters: 
2023-05-14 00:35:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38383815487524864 [0;39m <==    Updates: 1
2023-05-14 00:35:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38383815487524864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š17æ¯«ç§’
2023-05-14 00:35:14.245 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:35:17.190 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:35:24.153 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:35:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38383941308256256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:35:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38383941308256256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:35:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38383941308256256 [0;39m ==> Parameters: 
2023-05-14 00:35:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38383941308256256 [0;39m <==    Updates: 1
2023-05-14 00:35:35.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38383941308256256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:35:44.260 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:35:49.247 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:36:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38384046186827776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:36:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38384046186827776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:36:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38384046186827776 [0;39m ==> Parameters: 
2023-05-14 00:36:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38384046186827776 [0;39m <==    Updates: 0
2023-05-14 00:36:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38384046186827776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-05-14 00:36:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38384067133181952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:36:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38384067133181952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:36:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38384067133181952 [0;39m ==> Parameters: 
2023-05-14 00:36:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38384067133181952 [0;39m <==    Updates: 1
2023-05-14 00:36:05.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38384067133181952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-14 00:36:14.245 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:36:18.027 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:36:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38384192970690560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:36:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38384192970690560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:36:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38384192970690560 [0;39m ==> Parameters: 
2023-05-14 00:36:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38384192970690560 [0;39m <==    Updates: 1
2023-05-14 00:36:35.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38384192970690560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:36:38.355 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:36:44.435 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:36:47.626 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:37:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38384297840873472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:37:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38384297840873472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:37:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38384297840873472 [0;39m ==> Parameters: 
2023-05-14 00:37:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38384297840873472 [0;39m <==    Updates: 0
2023-05-14 00:37:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38384297840873472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:37:02.403 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:37:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38384318837559296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:37:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38384318837559296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:37:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38384318837559296 [0;39m ==> Parameters: 
2023-05-14 00:37:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38384318837559296 [0;39m <==    Updates: 1
2023-05-14 00:37:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38384318837559296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-05-14 00:37:14.274 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:37:17.162 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:37:26.864 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:37:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38384444633124864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:37:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38384444633124864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:37:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38384444633124864 [0;39m ==> Parameters: 
2023-05-14 00:37:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38384444633124864 [0;39m <==    Updates: 1
2023-05-14 00:37:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38384444633124864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:37:44.303 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:37:51.269 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:38:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38384549482336256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:38:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38384549482336256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:38:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38384549482336256 [0;39m ==> Parameters: 
2023-05-14 00:38:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38384549482336256 [0;39m <==    Updates: 0
2023-05-14 00:38:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38384549482336256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:38:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38384570479022080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:38:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38384570479022080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:38:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38384570479022080 [0;39m ==> Parameters: 
2023-05-14 00:38:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38384570479022080 [0;39m <==    Updates: 1
2023-05-14 00:38:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38384570479022080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:38:14.285 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:38:17.185 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:38:19.240 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:38:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38384696278781952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:38:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38384696278781952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:38:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38384696278781952 [0;39m ==> Parameters: 
2023-05-14 00:38:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38384696278781952 [0;39m <==    Updates: 1
2023-05-14 00:38:35.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38384696278781952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:38:44.253 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:38:47.445 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:39:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38384801132187648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:39:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38384801132187648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:39:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38384801132187648 [0;39m ==> Parameters: 
2023-05-14 00:39:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38384801132187648 [0;39m <==    Updates: 0
2023-05-14 00:39:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38384801132187648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:39:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38384822158233600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:39:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38384822158233600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:39:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38384822158233600 [0;39m ==> Parameters: 
2023-05-14 00:39:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38384822158233600 [0;39m <==    Updates: 1
2023-05-14 00:39:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38384822158233600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:39:08.370 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:39:14.286 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:39:17.203 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:39:32.474 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:39:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38384947957993472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:39:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38384947957993472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:39:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38384947957993472 [0;39m ==> Parameters: 
2023-05-14 00:39:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38384947957993472 [0;39m <==    Updates: 1
2023-05-14 00:39:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38384947957993472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:39:44.281 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:39:47.209 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:39:56.573 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:40:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38385052786233344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:40:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38385052786233344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:40:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38385052786233344 [0;39m ==> Parameters: 
2023-05-14 00:40:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38385052786233344 [0;39m <==    Updates: 0
2023-05-14 00:40:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38385052786233344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:40:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38385073791307776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:40:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38385073791307776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:40:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38385073791307776 [0;39m ==> Parameters: 
2023-05-14 00:40:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38385073791307776 [0;39m <==    Updates: 1
2023-05-14 00:40:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38385073791307776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:40:14.329 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:40:21.237 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:40:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38385199628816384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:40:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38385199628816384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:40:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38385199628816384 [0;39m ==> Parameters: 
2023-05-14 00:40:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38385199628816384 [0;39m <==    Updates: 1
2023-05-14 00:40:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38385199628816384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:40:44.265 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:40:47.499 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:41:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38385304469639168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:41:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38385304469639168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:41:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38385304469639168 [0;39m ==> Parameters: 
2023-05-14 00:41:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38385304469639168 [0;39m <==    Updates: 0
2023-05-14 00:41:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38385304469639168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:41:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38385325420187648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:41:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38385325420187648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:41:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38385325420187648 [0;39m ==> Parameters: 
2023-05-14 00:41:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38385325420187648 [0;39m <==    Updates: 1
2023-05-14 00:41:05.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38385325420187648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:41:14.543 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:41:18.195 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:41:35.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38385451308027904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:41:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38385451308027904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:41:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38385451308027904 [0;39m ==> Parameters: 
2023-05-14 00:41:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38385451308027904 [0;39m <==    Updates: 1
2023-05-14 00:41:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38385451308027904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:41:35.722 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:41:44.282 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:41:47.161 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:42:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38385556153044992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:42:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38385556153044992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:42:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38385556153044992 [0;39m ==> Parameters: 
2023-05-14 00:42:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38385556153044992 [0;39m <==    Updates: 0
2023-05-14 00:42:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38385556153044992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:42:00.371 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:42:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38385577111982080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:42:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38385577111982080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:42:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38385577111982080 [0;39m ==> Parameters: 
2023-05-14 00:42:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38385577111982080 [0;39m <==    Updates: 1
2023-05-14 00:42:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38385577111982080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:42:14.274 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:42:17.406 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:42:24.448 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:42:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38385702936907776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:42:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38385702936907776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:42:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38385702936907776 [0;39m ==> Parameters: 
2023-05-14 00:42:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38385702936907776 [0;39m <==    Updates: 1
2023-05-14 00:42:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38385702936907776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:42:44.345 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:42:50.226 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:43:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38385807807090688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:43:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38385807807090688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:43:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38385807807090688 [0;39m ==> Parameters: 
2023-05-14 00:43:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38385807807090688 [0;39m <==    Updates: 0
2023-05-14 00:43:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38385807807090688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-05-14 00:43:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38385828740861952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:43:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38385828740861952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:43:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38385828740861952 [0;39m ==> Parameters: 
2023-05-14 00:43:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38385828740861952 [0;39m <==    Updates: 1
2023-05-14 00:43:05.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38385828740861952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-14 00:43:14.559 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:43:20.129 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:43:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38385954595147776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:43:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38385954595147776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:43:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38385954595147776 [0;39m ==> Parameters: 
2023-05-14 00:43:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38385954595147776 [0;39m <==    Updates: 1
2023-05-14 00:43:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38385954595147776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-14 00:43:39.953 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:43:44.261 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:43:47.794 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:44:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38386059473719296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:44:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38386059473719296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:44:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38386059473719296 [0;39m ==> Parameters: 
2023-05-14 00:44:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38386059473719296 [0;39m <==    Updates: 0
2023-05-14 00:44:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38386059473719296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:44:04.306 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:44:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38386080428462080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:44:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38386080428462080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:44:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38386080428462080 [0;39m ==> Parameters: 
2023-05-14 00:44:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38386080428462080 [0;39m <==    Updates: 1
2023-05-14 00:44:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38386080428462080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:44:14.287 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:44:17.227 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:44:28.394 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:44:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38386206244999168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:44:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38386206244999168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:44:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38386206244999168 [0;39m ==> Parameters: 
2023-05-14 00:44:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38386206244999168 [0;39m <==    Updates: 1
2023-05-14 00:44:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38386206244999168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:44:44.264 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:44:47.224 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:44:52.502 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:45:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38386311102599168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:45:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38386311102599168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:45:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38386311102599168 [0;39m ==> Parameters: 
2023-05-14 00:45:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38386311102599168 [0;39m <==    Updates: 0
2023-05-14 00:45:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38386311102599168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:45:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38386332078313472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:45:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38386332078313472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:45:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38386332078313472 [0;39m ==> Parameters: 
2023-05-14 00:45:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38386332078313472 [0;39m <==    Updates: 1
2023-05-14 00:45:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38386332078313472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-14 00:45:14.539 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:45:19.915 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:45:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38386457924210688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:45:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38386457924210688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:45:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38386457924210688 [0;39m ==> Parameters: 
2023-05-14 00:45:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38386457924210688 [0;39m <==    Updates: 1
2023-05-14 00:45:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38386457924210688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:45:44.291 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:45:48.319 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:46:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38386562756644864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:46:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38386562756644864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:46:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38386562756644864 [0;39m ==> Parameters: 
2023-05-14 00:46:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38386562756644864 [0;39m <==    Updates: 0
2023-05-14 00:46:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38386562756644864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:46:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38386583740747776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:46:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38386583740747776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:46:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38386583740747776 [0;39m ==> Parameters: 
2023-05-14 00:46:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38386583740747776 [0;39m <==    Updates: 1
2023-05-14 00:46:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38386583740747776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-14 00:46:09.445 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:46:14.586 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:46:17.402 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:46:33.878 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:46:35.031 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38386709662142464 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:46:35.032 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38386709662142464 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:46:35.032 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38386709662142464 [0;39m ==> Parameters: 
2023-05-14 00:46:35.033 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38386709662142464 [0;39m <==    Updates: 1
2023-05-14 00:46:35.033 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38386709662142464 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-14 00:46:44.587 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:46:48.128 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:46:55.319 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38386794756182016 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:46:55.320 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38386794756182016 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:46:55.320 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38386794756182016 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:46:55.320 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38386794756182016 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:46:55.321 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38386794756182016 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:46:55.322 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38386794756182016 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:46:55.322 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38386794756182016 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:46:55.324 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38386794756182016 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:46:55.324 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38386794756182016 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:46:55.324 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38386794756182016 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:46:55.325 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38386794756182016 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:46:55.325 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38386794756182016 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:46:55.325 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38386794756182016 [0;39m <==      Total: 4
2023-05-14 00:46:55.325 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38386794756182016 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:46:55.325 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38386794756182016 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-05-14 00:46:56.000 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38386797612503040 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:46:56.001 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38386797612503040 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:46:56.001 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38386797612503040 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:46:56.002 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38386797612503040 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:46:56.002 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38386797612503040 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:46:56.003 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38386797612503040 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:46:56.003 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38386797612503040 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:46:56.004 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38386797612503040 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:46:56.004 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38386797612503040 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:46:56.004 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38386797612503040 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:46:56.005 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38386797612503040 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:46:56.005 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38386797612503040 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:46:56.005 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38386797612503040 [0;39m <==      Total: 4
2023-05-14 00:46:56.005 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38386797612503040 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:46:56.005 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38386797612503040 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-05-14 00:46:56.143 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38386798212288512 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:46:56.143 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38386798212288512 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:46:56.144 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38386798212288512 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:46:56.144 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38386798212288512 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:46:56.144 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38386798212288512 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:46:56.145 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38386798212288512 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:46:56.145 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38386798212288512 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:46:56.146 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38386798212288512 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:46:56.146 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38386798212288512 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:46:56.146 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38386798212288512 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:46:56.147 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38386798212288512 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:46:56.147 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38386798212288512 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:46:56.147 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38386798212288512 [0;39m <==      Total: 4
2023-05-14 00:46:56.148 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38386798212288512 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:46:56.148 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38386798212288512 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-05-14 00:46:58.046 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:47:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38386814402301952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:47:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38386814402301952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:47:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38386814402301952 [0;39m ==> Parameters: 
2023-05-14 00:47:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38386814402301952 [0;39m <==    Updates: 0
2023-05-14 00:47:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38386814402301952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-05-14 00:47:03.748 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38386830109970432 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:47:03.748 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38386830109970432 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:47:03.748 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38386830109970432 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:47:03.749 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38386830109970432 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:47:03.749 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38386830109970432 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:47:03.750 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38386830109970432 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:47:03.750 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38386830109970432 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:47:03.751 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38386830109970432 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:47:03.751 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38386830109970432 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:47:03.751 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38386830109970432 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:47:03.752 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38386830109970432 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:47:03.752 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38386830109970432 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:47:03.752 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38386830109970432 [0;39m <==      Total: 4
2023-05-14 00:47:03.752 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38386830109970432 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:47:03.753 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38386830109970432 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-05-14 00:47:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38386835386404864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:47:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38386835386404864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:47:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38386835386404864 [0;39m ==> Parameters: 
2023-05-14 00:47:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38386835386404864 [0;39m <==    Updates: 1
2023-05-14 00:47:05.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38386835386404864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:47:14.270 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:47:17.176 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:47:22.301 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:47:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38386961232302080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:47:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38386961232302080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:47:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38386961232302080 [0;39m ==> Parameters: 
2023-05-14 00:47:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38386961232302080 [0;39m <==    Updates: 1
2023-05-14 00:47:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38386961232302080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:47:44.246 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:47:45.122 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:47:49.188 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:48:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38387066102484992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:48:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38387066102484992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:48:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38387066102484992 [0;39m ==> Parameters: 
2023-05-14 00:48:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38387066102484992 [0;39m <==    Updates: 0
2023-05-14 00:48:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38387066102484992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:48:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38387087053033472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:48:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38387087053033472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:48:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38387087053033472 [0;39m ==> Parameters: 
2023-05-14 00:48:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38387087053033472 [0;39m <==    Updates: 1
2023-05-14 00:48:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38387087053033472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:48:14.270 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:48:17.379 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:48:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38387212903124992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:48:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38387212903124992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:48:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38387212903124992 [0;39m ==> Parameters: 
2023-05-14 00:48:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38387212903124992 [0;39m <==    Updates: 1
2023-05-14 00:48:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38387212903124992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:48:38.346 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:48:44.273 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:48:47.194 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:49:00.000 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38387317706199040 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:49:00.001 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38387317706199040 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:49:00.001 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38387317706199040 [0;39m ==> Parameters: 
2023-05-14 00:49:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38387317706199040 [0;39m <==    Updates: 0
2023-05-14 00:49:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38387317706199040 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:49:02.419 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:49:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38387338711273472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:49:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38387338711273472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:49:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38387338711273472 [0;39m ==> Parameters: 
2023-05-14 00:49:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38387338711273472 [0;39m <==    Updates: 1
2023-05-14 00:49:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38387338711273472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:49:14.273 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:49:17.201 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:49:24.456 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:49:26.506 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:49:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38387464565559296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:49:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38387464565559296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:49:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38387464565559296 [0;39m ==> Parameters: 
2023-05-14 00:49:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38387464565559296 [0;39m <==    Updates: 1
2023-05-14 00:49:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38387464565559296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:49:39.966 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38387485335752704 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:49:39.967 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38387485335752704 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:49:39.967 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38387485335752704 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:49:39.967 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38387485335752704 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:49:39.969 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38387485335752704 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:49:39.970 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38387485335752704 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:49:39.971 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38387485335752704 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:49:39.972 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38387485335752704 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:49:39.972 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38387485335752704 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:49:39.974 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38387485335752704 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:49:39.974 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38387485335752704 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:49:39.974 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38387485335752704 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:49:39.976 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38387485335752704 [0;39m <==      Total: 4
2023-05-14 00:49:39.976 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38387485335752704 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:49:39.976 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38387485335752704 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š10 ms -------------
2023-05-14 00:49:41.119 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38387490171785216 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:49:41.119 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38387490171785216 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:49:41.120 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38387490171785216 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:49:41.120 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38387490171785216 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:49:41.120 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38387490171785216 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:49:41.122 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38387490171785216 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:49:41.122 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38387490171785216 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:49:41.123 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38387490171785216 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:49:41.123 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38387490171785216 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:49:41.123 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38387490171785216 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:49:41.124 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38387490171785216 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:49:41.124 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38387490171785216 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:49:41.124 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38387490171785216 [0;39m <==      Total: 4
2023-05-14 00:49:41.125 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38387490171785216 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:49:41.125 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38387490171785216 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-05-14 00:49:41.499 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38387491765620736 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:49:41.500 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38387491765620736 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:49:41.500 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38387491765620736 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:49:41.500 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38387491765620736 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:49:41.500 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38387491765620736 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:49:41.501 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38387491765620736 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:49:41.501 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38387491765620736 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:49:41.502 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38387491765620736 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:49:41.503 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38387491765620736 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:49:41.503 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38387491765620736 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:49:41.504 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38387491765620736 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:49:41.504 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38387491765620736 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:49:41.504 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38387491765620736 [0;39m <==      Total: 4
2023-05-14 00:49:41.505 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38387491765620736 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:49:41.505 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38387491765620736 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-05-14 00:49:44.271 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:49:47.188 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:49:49.235 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:49:51.266 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:50:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38387569377021952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:50:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38387569377021952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:50:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38387569377021952 [0;39m ==> Parameters: 
2023-05-14 00:50:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38387569377021952 [0;39m <==    Updates: 0
2023-05-14 00:50:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38387569377021952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-05-14 00:50:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38387590344347648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:50:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38387590344347648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:50:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38387590344347648 [0;39m ==> Parameters: 
2023-05-14 00:50:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38387590344347648 [0;39m <==    Updates: 1
2023-05-14 00:50:05.004 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38387590344347648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:50:14.270 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:50:15.134 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:50:17.193 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:50:19.234 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:50:35.017 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38387716236382208 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:50:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38387716236382208 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:50:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38387716236382208 [0;39m ==> Parameters: 
2023-05-14 00:50:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38387716236382208 [0;39m <==    Updates: 1
2023-05-14 00:50:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38387716236382208 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-14 00:50:43.400 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:50:44.261 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:50:47.721 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:50:49.752 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:51:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38387821035261952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:51:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38387821035261952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:51:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38387821035261952 [0;39m ==> Parameters: 
2023-05-14 00:51:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38387821035261952 [0;39m <==    Updates: 0
2023-05-14 00:51:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38387821035261952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:51:05.026 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38387842090668032 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:51:05.027 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38387842090668032 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:51:05.027 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38387842090668032 [0;39m ==> Parameters: 
2023-05-14 00:51:05.029 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38387842090668032 [0;39m <==    Updates: 1
2023-05-14 00:51:05.029 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38387842090668032 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:51:05.639 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:51:07.820 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:51:12.931 INFO  com.jiawa.wiki.websocket.WebSocketServer          :41   [32m38383456966807552 [0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼štVJvIyv4Z9ï¼Œsession idï¼š1eï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2023-05-14 00:51:13.138 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:51:14.273 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:51:17.259 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:51:17.848 INFO  com.jiawa.wiki.websocket.WebSocketServer          :32   [32m38386794756182016 [0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šQs8hqESWIAï¼Œsession idï¼š1fï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2023-05-14 00:51:18.210 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38387897400954880 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:51:18.211 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38387897400954880 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/1 GET
2023-05-14 00:51:18.211 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38387897400954880 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-05-14 00:51:18.211 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38387897400954880 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:51:18.211 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38387897400954880 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:51:18.217 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38387897400954880 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-05-14 00:51:18.218 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38387897400954880 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:51:18.219 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38387897438703616 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:51:18.219 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38387897438703616 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:51:18.219 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38387897438703616 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:51:18.219 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38387897438703616 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:51:18.219 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38387897438703616 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:51:18.219 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38387897400954880 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-05-14 00:51:18.221 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38387897400954880 [0;39m <==        Row: 1, 1, 0, æ–‡æ¡£1, 1, 189, 7
2023-05-14 00:51:18.221 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38387897438703616 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:51:18.222 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38387897400954880 [0;39m <==        Row: 2, 1, 1, æ–‡æ¡£1.1, 1, 9, 2
2023-05-14 00:51:18.222 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38387897400954880 [0;39m <==        Row: 4, 1, 3, æ–‡æ¡£2.1, 1, 6, 1
2023-05-14 00:51:18.222 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38387897400954880 [0;39m <==        Row: 6, 1, 5, æ–‡æ¡£2.2.1, 1, 5, 1
2023-05-14 00:51:18.222 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38387897400954880 [0;39m <==        Row: 37841703666847744, 1, 5, æ–‡æ¡£2.2.2, 1, 3, 0
2023-05-14 00:51:18.223 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38387897400954880 [0;39m <==        Row: 37841746528440320, 1, 37841703666847744, æ–‡æ¡£2.2.2.1, 1, 3, 0
2023-05-14 00:51:18.223 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38387897438703616 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:51:18.223 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38387897400954880 [0;39m <==        Row: 3, 1, 0, æ–‡æ¡£2, 2, 3, 0
2023-05-14 00:51:18.223 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38387897400954880 [0;39m <==        Row: 5, 1, 3, æ–‡æ¡£2.2, 2, 5, 1
2023-05-14 00:51:18.223 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38387897400954880 [0;39m <==      Total: 8
2023-05-14 00:51:18.224 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38387897438703616 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:51:18.224 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38387897438703616 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:51:18.224 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38387897400954880 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":1,"id":1,"name":"æ–‡æ¡£1","parent":0,"sort":1,"viewCount":189,"voteCount":7},{"ebookId":1,"id":2,"name":"æ–‡æ¡£1.1","parent":1,"sort":1,"viewCount":9,"voteCount":2},{"ebookId":1,"id":4,"name":"æ–‡æ¡£2.1","parent":3,"sort":1,"viewCount":6,"voteCount":1},{"ebookId":1,"id":6,"name":"æ–‡æ¡£2.2.1","parent":5,"sort":1,"viewCount":5,"voteCount":1},{"ebookId":1,"id":37841703666847744,"name":"æ–‡æ¡£2.2.2","parent":5,"sort":1,"viewCount":3,"voteCount":0},{"ebookId":1,"id":37841746528440320,"name":"æ–‡æ¡£2.2.2.1","parent":37841703666847744,"sort":1,"viewCount":3,"voteCount":0},{"ebookId":1,"id":3,"name":"æ–‡æ¡£2","parent":0,"sort":2,"viewCount":3,"voteCount":0},{"ebookId":1,"id":5,"name":"æ–‡æ¡£2.2","parent":3,"sort":2,"viewCount":5,"voteCount":1}],"success":true}
2023-05-14 00:51:18.224 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38387897400954880 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š14 ms -------------
2023-05-14 00:51:18.224 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38387897438703616 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:51:18.224 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38387897438703616 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:51:18.225 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38387897438703616 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:51:18.225 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38387897438703616 [0;39m <==      Total: 4
2023-05-14 00:51:18.225 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38387897438703616 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:51:18.225 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38387897438703616 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-05-14 00:51:18.443 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38387898378227712 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:51:18.443 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38387898378227712 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/1 GET
2023-05-14 00:51:18.444 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38387898378227712 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-05-14 00:51:18.444 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38387898378227712 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:51:18.444 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38387898378227712 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:51:18.445 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38387898378227712 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-05-14 00:51:18.445 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38387898378227712 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:51:18.446 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m38387898378227712 [0;39m <==    Columns: id, content
2023-05-14 00:51:18.446 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m38387898378227712 [0;39m <==        Row: 1, <<BLOB>>
2023-05-14 00:51:18.446 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38387898378227712 [0;39m <==      Total: 1
2023-05-14 00:51:18.447 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38387898378227712 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-05-14 00:51:18.447 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38387898378227712 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:51:18.454 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38387898378227712 [0;39m <==    Updates: 1
2023-05-14 00:51:18.455 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38387898378227712 [0;39m è¿”å›žç»“æžœ: {"content":"<p>Spring Boot makes it easy to create stand-alone, production-grade Spring based Applications that you can \"just run\".</p><p>We take an opinionated view of the Spring platform and third-party libraries so you can get started with minimum fuss. Most Spring Boot applications need minimal Spring configuration.</p><p>If youâ€™re looking for information about a specific version, or instructions about how to upgrade from an earlier release, check out&nbsp;<a href=\"https://github.com/spring-projects/spring-boot/wiki#release-notes\">the project release notes section</a>&nbsp;on our wiki.</p><h2><a href=\"https://spring.io/projects/spring-boot#features\"></a>Features</h2><ul><li><p>Create stand-alone Spring applications</p></li><li><p>Embed Tomcat, Jetty or Undertow directly (no need to deploy WAR files)</p></li><li><p>Provide opinionated 'starter' dependencies to simplify your build configuration</p></li><li><p>Automatically configure Spring and 3rd party libraries whenever possible</p></li><li><p>Provide production-ready features such as metrics, health checks, and externalized configuration</p></li><li><p>Absolutely no code generation and no requirement for XML configuration</p></li></ul><h2><a href=\"https://spring.io/projects/spring-boot#getting-started\"></a>Getting Started</h2><ul><li><p>Super quick â€” try the&nbsp;<a href=\"https://spring.io/quickstart\">Quickstart Guide</a>.</p></li><li><p>More general â€” try&nbsp;<a href=\"https://spring.io/guides/gs/spring-boot/\">Building an Application with Spring Boot</a></p></li><li><p>More specific â€” try&nbsp;<a href=\"https://spring.io/guides/gs/rest-service/\">Building a RESTful Web Service</a>.</p></li><li><p>Or search through all our guides on the&nbsp;<a href=\"https://spring.io/guides\">Guides</a>&nbsp;homepage.</p></li></ul><h2><a href=\"https://spring.io/projects/spring-boot#talks-and-videos\"></a>Talks and videos</h2><ul><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/its-a-kind-of-magic-under-the-covers-of-spring-boot-brian-clozel-st%C3%A9phane-nicoll\">Itâ€™s a Kind of Magic: Under the Covers of Spring Boot</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/whats-new-in-spring-boot-2-0-phillip-webb-madhura-bhave\">Whatâ€™s New in Spring Boot 2.0</a></p></li><li><p><a href=\"https://content.pivotal.io/webinars/mar-13-introducing-spring-boot-2-0-webinar\">Introducing Spring Boot 2.0 webinar</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/test-driven-development-with-spring-boot-sannidhi-jalukar-madhura-bhave\">Test Driven Development with Spring Boot</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/from-zero-to-hero-with-spring-boot-brian-clozel\">From Zero to Hero with Spring Boot 2.0</a></p></li></ul><p>You can also join the&nbsp;<a href=\"https://gitter.im/spring-projects/spring-boot\">Spring Boot community on Gitter</a>!</p>","success":true}
2023-05-14 00:51:18.455 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38387898378227712 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š12 ms -------------
2023-05-14 00:51:29.870 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:51:31.902 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:51:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38387967831707648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:51:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38387967831707648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:51:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38387967831707648 [0;39m ==> Parameters: 
2023-05-14 00:51:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38387967831707648 [0;39m <==    Updates: 1
2023-05-14 00:51:35.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38387967831707648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:51:44.272 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:51:47.236 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:51:53.979 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:51:56.025 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:52:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38388072718667776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:52:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38388072718667776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:52:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38388072718667776 [0;39m ==> Parameters: 
2023-05-14 00:52:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38388072718667776 [0;39m <==    Updates: 0
2023-05-14 00:52:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38388072718667776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-05-14 00:52:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38388093702770688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:52:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38388093702770688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:52:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38388093702770688 [0;39m ==> Parameters: 
2023-05-14 00:52:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38388093702770688 [0;39m <==    Updates: 1
2023-05-14 00:52:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38388093702770688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:52:13.099 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:52:14.253 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:52:15.158 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:52:17.197 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:52:19.228 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:52:21.258 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:52:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38388219544473600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:52:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38388219544473600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:52:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38388219544473600 [0;39m ==> Parameters: 
2023-05-14 00:52:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38388219544473600 [0;39m <==    Updates: 1
2023-05-14 00:52:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38388219544473600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:52:43.113 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:52:44.271 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:52:47.173 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:52:49.208 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:52:52.150 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38388291413872640 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:52:52.150 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38388291413872640 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:52:52.150 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38388291413872640 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:52:52.151 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38388291413872640 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:52:52.151 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38388291413872640 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:52:52.153 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38388291413872640 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:52:52.153 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38388291413872640 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:52:52.154 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38388291413872640 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:52:52.155 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38388291413872640 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:52:52.155 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38388291413872640 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:52:52.155 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38388291413872640 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:52:52.156 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38388291413872640 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:52:52.156 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38388291413872640 [0;39m <==      Total: 4
2023-05-14 00:52:52.156 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38388291413872640 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:52:52.156 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38388291413872640 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-05-14 00:53:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38388324364324864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:53:00.226 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38388324364324864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:53:00.227 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38388324364324864 [0;39m ==> Parameters: 
2023-05-14 00:53:00.230 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38388324364324864 [0;39m <==    Updates: 0
2023-05-14 00:53:00.230 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38388324364324864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š223æ¯«ç§’
2023-05-14 00:53:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38388345319067648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:53:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38388345319067648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:53:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38388345319067648 [0;39m ==> Parameters: 
2023-05-14 00:53:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38388345319067648 [0;39m <==    Updates: 1
2023-05-14 00:53:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38388345319067648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:53:13.712 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:53:14.452 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:53:14.864 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38388386683293696 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:53:14.865 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38388386683293696 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/1 GET
2023-05-14 00:53:14.866 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38388386683293696 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-05-14 00:53:14.867 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38388386683293696 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:53:14.867 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38388386683293696 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:53:14.883 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38388386683293696 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-05-14 00:53:14.884 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38388386683293696 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:53:14.885 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38388386683293696 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-05-14 00:53:14.885 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38388386683293696 [0;39m <==        Row: 1, 1, 0, æ–‡æ¡£1, 1, 190, 7
2023-05-14 00:53:14.886 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38388386683293696 [0;39m <==        Row: 2, 1, 1, æ–‡æ¡£1.1, 1, 9, 2
2023-05-14 00:53:14.886 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38388386683293696 [0;39m <==        Row: 4, 1, 3, æ–‡æ¡£2.1, 1, 6, 1
2023-05-14 00:53:14.887 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38388386683293696 [0;39m <==        Row: 6, 1, 5, æ–‡æ¡£2.2.1, 1, 5, 1
2023-05-14 00:53:14.887 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38388386683293696 [0;39m <==        Row: 37841703666847744, 1, 5, æ–‡æ¡£2.2.2, 1, 3, 0
2023-05-14 00:53:14.887 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38388386683293696 [0;39m <==        Row: 37841746528440320, 1, 37841703666847744, æ–‡æ¡£2.2.2.1, 1, 3, 0
2023-05-14 00:53:14.887 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38388386683293696 [0;39m <==        Row: 3, 1, 0, æ–‡æ¡£2, 2, 3, 0
2023-05-14 00:53:14.888 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m38388386683293696 [0;39m <==        Row: 5, 1, 3, æ–‡æ¡£2.2, 2, 5, 1
2023-05-14 00:53:14.888 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m38388386683293696 [0;39m <==      Total: 8
2023-05-14 00:53:14.888 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38388386683293696 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":1,"id":1,"name":"æ–‡æ¡£1","parent":0,"sort":1,"viewCount":190,"voteCount":7},{"ebookId":1,"id":2,"name":"æ–‡æ¡£1.1","parent":1,"sort":1,"viewCount":9,"voteCount":2},{"ebookId":1,"id":4,"name":"æ–‡æ¡£2.1","parent":3,"sort":1,"viewCount":6,"voteCount":1},{"ebookId":1,"id":6,"name":"æ–‡æ¡£2.2.1","parent":5,"sort":1,"viewCount":5,"voteCount":1},{"ebookId":1,"id":37841703666847744,"name":"æ–‡æ¡£2.2.2","parent":5,"sort":1,"viewCount":3,"voteCount":0},{"ebookId":1,"id":37841746528440320,"name":"æ–‡æ¡£2.2.2.1","parent":37841703666847744,"sort":1,"viewCount":3,"voteCount":0},{"ebookId":1,"id":3,"name":"æ–‡æ¡£2","parent":0,"sort":2,"viewCount":3,"voteCount":0},{"ebookId":1,"id":5,"name":"æ–‡æ¡£2.2","parent":3,"sort":2,"viewCount":5,"voteCount":1}],"success":true}
2023-05-14 00:53:14.888 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38388386683293696 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š24 ms -------------
2023-05-14 00:53:14.897 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38388386821705728 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:53:14.897 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38388386821705728 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:53:14.897 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38388386821705728 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:53:14.897 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38388386821705728 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:53:14.898 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38388386821705728 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:53:14.898 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38388386821705728 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:53:14.898 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38388386821705728 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:53:14.899 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38388386821705728 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:53:14.900 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38388386821705728 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:53:14.900 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38388386821705728 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:53:14.900 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38388386821705728 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:53:14.900 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38388386821705728 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:53:14.901 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38388386821705728 [0;39m <==      Total: 4
2023-05-14 00:53:14.901 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38388386821705728 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:53:14.901 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38388386821705728 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-05-14 00:53:17.336 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38388397051613184 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:53:17.336 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38388397051613184 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/1 GET
2023-05-14 00:53:17.336 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38388397051613184 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-05-14 00:53:17.337 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38388397051613184 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:53:17.337 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38388397051613184 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:53:17.338 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38388397051613184 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-05-14 00:53:17.338 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38388397051613184 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:53:17.339 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m38388397051613184 [0;39m <==    Columns: id, content
2023-05-14 00:53:17.339 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m38388397051613184 [0;39m <==        Row: 1, <<BLOB>>
2023-05-14 00:53:17.339 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m38388397051613184 [0;39m <==      Total: 1
2023-05-14 00:53:17.340 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38388397051613184 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-05-14 00:53:17.340 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38388397051613184 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:53:17.343 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m38388397051613184 [0;39m <==    Updates: 1
2023-05-14 00:53:17.343 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38388397051613184 [0;39m è¿”å›žç»“æžœ: {"content":"<p>Spring Boot makes it easy to create stand-alone, production-grade Spring based Applications that you can \"just run\".</p><p>We take an opinionated view of the Spring platform and third-party libraries so you can get started with minimum fuss. Most Spring Boot applications need minimal Spring configuration.</p><p>If youâ€™re looking for information about a specific version, or instructions about how to upgrade from an earlier release, check out&nbsp;<a href=\"https://github.com/spring-projects/spring-boot/wiki#release-notes\">the project release notes section</a>&nbsp;on our wiki.</p><h2><a href=\"https://spring.io/projects/spring-boot#features\"></a>Features</h2><ul><li><p>Create stand-alone Spring applications</p></li><li><p>Embed Tomcat, Jetty or Undertow directly (no need to deploy WAR files)</p></li><li><p>Provide opinionated 'starter' dependencies to simplify your build configuration</p></li><li><p>Automatically configure Spring and 3rd party libraries whenever possible</p></li><li><p>Provide production-ready features such as metrics, health checks, and externalized configuration</p></li><li><p>Absolutely no code generation and no requirement for XML configuration</p></li></ul><h2><a href=\"https://spring.io/projects/spring-boot#getting-started\"></a>Getting Started</h2><ul><li><p>Super quick â€” try the&nbsp;<a href=\"https://spring.io/quickstart\">Quickstart Guide</a>.</p></li><li><p>More general â€” try&nbsp;<a href=\"https://spring.io/guides/gs/spring-boot/\">Building an Application with Spring Boot</a></p></li><li><p>More specific â€” try&nbsp;<a href=\"https://spring.io/guides/gs/rest-service/\">Building a RESTful Web Service</a>.</p></li><li><p>Or search through all our guides on the&nbsp;<a href=\"https://spring.io/guides\">Guides</a>&nbsp;homepage.</p></li></ul><h2><a href=\"https://spring.io/projects/spring-boot#talks-and-videos\"></a>Talks and videos</h2><ul><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/its-a-kind-of-magic-under-the-covers-of-spring-boot-brian-clozel-st%C3%A9phane-nicoll\">Itâ€™s a Kind of Magic: Under the Covers of Spring Boot</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/whats-new-in-spring-boot-2-0-phillip-webb-madhura-bhave\">Whatâ€™s New in Spring Boot 2.0</a></p></li><li><p><a href=\"https://content.pivotal.io/webinars/mar-13-introducing-spring-boot-2-0-webinar\">Introducing Spring Boot 2.0 webinar</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/test-driven-development-with-spring-boot-sannidhi-jalukar-madhura-bhave\">Test Driven Development with Spring Boot</a></p></li><li><p><a href=\"https://content.pivotal.io/springone-platform-2017/from-zero-to-hero-with-spring-boot-brian-clozel\">From Zero to Hero with Spring Boot 2.0</a></p></li></ul><p>You can also join the&nbsp;<a href=\"https://gitter.im/spring-projects/spring-boot\">Spring Boot community on Gitter</a>!</p>","success":true}
2023-05-14 00:53:17.344 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38388397051613184 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-05-14 00:53:20.439 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:53:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38388471169159168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:53:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38388471169159168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:53:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38388471169159168 [0;39m ==> Parameters: 
2023-05-14 00:53:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38388471169159168 [0;39m <==    Updates: 1
2023-05-14 00:53:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38388471169159168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:53:37.813 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:53:44.286 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:53:45.155 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:53:47.204 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:54:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38388576081285120 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:54:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38388576081285120 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:54:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38388576081285120 [0;39m ==> Parameters: 
2023-05-14 00:54:00.030 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38388576081285120 [0;39m <==    Updates: 0
2023-05-14 00:54:00.031 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38388576081285120 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-05-14 00:54:01.918 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:54:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38388597027639296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:54:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38388597027639296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:54:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38388597027639296 [0;39m ==> Parameters: 
2023-05-14 00:54:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38388597027639296 [0;39m <==    Updates: 1
2023-05-14 00:54:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38388597027639296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:54:13.112 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:54:14.284 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:54:15.141 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:54:17.182 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:54:25.996 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:54:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38388722814816256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:54:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38388722814816256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:54:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38388722814816256 [0;39m ==> Parameters: 
2023-05-14 00:54:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38388722814816256 [0;39m <==    Updates: 1
2023-05-14 00:54:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38388722814816256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-05-14 00:54:44.269 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:54:45.163 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:54:47.199 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:54:49.953 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m38388785515466752 [0;39m ------------- å¼€å§‹ -------------
2023-05-14 00:54:49.953 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m38388785515466752 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/1 GET
2023-05-14 00:54:49.954 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m38388785515466752 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.comments
2023-05-14 00:54:49.954 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m38388785515466752 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-14 00:54:49.954 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m38388785515466752 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-05-14 00:54:49.956 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38388785515466752 [0;39m ==>  Preparing: SELECT * FROM comment WHERE ebook_id = ?
2023-05-14 00:54:49.956 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38388785515466752 [0;39m ==> Parameters: 1(Long)
2023-05-14 00:54:49.957 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38388785515466752 [0;39m <==    Columns: id, user_id, ebook_id, parentId, replyToUserId, content, create_time, update_time
2023-05-14 00:54:49.957 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38388785515466752 [0;39m <==        Row: 1, 1, 1, null, null, good, 2023-05-13 03:33:45, null
2023-05-14 00:54:49.957 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38388785515466752 [0;39m <==        Row: 2, 1, 1, null, null, Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼, 2023-05-13 17:20:27, null
2023-05-14 00:54:49.958 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38388785515466752 [0;39m <==        Row: 3, 37814121005191174, 1, null, null, Spring, 2023-05-13 20:37:11, null
2023-05-14 00:54:49.958 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m38388785515466752 [0;39m <==        Row: 12, 37814121005191174, 1, null, null, ewq, 2023-05-13 20:46:44, null
2023-05-14 00:54:49.958 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m38388785515466752 [0;39m <==      Total: 4
2023-05-14 00:54:49.958 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m38388785515466752 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"good","createTime":1683920025000,"ebookId":1,"id":1,"userId":1},{"content":"Springbootçš„è‡ªåŠ¨åŒ–é…ç½®å¾ˆæ¸…æ™°ï¼","createTime":1683969627000,"ebookId":1,"id":2,"userId":1},{"content":"Spring","createTime":1683981431000,"ebookId":1,"id":3,"userId":37814121005191174},{"content":"ewq","createTime":1683982004000,"ebookId":1,"id":12,"userId":37814121005191174}],"success":true}
2023-05-14 00:54:49.959 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m38388785515466752 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-05-14 00:54:51.258 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:55:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38388827693387776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:55:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38388827693387776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:55:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38388827693387776 [0;39m ==> Parameters: 
2023-05-14 00:55:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38388827693387776 [0;39m <==    Updates: 0
2023-05-14 00:55:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38388827693387776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:55:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38388848669102080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:55:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38388848669102080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:55:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38388848669102080 [0;39m ==> Parameters: 
2023-05-14 00:55:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38388848669102080 [0;39m <==    Updates: 1
2023-05-14 00:55:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38388848669102080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-14 00:55:13.124 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:55:14.287 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:55:17.191 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:55:19.229 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:55:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38388974473056256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:55:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38388974473056256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:55:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38388974473056256 [0;39m ==> Parameters: 
2023-05-14 00:55:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38388974473056256 [0;39m <==    Updates: 1
2023-05-14 00:55:35.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38388974473056256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-14 00:55:41.735 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:55:44.276 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:55:46.165 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:55:48.205 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:56:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38389079339044864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:56:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38389079339044864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:56:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38389079339044864 [0;39m ==> Parameters: 
2023-05-14 00:56:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38389079339044864 [0;39m <==    Updates: 0
2023-05-14 00:56:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38389079339044864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:56:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38389100314759168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:56:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38389100314759168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:56:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38389100314759168 [0;39m ==> Parameters: 
2023-05-14 00:56:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38389100314759168 [0;39m <==    Updates: 1
2023-05-14 00:56:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38389100314759168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:56:05.801 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:56:14.242 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:56:17.173 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:56:29.927 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:56:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38389226139684864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:56:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38389226139684864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:56:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38389226139684864 [0;39m ==> Parameters: 
2023-05-14 00:56:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38389226139684864 [0;39m <==    Updates: 1
2023-05-14 00:56:35.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38389226139684864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:56:44.266 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:56:45.146 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:56:47.265 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:56:54.007 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:57:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m38389330997284864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-14 00:57:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38389330997284864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-14 00:57:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38389330997284864 [0;39m ==> Parameters: 
2023-05-14 00:57:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m38389330997284864 [0;39m <==    Updates: 0
2023-05-14 00:57:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m38389330997284864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-14 00:57:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m38389351985582080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-14 00:57:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38389351985582080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-14 00:57:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38389351985582080 [0;39m ==> Parameters: 
2023-05-14 00:57:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m38389351985582080 [0;39m <==    Updates: 1
2023-05-14 00:57:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m38389351985582080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-14 00:57:13.124 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:57:14.265 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-14 00:57:19.252 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
