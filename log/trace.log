2023-05-16 00:07:20.337 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:22.045 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:22.388 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:24.090 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:24.355 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39101625943592960 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:07:24.355 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39101625943592960 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:07:24.356 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39101625943592960 [0;39m ==> Parameters: 
2023-05-16 00:07:24.359 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39101625943592960 [0;39m <==    Updates: 5
2023-05-16 00:07:24.360 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39101625943592960 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-05-16 00:07:24.360 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39101625964564480 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:07:24.360 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39101625964564480 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:07:24.360 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39101625964564480 [0;39m ==> Parameters: 
2023-05-16 00:07:24.361 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39101625964564480 [0;39m <==    Updates: 2
2023-05-16 00:07:24.361 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39101625964564480 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-16 00:07:24.422 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:26.128 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:29.138 WARN  com.zaxxer.hikari.pool.HikariPool                 :787  [32m                  [0;39m HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=23m54s352ms872Âµs200ns).
2023-05-16 00:07:30.194 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:30.694 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:32.247 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:32.745 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:34.290 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:34.788 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39101670612930560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:07:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39101670612930560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:07:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39101670612930560 [0;39m ==> Parameters: 
2023-05-16 00:07:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39101670612930560 [0;39m <==    Updates: 2
2023-05-16 00:07:35.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39101670612930560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 00:07:36.329 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:38.381 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:38.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:40.408 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:40.877 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:42.432 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:42.905 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:44.455 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:46.489 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:46.963 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:48.529 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:49.002 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:50.541 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:51.009 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:52.563 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:53.024 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:54.589 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:55.044 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:56.601 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:57.055 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:07:58.609 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39101775487307776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:08:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39101775487307776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:08:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39101775487307776 [0;39m ==> Parameters: 
2023-05-16 00:08:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39101775487307776 [0;39m <==    Updates: 0
2023-05-16 00:08:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39101775487307776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 00:08:00.624 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:01.108 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:02.658 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:03.133 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:04.674 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39101796429467648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:08:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39101796429467648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:08:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39101796429467648 [0;39m ==> Parameters: 
2023-05-16 00:08:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39101796429467648 [0;39m <==    Updates: 2
2023-05-16 00:08:05.004 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39101796429467648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 00:08:05.157 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:06.698 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:07.170 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:08.713 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:09.187 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:10.734 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:11.218 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:12.774 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:13.250 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:14.805 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:15.262 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:16.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:17.275 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:18.842 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:19.298 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:20.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:21.335 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:22.892 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:24.912 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:25.385 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:26.929 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:27.400 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:28.949 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:29.422 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:30.970 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:31.441 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:32.991 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:33.478 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39101922266976256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:08:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39101922266976256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:08:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39101922266976256 [0;39m ==> Parameters: 
2023-05-16 00:08:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39101922266976256 [0;39m <==    Updates: 2
2023-05-16 00:08:35.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39101922266976256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 00:08:35.020 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:35.509 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:37.045 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:37.533 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:39.063 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:39.552 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:43.129 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:43.630 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:45.148 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:47.157 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:47.671 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:49.201 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:49.700 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:51.252 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:51.749 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:53.308 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:53.793 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:55.351 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:55.848 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:57.905 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:08:59.437 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:09:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39102027111993344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:09:00.001 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39102027111993344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:09:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39102027111993344 [0;39m ==> Parameters: 
2023-05-16 00:09:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39102027111993344 [0;39m <==    Updates: 0
2023-05-16 00:09:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39102027111993344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 00:09:01.469 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:09:01.982 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:09:04.024 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:09:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39102048087707648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:09:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39102048087707648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:09:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39102048087707648 [0;39m ==> Parameters: 
2023-05-16 00:09:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39102048087707648 [0;39m <==    Updates: 2
2023-05-16 00:09:05.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39102048087707648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-05-16 00:09:06.079 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:09:10.286 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:09:12.311 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:09:14.322 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:09:16.337 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:09:18.363 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:09:20.375 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:09:22.403 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:09:22.688 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:09:24.439 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:09:28.573 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:09:30.623 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:09:32.655 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:09:34.687 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:09:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39102173921021952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:09:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39102173921021952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:09:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39102173921021952 [0;39m ==> Parameters: 
2023-05-16 00:09:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39102173921021952 [0;39m <==    Updates: 2
2023-05-16 00:09:35.003 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39102173921021952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 00:09:36.717 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:09:38.734 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:09:42.784 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:09:44.800 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:09:50.936 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:09:52.691 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:09:52.958 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:09:54.969 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:09:56.986 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:09:59.000 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:09:59.766 INFO  o.a.r.s.support.DefaultRocketMQListenerContainer  :216  [32m                  [0;39m container destroyed, DefaultRocketMQListenerContainer{consumerGroup='default', nameServer='127.0.0.1:9876', topic='VOTE_TOPIC', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
2023-05-16 00:09:59.766 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :218  [32m                  [0;39m Shutting down ExecutorService 'taskScheduler'
2023-05-16 00:09:59.766 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :218  [32m                  [0;39m Shutting down ExecutorService 'applicationTaskExecutor'
2023-05-16 00:09:59.766 INFO  com.zaxxer.hikari.HikariDataSource                :350  [32m                  [0;39m HikariPool-1 - Shutdown initiated...
2023-05-16 00:09:59.782 INFO  com.zaxxer.hikari.HikariDataSource                :352  [32m                  [0;39m HikariPool-1 - Shutdown completed.
2023-05-16 00:09:59.797 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:09:59.797 WARN  o.s.beans.factory.support.DisposableBeanAdapter   :267  [32m                  [0;39m Invocation of destroy method failed on bean with name 'rocketMQTemplate': java.lang.IllegalStateException: Shutdown in progress
2023-05-16 00:09:59.797 WARN  o.s.beans.factory.support.DisposableBeanAdapter   :349  [32m                  [0;39m Destroy method 'shutdown' on bean with name 'defaultMQProducer' threw an exception: java.lang.IllegalStateException: Shutdown in progress
2023-05-16 00:10:03.366 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.1.6.Final
2023-05-16 00:10:03.381 INFO  com.jiawa.wiki.WikiApplication                    :55   [32m                  [0;39m Starting WikiApplication using Java 1.8.0_271 on LAPTOP-TLCI2GAA with PID 17348 (D:\work\jiawawiki\target\classes started by k in D:\work\jiawawiki)
2023-05-16 00:10:03.381 INFO  com.jiawa.wiki.WikiApplication                    :660  [32m                  [0;39m No active profile set, falling back to default profiles: default
2023-05-16 00:10:03.444 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-05-16 00:10:03.444 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-05-16 00:10:04.044 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :250  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2023-05-16 00:10:04.044 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :128  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-05-16 00:10:04.060 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :188  [32m                  [0;39m Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
2023-05-16 00:10:04.235 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration$$EnhancerBySpringCGLIB$$b3345d1e] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:10:04.251 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:10:04.534 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'defaultMQProducer' of type [org.apache.rocketmq.client.producer.DefaultMQProducer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:10:04.534 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonConfig' of type [com.jiawa.wiki.config.JacksonConfig$$EnhancerBySpringCGLIB$$556ed21f] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:10:04.534 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:10:04.534 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:10:04.534 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'spring.jackson-org.springframework.boot.autoconfigure.jackson.JacksonProperties' of type [org.springframework.boot.autoconfigure.jackson.JacksonProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:10:04.534 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'standardJacksonObjectMapperBuilderCustomizer' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration$StandardJackson2ObjectMapperBuilderCustomizer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:10:04.549 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:10:04.549 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'parameterNamesModule' of type [com.fasterxml.jackson.module.paramnames.ParameterNamesModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:10:04.549 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:10:04.565 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jsonComponentModule' of type [org.springframework.boot.jackson.JsonComponentModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:10:04.565 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.data.web.config.SpringDataJacksonConfiguration' of type [org.springframework.data.web.config.SpringDataJacksonConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:10:04.565 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonGeoModule' of type [org.springframework.data.geo.GeoModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:10:04.565 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapperBuilder' of type [org.springframework.http.converter.json.Jackson2ObjectMapperBuilder] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:10:04.581 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapper' of type [com.fasterxml.jackson.databind.ObjectMapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:10:05.415 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketMQTemplate' of type [org.apache.rocketmq.spring.core.RocketMQTemplate] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:10:05.415 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'transactionHandlerRegistry' of type [org.apache.rocketmq.spring.config.TransactionHandlerRegistry] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:10:05.780 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2023-05-16 00:10:05.780 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2023-05-16 00:10:05.780 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2023-05-16 00:10:05.780 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.39]
2023-05-16 00:10:05.859 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2023-05-16 00:10:05.859 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :289  [32m                  [0;39m Root WebApplicationContext: initialization completed in 2415 ms
2023-05-16 00:10:06.575 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2023-05-16 00:10:06.908 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2023-05-16 00:10:06.956 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2023-05-16 00:10:07.558 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:10:07.558 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:10:11.598 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:10:11.598 INFO  o.a.r.s.support.DefaultRocketMQListenerContainer  :243  [32m                  [0;39m running container: DefaultRocketMQListenerContainer{consumerGroup='default', nameServer='127.0.0.1:9876', topic='VOTE_TOPIC', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
2023-05-16 00:10:11.598 INFO  o.a.r.s.a.ListenerContainerConfiguration          :107  [32m                  [0;39m Register the listener to container, listenerBeanName:voteTopicConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-05-16 00:10:11.598 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2023-05-16 00:10:11.630 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2023-05-16 00:10:11.646 INFO  com.jiawa.wiki.WikiApplication                    :61   [32m                  [0;39m Started WikiApplication in 8.664 seconds (JVM running for 9.624)
2023-05-16 00:10:11.646 INFO  com.jiawa.wiki.WikiApplication                    :26   [32m                  [0;39m å¯åŠ¨æˆåŠŸï¼ï¼
2023-05-16 00:10:11.646 INFO  com.jiawa.wiki.WikiApplication                    :27   [32m                  [0;39m åœ°å€: 	http://127.0.0.1:8880
2023-05-16 00:10:15.643 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:10:35.028 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39102425679925248 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:10:35.043 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m39102425679925248 [0;39m HikariPool-1 - Starting...
2023-05-16 00:10:35.558 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m39102425679925248 [0;39m HikariPool-1 - Start completed.
2023-05-16 00:10:35.558 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39102425679925248 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:10:35.573 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39102425679925248 [0;39m ==> Parameters: 
2023-05-16 00:10:35.573 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39102425679925248 [0;39m <==    Updates: 2
2023-05-16 00:10:35.589 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39102425679925248 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š561æ¯«ç§’
2023-05-16 00:10:37.134 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:10:37.466 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:10:43.195 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:11:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39102530516553728 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:11:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39102530516553728 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:11:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39102530516553728 [0;39m ==> Parameters: 
2023-05-16 00:11:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39102530516553728 [0;39m <==    Updates: 0
2023-05-16 00:11:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39102530516553728 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-16 00:11:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39102551450324992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:11:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39102551450324992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:11:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39102551450324992 [0;39m ==> Parameters: 
2023-05-16 00:11:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39102551450324992 [0;39m <==    Updates: 2
2023-05-16 00:11:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39102551450324992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 00:11:07.296 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:11:07.455 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:11:10.586 INFO  o.a.r.s.support.DefaultRocketMQListenerContainer  :216  [32m                  [0;39m container destroyed, DefaultRocketMQListenerContainer{consumerGroup='default', nameServer='127.0.0.1:9876', topic='VOTE_TOPIC', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
2023-05-16 00:11:10.586 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :218  [32m                  [0;39m Shutting down ExecutorService 'taskScheduler'
2023-05-16 00:11:10.586 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :218  [32m                  [0;39m Shutting down ExecutorService 'applicationTaskExecutor'
2023-05-16 00:11:10.586 INFO  com.zaxxer.hikari.HikariDataSource                :350  [32m                  [0;39m HikariPool-1 - Shutdown initiated...
2023-05-16 00:11:10.602 INFO  com.zaxxer.hikari.HikariDataSource                :352  [32m                  [0;39m HikariPool-1 - Shutdown completed.
2023-05-16 00:11:10.602 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:11:10.618 WARN  o.s.beans.factory.support.DisposableBeanAdapter   :267  [32m                  [0;39m Invocation of destroy method failed on bean with name 'rocketMQTemplate': java.lang.IllegalStateException: Shutdown in progress
2023-05-16 00:11:10.618 WARN  o.s.beans.factory.support.DisposableBeanAdapter   :349  [32m                  [0;39m Destroy method 'shutdown' on bean with name 'defaultMQProducer' threw an exception: java.lang.IllegalStateException: Shutdown in progress
2023-05-16 00:11:14.938 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.1.6.Final
2023-05-16 00:11:14.938 INFO  com.jiawa.wiki.WikiApplication                    :55   [32m                  [0;39m Starting WikiApplication using Java 1.8.0_271 on LAPTOP-TLCI2GAA with PID 4344 (D:\work\jiawawiki\target\classes started by k in D:\work\jiawawiki)
2023-05-16 00:11:14.954 INFO  com.jiawa.wiki.WikiApplication                    :660  [32m                  [0;39m No active profile set, falling back to default profiles: default
2023-05-16 00:11:15.001 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-05-16 00:11:15.001 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-05-16 00:11:15.586 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :250  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2023-05-16 00:11:15.602 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :128  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-05-16 00:11:15.618 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :188  [32m                  [0;39m Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2023-05-16 00:11:15.777 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration$$EnhancerBySpringCGLIB$$e55bd2c9] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:11:15.793 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:11:16.076 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'defaultMQProducer' of type [org.apache.rocketmq.client.producer.DefaultMQProducer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:11:16.076 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonConfig' of type [com.jiawa.wiki.config.JacksonConfig$$EnhancerBySpringCGLIB$$879647ca] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:11:16.076 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:11:16.076 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:11:16.076 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'spring.jackson-org.springframework.boot.autoconfigure.jackson.JacksonProperties' of type [org.springframework.boot.autoconfigure.jackson.JacksonProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:11:16.076 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'standardJacksonObjectMapperBuilderCustomizer' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration$StandardJackson2ObjectMapperBuilderCustomizer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:11:16.076 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:11:16.091 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'parameterNamesModule' of type [com.fasterxml.jackson.module.paramnames.ParameterNamesModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:11:16.091 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:11:16.091 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jsonComponentModule' of type [org.springframework.boot.jackson.JsonComponentModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:11:16.091 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.data.web.config.SpringDataJacksonConfiguration' of type [org.springframework.data.web.config.SpringDataJacksonConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:11:16.107 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonGeoModule' of type [org.springframework.data.geo.GeoModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:11:16.107 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapperBuilder' of type [org.springframework.http.converter.json.Jackson2ObjectMapperBuilder] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:11:16.123 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapper' of type [com.fasterxml.jackson.databind.ObjectMapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:11:16.924 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketMQTemplate' of type [org.apache.rocketmq.spring.core.RocketMQTemplate] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:11:16.939 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'transactionHandlerRegistry' of type [org.apache.rocketmq.spring.config.TransactionHandlerRegistry] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 00:11:17.288 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2023-05-16 00:11:17.304 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2023-05-16 00:11:17.304 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2023-05-16 00:11:17.304 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.39]
2023-05-16 00:11:17.367 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2023-05-16 00:11:17.367 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :289  [32m                  [0;39m Root WebApplicationContext: initialization completed in 2366 ms
2023-05-16 00:11:18.019 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2023-05-16 00:11:18.350 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2023-05-16 00:11:18.414 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2023-05-16 00:11:19.061 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:11:19.061 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:11:21.094 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:11:23.119 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:11:23.119 INFO  o.a.r.s.support.DefaultRocketMQListenerContainer  :243  [32m                  [0;39m running container: DefaultRocketMQListenerContainer{consumerGroup='default', nameServer='127.0.0.1:9876', topic='VOTE_TOPIC', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
2023-05-16 00:11:23.119 INFO  o.a.r.s.a.ListenerContainerConfiguration          :107  [32m                  [0;39m Register the listener to container, listenerBeanName:voteTopicConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-05-16 00:11:23.119 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2023-05-16 00:11:23.134 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2023-05-16 00:11:23.150 INFO  com.jiawa.wiki.WikiApplication                    :61   [32m                  [0;39m Started WikiApplication in 8.6 seconds (JVM running for 9.485)
2023-05-16 00:11:23.150 INFO  com.jiawa.wiki.WikiApplication                    :26   [32m                  [0;39m å¯åŠ¨æˆåŠŸï¼ï¼
2023-05-16 00:11:23.150 INFO  com.jiawa.wiki.WikiApplication                    :27   [32m                  [0;39m åœ°å€: 	http://127.0.0.1:8880
2023-05-16 00:11:27.171 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:11:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39102677279444992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:11:35.030 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m39102677279444992 [0;39m HikariPool-1 - Starting...
2023-05-16 00:11:35.503 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m39102677279444992 [0;39m HikariPool-1 - Start completed.
2023-05-16 00:11:35.519 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39102677279444992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:11:35.519 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39102677279444992 [0;39m ==> Parameters: 
2023-05-16 00:11:35.519 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39102677279444992 [0;39m <==    Updates: 2
2023-05-16 00:11:35.535 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39102677279444992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š522æ¯«ç§’
2023-05-16 00:11:38.291 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-05-16 00:11:38.291 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2023-05-16 00:11:38.292 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 1 ms
2023-05-16 00:11:38.353 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39102691259060224 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 00:11:38.353 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39102691259060224 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/2 GET
2023-05-16 00:11:38.353 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39102691259060224 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.CommentResp
2023-05-16 00:11:38.353 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39102691259060224 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 00:11:38.519 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39102691259060224 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 00:11:38.533 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39102691259060224 [0;39m ==>  Preparing: select * from comment where ebook_id = ?
2023-05-16 00:11:38.533 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39102691259060224 [0;39m ==> Parameters: 2(Long)
2023-05-16 00:11:38.547 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39102691259060224 [0;39m <==    Columns: id, user_id, ebook_id, parent_id, replyToUser_id, content, create_time, update_time
2023-05-16 00:11:38.547 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39102691259060224 [0;39m <==        Row: 25, 1, 2, null, null, Vueç®€ä»‹, 2023-05-14 16:35:46, null
2023-05-16 00:11:38.547 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39102691259060224 [0;39m <==        Row: 36, 2, 2, 25, 1, vueç®€ä»‹, 2023-05-14 21:02:45, null
2023-05-16 00:11:38.547 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39102691259060224 [0;39m <==        Row: 40, 1, 2, 36, 1, 11, 2023-05-15 21:02:45, null
2023-05-16 00:11:38.547 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39102691259060224 [0;39m <==      Total: 3
2023-05-16 00:11:43.472 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39102691259060224 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:11:43.472 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39102691259060224 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:11:43.488 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39102691259060224 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:11:43.488 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39102691259060224 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:11:43.488 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39102691259060224 [0;39m <==      Total: 1
2023-05-16 00:11:47.295 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39102691259060224 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:11:47.295 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39102691259060224 [0;39m ==> Parameters: 2(Long)
2023-05-16 00:11:47.312 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39102691259060224 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:11:47.312 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39102691259060224 [0;39m <==        Row: 2, 1, demo, b9b237df8bd22c295180ea0109cb7e67
2023-05-16 00:11:47.312 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39102691259060224 [0;39m <==      Total: 1
2023-05-16 00:11:49.622 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:11:50.155 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39102691259060224 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:11:50.170 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39102691259060224 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:11:50.171 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39102691259060224 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:11:50.171 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39102691259060224 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:11:50.171 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39102691259060224 [0;39m <==      Total: 1
2023-05-16 00:11:52.079 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:11:52.079 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39102691259060224 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:11:52.079 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39102691259060224 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:11:52.079 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39102691259060224 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:11:52.079 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39102691259060224 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:11:52.094 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39102691259060224 [0;39m <==      Total: 1
2023-05-16 00:11:53.054 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39102691259060224 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:11:53.054 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39102691259060224 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:11:53.054 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39102691259060224 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:11:53.054 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39102691259060224 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:11:53.054 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39102691259060224 [0;39m <==      Total: 1
2023-05-16 00:11:53.086 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39102691259060224 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"Vueç®€ä»‹","createTime":1684053346000,"ebookId":2,"id":25,"name":"test","replies":[{"content":"vueç®€ä»‹","createTime":1684069365000,"ebookId":2,"id":36,"name":"demo","parentId":25,"replies":[{"content":"11","createTime":1684155765000,"ebookId":2,"id":40,"name":"test","parentId":36,"replies":[],"replyname":"test","replytouserId":1,"userId":1}],"replyname":"test","replytouserId":1,"userId":2}],"userId":1}],"success":true}
2023-05-16 00:11:53.086 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39102691259060224 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š14740 ms -------------
2023-05-16 00:11:54.124 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:11:55.829 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39102764588077056 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 00:11:55.829 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39102764588077056 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/2 GET
2023-05-16 00:11:55.829 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39102764588077056 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.CommentResp
2023-05-16 00:11:55.830 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39102764588077056 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 00:11:55.830 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39102764588077056 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 00:11:55.831 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39102764588077056 [0;39m ==>  Preparing: select * from comment where ebook_id = ?
2023-05-16 00:11:55.831 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39102764588077056 [0;39m ==> Parameters: 2(Long)
2023-05-16 00:11:55.833 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39102764588077056 [0;39m <==    Columns: id, user_id, ebook_id, parent_id, replyToUser_id, content, create_time, update_time
2023-05-16 00:11:55.833 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39102764588077056 [0;39m <==        Row: 25, 1, 2, null, null, Vueç®€ä»‹, 2023-05-14 16:35:46, null
2023-05-16 00:11:55.834 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39102764588077056 [0;39m <==        Row: 36, 2, 2, 25, 1, vueç®€ä»‹, 2023-05-14 21:02:45, null
2023-05-16 00:11:55.834 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39102764588077056 [0;39m <==        Row: 40, 1, 2, 36, 1, 11, 2023-05-15 21:02:45, null
2023-05-16 00:11:55.835 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39102764588077056 [0;39m <==      Total: 3
2023-05-16 00:27:32.769 WARN  com.zaxxer.hikari.pool.HikariPool                 :787  [32m                  [0;39m HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=15m57s145ms96Âµs900ns).
2023-05-16 00:27:32.769 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39106694399266816 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:27:32.769 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39102764588077056 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:27:32.769 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39102764588077056 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:27:32.769 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:27:32.769 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39102764588077056 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:27:32.769 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39102764588077056 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:27:32.769 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39102764588077056 [0;39m <==      Total: 1
2023-05-16 00:27:32.769 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39102764588077056 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:27:32.769 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39102764588077056 [0;39m ==> Parameters: 2(Long)
2023-05-16 00:27:32.769 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39102764588077056 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:27:32.769 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39102764588077056 [0;39m <==        Row: 2, 1, demo, b9b237df8bd22c295180ea0109cb7e67
2023-05-16 00:27:32.769 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39102764588077056 [0;39m <==      Total: 1
2023-05-16 00:27:32.769 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39106694399266816 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:27:32.769 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39102764588077056 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:27:32.769 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39102764588077056 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:27:32.769 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39102764588077056 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:27:32.769 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39106694399266816 [0;39m ==> Parameters: 
2023-05-16 00:27:32.769 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39102764588077056 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:27:32.769 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39102764588077056 [0;39m <==      Total: 1
2023-05-16 00:27:32.769 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39102764588077056 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:27:32.769 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39102764588077056 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:27:32.769 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39102764588077056 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:27:32.769 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39106694399266816 [0;39m <==    Updates: 0
2023-05-16 00:27:32.769 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39102764588077056 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:27:32.784 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39102764588077056 [0;39m <==      Total: 1
2023-05-16 00:27:32.784 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39102764588077056 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:27:32.784 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39102764588077056 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:27:32.784 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39102764588077056 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:27:32.784 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39102764588077056 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:27:32.784 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39106694399266816 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š15æ¯«ç§’
2023-05-16 00:27:32.784 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39102764588077056 [0;39m <==      Total: 1
2023-05-16 00:27:32.784 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39106694462181376 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:27:32.784 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39102764588077056 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"Vueç®€ä»‹","createTime":1684053346000,"ebookId":2,"id":25,"name":"test","replies":[{"content":"vueç®€ä»‹","createTime":1684069365000,"ebookId":2,"id":36,"name":"demo","parentId":25,"replies":[{"content":"11","createTime":1684155765000,"ebookId":2,"id":40,"name":"test","parentId":36,"replies":[],"replyname":"test","replytouserId":1,"userId":1}],"replyname":"test","replytouserId":1,"userId":2}],"userId":1}],"success":true}
2023-05-16 00:27:32.784 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39102764588077056 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š936955 ms -------------
2023-05-16 00:27:32.784 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39106694462181376 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:27:32.784 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39106694462181376 [0;39m ==> Parameters: 
2023-05-16 00:27:32.784 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39106694462181376 [0;39m <==    Updates: 2
2023-05-16 00:27:32.784 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39106694462181376 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 00:27:32.784 ERROR com.jiawa.wiki.config.ControllerExceptionHandler  :59   [32m39102764588077056 [0;39m ç³»ç»Ÿå¼‚å¸¸ï¼š
org.apache.catalina.connector.ClientAbortException: java.io.IOException: ä½ çš„ä¸»æœºä¸­çš„è½¯ä»¶ä¸­æ­¢äº†ä¸€ä¸ªå·²å»ºç«‹çš„è¿žæŽ¥ã€‚
	at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:309)
	at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:272)
	at org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:118)
	at java.io.FilterOutputStream.flush(FilterOutputStream.java:140)
	at com.fasterxml.jackson.core.json.UTF8JsonGenerator.flush(UTF8JsonGenerator.java:1176)
	at com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:1008)
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.writeInternal(AbstractJackson2HttpMessageConverter.java:345)
	at org.springframework.http.converter.AbstractGenericHttpMessageConverter.write(AbstractGenericHttpMessageConverter.java:104)
	at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:277)
	at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.handleReturnValue(RequestResponseBodyMethodProcessor.java:181)
	at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:124)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:893)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:807)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1061)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:961)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:626)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.io.IOException: ä½ çš„ä¸»æœºä¸­çš„è½¯ä»¶ä¸­æ­¢äº†ä¸€ä¸ªå·²å»ºç«‹çš„è¿žæŽ¥ã€‚
	at sun.nio.ch.SocketDispatcher.write0(Native Method)
	at sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:51)
	at sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:93)
	at sun.nio.ch.IOUtil.write(IOUtil.java:65)
	at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:469)
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:138)
	at org.apache.tomcat.util.net.NioBlockingSelector.write(NioBlockingSelector.java:101)
	at org.apache.tomcat.util.net.NioSelectorPool.write(NioSelectorPool.java:152)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.doWrite(NioEndpoint.java:1253)
	at org.apache.tomcat.util.net.SocketWrapperBase.doWrite(SocketWrapperBase.java:764)
	at org.apache.tomcat.util.net.SocketWrapperBase.flushBlocking(SocketWrapperBase.java:717)
	at org.apache.tomcat.util.net.SocketWrapperBase.flush(SocketWrapperBase.java:707)
	at org.apache.coyote.http11.Http11OutputBuffer$SocketOutputBuffer.flush(Http11OutputBuffer.java:572)
	at org.apache.coyote.http11.filters.ChunkedOutputFilter.flush(ChunkedOutputFilter.java:157)
	at org.apache.coyote.http11.Http11OutputBuffer.flush(Http11OutputBuffer.java:220)
	at org.apache.coyote.http11.Http11Processor.flush(Http11Processor.java:1195)
	at org.apache.coyote.AbstractProcessor.action(AbstractProcessor.java:399)
	at org.apache.coyote.Response.action(Response.java:209)
	at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:305)
	... 54 common frames omitted
2023-05-16 00:27:32.784 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :428  [32m39102764588077056 [0;39m Failure in @ExceptionHandler com.jiawa.wiki.config.ControllerExceptionHandler#validExceptionHandler(Exception)
org.apache.catalina.connector.ClientAbortException: java.io.IOException: ä½ çš„ä¸»æœºä¸­çš„è½¯ä»¶ä¸­æ­¢äº†ä¸€ä¸ªå·²å»ºç«‹çš„è¿žæŽ¥ã€‚
	at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:309)
	at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:272)
	at org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:118)
	at java.io.FilterOutputStream.flush(FilterOutputStream.java:140)
	at com.fasterxml.jackson.core.json.UTF8JsonGenerator.flush(UTF8JsonGenerator.java:1176)
	at com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:1008)
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.writeInternal(AbstractJackson2HttpMessageConverter.java:345)
	at org.springframework.http.converter.AbstractGenericHttpMessageConverter.write(AbstractGenericHttpMessageConverter.java:104)
	at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:277)
	at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.handleReturnValue(RequestResponseBodyMethodProcessor.java:181)
	at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:124)
	at org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver.doResolveHandlerMethodException(ExceptionHandlerExceptionResolver.java:417)
	at org.springframework.web.servlet.handler.AbstractHandlerMethodExceptionResolver.doResolveException(AbstractHandlerMethodExceptionResolver.java:75)
	at org.springframework.web.servlet.handler.AbstractHandlerExceptionResolver.resolveException(AbstractHandlerExceptionResolver.java:141)
	at org.springframework.web.servlet.handler.HandlerExceptionResolverComposite.resolveException(HandlerExceptionResolverComposite.java:80)
	at org.springframework.web.servlet.DispatcherServlet.processHandlerException(DispatcherServlet.java:1321)
	at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1132)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1078)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:961)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:626)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.io.IOException: ä½ çš„ä¸»æœºä¸­çš„è½¯ä»¶ä¸­æ­¢äº†ä¸€ä¸ªå·²å»ºç«‹çš„è¿žæŽ¥ã€‚
	at sun.nio.ch.SocketDispatcher.write0(Native Method)
	at sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:51)
	at sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:93)
	at sun.nio.ch.IOUtil.write(IOUtil.java:65)
	at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:469)
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:138)
	at org.apache.tomcat.util.net.NioBlockingSelector.write(NioBlockingSelector.java:101)
	at org.apache.tomcat.util.net.NioSelectorPool.write(NioSelectorPool.java:152)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.doWrite(NioEndpoint.java:1253)
	at org.apache.tomcat.util.net.SocketWrapperBase.doWrite(SocketWrapperBase.java:764)
	at org.apache.tomcat.util.net.SocketWrapperBase.flushBlocking(SocketWrapperBase.java:717)
	at org.apache.tomcat.util.net.SocketWrapperBase.flush(SocketWrapperBase.java:707)
	at org.apache.coyote.http11.Http11OutputBuffer$SocketOutputBuffer.flush(Http11OutputBuffer.java:572)
	at org.apache.coyote.http11.filters.ChunkedOutputFilter.flush(ChunkedOutputFilter.java:157)
	at org.apache.coyote.http11.Http11OutputBuffer.flush(Http11OutputBuffer.java:220)
	at org.apache.coyote.http11.Http11Processor.flush(Http11Processor.java:1195)
	at org.apache.coyote.AbstractProcessor.action(AbstractProcessor.java:399)
	at org.apache.coyote.Response.action(Response.java:209)
	at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:305)
	... 57 common frames omitted
2023-05-16 00:27:35.020 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39106703840645120 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:27:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39106703840645120 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:27:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39106703840645120 [0;39m ==> Parameters: 
2023-05-16 00:27:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39106703840645120 [0;39m <==    Updates: 2
2023-05-16 00:27:35.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39106703840645120 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 00:27:36.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:27:36.870 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:27:38.920 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:27:40.965 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:27:40.966 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:27:43.005 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:27:43.005 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:27:45.034 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:27:45.036 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:27:47.064 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:27:51.144 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:27:53.192 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:28:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39106808681467904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:28:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39106808681467904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:28:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39106808681467904 [0;39m ==> Parameters: 
2023-05-16 00:28:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39106808681467904 [0;39m <==    Updates: 0
2023-05-16 00:28:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39106808681467904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-05-16 00:28:01.343 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:28:05.046 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39106829774622720 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:28:05.047 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39106829774622720 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:28:05.047 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39106829774622720 [0;39m ==> Parameters: 
2023-05-16 00:28:05.050 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39106829774622720 [0;39m <==    Updates: 2
2023-05-16 00:28:05.050 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39106829774622720 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-05-16 00:28:07.803 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:28:12.435 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:28:21.114 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:28:29.656 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:28:31.698 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:28:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39106955465330688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:28:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39106955465330688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:28:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39106955465330688 [0;39m ==> Parameters: 
2023-05-16 00:28:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39106955465330688 [0;39m <==    Updates: 2
2023-05-16 00:28:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39106955465330688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 00:28:37.819 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:28:41.551 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:28:43.920 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:28:49.324 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:28:58.280 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39107053058396160 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 00:28:58.280 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39107053058396160 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/2 GET
2023-05-16 00:28:58.280 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39107053058396160 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.CommentResp
2023-05-16 00:28:58.281 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39107053058396160 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 00:28:58.281 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39107053058396160 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 00:28:58.282 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39107053058396160 [0;39m ==>  Preparing: select * from comment where ebook_id = ?
2023-05-16 00:28:58.283 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39107053058396160 [0;39m ==> Parameters: 2(Long)
2023-05-16 00:28:58.284 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39107053058396160 [0;39m <==    Columns: id, user_id, ebook_id, parent_id, replyToUser_id, content, create_time, update_time
2023-05-16 00:28:58.284 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39107053058396160 [0;39m <==        Row: 25, 1, 2, null, null, Vueç®€ä»‹, 2023-05-14 16:35:46, null
2023-05-16 00:28:58.286 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39107053058396160 [0;39m <==        Row: 36, 2, 2, 25, 1, vueç®€ä»‹, 2023-05-14 21:02:45, null
2023-05-16 00:28:58.286 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39107053058396160 [0;39m <==        Row: 40, 1, 2, 36, 1, 11, 2023-05-15 21:02:45, null
2023-05-16 00:28:58.287 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39107053058396160 [0;39m <==      Total: 3
2023-05-16 00:29:13.929 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39107118690865152 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:29:13.930 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39107118690865152 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:29:15.108 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:29:15.109 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39107118690865152 [0;39m ==> Parameters: 
2023-05-16 00:29:15.111 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39107118690865152 [0;39m <==    Updates: 0
2023-05-16 00:29:17.529 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39107118690865152 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3600æ¯«ç§’
2023-05-16 00:29:17.529 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39107133794553856 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:29:17.529 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39107133794553856 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:29:17.529 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:29:17.529 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39107133794553856 [0;39m ==> Parameters: 
2023-05-16 00:29:17.539 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39107133794553856 [0;39m <==    Updates: 2
2023-05-16 00:29:17.539 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39107133794553856 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-05-16 00:29:17.540 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39107053058396160 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:29:17.540 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39107053058396160 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:29:17.540 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39107053058396160 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:29:17.540 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39107053058396160 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:29:17.540 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39107053058396160 [0;39m <==      Total: 1
2023-05-16 00:29:19.567 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:29:25.485 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:29:30.954 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39107053058396160 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:29:30.958 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39107053058396160 [0;39m ==> Parameters: 2(Long)
2023-05-16 00:29:30.962 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39107053058396160 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:29:30.964 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39107053058396160 [0;39m <==        Row: 2, 1, demo, b9b237df8bd22c295180ea0109cb7e67
2023-05-16 00:29:30.965 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39107053058396160 [0;39m <==      Total: 1
2023-05-16 00:29:32.185 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:29:35.137 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39107207647858688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:29:35.139 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39107207647858688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:29:35.139 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39107207647858688 [0;39m ==> Parameters: 
2023-05-16 00:29:35.144 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39107207647858688 [0;39m <==    Updates: 2
2023-05-16 00:29:35.144 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39107207647858688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-05-16 00:29:36.033 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39107053058396160 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:29:36.038 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39107053058396160 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:29:36.045 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39107053058396160 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:29:36.045 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39107053058396160 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:29:36.045 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39107053058396160 [0;39m <==      Total: 1
2023-05-16 00:29:39.213 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39107053058396160 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:29:39.224 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39107053058396160 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:29:39.227 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39107053058396160 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:29:39.227 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39107053058396160 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:29:39.227 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39107053058396160 [0;39m <==      Total: 1
2023-05-16 00:29:42.671 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:29:51.800 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39107053058396160 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:29:51.800 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39107053058396160 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:29:51.811 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39107053058396160 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:29:51.811 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39107053058396160 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:29:51.816 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39107053058396160 [0;39m <==      Total: 1
2023-05-16 00:29:55.653 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:29:55.653 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:30:00.643 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39107314627776512 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:30:00.643 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39107314627776512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:30:00.654 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39107314627776512 [0;39m ==> Parameters: 
2023-05-16 00:30:24.567 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39107314627776512 [0;39m <==    Updates: 0
2023-05-16 00:30:24.568 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39107314627776512 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š23925æ¯«ç§’
2023-05-16 00:30:24.568 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39107414976499712 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:30:31.703 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39107414976499712 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:30:31.706 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:30:31.707 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39107414976499712 [0;39m ==> Parameters: 
2023-05-16 00:30:31.708 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39107414976499712 [0;39m <==    Updates: 2
2023-05-16 00:30:31.708 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39107414976499712 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7140æ¯«ç§’
2023-05-16 00:30:35.345 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39107460178513920 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:30:36.125 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:30:36.125 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39107460178513920 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:30:36.126 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39107460178513920 [0;39m ==> Parameters: 
2023-05-16 00:30:36.128 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39107460178513920 [0;39m <==    Updates: 2
2023-05-16 00:30:36.128 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39107460178513920 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 00:30:40.643 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:30:43.633 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:30:47.736 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:30:53.756 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:31:01.838 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39107571298209792 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:31:01.838 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39107571298209792 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:31:09.470 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:31:09.471 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39107571298209792 [0;39m ==> Parameters: 
2023-05-16 00:31:12.035 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39107571298209792 [0;39m <==    Updates: 0
2023-05-16 00:31:12.035 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39107571298209792 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10197æ¯«ç§’
2023-05-16 00:31:12.035 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39107614067527680 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:31:13.795 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39107614067527680 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:31:18.254 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39107614067527680 [0;39m ==> Parameters: 
2023-05-16 00:31:22.904 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39107614067527680 [0;39m <==    Updates: 2
2023-05-16 00:31:23.992 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39107614067527680 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11165æ¯«ç§’
2023-05-16 00:31:23.994 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39107053058396160 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"Vueç®€ä»‹","createTime":1684053346000,"ebookId":2,"id":25,"name":"test","replies":[{"content":"vueç®€ä»‹","createTime":1684069365000,"ebookId":2,"id":36,"name":"demo","parentId":25,"replies":[{"content":"11","createTime":1684155765000,"ebookId":2,"id":40,"name":"test","parentId":36,"replies":[],"replyname":"test","replytouserId":1,"userId":1}],"replyname":"test","replytouserId":1,"userId":2}],"userId":1}],"success":true}
2023-05-16 00:31:23.994 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39107053058396160 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š145714 ms -------------
2023-05-16 00:31:24.014 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:31:26.067 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:31:30.152 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:31:32.184 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:31:34.222 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:31:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39107710427467776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:31:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39107710427467776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:31:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39107710427467776 [0;39m ==> Parameters: 
2023-05-16 00:31:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39107710427467776 [0;39m <==    Updates: 2
2023-05-16 00:31:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39107710427467776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 00:31:36.257 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:31:38.294 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:31:40.330 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:31:48.986 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:31:50.535 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:31:54.616 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:31:58.686 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:32:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39107815276679168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:32:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39107815276679168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:32:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39107815276679168 [0;39m ==> Parameters: 
2023-05-16 00:32:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39107815276679168 [0;39m <==    Updates: 0
2023-05-16 00:32:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39107815276679168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 00:32:02.769 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:32:04.810 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:32:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39107836285947904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:32:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39107836285947904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:32:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39107836285947904 [0;39m ==> Parameters: 
2023-05-16 00:32:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39107836285947904 [0;39m <==    Updates: 2
2023-05-16 00:32:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39107836285947904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 00:32:06.844 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:32:10.917 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:32:12.948 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:32:17.010 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:32:19.011 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:32:19.057 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:32:21.088 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:32:23.135 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:32:25.150 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:32:27.185 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:32:29.229 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:32:31.276 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:32:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39107962089902080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:32:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39107962089902080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:32:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39107962089902080 [0;39m ==> Parameters: 
2023-05-16 00:32:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39107962089902080 [0;39m <==    Updates: 2
2023-05-16 00:32:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39107962089902080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-16 00:32:35.341 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:32:37.370 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:32:45.592 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:32:47.622 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:32:48.995 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:32:51.712 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:32:57.853 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:32:59.917 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:33:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39108066947502080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:33:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39108066947502080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:33:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39108066947502080 [0;39m ==> Parameters: 
2023-05-16 00:33:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39108066947502080 [0;39m <==    Updates: 0
2023-05-16 00:33:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39108066947502080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-05-16 00:33:01.932 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:33:03.971 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:33:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39108087944187904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:33:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39108087944187904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:33:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39108087944187904 [0;39m ==> Parameters: 
2023-05-16 00:33:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39108087944187904 [0;39m <==    Updates: 2
2023-05-16 00:33:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39108087944187904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 00:33:05.998 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:33:08.041 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:33:12.103 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:33:14.157 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:33:16.206 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:33:18.993 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:33:20.276 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:33:26.480 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:33:30.533 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:33:32.559 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:33:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39108213748142080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:33:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39108213748142080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:33:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39108213748142080 [0;39m ==> Parameters: 
2023-05-16 00:33:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39108213748142080 [0;39m <==    Updates: 2
2023-05-16 00:33:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39108213748142080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 00:33:47.445 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:33:48.962 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:33:49.471 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:33:51.508 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:33:53.527 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:34:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39108318572187648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:34:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39108318572187648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:34:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39108318572187648 [0;39m ==> Parameters: 
2023-05-16 00:34:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39108318572187648 [0;39m <==    Updates: 0
2023-05-16 00:34:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39108318572187648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-05-16 00:34:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39108339543707648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:34:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39108339543707648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:34:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39108339543707648 [0;39m ==> Parameters: 
2023-05-16 00:34:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39108339543707648 [0;39m <==    Updates: 2
2023-05-16 00:34:05.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39108339543707648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-05-16 00:34:11.514 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:34:18.666 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:34:18.976 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:34:20.684 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:34:22.701 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:34:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39108465397993472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:34:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39108465397993472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:34:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39108465397993472 [0;39m ==> Parameters: 
2023-05-16 00:34:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39108465397993472 [0;39m <==    Updates: 2
2023-05-16 00:34:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39108465397993472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 00:34:35.586 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:34:48.654 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:34:48.966 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:34:50.672 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:34:52.693 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:34:57.640 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:34:59.670 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:35:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39108570289147904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:35:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39108570289147904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:35:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39108570289147904 [0;39m ==> Parameters: 
2023-05-16 00:35:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39108570289147904 [0;39m <==    Updates: 0
2023-05-16 00:35:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39108570289147904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 00:35:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39108591260667904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:35:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39108591260667904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:35:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39108591260667904 [0;39m ==> Parameters: 
2023-05-16 00:35:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39108591260667904 [0;39m <==    Updates: 2
2023-05-16 00:35:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39108591260667904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 00:35:18.640 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:35:18.963 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:35:22.710 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:35:24.725 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:35:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39108717077204992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:35:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39108717077204992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:35:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39108717077204992 [0;39m ==> Parameters: 
2023-05-16 00:35:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39108717077204992 [0;39m <==    Updates: 2
2023-05-16 00:35:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39108717077204992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 00:35:48.806 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:35:48.966 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:35:54.916 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:36:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39108821922222080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:36:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39108821922222080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:36:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39108821922222080 [0;39m ==> Parameters: 
2023-05-16 00:36:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39108821922222080 [0;39m <==    Updates: 0
2023-05-16 00:36:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39108821922222080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 00:36:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39108842893742080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:36:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39108842893742080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:36:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39108842893742080 [0;39m ==> Parameters: 
2023-05-16 00:36:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39108842893742080 [0;39m <==    Updates: 2
2023-05-16 00:36:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39108842893742080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-05-16 00:36:10.854 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:36:12.888 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:36:18.980 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:36:20.699 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:36:22.744 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:36:34.947 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:36:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39108968727056384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:36:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39108968727056384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:36:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39108968727056384 [0;39m ==> Parameters: 
2023-05-16 00:36:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39108968727056384 [0;39m <==    Updates: 2
2023-05-16 00:36:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39108968727056384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 00:36:36.995 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:36:48.635 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:36:48.978 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:36:52.714 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:36:59.043 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:37:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39109073576267776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:37:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39109073576267776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:37:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39109073576267776 [0;39m ==> Parameters: 
2023-05-16 00:37:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39109073576267776 [0;39m <==    Updates: 0
2023-05-16 00:37:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39109073576267776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-05-16 00:37:01.087 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:37:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39109094577147904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:37:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39109094577147904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:37:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39109094577147904 [0;39m ==> Parameters: 
2023-05-16 00:37:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39109094577147904 [0;39m <==    Updates: 2
2023-05-16 00:37:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39109094577147904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 00:37:18.652 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:37:18.979 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:37:20.697 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:37:22.733 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:37:24.776 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:37:26.822 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:37:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39109220385296384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:37:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39109220385296384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:37:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39109220385296384 [0;39m ==> Parameters: 
2023-05-16 00:37:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39109220385296384 [0;39m <==    Updates: 2
2023-05-16 00:37:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39109220385296384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 00:37:48.666 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:37:48.995 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:37:50.713 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:37:52.749 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:37:54.792 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:38:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39109325238702080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:38:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39109325238702080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:38:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39109325238702080 [0;39m ==> Parameters: 
2023-05-16 00:38:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39109325238702080 [0;39m <==    Updates: 0
2023-05-16 00:38:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39109325238702080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 00:38:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39109346210222080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:38:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39109346210222080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:38:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39109346210222080 [0;39m ==> Parameters: 
2023-05-16 00:38:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39109346210222080 [0;39m <==    Updates: 2
2023-05-16 00:38:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39109346210222080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 00:38:16.839 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:38:18.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:38:18.994 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:38:20.900 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:38:22.932 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:38:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39109472047730688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:38:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39109472047730688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:38:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39109472047730688 [0;39m ==> Parameters: 
2023-05-16 00:38:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39109472047730688 [0;39m <==    Updates: 2
2023-05-16 00:38:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39109472047730688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 00:38:43.933 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:38:48.635 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:38:49.011 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:38:50.669 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:38:52.713 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:39:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39109576892747776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:39:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39109576892747776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:39:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39109576892747776 [0;39m ==> Parameters: 
2023-05-16 00:39:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39109576892747776 [0;39m <==    Updates: 0
2023-05-16 00:39:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39109576892747776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-05-16 00:39:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39109597868462080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:39:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39109597868462080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:39:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39109597868462080 [0;39m ==> Parameters: 
2023-05-16 00:39:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39109597868462080 [0;39m <==    Updates: 2
2023-05-16 00:39:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39109597868462080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-05-16 00:39:05.982 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:39:08.008 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:39:18.654 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:39:19.009 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:39:20.697 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:39:22.730 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:39:32.103 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:39:35.000 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39109723655639040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:39:35.000 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39109723655639040 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:39:35.000 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39109723655639040 [0;39m ==> Parameters: 
2023-05-16 00:39:35.000 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39109723655639040 [0;39m <==    Updates: 2
2023-05-16 00:39:35.000 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39109723655639040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 00:39:48.650 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:39:48.973 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:39:52.745 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:39:56.846 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:40:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39109828567764992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:40:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39109828567764992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:40:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39109828567764992 [0;39m ==> Parameters: 
2023-05-16 00:40:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39109828567764992 [0;39m <==    Updates: 0
2023-05-16 00:40:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39109828567764992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-05-16 00:40:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39109849526702080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:40:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39109849526702080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:40:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39109849526702080 [0;39m ==> Parameters: 
2023-05-16 00:40:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39109849526702080 [0;39m <==    Updates: 2
2023-05-16 00:40:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39109849526702080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-05-16 00:40:18.621 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:40:18.978 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:40:20.652 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:40:22.697 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:40:24.736 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:40:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39109975326461952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:40:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39109975326461952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:40:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39109975326461952 [0;39m ==> Parameters: 
2023-05-16 00:40:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39109975326461952 [0;39m <==    Updates: 2
2023-05-16 00:40:35.003 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39109975326461952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 00:40:48.824 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:40:48.984 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:40:54.947 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:41:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39110080209227776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:41:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39110080209227776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:41:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39110080209227776 [0;39m ==> Parameters: 
2023-05-16 00:41:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39110080209227776 [0;39m <==    Updates: 0
2023-05-16 00:41:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39110080209227776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-05-16 00:41:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39110101180747776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:41:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39110101180747776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:41:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39110101180747776 [0;39m ==> Parameters: 
2023-05-16 00:41:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39110101180747776 [0;39m <==    Updates: 2
2023-05-16 00:41:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39110101180747776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 00:41:10.885 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:41:12.931 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:41:18.964 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:41:20.706 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:41:22.729 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:41:34.968 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:41:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39110227009867776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:41:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39110227009867776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:41:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39110227009867776 [0;39m ==> Parameters: 
2023-05-16 00:41:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39110227009867776 [0;39m <==    Updates: 2
2023-05-16 00:41:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39110227009867776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-16 00:41:37.010 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:41:48.989 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:41:50.701 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:41:52.730 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:42:00.092 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39110332215595008 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:42:00.093 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39110332215595008 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:42:00.094 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39110332215595008 [0;39m ==> Parameters: 
2023-05-16 00:42:00.095 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39110332215595008 [0;39m <==    Updates: 0
2023-05-16 00:42:00.095 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39110332215595008 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 00:42:01.134 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:42:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39110352864153600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:42:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39110352864153600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:42:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39110352864153600 [0;39m ==> Parameters: 
2023-05-16 00:42:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39110352864153600 [0;39m <==    Updates: 2
2023-05-16 00:42:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39110352864153600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-16 00:42:18.656 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:42:18.980 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:42:20.697 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:42:22.733 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:42:26.822 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:42:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39110478676496384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:42:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39110478676496384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:42:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39110478676496384 [0;39m ==> Parameters: 
2023-05-16 00:42:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39110478676496384 [0;39m <==    Updates: 2
2023-05-16 00:42:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39110478676496384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 00:42:48.651 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:42:48.982 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:42:50.697 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:42:52.739 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:42:54.770 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:43:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39110583534096384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:43:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39110583534096384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:43:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39110583534096384 [0;39m ==> Parameters: 
2023-05-16 00:43:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39110583534096384 [0;39m <==    Updates: 0
2023-05-16 00:43:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39110583534096384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 00:43:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39110604509810688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:43:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39110604509810688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:43:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39110604509810688 [0;39m ==> Parameters: 
2023-05-16 00:43:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39110604509810688 [0;39m <==    Updates: 2
2023-05-16 00:43:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39110604509810688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 00:43:08.674 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39110619869351936 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 00:43:08.674 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39110619869351937 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 00:43:08.674 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39110619869351936 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/2 GET
2023-05-16 00:43:08.674 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39110619869351937 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/2 GET
2023-05-16 00:43:08.674 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39110619869351936 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.CommentResp
2023-05-16 00:43:08.674 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39110619869351937 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-05-16 00:43:08.674 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39110619869351936 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 00:43:08.674 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39110619869351937 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 00:43:08.674 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39110619869351936 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 00:43:08.674 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39110619869351937 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 00:43:08.674 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39110619869351936 [0;39m ==>  Preparing: select * from comment where ebook_id = ?
2023-05-16 00:43:08.674 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39110619869351936 [0;39m ==> Parameters: 2(Long)
2023-05-16 00:43:08.679 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39110619869351936 [0;39m <==    Columns: id, user_id, ebook_id, parent_id, replyToUser_id, content, create_time, update_time
2023-05-16 00:43:08.679 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39110619869351936 [0;39m <==        Row: 25, 1, 2, null, null, Vueç®€ä»‹, 2023-05-14 16:35:46, null
2023-05-16 00:43:08.679 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39110619869351936 [0;39m <==        Row: 36, 2, 2, 25, 1, vueç®€ä»‹, 2023-05-14 21:02:45, null
2023-05-16 00:43:08.679 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39110619869351936 [0;39m <==        Row: 40, 1, 2, 36, 1, 11, 2023-05-15 21:02:45, null
2023-05-16 00:43:08.679 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39110619869351936 [0;39m <==      Total: 3
2023-05-16 00:43:26.106 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39110619869351936 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:43:26.106 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39110619869351936 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:43:26.106 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39110619869351936 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:43:26.106 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39110619869351936 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:43:26.106 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39110619869351936 [0;39m <==      Total: 1
2023-05-16 00:43:26.106 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39110619869351936 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:43:26.106 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39110619869351936 [0;39m ==> Parameters: 2(Long)
2023-05-16 00:43:26.114 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39110619869351936 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:43:26.114 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39110619869351936 [0;39m <==        Row: 2, 1, demo, b9b237df8bd22c295180ea0109cb7e67
2023-05-16 00:43:26.114 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39110619869351936 [0;39m <==      Total: 1
2023-05-16 00:43:26.114 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39110619869351936 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:43:26.114 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39110619869351936 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:43:26.114 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39110619869351936 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:43:26.114 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39110619869351936 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:43:26.114 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39110619869351936 [0;39m <==      Total: 1
2023-05-16 00:43:26.114 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39110619869351936 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:43:26.114 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39110619869351936 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:43:26.114 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39110619869351936 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:43:26.114 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39110619869351936 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:43:26.114 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39110619869351936 [0;39m <==      Total: 1
2023-05-16 00:43:26.114 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39110619869351936 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:43:26.114 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39110619869351936 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:43:26.114 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39110619869351936 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:43:26.114 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39110619869351936 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:43:26.114 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39110619869351936 [0;39m <==      Total: 1
2023-05-16 00:43:26.114 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39110619869351936 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"Vueç®€ä»‹","createTime":1684053346000,"ebookId":2,"id":25,"name":"test","replies":[{"content":"vueç®€ä»‹","createTime":1684069365000,"ebookId":2,"id":36,"name":"demo","parentId":25,"replies":[{"content":"11","createTime":1684155765000,"ebookId":2,"id":40,"name":"test","parentId":36,"replies":[],"replyname":"test","replytouserId":1,"userId":1}],"replyname":"test","replytouserId":1,"userId":2}],"userId":1}],"success":true}
2023-05-16 00:43:26.114 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39110619869351936 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š17440 ms -------------
2023-05-16 00:43:26.138 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m39110619869351937 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-05-16 00:43:26.138 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m39110619869351937 [0;39m ==> Parameters: 2(Long)
2023-05-16 00:43:26.138 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m39110619869351937 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-05-16 00:43:26.138 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m39110619869351937 [0;39m <==        Row: 38625501966897152, 2, 0, åˆè¯†Vue, 1, 72, 0
2023-05-16 00:43:26.146 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m39110619869351937 [0;39m <==      Total: 1
2023-05-16 00:43:26.154 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39110619869351937 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":2,"id":38625501966897152,"name":"åˆè¯†Vue","parent":0,"sort":1,"viewCount":72,"voteCount":0}],"success":true}
2023-05-16 00:43:26.157 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39110619869351937 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š17483 ms -------------
2023-05-16 00:43:26.170 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39110693252894720 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 00:43:26.170 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39110693252894720 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/38625501966897152 GET
2023-05-16 00:43:26.170 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39110693252894720 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-05-16 00:43:26.170 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39110693252894720 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 00:43:26.170 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39110693252894720 [0;39m è¯·æ±‚å‚æ•°: [38625501966897152]
2023-05-16 00:43:26.170 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m39110693252894720 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-05-16 00:43:26.170 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m39110693252894720 [0;39m ==> Parameters: 38625501966897152(Long)
2023-05-16 00:43:26.178 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m39110693252894720 [0;39m <==    Columns: id, content
2023-05-16 00:43:26.178 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m39110693252894720 [0;39m <==        Row: 38625501966897152, <<BLOB>>
2023-05-16 00:43:26.178 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m39110693252894720 [0;39m <==      Total: 1
2023-05-16 00:43:26.178 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m39110693252894720 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-05-16 00:43:26.178 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m39110693252894720 [0;39m ==> Parameters: 38625501966897152(Long)
2023-05-16 00:43:26.178 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m39110693252894720 [0;39m <==    Updates: 1
2023-05-16 00:43:26.178 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39110693252894720 [0;39m è¿”å›žç»“æžœ: {"content":"<p>å¦‚æžœè¯´æ˜¯JQueryæ˜¯æ‰‹å·¥ä½œåŠï¼Œé‚£ä¹ˆVue.jså°±åƒæ˜¯ä¸€åº§å·¥åŽ‚ï¼Œè™½ç„¶Vue.jsåšçš„ä»»ä½•äº‹æƒ…JQueryéƒ½å¯ä»¥åšï¼Œä½†æ— è®ºæ˜¯ä»£ç é‡è¿˜æ˜¯æµç¨‹è§„èŒƒæ€§éƒ½æ˜¯å‰è€…è¾ƒä¼˜ã€‚</p><p>Vue.jsçš„<a href=\"https://links.jianshu.com/go?to=https%3A%2F%2Fcn.vuejs.org%2Fv2%2Fguide%2F\" target=\"_blank\">å®˜æ–¹ä¸­æ–‡æ•™ç¨‹</a>å…¶å®žä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„æ•™ç¨‹ï¼Œä¸è¿‡ç›¸æ¯”äºŽä¸€æ¬¡æ€§æŠŠæ‰€æœ‰æ¦‚å¿µæŽŒæ¡ï¼Œæˆ‘æ›´å€¾å‘äºŽå…ˆä¼šç”¨ï¼Œä¹‹åŽå†åœ¨å®žé™…åº”ç”¨ä¸­æŠŠæœªæ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹é€æ­¥è¡¥å…¨ã€‚</p><p>å°±åƒå¼€è½¦ï¼Œä¸æ˜¯éžè¦çŸ¥é“å‘åŠ¨æœºçš„å·¥ä½œåŽŸç†æ‰èƒ½ä¸Šè·¯çš„ï¼Œç”šè‡³ä½ å¯èƒ½ä¸€è¾ˆå­ä¹Ÿä¸ç”¨çŸ¥é“ã€‚</p><p>å¥½äº†ï¼Œå¼€å§‹å§</p><p><br></p><p>\n\n\n\n\n\n\n\n\n<br><br>ä½œè€…ï¼šæ™¯è¡Œ1023<br>é“¾æŽ¥ï¼šhttps://www.jianshu.com/p/5d0d913d2453<br>æ¥æºï¼šç®€ä¹¦<br>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…èŽ·å¾—æŽˆæƒï¼Œéžå•†ä¸šè½¬è½½è¯·æ³¨æ˜Žå‡ºå¤„ã€‚</p>","success":true}
2023-05-16 00:43:26.178 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39110693252894720 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-05-16 00:43:28.152 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:43:28.167 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:43:30.187 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:43:32.237 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:43:34.276 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:43:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39110730330542080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:43:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39110730330542080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:43:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39110730330542080 [0;39m ==> Parameters: 
2023-05-16 00:43:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39110730330542080 [0;39m <==    Updates: 2
2023-05-16 00:43:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39110730330542080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-05-16 00:43:48.682 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:43:48.979 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:43:50.706 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:43:52.735 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:43:54.770 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:43:56.806 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:44:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39110835192336384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:44:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39110835192336384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:44:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39110835192336384 [0;39m ==> Parameters: 
2023-05-16 00:44:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39110835192336384 [0;39m <==    Updates: 0
2023-05-16 00:44:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39110835192336384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-05-16 00:44:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39110856134496256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:44:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39110856134496256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:44:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39110856134496256 [0;39m ==> Parameters: 
2023-05-16 00:44:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39110856134496256 [0;39m <==    Updates: 2
2023-05-16 00:44:05.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39110856134496256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-16 00:44:18.648 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:44:18.950 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:44:20.681 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:44:22.729 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:44:24.777 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:44:31.224 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39110966109147136 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 00:44:31.225 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39110966109147136 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/2 GET
2023-05-16 00:44:31.225 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39110966109147136 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.CommentResp
2023-05-16 00:44:31.225 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39110966109147136 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 00:44:31.225 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39110966109147136 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 00:44:31.226 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39110966109147136 [0;39m ==>  Preparing: select * from comment where ebook_id = ?
2023-05-16 00:44:31.226 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39110966109147136 [0;39m ==> Parameters: 2(Long)
2023-05-16 00:44:31.228 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39110966109147136 [0;39m <==    Columns: id, user_id, ebook_id, parent_id, replyToUser_id, content, create_time, update_time
2023-05-16 00:44:31.228 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39110966109147136 [0;39m <==        Row: 25, 1, 2, null, null, Vueç®€ä»‹, 2023-05-14 16:35:46, null
2023-05-16 00:44:31.229 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39110966109147136 [0;39m <==        Row: 36, 2, 2, 25, 1, vueç®€ä»‹, 2023-05-14 21:02:45, null
2023-05-16 00:44:31.230 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39110966109147136 [0;39m <==        Row: 40, 1, 2, 36, 1, 11, 2023-05-15 21:02:45, null
2023-05-16 00:44:31.230 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39110966109147136 [0;39m <==      Total: 3
2023-05-16 00:44:31.231 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39110966109147136 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:44:31.231 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39110966109147136 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:44:31.232 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39110966109147136 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:44:31.232 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39110966109147136 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:44:31.233 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39110966109147136 [0;39m <==      Total: 1
2023-05-16 00:44:31.233 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39110966109147136 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:44:31.233 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39110966109147136 [0;39m ==> Parameters: 2(Long)
2023-05-16 00:44:31.234 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39110966109147136 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:44:31.234 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39110966109147136 [0;39m <==        Row: 2, 1, demo, b9b237df8bd22c295180ea0109cb7e67
2023-05-16 00:44:31.235 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39110966109147136 [0;39m <==      Total: 1
2023-05-16 00:44:31.235 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39110966109147136 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:44:31.236 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39110966109147136 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:44:31.236 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39110966109147136 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:44:31.237 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39110966109147136 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:44:31.237 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39110966109147136 [0;39m <==      Total: 1
2023-05-16 00:44:31.238 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39110966109147136 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:44:31.238 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39110966109147136 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:44:31.239 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39110966109147136 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:44:31.239 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39110966109147136 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:44:31.239 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39110966109147136 [0;39m <==      Total: 1
2023-05-16 00:44:31.240 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39110966109147136 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:44:31.240 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39110966109147136 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:44:31.241 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39110966109147136 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:44:31.241 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39110966109147136 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:44:31.241 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39110966109147136 [0;39m <==      Total: 1
2023-05-16 00:44:31.242 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39110966109147136 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"Vueç®€ä»‹","createTime":1684053346000,"ebookId":2,"id":25,"name":"test","replies":[{"content":"vueç®€ä»‹","createTime":1684069365000,"ebookId":2,"id":36,"name":"demo","parentId":25,"replies":[{"content":"11","createTime":1684155765000,"ebookId":2,"id":40,"name":"test","parentId":36,"replies":[],"replyname":"test","replytouserId":1,"userId":1}],"replyname":"test","replytouserId":1,"userId":2}],"userId":1}],"success":true}
2023-05-16 00:44:31.242 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39110966109147136 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š18 ms -------------
2023-05-16 00:44:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39110981955227648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:44:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39110981955227648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:44:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39110981955227648 [0;39m ==> Parameters: 
2023-05-16 00:44:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39110981955227648 [0;39m <==    Updates: 2
2023-05-16 00:44:35.002 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39110981955227648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 00:44:46.805 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:44:48.842 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:44:48.994 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:44:50.878 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:44:52.914 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:44:54.962 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:45:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39111086808633344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:45:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39111086808633344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:45:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39111086808633344 [0;39m ==> Parameters: 
2023-05-16 00:45:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39111086808633344 [0;39m <==    Updates: 0
2023-05-16 00:45:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39111086808633344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-16 00:45:05.019 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39111107855650816 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:45:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39111107855650816 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:45:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39111107855650816 [0;39m ==> Parameters: 
2023-05-16 00:45:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39111107855650816 [0;39m <==    Updates: 2
2023-05-16 00:45:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39111107855650816 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 00:45:10.894 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:45:12.928 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:45:18.957 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:45:20.691 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:45:22.735 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:45:34.967 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:45:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39111233621856256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:45:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39111233621856256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:45:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39111233621856256 [0;39m ==> Parameters: 
2023-05-16 00:45:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39111233621856256 [0;39m <==    Updates: 2
2023-05-16 00:45:35.004 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39111233621856256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 00:45:36.987 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:45:37.015 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39111242056601600 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 00:45:37.015 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39111242056601601 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 00:45:37.015 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39111242056601600 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/2 GET
2023-05-16 00:45:37.015 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39111242056601601 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/2 GET
2023-05-16 00:45:37.015 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39111242056601600 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-05-16 00:45:37.015 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39111242056601601 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.CommentResp
2023-05-16 00:45:37.015 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39111242056601600 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 00:45:37.015 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39111242056601601 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 00:45:37.015 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39111242056601600 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 00:45:37.015 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39111242056601601 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 00:45:37.015 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39111242056601601 [0;39m ==>  Preparing: select * from comment where ebook_id = ?
2023-05-16 00:45:37.020 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39111242056601601 [0;39m ==> Parameters: 2(Long)
2023-05-16 00:45:37.020 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m39111242056601600 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-05-16 00:45:37.020 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m39111242056601600 [0;39m ==> Parameters: 2(Long)
2023-05-16 00:45:37.020 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39111242056601601 [0;39m <==    Columns: id, user_id, ebook_id, parent_id, replyToUser_id, content, create_time, update_time
2023-05-16 00:45:37.020 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39111242056601601 [0;39m <==        Row: 25, 1, 2, null, null, Vueç®€ä»‹, 2023-05-14 16:35:46, null
2023-05-16 00:45:37.020 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m39111242056601600 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-05-16 00:45:37.023 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m39111242056601600 [0;39m <==        Row: 38625501966897152, 2, 0, åˆè¯†Vue, 1, 73, 0
2023-05-16 00:45:37.023 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m39111242056601600 [0;39m <==      Total: 1
2023-05-16 00:45:37.023 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39111242056601600 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":2,"id":38625501966897152,"name":"åˆè¯†Vue","parent":0,"sort":1,"viewCount":73,"voteCount":0}],"success":true}
2023-05-16 00:45:37.023 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39111242056601600 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-05-16 00:45:37.023 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39111242056601601 [0;39m <==        Row: 36, 2, 2, 25, 1, vueç®€ä»‹, 2023-05-14 21:02:45, null
2023-05-16 00:45:37.023 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39111242056601601 [0;39m <==        Row: 40, 1, 2, 36, 1, 11, 2023-05-15 21:02:45, null
2023-05-16 00:45:37.023 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39111242056601601 [0;39m <==      Total: 3
2023-05-16 00:45:37.023 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39111242056601601 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:45:37.023 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39111242056601601 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:45:37.023 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39111242056601601 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:45:37.023 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39111242056601601 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:45:37.026 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39111242056601601 [0;39m <==      Total: 1
2023-05-16 00:45:37.026 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39111242056601601 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:45:37.026 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39111242056601601 [0;39m ==> Parameters: 2(Long)
2023-05-16 00:45:37.026 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39111242056601601 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:45:37.026 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39111242056601601 [0;39m <==        Row: 2, 1, demo, b9b237df8bd22c295180ea0109cb7e67
2023-05-16 00:45:37.026 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39111242056601601 [0;39m <==      Total: 1
2023-05-16 00:45:37.026 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39111242056601601 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:45:37.026 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39111242056601601 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:45:37.026 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39111242056601601 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:45:37.026 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39111242056601601 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:45:37.026 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39111242056601601 [0;39m <==      Total: 1
2023-05-16 00:45:37.026 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39111242056601601 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:45:37.026 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39111242056601601 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:45:37.026 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39111242056601601 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:45:37.026 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39111242056601601 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:45:37.031 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39111242056601601 [0;39m <==      Total: 1
2023-05-16 00:45:37.031 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39111242056601601 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:45:37.031 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39111242056601601 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:45:37.031 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39111242056601601 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:45:37.031 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39111242056601601 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:45:37.031 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39111242056601601 [0;39m <==      Total: 1
2023-05-16 00:45:37.031 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39111242056601601 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"Vueç®€ä»‹","createTime":1684053346000,"ebookId":2,"id":25,"name":"test","replies":[{"content":"vueç®€ä»‹","createTime":1684069365000,"ebookId":2,"id":36,"name":"demo","parentId":25,"replies":[{"content":"11","createTime":1684155765000,"ebookId":2,"id":40,"name":"test","parentId":36,"replies":[],"replyname":"test","replytouserId":1,"userId":1}],"replyname":"test","replytouserId":1,"userId":2}],"userId":1}],"success":true}
2023-05-16 00:45:37.031 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39111242056601601 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š16 ms -------------
2023-05-16 00:45:37.048 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39111242195013632 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 00:45:37.048 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39111242195013632 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/38625501966897152 GET
2023-05-16 00:45:37.048 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39111242195013632 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-05-16 00:45:37.048 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39111242195013632 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 00:45:37.048 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39111242195013632 [0;39m è¯·æ±‚å‚æ•°: [38625501966897152]
2023-05-16 00:45:37.048 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m39111242195013632 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-05-16 00:45:37.048 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m39111242195013632 [0;39m ==> Parameters: 38625501966897152(Long)
2023-05-16 00:45:37.048 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m39111242195013632 [0;39m <==    Columns: id, content
2023-05-16 00:45:37.048 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m39111242195013632 [0;39m <==        Row: 38625501966897152, <<BLOB>>
2023-05-16 00:45:37.048 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m39111242195013632 [0;39m <==      Total: 1
2023-05-16 00:45:37.048 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m39111242195013632 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-05-16 00:45:37.048 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m39111242195013632 [0;39m ==> Parameters: 38625501966897152(Long)
2023-05-16 00:45:37.053 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m39111242195013632 [0;39m <==    Updates: 1
2023-05-16 00:45:37.053 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39111242195013632 [0;39m è¿”å›žç»“æžœ: {"content":"<p>å¦‚æžœè¯´æ˜¯JQueryæ˜¯æ‰‹å·¥ä½œåŠï¼Œé‚£ä¹ˆVue.jså°±åƒæ˜¯ä¸€åº§å·¥åŽ‚ï¼Œè™½ç„¶Vue.jsåšçš„ä»»ä½•äº‹æƒ…JQueryéƒ½å¯ä»¥åšï¼Œä½†æ— è®ºæ˜¯ä»£ç é‡è¿˜æ˜¯æµç¨‹è§„èŒƒæ€§éƒ½æ˜¯å‰è€…è¾ƒä¼˜ã€‚</p><p>Vue.jsçš„<a href=\"https://links.jianshu.com/go?to=https%3A%2F%2Fcn.vuejs.org%2Fv2%2Fguide%2F\" target=\"_blank\">å®˜æ–¹ä¸­æ–‡æ•™ç¨‹</a>å…¶å®žä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„æ•™ç¨‹ï¼Œä¸è¿‡ç›¸æ¯”äºŽä¸€æ¬¡æ€§æŠŠæ‰€æœ‰æ¦‚å¿µæŽŒæ¡ï¼Œæˆ‘æ›´å€¾å‘äºŽå…ˆä¼šç”¨ï¼Œä¹‹åŽå†åœ¨å®žé™…åº”ç”¨ä¸­æŠŠæœªæ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹é€æ­¥è¡¥å…¨ã€‚</p><p>å°±åƒå¼€è½¦ï¼Œä¸æ˜¯éžè¦çŸ¥é“å‘åŠ¨æœºçš„å·¥ä½œåŽŸç†æ‰èƒ½ä¸Šè·¯çš„ï¼Œç”šè‡³ä½ å¯èƒ½ä¸€è¾ˆå­ä¹Ÿä¸ç”¨çŸ¥é“ã€‚</p><p>å¥½äº†ï¼Œå¼€å§‹å§</p><p><br></p><p>\n\n\n\n\n\n\n\n\n<br><br>ä½œè€…ï¼šæ™¯è¡Œ1023<br>é“¾æŽ¥ï¼šhttps://www.jianshu.com/p/5d0d913d2453<br>æ¥æºï¼šç®€ä¹¦<br>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…èŽ·å¾—æŽˆæƒï¼Œéžå•†ä¸šè½¬è½½è¯·æ³¨æ˜Žå‡ºå¤„ã€‚</p>","success":true}
2023-05-16 00:45:37.053 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39111242195013632 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-05-16 00:45:48.983 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:45:50.683 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:45:52.714 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:45:59.045 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:46:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39111338542370816 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:46:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39111338542370816 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:46:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39111338542370816 [0;39m ==> Parameters: 
2023-05-16 00:46:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39111338542370816 [0;39m <==    Updates: 0
2023-05-16 00:46:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39111338542370816 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 00:46:01.093 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:46:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39111359467753472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:46:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39111359467753472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:46:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39111359467753472 [0;39m ==> Parameters: 
2023-05-16 00:46:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39111359467753472 [0;39m <==    Updates: 2
2023-05-16 00:46:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39111359467753472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-05-16 00:46:18.644 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:46:18.958 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:46:20.660 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:46:22.703 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:46:26.777 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:46:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39111485322039296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:46:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39111485322039296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:46:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39111485322039296 [0;39m ==> Parameters: 
2023-05-16 00:46:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39111485322039296 [0;39m <==    Updates: 2
2023-05-16 00:46:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39111485322039296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 00:46:48.654 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:46:48.941 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:46:52.727 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:46:54.776 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:47:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39111590129307648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:47:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39111590129307648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:47:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39111590129307648 [0;39m ==> Parameters: 
2023-05-16 00:47:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39111590129307648 [0;39m <==    Updates: 0
2023-05-16 00:47:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39111590129307648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-05-16 00:47:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39111611159547904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:47:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39111611159547904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:47:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39111611159547904 [0;39m ==> Parameters: 
2023-05-16 00:47:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39111611159547904 [0;39m <==    Updates: 2
2023-05-16 00:47:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39111611159547904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 00:47:16.791 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:47:18.823 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:47:18.980 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:47:20.843 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:47:22.899 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:47:24.924 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:47:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39111736934141952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:47:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39111736934141952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:47:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39111736934141952 [0;39m ==> Parameters: 
2023-05-16 00:47:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39111736934141952 [0;39m <==    Updates: 2
2023-05-16 00:47:35.003 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39111736934141952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 00:47:40.887 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:47:42.928 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:47:48.982 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:47:50.669 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:47:52.701 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:48:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39111841816907776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:48:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39111841816907776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:48:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39111841816907776 [0;39m ==> Parameters: 
2023-05-16 00:48:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39111841816907776 [0;39m <==    Updates: 0
2023-05-16 00:48:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39111841816907776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 00:48:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39111862767456256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:48:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39111862767456256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:48:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39111862767456256 [0;39m ==> Parameters: 
2023-05-16 00:48:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39111862767456256 [0;39m <==    Updates: 2
2023-05-16 00:48:05.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39111862767456256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 00:48:07.007 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:48:18.669 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:48:18.979 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:48:20.705 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:48:22.740 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:48:31.056 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:48:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39111988588187648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:48:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39111988588187648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:48:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39111988588187648 [0;39m ==> Parameters: 
2023-05-16 00:48:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39111988588187648 [0;39m <==    Updates: 2
2023-05-16 00:48:35.003 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39111988588187648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-16 00:48:48.652 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:48:48.992 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:48:50.698 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:48:52.716 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:48:54.750 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:48:56.774 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:49:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39112093483536384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:49:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39112093483536384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:49:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39112093483536384 [0;39m ==> Parameters: 
2023-05-16 00:49:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39112093483536384 [0;39m <==    Updates: 0
2023-05-16 00:49:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39112093483536384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-05-16 00:49:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39112114450862080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:49:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39112114450862080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:49:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39112114450862080 [0;39m ==> Parameters: 
2023-05-16 00:49:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39112114450862080 [0;39m <==    Updates: 2
2023-05-16 00:49:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39112114450862080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 00:49:18.646 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:49:18.980 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:49:22.724 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:49:24.768 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:49:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39112240254816256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:49:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39112240254816256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:49:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39112240254816256 [0;39m ==> Parameters: 
2023-05-16 00:49:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39112240254816256 [0;39m <==    Updates: 2
2023-05-16 00:49:35.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39112240254816256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 00:49:46.827 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:49:48.854 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:49:49.014 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:49:50.902 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:49:52.949 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:49:54.994 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:50:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39112345133387776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:50:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39112345133387776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:50:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39112345133387776 [0;39m ==> Parameters: 
2023-05-16 00:50:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39112345133387776 [0;39m <==    Updates: 0
2023-05-16 00:50:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39112345133387776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 00:50:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39112366104907776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:50:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39112366104907776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:50:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39112366104907776 [0;39m ==> Parameters: 
2023-05-16 00:50:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39112366104907776 [0;39m <==    Updates: 2
2023-05-16 00:50:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39112366104907776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 00:50:10.899 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:50:12.928 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:50:18.639 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:50:18.979 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:50:22.727 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:50:34.986 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:50:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39112491925639168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:50:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39112491925639168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:50:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39112491925639168 [0;39m ==> Parameters: 
2023-05-16 00:50:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39112491925639168 [0;39m <==    Updates: 2
2023-05-16 00:50:35.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39112491925639168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-16 00:50:37.007 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:50:48.651 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:50:48.968 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:50:52.720 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:51:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39112596812599296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:51:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39112596812599296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:51:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39112596812599296 [0;39m ==> Parameters: 
2023-05-16 00:51:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39112596812599296 [0;39m <==    Updates: 0
2023-05-16 00:51:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39112596812599296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-05-16 00:51:01.074 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:51:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39112617788313600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:51:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39112617788313600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:51:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39112617788313600 [0;39m ==> Parameters: 
2023-05-16 00:51:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39112617788313600 [0;39m <==    Updates: 2
2023-05-16 00:51:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39112617788313600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 00:51:18.981 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:51:22.743 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:51:24.800 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:51:26.854 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:51:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39112743596462080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:51:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39112743596462080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:51:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39112743596462080 [0;39m ==> Parameters: 
2023-05-16 00:51:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39112743596462080 [0;39m <==    Updates: 2
2023-05-16 00:51:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39112743596462080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 00:51:48.667 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:51:48.979 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:51:50.713 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:51:52.770 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:51:54.808 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:52:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39112848458256384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:52:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39112848458256384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:52:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39112848458256384 [0;39m ==> Parameters: 
2023-05-16 00:52:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39112848458256384 [0;39m <==    Updates: 0
2023-05-16 00:52:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39112848458256384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-05-16 00:52:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39112869392027648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:52:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39112869392027648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:52:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39112869392027648 [0;39m ==> Parameters: 
2023-05-16 00:52:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39112869392027648 [0;39m <==    Updates: 2
2023-05-16 00:52:05.002 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39112869392027648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 00:52:18.896 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:52:18.983 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:52:20.933 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:52:25.013 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:52:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39112995258896384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:52:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39112995258896384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:52:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39112995258896384 [0;39m ==> Parameters: 
2023-05-16 00:52:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39112995258896384 [0;39m <==    Updates: 2
2023-05-16 00:52:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39112995258896384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-05-16 00:52:42.980 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:52:48.683 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:52:49.007 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:52:51.009 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39113062359371776 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 00:52:51.009 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39113062359371776 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/2 GET
2023-05-16 00:52:51.009 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39113062359371776 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-05-16 00:52:51.009 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39113062359371776 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 00:52:51.010 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39113062359371776 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 00:52:51.011 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m39113062359371776 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-05-16 00:52:51.011 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m39113062359371776 [0;39m ==> Parameters: 2(Long)
2023-05-16 00:52:51.012 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m39113062359371776 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-05-16 00:52:51.012 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m39113062359371776 [0;39m <==        Row: 38625501966897152, 2, 0, åˆè¯†Vue, 1, 74, 0
2023-05-16 00:52:51.012 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m39113062359371776 [0;39m <==      Total: 1
2023-05-16 00:52:51.013 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39113062359371776 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":2,"id":38625501966897152,"name":"åˆè¯†Vue","parent":0,"sort":1,"viewCount":74,"voteCount":0}],"success":true}
2023-05-16 00:52:51.013 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39113062359371776 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-05-16 00:52:51.156 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39113062975934464 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 00:52:51.156 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39113062975934464 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/2 GET
2023-05-16 00:52:51.156 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39113062975934464 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.CommentResp
2023-05-16 00:52:51.156 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39113062975934464 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 00:52:51.156 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39113062975934464 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 00:52:51.157 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39113062975934464 [0;39m ==>  Preparing: select * from comment where ebook_id = ?
2023-05-16 00:52:51.157 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39113062975934464 [0;39m ==> Parameters: 2(Long)
2023-05-16 00:52:51.158 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39113062975934464 [0;39m <==    Columns: id, user_id, ebook_id, parent_id, replyToUser_id, content, create_time, update_time
2023-05-16 00:52:51.158 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39113062975934464 [0;39m <==        Row: 25, 1, 2, null, null, Vueç®€ä»‹, 2023-05-14 16:35:46, null
2023-05-16 00:52:51.159 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39113062975934464 [0;39m <==        Row: 36, 2, 2, 25, 1, vueç®€ä»‹, 2023-05-14 21:02:45, null
2023-05-16 00:52:51.159 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39113062975934464 [0;39m <==        Row: 40, 1, 2, 36, 1, 11, 2023-05-15 21:02:45, null
2023-05-16 00:52:51.160 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39113062975934464 [0;39m <==      Total: 3
2023-05-16 00:52:51.160 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113062975934464 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:52:51.161 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113062975934464 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:52:51.161 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113062975934464 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:52:51.161 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113062975934464 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:52:51.162 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113062975934464 [0;39m <==      Total: 1
2023-05-16 00:52:51.162 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113062975934464 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:52:51.162 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113062975934464 [0;39m ==> Parameters: 2(Long)
2023-05-16 00:52:51.163 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113062975934464 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:52:51.163 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113062975934464 [0;39m <==        Row: 2, 1, demo, b9b237df8bd22c295180ea0109cb7e67
2023-05-16 00:52:51.163 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113062975934464 [0;39m <==      Total: 1
2023-05-16 00:52:51.164 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113062975934464 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:52:51.164 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113062975934464 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:52:51.164 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113062975934464 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:52:51.165 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113062975934464 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:52:51.165 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113062975934464 [0;39m <==      Total: 1
2023-05-16 00:52:51.165 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113062975934464 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:52:51.166 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113062975934464 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:52:51.166 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113062975934464 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:52:51.166 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113062975934464 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:52:51.167 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113062975934464 [0;39m <==      Total: 1
2023-05-16 00:52:51.167 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113062975934464 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:52:51.168 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113062975934464 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:52:51.169 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113062975934464 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:52:51.169 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113062975934464 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:52:51.169 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113062975934464 [0;39m <==      Total: 1
2023-05-16 00:52:51.170 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39113062975934464 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"Vueç®€ä»‹","createTime":1684053346000,"ebookId":2,"id":25,"name":"test","replies":[{"content":"vueç®€ä»‹","createTime":1684069365000,"ebookId":2,"id":36,"name":"demo","parentId":25,"replies":[{"content":"11","createTime":1684155765000,"ebookId":2,"id":40,"name":"test","parentId":36,"replies":[],"replyname":"test","replytouserId":1,"userId":1}],"replyname":"test","replytouserId":1,"userId":2}],"userId":1}],"success":true}
2023-05-16 00:52:51.170 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39113062975934464 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š14 ms -------------
2023-05-16 00:52:51.175 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39113063055626240 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 00:52:51.175 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39113063055626240 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/38625501966897152 GET
2023-05-16 00:52:51.175 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39113063055626240 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-05-16 00:52:51.175 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39113063055626240 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 00:52:51.175 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39113063055626240 [0;39m è¯·æ±‚å‚æ•°: [38625501966897152]
2023-05-16 00:52:51.176 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m39113063055626240 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-05-16 00:52:51.176 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m39113063055626240 [0;39m ==> Parameters: 38625501966897152(Long)
2023-05-16 00:52:51.177 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m39113063055626240 [0;39m <==    Columns: id, content
2023-05-16 00:52:51.177 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m39113063055626240 [0;39m <==        Row: 38625501966897152, <<BLOB>>
2023-05-16 00:52:51.177 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m39113063055626240 [0;39m <==      Total: 1
2023-05-16 00:52:51.179 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m39113063055626240 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-05-16 00:52:51.179 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m39113063055626240 [0;39m ==> Parameters: 38625501966897152(Long)
2023-05-16 00:52:51.186 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m39113063055626240 [0;39m <==    Updates: 1
2023-05-16 00:52:51.186 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39113063055626240 [0;39m è¿”å›žç»“æžœ: {"content":"<p>å¦‚æžœè¯´æ˜¯JQueryæ˜¯æ‰‹å·¥ä½œåŠï¼Œé‚£ä¹ˆVue.jså°±åƒæ˜¯ä¸€åº§å·¥åŽ‚ï¼Œè™½ç„¶Vue.jsåšçš„ä»»ä½•äº‹æƒ…JQueryéƒ½å¯ä»¥åšï¼Œä½†æ— è®ºæ˜¯ä»£ç é‡è¿˜æ˜¯æµç¨‹è§„èŒƒæ€§éƒ½æ˜¯å‰è€…è¾ƒä¼˜ã€‚</p><p>Vue.jsçš„<a href=\"https://links.jianshu.com/go?to=https%3A%2F%2Fcn.vuejs.org%2Fv2%2Fguide%2F\" target=\"_blank\">å®˜æ–¹ä¸­æ–‡æ•™ç¨‹</a>å…¶å®žä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„æ•™ç¨‹ï¼Œä¸è¿‡ç›¸æ¯”äºŽä¸€æ¬¡æ€§æŠŠæ‰€æœ‰æ¦‚å¿µæŽŒæ¡ï¼Œæˆ‘æ›´å€¾å‘äºŽå…ˆä¼šç”¨ï¼Œä¹‹åŽå†åœ¨å®žé™…åº”ç”¨ä¸­æŠŠæœªæ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹é€æ­¥è¡¥å…¨ã€‚</p><p>å°±åƒå¼€è½¦ï¼Œä¸æ˜¯éžè¦çŸ¥é“å‘åŠ¨æœºçš„å·¥ä½œåŽŸç†æ‰èƒ½ä¸Šè·¯çš„ï¼Œç”šè‡³ä½ å¯èƒ½ä¸€è¾ˆå­ä¹Ÿä¸ç”¨çŸ¥é“ã€‚</p><p>å¥½äº†ï¼Œå¼€å§‹å§</p><p><br></p><p>\n\n\n\n\n\n\n\n\n<br><br>ä½œè€…ï¼šæ™¯è¡Œ1023<br>é“¾æŽ¥ï¼šhttps://www.jianshu.com/p/5d0d913d2453<br>æ¥æºï¼šç®€ä¹¦<br>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…èŽ·å¾—æŽˆæƒï¼Œéžå•†ä¸šè½¬è½½è¯·æ³¨æ˜Žå‡ºå¤„ã€‚</p>","success":true}
2023-05-16 00:52:51.186 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39113063055626240 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š12 ms -------------
2023-05-16 00:52:52.759 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:53:00.000 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39113100070359040 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:53:00.000 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39113100070359040 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:53:00.000 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39113100070359040 [0;39m ==> Parameters: 
2023-05-16 00:53:00.000 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39113100070359040 [0;39m <==    Updates: 0
2023-05-16 00:53:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39113100070359040 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-05-16 00:53:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39113121092210688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:53:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39113121092210688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:53:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39113121092210688 [0;39m ==> Parameters: 
2023-05-16 00:53:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39113121092210688 [0;39m <==    Updates: 2
2023-05-16 00:53:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39113121092210688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-05-16 00:53:05.028 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:53:07.049 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:53:18.642 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:53:18.981 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:53:20.678 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:53:22.704 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:53:29.086 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:53:31.117 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:53:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39113246908747776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:53:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39113246908747776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:53:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39113246908747776 [0;39m ==> Parameters: 
2023-05-16 00:53:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39113246908747776 [0;39m <==    Updates: 2
2023-05-16 00:53:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39113246908747776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-16 00:53:40.342 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39113269276971008 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 00:53:40.342 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39113269276971008 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/2 GET
2023-05-16 00:53:40.342 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39113269276971008 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-05-16 00:53:40.342 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39113269276971008 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 00:53:40.343 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39113269276971008 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 00:53:40.345 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m39113269276971008 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-05-16 00:53:40.346 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m39113269276971008 [0;39m ==> Parameters: 2(Long)
2023-05-16 00:53:40.346 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m39113269276971008 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-05-16 00:53:40.347 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m39113269276971008 [0;39m <==        Row: 38625501966897152, 2, 0, åˆè¯†Vue, 1, 75, 0
2023-05-16 00:53:40.347 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m39113269276971008 [0;39m <==      Total: 1
2023-05-16 00:53:40.348 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39113269276971008 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":2,"id":38625501966897152,"name":"åˆè¯†Vue","parent":0,"sort":1,"viewCount":75,"voteCount":0}],"success":true}
2023-05-16 00:53:40.348 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39113269276971008 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-05-16 00:53:40.390 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39113269478297600 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 00:53:40.392 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39113269478297600 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/2 GET
2023-05-16 00:53:40.392 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39113269478297600 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.CommentResp
2023-05-16 00:53:40.392 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39113269478297600 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 00:53:40.392 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39113269478297600 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 00:53:40.392 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39113269478297600 [0;39m ==>  Preparing: select * from comment where ebook_id = ?
2023-05-16 00:53:40.392 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39113269478297600 [0;39m ==> Parameters: 2(Long)
2023-05-16 00:53:40.392 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39113269478297600 [0;39m <==    Columns: id, user_id, ebook_id, parent_id, replyToUser_id, content, create_time, update_time
2023-05-16 00:53:40.395 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39113269478297600 [0;39m <==        Row: 25, 1, 2, null, null, Vueç®€ä»‹, 2023-05-14 16:35:46, null
2023-05-16 00:53:40.395 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39113269478297600 [0;39m <==        Row: 36, 2, 2, 25, 1, vueç®€ä»‹, 2023-05-14 21:02:45, null
2023-05-16 00:53:40.395 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39113269478297600 [0;39m <==        Row: 40, 1, 2, 36, 1, 11, 2023-05-15 21:02:45, null
2023-05-16 00:53:40.395 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39113269478297600 [0;39m <==      Total: 3
2023-05-16 00:53:40.395 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113269478297600 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:53:40.395 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113269478297600 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:53:40.398 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113269478297600 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:53:40.398 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113269478297600 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:53:40.398 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113269478297600 [0;39m <==      Total: 1
2023-05-16 00:53:40.399 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113269478297600 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:53:40.399 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113269478297600 [0;39m ==> Parameters: 2(Long)
2023-05-16 00:53:40.399 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113269478297600 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:53:40.399 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113269478297600 [0;39m <==        Row: 2, 1, demo, b9b237df8bd22c295180ea0109cb7e67
2023-05-16 00:53:40.400 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113269478297600 [0;39m <==      Total: 1
2023-05-16 00:53:40.400 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113269478297600 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:53:40.400 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113269478297600 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:53:40.400 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113269478297600 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:53:40.401 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113269478297600 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:53:40.401 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113269478297600 [0;39m <==      Total: 1
2023-05-16 00:53:40.401 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113269478297600 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:53:40.402 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113269478297600 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:53:40.402 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113269478297600 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:53:40.402 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113269478297600 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:53:40.402 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113269478297600 [0;39m <==      Total: 1
2023-05-16 00:53:40.403 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113269478297600 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:53:40.403 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113269478297600 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:53:40.403 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113269478297600 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:53:40.403 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113269478297600 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:53:40.403 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113269478297600 [0;39m <==      Total: 1
2023-05-16 00:53:40.404 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39113269478297600 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"Vueç®€ä»‹","createTime":1684053346000,"ebookId":2,"id":25,"name":"test","replies":[{"content":"vueç®€ä»‹","createTime":1684069365000,"ebookId":2,"id":36,"name":"demo","parentId":25,"replies":[{"content":"11","createTime":1684155765000,"ebookId":2,"id":40,"name":"test","parentId":36,"replies":[],"replyname":"test","replytouserId":1,"userId":1}],"replyname":"test","replytouserId":1,"userId":2}],"userId":1}],"success":true}
2023-05-16 00:53:40.404 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39113269478297600 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š14 ms -------------
2023-05-16 00:53:40.406 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39113269545406464 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 00:53:40.406 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39113269545406464 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/38625501966897152 GET
2023-05-16 00:53:40.407 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39113269545406464 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-05-16 00:53:40.407 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39113269545406464 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 00:53:40.407 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39113269545406464 [0;39m è¯·æ±‚å‚æ•°: [38625501966897152]
2023-05-16 00:53:40.407 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m39113269545406464 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-05-16 00:53:40.407 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m39113269545406464 [0;39m ==> Parameters: 38625501966897152(Long)
2023-05-16 00:53:40.408 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m39113269545406464 [0;39m <==    Columns: id, content
2023-05-16 00:53:40.408 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m39113269545406464 [0;39m <==        Row: 38625501966897152, <<BLOB>>
2023-05-16 00:53:40.408 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m39113269545406464 [0;39m <==      Total: 1
2023-05-16 00:53:40.409 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m39113269545406464 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-05-16 00:53:40.409 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m39113269545406464 [0;39m ==> Parameters: 38625501966897152(Long)
2023-05-16 00:53:40.416 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m39113269545406464 [0;39m <==    Updates: 1
2023-05-16 00:53:40.417 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39113269545406464 [0;39m è¿”å›žç»“æžœ: {"content":"<p>å¦‚æžœè¯´æ˜¯JQueryæ˜¯æ‰‹å·¥ä½œåŠï¼Œé‚£ä¹ˆVue.jså°±åƒæ˜¯ä¸€åº§å·¥åŽ‚ï¼Œè™½ç„¶Vue.jsåšçš„ä»»ä½•äº‹æƒ…JQueryéƒ½å¯ä»¥åšï¼Œä½†æ— è®ºæ˜¯ä»£ç é‡è¿˜æ˜¯æµç¨‹è§„èŒƒæ€§éƒ½æ˜¯å‰è€…è¾ƒä¼˜ã€‚</p><p>Vue.jsçš„<a href=\"https://links.jianshu.com/go?to=https%3A%2F%2Fcn.vuejs.org%2Fv2%2Fguide%2F\" target=\"_blank\">å®˜æ–¹ä¸­æ–‡æ•™ç¨‹</a>å…¶å®žä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„æ•™ç¨‹ï¼Œä¸è¿‡ç›¸æ¯”äºŽä¸€æ¬¡æ€§æŠŠæ‰€æœ‰æ¦‚å¿µæŽŒæ¡ï¼Œæˆ‘æ›´å€¾å‘äºŽå…ˆä¼šç”¨ï¼Œä¹‹åŽå†åœ¨å®žé™…åº”ç”¨ä¸­æŠŠæœªæ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹é€æ­¥è¡¥å…¨ã€‚</p><p>å°±åƒå¼€è½¦ï¼Œä¸æ˜¯éžè¦çŸ¥é“å‘åŠ¨æœºçš„å·¥ä½œåŽŸç†æ‰èƒ½ä¸Šè·¯çš„ï¼Œç”šè‡³ä½ å¯èƒ½ä¸€è¾ˆå­ä¹Ÿä¸ç”¨çŸ¥é“ã€‚</p><p>å¥½äº†ï¼Œå¼€å§‹å§</p><p><br></p><p>\n\n\n\n\n\n\n\n\n<br><br>ä½œè€…ï¼šæ™¯è¡Œ1023<br>é“¾æŽ¥ï¼šhttps://www.jianshu.com/p/5d0d913d2453<br>æ¥æºï¼šç®€ä¹¦<br>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…èŽ·å¾—æŽˆæƒï¼Œéžå•†ä¸šè½¬è½½è¯·æ³¨æ˜Žå‡ºå¤„ã€‚</p>","success":true}
2023-05-16 00:53:40.417 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39113269545406464 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š13 ms -------------
2023-05-16 00:53:48.627 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:53:48.975 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:53:50.635 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:53:52.674 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:53:54.618 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39113329154854912 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 00:53:54.619 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39113329154854912 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/2 GET
2023-05-16 00:53:54.619 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39113329154854912 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-05-16 00:53:54.619 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39113329154854912 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 00:53:54.619 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39113329154854912 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 00:53:54.621 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m39113329154854912 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-05-16 00:53:54.621 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m39113329154854912 [0;39m ==> Parameters: 2(Long)
2023-05-16 00:53:54.622 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m39113329154854912 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-05-16 00:53:54.622 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m39113329154854912 [0;39m <==        Row: 38625501966897152, 2, 0, åˆè¯†Vue, 1, 76, 0
2023-05-16 00:53:54.622 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m39113329154854912 [0;39m <==      Total: 1
2023-05-16 00:53:54.623 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39113329154854912 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":2,"id":38625501966897152,"name":"åˆè¯†Vue","parent":0,"sort":1,"viewCount":76,"voteCount":0}],"success":true}
2023-05-16 00:53:54.623 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39113329154854912 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-05-16 00:53:54.626 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39113329188409344 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 00:53:54.626 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39113329188409344 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/2 GET
2023-05-16 00:53:54.626 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39113329188409344 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.CommentResp
2023-05-16 00:53:54.627 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39113329188409344 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 00:53:54.627 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39113329188409344 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 00:53:54.627 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39113329188409344 [0;39m ==>  Preparing: select * from comment where ebook_id = ?
2023-05-16 00:53:54.628 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39113329188409344 [0;39m ==> Parameters: 2(Long)
2023-05-16 00:53:54.629 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39113329188409344 [0;39m <==    Columns: id, user_id, ebook_id, parent_id, replyToUser_id, content, create_time, update_time
2023-05-16 00:53:54.629 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39113329188409344 [0;39m <==        Row: 25, 1, 2, null, null, Vueç®€ä»‹, 2023-05-14 16:35:46, null
2023-05-16 00:53:54.630 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39113329188409344 [0;39m <==        Row: 36, 2, 2, 25, 1, vueç®€ä»‹, 2023-05-14 21:02:45, null
2023-05-16 00:53:54.630 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39113329188409344 [0;39m <==        Row: 40, 1, 2, 36, 1, 11, 2023-05-15 21:02:45, null
2023-05-16 00:53:54.630 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39113329188409344 [0;39m <==      Total: 3
2023-05-16 00:53:54.631 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113329188409344 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:53:54.631 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113329188409344 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:53:54.632 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113329188409344 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:53:54.632 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113329188409344 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:53:54.632 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113329188409344 [0;39m <==      Total: 1
2023-05-16 00:53:54.633 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113329188409344 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:53:54.633 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113329188409344 [0;39m ==> Parameters: 2(Long)
2023-05-16 00:53:54.633 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113329188409344 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:53:54.634 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113329188409344 [0;39m <==        Row: 2, 1, demo, b9b237df8bd22c295180ea0109cb7e67
2023-05-16 00:53:54.634 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113329188409344 [0;39m <==      Total: 1
2023-05-16 00:53:54.635 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113329188409344 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:53:54.635 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113329188409344 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:53:54.636 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113329188409344 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:53:54.636 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113329188409344 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:53:54.636 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113329188409344 [0;39m <==      Total: 1
2023-05-16 00:53:54.636 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113329188409344 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:53:54.637 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113329188409344 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:53:54.637 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113329188409344 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:53:54.637 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113329188409344 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:53:54.638 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113329188409344 [0;39m <==      Total: 1
2023-05-16 00:53:54.638 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113329188409344 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:53:54.638 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113329188409344 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:53:54.638 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113329188409344 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:53:54.639 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113329188409344 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:53:54.639 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113329188409344 [0;39m <==      Total: 1
2023-05-16 00:53:54.639 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39113329188409344 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"Vueç®€ä»‹","createTime":1684053346000,"ebookId":2,"id":25,"name":"test","replies":[{"content":"vueç®€ä»‹","createTime":1684069365000,"ebookId":2,"id":36,"name":"demo","parentId":25,"replies":[{"content":"11","createTime":1684155765000,"ebookId":2,"id":40,"name":"test","parentId":36,"replies":[],"replyname":"test","replytouserId":1,"userId":1}],"replyname":"test","replytouserId":1,"userId":2}],"userId":1}],"success":true}
2023-05-16 00:53:54.639 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39113329188409344 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š13 ms -------------
2023-05-16 00:53:54.643 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39113329259712512 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 00:53:54.644 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39113329259712512 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/38625501966897152 GET
2023-05-16 00:53:54.644 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39113329259712512 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-05-16 00:53:54.644 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39113329259712512 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 00:53:54.644 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39113329259712512 [0;39m è¯·æ±‚å‚æ•°: [38625501966897152]
2023-05-16 00:53:54.644 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m39113329259712512 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-05-16 00:53:54.645 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m39113329259712512 [0;39m ==> Parameters: 38625501966897152(Long)
2023-05-16 00:53:54.646 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m39113329259712512 [0;39m <==    Columns: id, content
2023-05-16 00:53:54.646 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m39113329259712512 [0;39m <==        Row: 38625501966897152, <<BLOB>>
2023-05-16 00:53:54.646 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m39113329259712512 [0;39m <==      Total: 1
2023-05-16 00:53:54.647 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m39113329259712512 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-05-16 00:53:54.647 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m39113329259712512 [0;39m ==> Parameters: 38625501966897152(Long)
2023-05-16 00:53:54.654 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m39113329259712512 [0;39m <==    Updates: 1
2023-05-16 00:53:54.654 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39113329259712512 [0;39m è¿”å›žç»“æžœ: {"content":"<p>å¦‚æžœè¯´æ˜¯JQueryæ˜¯æ‰‹å·¥ä½œåŠï¼Œé‚£ä¹ˆVue.jså°±åƒæ˜¯ä¸€åº§å·¥åŽ‚ï¼Œè™½ç„¶Vue.jsåšçš„ä»»ä½•äº‹æƒ…JQueryéƒ½å¯ä»¥åšï¼Œä½†æ— è®ºæ˜¯ä»£ç é‡è¿˜æ˜¯æµç¨‹è§„èŒƒæ€§éƒ½æ˜¯å‰è€…è¾ƒä¼˜ã€‚</p><p>Vue.jsçš„<a href=\"https://links.jianshu.com/go?to=https%3A%2F%2Fcn.vuejs.org%2Fv2%2Fguide%2F\" target=\"_blank\">å®˜æ–¹ä¸­æ–‡æ•™ç¨‹</a>å…¶å®žä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„æ•™ç¨‹ï¼Œä¸è¿‡ç›¸æ¯”äºŽä¸€æ¬¡æ€§æŠŠæ‰€æœ‰æ¦‚å¿µæŽŒæ¡ï¼Œæˆ‘æ›´å€¾å‘äºŽå…ˆä¼šç”¨ï¼Œä¹‹åŽå†åœ¨å®žé™…åº”ç”¨ä¸­æŠŠæœªæ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹é€æ­¥è¡¥å…¨ã€‚</p><p>å°±åƒå¼€è½¦ï¼Œä¸æ˜¯éžè¦çŸ¥é“å‘åŠ¨æœºçš„å·¥ä½œåŽŸç†æ‰èƒ½ä¸Šè·¯çš„ï¼Œç”šè‡³ä½ å¯èƒ½ä¸€è¾ˆå­ä¹Ÿä¸ç”¨çŸ¥é“ã€‚</p><p>å¥½äº†ï¼Œå¼€å§‹å§</p><p><br></p><p>\n\n\n\n\n\n\n\n\n<br><br>ä½œè€…ï¼šæ™¯è¡Œ1023<br>é“¾æŽ¥ï¼šhttps://www.jianshu.com/p/5d0d913d2453<br>æ¥æºï¼šç®€ä¹¦<br>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…èŽ·å¾—æŽˆæƒï¼Œéžå•†ä¸šè½¬è½½è¯·æ³¨æ˜Žå‡ºå¤„ã€‚</p>","success":true}
2023-05-16 00:53:54.654 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39113329259712512 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š11 ms -------------
2023-05-16 00:53:54.708 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:53:56.740 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:54:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39113351736987648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:54:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39113351736987648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:54:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39113351736987648 [0;39m ==> Parameters: 
2023-05-16 00:54:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39113351736987648 [0;39m <==    Updates: 0
2023-05-16 00:54:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39113351736987648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-05-16 00:54:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39113372725284864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:54:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39113372725284864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:54:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39113372725284864 [0;39m ==> Parameters: 
2023-05-16 00:54:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39113372725284864 [0;39m <==    Updates: 2
2023-05-16 00:54:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39113372725284864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-05-16 00:54:18.978 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:54:20.668 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:54:22.713 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:54:24.747 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:54:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39113498579570688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:54:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39113498579570688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:54:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39113498579570688 [0;39m ==> Parameters: 
2023-05-16 00:54:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39113498579570688 [0;39m <==    Updates: 2
2023-05-16 00:54:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39113498579570688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 00:54:46.795 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:54:48.820 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:54:48.965 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:54:50.841 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:54:52.891 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:55:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39113603449753600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:55:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39113603449753600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:55:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39113603449753600 [0;39m ==> Parameters: 
2023-05-16 00:55:00.027 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39113603449753600 [0;39m <==    Updates: 0
2023-05-16 00:55:00.027 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39113603449753600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-05-16 00:55:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39113624425467904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:55:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39113624425467904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:55:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39113624425467904 [0;39m ==> Parameters: 
2023-05-16 00:55:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39113624425467904 [0;39m <==    Updates: 2
2023-05-16 00:55:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39113624425467904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 00:55:06.795 INFO  com.jiawa.wiki.websocket.WebSocketServer          :32   [32m39113062975934464 [0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šcElXxgDRM0ï¼Œsession idï¼š0ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2023-05-16 00:55:06.826 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39113632017158144 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 00:55:06.827 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39113632017158144 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/2 GET
2023-05-16 00:55:06.827 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39113632017158144 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-05-16 00:55:06.827 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39113632017158144 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 00:55:06.828 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39113632017158144 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 00:55:06.829 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m39113632017158144 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-05-16 00:55:06.829 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39113632029741056 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 00:55:06.829 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39113632029741056 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/2 GET
2023-05-16 00:55:06.829 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m39113632017158144 [0;39m ==> Parameters: 2(Long)
2023-05-16 00:55:06.829 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39113632029741056 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.CommentResp
2023-05-16 00:55:06.829 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39113632029741056 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 00:55:06.829 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39113632029741056 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 00:55:06.830 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m39113632017158144 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-05-16 00:55:06.830 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m39113632017158144 [0;39m <==        Row: 38625501966897152, 2, 0, åˆè¯†Vue, 1, 77, 0
2023-05-16 00:55:06.830 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39113632029741056 [0;39m ==>  Preparing: select * from comment where ebook_id = ?
2023-05-16 00:55:06.830 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39113632029741056 [0;39m ==> Parameters: 2(Long)
2023-05-16 00:55:06.830 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m39113632017158144 [0;39m <==      Total: 1
2023-05-16 00:55:06.831 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39113632017158144 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":2,"id":38625501966897152,"name":"åˆè¯†Vue","parent":0,"sort":1,"viewCount":77,"voteCount":0}],"success":true}
2023-05-16 00:55:06.831 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39113632017158144 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-05-16 00:55:06.831 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39113632029741056 [0;39m <==    Columns: id, user_id, ebook_id, parent_id, replyToUser_id, content, create_time, update_time
2023-05-16 00:55:06.831 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39113632029741056 [0;39m <==        Row: 25, 1, 2, null, null, Vueç®€ä»‹, 2023-05-14 16:35:46, null
2023-05-16 00:55:06.832 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39113632029741056 [0;39m <==        Row: 36, 2, 2, 25, 1, vueç®€ä»‹, 2023-05-14 21:02:45, null
2023-05-16 00:55:06.832 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39113632029741056 [0;39m <==        Row: 40, 1, 2, 36, 1, 11, 2023-05-15 21:02:45, null
2023-05-16 00:55:06.833 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39113632029741056 [0;39m <==      Total: 3
2023-05-16 00:55:06.833 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113632029741056 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:55:06.833 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113632029741056 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:55:06.834 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113632029741056 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:55:06.834 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113632029741056 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:55:06.835 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113632029741056 [0;39m <==      Total: 1
2023-05-16 00:55:06.835 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113632029741056 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:55:06.835 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113632029741056 [0;39m ==> Parameters: 2(Long)
2023-05-16 00:55:06.836 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113632029741056 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:55:06.836 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113632029741056 [0;39m <==        Row: 2, 1, demo, b9b237df8bd22c295180ea0109cb7e67
2023-05-16 00:55:06.836 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113632029741056 [0;39m <==      Total: 1
2023-05-16 00:55:06.836 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113632029741056 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:55:06.837 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113632029741056 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:55:06.837 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113632029741056 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:55:06.837 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113632029741056 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:55:06.837 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113632029741056 [0;39m <==      Total: 1
2023-05-16 00:55:06.837 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113632029741056 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:55:06.838 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113632029741056 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:55:06.838 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113632029741056 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:55:06.838 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113632029741056 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:55:06.839 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113632029741056 [0;39m <==      Total: 1
2023-05-16 00:55:06.839 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113632029741056 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:55:06.839 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113632029741056 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:55:06.840 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113632029741056 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:55:06.840 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113632029741056 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:55:06.840 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113632029741056 [0;39m <==      Total: 1
2023-05-16 00:55:06.841 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39113632029741056 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"Vueç®€ä»‹","createTime":1684053346000,"ebookId":2,"id":25,"name":"test","replies":[{"content":"vueç®€ä»‹","createTime":1684069365000,"ebookId":2,"id":36,"name":"demo","parentId":25,"replies":[{"content":"11","createTime":1684155765000,"ebookId":2,"id":40,"name":"test","parentId":36,"replies":[],"replyname":"test","replytouserId":1,"userId":1}],"replyname":"test","replytouserId":1,"userId":2}],"userId":1}],"success":true}
2023-05-16 00:55:06.841 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39113632029741056 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š12 ms -------------
2023-05-16 00:55:06.867 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39113632189124608 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 00:55:06.868 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39113632189124608 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/38625501966897152 GET
2023-05-16 00:55:06.868 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39113632189124608 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-05-16 00:55:06.868 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39113632189124608 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 00:55:06.868 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39113632189124608 [0;39m è¯·æ±‚å‚æ•°: [38625501966897152]
2023-05-16 00:55:06.869 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m39113632189124608 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-05-16 00:55:06.869 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m39113632189124608 [0;39m ==> Parameters: 38625501966897152(Long)
2023-05-16 00:55:06.871 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m39113632189124608 [0;39m <==    Columns: id, content
2023-05-16 00:55:06.871 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m39113632189124608 [0;39m <==        Row: 38625501966897152, <<BLOB>>
2023-05-16 00:55:06.871 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m39113632189124608 [0;39m <==      Total: 1
2023-05-16 00:55:06.871 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m39113632189124608 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-05-16 00:55:06.871 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m39113632189124608 [0;39m ==> Parameters: 38625501966897152(Long)
2023-05-16 00:55:06.876 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m39113632189124608 [0;39m <==    Updates: 1
2023-05-16 00:55:06.877 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39113632189124608 [0;39m è¿”å›žç»“æžœ: {"content":"<p>å¦‚æžœè¯´æ˜¯JQueryæ˜¯æ‰‹å·¥ä½œåŠï¼Œé‚£ä¹ˆVue.jså°±åƒæ˜¯ä¸€åº§å·¥åŽ‚ï¼Œè™½ç„¶Vue.jsåšçš„ä»»ä½•äº‹æƒ…JQueryéƒ½å¯ä»¥åšï¼Œä½†æ— è®ºæ˜¯ä»£ç é‡è¿˜æ˜¯æµç¨‹è§„èŒƒæ€§éƒ½æ˜¯å‰è€…è¾ƒä¼˜ã€‚</p><p>Vue.jsçš„<a href=\"https://links.jianshu.com/go?to=https%3A%2F%2Fcn.vuejs.org%2Fv2%2Fguide%2F\" target=\"_blank\">å®˜æ–¹ä¸­æ–‡æ•™ç¨‹</a>å…¶å®žä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„æ•™ç¨‹ï¼Œä¸è¿‡ç›¸æ¯”äºŽä¸€æ¬¡æ€§æŠŠæ‰€æœ‰æ¦‚å¿µæŽŒæ¡ï¼Œæˆ‘æ›´å€¾å‘äºŽå…ˆä¼šç”¨ï¼Œä¹‹åŽå†åœ¨å®žé™…åº”ç”¨ä¸­æŠŠæœªæ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹é€æ­¥è¡¥å…¨ã€‚</p><p>å°±åƒå¼€è½¦ï¼Œä¸æ˜¯éžè¦çŸ¥é“å‘åŠ¨æœºçš„å·¥ä½œåŽŸç†æ‰èƒ½ä¸Šè·¯çš„ï¼Œç”šè‡³ä½ å¯èƒ½ä¸€è¾ˆå­ä¹Ÿä¸ç”¨çŸ¥é“ã€‚</p><p>å¥½äº†ï¼Œå¼€å§‹å§</p><p><br></p><p>\n\n\n\n\n\n\n\n\n<br><br>ä½œè€…ï¼šæ™¯è¡Œ1023<br>é“¾æŽ¥ï¼šhttps://www.jianshu.com/p/5d0d913d2453<br>æ¥æºï¼šç®€ä¹¦<br>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…èŽ·å¾—æŽˆæƒï¼Œéžå•†ä¸šè½¬è½½è¯·æ³¨æ˜Žå‡ºå¤„ã€‚</p>","success":true}
2023-05-16 00:55:06.877 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39113632189124608 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š10 ms -------------
2023-05-16 00:55:10.797 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39113648672739328 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 00:55:10.798 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39113648672739328 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/2 GET
2023-05-16 00:55:10.798 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39113648672739328 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.CommentResp
2023-05-16 00:55:10.798 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39113648672739328 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 00:55:10.798 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39113648672739328 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 00:55:10.798 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39113648672739328 [0;39m ==>  Preparing: select * from comment where ebook_id = ?
2023-05-16 00:55:10.799 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39113648672739328 [0;39m ==> Parameters: 2(Long)
2023-05-16 00:55:10.800 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39113648672739328 [0;39m <==    Columns: id, user_id, ebook_id, parent_id, replyToUser_id, content, create_time, update_time
2023-05-16 00:55:10.800 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39113648672739328 [0;39m <==        Row: 25, 1, 2, null, null, Vueç®€ä»‹, 2023-05-14 16:35:46, null
2023-05-16 00:55:10.800 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39113648672739328 [0;39m <==        Row: 36, 2, 2, 25, 1, vueç®€ä»‹, 2023-05-14 21:02:45, null
2023-05-16 00:55:10.801 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39113648672739328 [0;39m <==        Row: 40, 1, 2, 36, 1, 11, 2023-05-15 21:02:45, null
2023-05-16 00:55:10.801 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39113648672739328 [0;39m <==      Total: 3
2023-05-16 00:55:10.802 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113648672739328 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:55:10.802 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113648672739328 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:55:10.802 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113648672739328 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:55:10.802 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113648672739328 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:55:10.803 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113648672739328 [0;39m <==      Total: 1
2023-05-16 00:55:10.803 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113648672739328 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:55:10.804 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113648672739328 [0;39m ==> Parameters: 2(Long)
2023-05-16 00:55:10.805 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113648672739328 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:55:10.805 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113648672739328 [0;39m <==        Row: 2, 1, demo, b9b237df8bd22c295180ea0109cb7e67
2023-05-16 00:55:10.805 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113648672739328 [0;39m <==      Total: 1
2023-05-16 00:55:10.805 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113648672739328 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:55:10.806 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113648672739328 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:55:10.806 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113648672739328 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:55:10.806 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113648672739328 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:55:10.806 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113648672739328 [0;39m <==      Total: 1
2023-05-16 00:55:10.807 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113648672739328 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:55:10.807 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113648672739328 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:55:10.807 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113648672739328 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:55:10.808 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113648672739328 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:55:10.808 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113648672739328 [0;39m <==      Total: 1
2023-05-16 00:55:10.808 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113648672739328 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 00:55:10.808 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113648672739328 [0;39m ==> Parameters: 1(Long)
2023-05-16 00:55:10.809 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113648672739328 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 00:55:10.809 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39113648672739328 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 00:55:10.809 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39113648672739328 [0;39m <==      Total: 1
2023-05-16 00:55:10.810 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39113648672739328 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"Vueç®€ä»‹","createTime":1684053346000,"ebookId":2,"id":25,"name":"test","replies":[{"content":"vueç®€ä»‹","createTime":1684069365000,"ebookId":2,"id":36,"name":"demo","parentId":25,"replies":[{"content":"11","createTime":1684155765000,"ebookId":2,"id":40,"name":"test","parentId":36,"replies":[],"replyname":"test","replytouserId":1,"userId":1}],"replyname":"test","replytouserId":1,"userId":2}],"userId":1}],"success":true}
2023-05-16 00:55:10.810 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39113648672739328 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š13 ms -------------
2023-05-16 00:55:11.847 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:55:13.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:55:18.639 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:55:18.969 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:55:20.672 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:55:22.686 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:55:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39113750225227776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:55:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39113750225227776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:55:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39113750225227776 [0;39m ==> Parameters: 
2023-05-16 00:55:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39113750225227776 [0;39m <==    Updates: 2
2023-05-16 00:55:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39113750225227776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-05-16 00:55:35.895 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:55:37.926 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:55:48.654 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:55:48.967 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:55:52.710 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:55:59.958 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:56:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39113855057661952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:56:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39113855057661952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:56:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39113855057661952 [0;39m ==> Parameters: 
2023-05-16 00:56:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39113855057661952 [0;39m <==    Updates: 0
2023-05-16 00:56:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39113855057661952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-05-16 00:56:01.999 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:56:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39113876033376256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:56:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39113876033376256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:56:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39113876033376256 [0;39m ==> Parameters: 
2023-05-16 00:56:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39113876033376256 [0;39m <==    Updates: 2
2023-05-16 00:56:05.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39113876033376256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-16 00:56:18.650 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:56:18.969 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:56:20.676 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:56:22.715 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:56:24.749 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:56:26.775 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:56:35.032 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39114001979936768 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:56:35.034 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39114001979936768 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:56:35.034 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39114001979936768 [0;39m ==> Parameters: 
2023-05-16 00:56:35.040 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39114001979936768 [0;39m <==    Updates: 2
2023-05-16 00:56:35.040 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39114001979936768 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-05-16 00:56:48.635 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:56:48.979 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:56:52.679 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:56:54.713 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:57:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39114106711707648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:57:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39114106711707648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:57:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39114106711707648 [0;39m ==> Parameters: 
2023-05-16 00:57:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39114106711707648 [0;39m <==    Updates: 0
2023-05-16 00:57:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39114106711707648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 00:57:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39114127725170688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:57:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39114127725170688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:57:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39114127725170688 [0;39m ==> Parameters: 
2023-05-16 00:57:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39114127725170688 [0;39m <==    Updates: 2
2023-05-16 00:57:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39114127725170688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 00:57:18.793 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:57:18.957 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:57:20.808 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:57:22.858 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:57:24.872 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:57:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39114253545902080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:57:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39114253545902080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:57:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39114253545902080 [0;39m ==> Parameters: 
2023-05-16 00:57:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39114253545902080 [0;39m <==    Updates: 2
2023-05-16 00:57:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39114253545902080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 00:57:42.882 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:57:48.646 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:57:48.963 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:57:50.665 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:57:52.693 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:58:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39114358378336256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:58:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39114358378336256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:58:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39114358378336256 [0;39m ==> Parameters: 
2023-05-16 00:58:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39114358378336256 [0;39m <==    Updates: 0
2023-05-16 00:58:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39114358378336256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-05-16 00:58:04.907 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:58:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39114379391799296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:58:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39114379391799296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:58:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39114379391799296 [0;39m ==> Parameters: 
2023-05-16 00:58:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39114379391799296 [0;39m <==    Updates: 2
2023-05-16 00:58:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39114379391799296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 00:58:06.945 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:58:18.619 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:58:18.968 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:58:20.640 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:58:22.654 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:58:28.970 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:58:30.997 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:58:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39114505204142080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:58:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39114505204142080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:58:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39114505204142080 [0;39m ==> Parameters: 
2023-05-16 00:58:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39114505204142080 [0;39m <==    Updates: 2
2023-05-16 00:58:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39114505204142080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 00:58:48.649 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:58:49.026 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:58:52.729 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:58:56.794 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:59:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39114610061742080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 00:59:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39114610061742080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 00:59:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39114610061742080 [0;39m ==> Parameters: 
2023-05-16 00:59:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39114610061742080 [0;39m <==    Updates: 0
2023-05-16 00:59:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39114610061742080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-05-16 00:59:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39114631029067776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:59:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39114631029067776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:59:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39114631029067776 [0;39m ==> Parameters: 
2023-05-16 00:59:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39114631029067776 [0;39m <==    Updates: 2
2023-05-16 00:59:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39114631029067776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 00:59:18.700 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:59:18.970 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:59:22.805 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:59:24.854 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:59:35.017 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39114756891742208 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 00:59:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39114756891742208 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 00:59:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39114756891742208 [0;39m ==> Parameters: 
2023-05-16 00:59:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39114756891742208 [0;39m <==    Updates: 2
2023-05-16 00:59:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39114756891742208 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-16 00:59:46.914 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:59:48.963 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:59:50.949 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 00:59:52.983 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:00:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39114861745147904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:00:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39114861745147904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:00:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39114861745147904 [0;39m ==> Parameters: 
2023-05-16 01:00:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39114861745147904 [0;39m <==    Updates: 0
2023-05-16 01:00:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39114861745147904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 01:00:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39114882687307776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:00:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39114882687307776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:00:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39114882687307776 [0;39m ==> Parameters: 
2023-05-16 01:00:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39114882687307776 [0;39m <==    Updates: 2
2023-05-16 01:00:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39114882687307776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 01:00:11.978 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:00:14.025 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:00:18.635 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:00:18.975 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:00:20.667 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:00:22.697 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:00:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39115008516427776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:00:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39115008516427776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:00:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39115008516427776 [0;39m ==> Parameters: 
2023-05-16 01:00:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39115008516427776 [0;39m <==    Updates: 2
2023-05-16 01:00:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39115008516427776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-16 01:00:36.064 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:00:38.096 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:00:48.634 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:00:48.968 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:00:50.672 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:00:52.697 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:01:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39115113361444864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:01:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39115113361444864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:01:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39115113361444864 [0;39m ==> Parameters: 
2023-05-16 01:01:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39115113361444864 [0;39m <==    Updates: 0
2023-05-16 01:01:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39115113361444864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-05-16 01:01:02.168 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:01:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39115134362324992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:01:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39115134362324992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:01:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39115134362324992 [0;39m ==> Parameters: 
2023-05-16 01:01:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39115134362324992 [0;39m <==    Updates: 2
2023-05-16 01:01:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39115134362324992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-05-16 01:01:18.653 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:01:18.966 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:01:20.677 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:01:22.702 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:01:26.785 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:01:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39115260166279168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:01:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39115260166279168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:01:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39115260166279168 [0;39m ==> Parameters: 
2023-05-16 01:01:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39115260166279168 [0;39m <==    Updates: 2
2023-05-16 01:01:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39115260166279168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 01:01:48.646 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:01:48.987 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:01:50.672 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:01:52.699 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:01:54.736 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:02:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39115365023879168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:02:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39115365023879168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:02:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39115365023879168 [0;39m ==> Parameters: 
2023-05-16 01:02:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39115365023879168 [0;39m <==    Updates: 0
2023-05-16 01:02:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39115365023879168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 01:02:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39115385978621952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:02:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39115385978621952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:02:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39115385978621952 [0;39m ==> Parameters: 
2023-05-16 01:02:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39115385978621952 [0;39m <==    Updates: 2
2023-05-16 01:02:05.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39115385978621952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 01:02:16.776 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:02:18.814 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:02:18.971 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:02:20.839 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:02:22.863 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:02:32.838 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39115502727073792 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 01:02:32.842 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39115502727073792 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/2 GET
2023-05-16 01:02:32.842 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39115502727073792 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-05-16 01:02:32.842 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39115502727073792 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 01:02:32.842 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39115502727073792 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 01:02:32.842 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m39115502727073792 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-05-16 01:02:32.842 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m39115502727073792 [0;39m ==> Parameters: 2(Long)
2023-05-16 01:02:32.842 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m39115502727073792 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-05-16 01:02:32.842 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m39115502727073792 [0;39m <==        Row: 38625501966897152, 2, 0, åˆè¯†Vue, 1, 78, 0
2023-05-16 01:02:32.842 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m39115502727073792 [0;39m <==      Total: 1
2023-05-16 01:02:32.842 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39115502727073792 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":2,"id":38625501966897152,"name":"åˆè¯†Vue","parent":0,"sort":1,"viewCount":78,"voteCount":0}],"success":true}
2023-05-16 01:02:32.842 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39115502727073792 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-05-16 01:02:32.842 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39115502743851008 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 01:02:32.842 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39115502743851008 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/2 GET
2023-05-16 01:02:32.842 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39115502743851008 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.CommentResp
2023-05-16 01:02:32.842 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39115502743851008 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 01:02:32.842 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39115502743851008 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 01:02:32.853 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39115502743851008 [0;39m ==>  Preparing: select * from comment where ebook_id = ?
2023-05-16 01:02:32.853 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39115502743851008 [0;39m ==> Parameters: 2(Long)
2023-05-16 01:02:32.853 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39115502743851008 [0;39m <==    Columns: id, user_id, ebook_id, parent_id, replyToUser_id, content, create_time, update_time
2023-05-16 01:02:32.854 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39115502743851008 [0;39m <==        Row: 25, 1, 2, null, null, Vueç®€ä»‹, 2023-05-14 16:35:46, null
2023-05-16 01:02:32.854 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39115502743851008 [0;39m <==        Row: 36, 2, 2, 25, 1, vueç®€ä»‹, 2023-05-14 21:02:45, null
2023-05-16 01:02:32.854 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39115502743851008 [0;39m <==        Row: 40, 1, 2, 36, 1, 11, 2023-05-15 21:02:45, null
2023-05-16 01:02:32.854 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39115502743851008 [0;39m <==      Total: 3
2023-05-16 01:02:32.854 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115502743851008 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:02:32.854 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115502743851008 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:02:32.854 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39115502743851008 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:02:32.854 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39115502743851008 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:02:32.854 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115502743851008 [0;39m <==      Total: 1
2023-05-16 01:02:32.854 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115502743851008 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:02:32.854 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115502743851008 [0;39m ==> Parameters: 2(Long)
2023-05-16 01:02:32.854 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39115502743851008 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:02:32.854 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39115502743851008 [0;39m <==        Row: 2, 1, demo, b9b237df8bd22c295180ea0109cb7e67
2023-05-16 01:02:32.854 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115502743851008 [0;39m <==      Total: 1
2023-05-16 01:02:32.854 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115502743851008 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:02:32.854 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115502743851008 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:02:32.854 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39115502743851008 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:02:32.854 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39115502743851008 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:02:32.854 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115502743851008 [0;39m <==      Total: 1
2023-05-16 01:02:32.854 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115502743851008 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:02:32.854 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115502743851008 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:02:32.854 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39115502743851008 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:02:32.854 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39115502743851008 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:02:32.854 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115502743851008 [0;39m <==      Total: 1
2023-05-16 01:02:32.854 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115502743851008 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:02:32.854 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115502743851008 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:02:32.854 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39115502743851008 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:02:32.854 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39115502743851008 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:02:32.854 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115502743851008 [0;39m <==      Total: 1
2023-05-16 01:02:32.854 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39115502743851008 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"Vueç®€ä»‹","createTime":1684053346000,"ebookId":2,"id":25,"name":"test","replies":[{"content":"vueç®€ä»‹","createTime":1684069365000,"ebookId":2,"id":36,"name":"demo","parentId":25,"replies":[{"content":"11","createTime":1684155765000,"ebookId":2,"id":40,"name":"test","parentId":36,"replies":[],"replyname":"test","replytouserId":1,"userId":1}],"replyname":"test","replytouserId":1,"userId":2}],"userId":1}],"success":true}
2023-05-16 01:02:32.854 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39115502743851008 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š12 ms -------------
2023-05-16 01:02:32.911 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39115503033257984 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 01:02:32.911 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39115503033257984 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/38625501966897152 GET
2023-05-16 01:02:32.911 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39115503033257984 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-05-16 01:02:32.917 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39115503033257984 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 01:02:32.917 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39115503033257984 [0;39m è¯·æ±‚å‚æ•°: [38625501966897152]
2023-05-16 01:02:32.917 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m39115503033257984 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-05-16 01:02:32.917 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m39115503033257984 [0;39m ==> Parameters: 38625501966897152(Long)
2023-05-16 01:02:32.917 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m39115503033257984 [0;39m <==    Columns: id, content
2023-05-16 01:02:32.917 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m39115503033257984 [0;39m <==        Row: 38625501966897152, <<BLOB>>
2023-05-16 01:02:32.917 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m39115503033257984 [0;39m <==      Total: 1
2023-05-16 01:02:32.917 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m39115503033257984 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-05-16 01:02:32.917 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m39115503033257984 [0;39m ==> Parameters: 38625501966897152(Long)
2023-05-16 01:02:32.922 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m39115503033257984 [0;39m <==    Updates: 1
2023-05-16 01:02:32.922 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39115503033257984 [0;39m è¿”å›žç»“æžœ: {"content":"<p>å¦‚æžœè¯´æ˜¯JQueryæ˜¯æ‰‹å·¥ä½œåŠï¼Œé‚£ä¹ˆVue.jså°±åƒæ˜¯ä¸€åº§å·¥åŽ‚ï¼Œè™½ç„¶Vue.jsåšçš„ä»»ä½•äº‹æƒ…JQueryéƒ½å¯ä»¥åšï¼Œä½†æ— è®ºæ˜¯ä»£ç é‡è¿˜æ˜¯æµç¨‹è§„èŒƒæ€§éƒ½æ˜¯å‰è€…è¾ƒä¼˜ã€‚</p><p>Vue.jsçš„<a href=\"https://links.jianshu.com/go?to=https%3A%2F%2Fcn.vuejs.org%2Fv2%2Fguide%2F\" target=\"_blank\">å®˜æ–¹ä¸­æ–‡æ•™ç¨‹</a>å…¶å®žä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„æ•™ç¨‹ï¼Œä¸è¿‡ç›¸æ¯”äºŽä¸€æ¬¡æ€§æŠŠæ‰€æœ‰æ¦‚å¿µæŽŒæ¡ï¼Œæˆ‘æ›´å€¾å‘äºŽå…ˆä¼šç”¨ï¼Œä¹‹åŽå†åœ¨å®žé™…åº”ç”¨ä¸­æŠŠæœªæ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹é€æ­¥è¡¥å…¨ã€‚</p><p>å°±åƒå¼€è½¦ï¼Œä¸æ˜¯éžè¦çŸ¥é“å‘åŠ¨æœºçš„å·¥ä½œåŽŸç†æ‰èƒ½ä¸Šè·¯çš„ï¼Œç”šè‡³ä½ å¯èƒ½ä¸€è¾ˆå­ä¹Ÿä¸ç”¨çŸ¥é“ã€‚</p><p>å¥½äº†ï¼Œå¼€å§‹å§</p><p><br></p><p>\n\n\n\n\n\n\n\n\n<br><br>ä½œè€…ï¼šæ™¯è¡Œ1023<br>é“¾æŽ¥ï¼šhttps://www.jianshu.com/p/5d0d913d2453<br>æ¥æºï¼šç®€ä¹¦<br>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…èŽ·å¾—æŽˆæƒï¼Œéžå•†ä¸šè½¬è½½è¯·æ³¨æ˜Žå‡ºå¤„ã€‚</p>","success":true}
2023-05-16 01:02:32.922 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39115503033257984 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š11 ms -------------
2023-05-16 01:02:32.957 INFO  com.jiawa.wiki.websocket.WebSocketServer          :41   [32m39113062975934464 [0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šcElXxgDRM0ï¼Œsession idï¼š0ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2023-05-16 01:02:33.583 INFO  com.jiawa.wiki.websocket.WebSocketServer          :32   [32m39113632017158144 [0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šrSEWktwgmLï¼Œsession idï¼š1ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2023-05-16 01:02:33.643 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39115506103488513 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 01:02:33.643 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39115506103488512 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 01:02:33.643 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39115506103488512 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/2 GET
2023-05-16 01:02:33.643 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39115506103488513 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/2 GET
2023-05-16 01:02:33.644 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39115506103488512 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.CommentResp
2023-05-16 01:02:33.644 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39115506103488512 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 01:02:33.644 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39115506103488513 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-05-16 01:02:33.644 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39115506103488513 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 01:02:33.644 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39115506103488512 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 01:02:33.644 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39115506103488513 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 01:02:33.644 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39115506103488512 [0;39m ==>  Preparing: select * from comment where ebook_id = ?
2023-05-16 01:02:33.645 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39115506103488512 [0;39m ==> Parameters: 2(Long)
2023-05-16 01:02:33.645 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m39115506103488513 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-05-16 01:02:33.645 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m39115506103488513 [0;39m ==> Parameters: 2(Long)
2023-05-16 01:02:33.646 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39115506103488512 [0;39m <==    Columns: id, user_id, ebook_id, parent_id, replyToUser_id, content, create_time, update_time
2023-05-16 01:02:33.646 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39115506103488512 [0;39m <==        Row: 25, 1, 2, null, null, Vueç®€ä»‹, 2023-05-14 16:35:46, null
2023-05-16 01:02:33.646 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m39115506103488513 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-05-16 01:02:33.646 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m39115506103488513 [0;39m <==        Row: 38625501966897152, 2, 0, åˆè¯†Vue, 1, 79, 0
2023-05-16 01:02:33.646 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39115506103488512 [0;39m <==        Row: 36, 2, 2, 25, 1, vueç®€ä»‹, 2023-05-14 21:02:45, null
2023-05-16 01:02:33.646 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m39115506103488513 [0;39m <==      Total: 1
2023-05-16 01:02:33.647 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39115506103488512 [0;39m <==        Row: 40, 1, 2, 36, 1, 11, 2023-05-15 21:02:45, null
2023-05-16 01:02:33.647 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39115506103488513 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":2,"id":38625501966897152,"name":"åˆè¯†Vue","parent":0,"sort":1,"viewCount":79,"voteCount":0}],"success":true}
2023-05-16 01:02:33.647 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39115506103488513 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-05-16 01:02:33.647 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39115506103488512 [0;39m <==      Total: 3
2023-05-16 01:02:33.647 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115506103488512 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:02:33.647 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115506103488512 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:02:33.648 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39115506103488512 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:02:33.649 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39115506103488512 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:02:33.649 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115506103488512 [0;39m <==      Total: 1
2023-05-16 01:02:33.649 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115506103488512 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:02:33.650 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115506103488512 [0;39m ==> Parameters: 2(Long)
2023-05-16 01:02:33.650 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39115506103488512 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:02:33.650 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39115506103488512 [0;39m <==        Row: 2, 1, demo, b9b237df8bd22c295180ea0109cb7e67
2023-05-16 01:02:33.651 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115506103488512 [0;39m <==      Total: 1
2023-05-16 01:02:33.651 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115506103488512 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:02:33.651 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115506103488512 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:02:33.651 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39115506103488512 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:02:33.651 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39115506103488512 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:02:33.653 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115506103488512 [0;39m <==      Total: 1
2023-05-16 01:02:33.653 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115506103488512 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:02:33.653 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115506103488512 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:02:33.654 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39115506103488512 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:02:33.654 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39115506103488512 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:02:33.654 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115506103488512 [0;39m <==      Total: 1
2023-05-16 01:02:33.654 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115506103488512 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:02:33.654 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115506103488512 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:02:33.655 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39115506103488512 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:02:33.655 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39115506103488512 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:02:33.655 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115506103488512 [0;39m <==      Total: 1
2023-05-16 01:02:33.655 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39115506103488512 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"Vueç®€ä»‹","createTime":1684053346000,"ebookId":2,"id":25,"name":"test","replies":[{"content":"vueç®€ä»‹","createTime":1684069365000,"ebookId":2,"id":36,"name":"demo","parentId":25,"replies":[{"content":"11","createTime":1684155765000,"ebookId":2,"id":40,"name":"test","parentId":36,"replies":[],"replyname":"test","replytouserId":1,"userId":1}],"replyname":"test","replytouserId":1,"userId":2}],"userId":1}],"success":true}
2023-05-16 01:02:33.655 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39115506103488512 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š12 ms -------------
2023-05-16 01:02:33.670 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39115506216734720 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 01:02:33.671 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39115506216734720 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/38625501966897152 GET
2023-05-16 01:02:33.671 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39115506216734720 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-05-16 01:02:33.671 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39115506216734720 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 01:02:33.671 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39115506216734720 [0;39m è¯·æ±‚å‚æ•°: [38625501966897152]
2023-05-16 01:02:33.671 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m39115506216734720 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-05-16 01:02:33.672 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m39115506216734720 [0;39m ==> Parameters: 38625501966897152(Long)
2023-05-16 01:02:33.673 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m39115506216734720 [0;39m <==    Columns: id, content
2023-05-16 01:02:33.673 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m39115506216734720 [0;39m <==        Row: 38625501966897152, <<BLOB>>
2023-05-16 01:02:33.673 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m39115506216734720 [0;39m <==      Total: 1
2023-05-16 01:02:33.674 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m39115506216734720 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-05-16 01:02:33.674 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m39115506216734720 [0;39m ==> Parameters: 38625501966897152(Long)
2023-05-16 01:02:33.681 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m39115506216734720 [0;39m <==    Updates: 1
2023-05-16 01:02:33.682 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39115506216734720 [0;39m è¿”å›žç»“æžœ: {"content":"<p>å¦‚æžœè¯´æ˜¯JQueryæ˜¯æ‰‹å·¥ä½œåŠï¼Œé‚£ä¹ˆVue.jså°±åƒæ˜¯ä¸€åº§å·¥åŽ‚ï¼Œè™½ç„¶Vue.jsåšçš„ä»»ä½•äº‹æƒ…JQueryéƒ½å¯ä»¥åšï¼Œä½†æ— è®ºæ˜¯ä»£ç é‡è¿˜æ˜¯æµç¨‹è§„èŒƒæ€§éƒ½æ˜¯å‰è€…è¾ƒä¼˜ã€‚</p><p>Vue.jsçš„<a href=\"https://links.jianshu.com/go?to=https%3A%2F%2Fcn.vuejs.org%2Fv2%2Fguide%2F\" target=\"_blank\">å®˜æ–¹ä¸­æ–‡æ•™ç¨‹</a>å…¶å®žä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„æ•™ç¨‹ï¼Œä¸è¿‡ç›¸æ¯”äºŽä¸€æ¬¡æ€§æŠŠæ‰€æœ‰æ¦‚å¿µæŽŒæ¡ï¼Œæˆ‘æ›´å€¾å‘äºŽå…ˆä¼šç”¨ï¼Œä¹‹åŽå†åœ¨å®žé™…åº”ç”¨ä¸­æŠŠæœªæ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹é€æ­¥è¡¥å…¨ã€‚</p><p>å°±åƒå¼€è½¦ï¼Œä¸æ˜¯éžè¦çŸ¥é“å‘åŠ¨æœºçš„å·¥ä½œåŽŸç†æ‰èƒ½ä¸Šè·¯çš„ï¼Œç”šè‡³ä½ å¯èƒ½ä¸€è¾ˆå­ä¹Ÿä¸ç”¨çŸ¥é“ã€‚</p><p>å¥½äº†ï¼Œå¼€å§‹å§</p><p><br></p><p>\n\n\n\n\n\n\n\n\n<br><br>ä½œè€…ï¼šæ™¯è¡Œ1023<br>é“¾æŽ¥ï¼šhttps://www.jianshu.com/p/5d0d913d2453<br>æ¥æºï¼šç®€ä¹¦<br>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…èŽ·å¾—æŽˆæƒï¼Œéžå•†ä¸šè½¬è½½è¯·æ³¨æ˜Žå‡ºå¤„ã€‚</p>","success":true}
2023-05-16 01:02:33.682 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39115506216734720 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š12 ms -------------
2023-05-16 01:02:35.042 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39115511971319808 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:02:35.045 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39115511971319808 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:02:35.045 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39115511971319808 [0;39m ==> Parameters: 
2023-05-16 01:02:35.049 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39115511971319808 [0;39m <==    Updates: 2
2023-05-16 01:02:35.049 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39115511971319808 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-05-16 01:02:38.532 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39115526609440768 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 01:02:38.533 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39115526609440768 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/2 GET
2023-05-16 01:02:38.533 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39115526609440768 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.CommentResp
2023-05-16 01:02:38.533 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39115526609440768 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 01:02:38.533 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39115526609440768 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 01:02:38.534 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39115526609440768 [0;39m ==>  Preparing: select * from comment where ebook_id = ?
2023-05-16 01:02:38.534 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39115526609440768 [0;39m ==> Parameters: 2(Long)
2023-05-16 01:02:38.535 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39115526609440768 [0;39m <==    Columns: id, user_id, ebook_id, parent_id, replyToUser_id, content, create_time, update_time
2023-05-16 01:02:38.535 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39115526609440768 [0;39m <==        Row: 25, 1, 2, null, null, Vueç®€ä»‹, 2023-05-14 16:35:46, null
2023-05-16 01:02:38.536 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39115526609440768 [0;39m <==        Row: 36, 2, 2, 25, 1, vueç®€ä»‹, 2023-05-14 21:02:45, null
2023-05-16 01:02:38.536 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39115526609440768 [0;39m <==        Row: 40, 1, 2, 36, 1, 11, 2023-05-15 21:02:45, null
2023-05-16 01:02:38.536 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39115526609440768 [0;39m <==      Total: 3
2023-05-16 01:02:38.537 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115526609440768 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:02:38.537 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115526609440768 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:02:38.538 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39115526609440768 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:02:38.538 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39115526609440768 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:02:38.538 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115526609440768 [0;39m <==      Total: 1
2023-05-16 01:02:38.540 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115526609440768 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:02:38.540 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115526609440768 [0;39m ==> Parameters: 2(Long)
2023-05-16 01:02:38.541 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39115526609440768 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:02:38.541 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39115526609440768 [0;39m <==        Row: 2, 1, demo, b9b237df8bd22c295180ea0109cb7e67
2023-05-16 01:02:38.541 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115526609440768 [0;39m <==      Total: 1
2023-05-16 01:02:38.541 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115526609440768 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:02:38.542 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115526609440768 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:02:38.542 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39115526609440768 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:02:38.542 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39115526609440768 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:02:38.542 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115526609440768 [0;39m <==      Total: 1
2023-05-16 01:02:38.543 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115526609440768 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:02:38.543 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115526609440768 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:02:38.543 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39115526609440768 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:02:38.544 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39115526609440768 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:02:38.544 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115526609440768 [0;39m <==      Total: 1
2023-05-16 01:02:38.544 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115526609440768 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:02:38.545 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115526609440768 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:02:38.545 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39115526609440768 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:02:38.545 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39115526609440768 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:02:38.545 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39115526609440768 [0;39m <==      Total: 1
2023-05-16 01:02:38.546 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39115526609440768 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"Vueç®€ä»‹","createTime":1684053346000,"ebookId":2,"id":25,"name":"test","replies":[{"content":"vueç®€ä»‹","createTime":1684069365000,"ebookId":2,"id":36,"name":"demo","parentId":25,"replies":[{"content":"11","createTime":1684155765000,"ebookId":2,"id":40,"name":"test","parentId":36,"replies":[],"replyname":"test","replytouserId":1,"userId":1}],"replyname":"test","replytouserId":1,"userId":2}],"userId":1}],"success":true}
2023-05-16 01:02:38.546 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39115526609440768 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š14 ms -------------
2023-05-16 01:02:41.838 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:02:43.859 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:02:48.642 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:02:48.970 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:02:52.697 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:03:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39115616707284992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:03:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39115616707284992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:03:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39115616707284992 [0;39m ==> Parameters: 
2023-05-16 01:03:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39115616707284992 [0;39m <==    Updates: 0
2023-05-16 01:03:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39115616707284992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-05-16 01:03:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39115637666222080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:03:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39115637666222080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:03:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39115637666222080 [0;39m ==> Parameters: 
2023-05-16 01:03:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39115637666222080 [0;39m <==    Updates: 2
2023-05-16 01:03:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39115637666222080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 01:03:05.906 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:03:07.937 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:03:18.631 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:03:18.962 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:03:22.697 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:03:30.008 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:03:32.030 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:03:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39115763499536384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:03:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39115763499536384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:03:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39115763499536384 [0;39m ==> Parameters: 
2023-05-16 01:03:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39115763499536384 [0;39m <==    Updates: 2
2023-05-16 01:03:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39115763499536384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 01:03:48.975 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:03:52.686 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:03:56.753 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:04:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39115868352942080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:04:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39115868352942080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:04:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39115868352942080 [0;39m ==> Parameters: 
2023-05-16 01:04:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39115868352942080 [0;39m <==    Updates: 0
2023-05-16 01:04:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39115868352942080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 01:04:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39115889324462080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:04:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39115889324462080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:04:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39115889324462080 [0;39m ==> Parameters: 
2023-05-16 01:04:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39115889324462080 [0;39m <==    Updates: 2
2023-05-16 01:04:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39115889324462080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 01:04:18.967 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:04:22.744 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:04:24.789 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:04:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39116015174553600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:04:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39116015174553600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:04:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39116015174553600 [0;39m ==> Parameters: 
2023-05-16 01:04:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39116015174553600 [0;39m <==    Updates: 2
2023-05-16 01:04:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39116015174553600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 01:04:46.843 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:04:48.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:04:48.964 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:04:52.957 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:04:54.997 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:05:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39116119977627648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:05:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39116119977627648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:05:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39116119977627648 [0;39m ==> Parameters: 
2023-05-16 01:05:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39116119977627648 [0;39m <==    Updates: 0
2023-05-16 01:05:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39116119977627648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-05-16 01:05:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39116140999479296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:05:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39116140999479296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:05:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39116140999479296 [0;39m ==> Parameters: 
2023-05-16 01:05:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39116140999479296 [0;39m <==    Updates: 2
2023-05-16 01:05:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39116140999479296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 01:05:10.906 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:05:12.943 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:05:18.651 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:05:18.981 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:05:22.730 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:05:34.988 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:05:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39116266786656256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:05:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39116266786656256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:05:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39116266786656256 [0;39m ==> Parameters: 
2023-05-16 01:05:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39116266786656256 [0;39m <==    Updates: 2
2023-05-16 01:05:35.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39116266786656256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 01:05:37.004 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:05:48.971 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:05:52.719 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:05:59.056 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:06:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39116371631673344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:06:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39116371631673344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:06:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39116371631673344 [0;39m ==> Parameters: 
2023-05-16 01:06:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39116371631673344 [0;39m <==    Updates: 0
2023-05-16 01:06:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39116371631673344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 01:06:01.090 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:06:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39116392628359168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:06:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39116392628359168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:06:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39116392628359168 [0;39m ==> Parameters: 
2023-05-16 01:06:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39116392628359168 [0;39m <==    Updates: 2
2023-05-16 01:06:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39116392628359168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 01:06:18.676 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:06:18.960 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:06:20.690 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:06:22.715 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:06:24.746 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:06:26.779 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:06:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39116518449090560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:06:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39116518449090560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:06:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39116518449090560 [0;39m ==> Parameters: 
2023-05-16 01:06:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39116518449090560 [0;39m <==    Updates: 2
2023-05-16 01:06:35.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39116518449090560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 01:06:48.655 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:06:48.992 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:06:52.708 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:06:54.738 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:07:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39116623315079168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:07:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39116623315079168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:07:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39116623315079168 [0;39m ==> Parameters: 
2023-05-16 01:07:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39116623315079168 [0;39m <==    Updates: 0
2023-05-16 01:07:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39116623315079168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 01:07:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39116644286599168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:07:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39116644286599168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:07:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39116644286599168 [0;39m ==> Parameters: 
2023-05-16 01:07:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39116644286599168 [0;39m <==    Updates: 2
2023-05-16 01:07:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39116644286599168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 01:07:16.773 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:07:18.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:07:18.971 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:07:25.036 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:07:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39116770124107776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:07:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39116770124107776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:07:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39116770124107776 [0;39m ==> Parameters: 
2023-05-16 01:07:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39116770124107776 [0;39m <==    Updates: 2
2023-05-16 01:07:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39116770124107776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 01:07:42.947 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:07:48.629 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:07:48.978 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:07:52.698 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:08:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39116874985902080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:08:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39116874985902080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:08:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39116874985902080 [0;39m ==> Parameters: 
2023-05-16 01:08:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39116874985902080 [0;39m <==    Updates: 0
2023-05-16 01:08:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39116874985902080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-05-16 01:08:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39116895944839168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:08:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39116895944839168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:08:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39116895944839168 [0;39m ==> Parameters: 
2023-05-16 01:08:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39116895944839168 [0;39m <==    Updates: 2
2023-05-16 01:08:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39116895944839168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 01:08:07.076 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:08:18.666 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:08:18.954 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:08:22.723 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:08:29.124 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:08:31.174 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:08:35.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39117021811707904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:08:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39117021811707904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:08:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39117021811707904 [0;39m ==> Parameters: 
2023-05-16 01:08:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39117021811707904 [0;39m <==    Updates: 2
2023-05-16 01:08:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39117021811707904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 01:08:48.663 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:08:48.964 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:08:52.748 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:08:56.838 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:09:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39117126644142080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:09:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39117126644142080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:09:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39117126644142080 [0;39m ==> Parameters: 
2023-05-16 01:09:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39117126644142080 [0;39m <==    Updates: 0
2023-05-16 01:09:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39117126644142080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-05-16 01:09:05.017 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39117147645022208 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:09:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39117147645022208 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:09:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39117147645022208 [0;39m ==> Parameters: 
2023-05-16 01:09:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39117147645022208 [0;39m <==    Updates: 2
2023-05-16 01:09:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39117147645022208 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 01:09:18.652 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:09:18.970 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:09:22.724 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:09:24.757 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:09:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39117273444782080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:09:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39117273444782080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:09:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39117273444782080 [0;39m ==> Parameters: 
2023-05-16 01:09:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39117273444782080 [0;39m <==    Updates: 2
2023-05-16 01:09:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39117273444782080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1æ¯«ç§’
2023-05-16 01:09:46.806 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:09:48.848 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:09:48.970 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:09:50.884 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:09:54.948 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:10:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39117378348519424 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:10:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39117378348519424 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:10:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39117378348519424 [0;39m ==> Parameters: 
2023-05-16 01:10:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39117378348519424 [0;39m <==    Updates: 0
2023-05-16 01:10:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39117378348519424 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 01:10:05.066 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39117399508783104 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:10:05.066 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39117399508783104 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:10:05.066 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39117399508783104 [0;39m ==> Parameters: 
2023-05-16 01:10:05.066 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39117399508783104 [0;39m <==    Updates: 2
2023-05-16 01:10:05.066 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39117399508783104 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 01:10:12.932 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:10:18.700 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:10:18.980 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:10:22.751 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:10:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39117525103022080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:10:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39117525103022080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:10:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39117525103022080 [0;39m ==> Parameters: 
2023-05-16 01:10:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39117525103022080 [0;39m <==    Updates: 2
2023-05-16 01:10:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39117525103022080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 01:10:37.150 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:10:44.275 INFO  com.jiawa.wiki.websocket.WebSocketServer          :41   [32m39115502743851008 [0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šrSEWktwgmLï¼Œsession idï¼š1ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2023-05-16 01:10:47.138 INFO  com.jiawa.wiki.websocket.WebSocketServer          :32   [32m39115503033257984 [0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼š6JHd3X21Wtï¼Œsession idï¼š2ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2023-05-16 01:10:47.466 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39117577347272704 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 01:10:47.466 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39117577347272704 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/2 GET
2023-05-16 01:10:47.466 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39117577347272704 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-05-16 01:10:47.466 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39117577347272704 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 01:10:47.466 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39117577347272704 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 01:10:47.467 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m39117577347272704 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-05-16 01:10:47.467 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m39117577347272704 [0;39m ==> Parameters: 2(Long)
2023-05-16 01:10:47.468 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m39117577347272704 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-05-16 01:10:47.468 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m39117577347272704 [0;39m <==        Row: 38625501966897152, 2, 0, åˆè¯†Vue, 1, 80, 0
2023-05-16 01:10:47.469 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m39117577347272704 [0;39m <==      Total: 1
2023-05-16 01:10:47.469 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39117577347272704 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":2,"id":38625501966897152,"name":"åˆè¯†Vue","parent":0,"sort":1,"viewCount":80,"voteCount":0}],"success":true}
2023-05-16 01:10:47.469 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39117577347272704 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š3 ms -------------
2023-05-16 01:10:47.472 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39117577372438528 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 01:10:47.472 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39117577372438528 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/2 GET
2023-05-16 01:10:47.473 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39117577372438528 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.CommentResp
2023-05-16 01:10:47.473 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39117577372438528 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 01:10:47.473 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39117577372438528 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 01:10:47.474 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39117577372438528 [0;39m ==>  Preparing: select * from comment where ebook_id = ?
2023-05-16 01:10:47.474 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39117577372438528 [0;39m ==> Parameters: 2(Long)
2023-05-16 01:10:47.475 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39117577372438528 [0;39m <==    Columns: id, user_id, ebook_id, parent_id, replyToUser_id, content, create_time, update_time
2023-05-16 01:10:47.475 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39117577372438528 [0;39m <==        Row: 25, 1, 2, null, null, Vueç®€ä»‹, 2023-05-14 16:35:46, null
2023-05-16 01:10:47.475 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39117577372438528 [0;39m <==        Row: 36, 2, 2, 25, 1, vueç®€ä»‹, 2023-05-14 21:02:45, null
2023-05-16 01:10:47.476 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39117577372438528 [0;39m <==        Row: 40, 1, 2, 36, 1, 11, 2023-05-15 21:02:45, null
2023-05-16 01:10:47.477 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39117577372438528 [0;39m <==      Total: 3
2023-05-16 01:10:47.477 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39117577372438528 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:10:47.478 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39117577372438528 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:10:47.478 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39117577372438528 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:10:47.479 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39117577372438528 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:10:47.479 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39117577372438528 [0;39m <==      Total: 1
2023-05-16 01:10:47.479 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39117577372438528 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:10:47.479 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39117577372438528 [0;39m ==> Parameters: 2(Long)
2023-05-16 01:10:47.480 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39117577372438528 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:10:47.480 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39117577372438528 [0;39m <==        Row: 2, 1, demo, b9b237df8bd22c295180ea0109cb7e67
2023-05-16 01:10:47.480 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39117577372438528 [0;39m <==      Total: 1
2023-05-16 01:10:47.480 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39117577372438528 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:10:47.481 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39117577372438528 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:10:47.481 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39117577372438528 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:10:47.481 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39117577372438528 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:10:47.482 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39117577372438528 [0;39m <==      Total: 1
2023-05-16 01:10:47.482 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39117577372438528 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:10:47.482 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39117577372438528 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:10:47.483 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39117577372438528 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:10:47.483 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39117577372438528 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:10:47.483 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39117577372438528 [0;39m <==      Total: 1
2023-05-16 01:10:47.483 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39117577372438528 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:10:47.484 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39117577372438528 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:10:47.484 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39117577372438528 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:10:47.485 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39117577372438528 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:10:47.485 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39117577372438528 [0;39m <==      Total: 1
2023-05-16 01:10:47.485 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39117577372438528 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"Vueç®€ä»‹","createTime":1684053346000,"ebookId":2,"id":25,"name":"test","replies":[{"content":"vueç®€ä»‹","createTime":1684069365000,"ebookId":2,"id":36,"name":"demo","parentId":25,"replies":[{"content":"11","createTime":1684155765000,"ebookId":2,"id":40,"name":"test","parentId":36,"replies":[],"replyname":"test","replytouserId":1,"userId":1}],"replyname":"test","replytouserId":1,"userId":2}],"userId":1}],"success":true}
2023-05-16 01:10:47.485 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39117577372438528 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š13 ms -------------
2023-05-16 01:10:47.556 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39117577724760064 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 01:10:47.557 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39117577724760064 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/38625501966897152 GET
2023-05-16 01:10:47.557 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39117577724760064 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-05-16 01:10:47.557 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39117577724760064 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 01:10:47.558 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39117577724760064 [0;39m è¯·æ±‚å‚æ•°: [38625501966897152]
2023-05-16 01:10:47.558 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m39117577724760064 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-05-16 01:10:47.559 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m39117577724760064 [0;39m ==> Parameters: 38625501966897152(Long)
2023-05-16 01:10:47.559 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m39117577724760064 [0;39m <==    Columns: id, content
2023-05-16 01:10:47.559 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m39117577724760064 [0;39m <==        Row: 38625501966897152, <<BLOB>>
2023-05-16 01:10:47.559 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m39117577724760064 [0;39m <==      Total: 1
2023-05-16 01:10:47.559 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m39117577724760064 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-05-16 01:10:47.560 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m39117577724760064 [0;39m ==> Parameters: 38625501966897152(Long)
2023-05-16 01:10:47.569 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m39117577724760064 [0;39m <==    Updates: 1
2023-05-16 01:10:47.569 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39117577724760064 [0;39m è¿”å›žç»“æžœ: {"content":"<p>å¦‚æžœè¯´æ˜¯JQueryæ˜¯æ‰‹å·¥ä½œåŠï¼Œé‚£ä¹ˆVue.jså°±åƒæ˜¯ä¸€åº§å·¥åŽ‚ï¼Œè™½ç„¶Vue.jsåšçš„ä»»ä½•äº‹æƒ…JQueryéƒ½å¯ä»¥åšï¼Œä½†æ— è®ºæ˜¯ä»£ç é‡è¿˜æ˜¯æµç¨‹è§„èŒƒæ€§éƒ½æ˜¯å‰è€…è¾ƒä¼˜ã€‚</p><p>Vue.jsçš„<a href=\"https://links.jianshu.com/go?to=https%3A%2F%2Fcn.vuejs.org%2Fv2%2Fguide%2F\" target=\"_blank\">å®˜æ–¹ä¸­æ–‡æ•™ç¨‹</a>å…¶å®žä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„æ•™ç¨‹ï¼Œä¸è¿‡ç›¸æ¯”äºŽä¸€æ¬¡æ€§æŠŠæ‰€æœ‰æ¦‚å¿µæŽŒæ¡ï¼Œæˆ‘æ›´å€¾å‘äºŽå…ˆä¼šç”¨ï¼Œä¹‹åŽå†åœ¨å®žé™…åº”ç”¨ä¸­æŠŠæœªæ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹é€æ­¥è¡¥å…¨ã€‚</p><p>å°±åƒå¼€è½¦ï¼Œä¸æ˜¯éžè¦çŸ¥é“å‘åŠ¨æœºçš„å·¥ä½œåŽŸç†æ‰èƒ½ä¸Šè·¯çš„ï¼Œç”šè‡³ä½ å¯èƒ½ä¸€è¾ˆå­ä¹Ÿä¸ç”¨çŸ¥é“ã€‚</p><p>å¥½äº†ï¼Œå¼€å§‹å§</p><p><br></p><p>\n\n\n\n\n\n\n\n\n<br><br>ä½œè€…ï¼šæ™¯è¡Œ1023<br>é“¾æŽ¥ï¼šhttps://www.jianshu.com/p/5d0d913d2453<br>æ¥æºï¼šç®€ä¹¦<br>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…èŽ·å¾—æŽˆæƒï¼Œéžå•†ä¸šè½¬è½½è¯·æ³¨æ˜Žå‡ºå¤„ã€‚</p>","success":true}
2023-05-16 01:10:47.570 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39117577724760064 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š14 ms -------------
2023-05-16 01:10:48.643 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:10:48.955 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:10:52.704 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:11:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39117629931261952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:11:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39117629931261952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:11:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39117629931261952 [0;39m ==> Parameters: 
2023-05-16 01:11:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39117629931261952 [0;39m <==    Updates: 0
2023-05-16 01:11:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39117629931261952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-05-16 01:11:01.237 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:11:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39117650919559168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:11:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39117650919559168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:11:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39117650919559168 [0;39m ==> Parameters: 
2023-05-16 01:11:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39117650919559168 [0;39m <==    Updates: 2
2023-05-16 01:11:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39117650919559168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-05-16 01:11:18.643 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:11:18.977 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:11:22.707 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:11:24.721 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:11:26.757 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:11:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39117776748679168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:11:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39117776748679168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:11:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39117776748679168 [0;39m ==> Parameters: 
2023-05-16 01:11:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39117776748679168 [0;39m <==    Updates: 2
2023-05-16 01:11:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39117776748679168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 01:11:48.631 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:11:48.965 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:11:52.708 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:11:54.749 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:12:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39117881581113344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:12:00.001 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39117881581113344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:12:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39117881581113344 [0;39m ==> Parameters: 
2023-05-16 01:12:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39117881581113344 [0;39m <==    Updates: 0
2023-05-16 01:12:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39117881581113344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-05-16 01:12:05.017 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39117902619742208 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:12:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39117902619742208 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:12:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39117902619742208 [0;39m ==> Parameters: 
2023-05-16 01:12:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39117902619742208 [0;39m <==    Updates: 2
2023-05-16 01:12:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39117902619742208 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 01:12:16.779 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:12:18.991 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:12:20.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:12:22.873 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:12:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39118028398530560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:12:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39118028398530560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:12:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39118028398530560 [0;39m ==> Parameters: 
2023-05-16 01:12:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39118028398530560 [0;39m <==    Updates: 2
2023-05-16 01:12:35.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39118028398530560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 01:12:41.819 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:12:43.842 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:12:48.960 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:12:50.667 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:12:52.686 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:13:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39118133260324864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:13:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39118133260324864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:13:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39118133260324864 [0;39m ==> Parameters: 
2023-05-16 01:13:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39118133260324864 [0;39m <==    Updates: 0
2023-05-16 01:13:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39118133260324864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 01:13:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39118154231844864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:13:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39118154231844864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:13:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39118154231844864 [0;39m ==> Parameters: 
2023-05-16 01:13:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39118154231844864 [0;39m <==    Updates: 2
2023-05-16 01:13:05.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39118154231844864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 01:13:05.886 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:13:07.932 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:13:18.657 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:13:18.962 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:13:20.693 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:13:22.730 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:13:29.202 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39118255717224448 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 01:13:29.202 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39118255717224448 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/2 GET
2023-05-16 01:13:29.202 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39118255717224448 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.CommentResp
2023-05-16 01:13:29.202 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39118255717224448 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 01:13:29.203 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39118255717224448 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 01:13:29.204 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39118255717224448 [0;39m ==>  Preparing: select * from comment where ebook_id = ?
2023-05-16 01:13:29.204 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39118255717224448 [0;39m ==> Parameters: 2(Long)
2023-05-16 01:13:29.205 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39118255717224448 [0;39m <==    Columns: id, user_id, ebook_id, parent_id, replyToUser_id, content, create_time, update_time
2023-05-16 01:13:29.205 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39118255717224448 [0;39m <==        Row: 25, 1, 2, null, null, Vueç®€ä»‹, 2023-05-14 16:35:46, null
2023-05-16 01:13:29.206 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39118255717224448 [0;39m <==        Row: 36, 2, 2, 25, 1, vueç®€ä»‹, 2023-05-14 21:02:45, null
2023-05-16 01:13:29.206 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39118255717224448 [0;39m <==        Row: 40, 1, 2, 36, 1, 11, 2023-05-15 21:02:45, null
2023-05-16 01:13:29.206 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39118255717224448 [0;39m <==      Total: 3
2023-05-16 01:13:29.207 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39118255717224448 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:13:29.207 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39118255717224448 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:13:29.207 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39118255717224448 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:13:29.208 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39118255717224448 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:13:29.208 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39118255717224448 [0;39m <==      Total: 1
2023-05-16 01:13:29.209 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39118255717224448 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:13:29.209 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39118255717224448 [0;39m ==> Parameters: 2(Long)
2023-05-16 01:13:29.209 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39118255717224448 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:13:29.209 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39118255717224448 [0;39m <==        Row: 2, 1, demo, b9b237df8bd22c295180ea0109cb7e67
2023-05-16 01:13:29.210 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39118255717224448 [0;39m <==      Total: 1
2023-05-16 01:13:29.210 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39118255717224448 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:13:29.210 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39118255717224448 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:13:29.211 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39118255717224448 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:13:29.211 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39118255717224448 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:13:29.211 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39118255717224448 [0;39m <==      Total: 1
2023-05-16 01:13:29.212 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39118255717224448 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:13:29.212 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39118255717224448 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:13:29.212 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39118255717224448 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:13:29.213 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39118255717224448 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:13:29.213 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39118255717224448 [0;39m <==      Total: 1
2023-05-16 01:13:29.213 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39118255717224448 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:13:29.213 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39118255717224448 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:13:29.214 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39118255717224448 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:13:29.214 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39118255717224448 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:13:29.214 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39118255717224448 [0;39m <==      Total: 1
2023-05-16 01:13:29.214 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39118255717224448 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"Vueç®€ä»‹","createTime":1684053346000,"ebookId":2,"id":25,"name":"test","replies":[{"content":"vueç®€ä»‹","createTime":1684069365000,"ebookId":2,"id":36,"name":"demo","parentId":25,"replies":[{"content":"11","createTime":1684155765000,"ebookId":2,"id":40,"name":"test","parentId":36,"replies":[],"replyname":"test","replytouserId":1,"userId":1}],"replyname":"test","replytouserId":1,"userId":2}],"userId":1}],"success":true}
2023-05-16 01:13:29.214 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39118255717224448 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š12 ms -------------
2023-05-16 01:13:31.967 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:13:35.018 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39118280111296512 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:13:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39118280111296512 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:13:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39118280111296512 [0;39m ==> Parameters: 
2023-05-16 01:13:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39118280111296512 [0;39m <==    Updates: 2
2023-05-16 01:13:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39118280111296512 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 01:13:48.666 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:13:48.980 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:13:52.838 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:13:54.870 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:13:56.917 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:14:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39118384935342080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:14:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39118384935342080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:14:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39118384935342080 [0;39m ==> Parameters: 
2023-05-16 01:14:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39118384935342080 [0;39m <==    Updates: 0
2023-05-16 01:14:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39118384935342080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 01:14:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39118405911056384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:14:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39118405911056384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:14:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39118405911056384 [0;39m ==> Parameters: 
2023-05-16 01:14:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39118405911056384 [0;39m <==    Updates: 2
2023-05-16 01:14:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39118405911056384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 01:14:18.636 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:14:18.968 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:14:20.664 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:14:22.698 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:14:24.715 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:14:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39118531731787776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:14:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39118531731787776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:14:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39118531731787776 [0;39m ==> Parameters: 
2023-05-16 01:14:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39118531731787776 [0;39m <==    Updates: 2
2023-05-16 01:14:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39118531731787776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 01:14:46.753 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:14:48.799 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:14:48.986 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:14:52.864 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:14:54.901 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:15:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39118636597776384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:15:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39118636597776384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:15:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39118636597776384 [0;39m ==> Parameters: 
2023-05-16 01:15:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39118636597776384 [0;39m <==    Updates: 0
2023-05-16 01:15:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39118636597776384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-05-16 01:15:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39118657560907776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:15:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39118657560907776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:15:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39118657560907776 [0;39m ==> Parameters: 
2023-05-16 01:15:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39118657560907776 [0;39m <==    Updates: 2
2023-05-16 01:15:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39118657560907776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 01:15:10.817 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:15:12.855 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:15:18.654 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:15:18.977 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:15:22.721 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:15:34.900 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:15:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39118783385833472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:15:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39118783385833472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:15:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39118783385833472 [0;39m ==> Parameters: 
2023-05-16 01:15:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39118783385833472 [0;39m <==    Updates: 2
2023-05-16 01:15:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39118783385833472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 01:15:36.930 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:15:48.630 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:15:48.992 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:15:50.666 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:15:52.714 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:16:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39118888256016384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:16:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39118888256016384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:16:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39118888256016384 [0;39m ==> Parameters: 
2023-05-16 01:16:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39118888256016384 [0;39m <==    Updates: 0
2023-05-16 01:16:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39118888256016384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-05-16 01:16:01.002 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:16:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39118909219147776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:16:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39118909219147776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:16:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39118909219147776 [0;39m ==> Parameters: 
2023-05-16 01:16:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39118909219147776 [0;39m <==    Updates: 2
2023-05-16 01:16:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39118909219147776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 01:16:18.978 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:16:20.665 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:16:22.706 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:16:24.740 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:16:26.791 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:16:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39119035052462080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:16:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39119035052462080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:16:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39119035052462080 [0;39m ==> Parameters: 
2023-05-16 01:16:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39119035052462080 [0;39m <==    Updates: 2
2023-05-16 01:16:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39119035052462080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 01:16:48.997 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:16:52.766 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:16:54.811 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:17:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39119139922644992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:17:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39119139922644992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:17:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39119139922644992 [0;39m ==> Parameters: 
2023-05-16 01:17:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39119139922644992 [0;39m <==    Updates: 0
2023-05-16 01:17:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39119139922644992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-05-16 01:17:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39119160843833344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:17:05.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39119160843833344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:17:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39119160843833344 [0;39m ==> Parameters: 
2023-05-16 01:17:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39119160843833344 [0;39m <==    Updates: 2
2023-05-16 01:17:05.004 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39119160843833344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 01:17:18.882 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:17:18.977 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:17:25.013 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:17:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39119286727479296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:17:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39119286727479296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:17:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39119286727479296 [0;39m ==> Parameters: 
2023-05-16 01:17:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39119286727479296 [0;39m <==    Updates: 2
2023-05-16 01:17:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39119286727479296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 01:17:42.975 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:17:48.661 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:17:48.985 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:17:52.753 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:17:54.873 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39119370022162432 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 01:17:54.873 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39119370022162432 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/2 GET
2023-05-16 01:17:54.873 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39119370022162432 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.CommentResp
2023-05-16 01:17:54.873 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39119370022162432 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 01:17:54.879 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39119370022162432 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 01:17:54.879 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39119370022162432 [0;39m ==>  Preparing: select * from comment where ebook_id = ?
2023-05-16 01:17:54.879 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39119370022162432 [0;39m ==> Parameters: 2(Long)
2023-05-16 01:17:54.881 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39119370022162432 [0;39m <==    Columns: id, user_id, ebook_id, parent_id, replyToUser_id, content, create_time, update_time
2023-05-16 01:17:54.881 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39119370022162432 [0;39m <==        Row: 25, 1, 2, null, null, Vueç®€ä»‹, 2023-05-14 16:35:46, null
2023-05-16 01:17:54.881 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39119370022162432 [0;39m <==        Row: 36, 2, 2, 25, 1, vueç®€ä»‹, 2023-05-14 21:02:45, null
2023-05-16 01:17:54.881 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39119370022162432 [0;39m <==        Row: 40, 1, 2, 36, 1, 11, 2023-05-15 21:02:45, null
2023-05-16 01:17:54.881 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39119370022162432 [0;39m <==      Total: 3
2023-05-16 01:18:03.576 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39119406525190144 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:18:03.576 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39119406525190144 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:18:08.377 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39119406525190144 [0;39m ==> Parameters: 
2023-05-16 01:18:08.377 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:18:08.377 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39119406525190144 [0;39m <==    Updates: 0
2023-05-16 01:18:08.377 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39119406525190144 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4801æ¯«ç§’
2023-05-16 01:18:08.377 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39119426662043648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:18:08.377 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39119426662043648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:18:08.377 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39119426662043648 [0;39m ==> Parameters: 
2023-05-16 01:18:08.377 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39119426662043648 [0;39m <==    Updates: 2
2023-05-16 01:18:08.383 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39119426662043648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-05-16 01:18:08.383 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39119370022162432 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:18:08.385 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39119370022162432 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:18:08.385 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39119370022162432 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:18:08.391 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39119370022162432 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:18:08.391 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39119370022162432 [0;39m <==      Total: 1
2023-05-16 01:18:11.402 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:19:03.095 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39119656165969920 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:19:03.095 WARN  com.zaxxer.hikari.pool.HikariPool                 :787  [32m                  [0;39m HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m3s977ms635Âµs400ns).
2023-05-16 01:19:06.047 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39119656165969920 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:19:06.052 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39119656165969920 [0;39m ==> Parameters: 
2023-05-16 01:19:06.052 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39119656165969920 [0;39m <==    Updates: 2
2023-05-16 01:19:06.052 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39119656165969920 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2957æ¯«ç§’
2023-05-16 01:19:06.052 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39119668568526848 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:19:06.057 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39119668568526848 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:19:06.057 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39119668568526848 [0;39m ==> Parameters: 
2023-05-16 01:19:06.059 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39119668568526848 [0;39m <==    Updates: 0
2023-05-16 01:19:06.059 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39119668568526848 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-05-16 01:19:06.516 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39119370022162432 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:19:06.516 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39119370022162432 [0;39m ==> Parameters: 2(Long)
2023-05-16 01:19:06.520 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39119370022162432 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:19:06.520 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39119370022162432 [0;39m <==        Row: 2, 1, demo, b9b237df8bd22c295180ea0109cb7e67
2023-05-16 01:19:06.520 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39119370022162432 [0;39m <==      Total: 1
2023-05-16 01:19:54.668 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39119872478810112 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:19:54.668 WARN  com.zaxxer.hikari.pool.HikariPool                 :787  [32m                  [0;39m HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=51s575ms563Âµs300ns).
2023-05-16 01:19:55.338 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39119872478810112 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:19:55.340 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39119872478810112 [0;39m ==> Parameters: 
2023-05-16 01:19:55.341 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39119872478810112 [0;39m <==    Updates: 2
2023-05-16 01:19:55.341 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39119872478810112 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š673æ¯«ç§’
2023-05-16 01:19:55.341 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39119370022162432 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:19:55.344 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39119370022162432 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:19:55.347 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39119370022162432 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:19:55.348 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39119370022162432 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:19:55.349 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39119370022162432 [0;39m <==      Total: 1
2023-05-16 01:19:57.471 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:19:57.471 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:19:57.476 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39119370022162432 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:19:57.476 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39119370022162432 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:19:57.481 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39119370022162432 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:19:57.481 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39119370022162432 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:19:57.485 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39119370022162432 [0;39m <==      Total: 1
2023-05-16 01:19:59.232 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39119370022162432 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:19:59.232 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39119370022162432 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:19:59.232 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39119370022162432 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:19:59.232 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39119370022162432 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:19:59.242 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39119370022162432 [0;39m <==      Total: 1
2023-05-16 01:19:59.935 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:20:01.451 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39119900928774144 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:20:03.472 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39119900928774144 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:20:43.818 WARN  com.zaxxer.hikari.pool.HikariPool                 :787  [32m                  [0;39m HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=49s149ms155Âµs600ns).
2023-05-16 01:20:43.818 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39119900928774144 [0;39m ==> Parameters: 
2023-05-16 01:20:45.165 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39119900928774144 [0;39m <==    Updates: 0
2023-05-16 01:20:45.165 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39119900928774144 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š41694æ¯«ç§’
2023-05-16 01:20:45.165 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39120084278579200 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:20:45.172 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39120084278579200 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:20:45.172 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39120084278579200 [0;39m ==> Parameters: 
2023-05-16 01:20:45.172 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39120084278579200 [0;39m <==    Updates: 2
2023-05-16 01:20:45.172 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39120084278579200 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-05-16 01:21:34.623 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39120291720466432 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:21:34.623 WARN  com.zaxxer.hikari.pool.HikariPool                 :787  [32m                  [0;39m HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=50s804ms616Âµs800ns).
2023-05-16 01:21:34.623 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:21:34.623 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:21:34.623 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39120291720466432 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:21:34.623 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39120291720466432 [0;39m ==> Parameters: 
2023-05-16 01:21:38.734 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39120291720466432 [0;39m <==    Updates: 0
2023-05-16 01:21:38.737 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39120291720466432 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4114æ¯«ç§’
2023-05-16 01:21:38.737 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39120308975833088 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:21:38.740 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39120308975833088 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:21:38.740 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39120308975833088 [0;39m ==> Parameters: 
2023-05-16 01:21:38.740 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39120308975833088 [0;39m <==    Updates: 2
2023-05-16 01:21:38.740 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39120308975833088 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 01:23:08.330 WARN  com.zaxxer.hikari.pool.HikariPool                 :787  [32m                  [0;39m HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m33s707ms215Âµs100ns).
2023-05-16 01:23:08.330 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39120684756111360 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:23:08.330 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:23:08.330 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39120684756111360 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:23:08.330 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:23:08.337 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39120684756111360 [0;39m ==> Parameters: 
2023-05-16 01:24:32.153 WARN  com.zaxxer.hikari.pool.HikariPool                 :787  [32m                  [0;39m HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m23s823ms336Âµs500ns).
2023-05-16 01:24:33.610 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39120684756111360 [0;39m <==    Updates: 0
2023-05-16 01:24:33.611 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39120684756111360 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š85281æ¯«ç§’
2023-05-16 01:24:33.613 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39121042458939392 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:24:33.615 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39121042458939392 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:24:34.249 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39121042458939392 [0;39m ==> Parameters: 
2023-05-16 01:24:35.904 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39121042458939392 [0;39m <==    Updates: 2
2023-05-16 01:24:35.904 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39121042458939392 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2290æ¯«ç§’
2023-05-16 01:24:35.904 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:24:40.548 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:24:40.547 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:25:01.232 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39121158301421568 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:25:04.505 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39121158301421568 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:25:04.505 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39121158301421568 [0;39m ==> Parameters: 
2023-05-16 01:25:04.516 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39121158301421568 [0;39m <==    Updates: 0
2023-05-16 01:25:04.516 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39121158301421568 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2192æ¯«ç§’
2023-05-16 01:25:04.521 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:25:06.172 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39121179021283328 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:25:08.343 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39121179021283328 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:25:08.343 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39121179021283328 [0;39m ==> Parameters: 
2023-05-16 01:25:09.727 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39121179021283328 [0;39m <==    Updates: 2
2023-05-16 01:25:09.727 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39121179021283328 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2098æ¯«ç§’
2023-05-16 01:25:10.479 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:25:16.500 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:25:30.484 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:25:37.823 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39121311775199232 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:25:37.823 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39121311775199232 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:25:37.823 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39121311775199232 [0;39m ==> Parameters: 
2023-05-16 01:25:39.166 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39121311775199232 [0;39m <==    Updates: 2
2023-05-16 01:25:39.166 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39121311775199232 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1343æ¯«ç§’
2023-05-16 01:25:44.255 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:25:49.538 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:25:52.905 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:26:03.551 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39121419686252544 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:26:03.551 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:26:04.308 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39121419686252544 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:26:04.308 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39121419686252544 [0;39m ==> Parameters: 
2023-05-16 01:26:04.308 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39121419686252544 [0;39m <==    Updates: 0
2023-05-16 01:26:04.308 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39121419686252544 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š757æ¯«ç§’
2023-05-16 01:26:05.335 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39121427168890880 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:26:05.335 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39119370022162432 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"Vueç®€ä»‹","createTime":1684053346000,"ebookId":2,"id":25,"name":"test","replies":[{"content":"vueç®€ä»‹","createTime":1684069365000,"ebookId":2,"id":36,"name":"demo","parentId":25,"replies":[{"content":"11","createTime":1684155765000,"ebookId":2,"id":40,"name":"test","parentId":36,"replies":[],"replyname":"test","replytouserId":1,"userId":1}],"replyname":"test","replytouserId":1,"userId":2}],"userId":1}],"success":true}
2023-05-16 01:26:05.335 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39121427168890880 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:26:05.335 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39119370022162432 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š490462 ms -------------
2023-05-16 01:26:05.336 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39121427168890880 [0;39m ==> Parameters: 
2023-05-16 01:26:05.336 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39121427168890880 [0;39m <==    Updates: 2
2023-05-16 01:26:05.337 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39121427168890880 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 01:26:06.342 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:26:08.362 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:26:10.401 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:26:16.525 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:26:18.969 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:26:20.619 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:26:24.682 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:26:26.712 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:26:30.801 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:26:32.839 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:26:34.889 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:26:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39121551634862080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:26:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39121551634862080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:26:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39121551634862080 [0;39m ==> Parameters: 
2023-05-16 01:26:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39121551634862080 [0;39m <==    Updates: 2
2023-05-16 01:26:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39121551634862080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 01:26:36.917 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:26:40.981 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:26:45.044 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:26:48.980 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:26:51.182 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:26:53.211 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:26:55.242 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:26:57.278 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:26:59.316 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:27:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39121656505044992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:27:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39121656505044992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:27:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39121656505044992 [0;39m ==> Parameters: 
2023-05-16 01:27:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39121656505044992 [0;39m <==    Updates: 0
2023-05-16 01:27:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39121656505044992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-05-16 01:27:01.354 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:27:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39121677459787776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:27:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39121677459787776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:27:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39121677459787776 [0;39m ==> Parameters: 
2023-05-16 01:27:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39121677459787776 [0;39m <==    Updates: 2
2023-05-16 01:27:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39121677459787776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 01:27:18.634 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:27:18.977 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:27:20.685 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:27:22.724 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:27:26.807 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:27:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39121803309879296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:27:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39121803309879296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:27:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39121803309879296 [0;39m ==> Parameters: 
2023-05-16 01:27:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39121803309879296 [0;39m <==    Updates: 2
2023-05-16 01:27:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39121803309879296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 01:27:48.953 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:27:52.701 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:27:54.736 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:28:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39121908129730560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:28:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39121908129730560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:28:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39121908129730560 [0;39m ==> Parameters: 
2023-05-16 01:28:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39121908129730560 [0;39m <==    Updates: 0
2023-05-16 01:28:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39121908129730560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 01:28:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39121929147387904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:28:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39121929147387904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:28:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39121929147387904 [0;39m ==> Parameters: 
2023-05-16 01:28:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39121929147387904 [0;39m <==    Updates: 2
2023-05-16 01:28:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39121929147387904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 01:28:16.762 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:28:18.955 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:28:22.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:28:35.020 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39122054993285120 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:28:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39122054993285120 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:28:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39122054993285120 [0;39m ==> Parameters: 
2023-05-16 01:28:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39122054993285120 [0;39m <==    Updates: 2
2023-05-16 01:28:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39122054993285120 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-05-16 01:28:41.822 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:28:43.853 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:28:48.998 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:28:52.737 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:29:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39122159771193344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:29:00.001 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39122159771193344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:29:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39122159771193344 [0;39m ==> Parameters: 
2023-05-16 01:29:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39122159771193344 [0;39m <==    Updates: 0
2023-05-16 01:29:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39122159771193344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 01:29:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39122180772073472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:29:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39122180772073472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:29:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39122180772073472 [0;39m ==> Parameters: 
2023-05-16 01:29:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39122180772073472 [0;39m <==    Updates: 2
2023-05-16 01:29:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39122180772073472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-05-16 01:29:05.905 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:29:07.939 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:29:18.643 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:29:18.965 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:29:20.661 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:29:22.686 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:29:29.983 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:29:32.015 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:29:32.961 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39122298015453184 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 01:29:32.962 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39122298015453184 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/2 GET
2023-05-16 01:29:32.962 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39122298015453184 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.CommentResp
2023-05-16 01:29:32.962 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39122298015453184 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 01:29:32.962 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39122298015453184 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 01:29:32.963 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39122298015453184 [0;39m ==>  Preparing: select * from comment where ebook_id = ?
2023-05-16 01:29:32.963 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39122298015453184 [0;39m ==> Parameters: 2(Long)
2023-05-16 01:29:32.964 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39122298015453184 [0;39m <==    Columns: id, user_id, ebook_id, parent_id, replyToUser_id, content, create_time, update_time
2023-05-16 01:29:32.964 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39122298015453184 [0;39m <==        Row: 25, 1, 2, null, null, Vueç®€ä»‹, 2023-05-14 16:35:46, null
2023-05-16 01:29:32.965 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39122298015453184 [0;39m <==        Row: 36, 2, 2, 25, 1, vueç®€ä»‹, 2023-05-14 21:02:45, null
2023-05-16 01:29:32.966 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39122298015453184 [0;39m <==        Row: 40, 1, 2, 36, 1, 11, 2023-05-15 21:02:45, null
2023-05-16 01:29:32.966 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39122298015453184 [0;39m <==      Total: 3
2023-05-16 01:29:32.967 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39122298015453184 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:29:32.967 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39122298015453184 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:29:32.968 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39122298015453184 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:29:32.968 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39122298015453184 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:29:32.968 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39122298015453184 [0;39m <==      Total: 1
2023-05-16 01:29:32.969 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39122298015453184 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:29:32.969 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39122298015453184 [0;39m ==> Parameters: 2(Long)
2023-05-16 01:29:32.970 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39122298015453184 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:29:32.970 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39122298015453184 [0;39m <==        Row: 2, 1, demo, b9b237df8bd22c295180ea0109cb7e67
2023-05-16 01:29:32.970 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39122298015453184 [0;39m <==      Total: 1
2023-05-16 01:29:32.971 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39122298015453184 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:29:32.971 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39122298015453184 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:29:32.972 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39122298015453184 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:29:32.972 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39122298015453184 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:29:32.972 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39122298015453184 [0;39m <==      Total: 1
2023-05-16 01:29:32.972 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39122298015453184 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:29:32.972 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39122298015453184 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:29:32.973 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39122298015453184 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:29:32.973 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39122298015453184 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:29:32.973 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39122298015453184 [0;39m <==      Total: 1
2023-05-16 01:29:32.974 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39122298015453184 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:29:32.974 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39122298015453184 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:29:32.974 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39122298015453184 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:29:32.974 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39122298015453184 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:29:32.975 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39122298015453184 [0;39m <==      Total: 1
2023-05-16 01:29:38.083 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39122319498678272 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:30:23.883 WARN  com.zaxxer.hikari.pool.HikariPool                 :787  [32m                  [0;39m HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=45s799ms628Âµs400ns).
2023-05-16 01:30:23.884 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39122319498678272 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:30:23.884 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39122319498678272 [0;39m ==> Parameters: 
2023-05-16 01:30:23.885 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39122319498678272 [0;39m <==    Updates: 2
2023-05-16 01:30:23.886 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39122319498678272 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š33086æ¯«ç§’
2023-05-16 01:30:23.886 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39122511610384384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:30:23.886 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39122511610384384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:30:23.887 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39122511610384384 [0;39m ==> Parameters: 
2023-05-16 01:30:23.888 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39122511610384384 [0;39m <==    Updates: 0
2023-05-16 01:30:23.889 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39122511610384384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 01:34:11.873 WARN  com.zaxxer.hikari.pool.HikariPool                 :787  [32m                  [0;39m HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=3m47s989ms516Âµs700ns).
2023-05-16 01:34:11.873 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39123467857170432 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:34:11.873 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39123467857170432 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:34:11.873 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39123467857170432 [0;39m ==> Parameters: 
2023-05-16 01:34:13.399 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39123467857170432 [0;39m <==    Updates: 2
2023-05-16 01:34:13.399 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39123467857170432 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1526æ¯«ç§’
2023-05-16 01:34:13.399 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39123474257678336 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:34:13.399 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39123474257678336 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:34:13.399 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39123474257678336 [0;39m ==> Parameters: 
2023-05-16 01:34:13.904 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39123474257678336 [0;39m <==    Updates: 0
2023-05-16 01:34:13.904 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39123474257678336 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š505æ¯«ç§’
2023-05-16 01:34:15.965 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39122298015453184 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"Vueç®€ä»‹","createTime":1684053346000,"ebookId":2,"id":25,"name":"test","replies":[{"content":"vueç®€ä»‹","createTime":1684069365000,"ebookId":2,"id":36,"name":"demo","parentId":25,"replies":[{"content":"11","createTime":1684155765000,"ebookId":2,"id":40,"name":"test","parentId":36,"replies":[],"replyname":"test","replytouserId":1,"userId":1}],"replyname":"test","replytouserId":1,"userId":2}],"userId":1}],"success":true}
2023-05-16 01:34:15.965 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39122298015453184 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š283004 ms -------------
2023-05-16 01:34:17.992 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:34:20.025 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:34:20.025 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:34:20.827 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39123505412968448 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 01:34:20.827 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39123505412968448 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/2 GET
2023-05-16 01:34:20.827 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39123505412968448 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.CommentResp
2023-05-16 01:34:20.827 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39123505412968448 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 01:34:20.828 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39123505412968448 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 01:34:20.828 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39123505412968448 [0;39m ==>  Preparing: select * from comment where ebook_id = ?
2023-05-16 01:34:20.829 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39123505412968448 [0;39m ==> Parameters: 2(Long)
2023-05-16 01:34:20.830 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39123505412968448 [0;39m <==    Columns: id, user_id, ebook_id, parent_id, replyToUser_id, content, create_time, update_time
2023-05-16 01:34:20.830 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39123505412968448 [0;39m <==        Row: 25, 1, 2, null, null, Vueç®€ä»‹, 2023-05-14 16:35:46, null
2023-05-16 01:34:20.831 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39123505412968448 [0;39m <==        Row: 36, 2, 2, 25, 1, vueç®€ä»‹, 2023-05-14 21:02:45, null
2023-05-16 01:34:20.831 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39123505412968448 [0;39m <==        Row: 40, 1, 2, 36, 1, 11, 2023-05-15 21:02:45, null
2023-05-16 01:34:20.831 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39123505412968448 [0;39m <==      Total: 3
2023-05-16 01:34:20.831 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39123505412968448 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:34:20.831 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39123505412968448 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:34:20.833 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39123505412968448 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:34:20.833 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39123505412968448 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:34:20.834 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39123505412968448 [0;39m <==      Total: 1
2023-05-16 01:34:20.834 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39123505412968448 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:34:20.834 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39123505412968448 [0;39m ==> Parameters: 2(Long)
2023-05-16 01:34:20.835 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39123505412968448 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:34:20.835 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39123505412968448 [0;39m <==        Row: 2, 1, demo, b9b237df8bd22c295180ea0109cb7e67
2023-05-16 01:34:20.835 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39123505412968448 [0;39m <==      Total: 1
2023-05-16 01:34:20.836 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39123505412968448 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:34:20.837 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39123505412968448 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:34:20.837 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39123505412968448 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:34:20.838 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39123505412968448 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:34:20.838 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39123505412968448 [0;39m <==      Total: 1
2023-05-16 01:34:20.838 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39123505412968448 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:34:20.839 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39123505412968448 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:34:20.839 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39123505412968448 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:34:20.839 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39123505412968448 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:34:20.839 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39123505412968448 [0;39m <==      Total: 1
2023-05-16 01:34:20.840 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39123505412968448 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:34:20.840 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39123505412968448 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:34:20.841 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39123505412968448 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:34:20.841 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39123505412968448 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:34:20.841 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39123505412968448 [0;39m <==      Total: 1
2023-05-16 01:35:02.079 WARN  com.zaxxer.hikari.pool.HikariPool                 :787  [32m                  [0;39m HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=50s207ms242Âµs800ns).
2023-05-16 01:35:02.079 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39123678436397056 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:35:02.082 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39123678436397056 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:35:02.082 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39123678436397056 [0;39m ==> Parameters: 
2023-05-16 01:35:02.083 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39123678436397056 [0;39m <==    Updates: 2
2023-05-16 01:35:02.083 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39123678436397056 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-05-16 01:35:02.083 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39123678453174272 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:35:02.084 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39123678453174272 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:35:02.084 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39123678453174272 [0;39m ==> Parameters: 
2023-05-16 01:35:02.085 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39123678453174272 [0;39m <==    Updates: 0
2023-05-16 01:35:02.086 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39123678453174272 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 01:35:05.337 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39123692101439488 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:35:05.338 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39123692101439488 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:35:05.339 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39123692101439488 [0;39m ==> Parameters: 
2023-05-16 01:35:05.341 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39123692101439488 [0;39m <==    Updates: 2
2023-05-16 01:35:05.341 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39123692101439488 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-05-16 01:35:43.570 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39123852462264320 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:36:20.261 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39123852462264320 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:36:20.269 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39123852462264320 [0;39m ==> Parameters: 
2023-05-16 01:36:20.267 INFO  com.jiawa.wiki.websocket.WebSocketServer          :32   [32m39115506216734720 [0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šSIjFr9lFwbï¼Œsession idï¼š3ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š2
2023-05-16 01:36:20.267 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39124006380638209 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 01:36:20.273 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39123852462264320 [0;39m <==    Updates: 2
2023-05-16 01:36:20.273 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39123852462264320 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š36701æ¯«ç§’
2023-05-16 01:36:20.274 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39124006409998336 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:36:20.267 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39124006380638208 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 01:36:20.275 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39124006380638209 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/2 GET
2023-05-16 01:36:20.275 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39124006409998336 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:36:20.275 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39124006380638208 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/2 GET
2023-05-16 01:36:20.275 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39124006380638209 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.CommentResp
2023-05-16 01:36:20.275 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39124006380638208 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-05-16 01:36:20.275 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39124006409998336 [0;39m ==> Parameters: 
2023-05-16 01:36:20.275 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39124006380638209 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 01:36:20.277 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39124006380638209 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 01:36:20.277 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39124006380638208 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 01:36:20.277 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39124006380638208 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 01:36:20.277 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39124006409998336 [0;39m <==    Updates: 0
2023-05-16 01:36:20.278 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39124006409998336 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-05-16 01:36:20.275 INFO  com.jiawa.wiki.websocket.WebSocketServer          :41   [32m39117577372438528 [0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼š6JHd3X21Wtï¼Œsession idï¼š2ï¼å½“å‰è¿žæŽ¥æ•°ï¼š1
2023-05-16 01:36:20.283 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m39124006380638208 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-05-16 01:36:20.283 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m39124006380638208 [0;39m ==> Parameters: 2(Long)
2023-05-16 01:36:20.285 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m39124006380638208 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-05-16 01:36:20.285 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m39124006380638208 [0;39m <==        Row: 38625501966897152, 2, 0, åˆè¯†Vue, 1, 81, 0
2023-05-16 01:36:20.846 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39124006380638209 [0;39m ==>  Preparing: select * from comment where ebook_id = ?
2023-05-16 01:36:20.846 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m39124006380638208 [0;39m <==      Total: 1
2023-05-16 01:36:21.936 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39124006380638209 [0;39m ==> Parameters: 2(Long)
2023-05-16 01:36:21.936 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39124006380638208 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":2,"id":38625501966897152,"name":"åˆè¯†Vue","parent":0,"sort":1,"viewCount":81,"voteCount":0}],"success":true}
2023-05-16 01:36:22.486 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39124006380638208 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š2219 ms -------------
2023-05-16 01:36:23.893 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:36:23.893 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39124006380638209 [0;39m <==    Columns: id, user_id, ebook_id, parent_id, replyToUser_id, content, create_time, update_time
2023-05-16 01:36:23.893 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39124006380638209 [0;39m <==        Row: 25, 1, 2, null, null, Vueç®€ä»‹, 2023-05-14 16:35:46, null
2023-05-16 01:36:23.893 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39124006380638209 [0;39m <==        Row: 36, 2, 2, 25, 1, vueç®€ä»‹, 2023-05-14 21:02:45, null
2023-05-16 01:36:23.893 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39124006380638209 [0;39m <==        Row: 40, 1, 2, 36, 1, 11, 2023-05-15 21:02:45, null
2023-05-16 01:36:23.893 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39124006380638209 [0;39m <==      Total: 3
2023-05-16 01:36:23.893 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39124006380638209 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:36:23.893 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39124006380638209 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:36:23.904 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39124006380638209 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:36:23.904 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39124006380638209 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:36:23.904 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39124006380638209 [0;39m <==      Total: 1
2023-05-16 01:36:23.906 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39124006380638209 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:36:23.906 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39124006380638209 [0;39m ==> Parameters: 2(Long)
2023-05-16 01:36:23.906 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39124006380638209 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:36:23.906 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39124006380638209 [0;39m <==        Row: 2, 1, demo, b9b237df8bd22c295180ea0109cb7e67
2023-05-16 01:36:23.906 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39124006380638209 [0;39m <==      Total: 1
2023-05-16 01:36:23.910 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39124006380638209 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:36:23.911 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39124006380638209 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:36:23.911 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39124006380638209 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:36:23.912 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39124006380638209 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:36:23.912 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39124006380638209 [0;39m <==      Total: 1
2023-05-16 01:36:23.912 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39124006380638209 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:36:23.912 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39124006380638209 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:36:23.913 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39124006380638209 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:36:23.913 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39124006380638209 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:36:23.913 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39124006380638209 [0;39m <==      Total: 1
2023-05-16 01:36:23.913 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39124006380638209 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:36:23.913 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39124006380638209 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:36:23.915 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39124006380638209 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:36:23.915 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39124006380638209 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:36:23.915 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39124006380638209 [0;39m <==      Total: 1
2023-05-16 01:36:23.916 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39124006380638209 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"Vueç®€ä»‹","createTime":1684053346000,"ebookId":2,"id":25,"name":"test","replies":[{"content":"vueç®€ä»‹","createTime":1684069365000,"ebookId":2,"id":36,"name":"demo","parentId":25,"replies":[{"content":"11","createTime":1684155765000,"ebookId":2,"id":40,"name":"test","parentId":36,"replies":[],"replyname":"test","replytouserId":1,"userId":1}],"replyname":"test","replytouserId":1,"userId":2}],"userId":1}],"success":true}
2023-05-16 01:36:23.916 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39124006380638209 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š3649 ms -------------
2023-05-16 01:36:27.984 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39124038748082176 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 01:36:27.988 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39124038748082176 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/38625501966897152 GET
2023-05-16 01:36:27.988 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39124038748082176 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-05-16 01:36:27.988 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39124038748082176 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 01:36:27.988 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39124038748082176 [0;39m è¯·æ±‚å‚æ•°: [38625501966897152]
2023-05-16 01:36:27.989 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m39124038748082176 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-05-16 01:36:27.989 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m39124038748082176 [0;39m ==> Parameters: 38625501966897152(Long)
2023-05-16 01:36:27.989 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m39124038748082176 [0;39m <==    Columns: id, content
2023-05-16 01:36:27.989 TRACE c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :143  [32m39124038748082176 [0;39m <==        Row: 38625501966897152, <<BLOB>>
2023-05-16 01:36:27.989 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m39124038748082176 [0;39m <==      Total: 1
2023-05-16 01:36:27.989 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m39124038748082176 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-05-16 01:36:27.989 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m39124038748082176 [0;39m ==> Parameters: 38625501966897152(Long)
2023-05-16 01:36:27.988 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39123505412968448 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"Vueç®€ä»‹","createTime":1684053346000,"ebookId":2,"id":25,"name":"test","replies":[{"content":"vueç®€ä»‹","createTime":1684069365000,"ebookId":2,"id":36,"name":"demo","parentId":25,"replies":[{"content":"11","createTime":1684155765000,"ebookId":2,"id":40,"name":"test","parentId":36,"replies":[],"replyname":"test","replytouserId":1,"userId":1}],"replyname":"test","replytouserId":1,"userId":2}],"userId":1}],"success":true}
2023-05-16 01:36:27.989 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39123505412968448 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š127162 ms -------------
2023-05-16 01:36:28.004 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m39124038748082176 [0;39m <==    Updates: 1
2023-05-16 01:36:28.005 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39124038748082176 [0;39m è¿”å›žç»“æžœ: {"content":"<p>å¦‚æžœè¯´æ˜¯JQueryæ˜¯æ‰‹å·¥ä½œåŠï¼Œé‚£ä¹ˆVue.jså°±åƒæ˜¯ä¸€åº§å·¥åŽ‚ï¼Œè™½ç„¶Vue.jsåšçš„ä»»ä½•äº‹æƒ…JQueryéƒ½å¯ä»¥åšï¼Œä½†æ— è®ºæ˜¯ä»£ç é‡è¿˜æ˜¯æµç¨‹è§„èŒƒæ€§éƒ½æ˜¯å‰è€…è¾ƒä¼˜ã€‚</p><p>Vue.jsçš„<a href=\"https://links.jianshu.com/go?to=https%3A%2F%2Fcn.vuejs.org%2Fv2%2Fguide%2F\" target=\"_blank\">å®˜æ–¹ä¸­æ–‡æ•™ç¨‹</a>å…¶å®žä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„æ•™ç¨‹ï¼Œä¸è¿‡ç›¸æ¯”äºŽä¸€æ¬¡æ€§æŠŠæ‰€æœ‰æ¦‚å¿µæŽŒæ¡ï¼Œæˆ‘æ›´å€¾å‘äºŽå…ˆä¼šç”¨ï¼Œä¹‹åŽå†åœ¨å®žé™…åº”ç”¨ä¸­æŠŠæœªæ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹é€æ­¥è¡¥å…¨ã€‚</p><p>å°±åƒå¼€è½¦ï¼Œä¸æ˜¯éžè¦çŸ¥é“å‘åŠ¨æœºçš„å·¥ä½œåŽŸç†æ‰èƒ½ä¸Šè·¯çš„ï¼Œç”šè‡³ä½ å¯èƒ½ä¸€è¾ˆå­ä¹Ÿä¸ç”¨çŸ¥é“ã€‚</p><p>å¥½äº†ï¼Œå¼€å§‹å§</p><p><br></p><p>\n\n\n\n\n\n\n\n\n<br><br>ä½œè€…ï¼šæ™¯è¡Œ1023<br>é“¾æŽ¥ï¼šhttps://www.jianshu.com/p/5d0d913d2453<br>æ¥æºï¼šç®€ä¹¦<br>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…èŽ·å¾—æŽˆæƒï¼Œéžå•†ä¸šè½¬è½½è¯·æ³¨æ˜Žå‡ºå¤„ã€‚</p>","success":true}
2023-05-16 01:36:28.005 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39124038748082176 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š21 ms -------------
2023-05-16 01:36:31.191 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39124052199215104 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 01:36:31.191 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39124052199215104 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/2 GET
2023-05-16 01:36:31.192 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39124052199215104 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.CommentResp
2023-05-16 01:36:31.192 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39124052199215104 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 01:36:31.192 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39124052199215104 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 01:36:31.192 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39124052199215104 [0;39m ==>  Preparing: select * from comment where ebook_id = ?
2023-05-16 01:36:31.193 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39124052199215104 [0;39m ==> Parameters: 2(Long)
2023-05-16 01:36:31.194 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39124052199215104 [0;39m <==    Columns: id, user_id, ebook_id, parent_id, replyToUser_id, content, create_time, update_time
2023-05-16 01:36:31.194 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39124052199215104 [0;39m <==        Row: 25, 1, 2, null, null, Vueç®€ä»‹, 2023-05-14 16:35:46, null
2023-05-16 01:36:31.194 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39124052199215104 [0;39m <==        Row: 36, 2, 2, 25, 1, vueç®€ä»‹, 2023-05-14 21:02:45, null
2023-05-16 01:36:31.195 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39124052199215104 [0;39m <==        Row: 40, 1, 2, 36, 1, 11, 2023-05-15 21:02:45, null
2023-05-16 01:36:31.195 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39124052199215104 [0;39m <==      Total: 3
2023-05-16 01:36:31.195 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39124052199215104 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:36:31.196 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39124052199215104 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:36:31.196 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39124052199215104 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:36:31.196 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39124052199215104 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:36:31.197 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39124052199215104 [0;39m <==      Total: 1
2023-05-16 01:36:31.197 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39124052199215104 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:36:31.197 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39124052199215104 [0;39m ==> Parameters: 2(Long)
2023-05-16 01:36:31.198 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39124052199215104 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:36:31.198 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39124052199215104 [0;39m <==        Row: 2, 1, demo, b9b237df8bd22c295180ea0109cb7e67
2023-05-16 01:36:31.198 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39124052199215104 [0;39m <==      Total: 1
2023-05-16 01:36:31.198 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39124052199215104 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:36:31.198 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39124052199215104 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:36:31.199 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39124052199215104 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:36:31.199 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39124052199215104 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:36:31.199 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39124052199215104 [0;39m <==      Total: 1
2023-05-16 01:36:31.199 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39124052199215104 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:36:31.199 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39124052199215104 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:36:31.200 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39124052199215104 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:36:31.200 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39124052199215104 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:36:31.200 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39124052199215104 [0;39m <==      Total: 1
2023-05-16 01:36:31.200 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39124052199215104 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:36:31.201 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39124052199215104 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:36:31.201 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39124052199215104 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:36:31.201 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39124052199215104 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:36:31.201 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39124052199215104 [0;39m <==      Total: 1
2023-05-16 01:40:18.220 WARN  com.zaxxer.hikari.pool.HikariPool                 :787  [32m                  [0;39m HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=3m57s961ms514Âµs200ns).
2023-05-16 01:40:18.220 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39125004427857920 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:40:18.220 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39125004427857920 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:40:18.220 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:40:18.228 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39125004427857920 [0;39m ==> Parameters: 
2023-05-16 01:40:18.456 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39125004427857920 [0;39m <==    Updates: 2
2023-05-16 01:40:20.064 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39125004427857920 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š1844æ¯«ç§’
2023-05-16 01:40:20.064 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39125012162154496 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:40:20.116 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39125012162154496 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:40:20.855 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:40:20.855 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39125012162154496 [0;39m ==> Parameters: 
2023-05-16 01:40:21.386 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39125012162154496 [0;39m <==    Updates: 0
2023-05-16 01:40:26.703 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39125012162154496 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6639æ¯«ç§’
2023-05-16 01:40:26.703 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39124052199215104 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"Vueç®€ä»‹","createTime":1684053346000,"ebookId":2,"id":25,"name":"test","replies":[{"content":"vueç®€ä»‹","createTime":1684069365000,"ebookId":2,"id":36,"name":"demo","parentId":25,"replies":[{"content":"11","createTime":1684155765000,"ebookId":2,"id":40,"name":"test","parentId":36,"replies":[],"replyname":"test","replytouserId":1,"userId":1}],"replyname":"test","replytouserId":1,"userId":2}],"userId":1}],"success":true}
2023-05-16 01:40:26.703 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39124052199215104 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š235512 ms -------------
2023-05-16 01:40:27.321 INFO  com.jiawa.wiki.websocket.WebSocketServer          :41   [32m                  [0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šSIjFr9lFwbï¼Œsession idï¼š3ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2023-05-16 01:40:27.380 INFO  o.a.r.s.support.DefaultRocketMQListenerContainer  :216  [32m                  [0;39m container destroyed, DefaultRocketMQListenerContainer{consumerGroup='default', nameServer='127.0.0.1:9876', topic='VOTE_TOPIC', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
2023-05-16 01:40:27.386 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :218  [32m                  [0;39m Shutting down ExecutorService 'taskScheduler'
2023-05-16 01:40:27.386 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :218  [32m                  [0;39m Shutting down ExecutorService 'applicationTaskExecutor'
2023-05-16 01:40:27.386 INFO  com.zaxxer.hikari.HikariDataSource                :350  [32m                  [0;39m HikariPool-1 - Shutdown initiated...
2023-05-16 01:40:27.417 INFO  com.zaxxer.hikari.HikariDataSource                :352  [32m                  [0;39m HikariPool-1 - Shutdown completed.
2023-05-16 01:40:27.439 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:40:27.550 WARN  o.s.beans.factory.support.DisposableBeanAdapter   :267  [32m                  [0;39m Invocation of destroy method failed on bean with name 'rocketMQTemplate': java.lang.IllegalStateException: Shutdown in progress
2023-05-16 01:40:27.550 WARN  o.s.beans.factory.support.DisposableBeanAdapter   :349  [32m                  [0;39m Destroy method 'shutdown' on bean with name 'defaultMQProducer' threw an exception: java.lang.IllegalStateException: Shutdown in progress
2023-05-16 01:40:46.988 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.1.6.Final
2023-05-16 01:40:46.996 INFO  com.jiawa.wiki.WikiApplication                    :55   [32m                  [0;39m Starting WikiApplication using Java 1.8.0_271 on LAPTOP-TLCI2GAA with PID 12660 (D:\work\jiawawiki\target\classes started by k in D:\work\jiawawiki)
2023-05-16 01:40:46.996 INFO  com.jiawa.wiki.WikiApplication                    :660  [32m                  [0;39m No active profile set, falling back to default profiles: default
2023-05-16 01:40:47.051 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-05-16 01:40:47.051 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-05-16 01:40:47.744 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :250  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2023-05-16 01:40:47.754 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :128  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-05-16 01:40:47.779 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :188  [32m                  [0;39m Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
2023-05-16 01:40:47.967 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration$$EnhancerBySpringCGLIB$$7019989] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 01:40:47.979 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 01:40:48.300 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'defaultMQProducer' of type [org.apache.rocketmq.client.producer.DefaultMQProducer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 01:40:48.300 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonConfig' of type [com.jiawa.wiki.config.JacksonConfig$$EnhancerBySpringCGLIB$$a93c0e8a] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 01:40:48.300 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 01:40:48.300 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 01:40:48.308 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'spring.jackson-org.springframework.boot.autoconfigure.jackson.JacksonProperties' of type [org.springframework.boot.autoconfigure.jackson.JacksonProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 01:40:48.308 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'standardJacksonObjectMapperBuilderCustomizer' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration$StandardJackson2ObjectMapperBuilderCustomizer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 01:40:48.308 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 01:40:48.308 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'parameterNamesModule' of type [com.fasterxml.jackson.module.paramnames.ParameterNamesModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 01:40:48.308 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 01:40:48.319 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jsonComponentModule' of type [org.springframework.boot.jackson.JsonComponentModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 01:40:48.319 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.data.web.config.SpringDataJacksonConfiguration' of type [org.springframework.data.web.config.SpringDataJacksonConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 01:40:48.330 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonGeoModule' of type [org.springframework.data.geo.GeoModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 01:40:48.335 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapperBuilder' of type [org.springframework.http.converter.json.Jackson2ObjectMapperBuilder] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 01:40:48.352 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapper' of type [com.fasterxml.jackson.databind.ObjectMapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 01:40:49.236 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketMQTemplate' of type [org.apache.rocketmq.spring.core.RocketMQTemplate] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 01:40:49.236 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'transactionHandlerRegistry' of type [org.apache.rocketmq.spring.config.TransactionHandlerRegistry] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-05-16 01:40:49.620 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2023-05-16 01:40:49.620 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2023-05-16 01:40:49.631 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2023-05-16 01:40:49.631 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.39]
2023-05-16 01:40:49.705 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2023-05-16 01:40:49.705 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :289  [32m                  [0;39m Root WebApplicationContext: initialization completed in 2653 ms
2023-05-16 01:40:50.473 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2023-05-16 01:40:50.804 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2023-05-16 01:40:50.857 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2023-05-16 01:40:51.380 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:40:51.380 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:40:53.494 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:40:55.526 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:40:55.527 INFO  o.a.r.s.support.DefaultRocketMQListenerContainer  :243  [32m                  [0;39m running container: DefaultRocketMQListenerContainer{consumerGroup='default', nameServer='127.0.0.1:9876', topic='VOTE_TOPIC', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
2023-05-16 01:40:55.527 INFO  o.a.r.s.a.ListenerContainerConfiguration          :107  [32m                  [0;39m Register the listener to container, listenerBeanName:voteTopicConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-05-16 01:40:55.539 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2023-05-16 01:40:55.572 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2023-05-16 01:40:55.594 INFO  com.jiawa.wiki.WikiApplication                    :61   [32m                  [0;39m Started WikiApplication in 9.143 seconds (JVM running for 10.262)
2023-05-16 01:40:55.594 INFO  com.jiawa.wiki.WikiApplication                    :26   [32m                  [0;39m å¯åŠ¨æˆåŠŸï¼ï¼
2023-05-16 01:40:55.594 INFO  com.jiawa.wiki.WikiApplication                    :27   [32m                  [0;39m åœ°å€: 	http://127.0.0.1:8880
2023-05-16 01:40:57.572 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:40:59.605 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:41:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39125179724599296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:41:00.034 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m39125179724599296 [0;39m HikariPool-1 - Starting...
2023-05-16 01:41:00.489 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m39125179724599296 [0;39m HikariPool-1 - Start completed.
2023-05-16 01:41:00.496 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39125179724599296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:41:00.512 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39125179724599296 [0;39m ==> Parameters: 
2023-05-16 01:41:00.515 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39125179724599296 [0;39m <==    Updates: 0
2023-05-16 01:41:00.516 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39125179724599296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š502æ¯«ç§’
2023-05-16 01:41:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39125200654176256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:41:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39125200654176256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:41:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39125200654176256 [0;39m ==> Parameters: 
2023-05-16 01:41:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39125200654176256 [0;39m <==    Updates: 2
2023-05-16 01:41:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39125200654176256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-05-16 01:41:21.283 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:41:22.902 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:41:22.997 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-05-16 01:41:22.998 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2023-05-16 01:41:23.000 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 2 ms
2023-05-16 01:41:23.074 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m39125276407500800 [0;39m ------------- å¼€å§‹ -------------
2023-05-16 01:41:23.075 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m39125276407500800 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/comments/2 GET
2023-05-16 01:41:23.076 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m39125276407500800 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.CommentResp
2023-05-16 01:41:23.077 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m39125276407500800 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-05-16 01:41:23.601 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m39125276407500800 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-05-16 01:41:23.610 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39125276407500800 [0;39m ==>  Preparing: select * from comment where ebook_id = ?
2023-05-16 01:41:23.610 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39125276407500800 [0;39m ==> Parameters: 2(Long)
2023-05-16 01:41:23.624 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39125276407500800 [0;39m <==    Columns: id, user_id, ebook_id, parent_id, replyToUser_id, content, create_time, update_time
2023-05-16 01:41:23.625 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39125276407500800 [0;39m <==        Row: 25, 1, 2, null, null, Vueç®€ä»‹, 2023-05-14 16:35:46, null
2023-05-16 01:41:23.627 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39125276407500800 [0;39m <==        Row: 36, 2, 2, 25, 1, vueç®€ä»‹, 2023-05-14 21:02:45, null
2023-05-16 01:41:23.628 TRACE c.j.wiki.mapper.CommentMapper.selectListByEbookId :143  [32m39125276407500800 [0;39m <==        Row: 40, 1, 2, 36, 1, 11, 2023-05-15 21:02:45, null
2023-05-16 01:41:23.628 DEBUG c.j.wiki.mapper.CommentMapper.selectListByEbookId :137  [32m39125276407500800 [0;39m <==      Total: 3
2023-05-16 01:41:23.633 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39125276407500800 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:41:23.633 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39125276407500800 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:41:23.634 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39125276407500800 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:41:23.634 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39125276407500800 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:41:23.635 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39125276407500800 [0;39m <==      Total: 1
2023-05-16 01:41:23.636 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39125276407500800 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:41:23.636 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39125276407500800 [0;39m ==> Parameters: 2(Long)
2023-05-16 01:41:23.636 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39125276407500800 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:41:23.636 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39125276407500800 [0;39m <==        Row: 2, 1, demo, b9b237df8bd22c295180ea0109cb7e67
2023-05-16 01:41:23.638 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39125276407500800 [0;39m <==      Total: 1
2023-05-16 01:41:23.639 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39125276407500800 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:41:23.639 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39125276407500800 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:41:23.640 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39125276407500800 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:41:23.640 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39125276407500800 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:41:23.640 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39125276407500800 [0;39m <==      Total: 1
2023-05-16 01:41:23.641 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39125276407500800 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:41:23.641 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39125276407500800 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:41:23.641 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39125276407500800 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:41:23.642 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39125276407500800 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:41:23.642 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39125276407500800 [0;39m <==      Total: 1
2023-05-16 01:41:23.642 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39125276407500800 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user where id = ?
2023-05-16 01:41:23.643 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39125276407500800 [0;39m ==> Parameters: 1(Long)
2023-05-16 01:41:23.643 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39125276407500800 [0;39m <==    Columns: id, login_name, name, password
2023-05-16 01:41:23.644 TRACE c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :143  [32m39125276407500800 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4
2023-05-16 01:41:23.644 DEBUG c.jiawa.wiki.mapper.UserMapper.selectByPrimaryKey :137  [32m39125276407500800 [0;39m <==      Total: 1
2023-05-16 01:41:52.294 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39125399002812416 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:41:52.294 WARN  com.zaxxer.hikari.pool.HikariPool                 :787  [32m                  [0;39m HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=51s690ms49Âµs).
2023-05-16 01:41:52.304 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:41:52.305 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39125399002812416 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:41:52.305 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39125399002812416 [0;39m ==> Parameters: 
2023-05-16 01:51:23.579 WARN  com.zaxxer.hikari.pool.HikariPool                 :787  [32m                  [0;39m HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=9m31s284ms693Âµs500ns).
2023-05-16 01:51:23.581 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39125399002812416 [0;39m <==    Updates: 2
2023-05-16 01:51:23.581 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39125399002812416 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š571280æ¯«ç§’
2023-05-16 01:51:23.582 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m39127795154161664 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-16 01:51:23.583 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39127795154161664 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-16 01:51:23.584 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39127795154161664 [0;39m ==> Parameters: 
2023-05-16 01:54:39.990 WARN  com.zaxxer.hikari.pool.HikariPool                 :787  [32m                  [0;39m HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=3m16s410ms693Âµs300ns).
2023-05-16 01:54:39.994 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m39127795154161664 [0;39m <==    Updates: 0
2023-05-16 01:54:39.996 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m39127795154161664 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š196414æ¯«ç§’
2023-05-16 01:54:39.997 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m39128618982576128 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-16 01:54:39.998 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39128618982576128 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-16 01:54:39.998 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39128618982576128 [0;39m ==> Parameters: 
2023-05-16 01:54:39.999 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:54:40.000 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m39128618982576128 [0;39m <==    Updates: 2
2023-05-16 01:54:40.000 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m39128618982576128 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-05-16 01:54:40.026 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m39125276407500800 [0;39m è¿”å›žç»“æžœ: {"content":[{"content":"Vueç®€ä»‹","createTime":1684053346000,"ebookId":2,"id":25,"name":"test","replies":[{"content":"vueç®€ä»‹","createTime":1684069365000,"ebookId":2,"id":36,"name":"demo","parentId":25,"replies":[{"content":"11","createTime":1684155765000,"ebookId":2,"id":40,"name":"test","parentId":36,"replies":[],"replyname":"test","replytouserId":1,"userId":1}],"replyname":"test","replytouserId":1,"userId":2}],"userId":1}],"success":true}
2023-05-16 01:54:40.026 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m39125276407500800 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š796961 ms -------------
2023-05-16 01:54:40.299 INFO  o.a.r.s.support.DefaultRocketMQListenerContainer  :216  [32m                  [0;39m container destroyed, DefaultRocketMQListenerContainer{consumerGroup='default', nameServer='127.0.0.1:9876', topic='VOTE_TOPIC', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
2023-05-16 01:54:40.302 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :218  [32m                  [0;39m Shutting down ExecutorService 'taskScheduler'
2023-05-16 01:54:40.303 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :218  [32m                  [0;39m Shutting down ExecutorService 'applicationTaskExecutor'
2023-05-16 01:54:40.304 INFO  com.zaxxer.hikari.HikariDataSource                :350  [32m                  [0;39m HikariPool-1 - Shutdown initiated...
2023-05-16 01:54:40.415 INFO  com.zaxxer.hikari.HikariDataSource                :352  [32m                  [0;39m HikariPool-1 - Shutdown completed.
2023-05-16 01:54:40.613 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-05-16 01:54:40.620 WARN  o.s.beans.factory.support.DisposableBeanAdapter   :267  [32m                  [0;39m Invocation of destroy method failed on bean with name 'rocketMQTemplate': java.lang.IllegalStateException: Shutdown in progress
2023-05-16 01:54:40.621 WARN  o.s.beans.factory.support.DisposableBeanAdapter   :349  [32m                  [0;39m Destroy method 'shutdown' on bean with name 'defaultMQProducer' threw an exception: java.lang.IllegalStateException: Shutdown in progress
