2023-05-28 00:00:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m43448416629559296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-05-28 00:00:00.070 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m43448416629559296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-05-28 00:00:00.071 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m43448416629559296 [0;39m ==> Parameters: 
2023-05-28 00:00:00.148 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m43448416629559296 [0;39m <==    Updates: 0
2023-05-28 00:00:00.148 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m43448416629559296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š116æ¯«ç§’
2023-05-28 00:00:00.149 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m43448417195790336 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-28 00:00:00.149 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m43448417195790336 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-28 00:00:00.149 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m43448417195790336 [0;39m ==> Parameters: 
2023-05-28 00:00:00.218 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m43448417195790336 [0;39m <==    Updates: 5
2023-05-28 00:00:00.218 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m43448417195790336 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š69æ¯«ç§’
2023-05-28 00:02:00.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m43448919941844992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-28 00:02:00.049 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m43448919941844992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-28 00:02:00.050 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m43448919941844992 [0;39m ==> Parameters: 
2023-05-28 00:02:00.119 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m43448919941844992 [0;39m <==    Updates: 5
2023-05-28 00:02:00.119 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m43448919941844992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š106æ¯«ç§’
2023-05-28 00:04:00.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m43449423241547776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-05-28 00:04:00.046 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m43449423241547776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-05-28 00:04:00.047 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m43449423241547776 [0;39m ==> Parameters: 
2023-05-28 00:04:00.130 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m43449423241547776 [0;39m <==    Updates: 5
2023-05-28 00:04:00.130 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m43449423241547776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š121æ¯«ç§’
