2023-06-21 00:00:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m52145725349433344 [0;39m 生成今日电子书快照开始
2023-06-21 00:00:00.039 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m52145725349433344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-06-21 00:00:00.041 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m52145725349433344 [0;39m ==> Parameters: 
2023-06-21 00:00:00.121 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m52145725349433344 [0;39m <==    Updates: 0
2023-06-21 00:00:00.122 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m52145725349433344 [0;39m 生成今日电子书快照结束，耗时：115毫秒
2023-06-21 00:00:00.122 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52145725856944128 [0;39m 更新电子书下的文档数据开始
2023-06-21 00:00:00.123 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52145725856944128 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 00:00:00.123 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52145725856944128 [0;39m ==> Parameters: 
2023-06-21 00:00:00.189 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52145725856944128 [0;39m <==    Updates: 5
2023-06-21 00:00:00.189 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52145725856944128 [0;39m 更新电子书下的文档数据结束，耗时：67毫秒
2023-06-21 00:02:00.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52146228699467776 [0;39m 更新电子书下的文档数据开始
2023-06-21 00:02:00.048 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52146228699467776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 00:02:00.048 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52146228699467776 [0;39m ==> Parameters: 
2023-06-21 00:02:00.116 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52146228699467776 [0;39m <==    Updates: 5
2023-06-21 00:02:00.116 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52146228699467776 [0;39m 更新电子书下的文档数据结束，耗时：107毫秒
2023-06-21 00:04:00.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52146731999170560 [0;39m 更新电子书下的文档数据开始
2023-06-21 00:04:00.039 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52146731999170560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 00:04:00.040 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52146731999170560 [0;39m ==> Parameters: 
2023-06-21 00:04:00.112 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52146731999170560 [0;39m <==    Updates: 5
2023-06-21 00:04:00.113 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52146731999170560 [0;39m 更新电子书下的文档数据结束，耗时：108毫秒
2023-06-21 00:06:00.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52147235332427776 [0;39m 更新电子书下的文档数据开始
2023-06-21 00:06:00.057 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52147235332427776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 00:06:00.058 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52147235332427776 [0;39m ==> Parameters: 
2023-06-21 00:06:00.125 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52147235332427776 [0;39m <==    Updates: 5
2023-06-21 00:06:00.125 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52147235332427776 [0;39m 更新电子书下的文档数据结束，耗时：116毫秒
2023-06-21 00:08:00.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52147738623741952 [0;39m 更新电子书下的文档数据开始
2023-06-21 00:08:00.037 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52147738623741952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 00:08:00.038 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52147738623741952 [0;39m ==> Parameters: 
2023-06-21 00:08:00.104 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52147738623741952 [0;39m <==    Updates: 5
2023-06-21 00:08:00.104 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52147738623741952 [0;39m 更新电子书下的文档数据结束，耗时：101毫秒
2023-06-21 00:10:00.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52148241948610560 [0;39m 更新电子书下的文档数据开始
2023-06-21 00:10:00.037 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52148241948610560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 00:10:00.037 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52148241948610560 [0;39m ==> Parameters: 
2023-06-21 00:10:00.100 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52148241948610560 [0;39m <==    Updates: 5
2023-06-21 00:10:00.100 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52148241948610560 [0;39m 更新电子书下的文档数据结束，耗时：95毫秒
2023-06-21 00:12:00.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52148745311227904 [0;39m 更新电子书下的文档数据开始
2023-06-21 00:12:00.047 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52148745311227904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 00:12:00.047 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52148745311227904 [0;39m ==> Parameters: 
2023-06-21 00:12:00.110 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52148745311227904 [0;39m <==    Updates: 5
2023-06-21 00:12:00.110 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52148745311227904 [0;39m 更新电子书下的文档数据结束，耗时：94毫秒
2023-06-21 00:14:00.027 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52149248673845248 [0;39m 更新电子书下的文档数据开始
2023-06-21 00:14:00.059 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52149248673845248 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 00:14:00.059 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52149248673845248 [0;39m ==> Parameters: 
2023-06-21 00:14:00.123 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52149248673845248 [0;39m <==    Updates: 5
2023-06-21 00:14:00.123 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52149248673845248 [0;39m 更新电子书下的文档数据结束，耗时：96毫秒
2023-06-21 00:16:00.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52149751914827776 [0;39m 更新电子书下的文档数据开始
2023-06-21 00:16:00.051 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52149751914827776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 00:16:00.051 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52149751914827776 [0;39m ==> Parameters: 
2023-06-21 00:16:00.121 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52149751914827776 [0;39m <==    Updates: 5
2023-06-21 00:16:00.121 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52149751914827776 [0;39m 更新电子书下的文档数据结束，耗时：112毫秒
2023-06-21 00:18:00.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52150255231307776 [0;39m 更新电子书下的文档数据开始
2023-06-21 00:18:00.043 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52150255231307776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 00:18:00.043 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52150255231307776 [0;39m ==> Parameters: 
2023-06-21 00:18:00.111 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52150255231307776 [0;39m <==    Updates: 5
2023-06-21 00:18:00.111 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52150255231307776 [0;39m 更新电子书下的文档数据结束，耗时：102毫秒
2023-06-21 00:20:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m52150758514233344 [0;39m 生成今日电子书快照开始
2023-06-21 00:20:00.032 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m52150758514233344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-06-21 00:20:00.032 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m52150758514233344 [0;39m ==> Parameters: 
2023-06-21 00:20:00.103 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m52150758514233344 [0;39m <==    Updates: 0
2023-06-21 00:20:00.103 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m52150758514233344 [0;39m 生成今日电子书快照结束，耗时：102毫秒
2023-06-21 00:20:00.103 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52150758942052352 [0;39m 更新电子书下的文档数据开始
2023-06-21 00:20:00.104 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52150758942052352 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 00:20:00.104 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52150758942052352 [0;39m ==> Parameters: 
2023-06-21 00:20:00.168 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52150758942052352 [0;39m <==    Updates: 5
2023-06-21 00:20:00.168 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52150758942052352 [0;39m 更新电子书下的文档数据结束，耗时：65毫秒
2023-06-21 00:22:00.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52151261881044992 [0;39m 更新电子书下的文档数据开始
2023-06-21 00:22:00.047 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52151261881044992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 00:22:00.048 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52151261881044992 [0;39m ==> Parameters: 
2023-06-21 00:22:00.118 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52151261881044992 [0;39m <==    Updates: 5
2023-06-21 00:22:00.119 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52151261881044992 [0;39m 更新电子书下的文档数据结束，耗时：106毫秒
2023-06-21 00:24:00.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52151765180747776 [0;39m 更新电子书下的文档数据开始
2023-06-21 00:24:00.043 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52151765180747776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 00:24:00.044 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52151765180747776 [0;39m ==> Parameters: 
2023-06-21 00:24:00.111 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52151765180747776 [0;39m <==    Updates: 5
2023-06-21 00:24:00.112 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52151765180747776 [0;39m 更新电子书下的文档数据结束，耗时：102毫秒
2023-06-21 00:26:00.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52152268476256256 [0;39m 更新电子书下的文档数据开始
2023-06-21 00:26:00.040 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52152268476256256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 00:26:00.040 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52152268476256256 [0;39m ==> Parameters: 
2023-06-21 00:26:00.110 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52152268476256256 [0;39m <==    Updates: 5
2023-06-21 00:26:00.110 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52152268476256256 [0;39m 更新电子书下的文档数据结束，耗时：105毫秒
2023-06-21 00:28:00.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52152771805319168 [0;39m 更新电子书下的文档数据开始
2023-06-21 00:28:00.043 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52152771805319168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 00:28:00.043 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52152771805319168 [0;39m ==> Parameters: 
2023-06-21 00:28:00.112 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52152771805319168 [0;39m <==    Updates: 5
2023-06-21 00:28:00.113 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52152771805319168 [0;39m 更新电子书下的文档数据结束，耗时：105毫秒
2023-06-21 00:30:00.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52153275138576384 [0;39m 更新电子书下的文档数据开始
2023-06-21 00:30:00.047 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52153275138576384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 00:30:00.047 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52153275138576384 [0;39m ==> Parameters: 
2023-06-21 00:30:00.117 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52153275138576384 [0;39m <==    Updates: 5
2023-06-21 00:30:00.117 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52153275138576384 [0;39m 更新电子书下的文档数据结束，耗时：106毫秒
2023-06-21 00:32:00.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52153778442473472 [0;39m 更新电子书下的文档数据开始
2023-06-21 00:32:00.044 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52153778442473472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 00:32:00.045 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52153778442473472 [0;39m ==> Parameters: 
2023-06-21 00:32:00.116 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52153778442473472 [0;39m <==    Updates: 5
2023-06-21 00:32:00.116 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52153778442473472 [0;39m 更新电子书下的文档数据结束，耗时：108毫秒
2023-06-21 00:34:00.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52154281729593344 [0;39m 更新电子书下的文档数据开始
2023-06-21 00:34:00.037 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52154281729593344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 00:34:00.038 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52154281729593344 [0;39m ==> Parameters: 
2023-06-21 00:34:00.110 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52154281729593344 [0;39m <==    Updates: 5
2023-06-21 00:34:00.110 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52154281729593344 [0;39m 更新电子书下的文档数据结束，耗时：108毫秒
2023-06-21 00:36:00.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52154785058656256 [0;39m 更新电子书下的文档数据开始
2023-06-21 00:36:00.036 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52154785058656256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 00:36:00.036 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52154785058656256 [0;39m ==> Parameters: 
2023-06-21 00:36:00.115 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52154785058656256 [0;39m <==    Updates: 5
2023-06-21 00:36:00.115 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52154785058656256 [0;39m 更新电子书下的文档数据结束，耗时：111毫秒
2023-06-21 00:38:00.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52155288412884992 [0;39m 更新电子书下的文档数据开始
2023-06-21 00:38:00.098 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52155288412884992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 00:38:00.098 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52155288412884992 [0;39m ==> Parameters: 
2023-06-21 00:38:00.227 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52155288412884992 [0;39m <==    Updates: 5
2023-06-21 00:38:00.227 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52155288412884992 [0;39m 更新电子书下的文档数据结束，耗时：214毫秒
2023-06-21 00:40:00.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52155791691616256 [0;39m 更新电子书下的文档数据开始
2023-06-21 00:40:00.036 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52155791691616256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 00:40:00.036 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52155791691616256 [0;39m ==> Parameters: 
2023-06-21 00:40:00.099 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52155791691616256 [0;39m <==    Updates: 5
2023-06-21 00:40:00.099 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52155791691616256 [0;39m 更新电子书下的文档数据结束，耗时：95毫秒
2023-06-21 00:40:00.099 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m52155792090075136 [0;39m 生成今日电子书快照开始
2023-06-21 00:40:00.099 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m52155792090075136 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-06-21 00:40:00.099 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m52155792090075136 [0;39m ==> Parameters: 
2023-06-21 00:40:00.180 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m52155792090075136 [0;39m <==    Updates: 0
2023-06-21 00:40:00.180 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m52155792090075136 [0;39m 生成今日电子书快照结束，耗时：81毫秒
2023-06-21 00:42:00.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52156295045844992 [0;39m 更新电子书下的文档数据开始
2023-06-21 00:42:00.048 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52156295045844992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 00:42:00.049 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52156295045844992 [0;39m ==> Parameters: 
2023-06-21 00:42:00.121 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52156295045844992 [0;39m <==    Updates: 5
2023-06-21 00:42:00.121 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52156295045844992 [0;39m 更新电子书下的文档数据结束，耗时：108毫秒
2023-06-21 00:44:00.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52156798324576256 [0;39m 更新电子书下的文档数据开始
2023-06-21 00:44:00.038 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52156798324576256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 00:44:00.038 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52156798324576256 [0;39m ==> Parameters: 
2023-06-21 00:44:00.106 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52156798324576256 [0;39m <==    Updates: 5
2023-06-21 00:44:00.106 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52156798324576256 [0;39m 更新电子书下的文档数据结束，耗时：102毫秒
2023-06-21 00:46:00.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52157301674610688 [0;39m 更新电子书下的文档数据开始
2023-06-21 00:46:00.046 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52157301674610688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 00:46:00.046 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52157301674610688 [0;39m ==> Parameters: 
2023-06-21 00:46:00.117 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52157301674610688 [0;39m <==    Updates: 5
2023-06-21 00:46:00.117 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52157301674610688 [0;39m 更新电子书下的文档数据结束，耗时：105毫秒
2023-06-21 00:48:00.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52157804944953344 [0;39m 更新电子书下的文档数据开始
2023-06-21 00:48:00.035 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52157804944953344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 00:48:00.035 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52157804944953344 [0;39m ==> Parameters: 
2023-06-21 00:48:00.102 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52157804944953344 [0;39m <==    Updates: 5
2023-06-21 00:48:00.103 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52157804944953344 [0;39m 更新电子书下的文档数据结束，耗时：102毫秒
2023-06-21 00:50:00.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52158308269821952 [0;39m 更新电子书下的文档数据开始
2023-06-21 00:50:00.041 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52158308269821952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 00:50:00.042 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52158308269821952 [0;39m ==> Parameters: 
2023-06-21 00:50:00.112 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52158308269821952 [0;39m <==    Updates: 5
2023-06-21 00:50:00.112 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52158308269821952 [0;39m 更新电子书下的文档数据结束，耗时：108毫秒
2023-06-21 00:52:00.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52158811607273472 [0;39m 更新电子书下的文档数据开始
2023-06-21 00:52:00.044 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52158811607273472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 00:52:00.044 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52158811607273472 [0;39m ==> Parameters: 
2023-06-21 00:52:00.113 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52158811607273472 [0;39m <==    Updates: 5
2023-06-21 00:52:00.113 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52158811607273472 [0;39m 更新电子书下的文档数据结束，耗时：104毫秒
2023-06-21 00:54:00.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52159314948919296 [0;39m 更新电子书下的文档数据开始
2023-06-21 00:54:00.049 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52159314948919296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 00:54:00.050 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52159314948919296 [0;39m ==> Parameters: 
2023-06-21 00:54:00.119 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52159314948919296 [0;39m <==    Updates: 5
2023-06-21 00:54:00.119 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52159314948919296 [0;39m 更新电子书下的文档数据结束，耗时：105毫秒
2023-06-21 00:56:00.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52159818231844864 [0;39m 更新电子书下的文档数据开始
2023-06-21 00:56:00.041 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52159818231844864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 00:56:00.041 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52159818231844864 [0;39m ==> Parameters: 
2023-06-21 00:56:00.110 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52159818231844864 [0;39m <==    Updates: 5
2023-06-21 00:56:00.110 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52159818231844864 [0;39m 更新电子书下的文档数据结束，耗时：104毫秒
2023-06-21 00:58:00.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52160321577684992 [0;39m 更新电子书下的文档数据开始
2023-06-21 00:58:00.051 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52160321577684992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 00:58:00.051 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52160321577684992 [0;39m ==> Parameters: 
2023-06-21 00:58:00.122 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52160321577684992 [0;39m <==    Updates: 5
2023-06-21 00:58:00.123 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52160321577684992 [0;39m 更新电子书下的文档数据结束，耗时：110毫秒
2023-06-21 01:00:00.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52160824873193472 [0;39m 更新电子书下的文档数据开始
2023-06-21 01:00:00.041 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52160824873193472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 01:00:00.041 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52160824873193472 [0;39m ==> Parameters: 
2023-06-21 01:00:00.108 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52160824873193472 [0;39m <==    Updates: 5
2023-06-21 01:00:00.108 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52160824873193472 [0;39m 更新电子书下的文档数据结束，耗时：100毫秒
2023-06-21 01:00:00.108 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m52160825292623872 [0;39m 生成今日电子书快照开始
2023-06-21 01:00:00.109 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m52160825292623872 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-06-21 01:00:00.109 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m52160825292623872 [0;39m ==> Parameters: 
2023-06-21 01:00:00.176 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m52160825292623872 [0;39m <==    Updates: 0
2023-06-21 01:00:00.177 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m52160825292623872 [0;39m 生成今日电子书快照结束，耗时：69毫秒
2023-06-21 01:02:00.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52161328210644992 [0;39m 更新电子书下的文档数据开始
2023-06-21 01:02:00.046 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52161328210644992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 01:02:00.047 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52161328210644992 [0;39m ==> Parameters: 
2023-06-21 01:02:00.112 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52161328210644992 [0;39m <==    Updates: 5
2023-06-21 01:02:00.112 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52161328210644992 [0;39m 更新电子书下的文档数据结束，耗时：99毫秒
2023-06-21 01:04:00.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52161831485181952 [0;39m 更新电子书下的文档数据开始
2023-06-21 01:04:00.035 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52161831485181952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 01:04:00.035 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52161831485181952 [0;39m ==> Parameters: 
2023-06-21 01:04:00.099 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52161831485181952 [0;39m <==    Updates: 5
2023-06-21 01:04:00.099 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52161831485181952 [0;39m 更新电子书下的文档数据结束，耗时：96毫秒
2023-06-21 01:06:00.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52162334805856256 [0;39m 更新电子书下的文档数据开始
2023-06-21 01:06:00.039 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52162334805856256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 01:06:00.040 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52162334805856256 [0;39m ==> Parameters: 
2023-06-21 01:06:00.108 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52162334805856256 [0;39m <==    Updates: 5
2023-06-21 01:06:00.108 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52162334805856256 [0;39m 更新电子书下的文档数据结束，耗时：104毫秒
2023-06-21 01:08:00.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52162838168473600 [0;39m 更新电子书下的文档数据开始
2023-06-21 01:08:00.052 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52162838168473600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 01:08:00.053 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52162838168473600 [0;39m ==> Parameters: 
2023-06-21 01:08:00.122 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52162838168473600 [0;39m <==    Updates: 5
2023-06-21 01:08:00.122 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52162838168473600 [0;39m 更新电子书下的文档数据结束，耗时：107毫秒
2023-06-21 01:10:00.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52163341443010560 [0;39m 更新电子书下的文档数据开始
2023-06-21 01:10:00.038 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52163341443010560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 01:10:00.038 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52163341443010560 [0;39m ==> Parameters: 
2023-06-21 01:10:00.108 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52163341443010560 [0;39m <==    Updates: 5
2023-06-21 01:10:00.109 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52163341443010560 [0;39m 更新电子书下的文档数据结束，耗时：103毫秒
2023-06-21 01:12:00.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52163844746907648 [0;39m 更新电子书下的文档数据开始
2023-06-21 01:12:00.038 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52163844746907648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 01:12:00.039 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52163844746907648 [0;39m ==> Parameters: 
2023-06-21 01:12:00.107 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52163844746907648 [0;39m <==    Updates: 5
2023-06-21 01:12:00.108 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52163844746907648 [0;39m 更新电子书下的文档数据结束，耗时：106毫秒
2023-06-21 01:14:00.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52164348117913600 [0;39m 更新电子书下的文档数据开始
2023-06-21 01:14:00.049 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52164348117913600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 01:14:00.050 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52164348117913600 [0;39m ==> Parameters: 
2023-06-21 01:14:00.122 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52164348117913600 [0;39m <==    Updates: 5
2023-06-21 01:14:00.123 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52164348117913600 [0;39m 更新电子书下的文档数据结束，耗时：108毫秒
2023-06-21 01:16:00.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52164851384061952 [0;39m 更新电子书下的文档数据开始
2023-06-21 01:16:00.036 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52164851384061952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 01:16:00.037 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52164851384061952 [0;39m ==> Parameters: 
2023-06-21 01:16:00.109 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52164851384061952 [0;39m <==    Updates: 5
2023-06-21 01:16:00.109 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52164851384061952 [0;39m 更新电子书下的文档数据结束，耗时：106毫秒
2023-06-21 01:18:00.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52165354708930560 [0;39m 更新电子书下的文档数据开始
2023-06-21 01:18:00.040 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52165354708930560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 01:18:00.041 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52165354708930560 [0;39m ==> Parameters: 
2023-06-21 01:18:00.111 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52165354708930560 [0;39m <==    Updates: 5
2023-06-21 01:18:00.112 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52165354708930560 [0;39m 更新电子书下的文档数据结束，耗时：107毫秒
2023-06-21 01:20:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m52165858054770688 [0;39m 生成今日电子书快照开始
2023-06-21 01:20:00.046 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m52165858054770688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-06-21 01:20:00.048 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m52165858054770688 [0;39m ==> Parameters: 
2023-06-21 01:20:00.117 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m52165858054770688 [0;39m <==    Updates: 0
2023-06-21 01:20:00.117 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m52165858054770688 [0;39m 生成今日电子书快照结束，耗时：105毫秒
2023-06-21 01:20:00.118 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52165858499366912 [0;39m 更新电子书下的文档数据开始
2023-06-21 01:20:00.118 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52165858499366912 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 01:20:00.118 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52165858499366912 [0;39m ==> Parameters: 
2023-06-21 01:20:00.185 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52165858499366912 [0;39m <==    Updates: 5
2023-06-21 01:20:00.186 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52165858499366912 [0;39m 更新电子书下的文档数据结束，耗时：68毫秒
2023-06-21 01:22:00.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52166361371250688 [0;39m 更新电子书下的文档数据开始
2023-06-21 01:22:00.046 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52166361371250688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 01:22:00.046 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52166361371250688 [0;39m ==> Parameters: 
2023-06-21 01:22:00.113 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52166361371250688 [0;39m <==    Updates: 5
2023-06-21 01:22:00.114 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52166361371250688 [0;39m 更新电子书下的文档数据结束，耗时：102毫秒
2023-06-21 01:24:00.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52166864662564864 [0;39m 更新电子书下的文档数据开始
2023-06-21 01:24:00.041 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52166864662564864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 01:24:00.041 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52166864662564864 [0;39m ==> Parameters: 
2023-06-21 01:24:00.108 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52166864662564864 [0;39m <==    Updates: 5
2023-06-21 01:24:00.108 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52166864662564864 [0;39m 更新电子书下的文档数据结束，耗时：102毫秒
2023-06-21 01:26:00.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52167368012599296 [0;39m 更新电子书下的文档数据开始
2023-06-21 01:26:00.049 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52167368012599296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 01:26:00.049 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52167368012599296 [0;39m ==> Parameters: 
2023-06-21 01:26:00.119 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52167368012599296 [0;39m <==    Updates: 5
2023-06-21 01:26:00.120 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52167368012599296 [0;39m 更新电子书下的文档数据结束，耗时：106毫秒
2023-06-21 01:27:53.868 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :218  [32m                  [0;39m Shutting down ExecutorService 'taskScheduler'
2023-06-21 01:27:53.871 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :218  [32m                  [0;39m Shutting down ExecutorService 'applicationTaskExecutor'
2023-06-21 01:27:53.871 INFO  com.zaxxer.hikari.HikariDataSource                :350  [32m                  [0;39m HikariPool-1 - Shutdown initiated...
2023-06-21 01:27:53.877 INFO  com.zaxxer.hikari.HikariDataSource                :352  [32m                  [0;39m HikariPool-1 - Shutdown completed.
2023-06-21 01:28:00.220 INFO  com.jiawa.wiki.WikiApplication                    :55   [32m                  [0;39m Starting WikiApplication using Java 1.8.0_271 on LAPTOP-TLCI2GAA with PID 17516 (D:\work\Coun-Vue\target\classes started by k in D:\work\Coun-Vue)
2023-06-21 01:28:00.220 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.1.6.Final
2023-06-21 01:28:00.224 INFO  com.jiawa.wiki.WikiApplication                    :660  [32m                  [0;39m No active profile set, falling back to default profiles: default
2023-06-21 01:28:00.298 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-06-21 01:28:00.298 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-06-21 01:28:01.031 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :250  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2023-06-21 01:28:01.032 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :128  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-06-21 01:28:01.063 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :188  [32m                  [0;39m Finished Spring Data repository scanning in 16 ms. Found 0 Redis repository interfaces.
2023-06-21 01:28:01.935 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2023-06-21 01:28:01.942 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2023-06-21 01:28:01.943 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2023-06-21 01:28:01.943 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.39]
2023-06-21 01:28:02.032 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2023-06-21 01:28:02.032 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :289  [32m                  [0;39m Root WebApplicationContext: initialization completed in 1733 ms
2023-06-21 01:28:02.980 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2023-06-21 01:28:03.342 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2023-06-21 01:28:03.394 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2023-06-21 01:28:03.418 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2023-06-21 01:28:03.434 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2023-06-21 01:28:03.447 INFO  com.jiawa.wiki.WikiApplication                    :61   [32m                  [0;39m Started WikiApplication in 3.727 seconds (JVM running for 4.926)
2023-06-21 01:28:03.450 INFO  com.jiawa.wiki.WikiApplication                    :26   [32m                  [0;39m 启动成功！！
2023-06-21 01:28:03.450 INFO  com.jiawa.wiki.WikiApplication                    :27   [32m                  [0;39m 地址: 	http://127.0.0.1:8880
2023-06-21 01:30:00.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52168374591033344 [0;39m 更新电子书下的文档数据开始
2023-06-21 01:30:00.048 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m52168374591033344 [0;39m HikariPool-1 - Starting...
2023-06-21 01:30:01.113 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m52168374591033344 [0;39m HikariPool-1 - Start completed.
2023-06-21 01:30:01.121 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52168374591033344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 01:30:01.142 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52168374591033344 [0;39m ==> Parameters: 
2023-06-21 01:30:01.211 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52168374591033344 [0;39m <==    Updates: 5
2023-06-21 01:30:01.212 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52168374591033344 [0;39m 更新电子书下的文档数据结束，耗时：1210毫秒
2023-06-21 01:32:00.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52168877932679168 [0;39m 更新电子书下的文档数据开始
2023-06-21 01:32:00.042 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52168877932679168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 01:32:00.042 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52168877932679168 [0;39m ==> Parameters: 
2023-06-21 01:32:00.110 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52168877932679168 [0;39m <==    Updates: 5
2023-06-21 01:32:00.111 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52168877932679168 [0;39m 更新电子书下的文档数据结束，耗时：104毫秒
2023-06-21 01:34:00.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52169381282713600 [0;39m 更新电子书下的文档数据开始
2023-06-21 01:34:00.048 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52169381282713600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 01:34:00.048 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52169381282713600 [0;39m ==> Parameters: 
2023-06-21 01:34:00.114 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52169381282713600 [0;39m <==    Updates: 5
2023-06-21 01:34:00.115 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52169381282713600 [0;39m 更新电子书下的文档数据结束，耗时：100毫秒
2023-06-21 01:36:00.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52169884540473344 [0;39m 更新电子书下的文档数据开始
2023-06-21 01:36:00.037 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52169884540473344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 01:36:00.038 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52169884540473344 [0;39m ==> Parameters: 
2023-06-21 01:36:00.106 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52169884540473344 [0;39m <==    Updates: 5
2023-06-21 01:36:00.107 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52169884540473344 [0;39m 更新电子书下的文档数据结束，耗时：105毫秒
2023-06-21 01:38:00.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52170387865341952 [0;39m 更新电子书下的文档数据开始
2023-06-21 01:38:00.037 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52170387865341952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 01:38:00.038 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52170387865341952 [0;39m ==> Parameters: 
2023-06-21 01:38:00.104 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52170387865341952 [0;39m <==    Updates: 5
2023-06-21 01:38:00.104 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52170387865341952 [0;39m 更新电子书下的文档数据结束，耗时：100毫秒
2023-06-21 01:38:42.815 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-21 01:38:42.816 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2023-06-21 01:38:42.817 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 1 ms
2023-06-21 01:38:42.837 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2023-06-21 01:38:42.858 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m                  [0;39m ------------- LoginInterceptor 结束 耗时：21 ms -------------
2023-06-21 01:38:42.887 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2023-06-21 01:38:42.888 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m                  [0;39m 接口登录拦截：，path：http://127.0.0.1:8880/user/list
2023-06-21 01:38:42.888 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m                  [0;39m 登录校验开始，token：52096406076395520
2023-06-21 01:38:43.751 WARN  com.jiawa.wiki.interceptor.LoginInterceptor       :55   [32m                  [0;39m token无效，请求被拦截
2023-06-21 01:38:43.861 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m52170571814932482 [0;39m ------------- 开始 -------------
2023-06-21 01:38:43.861 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m52170571814932480 [0;39m ------------- 开始 -------------
2023-06-21 01:38:43.861 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m52170571814932481 [0;39m ------------- 开始 -------------
2023-06-21 01:38:43.862 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m52170571814932481 [0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2023-06-21 01:38:43.862 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m52170571814932480 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-06-21 01:38:43.862 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m52170571814932480 [0;39m 类名方法: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-06-21 01:38:43.862 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m52170571814932481 [0;39m 类名方法: com.jiawa.wiki.controller.CategoryController.all
2023-06-21 01:38:43.862 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m52170571814932480 [0;39m 远程地址: 127.0.0.1
2023-06-21 01:38:43.862 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m52170571814932481 [0;39m 远程地址: 127.0.0.1
2023-06-21 01:38:43.862 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m52170571814932482 [0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-06-21 01:38:43.863 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m52170571814932482 [0;39m 类名方法: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-06-21 01:38:43.863 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m52170571814932482 [0;39m 远程地址: 127.0.0.1
2023-06-21 01:38:44.193 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m52170571814932481 [0;39m 请求参数: []
2023-06-21 01:38:44.193 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m52170571814932482 [0;39m 请求参数: []
2023-06-21 01:38:44.193 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m52170571814932480 [0;39m 请求参数: []
2023-06-21 01:38:44.233 INFO  com.jiawa.wiki.service.EbookSnapshotService       :36   [32m52170571814932480 [0;39m 访问Redis
2023-06-21 01:38:44.233 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m52170571814932482 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-06-21 01:38:44.235 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m52170571814932482 [0;39m ==> Parameters: 
2023-06-21 01:38:44.257 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m52170571814932481 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-06-21 01:38:44.257 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m52170571814932481 [0;39m ==> Parameters: 
2023-06-21 01:38:44.268 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m52170571814932480 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-06-21 01:38:44.268 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m52170571814932480 [0;39m ==> Parameters: 
2023-06-21 01:38:44.281 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m52170571814932482 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-06-21 01:38:44.282 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m52170571814932482 [0;39m <==        Row: 2023-05-21, 210, 8
2023-06-21 01:38:44.284 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m52170571814932482 [0;39m <==        Row: 2023-05-22, 0, 0
2023-06-21 01:38:44.284 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m52170571814932482 [0;39m <==        Row: 2023-05-23, 14, 3
2023-06-21 01:38:44.284 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m52170571814932482 [0;39m <==        Row: 2023-05-24, 46, 2
2023-06-21 01:38:44.285 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m52170571814932482 [0;39m <==        Row: 2023-05-25, 57, 3
2023-06-21 01:38:44.286 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m52170571814932482 [0;39m <==        Row: 2023-05-26, 4, 0
2023-06-21 01:38:44.286 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m52170571814932482 [0;39m <==        Row: 2023-05-27, 1, 0
2023-06-21 01:38:44.286 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m52170571814932482 [0;39m <==        Row: 2023-05-28, 42, 1
2023-06-21 01:38:44.287 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m52170571814932482 [0;39m <==        Row: 2023-05-29, 0, 0
2023-06-21 01:38:44.287 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m52170571814932482 [0;39m <==        Row: 2023-05-31, 1443, 46
2023-06-21 01:38:44.287 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m52170571814932482 [0;39m <==        Row: 2023-06-04, 1449, 46
2023-06-21 01:38:44.287 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m52170571814932482 [0;39m <==        Row: 2023-06-05, 0, 0
2023-06-21 01:38:44.288 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m52170571814932482 [0;39m <==        Row: 2023-06-08, 1481, 54
2023-06-21 01:38:44.288 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m52170571814932482 [0;39m <==        Row: 2023-06-11, 1481, 54
2023-06-21 01:38:44.288 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m52170571814932482 [0;39m <==        Row: 2023-06-17, 1482, 54
2023-06-21 01:38:44.289 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m52170571814932482 [0;39m <==        Row: 2023-06-18, 12, 5
2023-06-21 01:38:44.290 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m52170571814932482 [0;39m <==        Row: 2023-06-19, 0, 0
2023-06-21 01:38:44.290 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m52170571814932482 [0;39m <==      Total: 17
2023-06-21 01:38:44.292 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m52170571814932481 [0;39m <==    Columns: id, parent, name, sort
2023-06-21 01:38:44.292 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m52170571814932481 [0;39m <==        Row: 100, 0, 前端开发, 100
2023-06-21 01:38:44.293 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m52170571814932481 [0;39m <==        Row: 101, 100, Vue, 101
2023-06-21 01:38:44.293 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m52170571814932481 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-06-21 01:38:44.294 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m52170571814932481 [0;39m <==        Row: 504, 100, JavaScript, 103
2023-06-21 01:38:44.294 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m52170571814932481 [0;39m <==        Row: 200, 0, Java, 200
2023-06-21 01:38:44.294 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m52170571814932481 [0;39m <==        Row: 201, 200, 基础应用, 201
2023-06-21 01:38:44.294 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m52170571814932481 [0;39m <==        Row: 202, 200, 框架应用, 202
2023-06-21 01:38:44.294 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m52170571814932481 [0;39m <==        Row: 300, 0, Python, 300
2023-06-21 01:38:44.295 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m52170571814932481 [0;39m <==        Row: 301, 300, 基础应用, 301
2023-06-21 01:38:44.295 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m52170571814932481 [0;39m <==        Row: 302, 300, 进阶方向应用, 302
2023-06-21 01:38:44.295 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m52170571814932481 [0;39m <==        Row: 400, 0, 数据库, 400
2023-06-21 01:38:44.296 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m52170571814932481 [0;39m <==        Row: 401, 400, MySQL, 401
2023-06-21 01:38:44.296 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m52170571814932481 [0;39m <==        Row: 500, 0, 其它, 500
2023-06-21 01:38:44.296 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m52170571814932481 [0;39m <==        Row: 501, 500, 服务器, 501
2023-06-21 01:38:44.296 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m52170571814932481 [0;39m <==        Row: 502, 500, 开发工具, 502
2023-06-21 01:38:44.296 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m52170571814932481 [0;39m <==        Row: 503, 500, 热门服务端语言, 503
2023-06-21 01:38:44.297 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m52170571814932481 [0;39m <==      Total: 16
2023-06-21 01:38:44.305 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m52170571814932480 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-06-21 01:38:44.305 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m52170571814932480 [0;39m <==        Row: 2023-06-19, 1494, 59, 0, 0
2023-06-21 01:38:44.306 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m52170571814932480 [0;39m <==        Row: 2023-06-20, 1504, 61, 10, 2
2023-06-21 01:38:44.307 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m52170571814932480 [0;39m <==      Total: 2
2023-06-21 01:38:44.313 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m52170571814932481 [0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":504,"name":"JavaScript","parent":100,"sort":103},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2023-06-21 01:38:44.313 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m52170571814932481 [0;39m ------------- 结束 耗时：453 ms -------------
2023-06-21 01:38:44.314 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m52170571814932482 [0;39m 返回结果: {"content":[{"date":1684598400000,"viewCount":0,"viewIncrease":210,"voteCount":0,"voteIncrease":8},{"date":1684684800000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1684771200000,"viewCount":0,"viewIncrease":14,"voteCount":0,"voteIncrease":3},{"date":1684857600000,"viewCount":0,"viewIncrease":46,"voteCount":0,"voteIncrease":2},{"date":1684944000000,"viewCount":0,"viewIncrease":57,"voteCount":0,"voteIncrease":3},{"date":1685030400000,"viewCount":0,"viewIncrease":4,"voteCount":0,"voteIncrease":0},{"date":1685116800000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":0},{"date":1685203200000,"viewCount":0,"viewIncrease":42,"voteCount":0,"voteIncrease":1},{"date":1685289600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1685462400000,"viewCount":0,"viewIncrease":1443,"voteCount":0,"voteIncrease":46},{"date":1685808000000,"viewCount":0,"viewIncrease":1449,"voteCount":0,"voteIncrease":46},{"date":1685894400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1686153600000,"viewCount":0,"viewIncrease":1481,"voteCount":0,"voteIncrease":54},{"date":1686412800000,"viewCount":0,"viewIncrease":1481,"voteCount":0,"voteIncrease":54},{"date":1686931200000,"viewCount":0,"viewIncrease":1482,"voteCount":0,"voteIncrease":54},{"date":1687017600000,"viewCount":0,"viewIncrease":12,"voteCount":0,"voteIncrease":5},{"date":1687104000000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2023-06-21 01:38:44.314 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m52170571814932482 [0;39m ------------- 结束 耗时：454 ms -------------
2023-06-21 01:38:44.344 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m52170571814932480 [0;39m 返回结果: {"content":[{"date":1687104000000,"viewCount":1494,"viewIncrease":0,"voteCount":59,"voteIncrease":0},{"date":1687190400000,"viewCount":1504,"viewIncrease":10,"voteCount":61,"voteIncrease":2}],"success":true}
2023-06-21 01:38:44.344 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m52170571814932480 [0;39m ------------- 结束 耗时：484 ms -------------
2023-06-21 01:39:42.312 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m52170816980389888 [0;39m ------------- 开始 -------------
2023-06-21 01:39:42.313 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m52170816980389888 [0;39m 请求地址: http://127.0.0.1:8880/user/login POST
2023-06-21 01:39:42.315 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m52170816980389888 [0;39m 类名方法: com.jiawa.wiki.controller.UserController.login
2023-06-21 01:39:42.315 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m52170816980389888 [0;39m 远程地址: 127.0.0.1
2023-06-21 01:39:42.318 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m52170816980389888 [0;39m 请求参数: [{"loginName":"test"}]
2023-06-21 01:39:42.372 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m52170816980389888 [0;39m ==>  Preparing: select id, login_name, `name`, `password`, avatar from user WHERE ( login_name = ? )
2023-06-21 01:39:42.373 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m52170816980389888 [0;39m ==> Parameters: test(String)
2023-06-21 01:39:42.407 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m52170816980389888 [0;39m <==    Columns: id, login_name, name, password, avatar
2023-06-21 01:39:42.408 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m52170816980389888 [0;39m <==        Row: 1, test, test, e70e2222a9d67c4f2eae107533359aa4, http://127.0.0.1:8880/file/image-20220202121318183-16437751995162.png
2023-06-21 01:39:42.408 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m52170816980389888 [0;39m <==      Total: 1
2023-06-21 01:39:42.415 INFO  com.jiawa.wiki.controller.UserController          :99   [32m52170816980389888 [0;39m 生成单点登录token：52170817412403200，并放入redis中
2023-06-21 01:39:42.452 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m52170816980389888 [0;39m 返回结果: {"content":{"id":1,"loginName":"test","name":"test","token":"52170817412403200"},"success":true}
2023-06-21 01:39:42.452 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m52170816980389888 [0;39m ------------- 结束 耗时：140 ms -------------
2023-06-21 01:39:47.757 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :218  [32m                  [0;39m Shutting down ExecutorService 'taskScheduler'
2023-06-21 01:39:47.758 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :218  [32m                  [0;39m Shutting down ExecutorService 'applicationTaskExecutor'
2023-06-21 01:39:47.759 INFO  com.zaxxer.hikari.HikariDataSource                :350  [32m                  [0;39m HikariPool-1 - Shutdown initiated...
2023-06-21 01:39:47.764 INFO  com.zaxxer.hikari.HikariDataSource                :352  [32m                  [0;39m HikariPool-1 - Shutdown completed.
2023-06-21 01:39:51.715 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.1.6.Final
2023-06-21 01:39:51.724 INFO  com.jiawa.wiki.WikiApplication                    :55   [32m                  [0;39m Starting WikiApplication using Java 1.8.0_271 on LAPTOP-TLCI2GAA with PID 8076 (D:\work\Coun-Vue\target\classes started by k in D:\work\Coun-Vue)
2023-06-21 01:39:51.725 INFO  com.jiawa.wiki.WikiApplication                    :660  [32m                  [0;39m No active profile set, falling back to default profiles: default
2023-06-21 01:39:51.778 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-06-21 01:39:51.779 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-06-21 01:39:52.557 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :250  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2023-06-21 01:39:52.559 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :128  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-06-21 01:39:52.591 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :188  [32m                  [0;39m Finished Spring Data repository scanning in 17 ms. Found 0 Redis repository interfaces.
2023-06-21 01:39:53.441 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2023-06-21 01:39:53.451 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2023-06-21 01:39:53.454 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2023-06-21 01:39:53.454 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.39]
2023-06-21 01:39:53.569 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2023-06-21 01:39:53.569 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :289  [32m                  [0;39m Root WebApplicationContext: initialization completed in 1789 ms
2023-06-21 01:39:54.488 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2023-06-21 01:39:54.927 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2023-06-21 01:39:54.975 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2023-06-21 01:39:55.000 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2023-06-21 01:39:55.015 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2023-06-21 01:39:55.027 INFO  com.jiawa.wiki.WikiApplication                    :61   [32m                  [0;39m Started WikiApplication in 3.819 seconds (JVM running for 4.789)
2023-06-21 01:39:55.031 INFO  com.jiawa.wiki.WikiApplication                    :26   [32m                  [0;39m 启动成功！！
2023-06-21 01:39:55.031 INFO  com.jiawa.wiki.WikiApplication                    :27   [32m                  [0;39m 地址: 	http://127.0.0.1:8880
2023-06-21 01:39:59.547 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-06-21 01:39:59.547 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2023-06-21 01:39:59.548 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 1 ms
2023-06-21 01:39:59.560 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2023-06-21 01:39:59.597 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m                  [0;39m ------------- LoginInterceptor 结束 耗时：36 ms -------------
2023-06-21 01:39:59.609 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2023-06-21 01:39:59.609 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m                  [0;39m 接口登录拦截：，path：http://127.0.0.1:8880/user/logout/52170817412403200
2023-06-21 01:39:59.609 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m                  [0;39m 登录校验开始，token：52170817412403200
2023-06-21 01:40:00.033 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52170891307651072 [0;39m 更新电子书下的文档数据开始
2023-06-21 01:40:00.059 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m52170891307651072 [0;39m HikariPool-1 - Starting...
2023-06-21 01:40:00.462 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m                  [0;39m 已登录：{"id":1,"loginName":"test","name":"test","token":"52170817412403200"}
2023-06-21 01:40:19.237 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m52170893375442944 [0;39m ------------- 开始 -------------
2023-06-21 01:40:21.873 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m52170893375442944 [0;39m 请求地址: http://127.0.0.1:8880/user/logout/52170817412403200 GET
2023-06-21 01:40:25.581 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m52170893375442944 [0;39m 类名方法: com.jiawa.wiki.controller.UserController.logout
2023-06-21 01:40:31.607 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m52170893375442944 [0;39m 远程地址: 127.0.0.1
2023-06-21 01:40:51.367 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m52170893375442944 [0;39m 请求参数: ["52170817412403200"]
2023-06-21 01:40:55.777 INFO  com.jiawa.wiki.controller.UserController          :110  [32m52170893375442944 [0;39m 从redis中删除token: 52170817412403200
2023-06-21 01:40:55.785 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m52170893375442944 [0;39m 返回结果: {"success":true}
2023-06-21 01:40:55.785 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m52170893375442944 [0;39m ------------- 结束 耗时：55259 ms -------------
2023-06-21 01:40:56.024 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m52170893375442944 [0;39m ------------- LoginInterceptor 结束 耗时：56415 ms -------------
2023-06-21 01:40:56.669 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m52170891307651072 [0;39m HikariPool-1 - Start completed.
2023-06-21 01:40:56.678 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52170891307651072 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 01:40:56.693 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52170891307651072 [0;39m ==> Parameters: 
2023-06-21 01:40:56.764 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52170891307651072 [0;39m <==    Updates: 5
2023-06-21 01:40:56.767 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52170891307651072 [0;39m 更新电子书下的文档数据结束，耗时：56734毫秒
2023-06-21 01:40:56.768 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m52171129271488512 [0;39m 生成今日电子书快照开始
2023-06-21 01:40:56.768 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m52171129271488512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-06-21 01:40:56.770 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m52171129271488512 [0;39m ==> Parameters: 
2023-06-21 01:40:56.841 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m52171129271488512 [0;39m <==    Updates: 0
2023-06-21 01:40:56.841 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m52171129271488512 [0;39m 生成今日电子书快照结束，耗时：73毫秒
2023-06-21 01:42:00.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52171394510884864 [0;39m 更新电子书下的文档数据开始
2023-06-21 01:42:00.042 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52171394510884864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 01:42:00.042 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52171394510884864 [0;39m ==> Parameters: 
2023-06-21 01:42:00.107 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52171394510884864 [0;39m <==    Updates: 5
2023-06-21 01:42:00.107 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52171394510884864 [0;39m 更新电子书下的文档数据结束，耗时：101毫秒
2023-06-21 01:44:00.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52171897839947776 [0;39m 更新电子书下的文档数据开始
2023-06-21 01:44:00.043 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52171897839947776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 01:44:00.044 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52171897839947776 [0;39m ==> Parameters: 
2023-06-21 01:44:00.111 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52171897839947776 [0;39m <==    Updates: 5
2023-06-21 01:44:00.111 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52171897839947776 [0;39m 更新电子书下的文档数据结束，耗时：102毫秒
2023-06-21 01:46:00.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52172401160622080 [0;39m 更新电子书下的文档数据开始
2023-06-21 01:46:00.043 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52172401160622080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 01:46:00.043 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52172401160622080 [0;39m ==> Parameters: 
2023-06-21 01:46:00.107 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52172401160622080 [0;39m <==    Updates: 5
2023-06-21 01:46:00.108 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52172401160622080 [0;39m 更新电子书下的文档数据结束，耗时：97毫秒
2023-06-21 01:48:00.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52172904477102080 [0;39m 更新电子书下的文档数据开始
2023-06-21 01:48:00.046 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52172904477102080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 01:48:00.046 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52172904477102080 [0;39m ==> Parameters: 
2023-06-21 01:48:00.116 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52172904477102080 [0;39m <==    Updates: 5
2023-06-21 01:48:00.117 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52172904477102080 [0;39m 更新电子书下的文档数据结束，耗时：107毫秒
2023-06-21 01:50:00.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52173407760027648 [0;39m 更新电子书下的文档数据开始
2023-06-21 01:50:00.036 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52173407760027648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 01:50:00.036 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52173407760027648 [0;39m ==> Parameters: 
2023-06-21 01:50:00.105 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52173407760027648 [0;39m <==    Updates: 5
2023-06-21 01:50:00.106 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52173407760027648 [0;39m 更新电子书下的文档数据结束，耗时：104毫秒
2023-06-21 01:52:00.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m52173911084896256 [0;39m 更新电子书下的文档数据开始
2023-06-21 01:52:00.038 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52173911084896256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-06-21 01:52:00.039 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52173911084896256 [0;39m ==> Parameters: 
2023-06-21 01:52:00.104 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m52173911084896256 [0;39m <==    Updates: 5
2023-06-21 01:52:00.104 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m52173911084896256 [0;39m 更新电子书下的文档数据结束，耗时：99毫秒
