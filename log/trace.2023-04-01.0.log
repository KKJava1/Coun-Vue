2023-04-01 00:20:45.830 INFO  com.jiawa.wiki.WikiApplication                    :55   [32m                  [0;39m Starting WikiApplication using Java 1.8.0_271 on LAPTOP-TLCI2GAA with PID 16684 (D:\work\jiawawiki\target\classes started by k in D:\work\jiawawiki)
2023-04-01 00:20:45.831 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.1.6.Final
2023-04-01 00:20:45.840 INFO  com.jiawa.wiki.WikiApplication                    :660  [32m                  [0;39m No active profile set, falling back to default profiles: default
2023-04-01 00:20:45.917 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-04-01 00:20:45.917 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-04-01 00:20:46.751 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :250  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2023-04-01 00:20:46.753 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :128  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-04-01 00:20:46.787 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :188  [32m                  [0;39m Finished Spring Data repository scanning in 16 ms. Found 0 Redis repository interfaces.
2023-04-01 00:20:47.039 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration$$EnhancerBySpringCGLIB$$c5992bcd] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 00:20:47.057 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 00:20:47.616 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'defaultMQProducer' of type [org.apache.rocketmq.client.producer.DefaultMQProducer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 00:20:47.619 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonConfig' of type [com.jiawa.wiki.config.JacksonConfig$$EnhancerBySpringCGLIB$$67d3a0ce] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 00:20:47.620 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 00:20:47.622 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 00:20:47.626 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'spring.jackson-org.springframework.boot.autoconfigure.jackson.JacksonProperties' of type [org.springframework.boot.autoconfigure.jackson.JacksonProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 00:20:47.627 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'standardJacksonObjectMapperBuilderCustomizer' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration$StandardJackson2ObjectMapperBuilderCustomizer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 00:20:47.628 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 00:20:47.631 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'parameterNamesModule' of type [com.fasterxml.jackson.module.paramnames.ParameterNamesModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 00:20:47.632 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 00:20:47.655 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jsonComponentModule' of type [org.springframework.boot.jackson.JsonComponentModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 00:20:47.657 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.data.web.config.SpringDataJacksonConfiguration' of type [org.springframework.data.web.config.SpringDataJacksonConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 00:20:47.661 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonGeoModule' of type [org.springframework.data.geo.GeoModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 00:20:47.665 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapperBuilder' of type [org.springframework.http.converter.json.Jackson2ObjectMapperBuilder] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 00:20:47.685 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapper' of type [com.fasterxml.jackson.databind.ObjectMapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 00:20:49.036 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketMQTemplate' of type [org.apache.rocketmq.spring.core.RocketMQTemplate] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 00:20:49.038 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'transactionHandlerRegistry' of type [org.apache.rocketmq.spring.config.TransactionHandlerRegistry] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 00:20:49.908 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2023-04-01 00:20:49.920 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2023-04-01 00:20:49.922 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2023-04-01 00:20:49.923 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.39]
2023-04-01 00:20:50.095 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2023-04-01 00:20:50.095 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :289  [32m                  [0;39m Root WebApplicationContext: initialization completed in 4176 ms
2023-04-01 00:20:51.413 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:20:51.416 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:20:51.676 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2023-04-01 00:20:52.419 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2023-04-01 00:20:52.475 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2023-04-01 00:20:54.962 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:20:57.016 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:20:57.018 INFO  o.a.r.s.support.DefaultRocketMQListenerContainer  :243  [32m                  [0;39m running container: DefaultRocketMQListenerContainer{consumerGroup='default', nameServer='127.0.0.1:9876', topic='VOTE_TOPIC', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
2023-04-01 00:20:57.018 INFO  o.a.r.s.a.ListenerContainerConfiguration          :107  [32m                  [0;39m Register the listener to container, listenerBeanName:voteTopicConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-04-01 00:20:57.026 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2023-04-01 00:20:57.036 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2023-04-01 00:20:57.050 INFO  com.jiawa.wiki.WikiApplication                    :61   [32m                  [0;39m Started WikiApplication in 11.796 seconds (JVM running for 14.323)
2023-04-01 00:20:57.052 INFO  com.jiawa.wiki.WikiApplication                    :26   [32m                  [0;39m å¯åŠ¨æˆåŠŸï¼ï¼
2023-04-01 00:20:57.054 INFO  com.jiawa.wiki.WikiApplication                    :27   [32m                  [0;39m åœ°å€: 	http://127.0.0.1:8880
2023-04-01 00:21:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22797593109204992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:21:00.052 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m22797593109204992 [0;39m HikariPool-1 - Starting...
2023-04-01 00:21:00.242 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m22797593109204992 [0;39m HikariPool-1 - Start completed.
2023-04-01 00:21:00.252 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22797593109204992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:21:00.281 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22797593109204992 [0;39m ==> Parameters: 
2023-04-01 00:21:00.290 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22797593109204992 [0;39m <==    Updates: 5
2023-04-01 00:21:00.293 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22797593109204992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š279æ¯«ç§’
2023-04-01 00:21:01.114 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:21:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22797614042976256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:21:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22797614042976256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:21:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22797614042976256 [0;39m ==> Parameters: 
2023-04-01 00:21:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22797614042976256 [0;39m <==    Updates: 1
2023-04-01 00:21:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22797614042976256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š14æ¯«ç§’
2023-04-01 00:21:23.554 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:21:26.034 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:21:28.546 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:21:35.030 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22797739981148160 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:21:35.030 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22797739981148160 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:21:35.030 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22797739981148160 [0;39m ==> Parameters: 
2023-04-01 00:21:35.032 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22797739981148160 [0;39m <==    Updates: 1
2023-04-01 00:21:35.033 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22797739981148160 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 00:21:50.946 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:21:51.099 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:21:52.973 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:21:55.007 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:21:57.047 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:22:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22797844746473472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:22:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22797844746473472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:22:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22797844746473472 [0;39m ==> Parameters: 
2023-04-01 00:22:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22797844746473472 [0;39m <==    Updates: 0
2023-04-01 00:22:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22797844746473472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 00:22:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22797865734770688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:22:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22797865734770688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:22:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22797865734770688 [0;39m ==> Parameters: 
2023-04-01 00:22:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22797865734770688 [0;39m <==    Updates: 1
2023-04-01 00:22:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22797865734770688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 00:22:09.671 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-04-01 00:22:09.671 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2023-04-01 00:22:09.673 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 2 ms
2023-04-01 00:22:09.754 INFO  com.jiawa.wiki.websocket.WebSocketServer          :32   [32m                  [0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šhBr6KXnv1Iï¼Œsession idï¼š0ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2023-04-01 00:22:09.850 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22797886022619137 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:22:09.850 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22797886022619138 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:22:09.850 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22797886022619136 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:22:09.851 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22797886022619137 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-04-01 00:22:09.852 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22797886022619136 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 00:22:09.856 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22797886022619138 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-04-01 00:22:09.856 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22797886022619138 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-04-01 00:22:09.856 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22797886022619138 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:22:09.856 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22797886022619136 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 00:22:09.857 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22797886022619136 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:22:09.862 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22797886022619137 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-04-01 00:22:09.863 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22797886022619137 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:22:09.953 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22797886022619136 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 00:22:09.954 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22797886022619137 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 00:22:09.964 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m22797886022619137 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-04-01 00:22:09.965 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m22797886022619137 [0;39m ==> Parameters: 
2023-04-01 00:22:09.964 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22797886022619138 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 00:22:09.967 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m22797886022619138 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-04-01 00:22:09.968 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m22797886022619138 [0;39m ==> Parameters: 
2023-04-01 00:22:09.987 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22797886022619137 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-04-01 00:22:09.987 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m22797886022619138 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-04-01 00:22:09.988 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22797886022619137 [0;39m <==        Row: 2023-03-02, 0, 0
2023-04-01 00:22:09.988 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m22797886022619138 [0;39m <==        Row: 2023-04-01, 13, 7, 13, 7
2023-04-01 00:22:09.991 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m22797886022619138 [0;39m <==      Total: 1
2023-04-01 00:22:09.990 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22797886022619136 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 00:22:09.991 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22797886022619137 [0;39m <==        Row: 2023-03-05, 8, 5
2023-04-01 00:22:09.992 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22797886022619137 [0;39m <==        Row: 2023-03-06, 1, 1
2023-04-01 00:22:09.993 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22797886022619137 [0;39m <==        Row: 2023-03-18, 10, 7
2023-04-01 00:22:09.992 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22797886022619136 [0;39m ==> Parameters: 
2023-04-01 00:22:09.993 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22797886022619137 [0;39m <==        Row: 2023-03-23, 10, 7
2023-04-01 00:22:09.993 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22797886022619137 [0;39m <==        Row: 2023-03-25, 13, 7
2023-04-01 00:22:09.994 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22797886022619137 [0;39m <==        Row: 2023-03-26, 0, 0
2023-04-01 00:22:09.995 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22797886022619137 [0;39m <==        Row: 2023-03-27, 0, 0
2023-04-01 00:22:09.995 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m22797886022619137 [0;39m <==      Total: 8
2023-04-01 00:22:09.996 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797886022619136 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 00:22:09.997 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797886022619136 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-04-01 00:22:09.997 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797886022619136 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 00:22:09.998 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797886022619136 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 00:22:09.998 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797886022619136 [0;39m <==        Row: 200, 0, Java, 200
2023-04-01 00:22:09.999 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797886022619136 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 00:22:10.000 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797886022619136 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 00:22:10.000 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797886022619136 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 00:22:10.001 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797886022619136 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 00:22:10.001 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797886022619136 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 00:22:10.002 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797886022619136 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 00:22:10.002 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797886022619136 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 00:22:10.002 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797886022619136 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 00:22:10.003 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797886022619136 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 00:22:10.003 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797886022619136 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 00:22:10.003 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797886022619136 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 00:22:10.004 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22797886022619136 [0;39m <==      Total: 15
2023-04-01 00:22:10.028 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22797886022619138 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1680278400000,"viewCount":13,"viewIncrease":13,"voteCount":7,"voteIncrease":7}],"success":true}
2023-04-01 00:22:10.028 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22797886022619138 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š179 ms -------------
2023-04-01 00:22:10.029 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22797886022619137 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1677945600000,"viewCount":0,"viewIncrease":8,"voteCount":0,"voteIncrease":5},{"date":1678032000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":1},{"date":1679068800000,"viewCount":0,"viewIncrease":10,"voteCount":0,"voteIncrease":7},{"date":1679500800000,"viewCount":0,"viewIncrease":10,"voteCount":0,"voteIncrease":7},{"date":1679673600000,"viewCount":0,"viewIncrease":13,"voteCount":0,"voteIncrease":7},{"date":1679760000000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1679846400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2023-04-01 00:22:10.029 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22797886022619137 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š180 ms -------------
2023-04-01 00:22:10.031 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22797886022619136 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 00:22:10.031 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22797886022619136 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š182 ms -------------
2023-04-01 00:22:13.207 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:22:14.382 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22797905035399168 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:22:14.382 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22797905035399168 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/user/login POST
2023-04-01 00:22:14.382 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22797905035399168 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.UserController.login
2023-04-01 00:22:14.382 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22797905035399168 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:22:14.384 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22797905035399168 [0;39m è¯·æ±‚å‚æ•°: [{"loginName":"test"}]
2023-04-01 00:22:14.402 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22797905035399168 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2023-04-01 00:22:14.403 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22797905035399168 [0;39m ==> Parameters: test(String)
2023-04-01 00:22:14.405 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m22797905035399168 [0;39m <==    Columns: id, login_name, name, password
2023-04-01 00:22:14.406 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m22797905035399168 [0;39m <==        Row: 1, test, æµ‹è¯•, e70e2222a9d67c4f2eae107533359aa4
2023-04-01 00:22:14.406 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22797905035399168 [0;39m <==      Total: 1
2023-04-01 00:22:14.411 INFO  com.jiawa.wiki.controller.UserController          :79   [32m22797905035399168 [0;39m ç”Ÿæˆå•ç‚¹ç™»å½•tokenï¼š22797905157033984ï¼Œå¹¶æ”¾å…¥redisä¸­
2023-04-01 00:22:14.746 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22797905035399168 [0;39m è¿”å›žç»“æžœ: {"content":{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"22797905157033984"},"success":true}
2023-04-01 00:22:14.748 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22797905035399168 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š367 ms -------------
2023-04-01 00:22:15.257 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:22:16.769 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22797915047202816 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:22:16.769 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22797915047202816 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-04-01 00:22:16.770 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22797915047202816 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-04-01 00:22:16.770 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22797915047202816 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:22:16.772 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22797915047202816 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":101,"page":1,"size":1000}]
2023-04-01 00:22:16.806 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22797915047202816 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-04-01 00:22:16.806 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22797915047202816 [0;39m ==> Parameters: 101(Long)
2023-04-01 00:22:16.807 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22797915047202816 [0;39m <==    Columns: count(0)
2023-04-01 00:22:16.807 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22797915047202816 [0;39m <==        Row: 1
2023-04-01 00:22:16.807 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22797915047202816 [0;39m <==      Total: 1
2023-04-01 00:22:16.810 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22797915047202816 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-04-01 00:22:16.810 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22797915047202816 [0;39m ==> Parameters: 101(Long), 1000(Integer)
2023-04-01 00:22:16.811 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22797915047202816 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-04-01 00:22:16.812 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22797915047202816 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, 100, 101, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:22:16.812 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22797915047202816 [0;39m <==      Total: 1
2023-04-01 00:22:16.814 INFO  com.jiawa.wiki.service.EbookService               :48   [32m22797915047202816 [0;39m æ€»è¡Œæ•°ï¼š1
2023-04-01 00:22:16.814 INFO  com.jiawa.wiki.service.EbookService               :49   [32m22797915047202816 [0;39m æ€»é¡µæ•°ï¼š1
2023-04-01 00:22:16.825 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22797915047202816 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":100,"category2Id":101,"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":1},"success":true}
2023-04-01 00:22:16.826 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22797915047202816 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š57 ms -------------
2023-04-01 00:22:17.736 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22797919103094784 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:22:17.736 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22797919103094784 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-04-01 00:22:17.736 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22797919103094784 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-04-01 00:22:17.736 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22797919103094784 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:22:17.736 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22797919103094784 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":102,"page":1,"size":1000}]
2023-04-01 00:22:17.738 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22797919103094784 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-04-01 00:22:17.738 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22797919103094784 [0;39m ==> Parameters: 102(Long)
2023-04-01 00:22:17.739 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22797919103094784 [0;39m <==    Columns: count(0)
2023-04-01 00:22:17.739 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22797919103094784 [0;39m <==        Row: 0
2023-04-01 00:22:17.739 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22797919103094784 [0;39m <==      Total: 1
2023-04-01 00:22:17.739 INFO  com.jiawa.wiki.service.EbookService               :48   [32m22797919103094784 [0;39m æ€»è¡Œæ•°ï¼š0
2023-04-01 00:22:17.739 INFO  com.jiawa.wiki.service.EbookService               :49   [32m22797919103094784 [0;39m æ€»é¡µæ•°ï¼š0
2023-04-01 00:22:17.740 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22797919103094784 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-04-01 00:22:17.740 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22797919103094784 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-04-01 00:22:18.376 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22797921787449344 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:22:18.376 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22797921787449344 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-04-01 00:22:18.377 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22797921787449344 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-04-01 00:22:18.377 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22797921787449344 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:22:18.378 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22797921787449344 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":201,"page":1,"size":1000}]
2023-04-01 00:22:18.380 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22797921787449344 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-04-01 00:22:18.381 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22797921787449344 [0;39m ==> Parameters: 201(Long)
2023-04-01 00:22:18.381 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22797921787449344 [0;39m <==    Columns: count(0)
2023-04-01 00:22:18.382 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22797921787449344 [0;39m <==        Row: 0
2023-04-01 00:22:18.382 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22797921787449344 [0;39m <==      Total: 1
2023-04-01 00:22:18.382 INFO  com.jiawa.wiki.service.EbookService               :48   [32m22797921787449344 [0;39m æ€»è¡Œæ•°ï¼š0
2023-04-01 00:22:18.383 INFO  com.jiawa.wiki.service.EbookService               :49   [32m22797921787449344 [0;39m æ€»é¡µæ•°ï¼š0
2023-04-01 00:22:18.383 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22797921787449344 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-04-01 00:22:18.383 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22797921787449344 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-04-01 00:22:18.978 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22797924312420352 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:22:18.978 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22797924312420352 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-04-01 00:22:18.979 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22797924312420352 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-04-01 00:22:18.979 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22797924312420352 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:22:18.979 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22797924312420352 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":202,"page":1,"size":1000}]
2023-04-01 00:22:18.982 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22797924312420352 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-04-01 00:22:18.982 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22797924312420352 [0;39m ==> Parameters: 202(Long)
2023-04-01 00:22:18.983 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22797924312420352 [0;39m <==    Columns: count(0)
2023-04-01 00:22:18.983 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22797924312420352 [0;39m <==        Row: 1
2023-04-01 00:22:18.983 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22797924312420352 [0;39m <==      Total: 1
2023-04-01 00:22:18.985 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22797924312420352 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-04-01 00:22:18.985 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22797924312420352 [0;39m ==> Parameters: 202(Long), 1000(Integer)
2023-04-01 00:22:18.986 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22797924312420352 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-04-01 00:22:18.986 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22797924312420352 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 13, 7
2023-04-01 00:22:18.986 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22797924312420352 [0;39m <==      Total: 1
2023-04-01 00:22:18.987 INFO  com.jiawa.wiki.service.EbookService               :48   [32m22797924312420352 [0;39m æ€»è¡Œæ•°ï¼š1
2023-04-01 00:22:18.987 INFO  com.jiawa.wiki.service.EbookService               :49   [32m22797924312420352 [0;39m æ€»é¡µæ•°ï¼š1
2023-04-01 00:22:18.987 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22797924312420352 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":13,"voteCount":7}],"total":1},"success":true}
2023-04-01 00:22:18.987 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22797924312420352 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2023-04-01 00:22:19.733 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22797927479119872 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:22:19.733 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22797927479119872 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/1 GET
2023-04-01 00:22:19.733 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22797927479119872 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-04-01 00:22:19.734 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22797927479119872 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:22:19.734 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22797927479119872 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-04-01 00:22:19.740 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m22797927479119872 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-04-01 00:22:19.740 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m22797927479119872 [0;39m ==> Parameters: 1(Long)
2023-04-01 00:22:19.742 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22797927479119872 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-04-01 00:22:19.742 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22797927479119872 [0;39m <==        Row: 1, 1, 0, æ–‡æ¡£1, 1, 7, 3
2023-04-01 00:22:19.742 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22797927479119872 [0;39m <==        Row: 2, 1, 1, æ–‡æ¡£1.1, 1, 2, 1
2023-04-01 00:22:19.743 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22797927479119872 [0;39m <==        Row: 4, 1, 3, æ–‡æ¡£2.1, 1, 2, 1
2023-04-01 00:22:19.743 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22797927479119872 [0;39m <==        Row: 6, 1, 5, æ–‡æ¡£2.2.1, 1, 1, 1
2023-04-01 00:22:19.743 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22797927479119872 [0;39m <==        Row: 3, 1, 0, æ–‡æ¡£2, 2, 0, 0
2023-04-01 00:22:19.744 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22797927479119872 [0;39m <==        Row: 5, 1, 3, æ–‡æ¡£2.2, 2, 1, 1
2023-04-01 00:22:19.744 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m22797927479119872 [0;39m <==      Total: 6
2023-04-01 00:22:19.751 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22797927479119872 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":1,"id":1,"name":"æ–‡æ¡£1","parent":0,"sort":1,"viewCount":7,"voteCount":3},{"ebookId":1,"id":2,"name":"æ–‡æ¡£1.1","parent":1,"sort":1,"viewCount":2,"voteCount":1},{"ebookId":1,"id":4,"name":"æ–‡æ¡£2.1","parent":3,"sort":1,"viewCount":2,"voteCount":1},{"ebookId":1,"id":6,"name":"æ–‡æ¡£2.2.1","parent":5,"sort":1,"viewCount":1,"voteCount":1},{"ebookId":1,"id":3,"name":"æ–‡æ¡£2","parent":0,"sort":2,"viewCount":0,"voteCount":0},{"ebookId":1,"id":5,"name":"æ–‡æ¡£2.2","parent":3,"sort":2,"viewCount":1,"voteCount":1}],"success":true}
2023-04-01 00:22:19.751 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22797927479119872 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š18 ms -------------
2023-04-01 00:22:19.767 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22797927621726208 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:22:19.767 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22797927621726208 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/1 GET
2023-04-01 00:22:19.767 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22797927621726208 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-04-01 00:22:19.767 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22797927621726208 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:22:19.767 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22797927621726208 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-04-01 00:22:19.769 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m22797927621726208 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-04-01 00:22:19.769 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m22797927621726208 [0;39m ==> Parameters: 1(Long)
2023-04-01 00:22:19.772 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m22797927621726208 [0;39m <==      Total: 0
2023-04-01 00:22:19.774 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m22797927621726208 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-04-01 00:22:19.774 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m22797927621726208 [0;39m ==> Parameters: 1(Long)
2023-04-01 00:22:19.775 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m22797927621726208 [0;39m <==    Updates: 1
2023-04-01 00:22:19.776 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22797927621726208 [0;39m è¿”å›žç»“æžœ: {"content":"","success":true}
2023-04-01 00:22:19.776 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22797927621726208 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2023-04-01 00:22:20.662 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22797931375628288 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:22:20.662 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22797931375628288 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/vote/1 GET
2023-04-01 00:22:20.662 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22797931375628288 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.vote
2023-04-01 00:22:20.662 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22797931375628288 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:22:20.663 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22797931375628288 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-04-01 00:22:20.667 INFO  com.jiawa.wiki.util.RedisUtil                     :31   [32m22797931375628288 [0;39m keyä¸å­˜åœ¨ï¼Œæ”¾å…¥ï¼šDOC_VOTE_1_127.0.0.1ï¼Œè¿‡æœŸ 5000 ç§’
2023-04-01 00:22:20.668 DEBUG c.j.wiki.mapper.DocMapperCust.increaseVoteCount   :137  [32m22797931375628288 [0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2023-04-01 00:22:20.668 DEBUG c.j.wiki.mapper.DocMapperCust.increaseVoteCount   :137  [32m22797931375628288 [0;39m ==> Parameters: 1(Long)
2023-04-01 00:22:20.670 DEBUG c.j.wiki.mapper.DocMapperCust.increaseVoteCount   :137  [32m22797931375628288 [0;39m <==    Updates: 1
2023-04-01 00:22:20.671 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:137  [32m22797931375628288 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2023-04-01 00:22:20.671 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:137  [32m22797931375628288 [0;39m ==> Parameters: 1(Long)
2023-04-01 00:22:20.672 TRACE com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:143  [32m22797931375628288 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-04-01 00:22:20.672 TRACE com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:143  [32m22797931375628288 [0;39m <==        Row: 1, 1, 0, æ–‡æ¡£1, 1, 8, 4
2023-04-01 00:22:20.673 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:137  [32m22797931375628288 [0;39m <==      Total: 1
2023-04-01 00:22:21.098 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:22:24.747 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:22:25.276 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m                  [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-04-01 00:22:25.278 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m                  [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š0 ms -------------
2023-04-01 00:22:25.281 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m22797921787449344 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-04-01 00:22:25.281 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m22797921787449344 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/list
2023-04-01 00:22:25.281 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m22797921787449344 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š22797905157033984
2023-04-01 00:22:25.284 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m22797921787449344 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"22797905157033984"}
2023-04-01 00:22:25.297 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22797950816227328 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:22:25.297 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22797950816227328 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/user/list GET
2023-04-01 00:22:25.298 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22797950816227328 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.UserController.list
2023-04-01 00:22:25.298 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22797950816227328 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:22:25.299 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22797950816227328 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-04-01 00:22:25.303 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m22797950816227328 [0;39m ==>  Preparing: SELECT count(0) FROM user
2023-04-01 00:22:25.303 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m22797950816227328 [0;39m ==> Parameters: 
2023-04-01 00:22:25.305 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m22797950816227328 [0;39m <==    Columns: count(0)
2023-04-01 00:22:25.305 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m22797950816227328 [0;39m <==        Row: 1
2023-04-01 00:22:25.305 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m22797950816227328 [0;39m <==      Total: 1
2023-04-01 00:22:25.306 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22797950816227328 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2023-04-01 00:22:25.307 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22797950816227328 [0;39m ==> Parameters: 10(Integer)
2023-04-01 00:22:25.308 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m22797950816227328 [0;39m <==    Columns: id, login_name, name, password
2023-04-01 00:22:25.308 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m22797950816227328 [0;39m <==        Row: 1, test, æµ‹è¯•, e70e2222a9d67c4f2eae107533359aa4
2023-04-01 00:22:25.309 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22797950816227328 [0;39m <==      Total: 1
2023-04-01 00:22:25.310 INFO  com.jiawa.wiki.service.UserService                :49   [32m22797950816227328 [0;39m æ€»è¡Œæ•°ï¼š1
2023-04-01 00:22:25.310 INFO  com.jiawa.wiki.service.UserService                :50   [32m22797950816227328 [0;39m æ€»é¡µæ•°ï¼š1
2023-04-01 00:22:25.315 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22797950816227328 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"id":1,"loginName":"test","name":"æµ‹è¯•"}],"total":1},"success":true}
2023-04-01 00:22:25.315 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22797950816227328 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š18 ms -------------
2023-04-01 00:22:25.316 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m22797950816227328 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š35 ms -------------
2023-04-01 00:22:26.793 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:22:26.792 ERROR org.apache.rocketmq.spring.core.RocketMQTemplate  :153  [32m22797931375628288 [0;39m syncSend failed. destination:VOTE_TOPIC, message:GenericMessage [payload=ã€æ–‡æ¡£1ã€‘è¢«ç‚¹èµžï¼, headers={contentType=text/plain, id=9b55634f-9fae-7d5a-9b2a-c5cd571fe334, timestamp=1680279740678}] 
2023-04-01 00:22:26.800 ERROR com.jiawa.wiki.config.ControllerExceptionHandler  :59   [32m22797931375628288 [0;39m ç³»ç»Ÿå¼‚å¸¸ï¼š
org.springframework.messaging.MessagingException: No route info of this topic, VOTE_TOPIC
See http://rocketmq.apache.org/docs/faq/ for further details.; nested exception is org.apache.rocketmq.client.exception.MQClientException: No route info of this topic, VOTE_TOPIC
See http://rocketmq.apache.org/docs/faq/ for further details.
	at org.apache.rocketmq.spring.core.RocketMQTemplate.syncSend(RocketMQTemplate.java:154)
	at org.apache.rocketmq.spring.core.RocketMQTemplate.syncSend(RocketMQTemplate.java:123)
	at org.apache.rocketmq.spring.core.RocketMQTemplate.syncSend(RocketMQTemplate.java:111)
	at org.apache.rocketmq.spring.core.RocketMQTemplate.doSend(RocketMQTemplate.java:459)
	at org.apache.rocketmq.spring.core.RocketMQTemplate.doSend(RocketMQTemplate.java:50)
	at org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)
	at org.springframework.messaging.core.AbstractMessageSendingTemplate.convertAndSend(AbstractMessageSendingTemplate.java:151)
	at org.springframework.messaging.core.AbstractMessageSendingTemplate.convertAndSend(AbstractMessageSendingTemplate.java:129)
	at org.springframework.messaging.core.AbstractMessageSendingTemplate.convertAndSend(AbstractMessageSendingTemplate.java:122)
	at com.jiawa.wiki.service.DocService.vote(DocService.java:167)
	at com.jiawa.wiki.service.DocService$$FastClassBySpringCGLIB$$50aa4805.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:687)
	at com.jiawa.wiki.service.DocService$$EnhancerBySpringCGLIB$$9c5c033e.vote(<generated>)
	at com.jiawa.wiki.controller.DocController.vote(DocController.java:65)
	at com.jiawa.wiki.controller.DocController$$FastClassBySpringCGLIB$$36fc4971.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:58)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at com.jiawa.wiki.aspect.LogAspect.doAround(LogAspect.java:86)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691)
	at com.jiawa.wiki.controller.DocController$$EnhancerBySpringCGLIB$$591c8103.vote(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:893)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:807)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1061)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:961)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:626)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.rocketmq.client.exception.MQClientException: No route info of this topic, VOTE_TOPIC
See http://rocketmq.apache.org/docs/faq/ for further details.
	at org.apache.rocketmq.client.impl.producer.DefaultMQProducerImpl.sendDefaultImpl(DefaultMQProducerImpl.java:656)
	at org.apache.rocketmq.client.impl.producer.DefaultMQProducerImpl.send(DefaultMQProducerImpl.java:1279)
	at org.apache.rocketmq.client.producer.DefaultMQProducer.send(DefaultMQProducer.java:301)
	at org.apache.rocketmq.spring.core.RocketMQTemplate.syncSend(RocketMQTemplate.java:148)
	... 88 common frames omitted
2023-04-01 00:22:26.803 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m22797931375628288 [0;39m Resolved [org.springframework.messaging.MessagingException: No route info of this topic, VOTE_TOPIC
See http://rocketmq.apache.org/docs/faq/ for further details.; nested exception is org.apache.rocketmq.client.exception.MQClientException: No route info of this topic, VOTE_TOPIC
See http://rocketmq.apache.org/docs/faq/ for further details.]
2023-04-01 00:22:26.851 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22797957334175744 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:22:26.851 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22797957334175744 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 00:22:26.852 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22797957334175744 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 00:22:26.852 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22797957334175744 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:22:26.852 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22797957334175744 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 00:22:26.852 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22797957334175744 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 00:22:26.853 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22797957334175744 [0;39m ==> Parameters: 
2023-04-01 00:22:26.854 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797957334175744 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 00:22:26.854 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797957334175744 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-04-01 00:22:26.855 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797957334175744 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 00:22:26.855 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797957334175744 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 00:22:26.857 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797957334175744 [0;39m <==        Row: 200, 0, Java, 200
2023-04-01 00:22:26.857 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797957334175744 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 00:22:26.857 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797957334175744 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 00:22:26.857 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797957334175744 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 00:22:26.858 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797957334175744 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 00:22:26.858 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797957334175744 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 00:22:26.858 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797957334175744 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 00:22:26.859 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797957334175744 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 00:22:26.859 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797957334175744 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 00:22:26.859 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797957334175744 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 00:22:26.859 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797957334175744 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 00:22:26.860 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797957334175744 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 00:22:26.860 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22797957334175744 [0;39m <==      Total: 15
2023-04-01 00:22:26.862 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22797957334175744 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 00:22:26.863 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22797957334175744 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š12 ms -------------
2023-04-01 00:22:26.893 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22797957510336512 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:22:26.894 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22797957510336512 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-04-01 00:22:26.894 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22797957510336512 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-04-01 00:22:26.894 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22797957510336512 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:22:26.894 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22797957510336512 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-04-01 00:22:26.895 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22797957510336512 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-04-01 00:22:26.895 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22797957510336512 [0;39m ==> Parameters: 
2023-04-01 00:22:26.896 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22797957510336512 [0;39m <==    Columns: count(0)
2023-04-01 00:22:26.896 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22797957510336512 [0;39m <==        Row: 5
2023-04-01 00:22:26.897 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22797957510336512 [0;39m <==      Total: 1
2023-04-01 00:22:26.897 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22797957510336512 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-04-01 00:22:26.897 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22797957510336512 [0;39m ==> Parameters: 10(Integer)
2023-04-01 00:22:26.897 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22797957510336512 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-04-01 00:22:26.899 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22797957510336512 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 13, 7
2023-04-01 00:22:26.899 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22797957510336512 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, 100, 101, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:22:26.901 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22797957510336512 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, 300, 301, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:22:26.901 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22797957510336512 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, 400, 401, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:22:26.902 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22797957510336512 [0;39m <==        Row: 5, Oracle å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:22:26.902 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22797957510336512 [0;39m <==      Total: 5
2023-04-01 00:22:26.903 INFO  com.jiawa.wiki.service.EbookService               :48   [32m22797957510336512 [0;39m æ€»è¡Œæ•°ï¼š5
2023-04-01 00:22:26.903 INFO  com.jiawa.wiki.service.EbookService               :49   [32m22797957510336512 [0;39m æ€»é¡µæ•°ï¼š1
2023-04-01 00:22:26.904 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22797957510336512 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":13,"voteCount":7},{"category1Id":100,"category2Id":101,"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":300,"category2Id":301,"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":5,"name":"Oracle å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-04-01 00:22:26.904 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22797957510336512 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š11 ms -------------
2023-04-01 00:22:29.557 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22797968683962368 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:22:29.558 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22797968683962368 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 00:22:29.558 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22797968683962368 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 00:22:29.559 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22797968683962368 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:22:29.559 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22797968683962368 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 00:22:29.559 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22797968683962368 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 00:22:29.560 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22797968683962368 [0;39m ==> Parameters: 
2023-04-01 00:22:29.560 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797968683962368 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 00:22:29.561 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797968683962368 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-04-01 00:22:29.561 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797968683962368 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 00:22:29.561 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797968683962368 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 00:22:29.561 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797968683962368 [0;39m <==        Row: 200, 0, Java, 200
2023-04-01 00:22:29.561 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797968683962368 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 00:22:29.562 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797968683962368 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 00:22:29.562 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797968683962368 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 00:22:29.562 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797968683962368 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 00:22:29.562 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797968683962368 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 00:22:29.563 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797968683962368 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 00:22:29.563 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797968683962368 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 00:22:29.563 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797968683962368 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 00:22:29.563 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797968683962368 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 00:22:29.564 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797968683962368 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 00:22:29.564 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22797968683962368 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 00:22:29.564 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22797968683962368 [0;39m <==      Total: 15
2023-04-01 00:22:29.564 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22797968683962368 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 00:22:29.566 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22797968683962368 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2023-04-01 00:22:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22797991563890688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:22:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22797991563890688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:22:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22797991563890688 [0;39m ==> Parameters: 
2023-04-01 00:22:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22797991563890688 [0;39m <==    Updates: 1
2023-04-01 00:22:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22797991563890688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 00:22:37.305 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:22:39.359 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:22:45.554 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m22797927621726208 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-04-01 00:22:45.555 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m22797927621726208 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š0 ms -------------
2023-04-01 00:22:45.559 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m                  [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-04-01 00:22:45.559 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m                  [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/category/save
2023-04-01 00:22:45.560 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m                  [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š22797905157033984
2023-04-01 00:22:45.560 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m                  [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"22797905157033984"}
2023-04-01 00:22:45.572 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798035855740928 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:22:45.572 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798035855740928 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/save POST
2023-04-01 00:22:45.573 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798035855740928 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.save
2023-04-01 00:22:45.573 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798035855740928 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:22:45.578 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798035855740928 [0;39m è¯·æ±‚å‚æ•°: [{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100}]
2023-04-01 00:22:45.584 DEBUG c.j.wiki.mapper.CategoryMapper.updateByPrimaryKey :137  [32m22798035855740928 [0;39m ==>  Preparing: update category set parent = ?, `name` = ?, sort = ? where id = ?
2023-04-01 00:22:45.584 DEBUG c.j.wiki.mapper.CategoryMapper.updateByPrimaryKey :137  [32m22798035855740928 [0;39m ==> Parameters: 200(Long), å‰ç«¯å¼€å‘(String), 100(Integer), 100(Long)
2023-04-01 00:22:45.585 DEBUG c.j.wiki.mapper.CategoryMapper.updateByPrimaryKey :137  [32m22798035855740928 [0;39m <==    Updates: 1
2023-04-01 00:22:45.587 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798035855740928 [0;39m è¿”å›žç»“æžœ: {"success":true}
2023-04-01 00:22:45.588 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798035855740928 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š16 ms -------------
2023-04-01 00:22:45.589 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m22798035855740928 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š30 ms -------------
2023-04-01 00:22:45.614 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798036031901696 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:22:45.614 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798036031901696 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 00:22:45.615 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798036031901696 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 00:22:45.615 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798036031901696 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:22:45.615 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798036031901696 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 00:22:45.616 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798036031901696 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 00:22:45.616 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798036031901696 [0;39m ==> Parameters: 
2023-04-01 00:22:45.617 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798036031901696 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 00:22:45.617 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798036031901696 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 00:22:45.617 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798036031901696 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 00:22:45.617 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798036031901696 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 00:22:45.619 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798036031901696 [0;39m <==        Row: 200, 0, Java, 200
2023-04-01 00:22:45.619 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798036031901696 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 00:22:45.619 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798036031901696 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 00:22:45.619 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798036031901696 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 00:22:45.620 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798036031901696 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 00:22:45.620 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798036031901696 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 00:22:45.620 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798036031901696 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 00:22:45.620 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798036031901696 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 00:22:45.621 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798036031901696 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 00:22:45.621 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798036031901696 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 00:22:45.621 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798036031901696 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 00:22:45.621 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798036031901696 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 00:22:45.622 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798036031901696 [0;39m <==      Total: 15
2023-04-01 00:22:45.623 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798036031901696 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 00:22:45.623 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798036031901696 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2023-04-01 00:22:50.631 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:22:51.080 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:22:54.716 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:22:57.633 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798086443241472 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:22:57.633 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798086443241472 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 00:22:57.634 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798086443241472 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 00:22:57.634 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798086443241472 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:22:57.634 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798086443241472 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 00:22:57.636 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798086443241472 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 00:22:57.636 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798086443241472 [0;39m ==> Parameters: 
2023-04-01 00:22:57.637 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798086443241472 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 00:22:57.637 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798086443241472 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 00:22:57.638 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798086443241472 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 00:22:57.638 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798086443241472 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 00:22:57.638 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798086443241472 [0;39m <==        Row: 200, 0, Java, 200
2023-04-01 00:22:57.638 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798086443241472 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 00:22:57.639 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798086443241472 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 00:22:57.639 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798086443241472 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 00:22:57.639 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798086443241472 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 00:22:57.639 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798086443241472 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 00:22:57.639 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798086443241472 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 00:22:57.639 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798086443241472 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 00:22:57.639 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798086443241472 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 00:22:57.640 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798086443241472 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 00:22:57.640 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798086443241472 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 00:22:57.640 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798086443241472 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 00:22:57.640 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798086443241472 [0;39m <==      Total: 15
2023-04-01 00:22:57.641 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798086443241472 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 00:22:57.641 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798086443241472 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-04-01 00:22:57.680 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798086640373760 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:22:57.680 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798086640373760 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-04-01 00:22:57.680 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798086640373760 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-04-01 00:22:57.681 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798086640373760 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:22:57.681 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798086640373760 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-04-01 00:22:57.685 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798086640373760 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-04-01 00:22:57.685 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798086640373760 [0;39m ==> Parameters: 
2023-04-01 00:22:57.687 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22798086640373760 [0;39m <==    Columns: count(0)
2023-04-01 00:22:57.687 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22798086640373760 [0;39m <==        Row: 5
2023-04-01 00:22:57.687 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798086640373760 [0;39m <==      Total: 1
2023-04-01 00:22:57.688 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22798086640373760 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-04-01 00:22:57.688 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22798086640373760 [0;39m ==> Parameters: 10(Integer)
2023-04-01 00:22:57.689 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798086640373760 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-04-01 00:22:57.689 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798086640373760 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 14, 8
2023-04-01 00:22:57.689 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798086640373760 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, 100, 101, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:22:57.691 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798086640373760 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, 300, 301, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:22:57.691 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798086640373760 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, 400, 401, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:22:57.691 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798086640373760 [0;39m <==        Row: 5, Oracle å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:22:57.693 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22798086640373760 [0;39m <==      Total: 5
2023-04-01 00:22:57.694 INFO  com.jiawa.wiki.service.EbookService               :48   [32m22798086640373760 [0;39m æ€»è¡Œæ•°ï¼š5
2023-04-01 00:22:57.694 INFO  com.jiawa.wiki.service.EbookService               :49   [32m22798086640373760 [0;39m æ€»é¡µæ•°ï¼š1
2023-04-01 00:22:57.695 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798086640373760 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":14,"voteCount":8},{"category1Id":100,"category2Id":101,"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":300,"category2Id":301,"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":5,"name":"Oracle å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-04-01 00:22:57.695 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798086640373760 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š15 ms -------------
2023-04-01 00:23:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22798096387936256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:23:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22798096387936256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:23:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22798096387936256 [0;39m ==> Parameters: 
2023-04-01 00:23:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22798096387936256 [0;39m <==    Updates: 0
2023-04-01 00:23:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22798096387936256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 00:23:03.459 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:23:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22798117388816384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:23:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22798117388816384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:23:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22798117388816384 [0;39m ==> Parameters: 
2023-04-01 00:23:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22798117388816384 [0;39m <==    Updates: 1
2023-04-01 00:23:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22798117388816384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 00:23:05.172 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m22797886022619136 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-04-01 00:23:05.172 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m22797886022619136 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/list
2023-04-01 00:23:05.172 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m22797886022619136 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š22797905157033984
2023-04-01 00:23:05.173 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m22797886022619136 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"22797905157033984"}
2023-04-01 00:23:05.174 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798118072487936 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:23:05.174 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798118072487936 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/user/list GET
2023-04-01 00:23:05.174 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798118072487936 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.UserController.list
2023-04-01 00:23:05.174 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798118072487936 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:23:05.174 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798118072487936 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-04-01 00:23:05.175 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m22798118072487936 [0;39m ==>  Preparing: SELECT count(0) FROM user
2023-04-01 00:23:05.175 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m22798118072487936 [0;39m ==> Parameters: 
2023-04-01 00:23:05.176 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m22798118072487936 [0;39m <==    Columns: count(0)
2023-04-01 00:23:05.176 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m22798118072487936 [0;39m <==        Row: 1
2023-04-01 00:23:05.176 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m22798118072487936 [0;39m <==      Total: 1
2023-04-01 00:23:05.176 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22798118072487936 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2023-04-01 00:23:05.176 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22798118072487936 [0;39m ==> Parameters: 10(Integer)
2023-04-01 00:23:05.177 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m22798118072487936 [0;39m <==    Columns: id, login_name, name, password
2023-04-01 00:23:05.177 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m22798118072487936 [0;39m <==        Row: 1, test, æµ‹è¯•, e70e2222a9d67c4f2eae107533359aa4
2023-04-01 00:23:05.177 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22798118072487936 [0;39m <==      Total: 1
2023-04-01 00:23:05.178 INFO  com.jiawa.wiki.service.UserService                :49   [32m22798118072487936 [0;39m æ€»è¡Œæ•°ï¼š1
2023-04-01 00:23:05.178 INFO  com.jiawa.wiki.service.UserService                :50   [32m22798118072487936 [0;39m æ€»é¡µæ•°ï¼š1
2023-04-01 00:23:05.178 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798118072487936 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"id":1,"loginName":"test","name":"æµ‹è¯•"}],"total":1},"success":true}
2023-04-01 00:23:05.178 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798118072487936 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-04-01 00:23:05.179 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m22798118072487936 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-04-01 00:23:07.124 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798126251380736 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:23:07.125 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798126251380736 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 00:23:07.125 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798126251380736 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 00:23:07.125 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798126251380736 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:23:07.125 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798126251380736 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 00:23:07.126 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798126251380736 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 00:23:07.126 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798126251380736 [0;39m ==> Parameters: 
2023-04-01 00:23:07.132 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798126251380736 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 00:23:07.132 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798126251380736 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 00:23:07.133 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798126251380736 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 00:23:07.133 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798126251380736 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 00:23:07.133 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798126251380736 [0;39m <==        Row: 200, 0, Java, 200
2023-04-01 00:23:07.134 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798126251380736 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 00:23:07.134 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798126251380736 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 00:23:07.134 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798126251380736 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 00:23:07.135 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798126251380736 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 00:23:07.135 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798126251380736 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 00:23:07.135 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798126251380736 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 00:23:07.135 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798126251380736 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 00:23:07.136 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798126251380736 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 00:23:07.136 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798126251380736 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 00:23:07.136 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798126251380736 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 00:23:07.136 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798126251380736 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 00:23:07.136 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798126251380736 [0;39m <==      Total: 15
2023-04-01 00:23:07.137 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798126251380736 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 00:23:07.137 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798126251380736 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š13 ms -------------
2023-04-01 00:23:07.174 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798126461095936 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:23:07.175 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798126461095936 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-04-01 00:23:07.175 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798126461095936 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-04-01 00:23:07.175 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798126461095936 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:23:07.176 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798126461095936 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-04-01 00:23:07.182 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798126461095936 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-04-01 00:23:07.182 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798126461095936 [0;39m ==> Parameters: 
2023-04-01 00:23:07.183 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22798126461095936 [0;39m <==    Columns: count(0)
2023-04-01 00:23:07.183 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22798126461095936 [0;39m <==        Row: 5
2023-04-01 00:23:07.184 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798126461095936 [0;39m <==      Total: 1
2023-04-01 00:23:07.184 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22798126461095936 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-04-01 00:23:07.184 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22798126461095936 [0;39m ==> Parameters: 10(Integer)
2023-04-01 00:23:07.185 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798126461095936 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-04-01 00:23:07.185 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798126461095936 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 14, 8
2023-04-01 00:23:07.185 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798126461095936 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, 100, 101, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:23:07.186 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798126461095936 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, 300, 301, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:23:07.186 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798126461095936 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, 400, 401, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:23:07.187 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798126461095936 [0;39m <==        Row: 5, Oracle å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:23:07.187 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22798126461095936 [0;39m <==      Total: 5
2023-04-01 00:23:07.188 INFO  com.jiawa.wiki.service.EbookService               :48   [32m22798126461095936 [0;39m æ€»è¡Œæ•°ï¼š5
2023-04-01 00:23:07.188 INFO  com.jiawa.wiki.service.EbookService               :49   [32m22798126461095936 [0;39m æ€»é¡µæ•°ï¼š1
2023-04-01 00:23:07.192 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798126461095936 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":14,"voteCount":8},{"category1Id":100,"category2Id":101,"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":300,"category2Id":301,"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":5,"name":"Oracle å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-04-01 00:23:07.192 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798126461095936 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š18 ms -------------
2023-04-01 00:23:08.554 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798132249235456 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:23:08.555 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798132249235456 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 00:23:08.555 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798132249235456 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 00:23:08.555 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798132249235456 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:23:08.555 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798132249235456 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 00:23:08.556 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798132249235456 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 00:23:08.556 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798132249235456 [0;39m ==> Parameters: 
2023-04-01 00:23:08.557 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798132249235456 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 00:23:08.557 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798132249235456 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 00:23:08.558 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798132249235456 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 00:23:08.558 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798132249235456 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 00:23:08.558 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798132249235456 [0;39m <==        Row: 200, 0, Java, 200
2023-04-01 00:23:08.558 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798132249235456 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 00:23:08.559 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798132249235456 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 00:23:08.559 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798132249235456 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 00:23:08.559 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798132249235456 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 00:23:08.559 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798132249235456 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 00:23:08.560 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798132249235456 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 00:23:08.560 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798132249235456 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 00:23:08.560 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798132249235456 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 00:23:08.560 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798132249235456 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 00:23:08.560 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798132249235456 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 00:23:08.561 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798132249235456 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 00:23:08.561 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798132249235456 [0;39m <==      Total: 15
2023-04-01 00:23:08.562 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798132249235456 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 00:23:08.562 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798132249235456 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-04-01 00:23:20.621 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:23:21.087 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:23:24.677 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:23:26.713 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:23:28.756 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:23:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22798243180187648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:23:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22798243180187648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:23:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22798243180187648 [0;39m ==> Parameters: 
2023-04-01 00:23:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22798243180187648 [0;39m <==    Updates: 1
2023-04-01 00:23:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22798243180187648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 00:23:36.714 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m22798035855740928 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-04-01 00:23:36.714 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m22798035855740928 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/category/save
2023-04-01 00:23:36.714 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m22798035855740928 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š22797905157033984
2023-04-01 00:23:36.715 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m22798035855740928 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"22797905157033984"}
2023-04-01 00:23:36.717 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798250373419008 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:23:36.717 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798250373419008 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/save POST
2023-04-01 00:23:36.717 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798250373419008 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.save
2023-04-01 00:23:36.717 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798250373419008 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:23:36.717 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798250373419008 [0;39m è¯·æ±‚å‚æ•°: [{"id":200,"name":"Java","parent":500,"sort":200}]
2023-04-01 00:23:36.718 DEBUG c.j.wiki.mapper.CategoryMapper.updateByPrimaryKey :137  [32m22798250373419008 [0;39m ==>  Preparing: update category set parent = ?, `name` = ?, sort = ? where id = ?
2023-04-01 00:23:36.718 DEBUG c.j.wiki.mapper.CategoryMapper.updateByPrimaryKey :137  [32m22798250373419008 [0;39m ==> Parameters: 500(Long), Java(String), 200(Integer), 200(Long)
2023-04-01 00:23:36.726 DEBUG c.j.wiki.mapper.CategoryMapper.updateByPrimaryKey :137  [32m22798250373419008 [0;39m <==    Updates: 1
2023-04-01 00:23:36.726 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798250373419008 [0;39m è¿”å›žç»“æžœ: {"success":true}
2023-04-01 00:23:36.727 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798250373419008 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š10 ms -------------
2023-04-01 00:23:36.727 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m22798250373419008 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š13 ms -------------
2023-04-01 00:23:36.753 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798250520219648 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:23:36.753 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798250520219648 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 00:23:36.753 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798250520219648 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 00:23:36.753 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798250520219648 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:23:36.753 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798250520219648 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 00:23:36.755 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798250520219648 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 00:23:36.757 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798250520219648 [0;39m ==> Parameters: 
2023-04-01 00:23:36.757 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798250520219648 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 00:23:36.758 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798250520219648 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 00:23:36.758 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798250520219648 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 00:23:36.759 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798250520219648 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 00:23:36.760 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798250520219648 [0;39m <==        Row: 200, 500, Java, 200
2023-04-01 00:23:36.760 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798250520219648 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 00:23:36.760 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798250520219648 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 00:23:36.760 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798250520219648 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 00:23:36.760 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798250520219648 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 00:23:36.760 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798250520219648 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 00:23:36.761 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798250520219648 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 00:23:36.761 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798250520219648 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 00:23:36.761 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798250520219648 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 00:23:36.762 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798250520219648 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 00:23:36.762 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798250520219648 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 00:23:36.762 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798250520219648 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 00:23:36.762 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798250520219648 [0;39m <==      Total: 15
2023-04-01 00:23:36.763 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798250520219648 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":500,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 00:23:36.763 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798250520219648 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š11 ms -------------
2023-04-01 00:23:40.516 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798266307579904 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:23:40.516 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798266307579904 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 00:23:40.516 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798266307579904 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 00:23:40.516 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798266307579904 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:23:40.516 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798266307579906 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:23:40.516 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798266307579904 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 00:23:40.517 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798266307579906 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-04-01 00:23:40.516 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798266307579905 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:23:40.517 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798266307579906 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-04-01 00:23:40.517 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798266307579906 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:23:40.517 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798266307579905 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-04-01 00:23:40.517 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798266307579906 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 00:23:40.517 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798266307579905 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-04-01 00:23:40.517 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798266307579904 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 00:23:40.517 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798266307579905 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:23:40.517 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798266307579905 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 00:23:40.517 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798266307579904 [0;39m ==> Parameters: 
2023-04-01 00:23:40.518 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m22798266307579905 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-04-01 00:23:40.518 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798266307579904 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 00:23:40.518 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m22798266307579905 [0;39m ==> Parameters: 
2023-04-01 00:23:40.518 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798266307579904 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 00:23:40.518 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798266307579904 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 00:23:40.517 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m22798266307579906 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-04-01 00:23:40.519 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798266307579904 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 00:23:40.519 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798266307579904 [0;39m <==        Row: 200, 500, Java, 200
2023-04-01 00:23:40.519 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22798266307579905 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-04-01 00:23:40.519 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m22798266307579906 [0;39m ==> Parameters: 
2023-04-01 00:23:40.519 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798266307579904 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 00:23:40.519 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22798266307579905 [0;39m <==        Row: 2023-03-02, 0, 0
2023-04-01 00:23:40.519 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798266307579904 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 00:23:40.520 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798266307579904 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 00:23:40.520 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22798266307579905 [0;39m <==        Row: 2023-03-05, 8, 5
2023-04-01 00:23:40.520 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m22798266307579906 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-04-01 00:23:40.520 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798266307579904 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 00:23:40.520 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22798266307579905 [0;39m <==        Row: 2023-03-06, 1, 1
2023-04-01 00:23:40.521 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m22798266307579906 [0;39m <==        Row: 2023-04-01, 14, 8, 14, 8
2023-04-01 00:23:40.521 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798266307579904 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 00:23:40.521 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22798266307579905 [0;39m <==        Row: 2023-03-18, 10, 7
2023-04-01 00:23:40.521 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798266307579904 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 00:23:40.521 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798266307579904 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 00:23:40.521 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22798266307579905 [0;39m <==        Row: 2023-03-23, 10, 7
2023-04-01 00:23:40.521 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798266307579904 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 00:23:40.521 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m22798266307579906 [0;39m <==      Total: 1
2023-04-01 00:23:40.521 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22798266307579905 [0;39m <==        Row: 2023-03-25, 13, 7
2023-04-01 00:23:40.521 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798266307579904 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 00:23:40.522 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798266307579906 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1680278400000,"viewCount":14,"viewIncrease":14,"voteCount":8,"voteIncrease":8}],"success":true}
2023-04-01 00:23:40.522 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798266307579904 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 00:23:40.522 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798266307579906 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-04-01 00:23:40.522 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798266307579904 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 00:23:40.522 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798266307579904 [0;39m <==      Total: 15
2023-04-01 00:23:40.523 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22798266307579905 [0;39m <==        Row: 2023-03-26, 0, 0
2023-04-01 00:23:40.523 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798266307579904 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":500,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 00:23:40.523 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798266307579904 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-04-01 00:23:40.524 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22798266307579905 [0;39m <==        Row: 2023-03-27, 0, 0
2023-04-01 00:23:40.524 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m22798266307579905 [0;39m <==      Total: 8
2023-04-01 00:23:40.524 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798266307579905 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1677945600000,"viewCount":0,"viewIncrease":8,"voteCount":0,"voteIncrease":5},{"date":1678032000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":1},{"date":1679068800000,"viewCount":0,"viewIncrease":10,"voteCount":0,"voteIncrease":7},{"date":1679500800000,"viewCount":0,"viewIncrease":10,"voteCount":0,"voteIncrease":7},{"date":1679673600000,"viewCount":0,"viewIncrease":13,"voteCount":0,"voteIncrease":7},{"date":1679760000000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1679846400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2023-04-01 00:23:40.524 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798266307579905 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-04-01 00:23:42.989 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798276680093696 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:23:42.989 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798276680093696 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-04-01 00:23:42.989 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798276680093696 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-04-01 00:23:42.989 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798276680093696 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:23:42.990 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798276680093696 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":501,"page":1,"size":1000}]
2023-04-01 00:23:42.992 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798276680093696 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-04-01 00:23:42.992 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798276680093696 [0;39m ==> Parameters: 501(Long)
2023-04-01 00:23:42.993 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22798276680093696 [0;39m <==    Columns: count(0)
2023-04-01 00:23:42.993 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22798276680093696 [0;39m <==        Row: 0
2023-04-01 00:23:42.993 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798276680093696 [0;39m <==      Total: 1
2023-04-01 00:23:42.994 INFO  com.jiawa.wiki.service.EbookService               :48   [32m22798276680093696 [0;39m æ€»è¡Œæ•°ï¼š0
2023-04-01 00:23:42.994 INFO  com.jiawa.wiki.service.EbookService               :49   [32m22798276680093696 [0;39m æ€»é¡µæ•°ï¼š0
2023-04-01 00:23:42.994 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798276680093696 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-04-01 00:23:42.994 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798276680093696 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-04-01 00:23:43.603 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798279255396352 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:23:43.604 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798279255396352 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-04-01 00:23:43.604 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798279255396352 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-04-01 00:23:43.604 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798279255396352 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:23:43.604 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798279255396352 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":200,"page":1,"size":1000}]
2023-04-01 00:23:43.608 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798279255396352 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-04-01 00:23:43.608 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798279255396352 [0;39m ==> Parameters: 200(Long)
2023-04-01 00:23:43.608 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22798279255396352 [0;39m <==    Columns: count(0)
2023-04-01 00:23:43.608 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22798279255396352 [0;39m <==        Row: 0
2023-04-01 00:23:43.609 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798279255396352 [0;39m <==      Total: 1
2023-04-01 00:23:43.609 INFO  com.jiawa.wiki.service.EbookService               :48   [32m22798279255396352 [0;39m æ€»è¡Œæ•°ï¼š0
2023-04-01 00:23:43.609 INFO  com.jiawa.wiki.service.EbookService               :49   [32m22798279255396352 [0;39m æ€»é¡µæ•°ï¼š0
2023-04-01 00:23:43.609 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798279255396352 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-04-01 00:23:43.609 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798279255396352 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-04-01 00:23:45.264 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798286222135296 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:23:45.265 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798286222135296 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-04-01 00:23:45.265 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798286222135296 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-04-01 00:23:45.265 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798286222135296 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:23:45.265 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798286222135296 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":502,"page":1,"size":1000}]
2023-04-01 00:23:45.269 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798286222135296 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-04-01 00:23:45.269 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798286222135296 [0;39m ==> Parameters: 502(Long)
2023-04-01 00:23:45.270 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22798286222135296 [0;39m <==    Columns: count(0)
2023-04-01 00:23:45.270 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22798286222135296 [0;39m <==        Row: 0
2023-04-01 00:23:45.270 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798286222135296 [0;39m <==      Total: 1
2023-04-01 00:23:45.270 INFO  com.jiawa.wiki.service.EbookService               :48   [32m22798286222135296 [0;39m æ€»è¡Œæ•°ï¼š0
2023-04-01 00:23:45.270 INFO  com.jiawa.wiki.service.EbookService               :49   [32m22798286222135296 [0;39m æ€»é¡µæ•°ï¼š0
2023-04-01 00:23:45.270 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798286222135296 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-04-01 00:23:45.271 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798286222135296 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-04-01 00:23:46.636 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798291976720384 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:23:46.637 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798291976720384 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-04-01 00:23:46.637 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798291976720384 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-04-01 00:23:46.637 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798291976720384 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:23:46.637 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798291976720384 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":503,"page":1,"size":1000}]
2023-04-01 00:23:46.641 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798291976720384 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-04-01 00:23:46.641 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798291976720384 [0;39m ==> Parameters: 503(Long)
2023-04-01 00:23:46.643 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22798291976720384 [0;39m <==    Columns: count(0)
2023-04-01 00:23:46.643 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22798291976720384 [0;39m <==        Row: 0
2023-04-01 00:23:46.643 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798291976720384 [0;39m <==      Total: 1
2023-04-01 00:23:46.643 INFO  com.jiawa.wiki.service.EbookService               :48   [32m22798291976720384 [0;39m æ€»è¡Œæ•°ï¼š0
2023-04-01 00:23:46.643 INFO  com.jiawa.wiki.service.EbookService               :49   [32m22798291976720384 [0;39m æ€»é¡µæ•°ï¼š0
2023-04-01 00:23:46.644 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798291976720384 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-04-01 00:23:46.644 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798291976720384 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-04-01 00:23:47.960 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798297529978880 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:23:47.960 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798297529978880 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-04-01 00:23:47.962 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798297529978880 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-04-01 00:23:47.962 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798297529978880 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:23:47.962 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798297529978880 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":401,"page":1,"size":1000}]
2023-04-01 00:23:47.964 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798297529978880 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-04-01 00:23:47.965 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798297529978880 [0;39m ==> Parameters: 401(Long)
2023-04-01 00:23:47.965 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22798297529978880 [0;39m <==    Columns: count(0)
2023-04-01 00:23:47.965 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22798297529978880 [0;39m <==        Row: 1
2023-04-01 00:23:47.965 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798297529978880 [0;39m <==      Total: 1
2023-04-01 00:23:47.966 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22798297529978880 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-04-01 00:23:47.966 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22798297529978880 [0;39m ==> Parameters: 401(Long), 1000(Integer)
2023-04-01 00:23:47.967 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798297529978880 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-04-01 00:23:47.967 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798297529978880 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, 400, 401, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:23:47.967 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22798297529978880 [0;39m <==      Total: 1
2023-04-01 00:23:47.968 INFO  com.jiawa.wiki.service.EbookService               :48   [32m22798297529978880 [0;39m æ€»è¡Œæ•°ï¼š1
2023-04-01 00:23:47.968 INFO  com.jiawa.wiki.service.EbookService               :49   [32m22798297529978880 [0;39m æ€»é¡µæ•°ï¼š1
2023-04-01 00:23:47.968 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798297529978880 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":400,"category2Id":401,"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":1},"success":true}
2023-04-01 00:23:47.968 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798297529978880 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-04-01 00:23:49.114 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798302370205696 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:23:49.115 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798302370205696 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-04-01 00:23:49.115 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798302370205696 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-04-01 00:23:49.115 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798302370205696 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:23:49.115 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798302370205696 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":302,"page":1,"size":1000}]
2023-04-01 00:23:49.116 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798302370205696 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-04-01 00:23:49.118 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798302370205696 [0;39m ==> Parameters: 302(Long)
2023-04-01 00:23:49.121 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22798302370205696 [0;39m <==    Columns: count(0)
2023-04-01 00:23:49.121 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22798302370205696 [0;39m <==        Row: 0
2023-04-01 00:23:49.121 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798302370205696 [0;39m <==      Total: 1
2023-04-01 00:23:49.122 INFO  com.jiawa.wiki.service.EbookService               :48   [32m22798302370205696 [0;39m æ€»è¡Œæ•°ï¼š0
2023-04-01 00:23:49.122 INFO  com.jiawa.wiki.service.EbookService               :49   [32m22798302370205696 [0;39m æ€»é¡µæ•°ï¼š0
2023-04-01 00:23:49.122 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798302370205696 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-04-01 00:23:49.122 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798302370205696 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-04-01 00:23:49.893 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798305637568512 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:23:49.893 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798305637568512 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-04-01 00:23:49.894 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798305637568512 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-04-01 00:23:49.894 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798305637568512 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:23:49.894 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798305637568512 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":301,"page":1,"size":1000}]
2023-04-01 00:23:49.895 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798305637568512 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-04-01 00:23:49.896 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798305637568512 [0;39m ==> Parameters: 301(Long)
2023-04-01 00:23:49.897 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22798305637568512 [0;39m <==    Columns: count(0)
2023-04-01 00:23:49.897 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22798305637568512 [0;39m <==        Row: 1
2023-04-01 00:23:49.898 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798305637568512 [0;39m <==      Total: 1
2023-04-01 00:23:49.898 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22798305637568512 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-04-01 00:23:49.898 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22798305637568512 [0;39m ==> Parameters: 301(Long), 1000(Integer)
2023-04-01 00:23:49.899 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798305637568512 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-04-01 00:23:49.899 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798305637568512 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, 300, 301, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:23:49.899 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22798305637568512 [0;39m <==      Total: 1
2023-04-01 00:23:49.900 INFO  com.jiawa.wiki.service.EbookService               :48   [32m22798305637568512 [0;39m æ€»è¡Œæ•°ï¼š1
2023-04-01 00:23:49.900 INFO  com.jiawa.wiki.service.EbookService               :49   [32m22798305637568512 [0;39m æ€»é¡µæ•°ï¼š1
2023-04-01 00:23:49.900 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798305637568512 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":300,"category2Id":301,"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":1},"success":true}
2023-04-01 00:23:49.900 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798305637568512 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-04-01 00:23:51.095 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:23:52.385 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798316089774080 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:23:52.385 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798316089774080 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 00:23:52.385 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798316089774080 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 00:23:52.385 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798316089774080 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:23:52.386 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798316089774080 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 00:23:52.386 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798316089774080 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 00:23:52.386 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798316089774080 [0;39m ==> Parameters: 
2023-04-01 00:23:52.387 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798316089774080 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 00:23:52.387 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798316089774080 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 00:23:52.388 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798316089774080 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 00:23:52.388 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798316089774080 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 00:23:52.388 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798316089774080 [0;39m <==        Row: 200, 500, Java, 200
2023-04-01 00:23:52.388 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798316089774080 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 00:23:52.389 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798316089774080 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 00:23:52.389 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798316089774080 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 00:23:52.389 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798316089774080 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 00:23:52.389 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798316089774080 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 00:23:52.390 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798316089774080 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 00:23:52.390 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798316089774080 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 00:23:52.390 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798316089774080 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 00:23:52.390 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798316089774080 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 00:23:52.390 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798316089774080 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 00:23:52.391 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798316089774080 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 00:23:52.391 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798316089774080 [0;39m <==      Total: 15
2023-04-01 00:23:52.391 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798316089774080 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":500,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 00:23:52.392 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798316089774080 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-04-01 00:23:52.423 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798316249157632 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:23:52.423 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798316249157632 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-04-01 00:23:52.423 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798316249157632 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-04-01 00:23:52.423 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798316249157632 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:23:52.424 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798316249157632 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-04-01 00:23:52.425 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798316249157632 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-04-01 00:23:52.426 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798316249157632 [0;39m ==> Parameters: 
2023-04-01 00:23:52.426 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22798316249157632 [0;39m <==    Columns: count(0)
2023-04-01 00:23:52.426 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22798316249157632 [0;39m <==        Row: 5
2023-04-01 00:23:52.427 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798316249157632 [0;39m <==      Total: 1
2023-04-01 00:23:52.427 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22798316249157632 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-04-01 00:23:52.427 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22798316249157632 [0;39m ==> Parameters: 10(Integer)
2023-04-01 00:23:52.427 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798316249157632 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-04-01 00:23:52.428 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798316249157632 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 14, 8
2023-04-01 00:23:52.428 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798316249157632 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, 100, 101, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:23:52.428 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798316249157632 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, 300, 301, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:23:52.428 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798316249157632 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, 400, 401, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:23:52.428 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798316249157632 [0;39m <==        Row: 5, Oracle å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:23:52.428 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22798316249157632 [0;39m <==      Total: 5
2023-04-01 00:23:52.429 INFO  com.jiawa.wiki.service.EbookService               :48   [32m22798316249157632 [0;39m æ€»è¡Œæ•°ï¼š5
2023-04-01 00:23:52.429 INFO  com.jiawa.wiki.service.EbookService               :49   [32m22798316249157632 [0;39m æ€»é¡µæ•°ï¼š1
2023-04-01 00:23:52.429 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798316249157632 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":14,"voteCount":8},{"category1Id":100,"category2Id":101,"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":300,"category2Id":301,"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":5,"name":"Oracle å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-04-01 00:23:52.429 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798316249157632 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-04-01 00:23:54.954 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798326864941056 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:23:54.955 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798326864941056 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 00:23:54.955 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798326864941056 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 00:23:54.955 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798326864941056 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:23:54.956 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798326864941056 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 00:23:54.959 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798326864941056 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 00:23:54.960 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798326864941056 [0;39m ==> Parameters: 
2023-04-01 00:23:54.960 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798326864941056 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 00:23:54.961 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798326864941056 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 00:23:54.961 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798326864941056 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 00:23:54.961 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798326864941056 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 00:23:54.961 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798326864941056 [0;39m <==        Row: 200, 500, Java, 200
2023-04-01 00:23:54.961 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798326864941056 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 00:23:54.961 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798326864941056 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 00:23:54.963 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798326864941056 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 00:23:54.963 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798326864941056 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 00:23:54.963 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798326864941056 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 00:23:54.963 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798326864941056 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 00:23:54.963 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798326864941056 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 00:23:54.964 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798326864941056 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 00:23:54.964 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798326864941056 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 00:23:54.964 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798326864941056 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 00:23:54.964 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798326864941056 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 00:23:54.965 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798326864941056 [0;39m <==      Total: 15
2023-04-01 00:23:54.965 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798326864941056 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":500,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 00:23:54.965 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798326864941056 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š11 ms -------------
2023-04-01 00:23:56.741 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:24:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22798348037787648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:24:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22798348037787648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:24:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22798348037787648 [0;39m ==> Parameters: 
2023-04-01 00:24:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22798348037787648 [0;39m <==    Updates: 0
2023-04-01 00:24:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22798348037787648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 00:24:01.483 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m22798291976720384 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-04-01 00:24:01.484 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m22798291976720384 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/category/save
2023-04-01 00:24:01.484 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m22798291976720384 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š22797905157033984
2023-04-01 00:24:01.485 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m22798291976720384 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"22797905157033984"}
2023-04-01 00:24:01.487 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798354266329088 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:24:01.487 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798354266329088 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/save POST
2023-04-01 00:24:01.487 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798354266329088 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.save
2023-04-01 00:24:01.487 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798354266329088 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:24:01.488 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798354266329088 [0;39m è¯·æ±‚å‚æ•°: [{"id":200,"name":"Java","parent":0,"sort":200}]
2023-04-01 00:24:01.488 DEBUG c.j.wiki.mapper.CategoryMapper.updateByPrimaryKey :137  [32m22798354266329088 [0;39m ==>  Preparing: update category set parent = ?, `name` = ?, sort = ? where id = ?
2023-04-01 00:24:01.489 DEBUG c.j.wiki.mapper.CategoryMapper.updateByPrimaryKey :137  [32m22798354266329088 [0;39m ==> Parameters: 0(Long), Java(String), 200(Integer), 200(Long)
2023-04-01 00:24:01.495 DEBUG c.j.wiki.mapper.CategoryMapper.updateByPrimaryKey :137  [32m22798354266329088 [0;39m <==    Updates: 1
2023-04-01 00:24:01.496 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798354266329088 [0;39m è¿”å›žç»“æžœ: {"success":true}
2023-04-01 00:24:01.496 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798354266329088 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2023-04-01 00:24:01.498 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m22798354266329088 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š14 ms -------------
2023-04-01 00:24:01.518 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798354396352512 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:24:01.518 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798354396352512 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 00:24:01.519 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798354396352512 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 00:24:01.519 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798354396352512 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:24:01.519 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798354396352512 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 00:24:01.520 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798354396352512 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 00:24:01.521 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798354396352512 [0;39m ==> Parameters: 
2023-04-01 00:24:01.522 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798354396352512 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 00:24:01.522 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798354396352512 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 00:24:01.522 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798354396352512 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 00:24:01.523 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798354396352512 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 00:24:01.523 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798354396352512 [0;39m <==        Row: 200, 0, Java, 200
2023-04-01 00:24:01.523 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798354396352512 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 00:24:01.524 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798354396352512 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 00:24:01.524 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798354396352512 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 00:24:01.524 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798354396352512 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 00:24:01.524 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798354396352512 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 00:24:01.524 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798354396352512 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 00:24:01.524 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798354396352512 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 00:24:01.524 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798354396352512 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 00:24:01.524 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798354396352512 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 00:24:01.525 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798354396352512 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 00:24:01.525 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798354396352512 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 00:24:01.525 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798354396352512 [0;39m <==      Total: 15
2023-04-01 00:24:01.525 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798354396352512 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 00:24:01.525 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798354396352512 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-04-01 00:24:04.096 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798365209268224 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:24:04.096 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798365209268224 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 00:24:04.096 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798365209268224 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 00:24:04.097 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798365209268224 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:24:04.097 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798365209268224 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 00:24:04.097 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798365209268224 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 00:24:04.097 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798365209268224 [0;39m ==> Parameters: 
2023-04-01 00:24:04.098 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798365209268224 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 00:24:04.099 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798365209268224 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 00:24:04.099 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798365209268224 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 00:24:04.099 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798365209268224 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 00:24:04.099 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798365209268224 [0;39m <==        Row: 200, 0, Java, 200
2023-04-01 00:24:04.099 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798365209268224 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 00:24:04.099 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798365209268224 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 00:24:04.100 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798365209268224 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 00:24:04.100 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798365209268224 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 00:24:04.100 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798365209268224 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 00:24:04.100 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798365209268224 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 00:24:04.101 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798365209268224 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 00:24:04.101 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798365209268224 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 00:24:04.101 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798365209268224 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 00:24:04.101 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798365209268224 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 00:24:04.101 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798365209268224 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 00:24:04.102 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798365209268224 [0;39m <==      Total: 15
2023-04-01 00:24:04.102 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798365209268224 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 00:24:04.102 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798365209268224 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-04-01 00:24:04.129 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798365347680256 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:24:04.130 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798365347680256 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-04-01 00:24:04.130 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798365347680256 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-04-01 00:24:04.130 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798365347680256 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:24:04.130 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798365347680256 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-04-01 00:24:04.131 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798365347680256 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-04-01 00:24:04.131 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798365347680256 [0;39m ==> Parameters: 
2023-04-01 00:24:04.132 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22798365347680256 [0;39m <==    Columns: count(0)
2023-04-01 00:24:04.132 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22798365347680256 [0;39m <==        Row: 5
2023-04-01 00:24:04.133 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798365347680256 [0;39m <==      Total: 1
2023-04-01 00:24:04.133 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22798365347680256 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-04-01 00:24:04.133 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22798365347680256 [0;39m ==> Parameters: 10(Integer)
2023-04-01 00:24:04.134 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798365347680256 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-04-01 00:24:04.134 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798365347680256 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 14, 8
2023-04-01 00:24:04.134 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798365347680256 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, 100, 101, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:24:04.135 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798365347680256 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, 300, 301, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:24:04.135 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798365347680256 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, 400, 401, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:24:04.135 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798365347680256 [0;39m <==        Row: 5, Oracle å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:24:04.135 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22798365347680256 [0;39m <==      Total: 5
2023-04-01 00:24:04.135 INFO  com.jiawa.wiki.service.EbookService               :48   [32m22798365347680256 [0;39m æ€»è¡Œæ•°ï¼š5
2023-04-01 00:24:04.135 INFO  com.jiawa.wiki.service.EbookService               :49   [32m22798365347680256 [0;39m æ€»é¡µæ•°ï¼š1
2023-04-01 00:24:04.135 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798365347680256 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":14,"voteCount":8},{"category1Id":100,"category2Id":101,"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":300,"category2Id":301,"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":5,"name":"Oracle å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-04-01 00:24:04.135 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798365347680256 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-04-01 00:24:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22798369051250688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:24:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22798369051250688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:24:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22798369051250688 [0;39m ==> Parameters: 
2023-04-01 00:24:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22798369051250688 [0;39m <==    Updates: 1
2023-04-01 00:24:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22798369051250688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 00:24:07.487 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798379432153088 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:24:07.487 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798379432153088 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/1 GET
2023-04-01 00:24:07.487 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798379432153088 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-04-01 00:24:07.488 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798379432153088 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:24:07.488 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798379432153088 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-04-01 00:24:07.489 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m22798379432153088 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-04-01 00:24:07.490 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m22798379432153088 [0;39m ==> Parameters: 1(Long)
2023-04-01 00:24:07.490 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22798379432153088 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-04-01 00:24:07.490 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22798379432153088 [0;39m <==        Row: 1, 1, 0, æ–‡æ¡£1, 1, 8, 4
2023-04-01 00:24:07.491 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22798379432153088 [0;39m <==        Row: 2, 1, 1, æ–‡æ¡£1.1, 1, 2, 1
2023-04-01 00:24:07.491 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22798379432153088 [0;39m <==        Row: 4, 1, 3, æ–‡æ¡£2.1, 1, 2, 1
2023-04-01 00:24:07.491 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22798379432153088 [0;39m <==        Row: 6, 1, 5, æ–‡æ¡£2.2.1, 1, 1, 1
2023-04-01 00:24:07.492 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22798379432153088 [0;39m <==        Row: 3, 1, 0, æ–‡æ¡£2, 2, 0, 0
2023-04-01 00:24:07.492 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22798379432153088 [0;39m <==        Row: 5, 1, 3, æ–‡æ¡£2.2, 2, 1, 1
2023-04-01 00:24:07.492 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m22798379432153088 [0;39m <==      Total: 6
2023-04-01 00:24:07.493 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798379432153088 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":1,"id":1,"name":"æ–‡æ¡£1","parent":0,"sort":1,"viewCount":8,"voteCount":4},{"ebookId":1,"id":2,"name":"æ–‡æ¡£1.1","parent":1,"sort":1,"viewCount":2,"voteCount":1},{"ebookId":1,"id":4,"name":"æ–‡æ¡£2.1","parent":3,"sort":1,"viewCount":2,"voteCount":1},{"ebookId":1,"id":6,"name":"æ–‡æ¡£2.2.1","parent":5,"sort":1,"viewCount":1,"voteCount":1},{"ebookId":1,"id":3,"name":"æ–‡æ¡£2","parent":0,"sort":2,"viewCount":0,"voteCount":0},{"ebookId":1,"id":5,"name":"æ–‡æ¡£2.2","parent":3,"sort":2,"viewCount":1,"voteCount":1}],"success":true}
2023-04-01 00:24:07.493 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798379432153088 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-04-01 00:24:09.188 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798386566664192 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:24:09.188 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798386566664192 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/3 GET
2023-04-01 00:24:09.188 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798386566664192 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-04-01 00:24:09.188 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798386566664192 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:24:09.189 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798386566664192 [0;39m è¯·æ±‚å‚æ•°: [3]
2023-04-01 00:24:09.189 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m22798386566664192 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-04-01 00:24:09.190 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m22798386566664192 [0;39m ==> Parameters: 3(Long)
2023-04-01 00:24:09.190 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m22798386566664192 [0;39m <==      Total: 0
2023-04-01 00:24:09.191 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m22798386566664192 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-04-01 00:24:09.191 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m22798386566664192 [0;39m ==> Parameters: 3(Long)
2023-04-01 00:24:09.193 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m22798386566664192 [0;39m <==    Updates: 1
2023-04-01 00:24:09.193 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798386566664192 [0;39m è¿”å›žç»“æžœ: {"content":"","success":true}
2023-04-01 00:24:09.193 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798386566664192 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-04-01 00:24:10.495 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798392048619520 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:24:10.495 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798392048619520 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/2 GET
2023-04-01 00:24:10.495 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798392048619520 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-04-01 00:24:10.496 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798392048619520 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:24:10.496 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798392048619520 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-04-01 00:24:10.497 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m22798392048619520 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-04-01 00:24:10.497 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m22798392048619520 [0;39m ==> Parameters: 2(Long)
2023-04-01 00:24:10.498 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m22798392048619520 [0;39m <==      Total: 0
2023-04-01 00:24:10.498 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m22798392048619520 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-04-01 00:24:10.498 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m22798392048619520 [0;39m ==> Parameters: 2(Long)
2023-04-01 00:24:10.500 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m22798392048619520 [0;39m <==    Updates: 1
2023-04-01 00:24:10.500 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798392048619520 [0;39m è¿”å›žç»“æžœ: {"content":"","success":true}
2023-04-01 00:24:10.500 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798392048619520 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-04-01 00:24:10.976 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798394066079744 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:24:10.976 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798394066079744 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/1 GET
2023-04-01 00:24:10.976 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798394066079744 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-04-01 00:24:10.977 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798394066079744 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:24:10.977 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798394066079744 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-04-01 00:24:10.977 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m22798394066079744 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-04-01 00:24:10.977 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m22798394066079744 [0;39m ==> Parameters: 1(Long)
2023-04-01 00:24:10.978 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m22798394066079744 [0;39m <==      Total: 0
2023-04-01 00:24:10.979 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m22798394066079744 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-04-01 00:24:10.979 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m22798394066079744 [0;39m ==> Parameters: 1(Long)
2023-04-01 00:24:10.981 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m22798394066079744 [0;39m <==    Updates: 1
2023-04-01 00:24:10.981 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798394066079744 [0;39m è¿”å›žç»“æžœ: {"content":"","success":true}
2023-04-01 00:24:10.981 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798394066079744 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-04-01 00:24:20.830 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:24:21.145 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:24:27.001 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:24:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22798494863593472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:24:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22798494863593472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:24:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22798494863593472 [0;39m ==> Parameters: 
2023-04-01 00:24:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22798494863593472 [0;39m <==    Updates: 1
2023-04-01 00:24:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22798494863593472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 00:24:42.884 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:24:44.926 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:24:50.613 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:24:51.086 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:24:54.694 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:25:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22798599733776384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:25:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22798599733776384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:25:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22798599733776384 [0;39m ==> Parameters: 
2023-04-01 00:25:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22798599733776384 [0;39m <==    Updates: 0
2023-04-01 00:25:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22798599733776384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 00:25:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22798620705296384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:25:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22798620705296384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:25:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22798620705296384 [0;39m ==> Parameters: 
2023-04-01 00:25:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22798620705296384 [0;39m <==    Updates: 1
2023-04-01 00:25:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22798620705296384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 00:25:06.986 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:25:09.021 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:25:21.097 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:25:24.696 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:25:31.067 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:25:33.118 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:25:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22798746496667648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:25:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22798746496667648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:25:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22798746496667648 [0;39m ==> Parameters: 
2023-04-01 00:25:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22798746496667648 [0;39m <==    Updates: 1
2023-04-01 00:25:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22798746496667648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 00:25:50.633 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:25:51.084 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:25:54.736 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:25:58.819 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:26:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22798851404599296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:26:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22798851404599296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:26:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22798851404599296 [0;39m ==> Parameters: 
2023-04-01 00:26:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22798851404599296 [0;39m <==    Updates: 0
2023-04-01 00:26:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22798851404599296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 00:26:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22798872346759168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:26:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22798872346759168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:26:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22798872346759168 [0;39m ==> Parameters: 
2023-04-01 00:26:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22798872346759168 [0;39m <==    Updates: 1
2023-04-01 00:26:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22798872346759168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 00:26:05.793 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798875643482112 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:26:05.793 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798875643482112 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/1 GET
2023-04-01 00:26:05.793 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798875643482112 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-04-01 00:26:05.793 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798875643482112 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:26:05.794 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798875643482112 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-04-01 00:26:05.795 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m22798875643482112 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-04-01 00:26:05.795 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m22798875643482112 [0;39m ==> Parameters: 1(Long)
2023-04-01 00:26:05.797 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22798875643482112 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-04-01 00:26:05.797 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22798875643482112 [0;39m <==        Row: 1, 1, 0, æ–‡æ¡£1, 1, 9, 4
2023-04-01 00:26:05.798 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22798875643482112 [0;39m <==        Row: 2, 1, 1, æ–‡æ¡£1.1, 1, 3, 1
2023-04-01 00:26:05.798 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22798875643482112 [0;39m <==        Row: 4, 1, 3, æ–‡æ¡£2.1, 1, 2, 1
2023-04-01 00:26:05.800 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22798875643482112 [0;39m <==        Row: 6, 1, 5, æ–‡æ¡£2.2.1, 1, 1, 1
2023-04-01 00:26:05.800 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22798875643482112 [0;39m <==        Row: 3, 1, 0, æ–‡æ¡£2, 2, 1, 0
2023-04-01 00:26:05.800 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22798875643482112 [0;39m <==        Row: 5, 1, 3, æ–‡æ¡£2.2, 2, 1, 1
2023-04-01 00:26:05.801 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m22798875643482112 [0;39m <==      Total: 6
2023-04-01 00:26:05.806 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798875643482112 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":1,"id":1,"name":"æ–‡æ¡£1","parent":0,"sort":1,"viewCount":9,"voteCount":4},{"ebookId":1,"id":2,"name":"æ–‡æ¡£1.1","parent":1,"sort":1,"viewCount":3,"voteCount":1},{"ebookId":1,"id":4,"name":"æ–‡æ¡£2.1","parent":3,"sort":1,"viewCount":2,"voteCount":1},{"ebookId":1,"id":6,"name":"æ–‡æ¡£2.2.1","parent":5,"sort":1,"viewCount":1,"voteCount":1},{"ebookId":1,"id":3,"name":"æ–‡æ¡£2","parent":0,"sort":2,"viewCount":1,"voteCount":0},{"ebookId":1,"id":5,"name":"æ–‡æ¡£2.2","parent":3,"sort":2,"viewCount":1,"voteCount":1}],"success":true}
2023-04-01 00:26:05.807 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798875643482112 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š14 ms -------------
2023-04-01 00:26:06.571 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798878906650624 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:26:06.572 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798878906650624 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/1 GET
2023-04-01 00:26:06.572 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798878906650624 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-04-01 00:26:06.572 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798878906650624 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:26:06.572 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798878906650624 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-04-01 00:26:06.574 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m22798878906650624 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-04-01 00:26:06.574 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m22798878906650624 [0;39m ==> Parameters: 1(Long)
2023-04-01 00:26:06.575 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22798878906650624 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-04-01 00:26:06.575 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22798878906650624 [0;39m <==        Row: 1, 1, 0, æ–‡æ¡£1, 1, 9, 4
2023-04-01 00:26:06.576 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22798878906650624 [0;39m <==        Row: 2, 1, 1, æ–‡æ¡£1.1, 1, 3, 1
2023-04-01 00:26:06.576 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22798878906650624 [0;39m <==        Row: 4, 1, 3, æ–‡æ¡£2.1, 1, 2, 1
2023-04-01 00:26:06.577 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22798878906650624 [0;39m <==        Row: 6, 1, 5, æ–‡æ¡£2.2.1, 1, 1, 1
2023-04-01 00:26:06.577 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22798878906650624 [0;39m <==        Row: 3, 1, 0, æ–‡æ¡£2, 2, 1, 0
2023-04-01 00:26:06.577 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22798878906650624 [0;39m <==        Row: 5, 1, 3, æ–‡æ¡£2.2, 2, 1, 1
2023-04-01 00:26:06.577 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m22798878906650624 [0;39m <==      Total: 6
2023-04-01 00:26:06.577 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798878906650624 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":1,"id":1,"name":"æ–‡æ¡£1","parent":0,"sort":1,"viewCount":9,"voteCount":4},{"ebookId":1,"id":2,"name":"æ–‡æ¡£1.1","parent":1,"sort":1,"viewCount":3,"voteCount":1},{"ebookId":1,"id":4,"name":"æ–‡æ¡£2.1","parent":3,"sort":1,"viewCount":2,"voteCount":1},{"ebookId":1,"id":6,"name":"æ–‡æ¡£2.2.1","parent":5,"sort":1,"viewCount":1,"voteCount":1},{"ebookId":1,"id":3,"name":"æ–‡æ¡£2","parent":0,"sort":2,"viewCount":1,"voteCount":0},{"ebookId":1,"id":5,"name":"æ–‡æ¡£2.2","parent":3,"sort":2,"viewCount":1,"voteCount":1}],"success":true}
2023-04-01 00:26:06.579 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798878906650624 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-04-01 00:26:12.892 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798905418846208 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:26:12.892 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798905418846208 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 00:26:12.892 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798905418846208 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 00:26:12.892 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798905418846208 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:26:12.893 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798905418846208 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 00:26:12.894 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798905418846208 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 00:26:12.895 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798905418846208 [0;39m ==> Parameters: 
2023-04-01 00:26:12.895 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798905418846208 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 00:26:12.895 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798905418846208 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 00:26:12.896 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798905418846208 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 00:26:12.896 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798905418846208 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 00:26:12.896 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798905418846208 [0;39m <==        Row: 200, 0, Java, 200
2023-04-01 00:26:12.896 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798905418846208 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 00:26:12.896 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798905418846208 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 00:26:12.897 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798905418846208 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 00:26:12.897 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798905418846208 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 00:26:12.897 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798905418846208 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 00:26:12.897 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798905418846208 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 00:26:12.897 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798905418846208 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 00:26:12.898 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798905418846208 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 00:26:12.898 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798905418846208 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 00:26:12.898 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798905418846208 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 00:26:12.899 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22798905418846208 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 00:26:12.899 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22798905418846208 [0;39m <==      Total: 15
2023-04-01 00:26:12.900 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798905418846208 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 00:26:12.900 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798905418846208 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-04-01 00:26:13.054 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798906098323456 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:26:13.055 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798906098323456 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-04-01 00:26:13.055 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798906098323456 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-04-01 00:26:13.055 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798906098323456 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:26:13.055 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798906098323456 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-04-01 00:26:13.056 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798906098323456 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-04-01 00:26:13.057 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798906098323456 [0;39m ==> Parameters: 
2023-04-01 00:26:13.057 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22798906098323456 [0;39m <==    Columns: count(0)
2023-04-01 00:26:13.058 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22798906098323456 [0;39m <==        Row: 5
2023-04-01 00:26:13.058 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22798906098323456 [0;39m <==      Total: 1
2023-04-01 00:26:13.058 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22798906098323456 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-04-01 00:26:13.059 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22798906098323456 [0;39m ==> Parameters: 10(Integer)
2023-04-01 00:26:13.059 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798906098323456 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-04-01 00:26:13.059 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798906098323456 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 17, 8
2023-04-01 00:26:13.060 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798906098323456 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, 100, 101, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:26:13.060 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798906098323456 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, 300, 301, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:26:13.060 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798906098323456 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, 400, 401, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:26:13.061 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22798906098323456 [0;39m <==        Row: 5, Oracle å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:26:13.061 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22798906098323456 [0;39m <==      Total: 5
2023-04-01 00:26:13.061 INFO  com.jiawa.wiki.service.EbookService               :48   [32m22798906098323456 [0;39m æ€»è¡Œæ•°ï¼š5
2023-04-01 00:26:13.061 INFO  com.jiawa.wiki.service.EbookService               :49   [32m22798906098323456 [0;39m æ€»é¡µæ•°ï¼š1
2023-04-01 00:26:13.062 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798906098323456 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":17,"voteCount":8},{"category1Id":100,"category2Id":101,"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":300,"category2Id":301,"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":5,"name":"Oracle å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-04-01 00:26:13.062 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798906098323456 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-04-01 00:26:13.245 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m22798316089774080 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-04-01 00:26:13.246 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m22798316089774080 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/list
2023-04-01 00:26:13.246 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m22798316089774080 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š22797905157033984
2023-04-01 00:26:13.249 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m22798316089774080 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"22797905157033984"}
2023-04-01 00:26:13.250 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798906920407040 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:26:13.250 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798906920407040 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/user/list GET
2023-04-01 00:26:13.250 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798906920407040 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.UserController.list
2023-04-01 00:26:13.250 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798906920407040 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:26:13.251 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798906920407040 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-04-01 00:26:13.251 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m22798906920407040 [0;39m ==>  Preparing: SELECT count(0) FROM user
2023-04-01 00:26:13.252 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m22798906920407040 [0;39m ==> Parameters: 
2023-04-01 00:26:13.252 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m22798906920407040 [0;39m <==    Columns: count(0)
2023-04-01 00:26:13.253 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m22798906920407040 [0;39m <==        Row: 1
2023-04-01 00:26:13.253 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m22798906920407040 [0;39m <==      Total: 1
2023-04-01 00:26:13.253 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22798906920407040 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2023-04-01 00:26:13.255 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22798906920407040 [0;39m ==> Parameters: 10(Integer)
2023-04-01 00:26:13.255 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m22798906920407040 [0;39m <==    Columns: id, login_name, name, password
2023-04-01 00:26:13.256 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m22798906920407040 [0;39m <==        Row: 1, test, æµ‹è¯•, e70e2222a9d67c4f2eae107533359aa4
2023-04-01 00:26:13.256 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22798906920407040 [0;39m <==      Total: 1
2023-04-01 00:26:13.256 INFO  com.jiawa.wiki.service.UserService                :49   [32m22798906920407040 [0;39m æ€»è¡Œæ•°ï¼š1
2023-04-01 00:26:13.256 INFO  com.jiawa.wiki.service.UserService                :50   [32m22798906920407040 [0;39m æ€»é¡µæ•°ï¼š1
2023-04-01 00:26:13.256 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798906920407040 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"id":1,"loginName":"test","name":"æµ‹è¯•"}],"total":1},"success":true}
2023-04-01 00:26:13.256 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798906920407040 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-04-01 00:26:13.257 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m22798906920407040 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š11 ms -------------
2023-04-01 00:26:14.834 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m22798392048619520 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-04-01 00:26:14.834 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m22798392048619520 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/list
2023-04-01 00:26:14.834 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m22798392048619520 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š22797905157033984
2023-04-01 00:26:14.835 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m22798392048619520 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"22797905157033984"}
2023-04-01 00:26:14.835 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798913568378880 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:26:14.836 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798913568378880 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/user/list GET
2023-04-01 00:26:14.836 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798913568378880 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.UserController.list
2023-04-01 00:26:14.836 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798913568378880 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:26:14.836 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798913568378880 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-04-01 00:26:14.838 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m22798913568378880 [0;39m ==>  Preparing: SELECT count(0) FROM user
2023-04-01 00:26:14.839 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m22798913568378880 [0;39m ==> Parameters: 
2023-04-01 00:26:14.839 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m22798913568378880 [0;39m <==    Columns: count(0)
2023-04-01 00:26:14.839 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m22798913568378880 [0;39m <==        Row: 1
2023-04-01 00:26:14.840 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m22798913568378880 [0;39m <==      Total: 1
2023-04-01 00:26:14.840 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22798913568378880 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2023-04-01 00:26:14.841 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22798913568378880 [0;39m ==> Parameters: 10(Integer)
2023-04-01 00:26:14.841 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m22798913568378880 [0;39m <==    Columns: id, login_name, name, password
2023-04-01 00:26:14.841 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m22798913568378880 [0;39m <==        Row: 1, test, æµ‹è¯•, e70e2222a9d67c4f2eae107533359aa4
2023-04-01 00:26:14.841 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22798913568378880 [0;39m <==      Total: 1
2023-04-01 00:26:14.842 INFO  com.jiawa.wiki.service.UserService                :49   [32m22798913568378880 [0;39m æ€»è¡Œæ•°ï¼š1
2023-04-01 00:26:14.842 INFO  com.jiawa.wiki.service.UserService                :50   [32m22798913568378880 [0;39m æ€»é¡µæ•°ï¼š1
2023-04-01 00:26:14.842 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798913568378880 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"id":1,"loginName":"test","name":"æµ‹è¯•"}],"total":1},"success":true}
2023-04-01 00:26:14.842 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798913568378880 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-04-01 00:26:14.843 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m22798913568378880 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2023-04-01 00:26:15.380 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m22798394066079744 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-04-01 00:26:15.381 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m22798394066079744 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/list
2023-04-01 00:26:15.381 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m22798394066079744 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š22797905157033984
2023-04-01 00:26:15.383 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m22798394066079744 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"22797905157033984"}
2023-04-01 00:26:15.383 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22798915866857472 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:26:15.384 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22798915866857472 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/user/list GET
2023-04-01 00:26:15.384 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22798915866857472 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.UserController.list
2023-04-01 00:26:15.384 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22798915866857472 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:26:15.384 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22798915866857472 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-04-01 00:26:15.387 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m22798915866857472 [0;39m ==>  Preparing: SELECT count(0) FROM user
2023-04-01 00:26:15.387 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m22798915866857472 [0;39m ==> Parameters: 
2023-04-01 00:26:15.387 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m22798915866857472 [0;39m <==    Columns: count(0)
2023-04-01 00:26:15.388 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m22798915866857472 [0;39m <==        Row: 1
2023-04-01 00:26:15.388 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m22798915866857472 [0;39m <==      Total: 1
2023-04-01 00:26:15.388 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22798915866857472 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2023-04-01 00:26:15.388 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22798915866857472 [0;39m ==> Parameters: 10(Integer)
2023-04-01 00:26:15.389 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m22798915866857472 [0;39m <==    Columns: id, login_name, name, password
2023-04-01 00:26:15.389 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m22798915866857472 [0;39m <==        Row: 1, test, æµ‹è¯•, e70e2222a9d67c4f2eae107533359aa4
2023-04-01 00:26:15.389 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22798915866857472 [0;39m <==      Total: 1
2023-04-01 00:26:15.390 INFO  com.jiawa.wiki.service.UserService                :49   [32m22798915866857472 [0;39m æ€»è¡Œæ•°ï¼š1
2023-04-01 00:26:15.390 INFO  com.jiawa.wiki.service.UserService                :50   [32m22798915866857472 [0;39m æ€»é¡µæ•°ï¼š1
2023-04-01 00:26:15.390 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22798915866857472 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"id":1,"loginName":"test","name":"æµ‹è¯•"}],"total":1},"success":true}
2023-04-01 00:26:15.390 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22798915866857472 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-04-01 00:26:15.391 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m22798915866857472 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š10 ms -------------
2023-04-01 00:26:21.083 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:26:24.697 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:26:26.728 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:26:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22798998159101952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:26:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22798998159101952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:26:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22798998159101952 [0;39m ==> Parameters: 
2023-04-01 00:26:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22798998159101952 [0;39m <==    Updates: 1
2023-04-01 00:26:35.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22798998159101952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 00:26:50.831 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:26:51.096 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:26:52.882 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:26:56.977 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:27:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22799103054450688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:27:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22799103054450688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:27:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22799103054450688 [0;39m ==> Parameters: 
2023-04-01 00:27:00.027 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22799103054450688 [0;39m <==    Updates: 0
2023-04-01 00:27:00.027 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22799103054450688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š14æ¯«ç§’
2023-04-01 00:27:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22799124000804864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:27:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22799124000804864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:27:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22799124000804864 [0;39m ==> Parameters: 
2023-04-01 00:27:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22799124000804864 [0;39m <==    Updates: 1
2023-04-01 00:27:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22799124000804864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 00:27:14.944 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:27:20.626 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:27:21.078 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:27:24.730 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:27:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22799249850896384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:27:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22799249850896384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:27:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22799249850896384 [0;39m ==> Parameters: 
2023-04-01 00:27:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22799249850896384 [0;39m <==    Updates: 1
2023-04-01 00:27:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22799249850896384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 00:27:39.536 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:27:45.537 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m22798354396352512 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-04-01 00:27:45.537 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m22798354396352512 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/list
2023-04-01 00:27:45.537 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m22798354396352512 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š22797905157033984
2023-04-01 00:27:45.540 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m22798354396352512 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"22797905157033984"}
2023-04-01 00:27:45.542 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22799294021111808 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:27:45.542 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22799294021111808 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/user/list GET
2023-04-01 00:27:45.544 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22799294021111808 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.UserController.list
2023-04-01 00:27:45.544 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22799294021111808 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:27:45.544 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22799294021111808 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-04-01 00:27:45.545 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m22799294021111808 [0;39m ==>  Preparing: SELECT count(0) FROM user
2023-04-01 00:27:45.546 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m22799294021111808 [0;39m ==> Parameters: 
2023-04-01 00:27:45.547 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m22799294021111808 [0;39m <==    Columns: count(0)
2023-04-01 00:27:45.547 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m22799294021111808 [0;39m <==        Row: 1
2023-04-01 00:27:45.548 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m22799294021111808 [0;39m <==      Total: 1
2023-04-01 00:27:45.548 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22799294021111808 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2023-04-01 00:27:45.549 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22799294021111808 [0;39m ==> Parameters: 10(Integer)
2023-04-01 00:27:45.550 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m22799294021111808 [0;39m <==    Columns: id, login_name, name, password
2023-04-01 00:27:45.550 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m22799294021111808 [0;39m <==        Row: 1, test, æµ‹è¯•, e70e2222a9d67c4f2eae107533359aa4
2023-04-01 00:27:45.551 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22799294021111808 [0;39m <==      Total: 1
2023-04-01 00:27:45.551 INFO  com.jiawa.wiki.service.UserService                :49   [32m22799294021111808 [0;39m æ€»è¡Œæ•°ï¼š1
2023-04-01 00:27:45.551 INFO  com.jiawa.wiki.service.UserService                :50   [32m22799294021111808 [0;39m æ€»é¡µæ•°ï¼š1
2023-04-01 00:27:45.552 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22799294021111808 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"id":1,"loginName":"test","name":"æµ‹è¯•"}],"total":1},"success":true}
2023-04-01 00:27:45.552 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22799294021111808 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š11 ms -------------
2023-04-01 00:27:45.552 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m22799294021111808 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š15 ms -------------
2023-04-01 00:27:50.693 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:27:51.096 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:27:52.723 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:27:54.768 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:28:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22799354670747648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:28:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22799354670747648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:28:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22799354670747648 [0;39m ==> Parameters: 
2023-04-01 00:28:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22799354670747648 [0;39m <==    Updates: 0
2023-04-01 00:28:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22799354670747648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 00:28:03.625 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:28:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22799375663239168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:28:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22799375663239168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:28:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22799375663239168 [0;39m ==> Parameters: 
2023-04-01 00:28:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22799375663239168 [0;39m <==    Updates: 1
2023-04-01 00:28:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22799375663239168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 00:28:18.357 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22799431657197568 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:28:18.357 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22799431657197568 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 00:28:18.358 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22799431657197568 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 00:28:18.358 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22799431657197568 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:28:18.358 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22799431657197568 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 00:28:18.358 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22799431657197568 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 00:28:18.359 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22799431657197568 [0;39m ==> Parameters: 
2023-04-01 00:28:18.360 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799431657197568 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 00:28:18.360 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799431657197568 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 00:28:18.360 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799431657197568 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 00:28:18.361 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799431657197568 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 00:28:18.361 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799431657197568 [0;39m <==        Row: 200, 0, Java, 200
2023-04-01 00:28:18.361 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799431657197568 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 00:28:18.362 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799431657197568 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 00:28:18.362 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799431657197568 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 00:28:18.362 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799431657197568 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 00:28:18.362 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799431657197568 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 00:28:18.362 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799431657197568 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 00:28:18.363 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799431657197568 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 00:28:18.363 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799431657197568 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 00:28:18.363 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799431657197568 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 00:28:18.363 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799431657197568 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 00:28:18.363 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799431657197568 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 00:28:18.363 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22799431657197568 [0;39m <==      Total: 15
2023-04-01 00:28:18.365 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22799431657197568 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 00:28:18.365 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22799431657197568 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-04-01 00:28:18.422 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22799431929827328 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:28:18.422 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22799431929827328 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-04-01 00:28:18.423 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22799431929827328 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-04-01 00:28:18.423 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22799431929827328 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:28:18.424 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22799431929827328 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-04-01 00:28:18.426 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22799431929827328 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-04-01 00:28:18.427 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22799431929827328 [0;39m ==> Parameters: 
2023-04-01 00:28:18.428 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22799431929827328 [0;39m <==    Columns: count(0)
2023-04-01 00:28:18.428 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22799431929827328 [0;39m <==        Row: 5
2023-04-01 00:28:18.428 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22799431929827328 [0;39m <==      Total: 1
2023-04-01 00:28:18.429 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22799431929827328 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-04-01 00:28:18.430 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22799431929827328 [0;39m ==> Parameters: 10(Integer)
2023-04-01 00:28:18.430 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22799431929827328 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-04-01 00:28:18.430 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22799431929827328 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 17, 8
2023-04-01 00:28:18.431 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22799431929827328 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, 100, 101, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:28:18.431 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22799431929827328 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, 300, 301, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:28:18.431 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22799431929827328 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, 400, 401, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:28:18.432 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22799431929827328 [0;39m <==        Row: 5, Oracle å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:28:18.433 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22799431929827328 [0;39m <==      Total: 5
2023-04-01 00:28:18.434 INFO  com.jiawa.wiki.service.EbookService               :48   [32m22799431929827328 [0;39m æ€»è¡Œæ•°ï¼š5
2023-04-01 00:28:18.434 INFO  com.jiawa.wiki.service.EbookService               :49   [32m22799431929827328 [0;39m æ€»é¡µæ•°ï¼š1
2023-04-01 00:28:18.435 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22799431929827328 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":17,"voteCount":8},{"category1Id":100,"category2Id":101,"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":300,"category2Id":301,"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":5,"name":"Oracle å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-04-01 00:28:18.435 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22799431929827328 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š13 ms -------------
2023-04-01 00:28:19.806 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22799437734744064 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:28:19.807 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22799437734744064 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 00:28:19.807 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22799437734744064 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 00:28:19.807 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22799437734744064 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:28:19.807 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22799437734744064 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 00:28:19.809 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22799437734744064 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 00:28:19.810 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22799437734744064 [0;39m ==> Parameters: 
2023-04-01 00:28:19.810 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799437734744064 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 00:28:19.810 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799437734744064 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 00:28:19.810 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799437734744064 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 00:28:19.811 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799437734744064 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 00:28:19.811 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799437734744064 [0;39m <==        Row: 200, 0, Java, 200
2023-04-01 00:28:19.811 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799437734744064 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 00:28:19.811 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799437734744064 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 00:28:19.811 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799437734744064 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 00:28:19.811 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799437734744064 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 00:28:19.812 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799437734744064 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 00:28:19.812 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799437734744064 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 00:28:19.812 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799437734744064 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 00:28:19.812 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799437734744064 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 00:28:19.812 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799437734744064 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 00:28:19.813 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799437734744064 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 00:28:19.813 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799437734744064 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 00:28:19.813 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22799437734744064 [0;39m <==      Total: 15
2023-04-01 00:28:19.814 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22799437734744064 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 00:28:19.814 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22799437734744064 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-04-01 00:28:20.276 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22799439706066944 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:28:20.276 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22799439706066944 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-04-01 00:28:20.277 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22799439706066944 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-04-01 00:28:20.277 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22799439710261248 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:28:20.277 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22799439706066944 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:28:20.277 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22799439710261248 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-04-01 00:28:20.277 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22799439706066944 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 00:28:20.277 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22799439710261248 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-04-01 00:28:20.277 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22799439710261248 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:28:20.277 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22799439710261248 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 00:28:20.277 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m22799439706066944 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-04-01 00:28:20.278 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m22799439710261248 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-04-01 00:28:20.278 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m22799439706066944 [0;39m ==> Parameters: 
2023-04-01 00:28:20.279 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m22799439710261248 [0;39m ==> Parameters: 
2023-04-01 00:28:20.280 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m22799439706066944 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-04-01 00:28:20.280 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22799439710261248 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-04-01 00:28:20.281 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m22799439706066944 [0;39m <==        Row: 2023-04-01, 17, 8, 17, 8
2023-04-01 00:28:20.281 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22799439710261248 [0;39m <==        Row: 2023-03-02, 0, 0
2023-04-01 00:28:20.281 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m22799439706066944 [0;39m <==      Total: 1
2023-04-01 00:28:20.281 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22799439710261248 [0;39m <==        Row: 2023-03-05, 8, 5
2023-04-01 00:28:20.281 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22799439710261248 [0;39m <==        Row: 2023-03-06, 1, 1
2023-04-01 00:28:20.281 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22799439706066944 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1680278400000,"viewCount":17,"viewIncrease":17,"voteCount":8,"voteIncrease":8}],"success":true}
2023-04-01 00:28:20.282 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22799439710261248 [0;39m <==        Row: 2023-03-18, 10, 7
2023-04-01 00:28:20.282 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22799439706066944 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-04-01 00:28:20.282 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22799439710261248 [0;39m <==        Row: 2023-03-23, 10, 7
2023-04-01 00:28:20.282 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22799439710261248 [0;39m <==        Row: 2023-03-25, 13, 7
2023-04-01 00:28:20.282 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22799439710261248 [0;39m <==        Row: 2023-03-26, 0, 0
2023-04-01 00:28:20.282 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22799439710261248 [0;39m <==        Row: 2023-03-27, 0, 0
2023-04-01 00:28:20.282 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m22799439710261248 [0;39m <==      Total: 8
2023-04-01 00:28:20.284 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22799439710261248 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1677945600000,"viewCount":0,"viewIncrease":8,"voteCount":0,"voteIncrease":5},{"date":1678032000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":1},{"date":1679068800000,"viewCount":0,"viewIncrease":10,"voteCount":0,"voteIncrease":7},{"date":1679500800000,"viewCount":0,"viewIncrease":10,"voteCount":0,"voteIncrease":7},{"date":1679673600000,"viewCount":0,"viewIncrease":13,"voteCount":0,"voteIncrease":7},{"date":1679760000000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1679846400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2023-04-01 00:28:20.284 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22799439710261248 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-04-01 00:28:20.286 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22799439748009984 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:28:20.287 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22799439748009984 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 00:28:20.287 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22799439748009984 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 00:28:20.287 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22799439748009984 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:28:20.287 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22799439748009984 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 00:28:20.287 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22799439748009984 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 00:28:20.288 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22799439748009984 [0;39m ==> Parameters: 
2023-04-01 00:28:20.289 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799439748009984 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 00:28:20.289 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799439748009984 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 00:28:20.289 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799439748009984 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 00:28:20.289 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799439748009984 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 00:28:20.289 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799439748009984 [0;39m <==        Row: 200, 0, Java, 200
2023-04-01 00:28:20.290 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799439748009984 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 00:28:20.290 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799439748009984 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 00:28:20.290 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799439748009984 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 00:28:20.290 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799439748009984 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 00:28:20.290 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799439748009984 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 00:28:20.291 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799439748009984 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 00:28:20.291 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799439748009984 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 00:28:20.291 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799439748009984 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 00:28:20.291 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799439748009984 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 00:28:20.291 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799439748009984 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 00:28:20.292 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799439748009984 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 00:28:20.292 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22799439748009984 [0;39m <==      Total: 15
2023-04-01 00:28:20.293 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22799439748009984 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 00:28:20.293 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22799439748009984 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-04-01 00:28:20.629 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:28:21.099 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:28:24.700 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:28:26.245 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22799464741867520 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:28:26.246 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22799464741867520 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-04-01 00:28:26.246 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22799464741867520 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-04-01 00:28:26.246 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22799464741867520 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:28:26.246 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22799464741867520 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":201,"page":1,"size":1000}]
2023-04-01 00:28:26.253 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22799464741867520 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-04-01 00:28:26.253 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22799464741867520 [0;39m ==> Parameters: 201(Long)
2023-04-01 00:28:26.254 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22799464741867520 [0;39m <==    Columns: count(0)
2023-04-01 00:28:26.254 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22799464741867520 [0;39m <==        Row: 0
2023-04-01 00:28:26.255 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22799464741867520 [0;39m <==      Total: 1
2023-04-01 00:28:26.255 INFO  com.jiawa.wiki.service.EbookService               :48   [32m22799464741867520 [0;39m æ€»è¡Œæ•°ï¼š0
2023-04-01 00:28:26.255 INFO  com.jiawa.wiki.service.EbookService               :49   [32m22799464741867520 [0;39m æ€»é¡µæ•°ï¼š0
2023-04-01 00:28:26.255 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22799464741867520 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-04-01 00:28:26.255 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22799464741867520 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š10 ms -------------
2023-04-01 00:28:27.090 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22799468286054400 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:28:27.091 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22799468286054400 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-04-01 00:28:27.091 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22799468286054400 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-04-01 00:28:27.091 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22799468286054400 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:28:27.092 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22799468286054400 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":100,"page":1,"size":1000}]
2023-04-01 00:28:27.093 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22799468286054400 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-04-01 00:28:27.094 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22799468286054400 [0;39m ==> Parameters: 100(Long)
2023-04-01 00:28:27.094 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22799468286054400 [0;39m <==    Columns: count(0)
2023-04-01 00:28:27.095 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22799468286054400 [0;39m <==        Row: 0
2023-04-01 00:28:27.095 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22799468286054400 [0;39m <==      Total: 1
2023-04-01 00:28:27.095 INFO  com.jiawa.wiki.service.EbookService               :48   [32m22799468286054400 [0;39m æ€»è¡Œæ•°ï¼š0
2023-04-01 00:28:27.095 INFO  com.jiawa.wiki.service.EbookService               :49   [32m22799468286054400 [0;39m æ€»é¡µæ•°ï¼š0
2023-04-01 00:28:27.096 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22799468286054400 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-04-01 00:28:27.096 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22799468286054400 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-04-01 00:28:27.807 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22799471293370368 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:28:27.807 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22799471293370368 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-04-01 00:28:27.808 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22799471293370368 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-04-01 00:28:27.808 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22799471293370368 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:28:27.808 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22799471293370368 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":202,"page":1,"size":1000}]
2023-04-01 00:28:27.810 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22799471293370368 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-04-01 00:28:27.810 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22799471293370368 [0;39m ==> Parameters: 202(Long)
2023-04-01 00:28:27.811 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22799471293370368 [0;39m <==    Columns: count(0)
2023-04-01 00:28:27.811 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22799471293370368 [0;39m <==        Row: 1
2023-04-01 00:28:27.812 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22799471293370368 [0;39m <==      Total: 1
2023-04-01 00:28:27.812 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22799471293370368 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-04-01 00:28:27.813 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22799471293370368 [0;39m ==> Parameters: 202(Long), 1000(Integer)
2023-04-01 00:28:27.813 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22799471293370368 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-04-01 00:28:27.813 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22799471293370368 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 17, 8
2023-04-01 00:28:27.814 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22799471293370368 [0;39m <==      Total: 1
2023-04-01 00:28:27.814 INFO  com.jiawa.wiki.service.EbookService               :48   [32m22799471293370368 [0;39m æ€»è¡Œæ•°ï¼š1
2023-04-01 00:28:27.814 INFO  com.jiawa.wiki.service.EbookService               :49   [32m22799471293370368 [0;39m æ€»é¡µæ•°ï¼š1
2023-04-01 00:28:27.814 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22799471293370368 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":17,"voteCount":8}],"total":1},"success":true}
2023-04-01 00:28:27.815 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22799471293370368 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-04-01 00:28:28.822 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:28:29.800 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22799479652618240 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:28:29.801 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22799479652618240 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/1 GET
2023-04-01 00:28:29.801 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22799479652618240 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-04-01 00:28:29.801 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22799479652618240 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:28:29.801 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22799479652618240 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-04-01 00:28:29.803 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m22799479652618240 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-04-01 00:28:29.803 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m22799479652618240 [0;39m ==> Parameters: 1(Long)
2023-04-01 00:28:29.804 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22799479652618240 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-04-01 00:28:29.804 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22799479652618240 [0;39m <==        Row: 1, 1, 0, æ–‡æ¡£1, 1, 9, 4
2023-04-01 00:28:29.805 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22799479652618240 [0;39m <==        Row: 2, 1, 1, æ–‡æ¡£1.1, 1, 3, 1
2023-04-01 00:28:29.805 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22799479652618240 [0;39m <==        Row: 4, 1, 3, æ–‡æ¡£2.1, 1, 2, 1
2023-04-01 00:28:29.805 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22799479652618240 [0;39m <==        Row: 6, 1, 5, æ–‡æ¡£2.2.1, 1, 1, 1
2023-04-01 00:28:29.806 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22799479652618240 [0;39m <==        Row: 3, 1, 0, æ–‡æ¡£2, 2, 1, 0
2023-04-01 00:28:29.806 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m22799479652618240 [0;39m <==        Row: 5, 1, 3, æ–‡æ¡£2.2, 2, 1, 1
2023-04-01 00:28:29.806 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m22799479652618240 [0;39m <==      Total: 6
2023-04-01 00:28:29.807 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22799479652618240 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":1,"id":1,"name":"æ–‡æ¡£1","parent":0,"sort":1,"viewCount":9,"voteCount":4},{"ebookId":1,"id":2,"name":"æ–‡æ¡£1.1","parent":1,"sort":1,"viewCount":3,"voteCount":1},{"ebookId":1,"id":4,"name":"æ–‡æ¡£2.1","parent":3,"sort":1,"viewCount":2,"voteCount":1},{"ebookId":1,"id":6,"name":"æ–‡æ¡£2.2.1","parent":5,"sort":1,"viewCount":1,"voteCount":1},{"ebookId":1,"id":3,"name":"æ–‡æ¡£2","parent":0,"sort":2,"viewCount":1,"voteCount":0},{"ebookId":1,"id":5,"name":"æ–‡æ¡£2.2","parent":3,"sort":2,"viewCount":1,"voteCount":1}],"success":true}
2023-04-01 00:28:29.807 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22799479652618240 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-04-01 00:28:29.823 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22799479749087232 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:28:29.823 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22799479749087232 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/1 GET
2023-04-01 00:28:29.823 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22799479749087232 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-04-01 00:28:29.824 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22799479749087232 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:28:29.824 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22799479749087232 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-04-01 00:28:29.824 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m22799479749087232 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-04-01 00:28:29.825 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m22799479749087232 [0;39m ==> Parameters: 1(Long)
2023-04-01 00:28:29.826 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m22799479749087232 [0;39m <==      Total: 0
2023-04-01 00:28:29.826 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m22799479749087232 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-04-01 00:28:29.826 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m22799479749087232 [0;39m ==> Parameters: 1(Long)
2023-04-01 00:28:29.834 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m22799479749087232 [0;39m <==    Updates: 1
2023-04-01 00:28:29.835 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22799479749087232 [0;39m è¿”å›žç»“æžœ: {"content":"","success":true}
2023-04-01 00:28:29.835 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22799479749087232 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š12 ms -------------
2023-04-01 00:28:31.740 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22799487789568000 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:28:31.740 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22799487789568000 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/2 GET
2023-04-01 00:28:31.740 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22799487789568000 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-04-01 00:28:31.740 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22799487789568000 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:28:31.740 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22799487789568000 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-04-01 00:28:31.741 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m22799487789568000 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-04-01 00:28:31.741 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m22799487789568000 [0;39m ==> Parameters: 2(Long)
2023-04-01 00:28:31.742 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m22799487789568000 [0;39m <==      Total: 0
2023-04-01 00:28:31.743 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m22799487789568000 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-04-01 00:28:31.743 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m22799487789568000 [0;39m ==> Parameters: 2(Long)
2023-04-01 00:28:31.751 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m22799487789568000 [0;39m <==    Updates: 1
2023-04-01 00:28:31.751 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22799487789568000 [0;39m è¿”å›žç»“æžœ: {"content":"","success":true}
2023-04-01 00:28:31.752 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22799487789568000 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š13 ms -------------
2023-04-01 00:28:32.529 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22799491098873856 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:28:32.529 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22799491098873856 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/3 GET
2023-04-01 00:28:32.529 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22799491098873856 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-04-01 00:28:32.529 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22799491098873856 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:28:32.530 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22799491098873856 [0;39m è¯·æ±‚å‚æ•°: [3]
2023-04-01 00:28:32.531 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m22799491098873856 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-04-01 00:28:32.532 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m22799491098873856 [0;39m ==> Parameters: 3(Long)
2023-04-01 00:28:32.533 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m22799491098873856 [0;39m <==      Total: 0
2023-04-01 00:28:32.533 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m22799491098873856 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-04-01 00:28:32.533 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m22799491098873856 [0;39m ==> Parameters: 3(Long)
2023-04-01 00:28:32.541 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m22799491098873856 [0;39m <==    Updates: 1
2023-04-01 00:28:32.542 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22799491098873856 [0;39m è¿”å›žç»“æžœ: {"content":"","success":true}
2023-04-01 00:28:32.542 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22799491098873856 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š13 ms -------------
2023-04-01 00:28:32.945 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22799492843704320 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:28:32.945 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22799492843704320 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/4 GET
2023-04-01 00:28:32.945 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22799492843704320 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-04-01 00:28:32.945 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22799492843704320 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:28:32.945 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22799492843704320 [0;39m è¯·æ±‚å‚æ•°: [4]
2023-04-01 00:28:32.947 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m22799492843704320 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-04-01 00:28:32.948 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m22799492843704320 [0;39m ==> Parameters: 4(Long)
2023-04-01 00:28:32.949 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m22799492843704320 [0;39m <==      Total: 0
2023-04-01 00:28:32.950 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m22799492843704320 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-04-01 00:28:32.950 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m22799492843704320 [0;39m ==> Parameters: 4(Long)
2023-04-01 00:28:32.957 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m22799492843704320 [0;39m <==    Updates: 1
2023-04-01 00:28:32.958 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22799492843704320 [0;39m è¿”å›žç»“æžœ: {"content":"","success":true}
2023-04-01 00:28:32.958 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22799492843704320 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š13 ms -------------
2023-04-01 00:28:33.251 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22799494127161344 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:28:33.251 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22799494127161344 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/5 GET
2023-04-01 00:28:33.252 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22799494127161344 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-04-01 00:28:33.253 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22799494127161344 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:28:33.253 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22799494127161344 [0;39m è¯·æ±‚å‚æ•°: [5]
2023-04-01 00:28:33.253 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m22799494127161344 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-04-01 00:28:33.254 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m22799494127161344 [0;39m ==> Parameters: 5(Long)
2023-04-01 00:28:33.254 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m22799494127161344 [0;39m <==      Total: 0
2023-04-01 00:28:33.255 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m22799494127161344 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-04-01 00:28:33.255 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m22799494127161344 [0;39m ==> Parameters: 5(Long)
2023-04-01 00:28:33.263 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m22799494127161344 [0;39m <==    Updates: 1
2023-04-01 00:28:33.263 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22799494127161344 [0;39m è¿”å›žç»“æžœ: {"content":"","success":true}
2023-04-01 00:28:33.263 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22799494127161344 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š12 ms -------------
2023-04-01 00:28:33.699 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22799496006209536 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:28:33.699 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22799496006209536 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/6 GET
2023-04-01 00:28:33.699 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22799496006209536 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-04-01 00:28:33.699 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22799496006209536 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:28:33.700 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22799496006209536 [0;39m è¯·æ±‚å‚æ•°: [6]
2023-04-01 00:28:33.700 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m22799496006209536 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-04-01 00:28:33.701 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m22799496006209536 [0;39m ==> Parameters: 6(Long)
2023-04-01 00:28:33.702 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m22799496006209536 [0;39m <==      Total: 0
2023-04-01 00:28:33.703 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m22799496006209536 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-04-01 00:28:33.704 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m22799496006209536 [0;39m ==> Parameters: 6(Long)
2023-04-01 00:28:33.707 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m22799496006209536 [0;39m <==    Updates: 1
2023-04-01 00:28:33.707 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22799496006209536 [0;39m è¿”å›žç»“æžœ: {"content":"","success":true}
2023-04-01 00:28:33.708 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22799496006209536 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2023-04-01 00:28:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22799501492359168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:28:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22799501492359168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:28:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22799501492359168 [0;39m ==> Parameters: 
2023-04-01 00:28:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22799501492359168 [0;39m <==    Updates: 1
2023-04-01 00:28:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22799501492359168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 00:28:35.866 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m22799479652618240 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-04-01 00:28:35.866 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m22799479652618240 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/list
2023-04-01 00:28:35.866 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m22799479652618240 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š22797905157033984
2023-04-01 00:28:35.866 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m22799479652618240 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"22797905157033984"}
2023-04-01 00:28:35.867 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22799505099460608 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:28:35.867 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22799505099460608 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/user/list GET
2023-04-01 00:28:35.868 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22799505099460608 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.UserController.list
2023-04-01 00:28:35.868 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22799505099460608 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:28:35.868 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22799505099460608 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-04-01 00:28:35.871 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m22799505099460608 [0;39m ==>  Preparing: SELECT count(0) FROM user
2023-04-01 00:28:35.871 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m22799505099460608 [0;39m ==> Parameters: 
2023-04-01 00:28:35.871 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m22799505099460608 [0;39m <==    Columns: count(0)
2023-04-01 00:28:35.872 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m22799505099460608 [0;39m <==        Row: 1
2023-04-01 00:28:35.872 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m22799505099460608 [0;39m <==      Total: 1
2023-04-01 00:28:35.872 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22799505099460608 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2023-04-01 00:28:35.873 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22799505099460608 [0;39m ==> Parameters: 10(Integer)
2023-04-01 00:28:35.873 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m22799505099460608 [0;39m <==    Columns: id, login_name, name, password
2023-04-01 00:28:35.873 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m22799505099460608 [0;39m <==        Row: 1, test, æµ‹è¯•, e70e2222a9d67c4f2eae107533359aa4
2023-04-01 00:28:35.873 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22799505099460608 [0;39m <==      Total: 1
2023-04-01 00:28:35.873 INFO  com.jiawa.wiki.service.UserService                :49   [32m22799505099460608 [0;39m æ€»è¡Œæ•°ï¼š1
2023-04-01 00:28:35.874 INFO  com.jiawa.wiki.service.UserService                :50   [32m22799505099460608 [0;39m æ€»é¡µæ•°ï¼š1
2023-04-01 00:28:35.874 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22799505099460608 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"id":1,"loginName":"test","name":"æµ‹è¯•"}],"total":1},"success":true}
2023-04-01 00:28:35.874 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22799505099460608 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-04-01 00:28:35.874 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m22799505099460608 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-04-01 00:28:36.498 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22799507746066432 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:28:36.499 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22799507746066432 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 00:28:36.499 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22799507746066432 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 00:28:36.500 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22799507746066432 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:28:36.500 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22799507746066432 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 00:28:36.501 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22799507746066432 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 00:28:36.501 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22799507746066432 [0;39m ==> Parameters: 
2023-04-01 00:28:36.502 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799507746066432 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 00:28:36.502 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799507746066432 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 00:28:36.502 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799507746066432 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 00:28:36.503 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799507746066432 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 00:28:36.503 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799507746066432 [0;39m <==        Row: 200, 0, Java, 200
2023-04-01 00:28:36.503 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799507746066432 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 00:28:36.503 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799507746066432 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 00:28:36.503 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799507746066432 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 00:28:36.504 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799507746066432 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 00:28:36.504 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799507746066432 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 00:28:36.504 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799507746066432 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 00:28:36.504 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799507746066432 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 00:28:36.504 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799507746066432 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 00:28:36.504 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799507746066432 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 00:28:36.505 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799507746066432 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 00:28:36.505 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799507746066432 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 00:28:36.505 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22799507746066432 [0;39m <==      Total: 15
2023-04-01 00:28:36.506 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22799507746066432 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 00:28:36.506 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22799507746066432 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-04-01 00:28:42.350 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m22799487789568000 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-04-01 00:28:42.350 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m22799487789568000 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/list
2023-04-01 00:28:42.350 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m22799487789568000 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š22797905157033984
2023-04-01 00:28:42.351 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m22799487789568000 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"22797905157033984"}
2023-04-01 00:28:42.352 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22799532299522048 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:28:42.352 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22799532299522048 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/user/list GET
2023-04-01 00:28:42.353 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22799532299522048 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.UserController.list
2023-04-01 00:28:42.353 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22799532299522048 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:28:42.353 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22799532299522048 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-04-01 00:28:42.355 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m22799532299522048 [0;39m ==>  Preparing: SELECT count(0) FROM user
2023-04-01 00:28:42.355 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m22799532299522048 [0;39m ==> Parameters: 
2023-04-01 00:28:42.356 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m22799532299522048 [0;39m <==    Columns: count(0)
2023-04-01 00:28:42.356 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m22799532299522048 [0;39m <==        Row: 1
2023-04-01 00:28:42.356 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m22799532299522048 [0;39m <==      Total: 1
2023-04-01 00:28:42.357 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22799532299522048 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2023-04-01 00:28:42.357 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22799532299522048 [0;39m ==> Parameters: 10(Integer)
2023-04-01 00:28:42.358 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m22799532299522048 [0;39m <==    Columns: id, login_name, name, password
2023-04-01 00:28:42.358 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m22799532299522048 [0;39m <==        Row: 1, test, æµ‹è¯•, e70e2222a9d67c4f2eae107533359aa4
2023-04-01 00:28:42.358 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22799532299522048 [0;39m <==      Total: 1
2023-04-01 00:28:42.359 INFO  com.jiawa.wiki.service.UserService                :49   [32m22799532299522048 [0;39m æ€»è¡Œæ•°ï¼š1
2023-04-01 00:28:42.359 INFO  com.jiawa.wiki.service.UserService                :50   [32m22799532299522048 [0;39m æ€»é¡µæ•°ï¼š1
2023-04-01 00:28:42.359 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22799532299522048 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"id":1,"loginName":"test","name":"æµ‹è¯•"}],"total":1},"success":true}
2023-04-01 00:28:42.359 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22799532299522048 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-04-01 00:28:42.360 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m22799532299522048 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š10 ms -------------
2023-04-01 00:28:42.734 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22799533901746176 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:28:42.734 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22799533901746176 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 00:28:42.735 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22799533901746176 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 00:28:42.735 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22799533901746176 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:28:42.735 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22799533901746176 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 00:28:42.736 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22799533901746176 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 00:28:42.736 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22799533901746176 [0;39m ==> Parameters: 
2023-04-01 00:28:42.737 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799533901746176 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 00:28:42.737 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799533901746176 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 00:28:42.737 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799533901746176 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 00:28:42.737 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799533901746176 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 00:28:42.737 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799533901746176 [0;39m <==        Row: 200, 0, Java, 200
2023-04-01 00:28:42.738 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799533901746176 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 00:28:42.738 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799533901746176 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 00:28:42.738 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799533901746176 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 00:28:42.738 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799533901746176 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 00:28:42.738 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799533901746176 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 00:28:42.739 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799533901746176 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 00:28:42.739 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799533901746176 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 00:28:42.739 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799533901746176 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 00:28:42.739 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799533901746176 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 00:28:42.739 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799533901746176 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 00:28:42.740 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22799533901746176 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 00:28:42.740 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22799533901746176 [0;39m <==      Total: 15
2023-04-01 00:28:42.741 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22799533901746176 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 00:28:42.741 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22799533901746176 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-04-01 00:28:42.799 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22799534174375936 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:28:42.799 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22799534174375936 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-04-01 00:28:42.800 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22799534174375936 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-04-01 00:28:42.800 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22799534174375936 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:28:42.800 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22799534174375936 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-04-01 00:28:42.801 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22799534174375936 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-04-01 00:28:42.801 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22799534174375936 [0;39m ==> Parameters: 
2023-04-01 00:28:42.803 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22799534174375936 [0;39m <==    Columns: count(0)
2023-04-01 00:28:42.803 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22799534174375936 [0;39m <==        Row: 5
2023-04-01 00:28:42.803 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22799534174375936 [0;39m <==      Total: 1
2023-04-01 00:28:42.803 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22799534174375936 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-04-01 00:28:42.804 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22799534174375936 [0;39m ==> Parameters: 10(Integer)
2023-04-01 00:28:42.804 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22799534174375936 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-04-01 00:28:42.804 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22799534174375936 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 23, 8
2023-04-01 00:28:42.805 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22799534174375936 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, 100, 101, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:28:42.805 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22799534174375936 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, 300, 301, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:28:42.805 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22799534174375936 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, 400, 401, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:28:42.806 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22799534174375936 [0;39m <==        Row: 5, Oracle å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:28:42.806 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22799534174375936 [0;39m <==      Total: 5
2023-04-01 00:28:42.806 INFO  com.jiawa.wiki.service.EbookService               :48   [32m22799534174375936 [0;39m æ€»è¡Œæ•°ï¼š5
2023-04-01 00:28:42.807 INFO  com.jiawa.wiki.service.EbookService               :49   [32m22799534174375936 [0;39m æ€»é¡µæ•°ï¼š1
2023-04-01 00:28:42.807 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22799534174375936 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":23,"voteCount":8},{"category1Id":100,"category2Id":101,"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":300,"category2Id":301,"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":5,"name":"Oracle å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-04-01 00:28:42.807 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22799534174375936 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-04-01 00:28:51.098 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:28:54.656 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:28:56.689 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:29:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22799606370930688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:29:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22799606370930688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:29:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22799606370930688 [0;39m ==> Parameters: 
2023-04-01 00:29:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22799606370930688 [0;39m <==    Updates: 0
2023-04-01 00:29:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22799606370930688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 00:29:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22799627329867776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:29:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22799627329867776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:29:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22799627329867776 [0;39m ==> Parameters: 
2023-04-01 00:29:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22799627329867776 [0;39m <==    Updates: 1
2023-04-01 00:29:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22799627329867776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 00:29:20.791 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:29:21.094 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:29:22.848 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:29:24.903 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:29:26.949 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:29:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22799753171570688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:29:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22799753171570688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:29:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22799753171570688 [0;39m ==> Parameters: 
2023-04-01 00:29:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22799753171570688 [0;39m <==    Updates: 1
2023-04-01 00:29:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22799753171570688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 00:29:42.844 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:29:44.895 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:29:50.771 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:29:51.087 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:29:52.822 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:29:54.874 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:30:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22799858004004864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:30:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22799858004004864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:30:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22799858004004864 [0;39m ==> Parameters: 
2023-04-01 00:30:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22799858004004864 [0;39m <==    Updates: 0
2023-04-01 00:30:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22799858004004864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 00:30:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22799878975524864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:30:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22799878975524864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:30:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22799878975524864 [0;39m ==> Parameters: 
2023-04-01 00:30:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22799878975524864 [0;39m <==    Updates: 1
2023-04-01 00:30:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22799878975524864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 00:30:09.002 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:30:21.086 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:30:24.721 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:30:33.135 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:30:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22800004838199296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:30:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22800004838199296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:30:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22800004838199296 [0;39m ==> Parameters: 
2023-04-01 00:30:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22800004838199296 [0;39m <==    Updates: 1
2023-04-01 00:30:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22800004838199296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 00:30:50.630 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:30:51.113 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:30:52.677 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:30:54.732 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:30:56.785 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:30:58.834 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:31:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22800109683216384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:31:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22800109683216384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:31:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22800109683216384 [0;39m ==> Parameters: 
2023-04-01 00:31:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22800109683216384 [0;39m <==    Updates: 0
2023-04-01 00:31:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22800109683216384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 00:31:01.616 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m22799468286054400 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-04-01 00:31:01.618 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m22799468286054400 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/list
2023-04-01 00:31:01.618 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m22799468286054400 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š22797905157033984
2023-04-01 00:31:01.619 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m22799468286054400 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"22797905157033984"}
2023-04-01 00:31:01.620 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22800116431851520 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:31:01.620 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22800116431851520 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/user/list GET
2023-04-01 00:31:01.621 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22800116431851520 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.UserController.list
2023-04-01 00:31:01.621 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22800116431851520 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:31:01.621 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22800116431851520 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-04-01 00:31:01.622 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m22800116431851520 [0;39m ==>  Preparing: SELECT count(0) FROM user
2023-04-01 00:31:01.622 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m22800116431851520 [0;39m ==> Parameters: 
2023-04-01 00:31:01.623 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m22800116431851520 [0;39m <==    Columns: count(0)
2023-04-01 00:31:01.623 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m22800116431851520 [0;39m <==        Row: 1
2023-04-01 00:31:01.623 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m22800116431851520 [0;39m <==      Total: 1
2023-04-01 00:31:01.623 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22800116431851520 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2023-04-01 00:31:01.623 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22800116431851520 [0;39m ==> Parameters: 10(Integer)
2023-04-01 00:31:01.623 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m22800116431851520 [0;39m <==    Columns: id, login_name, name, password
2023-04-01 00:31:01.623 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m22800116431851520 [0;39m <==        Row: 1, test, æµ‹è¯•, e70e2222a9d67c4f2eae107533359aa4
2023-04-01 00:31:01.625 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22800116431851520 [0;39m <==      Total: 1
2023-04-01 00:31:01.625 INFO  com.jiawa.wiki.service.UserService                :49   [32m22800116431851520 [0;39m æ€»è¡Œæ•°ï¼š1
2023-04-01 00:31:01.625 INFO  com.jiawa.wiki.service.UserService                :50   [32m22800116431851520 [0;39m æ€»é¡µæ•°ï¼š1
2023-04-01 00:31:01.626 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22800116431851520 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"id":1,"loginName":"test","name":"æµ‹è¯•"}],"total":1},"success":true}
2023-04-01 00:31:01.626 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22800116431851520 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-04-01 00:31:01.626 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m22800116431851520 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-04-01 00:31:02.979 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22800122131910656 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:31:02.980 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22800122131910656 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 00:31:02.980 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22800122131910656 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 00:31:02.980 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22800122131910656 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:31:02.981 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22800122131910656 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 00:31:02.982 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22800122131910656 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 00:31:02.982 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22800122131910656 [0;39m ==> Parameters: 
2023-04-01 00:31:02.982 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800122131910656 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 00:31:02.982 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800122131910656 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 00:31:02.983 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800122131910656 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 00:31:02.983 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800122131910656 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 00:31:02.983 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800122131910656 [0;39m <==        Row: 200, 0, Java, 200
2023-04-01 00:31:02.983 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800122131910656 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 00:31:02.983 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800122131910656 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 00:31:02.983 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800122131910656 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 00:31:02.984 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800122131910656 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 00:31:02.984 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800122131910656 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 00:31:02.984 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800122131910656 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 00:31:02.984 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800122131910656 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 00:31:02.984 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800122131910656 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 00:31:02.985 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800122131910656 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 00:31:02.985 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800122131910656 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 00:31:02.985 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800122131910656 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 00:31:02.985 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22800122131910656 [0;39m <==      Total: 15
2023-04-01 00:31:02.986 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22800122131910656 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 00:31:02.986 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22800122131910656 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-04-01 00:31:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22800130646347776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:31:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22800130646347776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:31:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22800130646347776 [0;39m ==> Parameters: 
2023-04-01 00:31:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22800130646347776 [0;39m <==    Updates: 1
2023-04-01 00:31:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22800130646347776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-04-01 00:31:09.766 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22800150598651904 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:31:09.766 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22800150598651904 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-04-01 00:31:09.766 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22800150598651905 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:31:09.766 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22800150598651904 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-04-01 00:31:09.768 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22800150598651905 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-04-01 00:31:09.768 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22800150598651904 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:31:09.768 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22800150598651905 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-04-01 00:31:09.768 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22800150598651904 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 00:31:09.769 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22800150598651905 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:31:09.769 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22800150598651905 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 00:31:09.769 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m22800150598651904 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-04-01 00:31:09.769 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m22800150598651905 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-04-01 00:31:09.769 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m22800150598651904 [0;39m ==> Parameters: 
2023-04-01 00:31:09.769 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m22800150598651905 [0;39m ==> Parameters: 
2023-04-01 00:31:09.770 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22800150615429120 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:31:09.770 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22800150615429120 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 00:31:09.770 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m22800150598651904 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-04-01 00:31:09.770 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22800150615429120 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 00:31:09.770 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m22800150598651904 [0;39m <==        Row: 2023-04-01, 23, 8, 23, 8
2023-04-01 00:31:09.770 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22800150615429120 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:31:09.771 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m22800150598651904 [0;39m <==      Total: 1
2023-04-01 00:31:09.771 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22800150615429120 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 00:31:09.771 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22800150598651904 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1680278400000,"viewCount":23,"viewIncrease":23,"voteCount":8,"voteIncrease":8}],"success":true}
2023-04-01 00:31:09.771 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22800150615429120 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 00:31:09.771 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22800150598651904 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-04-01 00:31:09.771 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22800150615429120 [0;39m ==> Parameters: 
2023-04-01 00:31:09.772 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800150615429120 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 00:31:09.772 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800150615429120 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 00:31:09.772 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800150615429120 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 00:31:09.772 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800150615429120 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 00:31:09.773 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800150615429120 [0;39m <==        Row: 200, 0, Java, 200
2023-04-01 00:31:09.773 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800150615429120 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 00:31:09.773 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800150615429120 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 00:31:09.773 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800150615429120 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 00:31:09.774 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800150615429120 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 00:31:09.774 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800150615429120 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 00:31:09.774 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800150615429120 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 00:31:09.774 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800150615429120 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 00:31:09.774 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800150615429120 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 00:31:09.775 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800150615429120 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 00:31:09.775 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800150615429120 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 00:31:09.775 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22800150615429120 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 00:31:09.775 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22800150615429120 [0;39m <==      Total: 15
2023-04-01 00:31:09.776 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22800150615429120 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 00:31:09.776 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22800150615429120 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-04-01 00:31:09.778 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22800150598651905 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-04-01 00:31:09.778 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22800150598651905 [0;39m <==        Row: 2023-03-02, 0, 0
2023-04-01 00:31:09.778 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22800150598651905 [0;39m <==        Row: 2023-03-05, 8, 5
2023-04-01 00:31:09.779 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22800150598651905 [0;39m <==        Row: 2023-03-06, 1, 1
2023-04-01 00:31:09.779 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22800150598651905 [0;39m <==        Row: 2023-03-18, 10, 7
2023-04-01 00:31:09.780 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22800150598651905 [0;39m <==        Row: 2023-03-23, 10, 7
2023-04-01 00:31:09.780 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22800150598651905 [0;39m <==        Row: 2023-03-25, 13, 7
2023-04-01 00:31:09.780 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22800150598651905 [0;39m <==        Row: 2023-03-26, 0, 0
2023-04-01 00:31:09.780 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22800150598651905 [0;39m <==        Row: 2023-03-27, 0, 0
2023-04-01 00:31:09.781 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m22800150598651905 [0;39m <==      Total: 8
2023-04-01 00:31:09.781 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22800150598651905 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1677945600000,"viewCount":0,"viewIncrease":8,"voteCount":0,"voteIncrease":5},{"date":1678032000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":1},{"date":1679068800000,"viewCount":0,"viewIncrease":10,"voteCount":0,"voteIncrease":7},{"date":1679500800000,"viewCount":0,"viewIncrease":10,"voteCount":0,"voteIncrease":7},{"date":1679673600000,"viewCount":0,"viewIncrease":13,"voteCount":0,"voteIncrease":7},{"date":1679760000000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1679846400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2023-04-01 00:31:09.781 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22800150598651905 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š15 ms -------------
2023-04-01 00:31:11.790 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22800159087923200 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:31:11.790 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22800159087923200 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-04-01 00:31:11.790 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22800159087923200 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-04-01 00:31:11.790 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22800159087923200 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:31:11.791 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22800159087923200 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":502,"page":1,"size":1000}]
2023-04-01 00:31:11.792 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22800159087923200 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-04-01 00:31:11.792 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22800159087923200 [0;39m ==> Parameters: 502(Long)
2023-04-01 00:31:11.793 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22800159087923200 [0;39m <==    Columns: count(0)
2023-04-01 00:31:11.793 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22800159087923200 [0;39m <==        Row: 0
2023-04-01 00:31:11.793 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22800159087923200 [0;39m <==      Total: 1
2023-04-01 00:31:11.793 INFO  com.jiawa.wiki.service.EbookService               :48   [32m22800159087923200 [0;39m æ€»è¡Œæ•°ï¼š0
2023-04-01 00:31:11.793 INFO  com.jiawa.wiki.service.EbookService               :49   [32m22800159087923200 [0;39m æ€»é¡µæ•°ï¼š0
2023-04-01 00:31:11.794 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22800159087923200 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-04-01 00:31:11.794 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22800159087923200 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-04-01 00:31:12.448 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22800161847775232 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:31:12.448 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22800161847775232 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-04-01 00:31:12.449 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22800161847775232 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-04-01 00:31:12.449 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22800161847775232 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:31:12.449 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22800161847775232 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":401,"page":1,"size":1000}]
2023-04-01 00:31:12.451 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22800161847775232 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-04-01 00:31:12.451 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22800161847775232 [0;39m ==> Parameters: 401(Long)
2023-04-01 00:31:12.452 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22800161847775232 [0;39m <==    Columns: count(0)
2023-04-01 00:31:12.452 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22800161847775232 [0;39m <==        Row: 1
2023-04-01 00:31:12.452 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22800161847775232 [0;39m <==      Total: 1
2023-04-01 00:31:12.453 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22800161847775232 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-04-01 00:31:12.453 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22800161847775232 [0;39m ==> Parameters: 401(Long), 1000(Integer)
2023-04-01 00:31:12.454 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22800161847775232 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-04-01 00:31:12.454 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22800161847775232 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, 400, 401, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:31:12.454 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22800161847775232 [0;39m <==      Total: 1
2023-04-01 00:31:12.455 INFO  com.jiawa.wiki.service.EbookService               :48   [32m22800161847775232 [0;39m æ€»è¡Œæ•°ï¼š1
2023-04-01 00:31:12.455 INFO  com.jiawa.wiki.service.EbookService               :49   [32m22800161847775232 [0;39m æ€»é¡µæ•°ï¼š1
2023-04-01 00:31:12.456 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22800161847775232 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":400,"category2Id":401,"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":1},"success":true}
2023-04-01 00:31:12.456 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22800161847775232 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-04-01 00:31:13.133 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22800164720873472 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:31:13.133 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22800164720873472 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-04-01 00:31:13.133 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22800164720873472 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-04-01 00:31:13.134 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22800164720873472 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:31:13.135 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22800164720873472 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":302,"page":1,"size":1000}]
2023-04-01 00:31:13.137 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22800164720873472 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-04-01 00:31:13.137 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22800164720873472 [0;39m ==> Parameters: 302(Long)
2023-04-01 00:31:13.138 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22800164720873472 [0;39m <==    Columns: count(0)
2023-04-01 00:31:13.138 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22800164720873472 [0;39m <==        Row: 0
2023-04-01 00:31:13.138 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22800164720873472 [0;39m <==      Total: 1
2023-04-01 00:31:13.139 INFO  com.jiawa.wiki.service.EbookService               :48   [32m22800164720873472 [0;39m æ€»è¡Œæ•°ï¼š0
2023-04-01 00:31:13.139 INFO  com.jiawa.wiki.service.EbookService               :49   [32m22800164720873472 [0;39m æ€»é¡µæ•°ï¼š0
2023-04-01 00:31:13.139 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22800164720873472 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-04-01 00:31:13.139 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22800164720873472 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-04-01 00:31:13.528 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22800166377623552 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:31:13.528 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22800166377623552 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-04-01 00:31:13.528 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22800166377623552 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-04-01 00:31:13.529 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22800166377623552 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:31:13.530 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22800166377623552 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":301,"page":1,"size":1000}]
2023-04-01 00:31:13.532 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22800166377623552 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-04-01 00:31:13.532 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22800166377623552 [0;39m ==> Parameters: 301(Long)
2023-04-01 00:31:13.533 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22800166377623552 [0;39m <==    Columns: count(0)
2023-04-01 00:31:13.533 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22800166377623552 [0;39m <==        Row: 1
2023-04-01 00:31:13.533 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22800166377623552 [0;39m <==      Total: 1
2023-04-01 00:31:13.534 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22800166377623552 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-04-01 00:31:13.534 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22800166377623552 [0;39m ==> Parameters: 301(Long), 1000(Integer)
2023-04-01 00:31:13.534 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22800166377623552 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-04-01 00:31:13.534 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22800166377623552 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, 300, 301, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-04-01 00:31:13.535 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22800166377623552 [0;39m <==      Total: 1
2023-04-01 00:31:13.535 INFO  com.jiawa.wiki.service.EbookService               :48   [32m22800166377623552 [0;39m æ€»è¡Œæ•°ï¼š1
2023-04-01 00:31:13.535 INFO  com.jiawa.wiki.service.EbookService               :49   [32m22800166377623552 [0;39m æ€»é¡µæ•°ï¼š1
2023-04-01 00:31:13.535 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22800166377623552 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":300,"category2Id":301,"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":1},"success":true}
2023-04-01 00:31:13.536 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22800166377623552 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-04-01 00:31:14.887 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22800172077682688 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 00:31:14.888 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22800172077682688 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-04-01 00:31:14.888 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22800172077682688 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-04-01 00:31:14.888 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22800172077682688 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 00:31:14.888 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22800172077682688 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":202,"page":1,"size":1000}]
2023-04-01 00:31:14.889 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22800172077682688 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-04-01 00:31:14.890 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22800172077682688 [0;39m ==> Parameters: 202(Long)
2023-04-01 00:31:14.891 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22800172077682688 [0;39m <==    Columns: count(0)
2023-04-01 00:31:14.891 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m22800172077682688 [0;39m <==        Row: 1
2023-04-01 00:31:14.891 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m22800172077682688 [0;39m <==      Total: 1
2023-04-01 00:31:14.892 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22800172077682688 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-04-01 00:31:14.892 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22800172077682688 [0;39m ==> Parameters: 202(Long), 1000(Integer)
2023-04-01 00:31:14.892 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22800172077682688 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-04-01 00:31:14.893 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m22800172077682688 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 23, 8
2023-04-01 00:31:14.893 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m22800172077682688 [0;39m <==      Total: 1
2023-04-01 00:31:14.893 INFO  com.jiawa.wiki.service.EbookService               :48   [32m22800172077682688 [0;39m æ€»è¡Œæ•°ï¼š1
2023-04-01 00:31:14.893 INFO  com.jiawa.wiki.service.EbookService               :49   [32m22800172077682688 [0;39m æ€»é¡µæ•°ï¼š1
2023-04-01 00:31:14.894 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22800172077682688 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":23,"voteCount":8}],"total":1},"success":true}
2023-04-01 00:31:14.894 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22800172077682688 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-04-01 00:31:20.616 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:31:21.087 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:31:22.666 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:31:24.690 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:31:26.728 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:31:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22800256446107648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:31:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22800256446107648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:31:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22800256446107648 [0;39m ==> Parameters: 
2023-04-01 00:31:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22800256446107648 [0;39m <==    Updates: 1
2023-04-01 00:31:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22800256446107648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 00:31:50.849 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:31:51.515 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:31:52.900 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:31:54.950 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:31:57.003 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:32:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22800361320484864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:32:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22800361320484864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:32:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22800361320484864 [0;39m ==> Parameters: 
2023-04-01 00:32:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22800361320484864 [0;39m <==    Updates: 0
2023-04-01 00:32:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22800361320484864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 00:32:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22800382329753600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:32:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22800382329753600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:32:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22800382329753600 [0;39m ==> Parameters: 
2023-04-01 00:32:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22800382329753600 [0;39m <==    Updates: 1
2023-04-01 00:32:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22800382329753600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-04-01 00:32:14.963 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:32:20.683 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:32:21.104 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:32:22.704 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:32:24.737 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:32:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22800508133707776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:32:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22800508133707776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:32:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22800508133707776 [0;39m ==> Parameters: 
2023-04-01 00:32:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22800508133707776 [0;39m <==    Updates: 1
2023-04-01 00:32:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22800508133707776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 00:32:37.519 INFO  com.jiawa.wiki.websocket.WebSocketServer          :41   [32m22800150615429120 [0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šhBr6KXnv1Iï¼Œsession idï¼š0ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2023-04-01 00:32:39.600 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:32:53.809 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:32:55.935 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:33:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22800612974530560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:33:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22800612974530560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:33:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22800612974530560 [0;39m ==> Parameters: 
2023-04-01 00:33:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22800612974530560 [0;39m <==    Updates: 0
2023-04-01 00:33:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22800612974530560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 00:33:01.731 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:33:04.037 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:33:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22800633987993600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:33:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22800633987993600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:33:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22800633987993600 [0;39m ==> Parameters: 
2023-04-01 00:33:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22800633987993600 [0;39m <==    Updates: 1
2023-04-01 00:33:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22800633987993600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 00:33:20.616 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:33:21.098 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:33:22.652 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:33:24.700 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:33:26.738 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:33:28.774 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:33:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22800759758393344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:33:35.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22800759758393344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:33:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22800759758393344 [0;39m ==> Parameters: 
2023-04-01 00:33:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22800759758393344 [0;39m <==    Updates: 1
2023-04-01 00:33:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22800759758393344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 00:33:51.097 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:33:52.682 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:33:54.734 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:33:56.860 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:34:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22800864620187648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:34:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22800864620187648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:34:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22800864620187648 [0;39m ==> Parameters: 
2023-04-01 00:34:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22800864620187648 [0;39m <==    Updates: 0
2023-04-01 00:34:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22800864620187648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-04-01 00:34:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22800885595901952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:34:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22800885595901952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:34:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22800885595901952 [0;39m ==> Parameters: 
2023-04-01 00:34:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22800885595901952 [0;39m <==    Updates: 1
2023-04-01 00:34:05.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22800885595901952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 00:34:19.328 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:34:21.361 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:34:26.320 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:34:35.000 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22801011412439040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:34:35.000 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22801011412439040 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:34:35.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22801011412439040 [0;39m ==> Parameters: 
2023-04-01 00:34:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22801011412439040 [0;39m <==    Updates: 1
2023-04-01 00:34:35.002 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22801011412439040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 00:34:48.913 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:34:51.428 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:34:55.962 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:35:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22801116328759296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:35:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22801116328759296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:35:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22801116328759296 [0;39m ==> Parameters: 
2023-04-01 00:35:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22801116328759296 [0;39m <==    Updates: 0
2023-04-01 00:35:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22801116328759296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-04-01 00:35:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22801137262530560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:35:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22801137262530560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:35:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22801137262530560 [0;39m ==> Parameters: 
2023-04-01 00:35:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22801137262530560 [0;39m <==    Updates: 1
2023-04-01 00:35:05.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22801137262530560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 00:35:11.568 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:35:13.941 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:35:21.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:35:26.272 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:35:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22801263095844864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:35:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22801263095844864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:35:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22801263095844864 [0;39m ==> Parameters: 
2023-04-01 00:35:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22801263095844864 [0;39m <==    Updates: 1
2023-04-01 00:35:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22801263095844864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 00:35:38.864 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:35:51.631 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:35:56.251 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:36:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22801367978610688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:36:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22801367978610688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:36:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22801367978610688 [0;39m ==> Parameters: 
2023-04-01 00:36:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22801367978610688 [0;39m <==    Updates: 0
2023-04-01 00:36:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22801367978610688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 00:36:01.631 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:36:04.431 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:36:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22801388937547776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:36:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22801388937547776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:36:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22801388937547776 [0;39m ==> Parameters: 
2023-04-01 00:36:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22801388937547776 [0;39m <==    Updates: 1
2023-04-01 00:36:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22801388937547776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 00:36:21.553 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:36:26.122 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:36:31.070 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:36:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22801514775056384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:36:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22801514775056384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:36:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22801514775056384 [0;39m ==> Parameters: 
2023-04-01 00:36:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22801514775056384 [0;39m <==    Updates: 1
2023-04-01 00:36:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22801514775056384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 00:36:51.773 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:36:56.171 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:36:58.626 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:37:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22801619628462080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:37:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22801619628462080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:37:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22801619628462080 [0;39m ==> Parameters: 
2023-04-01 00:37:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22801619628462080 [0;39m <==    Updates: 0
2023-04-01 00:37:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22801619628462080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š15æ¯«ç§’
2023-04-01 00:37:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22801640620953600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:37:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22801640620953600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:37:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22801640620953600 [0;39m ==> Parameters: 
2023-04-01 00:37:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22801640620953600 [0;39m <==    Updates: 1
2023-04-01 00:37:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22801640620953600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 00:37:21.568 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:37:26.316 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:37:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22801766437490688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:37:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22801766437490688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:37:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22801766437490688 [0;39m ==> Parameters: 
2023-04-01 00:37:35.028 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22801766437490688 [0;39m <==    Updates: 1
2023-04-01 00:37:35.029 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22801766437490688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š16æ¯«ç§’
2023-04-01 00:37:50.924 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:37:51.624 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:37:58.859 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:38:00.703 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22801874193354752 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:38:00.707 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22801874193354752 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:38:00.708 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22801874193354752 [0;39m ==> Parameters: 
2023-04-01 00:38:00.713 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22801874193354752 [0;39m <==    Updates: 0
2023-04-01 00:38:00.714 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22801874193354752 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 00:38:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22801892249833472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:38:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22801892249833472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:38:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22801892249833472 [0;39m ==> Parameters: 
2023-04-01 00:38:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22801892249833472 [0;39m <==    Updates: 1
2023-04-01 00:38:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22801892249833472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 00:38:16.438 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:38:21.284 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:38:26.585 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:38:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22802018070564864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:38:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22802018070564864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:38:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22802018070564864 [0;39m ==> Parameters: 
2023-04-01 00:38:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22802018070564864 [0;39m <==    Updates: 1
2023-04-01 00:38:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22802018070564864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-04-01 00:38:41.367 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:38:51.619 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:38:56.366 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:39:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22802122978496512 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:39:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22802122978496512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:39:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22802122978496512 [0;39m ==> Parameters: 
2023-04-01 00:39:00.031 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22802122978496512 [0;39m <==    Updates: 0
2023-04-01 00:39:00.032 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22802122978496512 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š14æ¯«ç§’
2023-04-01 00:39:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22802143924850688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:39:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22802143924850688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:39:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22802143924850688 [0;39m ==> Parameters: 
2023-04-01 00:39:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22802143924850688 [0;39m <==    Updates: 1
2023-04-01 00:39:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22802143924850688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 00:39:06.424 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:39:21.727 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:39:26.233 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:39:31.969 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:39:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22802269749776384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:39:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22802269749776384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:39:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22802269749776384 [0;39m ==> Parameters: 
2023-04-01 00:39:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22802269749776384 [0;39m <==    Updates: 1
2023-04-01 00:39:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22802269749776384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-04-01 00:39:51.746 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:39:59.456 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:40:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22802374632542208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:40:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22802374632542208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:40:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22802374632542208 [0;39m ==> Parameters: 
2023-04-01 00:40:00.027 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22802374632542208 [0;39m <==    Updates: 0
2023-04-01 00:40:00.029 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22802374632542208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 00:40:05.017 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22802395604062208 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:40:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22802395604062208 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:40:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22802395604062208 [0;39m ==> Parameters: 
2023-04-01 00:40:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22802395604062208 [0;39m <==    Updates: 1
2023-04-01 00:40:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22802395604062208 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 00:40:21.725 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:40:29.185 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:40:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22802521399627776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:40:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22802521399627776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:40:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22802521399627776 [0;39m ==> Parameters: 
2023-04-01 00:40:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22802521399627776 [0;39m <==    Updates: 1
2023-04-01 00:40:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22802521399627776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 00:40:51.469 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:40:56.830 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:41:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22802626282393600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:41:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22802626282393600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:41:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22802626282393600 [0;39m ==> Parameters: 
2023-04-01 00:41:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22802626282393600 [0;39m <==    Updates: 0
2023-04-01 00:41:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22802626282393600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 00:41:05.899 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22802650961678336 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:41:05.902 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22802650961678336 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:41:05.903 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22802650961678336 [0;39m ==> Parameters: 
2023-04-01 00:41:05.911 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22802650961678336 [0;39m <==    Updates: 1
2023-04-01 00:41:05.911 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22802650961678336 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 00:41:17.434 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:41:21.663 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:41:26.050 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:41:35.098 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22802773431160832 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:41:35.098 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22802773431160832 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:41:35.102 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22802773431160832 [0;39m ==> Parameters: 
2023-04-01 00:41:35.105 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22802773431160832 [0;39m <==    Updates: 1
2023-04-01 00:41:35.106 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22802773431160832 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 00:41:42.626 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:41:51.625 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:41:56.759 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:42:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22802877898690560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:42:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22802877898690560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:42:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22802877898690560 [0;39m ==> Parameters: 
2023-04-01 00:42:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22802877898690560 [0;39m <==    Updates: 0
2023-04-01 00:42:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22802877898690560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 00:42:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22802898907959296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:42:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22802898907959296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:42:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22802898907959296 [0;39m ==> Parameters: 
2023-04-01 00:42:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22802898907959296 [0;39m <==    Updates: 1
2023-04-01 00:42:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22802898907959296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-04-01 00:42:07.845 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:42:21.685 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:42:26.894 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:42:32.965 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:42:35.191 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22803025479471104 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:42:35.192 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22803025479471104 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:42:35.193 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22803025479471104 [0;39m ==> Parameters: 
2023-04-01 00:42:35.198 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22803025479471104 [0;39m <==    Updates: 1
2023-04-01 00:42:35.198 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22803025479471104 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-04-01 00:42:51.671 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:42:58.826 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:43:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22803129577902080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:43:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22803129577902080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:43:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22803129577902080 [0;39m ==> Parameters: 
2023-04-01 00:43:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22803129577902080 [0;39m <==    Updates: 0
2023-04-01 00:43:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22803129577902080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 00:43:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22803150549422080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:43:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22803150549422080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:43:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22803150549422080 [0;39m ==> Parameters: 
2023-04-01 00:43:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22803150549422080 [0;39m <==    Updates: 1
2023-04-01 00:43:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22803150549422080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 00:43:21.648 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:43:26.233 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:43:35.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22803276403707904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:43:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22803276403707904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:43:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22803276403707904 [0;39m ==> Parameters: 
2023-04-01 00:43:35.044 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22803276403707904 [0;39m <==    Updates: 1
2023-04-01 00:43:35.044 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22803276403707904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š27æ¯«ç§’
2023-04-01 00:43:51.738 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:43:57.260 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:44:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22803381210976256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:44:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22803381210976256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:44:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22803381210976256 [0;39m ==> Parameters: 
2023-04-01 00:44:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22803381210976256 [0;39m <==    Updates: 0
2023-04-01 00:44:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22803381210976256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š16æ¯«ç§’
2023-04-01 00:44:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22803402195079168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:44:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22803402195079168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:44:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22803402195079168 [0;39m ==> Parameters: 
2023-04-01 00:44:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22803402195079168 [0;39m <==    Updates: 1
2023-04-01 00:44:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22803402195079168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 00:44:15.533 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:44:21.036 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:44:21.830 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:44:26.176 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:44:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22803528045170688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:44:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22803528045170688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:44:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22803528045170688 [0;39m ==> Parameters: 
2023-04-01 00:44:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22803528045170688 [0;39m <==    Updates: 1
2023-04-01 00:44:35.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22803528045170688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 00:44:40.757 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:44:51.523 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:44:56.535 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:45:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22803632906964992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:45:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22803632906964992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:45:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22803632906964992 [0;39m ==> Parameters: 
2023-04-01 00:45:00.027 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22803632906964992 [0;39m <==    Updates: 0
2023-04-01 00:45:00.029 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22803632906964992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š15æ¯«ç§’
2023-04-01 00:45:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22803653878484992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:45:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22803653878484992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:45:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22803653878484992 [0;39m ==> Parameters: 
2023-04-01 00:45:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22803653878484992 [0;39m <==    Updates: 1
2023-04-01 00:45:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22803653878484992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 00:45:06.127 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:45:21.270 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:45:31.124 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:45:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22803779699216384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:45:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22803779699216384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:45:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22803779699216384 [0;39m ==> Parameters: 
2023-04-01 00:45:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22803779699216384 [0;39m <==    Updates: 1
2023-04-01 00:45:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22803779699216384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 00:45:51.672 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:45:59.067 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:46:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22803884569399296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:46:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22803884569399296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:46:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22803884569399296 [0;39m ==> Parameters: 
2023-04-01 00:46:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22803884569399296 [0;39m <==    Updates: 0
2023-04-01 00:46:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22803884569399296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 00:46:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22803905507364864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:46:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22803905507364864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:46:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22803905507364864 [0;39m ==> Parameters: 
2023-04-01 00:46:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22803905507364864 [0;39m <==    Updates: 1
2023-04-01 00:46:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22803905507364864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 00:46:21.533 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:46:26.156 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:46:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22804031328096256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:46:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22804031328096256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:46:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22804031328096256 [0;39m ==> Parameters: 
2023-04-01 00:46:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22804031328096256 [0;39m <==    Updates: 1
2023-04-01 00:46:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22804031328096256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 00:46:51.323 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:46:58.038 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:47:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22804136215056384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:47:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22804136215056384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:47:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22804136215056384 [0;39m ==> Parameters: 
2023-04-01 00:47:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22804136215056384 [0;39m <==    Updates: 0
2023-04-01 00:47:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22804136215056384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 00:47:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22804157207547904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:47:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22804157207547904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:47:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22804157207547904 [0;39m ==> Parameters: 
2023-04-01 00:47:05.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22804157207547904 [0;39m <==    Updates: 1
2023-04-01 00:47:05.025 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22804157207547904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 00:47:15.433 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:47:21.432 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:47:26.109 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:47:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22804282982141952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:47:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22804282982141952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:47:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22804282982141952 [0;39m ==> Parameters: 
2023-04-01 00:47:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22804282982141952 [0;39m <==    Updates: 1
2023-04-01 00:47:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22804282982141952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 00:47:40.559 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:47:51.556 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:47:56.231 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:48:00.142 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22804388414361600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:48:00.195 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22804388414361600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:48:00.201 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22804388414361600 [0;39m ==> Parameters: 
2023-04-01 00:48:00.204 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22804388414361600 [0;39m <==    Updates: 0
2023-04-01 00:48:00.204 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22804388414361600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š15æ¯«ç§’
2023-04-01 00:48:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22804408853204992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:48:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22804408853204992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:48:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22804408853204992 [0;39m ==> Parameters: 
2023-04-01 00:48:05.145 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22804408853204992 [0;39m <==    Updates: 1
2023-04-01 00:48:05.145 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22804408853204992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š131æ¯«ç§’
2023-04-01 00:48:05.447 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:48:21.634 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:48:31.833 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:48:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22804534669742080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:48:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22804534669742080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:48:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22804534669742080 [0;39m ==> Parameters: 
2023-04-01 00:48:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22804534669742080 [0;39m <==    Updates: 1
2023-04-01 00:48:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22804534669742080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 00:48:51.838 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:48:59.151 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:49:00.046 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22804639678337024 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:49:00.046 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22804639678337024 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:49:00.047 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22804639678337024 [0;39m ==> Parameters: 
2023-04-01 00:49:00.985 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22804639678337024 [0;39m <==    Updates: 0
2023-04-01 00:49:00.986 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22804639678337024 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š940æ¯«ç§’
2023-04-01 00:49:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22804660511444992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:49:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22804660511444992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:49:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22804660511444992 [0;39m ==> Parameters: 
2023-04-01 00:49:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22804660511444992 [0;39m <==    Updates: 1
2023-04-01 00:49:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22804660511444992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 00:49:21.369 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:49:26.159 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:49:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22804786311204864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:49:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22804786311204864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:49:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22804786311204864 [0;39m ==> Parameters: 
2023-04-01 00:49:35.108 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22804786311204864 [0;39m <==    Updates: 1
2023-04-01 00:49:35.109 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22804786311204864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š102æ¯«ç§’
2023-04-01 00:49:51.677 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:49:58.038 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:50:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22804891185582080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:50:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22804891185582080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:50:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22804891185582080 [0;39m ==> Parameters: 
2023-04-01 00:50:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22804891185582080 [0;39m <==    Updates: 0
2023-04-01 00:50:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22804891185582080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 00:50:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22804912123547648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:50:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22804912123547648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:50:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22804912123547648 [0;39m ==> Parameters: 
2023-04-01 00:50:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22804912123547648 [0;39m <==    Updates: 1
2023-04-01 00:50:05.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22804912123547648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 00:50:15.919 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:50:21.753 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:50:26.722 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:50:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22805037973639168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:50:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22805037973639168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:50:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22805037973639168 [0;39m ==> Parameters: 
2023-04-01 00:50:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22805037973639168 [0;39m <==    Updates: 1
2023-04-01 00:50:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22805037973639168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 00:50:40.948 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:50:51.731 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:50:56.268 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:51:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22805142806073344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:51:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22805142806073344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:51:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22805142806073344 [0;39m ==> Parameters: 
2023-04-01 00:51:00.032 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22805142806073344 [0;39m <==    Updates: 0
2023-04-01 00:51:00.033 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22805142806073344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š32æ¯«ç§’
2023-04-01 00:51:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22805163811147776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:51:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22805163811147776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:51:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22805163811147776 [0;39m ==> Parameters: 
2023-04-01 00:51:05.040 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22805163811147776 [0;39m <==    Updates: 1
2023-04-01 00:51:05.043 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22805163811147776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š33æ¯«ç§’
2023-04-01 00:51:06.337 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:51:21.652 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:51:26.126 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:51:31.522 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:51:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22805289615101952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:51:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22805289615101952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:51:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22805289615101952 [0;39m ==> Parameters: 
2023-04-01 00:51:35.072 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22805289615101952 [0;39m <==    Updates: 1
2023-04-01 00:51:35.072 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22805289615101952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š69æ¯«ç§’
2023-04-01 00:51:51.746 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:51:59.395 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:52:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22805394464313344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:52:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22805394464313344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:52:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22805394464313344 [0;39m ==> Parameters: 
2023-04-01 00:52:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22805394464313344 [0;39m <==    Updates: 0
2023-04-01 00:52:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22805394464313344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 00:52:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22805415460999168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:52:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22805415460999168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:52:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22805415460999168 [0;39m ==> Parameters: 
2023-04-01 00:52:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22805415460999168 [0;39m <==    Updates: 1
2023-04-01 00:52:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22805415460999168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 00:52:21.450 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:52:26.140 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:52:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22805541281730560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:52:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22805541281730560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:52:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22805541281730560 [0;39m ==> Parameters: 
2023-04-01 00:52:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22805541281730560 [0;39m <==    Updates: 1
2023-04-01 00:52:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22805541281730560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 00:52:51.775 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:52:57.966 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:53:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22805646130941952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:53:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22805646130941952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:53:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22805646130941952 [0;39m ==> Parameters: 
2023-04-01 00:53:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22805646130941952 [0;39m <==    Updates: 0
2023-04-01 00:53:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22805646130941952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 00:53:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22805667136016384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:53:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22805667136016384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:53:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22805667136016384 [0;39m ==> Parameters: 
2023-04-01 00:53:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22805667136016384 [0;39m <==    Updates: 1
2023-04-01 00:53:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22805667136016384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 00:53:15.467 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:53:21.656 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:53:26.131 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:53:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22805792948359168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:53:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22805792948359168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:53:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22805792948359168 [0;39m ==> Parameters: 
2023-04-01 00:53:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22805792948359168 [0;39m <==    Updates: 1
2023-04-01 00:53:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22805792948359168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 00:53:40.436 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:53:51.639 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:53:56.055 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:54:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22805897877262336 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:54:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22805897877262336 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:54:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22805897877262336 [0;39m ==> Parameters: 
2023-04-01 00:54:00.031 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22805897877262336 [0;39m <==    Updates: 0
2023-04-01 00:54:00.031 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22805897877262336 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 00:54:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22805918764896256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:54:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22805918764896256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:54:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22805918764896256 [0;39m ==> Parameters: 
2023-04-01 00:54:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22805918764896256 [0;39m <==    Updates: 1
2023-04-01 00:54:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22805918764896256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 00:54:05.424 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:54:21.740 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:54:26.664 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:54:29.176 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:54:31.533 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:54:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22806044640153600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:54:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22806044640153600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:54:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22806044640153600 [0;39m ==> Parameters: 
2023-04-01 00:54:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22806044640153600 [0;39m <==    Updates: 1
2023-04-01 00:54:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22806044640153600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 00:54:51.471 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:54:58.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:55:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22806149447421952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:55:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22806149447421952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:55:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22806149447421952 [0;39m ==> Parameters: 
2023-04-01 00:55:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22806149447421952 [0;39m <==    Updates: 0
2023-04-01 00:55:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22806149447421952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š21æ¯«ç§’
2023-04-01 00:55:05.055 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22806170632851456 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:55:05.055 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22806170632851456 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:55:05.056 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22806170632851456 [0;39m ==> Parameters: 
2023-04-01 00:55:05.062 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22806170632851456 [0;39m <==    Updates: 1
2023-04-01 00:55:05.063 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22806170632851456 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 00:55:21.509 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:55:26.065 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:55:28.434 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:55:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22806296294199296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:55:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22806296294199296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:55:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22806296294199296 [0;39m ==> Parameters: 
2023-04-01 00:55:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22806296294199296 [0;39m <==    Updates: 1
2023-04-01 00:55:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22806296294199296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 00:55:51.126 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:55:51.354 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:55:53.467 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:55:58.833 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:56:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22806401139216384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:56:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22806401139216384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:56:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22806401139216384 [0;39m ==> Parameters: 
2023-04-01 00:56:00.029 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22806401139216384 [0;39m <==    Updates: 0
2023-04-01 00:56:00.030 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22806401139216384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š17æ¯«ç§’
2023-04-01 00:56:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22806422114930688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:56:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22806422114930688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:56:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22806422114930688 [0;39m ==> Parameters: 
2023-04-01 00:56:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22806422114930688 [0;39m <==    Updates: 1
2023-04-01 00:56:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22806422114930688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 00:56:16.278 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:56:21.745 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:56:26.465 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:56:35.027 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22806548006965248 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:56:35.027 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22806548006965248 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:56:35.028 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22806548006965248 [0;39m ==> Parameters: 
2023-04-01 00:56:35.032 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22806548006965248 [0;39m <==    Updates: 1
2023-04-01 00:56:35.032 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22806548006965248 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 00:56:41.624 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:56:51.528 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:56:56.049 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:57:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22806652789067776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:57:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22806652789067776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:57:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22806652789067776 [0;39m ==> Parameters: 
2023-04-01 00:57:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22806652789067776 [0;39m <==    Updates: 0
2023-04-01 00:57:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22806652789067776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 00:57:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22806673789947904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:57:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22806673789947904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:57:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22806673789947904 [0;39m ==> Parameters: 
2023-04-01 00:57:05.025 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22806673789947904 [0;39m <==    Updates: 1
2023-04-01 00:57:05.025 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22806673789947904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 00:57:06.733 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:57:21.365 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:57:26.641 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:57:31.822 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:57:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22806799598096384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:57:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22806799598096384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:57:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22806799598096384 [0;39m ==> Parameters: 
2023-04-01 00:57:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22806799598096384 [0;39m <==    Updates: 1
2023-04-01 00:57:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22806799598096384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 00:57:51.678 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:57:58.503 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 00:58:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22806904447307776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 00:58:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22806904447307776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 00:58:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22806904447307776 [0;39m ==> Parameters: 
2023-04-01 00:58:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22806904447307776 [0;39m <==    Updates: 0
2023-04-01 00:58:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22806904447307776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 00:58:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22806925418827776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 00:58:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22806925418827776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 00:58:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22806925418827776 [0;39m ==> Parameters: 
2023-04-01 00:58:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22806925418827776 [0;39m <==    Updates: 1
2023-04-01 00:58:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22806925418827776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 00:58:21.462 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:20:26.762 INFO  com.jiawa.wiki.WikiApplication                    :55   [32m                  [0;39m Starting WikiApplication using Java 1.8.0_271 on LAPTOP-TLCI2GAA with PID 8944 (D:\work\jiawawiki\target\classes started by k in D:\work\jiawawiki)
2023-04-01 10:20:26.767 INFO  com.jiawa.wiki.WikiApplication                    :660  [32m                  [0;39m No active profile set, falling back to default profiles: default
2023-04-01 10:20:26.769 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.1.6.Final
2023-04-01 10:20:26.971 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-04-01 10:20:26.972 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-04-01 10:20:28.332 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :250  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2023-04-01 10:20:28.335 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :128  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-04-01 10:20:28.372 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :188  [32m                  [0;39m Finished Spring Data repository scanning in 19 ms. Found 0 Redis repository interfaces.
2023-04-01 10:20:28.753 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration$$EnhancerBySpringCGLIB$$7b5da7b2] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 10:20:28.769 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 10:20:29.863 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'defaultMQProducer' of type [org.apache.rocketmq.client.producer.DefaultMQProducer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 10:20:29.867 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonConfig' of type [com.jiawa.wiki.config.JacksonConfig$$EnhancerBySpringCGLIB$$1d981cb3] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 10:20:29.867 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 10:20:29.869 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 10:20:29.872 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'spring.jackson-org.springframework.boot.autoconfigure.jackson.JacksonProperties' of type [org.springframework.boot.autoconfigure.jackson.JacksonProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 10:20:29.873 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'standardJacksonObjectMapperBuilderCustomizer' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration$StandardJackson2ObjectMapperBuilderCustomizer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 10:20:29.876 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 10:20:29.882 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'parameterNamesModule' of type [com.fasterxml.jackson.module.paramnames.ParameterNamesModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 10:20:29.884 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 10:20:29.906 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jsonComponentModule' of type [org.springframework.boot.jackson.JsonComponentModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 10:20:29.907 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.data.web.config.SpringDataJacksonConfiguration' of type [org.springframework.data.web.config.SpringDataJacksonConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 10:20:29.911 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonGeoModule' of type [org.springframework.data.geo.GeoModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 10:20:29.914 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapperBuilder' of type [org.springframework.http.converter.json.Jackson2ObjectMapperBuilder] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 10:20:29.937 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapper' of type [com.fasterxml.jackson.databind.ObjectMapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 10:20:32.404 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketMQTemplate' of type [org.apache.rocketmq.spring.core.RocketMQTemplate] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 10:20:32.407 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'transactionHandlerRegistry' of type [org.apache.rocketmq.spring.config.TransactionHandlerRegistry] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 10:20:33.267 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2023-04-01 10:20:33.280 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2023-04-01 10:20:33.281 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2023-04-01 10:20:33.282 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.39]
2023-04-01 10:20:33.419 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2023-04-01 10:20:33.420 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :289  [32m                  [0;39m Root WebApplicationContext: initialization completed in 6448 ms
2023-04-01 10:20:34.755 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:20:34.755 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:20:35.013 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2023-04-01 10:20:35.741 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2023-04-01 10:20:35.831 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2023-04-01 10:20:38.750 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:20:40.773 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:20:40.775 INFO  o.a.r.s.support.DefaultRocketMQListenerContainer  :243  [32m                  [0;39m running container: DefaultRocketMQListenerContainer{consumerGroup='default', nameServer='127.0.0.1:9876', topic='VOTE_TOPIC', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
2023-04-01 10:20:40.775 INFO  o.a.r.s.a.ListenerContainerConfiguration          :107  [32m                  [0;39m Register the listener to container, listenerBeanName:voteTopicConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-04-01 10:20:40.789 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2023-04-01 10:20:40.809 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2023-04-01 10:20:40.838 INFO  com.jiawa.wiki.WikiApplication                    :61   [32m                  [0;39m Started WikiApplication in 14.848 seconds (JVM running for 17.651)
2023-04-01 10:20:40.843 INFO  com.jiawa.wiki.WikiApplication                    :26   [32m                  [0;39m å¯åŠ¨æˆåŠŸï¼ï¼
2023-04-01 10:20:40.844 INFO  com.jiawa.wiki.WikiApplication                    :27   [32m                  [0;39m åœ°å€: 	http://127.0.0.1:8880
2023-04-01 10:20:44.864 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:21:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22948588015456256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:21:00.049 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m22948588015456256 [0;39m HikariPool-1 - Starting...
2023-04-01 10:21:00.185 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m22948588015456256 [0;39m HikariPool-1 - Start completed.
2023-04-01 10:21:00.192 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22948588015456256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:21:00.213 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22948588015456256 [0;39m ==> Parameters: 
2023-04-01 10:21:00.217 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22948588015456256 [0;39m <==    Updates: 0
2023-04-01 10:21:00.218 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22948588015456256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š212æ¯«ç§’
2023-04-01 10:21:04.471 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:21:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22948609028919296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:21:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22948609028919296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:21:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22948609028919296 [0;39m ==> Parameters: 
2023-04-01 10:21:05.027 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22948609028919296 [0;39m <==    Updates: 1
2023-04-01 10:21:05.028 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22948609028919296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 10:21:05.575 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:21:07.615 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:21:09.676 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:21:11.703 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:21:34.454 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:21:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22948734849650688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:21:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22948734849650688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:21:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22948734849650688 [0;39m ==> Parameters: 
2023-04-01 10:21:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22948734849650688 [0;39m <==    Updates: 1
2023-04-01 10:21:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22948734849650688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 10:21:37.626 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:21:39.682 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:22:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22948839661113344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:22:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22948839661113344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:22:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22948839661113344 [0;39m ==> Parameters: 
2023-04-01 10:22:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22948839661113344 [0;39m <==    Updates: 0
2023-04-01 10:22:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22948839661113344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 10:22:01.739 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:22:03.794 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:22:04.478 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:22:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22948860649410560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:22:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22948860649410560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:22:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22948860649410560 [0;39m ==> Parameters: 
2023-04-01 10:22:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22948860649410560 [0;39m <==    Updates: 1
2023-04-01 10:22:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22948860649410560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 10:22:09.944 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:22:25.839 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:22:27.892 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:22:33.532 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:22:34.480 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:22:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22948986507890688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:22:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22948986507890688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:22:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22948986507890688 [0;39m ==> Parameters: 
2023-04-01 10:22:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22948986507890688 [0;39m <==    Updates: 1
2023-04-01 10:22:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22948986507890688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 10:22:35.572 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:22:37.616 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:22:49.950 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:22:51.981 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:23:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22949091361296384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:23:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22949091361296384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:23:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22949091361296384 [0;39m ==> Parameters: 
2023-04-01 10:23:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22949091361296384 [0;39m <==    Updates: 0
2023-04-01 10:23:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22949091361296384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 10:23:03.530 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:23:04.482 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:23:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22949112337010688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:23:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22949112337010688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:23:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22949112337010688 [0;39m ==> Parameters: 
2023-04-01 10:23:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22949112337010688 [0;39m <==    Updates: 1
2023-04-01 10:23:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22949112337010688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 10:23:05.558 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:23:07.576 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:23:16.071 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:23:33.535 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:23:34.446 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:23:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22949238140964864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:23:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22949238140964864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:23:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22949238140964864 [0;39m ==> Parameters: 
2023-04-01 10:23:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22949238140964864 [0;39m <==    Updates: 1
2023-04-01 10:23:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22949238140964864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 10:23:35.582 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:23:37.622 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:23:39.663 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:23:41.715 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:24:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22949343032119296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:24:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22949343032119296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:24:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22949343032119296 [0;39m ==> Parameters: 
2023-04-01 10:24:00.026 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22949343032119296 [0;39m <==    Updates: 0
2023-04-01 10:24:00.026 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22949343032119296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 10:24:03.517 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:24:04.471 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:24:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22949363995250688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:24:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22949363995250688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:24:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22949363995250688 [0;39m ==> Parameters: 
2023-04-01 10:24:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22949363995250688 [0;39m <==    Updates: 1
2023-04-01 10:24:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22949363995250688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 10:24:07.627 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:24:09.669 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:24:33.767 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:24:34.464 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:24:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22949489815982080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:24:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22949489815982080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:24:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22949489815982080 [0;39m ==> Parameters: 
2023-04-01 10:24:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22949489815982080 [0;39m <==    Updates: 1
2023-04-01 10:24:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22949489815982080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 10:24:37.877 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:24:39.911 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:24:57.878 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:25:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22949594677776384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:25:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22949594677776384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:25:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22949594677776384 [0;39m ==> Parameters: 
2023-04-01 10:25:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22949594677776384 [0;39m <==    Updates: 0
2023-04-01 10:25:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22949594677776384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 10:25:04.466 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:25:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22949615640907776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:25:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22949615640907776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:25:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22949615640907776 [0;39m ==> Parameters: 
2023-04-01 10:25:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22949615640907776 [0;39m <==    Updates: 1
2023-04-01 10:25:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22949615640907776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 10:25:05.586 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:25:07.632 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:25:19.953 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:25:21.997 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:25:34.469 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:25:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22949741482610688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:25:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22949741482610688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:25:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22949741482610688 [0;39m ==> Parameters: 
2023-04-01 10:25:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22949741482610688 [0;39m <==    Updates: 1
2023-04-01 10:25:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22949741482610688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 10:25:37.646 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:25:46.083 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:26:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22949846306656256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:26:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22949846306656256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:26:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22949846306656256 [0;39m ==> Parameters: 
2023-04-01 10:26:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22949846306656256 [0;39m <==    Updates: 0
2023-04-01 10:26:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22949846306656256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 10:26:04.441 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:26:05.017 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22949867328507904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:26:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22949867328507904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:26:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22949867328507904 [0;39m ==> Parameters: 
2023-04-01 10:26:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22949867328507904 [0;39m <==    Updates: 1
2023-04-01 10:26:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22949867328507904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 10:26:05.590 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:26:07.632 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:26:11.728 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:26:33.515 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:26:34.459 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:26:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22949993149239296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:26:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22949993149239296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:26:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22949993149239296 [0;39m ==> Parameters: 
2023-04-01 10:26:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22949993149239296 [0;39m <==    Updates: 1
2023-04-01 10:26:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22949993149239296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 10:26:35.560 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:26:37.618 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:26:39.682 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:27:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22950097969090560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:27:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22950097969090560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:27:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22950097969090560 [0;39m ==> Parameters: 
2023-04-01 10:27:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22950097969090560 [0;39m <==    Updates: 0
2023-04-01 10:27:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22950097969090560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 10:27:03.757 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:27:04.472 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:27:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22950118928027648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:27:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22950118928027648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:27:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22950118928027648 [0;39m ==> Parameters: 
2023-04-01 10:27:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22950118928027648 [0;39m <==    Updates: 1
2023-04-01 10:27:05.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22950118928027648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 10:27:05.795 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:27:09.878 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:27:25.810 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:27:27.854 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:27:33.529 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:27:34.480 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:27:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22950244782313472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:27:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22950244782313472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:27:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22950244782313472 [0;39m ==> Parameters: 
2023-04-01 10:27:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22950244782313472 [0;39m <==    Updates: 1
2023-04-01 10:27:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22950244782313472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 10:27:35.572 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:27:37.622 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:27:49.905 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:27:51.927 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:28:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22950349652496384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:28:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22950349652496384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:28:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22950349652496384 [0;39m ==> Parameters: 
2023-04-01 10:28:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22950349652496384 [0;39m <==    Updates: 0
2023-04-01 10:28:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22950349652496384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 10:28:04.480 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:28:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22950370628210688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:28:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22950370628210688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:28:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22950370628210688 [0;39m ==> Parameters: 
2023-04-01 10:28:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22950370628210688 [0;39m <==    Updates: 1
2023-04-01 10:28:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22950370628210688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 10:28:07.601 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:28:13.969 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:28:16.024 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:28:34.461 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:28:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22950496415387648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:28:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22950496415387648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:28:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22950496415387648 [0;39m ==> Parameters: 
2023-04-01 10:28:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22950496415387648 [0;39m <==    Updates: 1
2023-04-01 10:28:35.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22950496415387648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 10:28:35.581 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:28:37.640 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:28:39.694 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:28:41.737 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:29:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22950601293959168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:29:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22950601293959168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:29:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22950601293959168 [0;39m ==> Parameters: 
2023-04-01 10:29:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22950601293959168 [0;39m <==    Updates: 0
2023-04-01 10:29:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22950601293959168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 10:29:04.461 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:29:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22950622299033600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:29:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22950622299033600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:29:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22950622299033600 [0;39m ==> Parameters: 
2023-04-01 10:29:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22950622299033600 [0;39m <==    Updates: 1
2023-04-01 10:29:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22950622299033600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 10:29:05.579 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:29:07.626 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:29:09.668 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:29:31.731 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:29:33.778 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:29:34.482 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:29:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22950748128153600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:29:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22950748128153600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:29:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22950748128153600 [0;39m ==> Parameters: 
2023-04-01 10:29:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22950748128153600 [0;39m <==    Updates: 1
2023-04-01 10:29:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22950748128153600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 10:29:35.807 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:29:39.883 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:29:57.897 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:30:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22950852931227648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:30:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22950852931227648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:30:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22950852931227648 [0;39m ==> Parameters: 
2023-04-01 10:30:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22950852931227648 [0;39m <==    Updates: 0
2023-04-01 10:30:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22950852931227648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 10:30:04.447 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:30:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22950873923719168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:30:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22950873923719168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:30:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22950873923719168 [0;39m ==> Parameters: 
2023-04-01 10:30:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22950873923719168 [0;39m <==    Updates: 1
2023-04-01 10:30:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22950873923719168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 10:30:07.617 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:30:19.948 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:30:21.992 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:30:34.468 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:30:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22950999778004992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:30:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22950999778004992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:30:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22950999778004992 [0;39m ==> Parameters: 
2023-04-01 10:30:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22950999778004992 [0;39m <==    Updates: 1
2023-04-01 10:30:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22950999778004992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 10:30:35.585 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:30:37.644 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:30:44.063 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:30:46.136 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:31:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22951104606244864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:31:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22951104606244864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:31:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22951104606244864 [0;39m ==> Parameters: 
2023-04-01 10:31:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22951104606244864 [0;39m <==    Updates: 0
2023-04-01 10:31:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22951104606244864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 10:31:03.528 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:31:04.448 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:31:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22951125577764864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:31:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22951125577764864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:31:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22951125577764864 [0;39m ==> Parameters: 
2023-04-01 10:31:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22951125577764864 [0;39m <==    Updates: 1
2023-04-01 10:31:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22951125577764864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 10:31:07.631 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:31:11.729 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:31:33.545 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:31:34.477 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:31:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22951251432050688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:31:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22951251432050688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:31:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22951251432050688 [0;39m ==> Parameters: 
2023-04-01 10:31:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22951251432050688 [0;39m <==    Updates: 1
2023-04-01 10:31:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22951251432050688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 10:31:35.572 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:31:37.628 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:31:39.684 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:32:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22951356302233600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:32:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22951356302233600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:32:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22951356302233600 [0;39m ==> Parameters: 
2023-04-01 10:32:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22951356302233600 [0;39m <==    Updates: 0
2023-04-01 10:32:00.026 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22951356302233600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 10:32:01.748 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:32:03.796 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:32:04.454 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:32:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22951377265364992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:32:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22951377265364992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:32:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22951377265364992 [0;39m ==> Parameters: 
2023-04-01 10:32:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22951377265364992 [0;39m <==    Updates: 1
2023-04-01 10:32:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22951377265364992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 10:32:05.843 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:32:07.889 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:32:09.926 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:32:25.845 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:32:27.899 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:32:33.535 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:32:34.470 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:32:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22951503102873600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:32:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22951503102873600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:32:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22951503102873600 [0;39m ==> Parameters: 
2023-04-01 10:32:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22951503102873600 [0;39m <==    Updates: 1
2023-04-01 10:32:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22951503102873600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 10:32:35.575 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:32:37.618 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:32:49.957 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:32:51.997 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:33:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22951607931113472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:33:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22951607931113472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:33:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22951607931113472 [0;39m ==> Parameters: 
2023-04-01 10:33:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22951607931113472 [0;39m <==    Updates: 0
2023-04-01 10:33:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22951607931113472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 10:33:04.452 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:33:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22951628915216384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:33:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22951628915216384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:33:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22951628915216384 [0;39m ==> Parameters: 
2023-04-01 10:33:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22951628915216384 [0;39m <==    Updates: 1
2023-04-01 10:33:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22951628915216384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 10:33:05.577 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:33:07.618 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:33:16.085 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:33:33.523 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:33:34.473 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:33:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22951754706587648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:33:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22951754706587648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:33:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22951754706587648 [0;39m ==> Parameters: 
2023-04-01 10:33:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22951754706587648 [0;39m <==    Updates: 1
2023-04-01 10:33:35.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22951754706587648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 10:33:35.579 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:33:37.631 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:33:39.669 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:33:41.725 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:34:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22951859597742080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:34:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22951859597742080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:34:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22951859597742080 [0;39m ==> Parameters: 
2023-04-01 10:34:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22951859597742080 [0;39m <==    Updates: 0
2023-04-01 10:34:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22951859597742080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 10:34:03.546 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:34:04.482 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:34:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22951880577650688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:34:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22951880577650688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:34:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22951880577650688 [0;39m ==> Parameters: 
2023-04-01 10:34:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22951880577650688 [0;39m <==    Updates: 1
2023-04-01 10:34:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22951880577650688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 10:34:07.633 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:34:09.671 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:34:31.741 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:34:33.785 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:34:34.458 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:34:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22952006419353600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:34:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22952006419353600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:34:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22952006419353600 [0;39m ==> Parameters: 
2023-04-01 10:34:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22952006419353600 [0;39m <==    Updates: 1
2023-04-01 10:34:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22952006419353600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 10:34:35.840 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:34:37.892 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:34:39.923 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:34:57.886 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:35:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22952111239204864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:35:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22952111239204864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:35:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22952111239204864 [0;39m ==> Parameters: 
2023-04-01 10:35:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22952111239204864 [0;39m <==    Updates: 0
2023-04-01 10:35:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22952111239204864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 10:35:03.512 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:35:04.461 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:35:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22952132219113472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:35:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22952132219113472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:35:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22952132219113472 [0;39m ==> Parameters: 
2023-04-01 10:35:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22952132219113472 [0;39m <==    Updates: 1
2023-04-01 10:35:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22952132219113472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 10:35:05.569 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:35:07.618 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:35:19.910 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:35:21.958 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:35:34.473 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:35:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22952258027261952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:35:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22952258027261952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:35:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22952258027261952 [0;39m ==> Parameters: 
2023-04-01 10:35:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22952258027261952 [0;39m <==    Updates: 1
2023-04-01 10:35:35.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22952258027261952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 10:35:35.579 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:35:37.623 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:35:44.002 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:35:46.044 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:36:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22952362943582208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:36:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22952362943582208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:36:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22952362943582208 [0;39m ==> Parameters: 
2023-04-01 10:36:00.028 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22952362943582208 [0;39m <==    Updates: 0
2023-04-01 10:36:00.028 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22952362943582208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 10:36:03.536 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:36:04.458 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:36:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22952383847993344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:36:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22952383847993344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:36:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22952383847993344 [0;39m ==> Parameters: 
2023-04-01 10:36:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22952383847993344 [0;39m <==    Updates: 1
2023-04-01 10:36:05.004 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22952383847993344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 10:36:07.635 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:36:09.675 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:36:11.706 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:36:33.542 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:36:34.448 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:36:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22952509706473472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:36:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22952509706473472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:36:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22952509706473472 [0;39m ==> Parameters: 
2023-04-01 10:36:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22952509706473472 [0;39m <==    Updates: 1
2023-04-01 10:36:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22952509706473472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 10:36:37.613 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:36:39.665 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:37:00.000 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22952614530519040 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:37:00.001 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22952614530519040 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:37:00.001 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22952614530519040 [0;39m ==> Parameters: 
2023-04-01 10:37:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22952614530519040 [0;39m <==    Updates: 0
2023-04-01 10:37:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22952614530519040 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 10:37:01.717 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:37:03.757 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:37:04.464 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:37:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22952635535593472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:37:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22952635535593472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:37:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22952635535593472 [0;39m ==> Parameters: 
2023-04-01 10:37:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22952635535593472 [0;39m <==    Updates: 1
2023-04-01 10:37:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22952635535593472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 10:37:05.800 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:37:07.841 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:37:09.885 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:37:27.862 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:37:33.520 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:37:34.471 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:37:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22952761352130560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:37:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22952761352130560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:37:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22952761352130560 [0;39m ==> Parameters: 
2023-04-01 10:37:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22952761352130560 [0;39m <==    Updates: 1
2023-04-01 10:37:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22952761352130560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 10:37:37.594 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:37:49.921 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:37:51.964 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:38:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22952866239090688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:38:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22952866239090688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:38:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22952866239090688 [0;39m ==> Parameters: 
2023-04-01 10:38:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22952866239090688 [0;39m <==    Updates: 0
2023-04-01 10:38:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22952866239090688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 10:38:03.535 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:38:04.483 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:38:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22952887214804992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:38:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22952887214804992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:38:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22952887214804992 [0;39m ==> Parameters: 
2023-04-01 10:38:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22952887214804992 [0;39m <==    Updates: 1
2023-04-01 10:38:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22952887214804992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 10:38:05.574 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:38:07.623 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:38:14.002 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:38:16.059 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:38:33.513 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:38:34.451 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:38:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22953013039730688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:38:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22953013039730688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:38:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22953013039730688 [0;39m ==> Parameters: 
2023-04-01 10:38:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22953013039730688 [0;39m <==    Updates: 1
2023-04-01 10:38:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22953013039730688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 10:38:35.556 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:38:37.609 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:38:39.665 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:38:41.719 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:39:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22953117905719296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:39:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22953117905719296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:39:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22953117905719296 [0;39m ==> Parameters: 
2023-04-01 10:39:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22953117905719296 [0;39m <==    Updates: 0
2023-04-01 10:39:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22953117905719296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 10:39:03.527 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:39:04.458 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:39:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22953138831101952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:39:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22953138831101952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:39:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22953138831101952 [0;39m ==> Parameters: 
2023-04-01 10:39:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22953138831101952 [0;39m <==    Updates: 1
2023-04-01 10:39:05.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22953138831101952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 10:39:07.618 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:39:09.669 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:39:31.720 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:39:33.766 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:39:34.474 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:39:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22953264651833344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:39:35.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22953264651833344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:39:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22953264651833344 [0;39m ==> Parameters: 
2023-04-01 10:39:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22953264651833344 [0;39m <==    Updates: 1
2023-04-01 10:39:35.004 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22953264651833344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 10:39:35.797 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:39:37.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:39:39.904 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:39:55.824 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:39:57.875 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:40:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22953369568153600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:40:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22953369568153600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:40:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22953369568153600 [0;39m ==> Parameters: 
2023-04-01 10:40:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22953369568153600 [0;39m <==    Updates: 0
2023-04-01 10:40:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22953369568153600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 10:40:03.526 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:40:04.444 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:40:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22953390489341952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:40:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22953390489341952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:40:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22953390489341952 [0;39m ==> Parameters: 
2023-04-01 10:40:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22953390489341952 [0;39m <==    Updates: 1
2023-04-01 10:40:05.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22953390489341952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 10:40:05.566 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:40:07.617 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:40:19.927 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:40:21.980 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:40:34.465 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:40:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22953516347822080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:40:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22953516347822080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:40:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22953516347822080 [0;39m ==> Parameters: 
2023-04-01 10:40:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22953516347822080 [0;39m <==    Updates: 1
2023-04-01 10:40:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22953516347822080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 10:40:35.556 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:40:37.597 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:40:46.066 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:41:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22953621213810688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:41:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22953621213810688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:41:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22953621213810688 [0;39m ==> Parameters: 
2023-04-01 10:41:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22953621213810688 [0;39m <==    Updates: 0
2023-04-01 10:41:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22953621213810688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 10:41:04.472 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:41:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22953642139193344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:41:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22953642139193344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:41:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22953642139193344 [0;39m ==> Parameters: 
2023-04-01 10:41:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22953642139193344 [0;39m <==    Updates: 1
2023-04-01 10:41:05.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22953642139193344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 10:41:05.578 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:41:07.616 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:41:09.672 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:41:11.721 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:41:33.544 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:41:34.467 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:41:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22953768014450688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:41:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22953768014450688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:41:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22953768014450688 [0;39m ==> Parameters: 
2023-04-01 10:41:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22953768014450688 [0;39m <==    Updates: 1
2023-04-01 10:41:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22953768014450688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 10:41:35.585 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:41:37.612 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:41:39.665 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:42:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22953872842690560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:42:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22953872842690560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:42:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22953872842690560 [0;39m ==> Parameters: 
2023-04-01 10:42:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22953872842690560 [0;39m <==    Updates: 0
2023-04-01 10:42:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22953872842690560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 10:42:01.733 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:42:03.790 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:42:04.475 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:42:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22953893814210560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:42:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22953893814210560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:42:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22953893814210560 [0;39m ==> Parameters: 
2023-04-01 10:42:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22953893814210560 [0;39m <==    Updates: 1
2023-04-01 10:42:05.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22953893814210560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 10:42:05.834 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:42:07.885 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:42:26.808 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:42:28.848 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:42:33.527 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:42:34.463 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:42:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22954019643330560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:42:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22954019643330560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:42:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22954019643330560 [0;39m ==> Parameters: 
2023-04-01 10:42:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22954019643330560 [0;39m <==    Updates: 1
2023-04-01 10:42:35.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22954019643330560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 10:42:37.617 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:42:50.896 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:42:52.952 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:43:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22954124521902080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:43:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22954124521902080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:43:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22954124521902080 [0;39m ==> Parameters: 
2023-04-01 10:43:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22954124521902080 [0;39m <==    Updates: 0
2023-04-01 10:43:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22954124521902080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 10:43:03.540 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:43:04.446 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:43:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22954145468256256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:43:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22954145468256256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:43:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22954145468256256 [0;39m ==> Parameters: 
2023-04-01 10:43:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22954145468256256 [0;39m <==    Updates: 1
2023-04-01 10:43:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22954145468256256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 10:43:05.577 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:43:07.626 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:43:17.019 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:43:34.473 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:43:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22954271284793344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:43:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22954271284793344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:43:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22954271284793344 [0;39m ==> Parameters: 
2023-04-01 10:43:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22954271284793344 [0;39m <==    Updates: 1
2023-04-01 10:43:35.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22954271284793344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 10:43:35.594 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:43:37.636 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:43:39.690 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:43:41.730 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:44:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22954376171753472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:44:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22954376171753472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:44:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22954376171753472 [0;39m ==> Parameters: 
2023-04-01 10:44:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22954376171753472 [0;39m <==    Updates: 0
2023-04-01 10:44:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22954376171753472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 10:44:04.461 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:44:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22954397126496256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:44:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22954397126496256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:44:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22954397126496256 [0;39m ==> Parameters: 
2023-04-01 10:44:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22954397126496256 [0;39m <==    Updates: 1
2023-04-01 10:44:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22954397126496256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 10:44:05.582 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:44:07.612 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:44:09.668 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:44:31.730 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:44:33.765 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:44:34.466 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:44:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22954522968199168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:44:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22954522968199168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:44:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22954522968199168 [0;39m ==> Parameters: 
2023-04-01 10:44:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22954522968199168 [0;39m <==    Updates: 1
2023-04-01 10:44:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22954522968199168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 10:44:39.919 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:44:55.811 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:44:57.839 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:45:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22954627825799168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:45:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22954627825799168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:45:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22954627825799168 [0;39m ==> Parameters: 
2023-04-01 10:45:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22954627825799168 [0;39m <==    Updates: 0
2023-04-01 10:45:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22954627825799168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 10:45:03.536 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:45:04.452 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:45:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22954648822484992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:45:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22954648822484992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:45:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22954648822484992 [0;39m ==> Parameters: 
2023-04-01 10:45:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22954648822484992 [0;39m <==    Updates: 1
2023-04-01 10:45:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22954648822484992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 10:45:07.612 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:45:19.878 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:45:21.929 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:45:33.540 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:45:34.472 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:45:35.000 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22954774597079040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:45:35.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22954774597079040 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:45:35.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22954774597079040 [0;39m ==> Parameters: 
2023-04-01 10:45:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22954774597079040 [0;39m <==    Updates: 1
2023-04-01 10:45:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22954774597079040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 10:45:37.639 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:45:43.993 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:45:46.039 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:46:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22954879475650560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:46:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22954879475650560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:46:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22954879475650560 [0;39m ==> Parameters: 
2023-04-01 10:46:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22954879475650560 [0;39m <==    Updates: 0
2023-04-01 10:46:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22954879475650560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 10:46:04.465 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:46:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22954900451364864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:46:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22954900451364864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:46:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22954900451364864 [0;39m ==> Parameters: 
2023-04-01 10:46:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22954900451364864 [0;39m <==    Updates: 1
2023-04-01 10:46:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22954900451364864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 10:46:07.592 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:46:09.623 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:46:11.639 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:46:34.460 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:46:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22955026259513344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:46:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22955026259513344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:46:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22955026259513344 [0;39m ==> Parameters: 
2023-04-01 10:46:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22955026259513344 [0;39m <==    Updates: 1
2023-04-01 10:46:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22955026259513344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 10:46:35.565 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:46:37.620 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:46:39.659 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:47:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22955131167444992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:47:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22955131167444992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:47:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22955131167444992 [0;39m ==> Parameters: 
2023-04-01 10:47:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22955131167444992 [0;39m <==    Updates: 0
2023-04-01 10:47:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22955131167444992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 10:47:01.711 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:47:03.768 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:47:04.457 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:47:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22955152138964992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:47:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22955152138964992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:47:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22955152138964992 [0;39m ==> Parameters: 
2023-04-01 10:47:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22955152138964992 [0;39m <==    Updates: 1
2023-04-01 10:47:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22955152138964992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 10:47:05.807 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:47:07.848 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:47:09.889 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:47:27.862 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:47:33.520 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:47:34.466 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:47:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22955277955502080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:47:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22955277955502080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:47:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22955277955502080 [0;39m ==> Parameters: 
2023-04-01 10:47:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22955277955502080 [0;39m <==    Updates: 1
2023-04-01 10:47:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22955277955502080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 10:47:37.609 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:47:49.910 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:47:51.935 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:48:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22955382792130560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:48:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22955382792130560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:48:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22955382792130560 [0;39m ==> Parameters: 
2023-04-01 10:48:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22955382792130560 [0;39m <==    Updates: 0
2023-04-01 10:48:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22955382792130560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 10:48:03.520 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:48:04.457 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:48:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22955403793010688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:48:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22955403793010688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:48:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22955403793010688 [0;39m ==> Parameters: 
2023-04-01 10:48:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22955403793010688 [0;39m <==    Updates: 1
2023-04-01 10:48:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22955403793010688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 10:48:05.579 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:48:07.624 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:48:13.984 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:48:16.041 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:48:33.533 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:48:34.453 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:48:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22955529609547776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:48:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22955529609547776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:48:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22955529609547776 [0;39m ==> Parameters: 
2023-04-01 10:48:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22955529609547776 [0;39m <==    Updates: 1
2023-04-01 10:48:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22955529609547776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 10:48:35.576 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:48:37.619 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:48:41.706 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:49:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22955634454564864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:49:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22955634454564864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:49:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22955634454564864 [0;39m ==> Parameters: 
2023-04-01 10:49:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22955634454564864 [0;39m <==    Updates: 0
2023-04-01 10:49:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22955634454564864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-04-01 10:49:04.467 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:49:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22955655447056384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:49:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22955655447056384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:49:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22955655447056384 [0;39m ==> Parameters: 
2023-04-01 10:49:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22955655447056384 [0;39m <==    Updates: 1
2023-04-01 10:49:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22955655447056384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 10:49:05.587 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:49:07.644 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:49:09.679 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:49:31.728 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:49:33.773 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:49:34.457 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:49:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22955781234233344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:49:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22955781234233344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:49:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22955781234233344 [0;39m ==> Parameters: 
2023-04-01 10:49:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22955781234233344 [0;39m <==    Updates: 1
2023-04-01 10:49:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22955781234233344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 10:49:35.815 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:49:39.914 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:49:55.838 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:49:57.896 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:50:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22955886137970688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:50:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22955886137970688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:50:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22955886137970688 [0;39m ==> Parameters: 
2023-04-01 10:50:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22955886137970688 [0;39m <==    Updates: 0
2023-04-01 10:50:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22955886137970688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 10:50:03.510 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:50:04.459 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:50:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22955907071741952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:50:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22955907071741952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:50:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22955907071741952 [0;39m ==> Parameters: 
2023-04-01 10:50:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22955907071741952 [0;39m <==    Updates: 1
2023-04-01 10:50:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22955907071741952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 10:50:07.607 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:50:19.928 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:50:21.968 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:50:33.529 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:50:34.462 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:50:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22956032913444864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:50:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22956032913444864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:50:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22956032913444864 [0;39m ==> Parameters: 
2023-04-01 10:50:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22956032913444864 [0;39m <==    Updates: 1
2023-04-01 10:50:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22956032913444864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 10:50:35.566 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:50:37.596 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:50:44.032 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:50:46.068 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:51:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22956137775239168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:51:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22956137775239168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:51:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22956137775239168 [0;39m ==> Parameters: 
2023-04-01 10:51:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22956137775239168 [0;39m <==    Updates: 0
2023-04-01 10:51:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22956137775239168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 10:51:03.542 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:51:04.481 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:51:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22956158742564864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:51:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22956158742564864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:51:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22956158742564864 [0;39m ==> Parameters: 
2023-04-01 10:51:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22956158742564864 [0;39m <==    Updates: 1
2023-04-01 10:51:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22956158742564864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 10:51:05.598 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:51:07.647 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:51:09.677 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:51:11.730 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:51:33.522 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:51:34.471 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:51:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22956284554907648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:51:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22956284554907648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:51:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22956284554907648 [0;39m ==> Parameters: 
2023-04-01 10:51:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22956284554907648 [0;39m <==    Updates: 1
2023-04-01 10:51:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22956284554907648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 10:51:35.577 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:51:37.634 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:51:39.682 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:51:59.687 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:52:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22956389471227904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:52:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22956389471227904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:52:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22956389471227904 [0;39m ==> Parameters: 
2023-04-01 10:52:00.026 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22956389471227904 [0;39m <==    Updates: 0
2023-04-01 10:52:00.026 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22956389471227904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 10:52:01.737 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:52:03.777 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:52:04.479 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:52:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22956410400804864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:52:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22956410400804864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:52:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22956410400804864 [0;39m ==> Parameters: 
2023-04-01 10:52:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22956410400804864 [0;39m <==    Updates: 1
2023-04-01 10:52:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22956410400804864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 10:52:05.832 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:52:07.887 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:52:23.779 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:52:25.835 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:52:33.535 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:52:34.484 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:52:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22956536259284992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:52:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22956536259284992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:52:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22956536259284992 [0;39m ==> Parameters: 
2023-04-01 10:52:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22956536259284992 [0;39m <==    Updates: 1
2023-04-01 10:52:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22956536259284992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 10:52:35.589 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:52:37.636 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:52:47.893 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:52:49.920 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:53:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22956641070747648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:53:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22956641070747648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:53:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22956641070747648 [0;39m ==> Parameters: 
2023-04-01 10:53:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22956641070747648 [0;39m <==    Updates: 0
2023-04-01 10:53:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22956641070747648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 10:53:03.506 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:53:04.472 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:53:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22956662046461952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:53:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22956662046461952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:53:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22956662046461952 [0;39m ==> Parameters: 
2023-04-01 10:53:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22956662046461952 [0;39m <==    Updates: 1
2023-04-01 10:53:05.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22956662046461952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 10:53:05.549 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:53:07.586 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:53:11.970 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:53:14.025 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:53:33.520 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:53:34.469 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:53:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22956787909136384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:53:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22956787909136384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:53:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22956787909136384 [0;39m ==> Parameters: 
2023-04-01 10:53:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22956787909136384 [0;39m <==    Updates: 1
2023-04-01 10:53:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22956787909136384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 10:53:35.568 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:53:37.624 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:53:39.654 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:54:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22956892733181952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:54:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22956892733181952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:54:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22956892733181952 [0;39m ==> Parameters: 
2023-04-01 10:54:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22956892733181952 [0;39m <==    Updates: 0
2023-04-01 10:54:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22956892733181952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 10:54:01.713 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:54:03.754 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:54:04.460 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:54:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22956913717284864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:54:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22956913717284864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:54:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22956913717284864 [0;39m ==> Parameters: 
2023-04-01 10:54:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22956913717284864 [0;39m <==    Updates: 1
2023-04-01 10:54:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22956913717284864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 10:54:05.790 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:54:07.849 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:54:09.897 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:54:25.814 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:54:27.856 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:54:33.533 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:54:34.449 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:54:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22957039554793472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:54:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22957039554793472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:54:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22957039554793472 [0;39m ==> Parameters: 
2023-04-01 10:54:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22957039554793472 [0;39m <==    Updates: 1
2023-04-01 10:54:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22957039554793472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 10:54:35.572 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:54:37.613 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:54:49.926 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:54:51.978 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:55:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22957144420782080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:55:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22957144420782080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:55:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22957144420782080 [0;39m ==> Parameters: 
2023-04-01 10:55:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22957144420782080 [0;39m <==    Updates: 0
2023-04-01 10:55:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22957144420782080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 10:55:03.504 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:55:04.456 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:55:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22957165362941952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:55:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22957165362941952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:55:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22957165362941952 [0;39m ==> Parameters: 
2023-04-01 10:55:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22957165362941952 [0;39m <==    Updates: 1
2023-04-01 10:55:05.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22957165362941952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 10:55:05.550 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:55:07.597 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:55:14.045 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:55:16.068 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:55:34.471 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:55:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22957291238199296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:55:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22957291238199296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:55:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22957291238199296 [0;39m ==> Parameters: 
2023-04-01 10:55:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22957291238199296 [0;39m <==    Updates: 1
2023-04-01 10:55:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22957291238199296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 10:55:37.630 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:55:41.736 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:56:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22957396079022080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:56:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22957396079022080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:56:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22957396079022080 [0;39m ==> Parameters: 
2023-04-01 10:56:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22957396079022080 [0;39m <==    Updates: 0
2023-04-01 10:56:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22957396079022080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 10:56:03.502 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:56:04.472 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:56:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22957417021181952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:56:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22957417021181952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:56:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22957417021181952 [0;39m ==> Parameters: 
2023-04-01 10:56:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22957417021181952 [0;39m <==    Updates: 1
2023-04-01 10:56:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22957417021181952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 10:56:07.588 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:56:09.623 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:56:31.692 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:56:33.748 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:56:34.480 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:56:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22957542892244992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:56:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22957542892244992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:56:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22957542892244992 [0;39m ==> Parameters: 
2023-04-01 10:56:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22957542892244992 [0;39m <==    Updates: 1
2023-04-01 10:56:35.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22957542892244992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 10:56:35.787 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:56:37.838 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:56:39.878 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:56:55.789 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:56:57.832 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:57:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22957647724679168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:57:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22957647724679168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:57:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22957647724679168 [0;39m ==> Parameters: 
2023-04-01 10:57:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22957647724679168 [0;39m <==    Updates: 0
2023-04-01 10:57:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22957647724679168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 10:57:03.539 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:57:04.478 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:57:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22957668687810560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:57:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22957668687810560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:57:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22957668687810560 [0;39m ==> Parameters: 
2023-04-01 10:57:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22957668687810560 [0;39m <==    Updates: 1
2023-04-01 10:57:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22957668687810560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 10:57:05.598 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:57:07.635 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:57:19.874 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:57:21.929 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:57:33.521 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:57:34.454 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:57:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22957794504347648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:57:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22957794504347648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:57:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22957794504347648 [0;39m ==> Parameters: 
2023-04-01 10:57:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22957794504347648 [0;39m <==    Updates: 1
2023-04-01 10:57:35.004 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22957794504347648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 10:57:37.617 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:57:43.976 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:57:46.016 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:58:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22957899408084992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:58:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22957899408084992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:58:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22957899408084992 [0;39m ==> Parameters: 
2023-04-01 10:58:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22957899408084992 [0;39m <==    Updates: 0
2023-04-01 10:58:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22957899408084992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 10:58:03.522 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:58:04.478 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:58:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22957920341856256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:58:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22957920341856256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:58:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22957920341856256 [0;39m ==> Parameters: 
2023-04-01 10:58:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22957920341856256 [0;39m <==    Updates: 1
2023-04-01 10:58:05.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22957920341856256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 10:58:07.602 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:58:09.652 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:58:11.692 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:58:33.536 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:58:34.455 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:58:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22958046200336384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:58:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22958046200336384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:58:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22958046200336384 [0;39m ==> Parameters: 
2023-04-01 10:58:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22958046200336384 [0;39m <==    Updates: 1
2023-04-01 10:58:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22958046200336384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 10:58:35.574 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:58:37.608 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:58:39.646 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:59:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22958151024381952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 10:59:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22958151024381952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 10:59:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22958151024381952 [0;39m ==> Parameters: 
2023-04-01 10:59:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22958151024381952 [0;39m <==    Updates: 0
2023-04-01 10:59:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22958151024381952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 10:59:03.752 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:59:04.452 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:59:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22958172042039296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:59:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22958172042039296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:59:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22958172042039296 [0;39m ==> Parameters: 
2023-04-01 10:59:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22958172042039296 [0;39m <==    Updates: 1
2023-04-01 10:59:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22958172042039296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 10:59:05.808 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:59:09.883 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:59:27.826 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:59:33.532 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:59:34.480 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:59:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22958297837604864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 10:59:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22958297837604864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 10:59:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22958297837604864 [0;39m ==> Parameters: 
2023-04-01 10:59:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22958297837604864 [0;39m <==    Updates: 1
2023-04-01 10:59:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22958297837604864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 10:59:35.569 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:59:37.605 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:59:49.881 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 10:59:51.916 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:00:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22958402732953600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:00:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22958402732953600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:00:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22958402732953600 [0;39m ==> Parameters: 
2023-04-01 11:00:00.027 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22958402732953600 [0;39m <==    Updates: 0
2023-04-01 11:00:00.028 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22958402732953600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:00:03.515 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:00:04.450 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:00:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22958423691890688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:00:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22958423691890688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:00:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22958423691890688 [0;39m ==> Parameters: 
2023-04-01 11:00:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22958423691890688 [0;39m <==    Updates: 1
2023-04-01 11:00:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22958423691890688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 11:00:05.570 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:00:07.625 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:00:16.021 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:00:33.533 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:00:34.454 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:00:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22958549516816384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:00:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22958549516816384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:00:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22958549516816384 [0;39m ==> Parameters: 
2023-04-01 11:00:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22958549516816384 [0;39m <==    Updates: 1
2023-04-01 11:00:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22958549516816384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 11:00:35.589 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:00:37.641 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:00:39.687 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:00:41.732 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:01:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22958654399582208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:01:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22958654399582208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:01:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22958654399582208 [0;39m ==> Parameters: 
2023-04-01 11:01:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22958654399582208 [0;39m <==    Updates: 0
2023-04-01 11:01:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22958654399582208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:01:04.460 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:01:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22958675324964864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:01:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22958675324964864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:01:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22958675324964864 [0;39m ==> Parameters: 
2023-04-01 11:01:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22958675324964864 [0;39m <==    Updates: 1
2023-04-01 11:01:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22958675324964864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 11:01:07.596 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:01:09.654 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:01:31.720 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:01:33.762 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:01:34.444 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:01:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22958801166667776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:01:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22958801166667776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:01:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22958801166667776 [0;39m ==> Parameters: 
2023-04-01 11:01:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22958801166667776 [0;39m <==    Updates: 1
2023-04-01 11:01:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22958801166667776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 11:01:37.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:01:39.906 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:01:55.821 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:01:57.872 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:02:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22958905999101952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:02:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22958905999101952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:02:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22958905999101952 [0;39m ==> Parameters: 
2023-04-01 11:02:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22958905999101952 [0;39m <==    Updates: 0
2023-04-01 11:02:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22958905999101952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:02:04.470 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:02:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22958927016759296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:02:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22958927016759296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:02:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22958927016759296 [0;39m ==> Parameters: 
2023-04-01 11:02:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22958927016759296 [0;39m <==    Updates: 1
2023-04-01 11:02:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22958927016759296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 11:02:05.588 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:02:07.632 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:02:19.914 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:02:21.952 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:02:33.527 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:02:34.446 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:02:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22959052812324864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:02:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22959052812324864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:02:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22959052812324864 [0;39m ==> Parameters: 
2023-04-01 11:02:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22959052812324864 [0;39m <==    Updates: 1
2023-04-01 11:02:35.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22959052812324864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 11:02:35.585 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:02:37.626 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:02:46.068 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:03:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22959157657341952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:03:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22959157657341952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:03:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22959157657341952 [0;39m ==> Parameters: 
2023-04-01 11:03:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22959157657341952 [0;39m <==    Updates: 0
2023-04-01 11:03:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22959157657341952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:03:03.541 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:03:04.465 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:03:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22959178658222080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:03:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22959178658222080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:03:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22959178658222080 [0;39m ==> Parameters: 
2023-04-01 11:03:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22959178658222080 [0;39m <==    Updates: 1
2023-04-01 11:03:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22959178658222080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 11:03:07.637 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:03:09.678 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:03:11.721 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:03:34.468 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:03:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22959304499924992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:03:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22959304499924992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:03:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22959304499924992 [0;39m ==> Parameters: 
2023-04-01 11:03:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22959304499924992 [0;39m <==    Updates: 1
2023-04-01 11:03:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22959304499924992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:03:35.591 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:03:37.631 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:03:39.670 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:04:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22959409361719296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:04:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22959409361719296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:04:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22959409361719296 [0;39m ==> Parameters: 
2023-04-01 11:04:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22959409361719296 [0;39m <==    Updates: 0
2023-04-01 11:04:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22959409361719296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:04:01.727 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:04:03.782 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:04:04.483 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:04:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22959430329044992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:04:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22959430329044992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:04:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22959430329044992 [0;39m ==> Parameters: 
2023-04-01 11:04:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22959430329044992 [0;39m <==    Updates: 1
2023-04-01 11:04:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22959430329044992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 11:04:05.840 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:04:07.892 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:04:28.841 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:04:33.521 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:04:34.463 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:04:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22959556124610560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:04:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22959556124610560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:04:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22959556124610560 [0;39m ==> Parameters: 
2023-04-01 11:04:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22959556124610560 [0;39m <==    Updates: 1
2023-04-01 11:04:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22959556124610560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 11:04:35.564 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:04:37.614 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:04:52.935 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:05:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22959661007376384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:05:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22959661007376384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:05:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22959661007376384 [0;39m ==> Parameters: 
2023-04-01 11:05:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22959661007376384 [0;39m <==    Updates: 0
2023-04-01 11:05:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22959661007376384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:05:03.530 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:05:04.491 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:05:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22959681957924864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:05:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22959681957924864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:05:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22959681957924864 [0;39m ==> Parameters: 
2023-04-01 11:05:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22959681957924864 [0;39m <==    Updates: 1
2023-04-01 11:05:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22959681957924864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 11:05:05.583 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:05:07.642 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:05:14.971 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:05:17.030 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:05:33.512 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:05:34.464 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:05:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22959807782850560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:05:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22959807782850560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:05:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22959807782850560 [0;39m ==> Parameters: 
2023-04-01 11:05:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22959807782850560 [0;39m <==    Updates: 1
2023-04-01 11:05:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22959807782850560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-04-01 11:05:37.580 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:05:39.616 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:05:41.661 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:06:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22959912644644864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:06:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22959912644644864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:06:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22959912644644864 [0;39m ==> Parameters: 
2023-04-01 11:06:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22959912644644864 [0;39m <==    Updates: 0
2023-04-01 11:06:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22959912644644864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 11:06:03.494 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:06:04.444 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:06:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22959933595193344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:06:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22959933595193344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:06:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22959933595193344 [0;39m ==> Parameters: 
2023-04-01 11:06:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22959933595193344 [0;39m <==    Updates: 1
2023-04-01 11:06:05.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22959933595193344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 11:06:05.548 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:06:07.600 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:06:09.633 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:06:31.670 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:06:33.719 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:06:34.454 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:06:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22960059470450688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:06:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22960059470450688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:06:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22960059470450688 [0;39m ==> Parameters: 
2023-04-01 11:06:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22960059470450688 [0;39m <==    Updates: 1
2023-04-01 11:06:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22960059470450688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:06:35.762 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:06:39.821 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:06:57.795 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:07:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22960164286107648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:07:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22960164286107648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:07:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22960164286107648 [0;39m ==> Parameters: 
2023-04-01 11:07:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22960164286107648 [0;39m <==    Updates: 0
2023-04-01 11:07:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22960164286107648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:07:03.526 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:07:04.463 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:07:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22960185261821952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:07:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22960185261821952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:07:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22960185261821952 [0;39m ==> Parameters: 
2023-04-01 11:07:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22960185261821952 [0;39m <==    Updates: 1
2023-04-01 11:07:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22960185261821952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:07:05.582 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:07:07.625 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:07:19.854 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:07:21.889 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:07:33.532 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:07:34.480 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:07:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22960311116107776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:07:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22960311116107776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:07:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22960311116107776 [0;39m ==> Parameters: 
2023-04-01 11:07:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22960311116107776 [0;39m <==    Updates: 1
2023-04-01 11:07:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22960311116107776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:07:35.584 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:07:37.623 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:07:45.992 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:08:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22960415994679296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:08:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22960415994679296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:08:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22960415994679296 [0;39m ==> Parameters: 
2023-04-01 11:08:00.026 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22960415994679296 [0;39m <==    Updates: 0
2023-04-01 11:08:00.026 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22960415994679296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 11:08:04.470 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:08:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22960436970393600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:08:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22960436970393600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:08:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22960436970393600 [0;39m ==> Parameters: 
2023-04-01 11:08:05.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22960436970393600 [0;39m <==    Updates: 1
2023-04-01 11:08:05.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22960436970393600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:08:05.563 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:08:07.592 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:08:09.607 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:08:11.650 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:08:34.463 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:08:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22960562761764864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:08:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22960562761764864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:08:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22960562761764864 [0;39m ==> Parameters: 
2023-04-01 11:08:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22960562761764864 [0;39m <==    Updates: 1
2023-04-01 11:08:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22960562761764864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:08:35.581 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:08:37.633 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:08:39.674 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:09:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22960667606781952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:09:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22960667606781952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:09:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22960667606781952 [0;39m ==> Parameters: 
2023-04-01 11:09:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22960667606781952 [0;39m <==    Updates: 0
2023-04-01 11:09:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22960667606781952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:09:01.721 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:09:03.759 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:09:04.480 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:09:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22960688624439296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:09:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22960688624439296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:09:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22960688624439296 [0;39m ==> Parameters: 
2023-04-01 11:09:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22960688624439296 [0;39m <==    Updates: 1
2023-04-01 11:09:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22960688624439296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:09:09.894 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:09:25.795 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:09:27.829 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:09:34.474 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:09:35.000 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22960814394839040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:09:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22960814394839040 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:09:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22960814394839040 [0;39m ==> Parameters: 
2023-04-01 11:09:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22960814394839040 [0;39m <==    Updates: 1
2023-04-01 11:09:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22960814394839040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 11:09:35.564 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:09:37.608 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:09:49.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:09:51.912 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:10:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22960919273410560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:10:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22960919273410560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:10:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22960919273410560 [0;39m ==> Parameters: 
2023-04-01 11:10:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22960919273410560 [0;39m <==    Updates: 0
2023-04-01 11:10:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22960919273410560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:10:03.544 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:10:04.480 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:10:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22960940265902080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:10:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22960940265902080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:10:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22960940265902080 [0;39m ==> Parameters: 
2023-04-01 11:10:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22960940265902080 [0;39m <==    Updates: 1
2023-04-01 11:10:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22960940265902080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:10:05.586 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:10:07.628 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:10:16.003 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:10:34.459 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:10:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22961066061467648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:10:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22961066061467648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:10:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22961066061467648 [0;39m ==> Parameters: 
2023-04-01 11:10:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22961066061467648 [0;39m <==    Updates: 1
2023-04-01 11:10:35.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22961066061467648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 11:10:37.590 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:10:41.682 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:11:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22961170956816384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:11:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22961170956816384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:11:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22961170956816384 [0;39m ==> Parameters: 
2023-04-01 11:11:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22961170956816384 [0;39m <==    Updates: 0
2023-04-01 11:11:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22961170956816384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:11:03.535 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:11:04.486 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:11:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22961191940919296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:11:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22961191940919296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:11:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22961191940919296 [0;39m ==> Parameters: 
2023-04-01 11:11:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22961191940919296 [0;39m <==    Updates: 1
2023-04-01 11:11:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22961191940919296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 11:11:05.593 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:11:07.631 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:11:09.655 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:11:31.699 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:11:33.762 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:11:34.465 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:11:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22961317770039296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:11:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22961317770039296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:11:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22961317770039296 [0;39m ==> Parameters: 
2023-04-01 11:11:35.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22961317770039296 [0;39m <==    Updates: 1
2023-04-01 11:11:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22961317770039296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:11:35.794 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:11:39.878 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:11:55.820 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:11:57.863 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:12:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22961422627639296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:12:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22961422627639296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:12:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22961422627639296 [0;39m ==> Parameters: 
2023-04-01 11:12:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22961422627639296 [0;39m <==    Updates: 0
2023-04-01 11:12:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22961422627639296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:12:03.531 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:12:04.478 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:12:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22961443561410560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:12:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22961443561410560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:12:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22961443561410560 [0;39m ==> Parameters: 
2023-04-01 11:12:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22961443561410560 [0;39m <==    Updates: 1
2023-04-01 11:12:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22961443561410560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:12:07.608 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:12:21.963 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:12:34.471 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:12:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22961569382141952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:12:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22961569382141952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:12:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22961569382141952 [0;39m ==> Parameters: 
2023-04-01 11:12:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22961569382141952 [0;39m <==    Updates: 1
2023-04-01 11:12:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22961569382141952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 11:12:37.624 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:12:44.015 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:12:46.067 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:13:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22961674290073600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:13:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22961674290073600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:13:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22961674290073600 [0;39m ==> Parameters: 
2023-04-01 11:13:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22961674290073600 [0;39m <==    Updates: 0
2023-04-01 11:13:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22961674290073600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:13:03.527 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:13:04.448 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:13:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22961695232233472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:13:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22961695232233472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:13:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22961695232233472 [0;39m ==> Parameters: 
2023-04-01 11:13:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22961695232233472 [0;39m <==    Updates: 1
2023-04-01 11:13:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22961695232233472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:13:05.585 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:13:07.632 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:13:09.671 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:13:11.726 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:13:34.472 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:13:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22961821031993344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:13:35.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22961821031993344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:13:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22961821031993344 [0;39m ==> Parameters: 
2023-04-01 11:13:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22961821031993344 [0;39m <==    Updates: 1
2023-04-01 11:13:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22961821031993344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:13:35.564 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:13:37.596 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:13:39.646 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:14:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22961925902176256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:14:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22961925902176256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:14:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22961925902176256 [0;39m ==> Parameters: 
2023-04-01 11:14:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22961925902176256 [0;39m <==    Updates: 0
2023-04-01 11:14:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22961925902176256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:14:03.745 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:14:04.463 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:14:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22961946894667776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:14:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22961946894667776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:14:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22961946894667776 [0;39m ==> Parameters: 
2023-04-01 11:14:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22961946894667776 [0;39m <==    Updates: 1
2023-04-01 11:14:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22961946894667776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 11:14:05.780 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:14:07.827 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:14:09.855 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:14:25.827 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:14:27.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:14:33.531 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:14:34.458 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:14:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22962072698621952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:14:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22962072698621952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:14:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22962072698621952 [0;39m ==> Parameters: 
2023-04-01 11:14:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22962072698621952 [0;39m <==    Updates: 1
2023-04-01 11:14:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22962072698621952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:14:37.610 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:14:49.934 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:14:51.980 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:15:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22962177589776384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:15:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22962177589776384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:15:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22962177589776384 [0;39m ==> Parameters: 
2023-04-01 11:15:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22962177589776384 [0;39m <==    Updates: 0
2023-04-01 11:15:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22962177589776384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:15:03.526 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:15:04.477 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:15:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22962198536130560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:15:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22962198536130560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:15:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22962198536130560 [0;39m ==> Parameters: 
2023-04-01 11:15:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22962198536130560 [0;39m <==    Updates: 1
2023-04-01 11:15:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22962198536130560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 11:15:07.622 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:15:14.029 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:15:16.068 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:15:34.452 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:15:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22962324377833472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:15:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22962324377833472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:15:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22962324377833472 [0;39m ==> Parameters: 
2023-04-01 11:15:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22962324377833472 [0;39m <==    Updates: 1
2023-04-01 11:15:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22962324377833472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 11:15:35.583 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:15:37.622 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:15:39.657 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:15:41.698 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:16:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22962429248016384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:16:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22962429248016384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:16:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22962429248016384 [0;39m ==> Parameters: 
2023-04-01 11:16:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22962429248016384 [0;39m <==    Updates: 0
2023-04-01 11:16:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22962429248016384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:16:03.537 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:16:04.445 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:16:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22962450181787648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:16:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22962450181787648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:16:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22962450181787648 [0;39m ==> Parameters: 
2023-04-01 11:16:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22962450181787648 [0;39m <==    Updates: 1
2023-04-01 11:16:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22962450181787648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:16:05.566 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:16:07.619 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:16:09.669 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:16:33.760 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:16:34.465 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:16:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22962576036073472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:16:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22962576036073472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:16:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22962576036073472 [0;39m ==> Parameters: 
2023-04-01 11:16:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22962576036073472 [0;39m <==    Updates: 1
2023-04-01 11:16:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22962576036073472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:16:35.817 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:16:39.876 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:16:57.860 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:17:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22962680893673472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:17:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22962680893673472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:17:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22962680893673472 [0;39m ==> Parameters: 
2023-04-01 11:17:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22962680893673472 [0;39m <==    Updates: 0
2023-04-01 11:17:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22962680893673472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:17:04.453 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:17:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22962701873582080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:17:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22962701873582080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:17:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22962701873582080 [0;39m ==> Parameters: 
2023-04-01 11:17:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22962701873582080 [0;39m <==    Updates: 1
2023-04-01 11:17:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22962701873582080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 11:17:05.572 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:17:07.616 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:17:21.947 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:17:33.536 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:17:34.468 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:17:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22962827698507776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:17:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22962827698507776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:17:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22962827698507776 [0;39m ==> Parameters: 
2023-04-01 11:17:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22962827698507776 [0;39m <==    Updates: 1
2023-04-01 11:17:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22962827698507776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 11:17:35.584 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:17:37.641 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:17:44.010 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:17:46.040 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:18:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22962932551913472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:18:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22962932551913472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:18:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22962932551913472 [0;39m ==> Parameters: 
2023-04-01 11:18:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22962932551913472 [0;39m <==    Updates: 0
2023-04-01 11:18:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22962932551913472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:18:04.467 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:18:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22962953544404992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:18:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22962953544404992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:18:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22962953544404992 [0;39m ==> Parameters: 
2023-04-01 11:18:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22962953544404992 [0;39m <==    Updates: 1
2023-04-01 11:18:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22962953544404992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:18:05.575 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:18:07.620 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:18:09.656 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:18:11.694 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:18:33.546 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:18:34.466 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:18:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22963079344164864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:18:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22963079344164864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:18:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22963079344164864 [0;39m ==> Parameters: 
2023-04-01 11:18:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22963079344164864 [0;39m <==    Updates: 1
2023-04-01 11:18:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22963079344164864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:18:35.601 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:18:37.657 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:18:39.703 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:19:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22963184218542080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:19:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22963184218542080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:19:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22963184218542080 [0;39m ==> Parameters: 
2023-04-01 11:19:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22963184218542080 [0;39m <==    Updates: 0
2023-04-01 11:19:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22963184218542080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:19:01.766 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:19:03.819 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:19:04.471 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:19:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22963205160701952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:19:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22963205160701952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:19:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22963205160701952 [0;39m ==> Parameters: 
2023-04-01 11:19:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22963205160701952 [0;39m <==    Updates: 1
2023-04-01 11:19:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22963205160701952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:19:05.875 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:19:07.906 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:19:09.927 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:19:27.930 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:19:33.537 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:19:34.456 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:19:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22963331040153600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:19:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22963331040153600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:19:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22963331040153600 [0;39m ==> Parameters: 
2023-04-01 11:19:35.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22963331040153600 [0;39m <==    Updates: 1
2023-04-01 11:19:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22963331040153600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:19:35.578 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:19:37.595 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:19:49.974 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:19:52.015 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:20:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22963435868393472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:20:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22963435868393472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:20:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22963435868393472 [0;39m ==> Parameters: 
2023-04-01 11:20:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22963435868393472 [0;39m <==    Updates: 0
2023-04-01 11:20:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22963435868393472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:20:03.539 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:20:04.460 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:20:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22963456831524864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:20:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22963456831524864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:20:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22963456831524864 [0;39m ==> Parameters: 
2023-04-01 11:20:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22963456831524864 [0;39m <==    Updates: 1
2023-04-01 11:20:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22963456831524864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:20:05.595 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:20:07.662 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:20:16.086 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:20:33.537 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:20:34.459 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:20:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22963582652256256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:20:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22963582652256256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:20:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22963582652256256 [0;39m ==> Parameters: 
2023-04-01 11:20:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22963582652256256 [0;39m <==    Updates: 1
2023-04-01 11:20:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22963582652256256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:20:35.567 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:20:37.620 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:20:39.669 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:20:41.709 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:21:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22963687509856256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:21:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22963687509856256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:21:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22963687509856256 [0;39m ==> Parameters: 
2023-04-01 11:21:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22963687509856256 [0;39m <==    Updates: 0
2023-04-01 11:21:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22963687509856256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:21:03.528 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:21:04.473 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:21:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22963708489764864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:21:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22963708489764864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:21:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22963708489764864 [0;39m ==> Parameters: 
2023-04-01 11:21:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22963708489764864 [0;39m <==    Updates: 1
2023-04-01 11:21:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22963708489764864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:21:05.568 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:21:07.622 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:21:09.662 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:21:31.713 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:21:33.742 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:21:34.471 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:21:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22963834297913344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:21:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22963834297913344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:21:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22963834297913344 [0;39m ==> Parameters: 
2023-04-01 11:21:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22963834297913344 [0;39m <==    Updates: 1
2023-04-01 11:21:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22963834297913344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:21:35.776 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:21:37.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:21:39.855 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:21:55.781 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:21:57.837 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:22:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22963939168096256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:22:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22963939168096256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:22:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22963939168096256 [0;39m ==> Parameters: 
2023-04-01 11:22:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22963939168096256 [0;39m <==    Updates: 0
2023-04-01 11:22:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22963939168096256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 11:22:03.527 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:22:04.476 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:22:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22963960127033344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:22:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22963960127033344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:22:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22963960127033344 [0;39m ==> Parameters: 
2023-04-01 11:22:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22963960127033344 [0;39m <==    Updates: 1
2023-04-01 11:22:05.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22963960127033344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 11:22:05.576 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:22:07.614 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:22:19.887 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:22:21.924 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:22:33.507 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:22:34.458 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:22:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22964085964541952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:22:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22964085964541952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:22:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22964085964541952 [0;39m ==> Parameters: 
2023-04-01 11:22:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22964085964541952 [0;39m <==    Updates: 1
2023-04-01 11:22:35.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22964085964541952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 11:22:37.624 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:22:43.994 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:22:46.047 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:23:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22964190847307776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:23:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22964190847307776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:23:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22964190847307776 [0;39m ==> Parameters: 
2023-04-01 11:23:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22964190847307776 [0;39m <==    Updates: 0
2023-04-01 11:23:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22964190847307776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:23:04.463 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:23:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22964211831410688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:23:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22964211831410688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:23:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22964211831410688 [0;39m ==> Parameters: 
2023-04-01 11:23:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22964211831410688 [0;39m <==    Updates: 1
2023-04-01 11:23:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22964211831410688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 11:23:07.594 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:23:09.622 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:23:11.665 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:23:33.529 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:23:34.452 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:23:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22964337618587648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:23:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22964337618587648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:23:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22964337618587648 [0;39m ==> Parameters: 
2023-04-01 11:23:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22964337618587648 [0;39m <==    Updates: 1
2023-04-01 11:23:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22964337618587648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:23:35.560 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:23:37.606 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:23:39.662 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:24:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22964442522324992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:24:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22964442522324992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:24:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22964442522324992 [0;39m ==> Parameters: 
2023-04-01 11:24:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22964442522324992 [0;39m <==    Updates: 0
2023-04-01 11:24:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22964442522324992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:24:01.701 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:24:03.733 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:24:04.465 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:24:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22964463472873472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:24:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22964463472873472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:24:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22964463472873472 [0;39m ==> Parameters: 
2023-04-01 11:24:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22964463472873472 [0;39m <==    Updates: 1
2023-04-01 11:24:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22964463472873472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:24:09.897 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:24:25.780 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:24:27.822 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:24:33.528 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:24:34.461 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:24:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22964589306187776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:24:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22964589306187776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:24:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22964589306187776 [0;39m ==> Parameters: 
2023-04-01 11:24:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22964589306187776 [0;39m <==    Updates: 1
2023-04-01 11:24:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22964589306187776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 11:24:37.624 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:24:49.882 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:24:51.906 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:25:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22964694184759296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:25:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22964694184759296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:25:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22964694184759296 [0;39m ==> Parameters: 
2023-04-01 11:25:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22964694184759296 [0;39m <==    Updates: 0
2023-04-01 11:25:00.026 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22964694184759296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:25:04.461 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:25:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22964715126919168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:25:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22964715126919168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:25:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22964715126919168 [0;39m ==> Parameters: 
2023-04-01 11:25:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22964715126919168 [0;39m <==    Updates: 1
2023-04-01 11:25:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22964715126919168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:25:05.582 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:25:07.625 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:25:13.961 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:25:15.986 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:25:34.477 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:25:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22964840956039168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:25:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22964840956039168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:25:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22964840956039168 [0;39m ==> Parameters: 
2023-04-01 11:25:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22964840956039168 [0;39m <==    Updates: 1
2023-04-01 11:25:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22964840956039168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:25:37.589 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:25:39.643 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:25:41.685 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:26:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22964945788473344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:26:00.001 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22964945788473344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:26:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22964945788473344 [0;39m ==> Parameters: 
2023-04-01 11:26:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22964945788473344 [0;39m <==    Updates: 0
2023-04-01 11:26:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22964945788473344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:26:04.466 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:26:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22964966810324992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:26:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22964966810324992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:26:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22964966810324992 [0;39m ==> Parameters: 
2023-04-01 11:26:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22964966810324992 [0;39m <==    Updates: 1
2023-04-01 11:26:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22964966810324992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:26:07.615 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:26:09.660 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:26:31.719 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:26:33.759 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:26:34.463 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:26:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22965092601696256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:26:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22965092601696256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:26:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22965092601696256 [0;39m ==> Parameters: 
2023-04-01 11:26:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22965092601696256 [0;39m <==    Updates: 1
2023-04-01 11:26:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22965092601696256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:26:35.796 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:26:37.840 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:26:39.893 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:26:55.830 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:26:57.881 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:27:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22965197480267776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:27:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22965197480267776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:27:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22965197480267776 [0;39m ==> Parameters: 
2023-04-01 11:27:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22965197480267776 [0;39m <==    Updates: 0
2023-04-01 11:27:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22965197480267776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 11:27:03.528 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:27:04.463 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:27:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22965218464370688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:27:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22965218464370688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:27:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22965218464370688 [0;39m ==> Parameters: 
2023-04-01 11:27:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22965218464370688 [0;39m <==    Updates: 1
2023-04-01 11:27:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22965218464370688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:27:05.560 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:27:07.609 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:27:19.930 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:27:21.981 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:27:33.545 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:27:34.481 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:27:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22965344285102080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:27:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22965344285102080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:27:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22965344285102080 [0;39m ==> Parameters: 
2023-04-01 11:27:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22965344285102080 [0;39m <==    Updates: 1
2023-04-01 11:27:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22965344285102080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:27:35.588 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:27:37.626 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:27:44.045 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:27:46.091 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:28:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22965449146896384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:28:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22965449146896384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:28:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22965449146896384 [0;39m ==> Parameters: 
2023-04-01 11:28:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22965449146896384 [0;39m <==    Updates: 0
2023-04-01 11:28:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22965449146896384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 11:28:03.519 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:28:04.483 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:28:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22965470130999296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:28:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22965470130999296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:28:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22965470130999296 [0;39m ==> Parameters: 
2023-04-01 11:28:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22965470130999296 [0;39m <==    Updates: 1
2023-04-01 11:28:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22965470130999296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:28:07.620 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:28:09.663 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:28:11.711 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:28:34.470 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:28:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22965595934953472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:28:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22965595934953472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:28:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22965595934953472 [0;39m ==> Parameters: 
2023-04-01 11:28:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22965595934953472 [0;39m <==    Updates: 1
2023-04-01 11:28:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22965595934953472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:28:35.556 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:28:37.597 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:28:39.635 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:29:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22965700784164864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:29:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22965700784164864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:29:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22965700784164864 [0;39m ==> Parameters: 
2023-04-01 11:29:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22965700784164864 [0;39m <==    Updates: 0
2023-04-01 11:29:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22965700784164864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-04-01 11:29:03.741 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:29:04.445 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:29:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22965721764073472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:29:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22965721764073472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:29:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22965721764073472 [0;39m ==> Parameters: 
2023-04-01 11:29:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22965721764073472 [0;39m <==    Updates: 1
2023-04-01 11:29:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22965721764073472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:29:07.826 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:29:09.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:29:25.787 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:29:27.825 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:29:34.462 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:29:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22965847622553600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:29:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22965847622553600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:29:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22965847622553600 [0;39m ==> Parameters: 
2023-04-01 11:29:35.026 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22965847622553600 [0;39m <==    Updates: 1
2023-04-01 11:29:35.026 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22965847622553600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:29:35.548 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:29:37.602 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:29:49.884 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:29:51.929 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:30:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22965952475959296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:30:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22965952475959296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:30:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22965952475959296 [0;39m ==> Parameters: 
2023-04-01 11:30:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22965952475959296 [0;39m <==    Updates: 0
2023-04-01 11:30:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22965952475959296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:30:04.445 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:30:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22965973401341952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:30:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22965973401341952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:30:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22965973401341952 [0;39m ==> Parameters: 
2023-04-01 11:30:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22965973401341952 [0;39m <==    Updates: 1
2023-04-01 11:30:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22965973401341952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:30:05.563 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:30:07.606 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:30:13.979 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:30:16.038 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:30:34.453 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:30:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22966099272404992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:30:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22966099272404992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:30:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22966099272404992 [0;39m ==> Parameters: 
2023-04-01 11:30:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22966099272404992 [0;39m <==    Updates: 1
2023-04-01 11:30:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22966099272404992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:30:35.565 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:30:37.602 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:30:39.642 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:30:41.678 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:31:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22966204121616384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:31:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22966204121616384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:31:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22966204121616384 [0;39m ==> Parameters: 
2023-04-01 11:31:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22966204121616384 [0;39m <==    Updates: 0
2023-04-01 11:31:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22966204121616384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:31:03.529 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:31:04.484 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:31:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22966225093136384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:31:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22966225093136384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:31:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22966225093136384 [0;39m ==> Parameters: 
2023-04-01 11:31:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22966225093136384 [0;39m <==    Updates: 1
2023-04-01 11:31:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22966225093136384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:31:07.637 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:31:09.687 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:31:33.767 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:31:34.472 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:31:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22966350934839296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:31:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22966350934839296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:31:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22966350934839296 [0;39m ==> Parameters: 
2023-04-01 11:31:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22966350934839296 [0;39m <==    Updates: 1
2023-04-01 11:31:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22966350934839296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:31:39.893 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:31:57.844 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:32:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22966455767273472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:32:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22966455767273472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:32:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22966455767273472 [0;39m ==> Parameters: 
2023-04-01 11:32:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22966455767273472 [0;39m <==    Updates: 0
2023-04-01 11:32:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22966455767273472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:32:03.541 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:32:04.476 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:32:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22966476742987776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:32:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22966476742987776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:32:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22966476742987776 [0;39m ==> Parameters: 
2023-04-01 11:32:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22966476742987776 [0;39m <==    Updates: 1
2023-04-01 11:32:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22966476742987776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 11:32:07.632 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:32:19.885 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:32:21.920 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:32:34.480 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:32:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22966602563719168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:32:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22966602563719168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:32:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22966602563719168 [0;39m ==> Parameters: 
2023-04-01 11:32:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22966602563719168 [0;39m <==    Updates: 1
2023-04-01 11:32:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22966602563719168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:32:35.566 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:32:37.607 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:32:46.035 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:33:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22966707417124864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:33:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22966707417124864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:33:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22966707417124864 [0;39m ==> Parameters: 
2023-04-01 11:33:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22966707417124864 [0;39m <==    Updates: 0
2023-04-01 11:33:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22966707417124864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 11:33:03.527 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:33:04.469 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:33:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22966728401227776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:33:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22966728401227776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:33:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22966728401227776 [0;39m ==> Parameters: 
2023-04-01 11:33:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22966728401227776 [0;39m <==    Updates: 1
2023-04-01 11:33:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22966728401227776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:33:05.565 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:33:07.620 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:33:11.700 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:33:33.529 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:33:34.463 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:33:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22966854226153472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:33:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22966854226153472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:33:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22966854226153472 [0;39m ==> Parameters: 
2023-04-01 11:33:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22966854226153472 [0;39m <==    Updates: 1
2023-04-01 11:33:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22966854226153472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:33:37.644 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:33:39.684 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:34:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22966959096336384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:34:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22966959096336384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:34:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22966959096336384 [0;39m ==> Parameters: 
2023-04-01 11:34:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22966959096336384 [0;39m <==    Updates: 0
2023-04-01 11:34:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22966959096336384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:34:03.789 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:34:04.469 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:34:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22966980072050688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:34:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22966980072050688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:34:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22966980072050688 [0;39m ==> Parameters: 
2023-04-01 11:34:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22966980072050688 [0;39m <==    Updates: 1
2023-04-01 11:34:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22966980072050688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:34:09.909 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:34:25.858 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:34:27.906 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:34:33.532 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:34:34.469 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:34:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22967105855033344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:34:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22967105855033344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:34:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22967105855033344 [0;39m ==> Parameters: 
2023-04-01 11:34:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22967105855033344 [0;39m <==    Updates: 1
2023-04-01 11:34:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22967105855033344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 11:34:35.559 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:34:37.609 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:34:49.977 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:34:52.024 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:35:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22967210721021952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:35:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22967210721021952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:35:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22967210721021952 [0;39m ==> Parameters: 
2023-04-01 11:35:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22967210721021952 [0;39m <==    Updates: 0
2023-04-01 11:35:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22967210721021952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 11:35:03.526 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:35:04.460 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:35:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22967231688347648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:35:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22967231688347648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:35:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22967231688347648 [0;39m ==> Parameters: 
2023-04-01 11:35:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22967231688347648 [0;39m <==    Updates: 1
2023-04-01 11:35:05.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22967231688347648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 11:35:05.578 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:35:07.629 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:35:14.060 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:35:16.088 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:35:34.468 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:35:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22967357563604992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:35:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22967357563604992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:35:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22967357563604992 [0;39m ==> Parameters: 
2023-04-01 11:35:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22967357563604992 [0;39m <==    Updates: 1
2023-04-01 11:35:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22967357563604992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 11:35:37.589 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:35:39.650 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:35:41.705 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:36:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22967462396039168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:36:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22967462396039168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:36:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22967462396039168 [0;39m ==> Parameters: 
2023-04-01 11:36:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22967462396039168 [0;39m <==    Updates: 0
2023-04-01 11:36:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22967462396039168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:36:03.534 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:36:04.471 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:36:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22967483401113600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:36:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22967483401113600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:36:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22967483401113600 [0;39m ==> Parameters: 
2023-04-01 11:36:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22967483401113600 [0;39m <==    Updates: 1
2023-04-01 11:36:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22967483401113600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 11:36:05.588 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:36:07.645 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:36:09.697 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:36:31.759 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:36:33.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:36:34.472 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:36:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22967609230233600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:36:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22967609230233600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:36:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22967609230233600 [0;39m ==> Parameters: 
2023-04-01 11:36:35.025 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22967609230233600 [0;39m <==    Updates: 1
2023-04-01 11:36:35.026 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22967609230233600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:36:37.889 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:36:39.923 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:36:57.919 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:37:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22967714041696256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:37:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22967714041696256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:37:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22967714041696256 [0;39m ==> Parameters: 
2023-04-01 11:37:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22967714041696256 [0;39m <==    Updates: 0
2023-04-01 11:37:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22967714041696256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:37:03.498 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:37:04.463 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:37:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22967735042576384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:37:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22967735042576384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:37:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22967735042576384 [0;39m ==> Parameters: 
2023-04-01 11:37:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22967735042576384 [0;39m <==    Updates: 1
2023-04-01 11:37:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22967735042576384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 11:37:07.580 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:37:19.976 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:37:22.019 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:37:34.452 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:37:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22967860871696384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:37:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22967860871696384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:37:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22967860871696384 [0;39m ==> Parameters: 
2023-04-01 11:37:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22967860871696384 [0;39m <==    Updates: 1
2023-04-01 11:37:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22967860871696384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:37:35.602 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:37:37.645 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:37:44.047 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:37:46.099 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:38:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22967965750267904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:38:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22967965750267904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:38:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22967965750267904 [0;39m ==> Parameters: 
2023-04-01 11:38:00.026 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22967965750267904 [0;39m <==    Updates: 0
2023-04-01 11:38:00.027 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22967965750267904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:38:03.496 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:38:04.462 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:38:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22967986679844864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:38:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22967986679844864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:38:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22967986679844864 [0;39m ==> Parameters: 
2023-04-01 11:38:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22967986679844864 [0;39m <==    Updates: 1
2023-04-01 11:38:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22967986679844864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 11:38:05.552 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:38:07.606 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:38:09.646 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:38:11.696 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:38:34.458 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:38:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22968112496381952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:38:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22968112496381952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:38:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22968112496381952 [0;39m ==> Parameters: 
2023-04-01 11:38:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22968112496381952 [0;39m <==    Updates: 1
2023-04-01 11:38:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22968112496381952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:38:37.602 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:38:39.640 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:39:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22968217395924992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:39:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22968217395924992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:39:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22968217395924992 [0;39m ==> Parameters: 
2023-04-01 11:39:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22968217395924992 [0;39m <==    Updates: 0
2023-04-01 11:39:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22968217395924992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 11:39:01.685 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:39:03.739 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:39:04.471 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:39:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22968238375833600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:39:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22968238375833600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:39:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22968238375833600 [0;39m ==> Parameters: 
2023-04-01 11:39:05.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22968238375833600 [0;39m <==    Updates: 1
2023-04-01 11:39:05.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22968238375833600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:39:07.822 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:39:09.862 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:39:25.802 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:39:27.860 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:39:33.535 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:39:34.467 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:39:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22968364150427648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:39:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22968364150427648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:39:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22968364150427648 [0;39m ==> Parameters: 
2023-04-01 11:39:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22968364150427648 [0;39m <==    Updates: 1
2023-04-01 11:39:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22968364150427648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:39:35.579 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:39:37.620 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:39:51.965 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:40:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22968469062553600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:40:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22968469062553600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:40:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22968469062553600 [0;39m ==> Parameters: 
2023-04-01 11:40:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22968469062553600 [0;39m <==    Updates: 0
2023-04-01 11:40:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22968469062553600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:40:04.468 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:40:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22968490025684992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:40:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22968490025684992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:40:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22968490025684992 [0;39m ==> Parameters: 
2023-04-01 11:40:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22968490025684992 [0;39m <==    Updates: 1
2023-04-01 11:40:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22968490025684992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:40:07.643 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:40:14.023 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:40:16.082 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:40:33.528 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:40:34.478 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:40:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22968615829639168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:40:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22968615829639168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:40:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22968615829639168 [0;39m ==> Parameters: 
2023-04-01 11:40:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22968615829639168 [0;39m <==    Updates: 1
2023-04-01 11:40:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22968615829639168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:40:37.613 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:40:39.668 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:40:41.707 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:41:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22968720708210688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:41:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22968720708210688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:41:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22968720708210688 [0;39m ==> Parameters: 
2023-04-01 11:41:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22968720708210688 [0;39m <==    Updates: 0
2023-04-01 11:41:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22968720708210688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:41:03.544 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:41:04.480 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:41:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22968741671342080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:41:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22968741671342080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:41:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22968741671342080 [0;39m ==> Parameters: 
2023-04-01 11:41:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22968741671342080 [0;39m <==    Updates: 1
2023-04-01 11:41:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22968741671342080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:41:07.643 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:41:09.677 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:41:33.760 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:41:34.457 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:41:35.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22968867525627904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:41:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22968867525627904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:41:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22968867525627904 [0;39m ==> Parameters: 
2023-04-01 11:41:35.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22968867525627904 [0;39m <==    Updates: 1
2023-04-01 11:41:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22968867525627904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:41:35.794 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:41:37.847 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:41:39.892 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:41:55.800 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:41:57.836 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:42:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22968972345479168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:42:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22968972345479168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:42:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22968972345479168 [0;39m ==> Parameters: 
2023-04-01 11:42:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22968972345479168 [0;39m <==    Updates: 0
2023-04-01 11:42:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22968972345479168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 11:42:03.534 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:42:04.469 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:42:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22968993346359296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:42:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22968993346359296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:42:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22968993346359296 [0;39m ==> Parameters: 
2023-04-01 11:42:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22968993346359296 [0;39m <==    Updates: 1
2023-04-01 11:42:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22968993346359296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 11:42:07.631 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:42:19.891 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:42:21.928 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:42:33.516 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:42:34.468 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:42:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22969119150313472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:42:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22969119150313472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:42:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22969119150313472 [0;39m ==> Parameters: 
2023-04-01 11:42:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22969119150313472 [0;39m <==    Updates: 1
2023-04-01 11:42:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22969119150313472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:42:35.557 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:42:37.609 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:42:43.984 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:42:46.014 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:43:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22969224033079296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:43:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22969224033079296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:43:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22969224033079296 [0;39m ==> Parameters: 
2023-04-01 11:43:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22969224033079296 [0;39m <==    Updates: 0
2023-04-01 11:43:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22969224033079296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:43:04.456 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:43:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22969245000404992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:43:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22969245000404992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:43:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22969245000404992 [0;39m ==> Parameters: 
2023-04-01 11:43:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22969245000404992 [0;39m <==    Updates: 1
2023-04-01 11:43:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22969245000404992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:43:05.557 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:43:07.587 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:43:09.640 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:43:11.678 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:43:33.535 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:43:34.481 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:43:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22969370812747776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:43:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22969370812747776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:43:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22969370812747776 [0;39m ==> Parameters: 
2023-04-01 11:43:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22969370812747776 [0;39m <==    Updates: 1
2023-04-01 11:43:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22969370812747776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:43:35.585 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:43:37.625 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:43:39.666 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:44:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22969475691319296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:44:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22969475691319296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:44:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22969475691319296 [0;39m ==> Parameters: 
2023-04-01 11:44:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22969475691319296 [0;39m <==    Updates: 0
2023-04-01 11:44:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22969475691319296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:44:01.702 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:44:03.737 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:44:04.442 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:44:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22969496608313344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:44:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22969496608313344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:44:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22969496608313344 [0;39m ==> Parameters: 
2023-04-01 11:44:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22969496608313344 [0;39m <==    Updates: 1
2023-04-01 11:44:05.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22969496608313344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 11:44:05.764 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:44:07.819 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:44:09.859 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:44:27.841 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:44:34.477 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:44:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22969622437433344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:44:35.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22969622437433344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:44:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22969622437433344 [0;39m ==> Parameters: 
2023-04-01 11:44:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22969622437433344 [0;39m <==    Updates: 1
2023-04-01 11:44:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22969622437433344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:44:35.581 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:44:37.624 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:44:51.959 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:45:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22969727316004864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:45:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22969727316004864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:45:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22969727316004864 [0;39m ==> Parameters: 
2023-04-01 11:45:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22969727316004864 [0;39m <==    Updates: 0
2023-04-01 11:45:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22969727316004864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:45:03.531 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:45:04.465 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:45:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22969748304302080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:45:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22969748304302080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:45:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22969748304302080 [0;39m ==> Parameters: 
2023-04-01 11:45:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22969748304302080 [0;39m <==    Updates: 1
2023-04-01 11:45:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22969748304302080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 11:45:05.574 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:45:07.598 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:45:14.018 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:45:16.077 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:45:34.448 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:45:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22969874137616384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:45:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22969874137616384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:45:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22969874137616384 [0;39m ==> Parameters: 
2023-04-01 11:45:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22969874137616384 [0;39m <==    Updates: 1
2023-04-01 11:45:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22969874137616384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:45:35.553 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:45:37.608 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:45:41.704 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:46:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22969978961661952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:46:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22969978961661952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:46:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22969978961661952 [0;39m ==> Parameters: 
2023-04-01 11:46:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22969978961661952 [0;39m <==    Updates: 0
2023-04-01 11:46:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22969978961661952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:46:04.470 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:46:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22969999987707904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:46:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22969999987707904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:46:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22969999987707904 [0;39m ==> Parameters: 
2023-04-01 11:46:05.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22969999987707904 [0;39m <==    Updates: 1
2023-04-01 11:46:05.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22969999987707904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:46:05.579 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:46:07.626 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:46:09.667 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:46:33.776 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:46:34.475 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:46:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22970125774884864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:46:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22970125774884864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:46:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22970125774884864 [0;39m ==> Parameters: 
2023-04-01 11:46:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22970125774884864 [0;39m <==    Updates: 1
2023-04-01 11:46:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22970125774884864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:46:35.829 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:46:39.925 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:46:55.834 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:46:57.890 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:47:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22970230632484864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:47:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22970230632484864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:47:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22970230632484864 [0;39m ==> Parameters: 
2023-04-01 11:47:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22970230632484864 [0;39m <==    Updates: 0
2023-04-01 11:47:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22970230632484864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 11:47:04.460 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:47:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22970251604004864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:47:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22970251604004864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:47:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22970251604004864 [0;39m ==> Parameters: 
2023-04-01 11:47:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22970251604004864 [0;39m <==    Updates: 1
2023-04-01 11:47:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22970251604004864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 11:47:05.583 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:47:07.608 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:47:19.933 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:47:21.972 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:47:34.471 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:47:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22970377416347648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:47:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22970377416347648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:47:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22970377416347648 [0;39m ==> Parameters: 
2023-04-01 11:47:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22970377416347648 [0;39m <==    Updates: 1
2023-04-01 11:47:35.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22970377416347648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 11:47:35.577 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:47:37.623 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:47:44.024 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:47:46.062 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:48:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22970482311696384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:48:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22970482311696384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:48:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22970482311696384 [0;39m ==> Parameters: 
2023-04-01 11:48:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22970482311696384 [0;39m <==    Updates: 0
2023-04-01 11:48:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22970482311696384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:48:03.541 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:48:04.472 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:48:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22970503245467648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:48:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22970503245467648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:48:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22970503245467648 [0;39m ==> Parameters: 
2023-04-01 11:48:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22970503245467648 [0;39m <==    Updates: 1
2023-04-01 11:48:05.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22970503245467648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 11:48:05.580 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:48:07.633 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:48:11.729 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:48:33.530 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:48:34.462 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:48:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22970629095559168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:48:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22970629095559168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:48:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22970629095559168 [0;39m ==> Parameters: 
2023-04-01 11:48:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22970629095559168 [0;39m <==    Updates: 1
2023-04-01 11:48:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22970629095559168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:48:35.567 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:48:37.596 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:48:39.639 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:49:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22970733982519296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:49:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22970733982519296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:49:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22970733982519296 [0;39m ==> Parameters: 
2023-04-01 11:49:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22970733982519296 [0;39m <==    Updates: 0
2023-04-01 11:49:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22970733982519296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:49:03.726 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:49:04.473 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:49:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22970754899513344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:49:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22970754899513344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:49:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22970754899513344 [0;39m ==> Parameters: 
2023-04-01 11:49:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22970754899513344 [0;39m <==    Updates: 1
2023-04-01 11:49:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22970754899513344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:49:05.795 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:49:09.902 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:49:25.779 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:49:27.832 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:49:34.443 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:49:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22970880741216256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:49:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22970880741216256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:49:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22970880741216256 [0;39m ==> Parameters: 
2023-04-01 11:49:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22970880741216256 [0;39m <==    Updates: 1
2023-04-01 11:49:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22970880741216256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:49:37.598 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:49:51.955 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:50:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22970985590427648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:50:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22970985590427648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:50:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22970985590427648 [0;39m ==> Parameters: 
2023-04-01 11:50:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22970985590427648 [0;39m <==    Updates: 0
2023-04-01 11:50:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22970985590427648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:50:04.466 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:50:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22971006599696384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:50:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22971006599696384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:50:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22971006599696384 [0;39m ==> Parameters: 
2023-04-01 11:50:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22971006599696384 [0;39m <==    Updates: 1
2023-04-01 11:50:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22971006599696384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 11:50:07.613 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:50:14.010 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:50:16.059 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:50:34.478 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:50:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22971132399456256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:50:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22971132399456256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:50:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22971132399456256 [0;39m ==> Parameters: 
2023-04-01 11:50:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22971132399456256 [0;39m <==    Updates: 1
2023-04-01 11:50:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22971132399456256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:50:37.611 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:50:41.705 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:51:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22971237269639168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:51:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22971237269639168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:51:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22971237269639168 [0;39m ==> Parameters: 
2023-04-01 11:51:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22971237269639168 [0;39m <==    Updates: 0
2023-04-01 11:51:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22971237269639168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:51:03.540 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:51:04.471 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:51:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22971258215993344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:51:05.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22971258215993344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:51:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22971258215993344 [0;39m ==> Parameters: 
2023-04-01 11:51:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22971258215993344 [0;39m <==    Updates: 1
2023-04-01 11:51:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22971258215993344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:51:07.628 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:51:09.667 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:51:33.769 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:51:34.470 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:51:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22971384045113344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:51:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22971384045113344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:51:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22971384045113344 [0;39m ==> Parameters: 
2023-04-01 11:51:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22971384045113344 [0;39m <==    Updates: 1
2023-04-01 11:51:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22971384045113344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:51:35.808 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:51:37.861 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:51:39.902 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:51:55.837 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:51:57.873 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:52:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22971488940462080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:52:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22971488940462080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:52:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22971488940462080 [0;39m ==> Parameters: 
2023-04-01 11:52:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22971488940462080 [0;39m <==    Updates: 0
2023-04-01 11:52:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22971488940462080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:52:04.462 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:52:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22971509907787776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:52:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22971509907787776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:52:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22971509907787776 [0;39m ==> Parameters: 
2023-04-01 11:52:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22971509907787776 [0;39m <==    Updates: 1
2023-04-01 11:52:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22971509907787776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 11:52:05.568 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:52:07.598 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:52:19.941 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:52:21.978 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:52:33.512 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:52:34.462 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:52:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22971635736907776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:52:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22971635736907776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:52:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22971635736907776 [0;39m ==> Parameters: 
2023-04-01 11:52:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22971635736907776 [0;39m <==    Updates: 1
2023-04-01 11:52:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22971635736907776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 11:52:35.553 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:52:37.597 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:52:46.088 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:53:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22971740623867904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:53:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22971740623867904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:53:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22971740623867904 [0;39m ==> Parameters: 
2023-04-01 11:53:00.028 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22971740623867904 [0;39m <==    Updates: 0
2023-04-01 11:53:00.028 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22971740623867904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 11:53:03.519 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:53:04.468 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:53:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22971761561833472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:53:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22971761561833472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:53:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22971761561833472 [0;39m ==> Parameters: 
2023-04-01 11:53:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22971761561833472 [0;39m <==    Updates: 1
2023-04-01 11:53:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22971761561833472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:53:05.555 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:53:07.612 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:53:09.664 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:53:11.712 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:53:33.528 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:53:34.460 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:53:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22971887390953472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:53:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22971887390953472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:53:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22971887390953472 [0;39m ==> Parameters: 
2023-04-01 11:53:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22971887390953472 [0;39m <==    Updates: 1
2023-04-01 11:53:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22971887390953472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:53:35.571 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:53:37.613 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:53:39.667 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:54:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22971992273719296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:54:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22971992273719296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:54:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22971992273719296 [0;39m ==> Parameters: 
2023-04-01 11:54:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22971992273719296 [0;39m <==    Updates: 0
2023-04-01 11:54:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22971992273719296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:54:03.738 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:54:04.470 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:54:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22972013186519040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:54:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22972013186519040 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:54:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22972013186519040 [0;39m ==> Parameters: 
2023-04-01 11:54:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22972013186519040 [0;39m <==    Updates: 1
2023-04-01 11:54:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22972013186519040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:54:05.775 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:54:09.856 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:54:25.794 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:54:27.841 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:54:33.515 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:54:34.465 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:54:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22972139053387776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:54:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22972139053387776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:54:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22972139053387776 [0;39m ==> Parameters: 
2023-04-01 11:54:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22972139053387776 [0;39m <==    Updates: 1
2023-04-01 11:54:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22972139053387776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:54:35.558 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:54:37.592 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:54:49.897 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:54:51.940 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:55:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22972243915182080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:55:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22972243915182080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:55:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22972243915182080 [0;39m ==> Parameters: 
2023-04-01 11:55:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22972243915182080 [0;39m <==    Updates: 0
2023-04-01 11:55:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22972243915182080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 11:55:03.548 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:55:04.472 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:55:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22972264903479296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:55:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22972264903479296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:55:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22972264903479296 [0;39m ==> Parameters: 
2023-04-01 11:55:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22972264903479296 [0;39m <==    Updates: 1
2023-04-01 11:55:05.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22972264903479296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:55:07.647 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:55:13.994 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:55:16.022 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:55:33.520 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:55:34.459 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:55:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22972390690656256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:55:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22972390690656256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:55:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22972390690656256 [0;39m ==> Parameters: 
2023-04-01 11:55:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22972390690656256 [0;39m <==    Updates: 1
2023-04-01 11:55:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22972390690656256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:55:35.566 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:55:37.609 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:55:39.655 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:55:41.707 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:56:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22972495539867648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:56:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22972495539867648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:56:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22972495539867648 [0;39m ==> Parameters: 
2023-04-01 11:56:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22972495539867648 [0;39m <==    Updates: 0
2023-04-01 11:56:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22972495539867648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 11:56:04.471 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:56:05.000 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22972516502999040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:56:05.000 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22972516502999040 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:56:05.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22972516502999040 [0;39m ==> Parameters: 
2023-04-01 11:56:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22972516502999040 [0;39m <==    Updates: 1
2023-04-01 11:56:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22972516502999040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:56:07.619 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:56:09.657 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:56:31.714 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:56:33.753 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:56:34.469 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:56:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22972642378256384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:56:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22972642378256384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:56:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22972642378256384 [0;39m ==> Parameters: 
2023-04-01 11:56:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22972642378256384 [0;39m <==    Updates: 1
2023-04-01 11:56:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22972642378256384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:56:35.803 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:56:37.860 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:56:39.903 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:56:55.828 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:56:57.881 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:57:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22972747252633600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:57:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22972747252633600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:57:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22972747252633600 [0;39m ==> Parameters: 
2023-04-01 11:57:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22972747252633600 [0;39m <==    Updates: 0
2023-04-01 11:57:00.026 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22972747252633600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 11:57:04.468 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:57:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22972768203182080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:57:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22972768203182080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:57:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22972768203182080 [0;39m ==> Parameters: 
2023-04-01 11:57:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22972768203182080 [0;39m <==    Updates: 1
2023-04-01 11:57:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22972768203182080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:57:05.587 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:57:07.623 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:57:19.939 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:57:21.984 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:57:33.546 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:57:34.462 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:57:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22972894011330560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:57:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22972894011330560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:57:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22972894011330560 [0;39m ==> Parameters: 
2023-04-01 11:57:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22972894011330560 [0;39m <==    Updates: 1
2023-04-01 11:57:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22972894011330560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 11:57:35.595 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:57:37.638 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:57:44.034 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:57:46.076 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:58:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22972998889902080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:58:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22972998889902080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:58:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22972998889902080 [0;39m ==> Parameters: 
2023-04-01 11:58:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22972998889902080 [0;39m <==    Updates: 0
2023-04-01 11:58:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22972998889902080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 11:58:04.465 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:58:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22973019844644864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:58:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22973019844644864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:58:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22973019844644864 [0;39m ==> Parameters: 
2023-04-01 11:58:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22973019844644864 [0;39m <==    Updates: 1
2023-04-01 11:58:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22973019844644864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:58:07.637 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:58:09.685 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:58:11.733 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:58:34.468 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:58:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22973145694736384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:58:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22973145694736384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:58:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22973145694736384 [0;39m ==> Parameters: 
2023-04-01 11:58:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22973145694736384 [0;39m <==    Updates: 1
2023-04-01 11:58:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22973145694736384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:58:37.619 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:58:39.675 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:59:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22973250569113600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 11:59:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22973250569113600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 11:59:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22973250569113600 [0;39m ==> Parameters: 
2023-04-01 11:59:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22973250569113600 [0;39m <==    Updates: 0
2023-04-01 11:59:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22973250569113600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 11:59:01.742 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:59:03.797 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:59:04.464 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:59:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22973271494496256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:59:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22973271494496256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:59:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22973271494496256 [0;39m ==> Parameters: 
2023-04-01 11:59:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22973271494496256 [0;39m <==    Updates: 1
2023-04-01 11:59:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22973271494496256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:59:07.880 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:59:09.937 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:59:27.901 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:59:33.511 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:59:34.465 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:59:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22973397344587776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 11:59:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22973397344587776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 11:59:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22973397344587776 [0;39m ==> Parameters: 
2023-04-01 11:59:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22973397344587776 [0;39m <==    Updates: 1
2023-04-01 11:59:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22973397344587776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 11:59:35.552 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:59:37.609 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 11:59:51.976 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:00:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22973502223159296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:00:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22973502223159296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:00:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22973502223159296 [0;39m ==> Parameters: 
2023-04-01 12:00:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22973502223159296 [0;39m <==    Updates: 0
2023-04-01 12:00:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22973502223159296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 12:00:03.518 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:00:04.470 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:00:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22973523186290688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:00:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22973523186290688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:00:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22973523186290688 [0;39m ==> Parameters: 
2023-04-01 12:00:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22973523186290688 [0;39m <==    Updates: 1
2023-04-01 12:00:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22973523186290688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:00:05.560 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:00:07.621 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:00:14.035 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:00:16.081 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:00:34.452 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:00:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22973649019604992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:00:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22973649019604992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:00:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22973649019604992 [0;39m ==> Parameters: 
2023-04-01 12:00:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22973649019604992 [0;39m <==    Updates: 1
2023-04-01 12:00:35.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22973649019604992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:00:35.571 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:00:37.616 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:00:39.671 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:00:41.709 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:01:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22973753860427776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:01:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22973753860427776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:01:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22973753860427776 [0;39m ==> Parameters: 
2023-04-01 12:01:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22973753860427776 [0;39m <==    Updates: 0
2023-04-01 12:01:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22973753860427776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 12:01:03.537 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:01:04.456 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:01:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22973774857113600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:01:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22973774857113600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:01:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22973774857113600 [0;39m ==> Parameters: 
2023-04-01 12:01:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22973774857113600 [0;39m <==    Updates: 1
2023-04-01 12:01:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22973774857113600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:01:07.614 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:01:09.668 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:01:33.748 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:01:34.481 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:01:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22973900677844992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:01:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22973900677844992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:01:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22973900677844992 [0;39m ==> Parameters: 
2023-04-01 12:01:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22973900677844992 [0;39m <==    Updates: 1
2023-04-01 12:01:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22973900677844992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:01:37.832 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:01:39.879 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:01:55.805 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:01:57.840 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:02:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22974005493501952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:02:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22974005493501952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:02:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22974005493501952 [0;39m ==> Parameters: 
2023-04-01 12:02:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22974005493501952 [0;39m <==    Updates: 0
2023-04-01 12:02:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22974005493501952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 12:02:04.439 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:02:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22974026506964992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:02:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22974026506964992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:02:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22974026506964992 [0;39m ==> Parameters: 
2023-04-01 12:02:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22974026506964992 [0;39m <==    Updates: 1
2023-04-01 12:02:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22974026506964992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:02:05.571 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:02:07.615 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:02:19.883 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:02:21.934 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:02:34.479 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:02:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22974152289947648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:02:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22974152289947648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:02:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22974152289947648 [0;39m ==> Parameters: 
2023-04-01 12:02:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22974152289947648 [0;39m <==    Updates: 1
2023-04-01 12:02:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22974152289947648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 12:02:35.579 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:02:37.626 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:02:46.030 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:03:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22974257176907776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:03:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22974257176907776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:03:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22974257176907776 [0;39m ==> Parameters: 
2023-04-01 12:03:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22974257176907776 [0;39m <==    Updates: 0
2023-04-01 12:03:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22974257176907776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 12:03:03.535 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:03:04.458 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:03:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22974278127456256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:03:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22974278127456256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:03:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22974278127456256 [0;39m ==> Parameters: 
2023-04-01 12:03:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22974278127456256 [0;39m <==    Updates: 1
2023-04-01 12:03:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22974278127456256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:03:05.570 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:03:07.609 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:03:09.654 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:03:11.714 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:03:34.452 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:03:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22974403990130688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:03:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22974403990130688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:03:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22974403990130688 [0;39m ==> Parameters: 
2023-04-01 12:03:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22974403990130688 [0;39m <==    Updates: 1
2023-04-01 12:03:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22974403990130688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:03:37.616 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:03:39.664 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:04:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22974508864507904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:04:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22974508864507904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:04:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22974508864507904 [0;39m ==> Parameters: 
2023-04-01 12:04:00.027 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22974508864507904 [0;39m <==    Updates: 0
2023-04-01 12:04:00.027 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22974508864507904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 12:04:01.704 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:04:03.755 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:04:04.473 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:04:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22974529777307648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:04:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22974529777307648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:04:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22974529777307648 [0;39m ==> Parameters: 
2023-04-01 12:04:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22974529777307648 [0;39m <==    Updates: 1
2023-04-01 12:04:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22974529777307648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:04:09.898 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:04:27.843 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:04:34.480 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:04:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22974655631593472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:04:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22974655631593472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:04:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22974655631593472 [0;39m ==> Parameters: 
2023-04-01 12:04:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22974655631593472 [0;39m <==    Updates: 1
2023-04-01 12:04:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22974655631593472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:04:35.613 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:04:37.664 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:04:49.897 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:04:51.952 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:05:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22974760468221952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:05:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22974760468221952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:05:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22974760468221952 [0;39m ==> Parameters: 
2023-04-01 12:05:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22974760468221952 [0;39m <==    Updates: 0
2023-04-01 12:05:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22974760468221952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:05:03.536 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:05:04.459 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:05:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22974781452324864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:05:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22974781452324864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:05:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22974781452324864 [0;39m ==> Parameters: 
2023-04-01 12:05:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22974781452324864 [0;39m <==    Updates: 1
2023-04-01 12:05:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22974781452324864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 12:05:05.579 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:05:07.623 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:05:14.017 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:05:16.071 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:05:33.507 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:05:34.458 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:05:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22974907268861952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:05:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22974907268861952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:05:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22974907268861952 [0;39m ==> Parameters: 
2023-04-01 12:05:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22974907268861952 [0;39m <==    Updates: 1
2023-04-01 12:05:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22974907268861952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:05:35.566 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:05:37.595 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:05:41.673 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:06:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22975012155822080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:06:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22975012155822080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:06:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22975012155822080 [0;39m ==> Parameters: 
2023-04-01 12:06:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22975012155822080 [0;39m <==    Updates: 0
2023-04-01 12:06:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22975012155822080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 12:06:03.533 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:06:04.451 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:06:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22975033118953472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:06:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22975033118953472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:06:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22975033118953472 [0;39m ==> Parameters: 
2023-04-01 12:06:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22975033118953472 [0;39m <==    Updates: 1
2023-04-01 12:06:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22975033118953472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:06:07.625 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:06:09.663 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:06:31.728 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:06:33.771 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:06:34.488 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:06:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22975158977433600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:06:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22975158977433600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:06:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22975158977433600 [0;39m ==> Parameters: 
2023-04-01 12:06:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22975158977433600 [0;39m <==    Updates: 1
2023-04-01 12:06:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22975158977433600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:06:37.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:06:55.817 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:07:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22975263784701952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:07:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22975263784701952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:07:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22975263784701952 [0;39m ==> Parameters: 
2023-04-01 12:07:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22975263784701952 [0;39m <==    Updates: 0
2023-04-01 12:07:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22975263784701952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:07:04.475 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:07:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22975284760416256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:07:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22975284760416256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:07:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22975284760416256 [0;39m ==> Parameters: 
2023-04-01 12:07:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22975284760416256 [0;39m <==    Updates: 1
2023-04-01 12:07:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22975284760416256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 12:07:05.578 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:07:07.615 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:07:17.879 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:07:19.921 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:07:34.462 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:07:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22975410606313472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:07:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22975410606313472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:07:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22975410606313472 [0;39m ==> Parameters: 
2023-04-01 12:07:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22975410606313472 [0;39m <==    Updates: 1
2023-04-01 12:07:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22975410606313472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:07:35.561 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:07:37.616 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:07:41.962 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:07:44.006 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:08:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22975515476496384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:08:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22975515476496384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:08:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22975515476496384 [0;39m ==> Parameters: 
2023-04-01 12:08:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22975515476496384 [0;39m <==    Updates: 0
2023-04-01 12:08:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22975515476496384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:08:03.520 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:08:04.469 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:08:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22975536460599296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:08:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22975536460599296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:08:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22975536460599296 [0;39m ==> Parameters: 
2023-04-01 12:08:05.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22975536460599296 [0;39m <==    Updates: 1
2023-04-01 12:08:05.025 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22975536460599296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:08:07.600 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:08:09.653 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:08:33.736 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:08:34.457 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:08:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22975662293913600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:08:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22975662293913600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:08:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22975662293913600 [0;39m ==> Parameters: 
2023-04-01 12:08:35.025 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22975662293913600 [0;39m <==    Updates: 1
2023-04-01 12:08:35.026 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22975662293913600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 12:08:35.792 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:08:39.875 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:08:55.802 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:08:57.848 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:09:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22975767130542080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:09:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22975767130542080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:09:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22975767130542080 [0;39m ==> Parameters: 
2023-04-01 12:09:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22975767130542080 [0;39m <==    Updates: 0
2023-04-01 12:09:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22975767130542080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 12:09:04.459 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:09:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22975788068507648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:09:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22975788068507648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:09:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22975788068507648 [0;39m ==> Parameters: 
2023-04-01 12:09:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22975788068507648 [0;39m <==    Updates: 1
2023-04-01 12:09:05.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22975788068507648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 12:09:07.626 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:09:19.892 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:09:21.946 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:09:33.526 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:09:34.461 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:09:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22975913906016256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:09:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22975913906016256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:09:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22975913906016256 [0;39m ==> Parameters: 
2023-04-01 12:09:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22975913906016256 [0;39m <==    Updates: 1
2023-04-01 12:09:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22975913906016256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:09:37.639 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:09:43.981 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:09:46.016 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:10:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22976018776199168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:10:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22976018776199168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:10:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22976018776199168 [0;39m ==> Parameters: 
2023-04-01 12:10:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22976018776199168 [0;39m <==    Updates: 0
2023-04-01 12:10:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22976018776199168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:10:03.542 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:10:04.476 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:10:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22976039743524864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:10:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22976039743524864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:10:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22976039743524864 [0;39m ==> Parameters: 
2023-04-01 12:10:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22976039743524864 [0;39m <==    Updates: 1
2023-04-01 12:10:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22976039743524864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:10:07.638 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:10:09.669 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:10:11.707 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:10:34.476 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:10:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22976165555867648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:10:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22976165555867648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:10:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22976165555867648 [0;39m ==> Parameters: 
2023-04-01 12:10:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22976165555867648 [0;39m <==    Updates: 1
2023-04-01 12:10:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22976165555867648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 12:10:37.630 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:10:39.656 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:10:59.999 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22976270400884736 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:11:00.000 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22976270400884736 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:11:00.000 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22976270400884736 [0;39m ==> Parameters: 
2023-04-01 12:11:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22976270400884736 [0;39m <==    Updates: 0
2023-04-01 12:11:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22976270400884736 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 12:11:01.726 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:11:03.774 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:11:04.478 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:11:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22976291389181952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:11:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22976291389181952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:11:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22976291389181952 [0;39m ==> Parameters: 
2023-04-01 12:11:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22976291389181952 [0;39m <==    Updates: 1
2023-04-01 12:11:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22976291389181952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:11:09.939 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:11:25.828 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:11:27.879 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:11:34.468 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:11:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22976417247662080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:11:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22976417247662080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:11:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22976417247662080 [0;39m ==> Parameters: 
2023-04-01 12:11:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22976417247662080 [0;39m <==    Updates: 1
2023-04-01 12:11:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22976417247662080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:11:37.581 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:11:51.968 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:12:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22976522101067776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:12:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22976522101067776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:12:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22976522101067776 [0;39m ==> Parameters: 
2023-04-01 12:12:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22976522101067776 [0;39m <==    Updates: 0
2023-04-01 12:12:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22976522101067776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:12:04.482 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:12:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22976543080976384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:12:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22976543080976384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:12:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22976543080976384 [0;39m ==> Parameters: 
2023-04-01 12:12:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22976543080976384 [0;39m <==    Updates: 1
2023-04-01 12:12:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22976543080976384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 12:12:05.574 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:12:07.605 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:12:16.060 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:12:34.477 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:12:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22976668889124864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:12:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22976668889124864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:12:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22976668889124864 [0;39m ==> Parameters: 
2023-04-01 12:12:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22976668889124864 [0;39m <==    Updates: 1
2023-04-01 12:12:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22976668889124864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 12:12:37.623 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:12:39.669 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:12:41.726 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:13:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22976773746724864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:13:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22976773746724864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:13:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22976773746724864 [0;39m ==> Parameters: 
2023-04-01 12:13:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22976773746724864 [0;39m <==    Updates: 0
2023-04-01 12:13:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22976773746724864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:13:03.520 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:13:04.468 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:13:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22976794735022080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:13:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22976794735022080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:13:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22976794735022080 [0;39m ==> Parameters: 
2023-04-01 12:13:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22976794735022080 [0;39m <==    Updates: 1
2023-04-01 12:13:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22976794735022080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:13:07.570 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:13:09.594 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:13:31.659 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:13:33.698 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:13:34.462 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:13:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22976920547364864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:13:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22976920547364864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:13:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22976920547364864 [0;39m ==> Parameters: 
2023-04-01 12:13:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22976920547364864 [0;39m <==    Updates: 1
2023-04-01 12:13:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22976920547364864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:13:37.805 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:13:39.835 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:13:55.738 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:13:57.783 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:14:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22977025438519296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:14:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22977025438519296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:14:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22977025438519296 [0;39m ==> Parameters: 
2023-04-01 12:14:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22977025438519296 [0;39m <==    Updates: 0
2023-04-01 12:14:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22977025438519296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:14:04.474 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:14:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22977046368096256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:14:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22977046368096256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:14:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22977046368096256 [0;39m ==> Parameters: 
2023-04-01 12:14:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22977046368096256 [0;39m <==    Updates: 1
2023-04-01 12:14:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22977046368096256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-04-01 12:14:05.568 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:14:07.623 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:14:19.834 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:14:21.877 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:14:33.527 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:14:34.449 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:14:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22977172234964992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:14:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22977172234964992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:14:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22977172234964992 [0;39m ==> Parameters: 
2023-04-01 12:14:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22977172234964992 [0;39m <==    Updates: 1
2023-04-01 12:14:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22977172234964992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:14:35.556 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:14:37.611 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:14:43.938 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:14:45.967 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:15:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22977277092564992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:15:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22977277092564992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:15:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22977277092564992 [0;39m ==> Parameters: 
2023-04-01 12:15:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22977277092564992 [0;39m <==    Updates: 0
2023-04-01 12:15:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22977277092564992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 12:15:03.499 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:15:04.463 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:15:05.045 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22977298198302720 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:15:05.045 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22977298198302720 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:15:05.046 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22977298198302720 [0;39m ==> Parameters: 
2023-04-01 12:15:05.053 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22977298198302720 [0;39m <==    Updates: 1
2023-04-01 12:15:05.054 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22977298198302720 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:15:05.539 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:15:07.572 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:15:11.669 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:15:33.533 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:15:34.455 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:15:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22977423897399296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:15:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22977423897399296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:15:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22977423897399296 [0;39m ==> Parameters: 
2023-04-01 12:15:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22977423897399296 [0;39m <==    Updates: 1
2023-04-01 12:15:35.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22977423897399296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:15:37.617 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:15:39.644 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:16:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22977528763387904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:16:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22977528763387904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:16:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22977528763387904 [0;39m ==> Parameters: 
2023-04-01 12:16:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22977528763387904 [0;39m <==    Updates: 0
2023-04-01 12:16:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22977528763387904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:16:01.701 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:16:03.758 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:16:04.460 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:16:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22977549688770560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:16:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22977549688770560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:16:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22977549688770560 [0;39m ==> Parameters: 
2023-04-01 12:16:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22977549688770560 [0;39m <==    Updates: 1
2023-04-01 12:16:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22977549688770560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:16:07.856 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:16:09.890 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:16:27.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:16:34.467 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:16:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22977675538862080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:16:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22977675538862080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:16:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22977675538862080 [0;39m ==> Parameters: 
2023-04-01 12:16:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22977675538862080 [0;39m <==    Updates: 1
2023-04-01 12:16:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22977675538862080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:16:35.605 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:16:37.645 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:16:51.971 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:17:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22977780379684864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:17:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22977780379684864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:17:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22977780379684864 [0;39m ==> Parameters: 
2023-04-01 12:17:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22977780379684864 [0;39m <==    Updates: 0
2023-04-01 12:17:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22977780379684864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:17:03.523 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:17:04.488 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:17:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22977801330233344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:17:05.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22977801330233344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:17:05.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22977801330233344 [0;39m ==> Parameters: 
2023-04-01 12:17:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22977801330233344 [0;39m <==    Updates: 1
2023-04-01 12:17:05.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22977801330233344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 12:17:05.578 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:17:07.611 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:17:14.041 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:17:16.091 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:17:33.516 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:17:34.481 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:17:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22977927205490688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:17:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22977927205490688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:17:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22977927205490688 [0;39m ==> Parameters: 
2023-04-01 12:17:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22977927205490688 [0;39m <==    Updates: 1
2023-04-01 12:17:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22977927205490688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:17:35.573 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:17:37.611 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:17:39.649 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:17:41.689 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:18:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22978032046313472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:18:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22978032046313472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:18:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22978032046313472 [0;39m ==> Parameters: 
2023-04-01 12:18:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22978032046313472 [0;39m <==    Updates: 0
2023-04-01 12:18:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22978032046313472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:18:03.525 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:18:04.445 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:18:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22978052988473344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:18:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22978052988473344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:18:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22978052988473344 [0;39m ==> Parameters: 
2023-04-01 12:18:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22978052988473344 [0;39m <==    Updates: 1
2023-04-01 12:18:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22978052988473344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 12:18:07.628 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:18:09.659 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:18:31.734 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:18:33.772 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:18:34.474 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:18:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22978178825981952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:18:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22978178825981952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:18:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22978178825981952 [0;39m ==> Parameters: 
2023-04-01 12:18:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22978178825981952 [0;39m <==    Updates: 1
2023-04-01 12:18:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22978178825981952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:18:35.801 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:18:37.854 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:18:39.900 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:18:55.798 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:18:57.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:19:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22978283683581952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:19:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22978283683581952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:19:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22978283683581952 [0;39m ==> Parameters: 
2023-04-01 12:19:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22978283683581952 [0;39m <==    Updates: 0
2023-04-01 12:19:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22978283683581952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 12:19:03.520 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:19:04.456 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:19:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22978304701239296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:19:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22978304701239296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:19:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22978304701239296 [0;39m ==> Parameters: 
2023-04-01 12:19:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22978304701239296 [0;39m <==    Updates: 1
2023-04-01 12:19:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22978304701239296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-04-01 12:19:05.577 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:19:07.628 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:19:19.904 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:19:21.960 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:19:34.472 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:19:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22978430475833344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:19:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22978430475833344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:19:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22978430475833344 [0;39m ==> Parameters: 
2023-04-01 12:19:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22978430475833344 [0;39m <==    Updates: 1
2023-04-01 12:19:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22978430475833344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:19:35.594 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:19:37.636 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:19:46.058 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:20:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22978535375376384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:20:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22978535375376384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:20:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22978535375376384 [0;39m ==> Parameters: 
2023-04-01 12:20:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22978535375376384 [0;39m <==    Updates: 0
2023-04-01 12:20:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22978535375376384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 12:20:04.466 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:20:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22978556313341952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:20:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22978556313341952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:20:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22978556313341952 [0;39m ==> Parameters: 
2023-04-01 12:20:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22978556313341952 [0;39m <==    Updates: 1
2023-04-01 12:20:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22978556313341952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:20:05.563 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:20:07.613 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:20:09.642 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:20:11.681 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:20:33.546 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:20:34.481 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:20:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22978682167627776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:20:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22978682167627776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:20:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22978682167627776 [0;39m ==> Parameters: 
2023-04-01 12:20:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22978682167627776 [0;39m <==    Updates: 1
2023-04-01 12:20:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22978682167627776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 12:20:37.648 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:20:39.694 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:21:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22978787021033472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:21:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22978787021033472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:21:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22978787021033472 [0;39m ==> Parameters: 
2023-04-01 12:21:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22978787021033472 [0;39m <==    Updates: 0
2023-04-01 12:21:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22978787021033472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:21:03.805 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:21:04.461 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:21:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22978807963193344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:21:05.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22978807963193344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:21:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22978807963193344 [0;39m ==> Parameters: 
2023-04-01 12:21:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22978807963193344 [0;39m <==    Updates: 1
2023-04-01 12:21:05.003 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22978807963193344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 12:21:09.916 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:21:25.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:21:27.888 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:21:34.475 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:21:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22978933792313344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:21:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22978933792313344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:21:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22978933792313344 [0;39m ==> Parameters: 
2023-04-01 12:21:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22978933792313344 [0;39m <==    Updates: 1
2023-04-01 12:21:35.003 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22978933792313344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 12:21:35.562 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:21:37.603 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:21:49.944 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:21:51.990 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:22:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22979038696050688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:22:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22979038696050688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:22:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22979038696050688 [0;39m ==> Parameters: 
2023-04-01 12:22:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22979038696050688 [0;39m <==    Updates: 0
2023-04-01 12:22:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22979038696050688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:22:03.529 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:22:04.465 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:22:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22979059650793472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:22:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22979059650793472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:22:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22979059650793472 [0;39m ==> Parameters: 
2023-04-01 12:22:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22979059650793472 [0;39m <==    Updates: 1
2023-04-01 12:22:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22979059650793472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:22:07.629 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:22:14.035 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:22:16.075 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:22:34.475 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:22:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22979185463136256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:22:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22979185463136256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:22:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22979185463136256 [0;39m ==> Parameters: 
2023-04-01 12:22:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22979185463136256 [0;39m <==    Updates: 1
2023-04-01 12:22:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22979185463136256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:22:37.632 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:22:39.676 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:22:41.718 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:23:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22979290345902080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:23:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22979290345902080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:23:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22979290345902080 [0;39m ==> Parameters: 
2023-04-01 12:23:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22979290345902080 [0;39m <==    Updates: 0
2023-04-01 12:23:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22979290345902080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 12:23:03.539 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:23:04.471 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:23:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22979311288061952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:23:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22979311288061952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:23:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22979311288061952 [0;39m ==> Parameters: 
2023-04-01 12:23:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22979311288061952 [0;39m <==    Updates: 1
2023-04-01 12:23:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22979311288061952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 12:23:07.607 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:23:09.667 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:23:33.756 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:23:34.453 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:23:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22979437159124992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:23:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22979437159124992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:23:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22979437159124992 [0;39m ==> Parameters: 
2023-04-01 12:23:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22979437159124992 [0;39m <==    Updates: 1
2023-04-01 12:23:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22979437159124992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 12:23:35.796 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:23:37.834 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:23:39.891 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:23:55.815 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:23:57.868 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:24:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22979541966393344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:24:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22979541966393344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:24:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22979541966393344 [0;39m ==> Parameters: 
2023-04-01 12:24:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22979541966393344 [0;39m <==    Updates: 0
2023-04-01 12:24:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22979541966393344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 12:24:04.465 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:24:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22979562963079168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:24:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22979562963079168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:24:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22979562963079168 [0;39m ==> Parameters: 
2023-04-01 12:24:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22979562963079168 [0;39m <==    Updates: 1
2023-04-01 12:24:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22979562963079168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 12:24:07.609 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:24:21.970 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:24:33.543 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:24:34.451 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:24:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22979688800587776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:24:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22979688800587776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:24:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22979688800587776 [0;39m ==> Parameters: 
2023-04-01 12:24:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22979688800587776 [0;39m <==    Updates: 1
2023-04-01 12:24:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22979688800587776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:24:37.627 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:24:46.072 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:25:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22979793674964992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:25:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22979793674964992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:25:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22979793674964992 [0;39m ==> Parameters: 
2023-04-01 12:25:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22979793674964992 [0;39m <==    Updates: 0
2023-04-01 12:25:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22979793674964992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:25:03.535 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:25:04.464 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:25:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22979814633902080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:25:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22979814633902080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:25:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22979814633902080 [0;39m ==> Parameters: 
2023-04-01 12:25:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22979814633902080 [0;39m <==    Updates: 1
2023-04-01 12:25:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22979814633902080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 12:25:05.586 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:25:07.639 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:25:11.741 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:25:33.547 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:25:34.466 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:25:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22979940458827776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:25:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22979940458827776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:25:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22979940458827776 [0;39m ==> Parameters: 
2023-04-01 12:25:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22979940458827776 [0;39m <==    Updates: 1
2023-04-01 12:25:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22979940458827776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:25:35.585 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:25:37.643 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:25:39.690 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:26:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22980045308039168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:26:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22980045308039168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:26:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22980045308039168 [0;39m ==> Parameters: 
2023-04-01 12:26:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22980045308039168 [0;39m <==    Updates: 0
2023-04-01 12:26:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22980045308039168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 12:26:03.790 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:26:04.462 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:26:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22980066275364864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:26:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22980066275364864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:26:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22980066275364864 [0;39m ==> Parameters: 
2023-04-01 12:26:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22980066275364864 [0;39m <==    Updates: 1
2023-04-01 12:26:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22980066275364864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:26:05.849 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:26:07.902 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:26:09.956 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:26:27.892 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:26:33.546 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:26:34.465 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:26:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22980192112873472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:26:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22980192112873472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:26:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22980192112873472 [0;39m ==> Parameters: 
2023-04-01 12:26:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22980192112873472 [0;39m <==    Updates: 1
2023-04-01 12:26:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22980192112873472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:26:35.587 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:26:37.641 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:26:51.965 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:27:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22980296991444992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:27:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22980296991444992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:27:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22980296991444992 [0;39m ==> Parameters: 
2023-04-01 12:27:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22980296991444992 [0;39m <==    Updates: 0
2023-04-01 12:27:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22980296991444992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 12:27:03.502 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:27:04.457 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:27:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22980317933604864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:27:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22980317933604864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:27:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22980317933604864 [0;39m ==> Parameters: 
2023-04-01 12:27:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22980317933604864 [0;39m <==    Updates: 1
2023-04-01 12:27:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22980317933604864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 12:27:05.524 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:27:07.583 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:27:16.071 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:27:33.505 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:27:34.428 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:27:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22980443745947648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:27:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22980443745947648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:27:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22980443745947648 [0;39m ==> Parameters: 
2023-04-01 12:27:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22980443745947648 [0;39m <==    Updates: 1
2023-04-01 12:27:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22980443745947648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 12:27:35.550 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:27:37.604 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:27:41.683 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:28:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22980548616130560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:28:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22980548616130560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:28:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22980548616130560 [0;39m ==> Parameters: 
2023-04-01 12:28:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22980548616130560 [0;39m <==    Updates: 0
2023-04-01 12:28:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22980548616130560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:28:03.509 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:28:04.471 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:28:05.000 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22980569566679040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:28:05.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22980569566679040 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:28:05.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22980569566679040 [0;39m ==> Parameters: 
2023-04-01 12:28:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22980569566679040 [0;39m <==    Updates: 1
2023-04-01 12:28:05.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22980569566679040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:28:07.607 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:28:09.638 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:28:33.738 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:28:34.428 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:28:35.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22980695462907904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:28:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22980695462907904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:28:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22980695462907904 [0;39m ==> Parameters: 
2023-04-01 12:28:35.025 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22980695462907904 [0;39m <==    Updates: 1
2023-04-01 12:28:35.027 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22980695462907904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 12:28:35.781 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:28:37.824 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:28:39.868 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:28:57.838 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:29:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22980800316313600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:29:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22980800316313600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:29:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22980800316313600 [0;39m ==> Parameters: 
2023-04-01 12:29:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22980800316313600 [0;39m <==    Updates: 0
2023-04-01 12:29:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22980800316313600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:29:04.465 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:29:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22980821271056384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:29:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22980821271056384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:29:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22980821271056384 [0;39m ==> Parameters: 
2023-04-01 12:29:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22980821271056384 [0;39m <==    Updates: 1
2023-04-01 12:29:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22980821271056384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:29:07.617 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:29:21.906 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:29:33.507 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:29:34.447 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:29:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22980947079204864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:29:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22980947079204864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:29:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22980947079204864 [0;39m ==> Parameters: 
2023-04-01 12:29:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22980947079204864 [0;39m <==    Updates: 1
2023-04-01 12:29:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22980947079204864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:29:37.622 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:29:43.942 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:29:45.985 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:30:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22981051932610560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:30:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22981051932610560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:30:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22981051932610560 [0;39m ==> Parameters: 
2023-04-01 12:30:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22981051932610560 [0;39m <==    Updates: 0
2023-04-01 12:30:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22981051932610560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:30:03.531 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:30:04.466 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:30:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22981072933490688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:30:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22981072933490688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:30:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22981072933490688 [0;39m ==> Parameters: 
2023-04-01 12:30:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22981072933490688 [0;39m <==    Updates: 1
2023-04-01 12:30:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22981072933490688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:30:07.630 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:30:11.726 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:30:33.540 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:30:34.475 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:30:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22981198737444864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:30:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22981198737444864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:30:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22981198737444864 [0;39m ==> Parameters: 
2023-04-01 12:30:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22981198737444864 [0;39m <==    Updates: 1
2023-04-01 12:30:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22981198737444864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:30:35.585 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:30:37.624 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:30:39.679 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:31:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22981303611822080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:31:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22981303611822080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:31:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22981303611822080 [0;39m ==> Parameters: 
2023-04-01 12:31:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22981303611822080 [0;39m <==    Updates: 0
2023-04-01 12:31:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22981303611822080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:31:01.723 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:31:03.749 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:31:04.468 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:31:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22981324587536384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:31:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22981324587536384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:31:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22981324587536384 [0;39m ==> Parameters: 
2023-04-01 12:31:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22981324587536384 [0;39m <==    Updates: 1
2023-04-01 12:31:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22981324587536384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:31:05.793 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:31:07.843 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:31:09.883 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:31:27.846 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:31:34.454 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:31:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22981450429239296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:31:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22981450429239296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:31:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22981450429239296 [0;39m ==> Parameters: 
2023-04-01 12:31:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22981450429239296 [0;39m <==    Updates: 1
2023-04-01 12:31:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22981450429239296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:31:35.548 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:31:37.598 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:31:49.898 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:31:51.940 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:32:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22981555244896256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:32:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22981555244896256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:32:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22981555244896256 [0;39m ==> Parameters: 
2023-04-01 12:32:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22981555244896256 [0;39m <==    Updates: 0
2023-04-01 12:32:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22981555244896256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 12:32:03.529 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:32:04.477 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:32:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22981576233193472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:32:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22981576233193472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:32:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22981576233193472 [0;39m ==> Parameters: 
2023-04-01 12:32:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22981576233193472 [0;39m <==    Updates: 1
2023-04-01 12:32:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22981576233193472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:32:07.631 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:32:13.995 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:32:16.047 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:32:34.439 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:32:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22981702070702080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:32:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22981702070702080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:32:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22981702070702080 [0;39m ==> Parameters: 
2023-04-01 12:32:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22981702070702080 [0;39m <==    Updates: 1
2023-04-01 12:32:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22981702070702080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:32:37.589 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:32:39.643 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:32:41.683 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:33:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22981806932496384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:33:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22981806932496384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:33:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22981806932496384 [0;39m ==> Parameters: 
2023-04-01 12:33:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22981806932496384 [0;39m <==    Updates: 0
2023-04-01 12:33:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22981806932496384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 12:33:03.520 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:33:04.456 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:33:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22981827862073344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:33:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22981827862073344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:33:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22981827862073344 [0;39m ==> Parameters: 
2023-04-01 12:33:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22981827862073344 [0;39m <==    Updates: 1
2023-04-01 12:33:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22981827862073344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:33:05.563 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:33:07.591 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:33:09.644 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:33:31.677 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:33:33.721 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:33:34.468 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:33:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22981953720553472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:33:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22981953720553472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:33:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22981953720553472 [0;39m ==> Parameters: 
2023-04-01 12:33:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22981953720553472 [0;39m <==    Updates: 1
2023-04-01 12:33:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22981953720553472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 12:33:35.770 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:33:37.812 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:33:39.870 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:33:55.759 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:33:57.798 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:34:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22982058599124992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:34:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22982058599124992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:34:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22982058599124992 [0;39m ==> Parameters: 
2023-04-01 12:34:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22982058599124992 [0;39m <==    Updates: 0
2023-04-01 12:34:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22982058599124992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 12:34:04.449 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:34:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22982079553867776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:34:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22982079553867776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:34:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22982079553867776 [0;39m ==> Parameters: 
2023-04-01 12:34:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22982079553867776 [0;39m <==    Updates: 1
2023-04-01 12:34:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22982079553867776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 12:34:05.552 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:34:07.592 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:34:19.845 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:34:21.886 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:34:34.459 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:34:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22982205353627648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:34:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22982205353627648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:34:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22982205353627648 [0;39m ==> Parameters: 
2023-04-01 12:34:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22982205353627648 [0;39m <==    Updates: 1
2023-04-01 12:34:35.004 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22982205353627648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 12:34:35.579 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:34:37.640 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:34:43.948 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:34:45.999 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:35:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22982310240587776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:35:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22982310240587776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:35:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22982310240587776 [0;39m ==> Parameters: 
2023-04-01 12:35:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22982310240587776 [0;39m <==    Updates: 0
2023-04-01 12:35:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22982310240587776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:35:03.505 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:35:04.457 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:35:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22982331220496384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:35:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22982331220496384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:35:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22982331220496384 [0;39m ==> Parameters: 
2023-04-01 12:35:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22982331220496384 [0;39m <==    Updates: 1
2023-04-01 12:35:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22982331220496384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:35:05.543 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:35:07.588 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:35:09.638 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:35:11.677 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:35:33.544 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:35:34.465 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:35:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22982457037033472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:35:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22982457037033472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:35:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22982457037033472 [0;39m ==> Parameters: 
2023-04-01 12:35:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22982457037033472 [0;39m <==    Updates: 1
2023-04-01 12:35:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22982457037033472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:35:35.582 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:35:37.614 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:35:39.662 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:36:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22982561877856256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:36:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22982561877856256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:36:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22982561877856256 [0;39m ==> Parameters: 
2023-04-01 12:36:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22982561877856256 [0;39m <==    Updates: 0
2023-04-01 12:36:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22982561877856256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 12:36:01.706 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:36:03.745 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:36:04.478 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:36:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22982582866153472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:36:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22982582866153472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:36:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22982582866153472 [0;39m ==> Parameters: 
2023-04-01 12:36:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22982582866153472 [0;39m <==    Updates: 1
2023-04-01 12:36:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22982582866153472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:36:05.785 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:36:09.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:36:27.873 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:36:33.541 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:36:34.476 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:36:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22982708691079168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:36:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22982708691079168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:36:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22982708691079168 [0;39m ==> Parameters: 
2023-04-01 12:36:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22982708691079168 [0;39m <==    Updates: 1
2023-04-01 12:36:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22982708691079168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:36:35.585 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:36:37.639 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:36:51.974 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:37:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22982813536096256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:37:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22982813536096256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:37:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22982813536096256 [0;39m ==> Parameters: 
2023-04-01 12:37:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22982813536096256 [0;39m <==    Updates: 0
2023-04-01 12:37:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22982813536096256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:37:03.524 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:37:04.449 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:37:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22982834520199168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:37:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22982834520199168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:37:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22982834520199168 [0;39m ==> Parameters: 
2023-04-01 12:37:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22982834520199168 [0;39m <==    Updates: 1
2023-04-01 12:37:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22982834520199168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:37:05.555 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:37:07.611 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:37:14.035 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:37:16.075 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:37:34.471 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:37:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22982960366096384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:37:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22982960366096384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:37:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22982960366096384 [0;39m ==> Parameters: 
2023-04-01 12:37:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22982960366096384 [0;39m <==    Updates: 1
2023-04-01 12:37:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22982960366096384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:37:37.637 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:37:41.736 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:38:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22983065190141952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:38:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22983065190141952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:38:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22983065190141952 [0;39m ==> Parameters: 
2023-04-01 12:38:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22983065190141952 [0;39m <==    Updates: 0
2023-04-01 12:38:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22983065190141952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:38:04.435 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:38:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22983086207799296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:38:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22983086207799296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:38:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22983086207799296 [0;39m ==> Parameters: 
2023-04-01 12:38:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22983086207799296 [0;39m <==    Updates: 1
2023-04-01 12:38:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22983086207799296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 12:38:05.553 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:38:07.610 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:38:09.663 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:38:33.752 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:38:34.463 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:38:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22983212015947776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:38:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22983212015947776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:38:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22983212015947776 [0;39m ==> Parameters: 
2023-04-01 12:38:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22983212015947776 [0;39m <==    Updates: 1
2023-04-01 12:38:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22983212015947776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:38:35.778 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:38:37.819 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:38:39.863 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:38:55.794 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:38:57.834 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:39:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22983316860964864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:39:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22983316860964864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:39:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22983316860964864 [0;39m ==> Parameters: 
2023-04-01 12:39:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22983316860964864 [0;39m <==    Updates: 0
2023-04-01 12:39:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22983316860964864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 12:39:04.467 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:39:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22983337861844992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:39:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22983337861844992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:39:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22983337861844992 [0;39m ==> Parameters: 
2023-04-01 12:39:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22983337861844992 [0;39m <==    Updates: 1
2023-04-01 12:39:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22983337861844992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:39:05.562 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:39:07.610 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:39:19.877 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:39:21.937 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:39:33.533 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:39:34.452 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:39:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22983463682576384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:39:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22983463682576384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:39:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22983463682576384 [0;39m ==> Parameters: 
2023-04-01 12:39:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22983463682576384 [0;39m <==    Updates: 1
2023-04-01 12:39:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22983463682576384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:39:37.634 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:39:43.988 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:39:46.025 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:40:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22983568552759296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:40:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22983568552759296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:40:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22983568552759296 [0;39m ==> Parameters: 
2023-04-01 12:40:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22983568552759296 [0;39m <==    Updates: 0
2023-04-01 12:40:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22983568552759296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 12:40:03.520 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:40:04.467 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:40:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22983589532667904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:40:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22983589532667904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:40:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22983589532667904 [0;39m ==> Parameters: 
2023-04-01 12:40:05.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22983589532667904 [0;39m <==    Updates: 1
2023-04-01 12:40:05.025 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22983589532667904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:40:07.603 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:40:11.673 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:40:33.508 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:40:34.501 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:40:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22983715357593600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:40:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22983715357593600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:40:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22983715357593600 [0;39m ==> Parameters: 
2023-04-01 12:40:35.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22983715357593600 [0;39m <==    Updates: 1
2023-04-01 12:40:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22983715357593600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:40:35.560 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:40:37.610 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:40:39.657 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:41:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22983820173250560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:41:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22983820173250560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:41:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22983820173250560 [0;39m ==> Parameters: 
2023-04-01 12:41:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22983820173250560 [0;39m <==    Updates: 0
2023-04-01 12:41:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22983820173250560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 12:41:01.706 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:41:03.745 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:41:04.462 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:41:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22983841136381952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:41:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22983841136381952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:41:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22983841136381952 [0;39m ==> Parameters: 
2023-04-01 12:41:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22983841136381952 [0;39m <==    Updates: 1
2023-04-01 12:41:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22983841136381952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 12:41:07.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:41:09.892 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:41:25.790 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:41:27.841 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:41:33.527 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:41:34.465 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:41:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22983966986473472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:41:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22983966986473472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:41:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22983966986473472 [0;39m ==> Parameters: 
2023-04-01 12:41:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22983966986473472 [0;39m <==    Updates: 1
2023-04-01 12:41:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22983966986473472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:41:35.571 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:41:37.613 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:41:49.903 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:41:51.954 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:42:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22984071839879168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:42:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22984071839879168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:42:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22984071839879168 [0;39m ==> Parameters: 
2023-04-01 12:42:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22984071839879168 [0;39m <==    Updates: 0
2023-04-01 12:42:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22984071839879168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 12:42:03.531 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:42:04.481 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:42:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22984092798816256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:42:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22984092798816256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:42:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22984092798816256 [0;39m ==> Parameters: 
2023-04-01 12:42:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22984092798816256 [0;39m <==    Updates: 1
2023-04-01 12:42:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22984092798816256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:42:05.580 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:42:07.619 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:42:14.023 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:42:16.066 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:42:33.509 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:42:34.445 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:42:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22984218653102080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:42:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22984218653102080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:42:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22984218653102080 [0;39m ==> Parameters: 
2023-04-01 12:42:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22984218653102080 [0;39m <==    Updates: 1
2023-04-01 12:42:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22984218653102080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:42:35.538 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:42:37.584 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:42:39.645 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:42:41.688 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:43:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22984323523284992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:43:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22984323523284992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:43:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22984323523284992 [0;39m ==> Parameters: 
2023-04-01 12:43:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22984323523284992 [0;39m <==    Updates: 0
2023-04-01 12:43:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22984323523284992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 12:43:03.545 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:43:04.457 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:43:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22984344452861952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:43:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22984344452861952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:43:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22984344452861952 [0;39m ==> Parameters: 
2023-04-01 12:43:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22984344452861952 [0;39m <==    Updates: 1
2023-04-01 12:43:05.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22984344452861952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 12:43:05.569 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:43:07.612 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:43:09.644 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:43:31.699 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:43:33.754 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:43:34.470 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:43:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22984470323924992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:43:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22984470323924992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:43:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22984470323924992 [0;39m ==> Parameters: 
2023-04-01 12:43:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22984470323924992 [0;39m <==    Updates: 1
2023-04-01 12:43:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22984470323924992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 12:43:35.809 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:43:37.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:43:39.901 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:43:57.838 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:44:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22984575198302208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:44:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22984575198302208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:44:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22984575198302208 [0;39m ==> Parameters: 
2023-04-01 12:44:00.026 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22984575198302208 [0;39m <==    Updates: 0
2023-04-01 12:44:00.026 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22984575198302208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:44:03.526 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:44:04.476 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:44:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22984596132073472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:44:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22984596132073472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:44:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22984596132073472 [0;39m ==> Parameters: 
2023-04-01 12:44:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22984596132073472 [0;39m <==    Updates: 1
2023-04-01 12:44:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22984596132073472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 12:44:05.573 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:44:07.628 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:44:19.895 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:44:21.945 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:44:34.474 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:44:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22984721940221952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:44:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22984721940221952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:44:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22984721940221952 [0;39m ==> Parameters: 
2023-04-01 12:44:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22984721940221952 [0;39m <==    Updates: 1
2023-04-01 12:44:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22984721940221952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:44:35.563 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:44:37.616 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:44:43.999 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:44:46.056 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:45:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22984826797821952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:45:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22984826797821952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:45:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22984826797821952 [0;39m ==> Parameters: 
2023-04-01 12:45:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22984826797821952 [0;39m <==    Updates: 0
2023-04-01 12:45:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22984826797821952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 12:45:04.478 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:45:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22984847773536256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:45:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22984847773536256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:45:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22984847773536256 [0;39m ==> Parameters: 
2023-04-01 12:45:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22984847773536256 [0;39m <==    Updates: 1
2023-04-01 12:45:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22984847773536256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:45:05.586 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:45:07.612 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:45:11.706 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:45:33.531 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:45:34.483 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:45:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22984973644599296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:45:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22984973644599296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:45:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22984973644599296 [0;39m ==> Parameters: 
2023-04-01 12:45:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22984973644599296 [0;39m <==    Updates: 1
2023-04-01 12:45:35.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22984973644599296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:45:35.587 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:45:37.640 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:45:39.696 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:46:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22985078468644864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:46:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22985078468644864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:46:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22985078468644864 [0;39m ==> Parameters: 
2023-04-01 12:46:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22985078468644864 [0;39m <==    Updates: 0
2023-04-01 12:46:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22985078468644864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 12:46:01.738 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:46:03.785 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:46:04.469 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:46:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22985099465330688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:46:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22985099465330688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:46:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22985099465330688 [0;39m ==> Parameters: 
2023-04-01 12:46:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22985099465330688 [0;39m <==    Updates: 1
2023-04-01 12:46:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22985099465330688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:46:05.826 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:46:07.882 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:46:09.931 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:46:25.834 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:46:27.883 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:46:33.540 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:46:34.472 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:46:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22985225269284864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:46:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22985225269284864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:46:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22985225269284864 [0;39m ==> Parameters: 
2023-04-01 12:46:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22985225269284864 [0;39m <==    Updates: 1
2023-04-01 12:46:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22985225269284864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 12:46:37.628 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:46:49.920 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:46:51.966 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:47:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22985330118496256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:47:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22985330118496256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:47:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22985330118496256 [0;39m ==> Parameters: 
2023-04-01 12:47:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22985330118496256 [0;39m <==    Updates: 0
2023-04-01 12:47:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22985330118496256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:47:03.516 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:47:04.435 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:47:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22985351102599168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:47:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22985351102599168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:47:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22985351102599168 [0;39m ==> Parameters: 
2023-04-01 12:47:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22985351102599168 [0;39m <==    Updates: 1
2023-04-01 12:47:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22985351102599168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:47:07.589 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:47:14.016 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:47:16.068 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:47:34.476 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:47:35.044 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22985477086908416 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:47:35.062 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22985477086908416 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:47:35.063 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22985477086908416 [0;39m ==> Parameters: 
2023-04-01 12:47:35.086 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22985477086908416 [0;39m <==    Updates: 1
2023-04-01 12:47:35.087 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22985477086908416 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š25æ¯«ç§’
2023-04-01 12:47:37.637 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:47:41.896 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:47:43.126 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-04-01 12:47:43.128 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2023-04-01 12:47:43.150 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 22 ms
2023-04-01 12:47:43.235 INFO  com.jiawa.wiki.websocket.WebSocketServer          :32   [32m                  [0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šPq4GHxQfcCï¼Œsession idï¼š0ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2023-04-01 12:47:43.248 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22985511492784128 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 12:47:43.248 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22985511492784129 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 12:47:43.248 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22985511492784130 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 12:47:43.249 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22985511492784128 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-04-01 12:47:43.249 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22985511492784129 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 12:47:43.249 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22985511492784128 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-04-01 12:47:43.249 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22985511492784130 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-04-01 12:47:43.249 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22985511492784129 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 12:47:43.249 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22985511492784130 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-04-01 12:47:43.250 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22985511492784128 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 12:47:43.250 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22985511492784130 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 12:47:43.250 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22985511492784129 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 12:47:43.306 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22985511492784130 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 12:47:43.306 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22985511492784129 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 12:47:43.306 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22985511492784128 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 12:47:43.316 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m22985511492784130 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-04-01 12:47:43.316 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m22985511492784130 [0;39m ==> Parameters: 
2023-04-01 12:47:43.326 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m22985511492784128 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-04-01 12:47:43.327 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m22985511492784128 [0;39m ==> Parameters: 
2023-04-01 12:47:43.341 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22985511492784130 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-04-01 12:47:43.343 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22985511492784130 [0;39m <==        Row: 2023-03-02, 0, 0
2023-04-01 12:47:43.341 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m22985511492784128 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-04-01 12:47:43.344 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m22985511492784128 [0;39m <==        Row: 2023-04-01, 23, 8, 23, 8
2023-04-01 12:47:43.346 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22985511492784130 [0;39m <==        Row: 2023-03-05, 8, 5
2023-04-01 12:47:43.346 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m22985511492784128 [0;39m <==      Total: 1
2023-04-01 12:47:43.346 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22985511492784130 [0;39m <==        Row: 2023-03-06, 1, 1
2023-04-01 12:47:43.346 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22985511492784130 [0;39m <==        Row: 2023-03-18, 10, 7
2023-04-01 12:47:43.347 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22985511492784130 [0;39m <==        Row: 2023-03-23, 10, 7
2023-04-01 12:47:43.347 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22985511492784130 [0;39m <==        Row: 2023-03-25, 13, 7
2023-04-01 12:47:43.348 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22985511492784130 [0;39m <==        Row: 2023-03-26, 0, 0
2023-04-01 12:47:43.348 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22985511492784130 [0;39m <==        Row: 2023-03-27, 0, 0
2023-04-01 12:47:43.350 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m22985511492784130 [0;39m <==      Total: 8
2023-04-01 12:47:43.351 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22985511492784129 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 12:47:43.351 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22985511492784129 [0;39m ==> Parameters: 
2023-04-01 12:47:43.352 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985511492784129 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 12:47:43.352 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985511492784129 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 12:47:43.353 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985511492784129 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 12:47:43.353 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985511492784129 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 12:47:43.353 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985511492784129 [0;39m <==        Row: 200, 0, Java, 200
2023-04-01 12:47:43.354 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985511492784129 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 12:47:43.354 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985511492784129 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 12:47:43.354 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985511492784129 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 12:47:43.355 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985511492784129 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 12:47:43.355 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985511492784129 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 12:47:43.355 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985511492784129 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 12:47:43.356 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985511492784129 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 12:47:43.356 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985511492784129 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 12:47:43.356 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985511492784129 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 12:47:43.356 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985511492784129 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 12:47:43.357 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985511492784129 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 12:47:43.357 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22985511492784129 [0;39m <==      Total: 15
2023-04-01 12:47:43.374 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22985511492784129 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 12:47:43.374 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22985511492784129 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š127 ms -------------
2023-04-01 12:47:43.379 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22985511492784128 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1680278400000,"viewCount":23,"viewIncrease":23,"voteCount":8,"voteIncrease":8}],"success":true}
2023-04-01 12:47:43.380 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22985511492784130 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1677945600000,"viewCount":0,"viewIncrease":8,"voteCount":0,"voteIncrease":5},{"date":1678032000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":1},{"date":1679068800000,"viewCount":0,"viewIncrease":10,"voteCount":0,"voteIncrease":7},{"date":1679500800000,"viewCount":0,"viewIncrease":10,"voteCount":0,"voteIncrease":7},{"date":1679673600000,"viewCount":0,"viewIncrease":13,"voteCount":0,"voteIncrease":7},{"date":1679760000000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1679846400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2023-04-01 12:47:43.379 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22985511492784128 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š132 ms -------------
2023-04-01 12:47:43.380 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22985511492784130 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š133 ms -------------
2023-04-01 12:47:46.004 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22985523056480256 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 12:47:46.004 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22985523056480256 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/user/login POST
2023-04-01 12:47:46.005 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22985523056480256 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.UserController.login
2023-04-01 12:47:46.005 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22985523056480256 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 12:47:46.006 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22985523056480256 [0;39m è¯·æ±‚å‚æ•°: [{"loginName":"test"}]
2023-04-01 12:47:46.028 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22985523056480256 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2023-04-01 12:47:46.029 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22985523056480256 [0;39m ==> Parameters: test(String)
2023-04-01 12:47:46.031 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m22985523056480256 [0;39m <==    Columns: id, login_name, name, password
2023-04-01 12:47:46.031 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m22985523056480256 [0;39m <==        Row: 1, test, æµ‹è¯•, e70e2222a9d67c4f2eae107533359aa4
2023-04-01 12:47:46.032 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m22985523056480256 [0;39m <==      Total: 1
2023-04-01 12:47:46.036 INFO  com.jiawa.wiki.controller.UserController          :79   [32m22985523056480256 [0;39m ç”Ÿæˆå•ç‚¹ç™»å½•tokenï¼š22985523190697984ï¼Œå¹¶æ”¾å…¥redisä¸­
2023-04-01 12:47:46.256 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22985523056480256 [0;39m è¿”å›žç»“æžœ: {"content":{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"22985523190697984"},"success":true}
2023-04-01 12:47:46.256 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22985523056480256 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š252 ms -------------
2023-04-01 12:47:47.461 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22985529167581184 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 12:47:47.461 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22985529167581184 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 12:47:47.462 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22985529167581184 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 12:47:47.462 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22985529167581184 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 12:47:47.462 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22985529167581184 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 12:47:47.463 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22985529167581184 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 12:47:47.463 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22985529167581184 [0;39m ==> Parameters: 
2023-04-01 12:47:47.464 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985529167581184 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 12:47:47.464 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985529167581184 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 12:47:47.465 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985529167581184 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 12:47:47.465 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985529167581184 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 12:47:47.466 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985529167581184 [0;39m <==        Row: 200, 0, Java, 200
2023-04-01 12:47:47.466 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985529167581184 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 12:47:47.466 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985529167581184 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 12:47:47.466 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985529167581184 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 12:47:47.467 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985529167581184 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 12:47:47.467 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985529167581184 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 12:47:47.467 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985529167581184 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 12:47:47.468 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985529167581184 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 12:47:47.468 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985529167581184 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 12:47:47.468 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985529167581184 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 12:47:47.468 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985529167581184 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 12:47:47.468 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985529167581184 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 12:47:47.469 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22985529167581184 [0;39m <==      Total: 15
2023-04-01 12:47:47.471 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22985529167581184 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 12:47:47.471 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22985529167581184 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š10 ms -------------
2023-04-01 12:48:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22985581810290688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:48:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22985581810290688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:48:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22985581810290688 [0;39m ==> Parameters: 
2023-04-01 12:48:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22985581810290688 [0;39m <==    Updates: 0
2023-04-01 12:48:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22985581810290688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 12:48:03.533 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:48:04.466 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:48:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22985602769227776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:48:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22985602769227776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:48:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22985602769227776 [0;39m ==> Parameters: 
2023-04-01 12:48:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22985602769227776 [0;39m <==    Updates: 1
2023-04-01 12:48:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22985602769227776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:48:05.586 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:48:07.638 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:48:08.348 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m                  [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-04-01 12:48:08.349 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m                  [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š0 ms -------------
2023-04-01 12:48:08.353 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m                  [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-04-01 12:48:08.354 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m                  [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/category/save
2023-04-01 12:48:08.354 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m                  [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š22985523190697984
2023-04-01 12:48:08.358 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m                  [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"22985523190697984"}
2023-04-01 12:48:08.385 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22985616929198080 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 12:48:08.385 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22985616929198080 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/save POST
2023-04-01 12:48:08.385 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22985616929198080 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.save
2023-04-01 12:48:08.386 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22985616929198080 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 12:48:08.387 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22985616929198080 [0;39m è¯·æ±‚å‚æ•°: [{"id":200,"name":"Java","parent":300,"sort":200}]
2023-04-01 12:48:08.389 DEBUG c.j.wiki.mapper.CategoryMapper.updateByPrimaryKey :137  [32m22985616929198080 [0;39m ==>  Preparing: update category set parent = ?, `name` = ?, sort = ? where id = ?
2023-04-01 12:48:08.389 DEBUG c.j.wiki.mapper.CategoryMapper.updateByPrimaryKey :137  [32m22985616929198080 [0;39m ==> Parameters: 300(Long), Java(String), 200(Integer), 200(Long)
2023-04-01 12:48:08.391 DEBUG c.j.wiki.mapper.CategoryMapper.updateByPrimaryKey :137  [32m22985616929198080 [0;39m <==    Updates: 1
2023-04-01 12:48:08.391 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22985616929198080 [0;39m è¿”å›žç»“æžœ: {"success":true}
2023-04-01 12:48:08.392 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22985616929198080 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-04-01 12:48:08.395 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m22985616929198080 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š41 ms -------------
2023-04-01 12:48:08.432 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22985617126330368 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 12:48:08.433 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22985617126330368 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 12:48:08.433 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22985617126330368 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 12:48:08.433 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22985617126330368 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 12:48:08.434 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22985617126330368 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 12:48:08.436 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22985617126330368 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 12:48:08.436 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22985617126330368 [0;39m ==> Parameters: 
2023-04-01 12:48:08.437 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985617126330368 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 12:48:08.437 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985617126330368 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 12:48:08.438 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985617126330368 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 12:48:08.438 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985617126330368 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 12:48:08.439 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985617126330368 [0;39m <==        Row: 200, 300, Java, 200
2023-04-01 12:48:08.439 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985617126330368 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 12:48:08.439 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985617126330368 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 12:48:08.440 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985617126330368 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 12:48:08.440 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985617126330368 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 12:48:08.440 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985617126330368 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 12:48:08.441 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985617126330368 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 12:48:08.441 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985617126330368 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 12:48:08.441 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985617126330368 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 12:48:08.442 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985617126330368 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 12:48:08.442 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985617126330368 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 12:48:08.442 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22985617126330368 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 12:48:08.442 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22985617126330368 [0;39m <==      Total: 15
2023-04-01 12:48:08.443 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22985617126330368 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":300,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 12:48:08.443 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22985617126330368 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š11 ms -------------
2023-04-01 12:48:09.697 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:48:31.749 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:48:33.790 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:48:34.462 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:48:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22985728585764864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:48:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22985728585764864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:48:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22985728585764864 [0;39m ==> Parameters: 
2023-04-01 12:48:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22985728585764864 [0;39m <==    Updates: 1
2023-04-01 12:48:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22985728585764864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:48:35.836 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:48:37.892 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:48:39.948 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:48:55.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:48:57.891 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:49:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22985833426587648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:49:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22985833426587648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:49:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22985833426587648 [0;39m ==> Parameters: 
2023-04-01 12:49:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22985833426587648 [0;39m <==    Updates: 0
2023-04-01 12:49:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22985833426587648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 12:49:03.521 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:49:04.472 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:49:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22985854393913344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:49:05.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22985854393913344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:49:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22985854393913344 [0;39m ==> Parameters: 
2023-04-01 12:49:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22985854393913344 [0;39m <==    Updates: 1
2023-04-01 12:49:05.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22985854393913344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 12:49:05.577 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:49:07.623 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:49:19.907 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:49:21.941 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:49:33.532 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:49:34.469 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:49:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22985980273364992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:49:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22985980273364992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:49:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22985980273364992 [0;39m ==> Parameters: 
2023-04-01 12:49:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22985980273364992 [0;39m <==    Updates: 1
2023-04-01 12:49:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22985980273364992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:49:37.633 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:49:46.486 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:49:57.863 INFO  com.jiawa.wiki.websocket.WebSocketServer          :41   [32m                  [0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šPq4GHxQfcCï¼Œsession idï¼š0ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2023-04-01 12:49:57.916 INFO  o.a.r.s.support.DefaultRocketMQListenerContainer  :216  [32m                  [0;39m container destroyed, DefaultRocketMQListenerContainer{consumerGroup='default', nameServer='127.0.0.1:9876', topic='VOTE_TOPIC', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
2023-04-01 12:49:57.919 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :218  [32m                  [0;39m Shutting down ExecutorService 'taskScheduler'
2023-04-01 12:49:57.920 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :218  [32m                  [0;39m Shutting down ExecutorService 'applicationTaskExecutor'
2023-04-01 12:49:57.921 INFO  com.zaxxer.hikari.HikariDataSource                :350  [32m                  [0;39m HikariPool-1 - Shutdown initiated...
2023-04-01 12:49:57.923 INFO  com.zaxxer.hikari.HikariDataSource                :352  [32m                  [0;39m HikariPool-1 - Shutdown completed.
2023-04-01 12:49:58.057 WARN  o.s.beans.factory.support.DisposableBeanAdapter   :267  [32m                  [0;39m Invocation of destroy method failed on bean with name 'rocketMQTemplate': java.lang.IllegalStateException: Shutdown in progress
2023-04-01 12:49:58.057 WARN  o.s.beans.factory.support.DisposableBeanAdapter   :349  [32m                  [0;39m Destroy method 'shutdown' on bean with name 'defaultMQProducer' threw an exception: java.lang.IllegalStateException: Shutdown in progress
2023-04-01 12:50:06.315 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.1.6.Final
2023-04-01 12:50:06.441 INFO  com.jiawa.wiki.WikiApplication                    :55   [32m                  [0;39m Starting WikiApplication using Java 1.8.0_271 on LAPTOP-TLCI2GAA with PID 4780 (D:\work\jiawawiki\target\classes started by k in D:\work\jiawawiki)
2023-04-01 12:50:06.459 INFO  com.jiawa.wiki.WikiApplication                    :660  [32m                  [0;39m No active profile set, falling back to default profiles: default
2023-04-01 12:50:06.641 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-04-01 12:50:06.643 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-04-01 12:50:07.537 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :250  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2023-04-01 12:50:07.540 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :128  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-04-01 12:50:07.573 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :188  [32m                  [0;39m Finished Spring Data repository scanning in 20 ms. Found 0 Redis repository interfaces.
2023-04-01 12:50:07.927 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration$$EnhancerBySpringCGLIB$$f472af85] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 12:50:07.943 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 12:50:08.609 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'defaultMQProducer' of type [org.apache.rocketmq.client.producer.DefaultMQProducer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 12:50:08.615 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonConfig' of type [com.jiawa.wiki.config.JacksonConfig$$EnhancerBySpringCGLIB$$96ad2486] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 12:50:08.617 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 12:50:08.619 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 12:50:08.623 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'spring.jackson-org.springframework.boot.autoconfigure.jackson.JacksonProperties' of type [org.springframework.boot.autoconfigure.jackson.JacksonProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 12:50:08.625 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'standardJacksonObjectMapperBuilderCustomizer' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration$StandardJackson2ObjectMapperBuilderCustomizer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 12:50:08.626 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 12:50:08.630 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'parameterNamesModule' of type [com.fasterxml.jackson.module.paramnames.ParameterNamesModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 12:50:08.630 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 12:50:08.650 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jsonComponentModule' of type [org.springframework.boot.jackson.JsonComponentModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 12:50:08.651 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.data.web.config.SpringDataJacksonConfiguration' of type [org.springframework.data.web.config.SpringDataJacksonConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 12:50:08.654 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonGeoModule' of type [org.springframework.data.geo.GeoModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 12:50:08.658 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapperBuilder' of type [org.springframework.http.converter.json.Jackson2ObjectMapperBuilder] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 12:50:08.672 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapper' of type [com.fasterxml.jackson.databind.ObjectMapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 12:50:10.207 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketMQTemplate' of type [org.apache.rocketmq.spring.core.RocketMQTemplate] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 12:50:10.209 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'transactionHandlerRegistry' of type [org.apache.rocketmq.spring.config.TransactionHandlerRegistry] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 12:50:10.972 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2023-04-01 12:50:10.980 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2023-04-01 12:50:10.980 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2023-04-01 12:50:10.980 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.39]
2023-04-01 12:50:11.102 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2023-04-01 12:50:11.102 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :289  [32m                  [0;39m Root WebApplicationContext: initialization completed in 4459 ms
2023-04-01 12:50:12.265 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2023-04-01 12:50:12.506 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:50:12.741 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:50:12.805 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2023-04-01 12:50:12.873 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2023-04-01 12:50:15.463 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:50:17.493 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:50:17.495 INFO  o.a.r.s.support.DefaultRocketMQListenerContainer  :243  [32m                  [0;39m running container: DefaultRocketMQListenerContainer{consumerGroup='default', nameServer='127.0.0.1:9876', topic='VOTE_TOPIC', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
2023-04-01 12:50:17.495 INFO  o.a.r.s.a.ListenerContainerConfiguration          :107  [32m                  [0;39m Register the listener to container, listenerBeanName:voteTopicConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-04-01 12:50:17.529 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2023-04-01 12:50:17.544 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2023-04-01 12:50:17.557 INFO  com.jiawa.wiki.WikiApplication                    :61   [32m                  [0;39m Started WikiApplication in 12.179 seconds (JVM running for 14.378)
2023-04-01 12:50:17.560 INFO  com.jiawa.wiki.WikiApplication                    :26   [32m                  [0;39m å¯åŠ¨æˆåŠŸï¼ï¼
2023-04-01 12:50:17.560 INFO  com.jiawa.wiki.WikiApplication                    :27   [32m                  [0;39m åœ°å€: 	http://127.0.0.1:8880
2023-04-01 12:50:21.590 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:50:22.799 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-04-01 12:50:22.799 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2023-04-01 12:50:22.801 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 2 ms
2023-04-01 12:50:22.884 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22986181042114560 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 12:50:22.884 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22986181042114560 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 12:50:22.885 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22986181042114560 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 12:50:22.885 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22986181042114560 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 12:50:22.892 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22986181092446208 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 12:50:22.892 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22986181092446208 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-04-01 12:50:22.894 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22986181092446208 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-04-01 12:50:22.894 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22986181100834816 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 12:50:22.894 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22986181092446208 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 12:50:22.894 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22986181100834816 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-04-01 12:50:22.895 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22986181100834816 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-04-01 12:50:22.895 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22986181100834816 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 12:50:22.969 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22986181042114560 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 12:50:22.971 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22986181092446208 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 12:50:22.971 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22986181100834816 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 12:50:23.008 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m22986181100834816 [0;39m HikariPool-1 - Starting...
2023-04-01 12:50:23.477 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m22986181100834816 [0;39m HikariPool-1 - Start completed.
2023-04-01 12:50:23.486 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m22986181100834816 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-04-01 12:50:23.500 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22986181042114560 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 12:50:23.507 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m22986181092446208 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-04-01 12:50:23.527 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m22986181092446208 [0;39m ==> Parameters: 
2023-04-01 12:50:23.528 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m22986181100834816 [0;39m ==> Parameters: 
2023-04-01 12:50:23.528 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22986181042114560 [0;39m ==> Parameters: 
2023-04-01 12:50:23.559 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986181042114560 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 12:50:23.560 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22986181100834816 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-04-01 12:50:23.561 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986181042114560 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 12:50:23.561 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m22986181092446208 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-04-01 12:50:23.561 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22986181100834816 [0;39m <==        Row: 2023-03-02, 0, 0
2023-04-01 12:50:23.562 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m22986181092446208 [0;39m <==        Row: 2023-04-01, 23, 8, 23, 8
2023-04-01 12:50:23.562 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986181042114560 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 12:50:23.563 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22986181100834816 [0;39m <==        Row: 2023-03-05, 8, 5
2023-04-01 12:50:23.563 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m22986181092446208 [0;39m <==      Total: 1
2023-04-01 12:50:23.563 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986181042114560 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 12:50:23.563 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22986181100834816 [0;39m <==        Row: 2023-03-06, 1, 1
2023-04-01 12:50:23.564 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986181042114560 [0;39m <==        Row: 200, 300, Java, 200
2023-04-01 12:50:23.564 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22986181100834816 [0;39m <==        Row: 2023-03-18, 10, 7
2023-04-01 12:50:23.564 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986181042114560 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 12:50:23.564 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22986181100834816 [0;39m <==        Row: 2023-03-23, 10, 7
2023-04-01 12:50:23.565 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22986181100834816 [0;39m <==        Row: 2023-03-25, 13, 7
2023-04-01 12:50:23.564 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986181042114560 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 12:50:23.565 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22986181100834816 [0;39m <==        Row: 2023-03-26, 0, 0
2023-04-01 12:50:23.567 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22986181100834816 [0;39m <==        Row: 2023-03-27, 0, 0
2023-04-01 12:50:23.568 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m22986181100834816 [0;39m <==      Total: 8
2023-04-01 12:50:23.568 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986181042114560 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 12:50:23.569 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986181042114560 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 12:50:23.569 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986181042114560 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 12:50:23.570 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986181042114560 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 12:50:23.571 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986181042114560 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 12:50:23.571 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986181042114560 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 12:50:23.572 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986181042114560 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 12:50:23.573 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986181042114560 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 12:50:23.574 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986181042114560 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 12:50:23.575 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22986181042114560 [0;39m <==      Total: 15
2023-04-01 12:50:23.618 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22986181042114560 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":300,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 12:50:23.619 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22986181042114560 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š740 ms -------------
2023-04-01 12:50:23.628 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22986181100834816 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1677945600000,"viewCount":0,"viewIncrease":8,"voteCount":0,"voteIncrease":5},{"date":1678032000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":1},{"date":1679068800000,"viewCount":0,"viewIncrease":10,"voteCount":0,"voteIncrease":7},{"date":1679500800000,"viewCount":0,"viewIncrease":10,"voteCount":0,"voteIncrease":7},{"date":1679673600000,"viewCount":0,"viewIncrease":13,"voteCount":0,"voteIncrease":7},{"date":1679760000000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1679846400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2023-04-01 12:50:23.629 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22986181100834816 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š735 ms -------------
2023-04-01 12:50:23.630 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22986181092446208 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1680278400000,"viewCount":23,"viewIncrease":23,"voteCount":8,"voteIncrease":8}],"success":true}
2023-04-01 12:50:23.630 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22986181092446208 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š738 ms -------------
2023-04-01 12:50:26.638 INFO  com.jiawa.wiki.websocket.WebSocketServer          :32   [32m                  [0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šel73NUJk6fï¼Œsession idï¼š0ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2023-04-01 12:50:26.778 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22986197391511552 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 12:50:26.779 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22986197391511552 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-04-01 12:50:26.779 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22986197391511552 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-04-01 12:50:26.780 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22986197399900160 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 12:50:26.780 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22986197391511552 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 12:50:26.780 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22986197399900160 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-04-01 12:50:26.780 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22986197391511552 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 12:50:26.780 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22986197399900160 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-04-01 12:50:26.780 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22986197399900160 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 12:50:26.781 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22986197399900160 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 12:50:26.782 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m22986197399900160 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-04-01 12:50:26.783 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m22986197399900160 [0;39m ==> Parameters: 
2023-04-01 12:50:26.783 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22986197412483072 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 12:50:26.784 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22986197412483072 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 12:50:26.784 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22986197412483072 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 12:50:26.784 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22986197412483072 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 12:50:26.784 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22986197412483072 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 12:50:26.784 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22986197399900160 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-04-01 12:50:26.785 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22986197399900160 [0;39m <==        Row: 2023-03-02, 0, 0
2023-04-01 12:50:26.785 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22986197412483072 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 12:50:26.785 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22986197412483072 [0;39m ==> Parameters: 
2023-04-01 12:50:26.785 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22986197399900160 [0;39m <==        Row: 2023-03-05, 8, 5
2023-04-01 12:50:26.785 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m22986197391511552 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-04-01 12:50:26.786 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m22986197391511552 [0;39m ==> Parameters: 
2023-04-01 12:50:26.786 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986197412483072 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 12:50:26.786 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986197412483072 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 12:50:26.787 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m22986197391511552 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-04-01 12:50:26.787 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m22986197391511552 [0;39m <==        Row: 2023-04-01, 23, 8, 23, 8
2023-04-01 12:50:26.788 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986197412483072 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 12:50:26.789 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986197412483072 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 12:50:26.789 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986197412483072 [0;39m <==        Row: 200, 300, Java, 200
2023-04-01 12:50:26.789 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22986197399900160 [0;39m <==        Row: 2023-03-06, 1, 1
2023-04-01 12:50:26.790 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986197412483072 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 12:50:26.790 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986197412483072 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 12:50:26.790 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986197412483072 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 12:50:26.790 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m22986197391511552 [0;39m <==      Total: 1
2023-04-01 12:50:26.790 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986197412483072 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 12:50:26.791 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986197412483072 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 12:50:26.791 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22986197391511552 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1680278400000,"viewCount":23,"viewIncrease":23,"voteCount":8,"voteIncrease":8}],"success":true}
2023-04-01 12:50:26.791 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22986197399900160 [0;39m <==        Row: 2023-03-18, 10, 7
2023-04-01 12:50:26.791 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986197412483072 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 12:50:26.791 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22986197399900160 [0;39m <==        Row: 2023-03-23, 10, 7
2023-04-01 12:50:26.791 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986197412483072 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 12:50:26.792 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22986197399900160 [0;39m <==        Row: 2023-03-25, 13, 7
2023-04-01 12:50:26.792 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986197412483072 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 12:50:26.791 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22986197391511552 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š13 ms -------------
2023-04-01 12:50:26.792 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986197412483072 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 12:50:26.792 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986197412483072 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 12:50:26.792 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986197412483072 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 12:50:26.793 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22986197412483072 [0;39m <==      Total: 15
2023-04-01 12:50:26.793 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22986197399900160 [0;39m <==        Row: 2023-03-26, 0, 0
2023-04-01 12:50:26.794 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22986197399900160 [0;39m <==        Row: 2023-03-27, 0, 0
2023-04-01 12:50:26.795 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m22986197399900160 [0;39m <==      Total: 8
2023-04-01 12:50:26.795 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22986197412483072 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":300,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 12:50:26.795 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22986197412483072 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š12 ms -------------
2023-04-01 12:50:26.795 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22986197399900160 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1677945600000,"viewCount":0,"viewIncrease":8,"voteCount":0,"voteIncrease":5},{"date":1678032000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":1},{"date":1679068800000,"viewCount":0,"viewIncrease":10,"voteCount":0,"voteIncrease":7},{"date":1679500800000,"viewCount":0,"viewIncrease":10,"voteCount":0,"voteIncrease":7},{"date":1679673600000,"viewCount":0,"viewIncrease":13,"voteCount":0,"voteIncrease":7},{"date":1679760000000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1679846400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2023-04-01 12:50:26.796 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22986197399900160 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š16 ms -------------
2023-04-01 12:50:33.761 INFO  com.jiawa.wiki.websocket.WebSocketServer          :41   [32m                  [0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šel73NUJk6fï¼Œsession idï¼š0ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2023-04-01 12:50:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22986231893856256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:50:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22986231893856256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:50:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22986231893856256 [0;39m ==> Parameters: 
2023-04-01 12:50:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22986231893856256 [0;39m <==    Updates: 1
2023-04-01 12:50:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22986231893856256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 12:50:35.417 INFO  com.jiawa.wiki.websocket.WebSocketServer          :32   [32m                  [0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šYQvlP3fr0Rï¼Œsession idï¼š1ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2023-04-01 12:50:35.602 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22986234402050048 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 12:50:35.603 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22986234402050048 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-04-01 12:50:35.603 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22986234402050048 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-04-01 12:50:35.603 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22986234402050048 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 12:50:35.603 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22986234402050048 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 12:50:35.604 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m22986234402050048 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-04-01 12:50:35.604 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22986234410438656 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 12:50:35.604 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m22986234402050048 [0;39m ==> Parameters: 
2023-04-01 12:50:35.604 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22986234410438656 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-04-01 12:50:35.605 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22986234410438656 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-04-01 12:50:35.605 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22986234410438656 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 12:50:35.605 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22986234414632960 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 12:50:35.605 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22986234414632960 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 12:50:35.605 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22986234410438656 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 12:50:35.605 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22986234414632960 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 12:50:35.605 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22986234414632960 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 12:50:35.605 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m22986234402050048 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-04-01 12:50:35.606 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22986234414632960 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 12:50:35.606 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m22986234410438656 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-04-01 12:50:35.606 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m22986234402050048 [0;39m <==        Row: 2023-04-01, 23, 8, 23, 8
2023-04-01 12:50:35.606 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m22986234410438656 [0;39m ==> Parameters: 
2023-04-01 12:50:35.606 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m22986234402050048 [0;39m <==      Total: 1
2023-04-01 12:50:35.606 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22986234414632960 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 12:50:35.606 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22986234402050048 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1680278400000,"viewCount":23,"viewIncrease":23,"voteCount":8,"voteIncrease":8}],"success":true}
2023-04-01 12:50:35.607 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22986234402050048 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-04-01 12:50:35.606 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22986234414632960 [0;39m ==> Parameters: 
2023-04-01 12:50:35.607 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22986234410438656 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-04-01 12:50:35.607 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22986234410438656 [0;39m <==        Row: 2023-03-02, 0, 0
2023-04-01 12:50:35.607 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986234414632960 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 12:50:35.608 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22986234410438656 [0;39m <==        Row: 2023-03-05, 8, 5
2023-04-01 12:50:35.608 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986234414632960 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 12:50:35.608 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22986234410438656 [0;39m <==        Row: 2023-03-06, 1, 1
2023-04-01 12:50:35.608 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986234414632960 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 12:50:35.609 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22986234410438656 [0;39m <==        Row: 2023-03-18, 10, 7
2023-04-01 12:50:35.609 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986234414632960 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 12:50:35.609 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22986234410438656 [0;39m <==        Row: 2023-03-23, 10, 7
2023-04-01 12:50:35.609 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986234414632960 [0;39m <==        Row: 200, 300, Java, 200
2023-04-01 12:50:35.609 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986234414632960 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 12:50:35.609 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22986234410438656 [0;39m <==        Row: 2023-03-25, 13, 7
2023-04-01 12:50:35.609 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986234414632960 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 12:50:35.610 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22986234410438656 [0;39m <==        Row: 2023-03-26, 0, 0
2023-04-01 12:50:35.610 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986234414632960 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 12:50:35.610 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m22986234410438656 [0;39m <==        Row: 2023-03-27, 0, 0
2023-04-01 12:50:35.610 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986234414632960 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 12:50:35.610 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m22986234410438656 [0;39m <==      Total: 8
2023-04-01 12:50:35.610 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986234414632960 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 12:50:35.611 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986234414632960 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 12:50:35.611 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22986234410438656 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1677945600000,"viewCount":0,"viewIncrease":8,"voteCount":0,"voteIncrease":5},{"date":1678032000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":1},{"date":1679068800000,"viewCount":0,"viewIncrease":10,"voteCount":0,"voteIncrease":7},{"date":1679500800000,"viewCount":0,"viewIncrease":10,"voteCount":0,"voteIncrease":7},{"date":1679673600000,"viewCount":0,"viewIncrease":13,"voteCount":0,"voteIncrease":7},{"date":1679760000000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1679846400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2023-04-01 12:50:35.611 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22986234410438656 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-04-01 12:50:35.611 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986234414632960 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 12:50:35.611 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986234414632960 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 12:50:35.612 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986234414632960 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 12:50:35.612 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986234414632960 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 12:50:35.612 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986234414632960 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 12:50:35.613 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22986234414632960 [0;39m <==      Total: 15
2023-04-01 12:50:35.614 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22986234414632960 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":300,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 12:50:35.614 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22986234414632960 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2023-04-01 12:50:39.039 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22986248817872896 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 12:50:39.040 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22986248817872896 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 12:50:39.041 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22986248817872896 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 12:50:39.041 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22986248817872896 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 12:50:39.041 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22986248817872896 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 12:50:39.042 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22986248817872896 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 12:50:39.043 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22986248817872896 [0;39m ==> Parameters: 
2023-04-01 12:50:39.044 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986248817872896 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 12:50:39.044 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986248817872896 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 12:50:39.045 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986248817872896 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 12:50:39.045 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986248817872896 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 12:50:39.045 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986248817872896 [0;39m <==        Row: 200, 300, Java, 200
2023-04-01 12:50:39.046 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986248817872896 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 12:50:39.046 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986248817872896 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 12:50:39.046 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986248817872896 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 12:50:39.046 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986248817872896 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 12:50:39.047 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986248817872896 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 12:50:39.047 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986248817872896 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 12:50:39.047 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986248817872896 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 12:50:39.047 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986248817872896 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 12:50:39.048 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986248817872896 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 12:50:39.048 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986248817872896 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 12:50:39.048 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986248817872896 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 12:50:39.049 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22986248817872896 [0;39m <==      Total: 15
2023-04-01 12:50:39.050 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22986248817872896 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":300,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 12:50:39.213 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22986248817872896 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š174 ms -------------
2023-04-01 12:50:41.668 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:50:42.262 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:50:43.707 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:50:45.763 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:50:47.816 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:50:52.213 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m                  [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-04-01 12:50:52.214 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m                  [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/category/save
2023-04-01 12:50:52.214 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m                  [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š22985523190697984
2023-04-01 12:50:52.432 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m                  [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"22985523190697984"}
2023-04-01 12:50:52.554 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22986305503891456 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 12:50:52.554 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22986305503891456 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/save POST
2023-04-01 12:50:52.554 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22986305503891456 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.save
2023-04-01 12:50:52.554 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22986305503891456 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 12:50:52.557 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22986305503891456 [0;39m è¯·æ±‚å‚æ•°: [{"id":200,"name":"Java","parent":0,"sort":200}]
2023-04-01 12:50:52.561 DEBUG c.j.wiki.mapper.CategoryMapper.updateByPrimaryKey :137  [32m22986305503891456 [0;39m ==>  Preparing: update category set parent = ?, `name` = ?, sort = ? where id = ?
2023-04-01 12:50:52.562 DEBUG c.j.wiki.mapper.CategoryMapper.updateByPrimaryKey :137  [32m22986305503891456 [0;39m ==> Parameters: 0(Long), Java(String), 200(Integer), 200(Long)
2023-04-01 12:50:52.563 DEBUG c.j.wiki.mapper.CategoryMapper.updateByPrimaryKey :137  [32m22986305503891456 [0;39m <==    Updates: 1
2023-04-01 12:50:52.564 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22986305503891456 [0;39m è¿”å›žç»“æžœ: {"success":true}
2023-04-01 12:50:52.564 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22986305503891456 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š10 ms -------------
2023-04-01 12:50:52.565 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m22986305503891456 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š351 ms -------------
2023-04-01 12:50:52.609 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22986305734578176 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 12:50:52.610 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22986305734578176 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 12:50:52.610 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22986305734578176 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 12:50:52.610 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22986305734578176 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 12:50:52.610 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22986305734578176 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 12:50:52.611 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22986305734578176 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 12:50:52.611 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22986305734578176 [0;39m ==> Parameters: 
2023-04-01 12:50:52.611 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986305734578176 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 12:50:52.612 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986305734578176 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 12:50:52.612 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986305734578176 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 12:50:52.612 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986305734578176 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 12:50:52.612 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986305734578176 [0;39m <==        Row: 200, 0, Java, 200
2023-04-01 12:50:52.613 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986305734578176 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 12:50:52.613 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986305734578176 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 12:50:52.613 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986305734578176 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 12:50:52.613 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986305734578176 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 12:50:52.614 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986305734578176 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 12:50:52.614 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986305734578176 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 12:50:52.615 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986305734578176 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 12:50:52.615 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986305734578176 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 12:50:52.615 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986305734578176 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 12:50:52.616 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986305734578176 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 12:50:52.616 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986305734578176 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 12:50:52.616 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22986305734578176 [0;39m <==      Total: 15
2023-04-01 12:50:52.617 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22986305734578176 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 12:50:52.618 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22986305734578176 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2023-04-01 12:51:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22986336772427776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:51:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22986336772427776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:51:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22986336772427776 [0;39m ==> Parameters: 
2023-04-01 12:51:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22986336772427776 [0;39m <==    Updates: 0
2023-04-01 12:51:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22986336772427776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 12:51:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22986357735559168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:51:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22986357735559168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:51:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22986357735559168 [0;39m ==> Parameters: 
2023-04-01 12:51:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22986357735559168 [0;39m <==    Updates: 1
2023-04-01 12:51:05.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22986357735559168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š16æ¯«ç§’
2023-04-01 12:51:12.277 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:51:12.296 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:51:14.357 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:51:18.417 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:51:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22986483568873472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:51:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22986483568873472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:51:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22986483568873472 [0;39m ==> Parameters: 
2023-04-01 12:51:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22986483568873472 [0;39m <==    Updates: 1
2023-04-01 12:51:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22986483568873472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 12:51:36.381 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:51:37.913 INFO  com.jiawa.wiki.websocket.WebSocketServer          :41   [32m                  [0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šYQvlP3fr0Rï¼Œsession idï¼š1ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2023-04-01 12:51:41.803 INFO  com.jiawa.wiki.websocket.WebSocketServer          :32   [32m                  [0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šfItqoZlFRMï¼Œsession idï¼š2ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2023-04-01 12:51:41.942 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:51:42.040 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22986513063219200 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 12:51:42.040 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22986513063219200 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 12:51:42.040 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22986513063219200 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 12:51:42.040 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22986513063219200 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 12:51:42.040 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22986513063219200 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 12:51:42.041 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22986513063219200 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 12:51:42.041 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22986513063219200 [0;39m ==> Parameters: 
2023-04-01 12:51:42.042 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986513063219200 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 12:51:42.042 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986513063219200 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 12:51:42.042 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986513063219200 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 12:51:42.043 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986513063219200 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 12:51:42.043 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986513063219200 [0;39m <==        Row: 200, 0, Java, 200
2023-04-01 12:51:42.043 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986513063219200 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 12:51:42.043 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986513063219200 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 12:51:42.044 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986513063219200 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 12:51:42.044 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986513063219200 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 12:51:42.044 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986513063219200 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 12:51:42.044 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986513063219200 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 12:51:42.045 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986513063219200 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 12:51:42.045 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986513063219200 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 12:51:42.045 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986513063219200 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 12:51:42.045 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986513063219200 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 12:51:42.046 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22986513063219200 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 12:51:42.046 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22986513063219200 [0;39m <==      Total: 15
2023-04-01 12:51:42.645 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:51:46.537 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:51:47.808 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22986513063219200 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 12:51:47.808 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22986513063219200 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5768 ms -------------
2023-04-01 12:51:58.448 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:52:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22986588426473472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:52:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22986588426473472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:52:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22986588426473472 [0;39m ==> Parameters: 
2023-04-01 12:52:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22986588426473472 [0;39m <==    Updates: 0
2023-04-01 12:52:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22986588426473472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 12:52:00.491 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:52:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22986609410576384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:52:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22986609410576384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:52:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22986609410576384 [0;39m ==> Parameters: 
2023-04-01 12:52:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22986609410576384 [0;39m <==    Updates: 1
2023-04-01 12:52:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22986609410576384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 12:52:12.259 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:52:15.726 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:52:22.562 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:52:24.599 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:52:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22986735243890688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:52:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22986735243890688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:52:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22986735243890688 [0;39m ==> Parameters: 
2023-04-01 12:52:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22986735243890688 [0;39m <==    Updates: 1
2023-04-01 12:52:35.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22986735243890688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 12:52:43.037 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:52:44.746 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:52:47.231 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:52:49.291 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:52:51.732 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:53:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22986840118267904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:53:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22986840118267904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:53:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22986840118267904 [0;39m ==> Parameters: 
2023-04-01 12:53:00.027 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22986840118267904 [0;39m <==    Updates: 0
2023-04-01 12:53:00.029 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22986840118267904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 12:53:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22986861081399296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:53:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22986861081399296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:53:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22986861081399296 [0;39m ==> Parameters: 
2023-04-01 12:53:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22986861081399296 [0;39m <==    Updates: 1
2023-04-01 12:53:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22986861081399296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 12:53:12.269 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:53:15.712 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:53:18.435 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:53:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22986986889547776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:53:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22986986889547776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:53:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22986986889547776 [0;39m ==> Parameters: 
2023-04-01 12:53:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22986986889547776 [0;39m <==    Updates: 1
2023-04-01 12:53:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22986986889547776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:53:40.474 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:53:42.268 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:53:42.517 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:53:44.567 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:53:46.622 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:53:48.661 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:54:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22987091713593344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:54:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22987091713593344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:54:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22987091713593344 [0;39m ==> Parameters: 
2023-04-01 12:54:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22987091713593344 [0;39m <==    Updates: 0
2023-04-01 12:54:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22987091713593344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:54:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22987112689307648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:54:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22987112689307648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:54:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22987112689307648 [0;39m ==> Parameters: 
2023-04-01 12:54:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22987112689307648 [0;39m <==    Updates: 1
2023-04-01 12:54:05.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22987112689307648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 12:54:06.620 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:54:11.646 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:54:12.288 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:54:15.723 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:54:30.709 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:54:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22987238514233344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:54:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22987238514233344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:54:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22987238514233344 [0;39m ==> Parameters: 
2023-04-01 12:54:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22987238514233344 [0;39m <==    Updates: 1
2023-04-01 12:54:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22987238514233344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 12:54:41.647 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:54:42.265 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:54:45.734 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:54:54.780 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:55:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22987343401193472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:55:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22987343401193472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:55:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22987343401193472 [0;39m ==> Parameters: 
2023-04-01 12:55:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22987343401193472 [0;39m <==    Updates: 0
2023-04-01 12:55:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22987343401193472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 12:55:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22987364368519168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:55:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22987364368519168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:55:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22987364368519168 [0;39m ==> Parameters: 
2023-04-01 12:55:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22987364368519168 [0;39m <==    Updates: 1
2023-04-01 12:55:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22987364368519168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 12:55:11.647 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:55:12.262 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:55:15.722 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:55:19.798 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:55:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22987490214416384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:55:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22987490214416384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:55:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22987490214416384 [0;39m ==> Parameters: 
2023-04-01 12:55:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22987490214416384 [0;39m <==    Updates: 1
2023-04-01 12:55:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22987490214416384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:55:42.262 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:55:45.764 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:55:47.812 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:56:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22987595063627776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:56:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22987595063627776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:56:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22987595063627776 [0;39m ==> Parameters: 
2023-04-01 12:56:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22987595063627776 [0;39m <==    Updates: 0
2023-04-01 12:56:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22987595063627776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 12:56:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22987616030953472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:56:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22987616030953472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:56:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22987616030953472 [0;39m ==> Parameters: 
2023-04-01 12:56:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22987616030953472 [0;39m <==    Updates: 1
2023-04-01 12:56:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22987616030953472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 12:56:09.877 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:56:11.921 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:56:12.275 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:56:18.038 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:56:33.970 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:56:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22987741843296256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:56:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22987741843296256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:56:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22987741843296256 [0;39m ==> Parameters: 
2023-04-01 12:56:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22987741843296256 [0;39m <==    Updates: 1
2023-04-01 12:56:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22987741843296256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 12:56:36.012 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:56:42.275 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:56:47.027 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:56:58.065 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:57:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22987846734450688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:57:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22987846734450688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:57:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22987846734450688 [0;39m ==> Parameters: 
2023-04-01 12:57:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22987846734450688 [0;39m <==    Updates: 0
2023-04-01 12:57:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22987846734450688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 12:57:00.440 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:57:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22987867714359296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:57:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22987867714359296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:57:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22987867714359296 [0;39m ==> Parameters: 
2023-04-01 12:57:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22987867714359296 [0;39m <==    Updates: 1
2023-04-01 12:57:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22987867714359296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:57:12.263 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:57:15.726 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:57:22.529 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:57:24.830 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:57:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22987993526702080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:57:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22987993526702080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:57:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22987993526702080 [0;39m ==> Parameters: 
2023-04-01 12:57:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22987993526702080 [0;39m <==    Updates: 1
2023-04-01 12:57:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22987993526702080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:57:42.273 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:57:44.080 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:57:46.122 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:57:48.156 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:57:50.579 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:58:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22988098346553344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:58:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22988098346553344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:58:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22988098346553344 [0;39m ==> Parameters: 
2023-04-01 12:58:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22988098346553344 [0;39m <==    Updates: 0
2023-04-01 12:58:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22988098346553344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 12:58:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22988119347433472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:58:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22988119347433472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:58:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22988119347433472 [0;39m ==> Parameters: 
2023-04-01 12:58:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22988119347433472 [0;39m <==    Updates: 1
2023-04-01 12:58:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22988119347433472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 12:58:11.659 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:58:12.260 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:58:16.495 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:58:18.541 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:58:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22988245197524992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:58:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22988245197524992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:58:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22988245197524992 [0;39m ==> Parameters: 
2023-04-01 12:58:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22988245197524992 [0;39m <==    Updates: 1
2023-04-01 12:58:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22988245197524992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:58:42.579 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:58:42.625 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:58:47.026 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:58:49.071 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:59:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22988350029959168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 12:59:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22988350029959168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 12:59:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22988350029959168 [0;39m ==> Parameters: 
2023-04-01 12:59:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22988350029959168 [0;39m <==    Updates: 0
2023-04-01 12:59:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22988350029959168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 12:59:04.672 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:59:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22988371018256384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:59:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22988371018256384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:59:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22988371018256384 [0;39m ==> Parameters: 
2023-04-01 12:59:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22988371018256384 [0;39m <==    Updates: 1
2023-04-01 12:59:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22988371018256384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 12:59:07.191 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:59:11.666 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:59:12.254 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:59:13.706 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:59:15.734 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:59:29.234 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:59:31.273 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:59:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22988496838987776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 12:59:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22988496838987776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 12:59:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22988496838987776 [0;39m ==> Parameters: 
2023-04-01 12:59:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22988496838987776 [0;39m <==    Updates: 1
2023-04-01 12:59:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22988496838987776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 12:59:42.269 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:59:43.702 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:59:45.740 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:59:53.322 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 12:59:55.365 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:00:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22988601704976384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:00:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22988601704976384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:00:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22988601704976384 [0;39m ==> Parameters: 
2023-04-01 13:00:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22988601704976384 [0;39m <==    Updates: 0
2023-04-01 13:00:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22988601704976384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-04-01 13:00:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22988622680690688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:00:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22988622680690688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:00:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22988622680690688 [0;39m ==> Parameters: 
2023-04-01 13:00:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22988622680690688 [0;39m <==    Updates: 1
2023-04-01 13:00:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22988622680690688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 13:00:12.257 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:00:15.753 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:00:19.825 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:00:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22988748467867648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:00:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22988748467867648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:00:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22988748467867648 [0;39m ==> Parameters: 
2023-04-01 13:00:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22988748467867648 [0;39m <==    Updates: 1
2023-04-01 13:00:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22988748467867648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 13:00:41.649 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:00:42.269 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:00:45.734 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:00:47.782 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:01:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22988853359022080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:01:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22988853359022080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:01:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22988853359022080 [0;39m ==> Parameters: 
2023-04-01 13:01:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22988853359022080 [0;39m <==    Updates: 0
2023-04-01 13:01:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22988853359022080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 13:01:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22988874343124992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:01:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22988874343124992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:01:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22988874343124992 [0;39m ==> Parameters: 
2023-04-01 13:01:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22988874343124992 [0;39m <==    Updates: 1
2023-04-01 13:01:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22988874343124992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 13:01:09.842 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:01:11.919 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:01:12.288 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:01:15.997 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:01:18.034 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:01:33.966 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:01:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22989000180633600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:01:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22989000180633600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:01:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22989000180633600 [0;39m ==> Parameters: 
2023-04-01 13:01:35.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22989000180633600 [0;39m <==    Updates: 1
2023-04-01 13:01:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22989000180633600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 13:01:36.007 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:01:41.654 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:01:42.255 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:01:45.730 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:01:58.063 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:02:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22989105008873472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:02:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22989105008873472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:02:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22989105008873472 [0;39m ==> Parameters: 
2023-04-01 13:02:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22989105008873472 [0;39m <==    Updates: 0
2023-04-01 13:02:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22989105008873472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 13:02:00.112 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:02:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22989125997170688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:02:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22989125997170688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:02:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22989125997170688 [0;39m ==> Parameters: 
2023-04-01 13:02:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22989125997170688 [0;39m <==    Updates: 1
2023-04-01 13:02:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22989125997170688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 13:02:12.266 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:02:15.998 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:02:22.693 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:02:25.097 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:02:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22989251809513472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:02:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22989251809513472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:02:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22989251809513472 [0;39m ==> Parameters: 
2023-04-01 13:02:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22989251809513472 [0;39m <==    Updates: 1
2023-04-01 13:02:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22989251809513472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 13:02:42.193 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:02:42.420 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:02:44.694 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:02:49.073 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:02:51.108 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:03:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22989356671307776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:03:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22989356671307776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:03:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22989356671307776 [0;39m ==> Parameters: 
2023-04-01 13:03:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22989356671307776 [0;39m <==    Updates: 0
2023-04-01 13:03:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22989356671307776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 13:03:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22989377655410688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:03:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22989377655410688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:03:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22989377655410688 [0;39m ==> Parameters: 
2023-04-01 13:03:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22989377655410688 [0;39m <==    Updates: 1
2023-04-01 13:03:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22989377655410688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-04-01 13:03:12.268 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:03:18.216 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:03:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22989503455170560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:03:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22989503455170560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:03:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22989503455170560 [0;39m ==> Parameters: 
2023-04-01 13:03:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22989503455170560 [0;39m <==    Updates: 1
2023-04-01 13:03:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22989503455170560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 13:03:40.272 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:03:42.582 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:03:42.583 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:03:48.735 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:04:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22989608337936384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:04:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22989608337936384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:04:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22989608337936384 [0;39m ==> Parameters: 
2023-04-01 13:04:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22989608337936384 [0;39m <==    Updates: 0
2023-04-01 13:04:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22989608337936384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 13:04:04.691 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:04:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22989629301067776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:04:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22989629301067776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:04:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22989629301067776 [0;39m ==> Parameters: 
2023-04-01 13:04:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22989629301067776 [0;39m <==    Updates: 1
2023-04-01 13:04:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22989629301067776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 13:04:06.739 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:04:12.268 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:04:16.190 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:04:30.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:04:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22989755100827648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:04:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22989755100827648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:04:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22989755100827648 [0;39m ==> Parameters: 
2023-04-01 13:04:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22989755100827648 [0;39m <==    Updates: 1
2023-04-01 13:04:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22989755100827648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 13:04:42.281 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:04:46.312 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:04:53.717 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:04:56.193 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:05:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22989859975204864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:05:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22989859975204864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:05:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22989859975204864 [0;39m ==> Parameters: 
2023-04-01 13:05:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22989859975204864 [0;39m <==    Updates: 0
2023-04-01 13:05:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22989859975204864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 13:05:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22989880976084992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:05:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22989880976084992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:05:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22989880976084992 [0;39m ==> Parameters: 
2023-04-01 13:05:05.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22989880976084992 [0;39m <==    Updates: 1
2023-04-01 13:05:05.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22989880976084992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 13:05:12.283 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:05:16.731 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:05:21.189 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:05:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22990006796816384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:05:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22990006796816384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:05:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22990006796816384 [0;39m ==> Parameters: 
2023-04-01 13:05:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22990006796816384 [0;39m <==    Updates: 1
2023-04-01 13:05:35.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22990006796816384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 13:05:42.259 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:05:47.771 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:06:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22990111671193600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:06:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22990111671193600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:06:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22990111671193600 [0;39m ==> Parameters: 
2023-04-01 13:06:00.026 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22990111671193600 [0;39m <==    Updates: 0
2023-04-01 13:06:00.026 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22990111671193600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 13:06:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22990132630130688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:06:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22990132630130688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:06:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22990132630130688 [0;39m ==> Parameters: 
2023-04-01 13:06:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22990132630130688 [0;39m <==    Updates: 1
2023-04-01 13:06:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22990132630130688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 13:06:12.692 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:06:15.931 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:06:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22990258463444992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:06:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22990258463444992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:06:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22990258463444992 [0;39m ==> Parameters: 
2023-04-01 13:06:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22990258463444992 [0;39m <==    Updates: 1
2023-04-01 13:06:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22990258463444992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 13:06:36.915 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:06:42.270 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:06:46.790 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:06:58.955 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:07:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22990363304267776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:07:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22990363304267776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:07:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22990363304267776 [0;39m ==> Parameters: 
2023-04-01 13:07:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22990363304267776 [0;39m <==    Updates: 0
2023-04-01 13:07:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22990363304267776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-04-01 13:07:00.999 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:07:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22990384259010560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:07:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22990384259010560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:07:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22990384259010560 [0;39m ==> Parameters: 
2023-04-01 13:07:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22990384259010560 [0;39m <==    Updates: 1
2023-04-01 13:07:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22990384259010560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 13:07:12.262 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:07:16.421 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:07:23.060 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:07:25.104 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:07:33.672 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m22986234414632960 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-04-01 13:07:33.672 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m22986234414632960 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/category/save
2023-04-01 13:07:33.672 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m22986234414632960 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š22985523190697984
2023-04-01 13:07:34.468 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m22986234414632960 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"22985523190697984"}
2023-04-01 13:07:34.471 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22990507848372224 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 13:07:34.471 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22990507848372224 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/save POST
2023-04-01 13:07:34.473 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22990507848372224 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.save
2023-04-01 13:07:34.473 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22990507848372224 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 13:07:34.473 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22990507848372224 [0;39m è¯·æ±‚å‚æ•°: [{"id":200,"name":"Java","parent":300,"sort":200}]
2023-04-01 13:07:34.474 DEBUG c.j.wiki.mapper.CategoryMapper.updateByPrimaryKey :137  [32m22990507848372224 [0;39m ==>  Preparing: update category set parent = ?, `name` = ?, sort = ? where id = ?
2023-04-01 13:07:34.474 DEBUG c.j.wiki.mapper.CategoryMapper.updateByPrimaryKey :137  [32m22990507848372224 [0;39m ==> Parameters: 300(Long), Java(String), 200(Integer), 200(Long)
2023-04-01 13:07:34.477 DEBUG c.j.wiki.mapper.CategoryMapper.updateByPrimaryKey :137  [32m22990507848372224 [0;39m <==    Updates: 1
2023-04-01 13:07:34.477 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22990507848372224 [0;39m è¿”å›žç»“æžœ: {"success":true}
2023-04-01 13:07:34.477 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22990507848372224 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-04-01 13:07:34.478 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m22990507848372224 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š806 ms -------------
2023-04-01 13:07:34.761 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m22990509064720384 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 13:07:34.762 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m22990509064720384 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 13:07:34.762 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m22990509064720384 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 13:07:34.762 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m22990509064720384 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 13:07:34.762 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m22990509064720384 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 13:07:34.762 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22990509064720384 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 13:07:34.763 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22990509064720384 [0;39m ==> Parameters: 
2023-04-01 13:07:34.765 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22990509064720384 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 13:07:34.766 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22990509064720384 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 13:07:34.766 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22990509064720384 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 13:07:34.766 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22990509064720384 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 13:07:34.767 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22990509064720384 [0;39m <==        Row: 200, 300, Java, 200
2023-04-01 13:07:34.767 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22990509064720384 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 13:07:34.767 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22990509064720384 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 13:07:34.767 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22990509064720384 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 13:07:34.768 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22990509064720384 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 13:07:34.768 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22990509064720384 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 13:07:34.768 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22990509064720384 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 13:07:34.768 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22990509064720384 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 13:07:34.769 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22990509064720384 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 13:07:34.769 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22990509064720384 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 13:07:34.769 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22990509064720384 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 13:07:34.770 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m22990509064720384 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 13:07:34.770 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m22990509064720384 [0;39m <==      Total: 15
2023-04-01 13:07:34.773 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m22990509064720384 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":300,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 13:07:34.773 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m22990509064720384 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š12 ms -------------
2023-04-01 13:07:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22990510088130560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:07:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22990510088130560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:07:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22990510088130560 [0;39m ==> Parameters: 
2023-04-01 13:07:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22990510088130560 [0;39m <==    Updates: 1
2023-04-01 13:07:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22990510088130560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 13:07:42.728 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:07:51.258 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:08:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22990614970896384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:08:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22990614970896384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:08:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22990614970896384 [0;39m ==> Parameters: 
2023-04-01 13:08:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22990614970896384 [0;39m <==    Updates: 0
2023-04-01 13:08:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22990614970896384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 13:08:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22990635925639168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:08:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22990635925639168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:08:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22990635925639168 [0;39m ==> Parameters: 
2023-04-01 13:08:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22990635925639168 [0;39m <==    Updates: 1
2023-04-01 13:08:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22990635925639168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 13:08:12.268 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:08:15.744 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:08:17.783 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:08:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22990761771536384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:08:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22990761771536384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:08:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22990761771536384 [0;39m ==> Parameters: 
2023-04-01 13:08:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22990761771536384 [0;39m <==    Updates: 1
2023-04-01 13:08:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22990761771536384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 13:08:42.266 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:08:46.128 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:09:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22990866595581952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:09:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22990866595581952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:09:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22990866595581952 [0;39m ==> Parameters: 
2023-04-01 13:09:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22990866595581952 [0;39m <==    Updates: 0
2023-04-01 13:09:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22990866595581952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 13:09:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22990887592267776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:09:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22990887592267776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:09:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22990887592267776 [0;39m ==> Parameters: 
2023-04-01 13:09:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22990887592267776 [0;39m <==    Updates: 1
2023-04-01 13:09:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22990887592267776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 13:09:05.072 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:09:07.610 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:09:12.738 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:09:15.750 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:09:30.327 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:09:32.376 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:09:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22991013417193472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:09:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22991013417193472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:09:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22991013417193472 [0;39m ==> Parameters: 
2023-04-01 13:09:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22991013417193472 [0;39m <==    Updates: 1
2023-04-01 13:09:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22991013417193472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 13:09:42.279 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:09:45.769 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:09:56.493 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:10:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22991118304153600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:10:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22991118304153600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:10:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22991118304153600 [0;39m ==> Parameters: 
2023-04-01 13:10:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22991118304153600 [0;39m <==    Updates: 0
2023-04-01 13:10:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22991118304153600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 13:10:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22991139233730560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:10:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22991139233730560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:10:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22991139233730560 [0;39m ==> Parameters: 
2023-04-01 13:10:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22991139233730560 [0;39m <==    Updates: 1
2023-04-01 13:10:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22991139233730560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 13:10:12.257 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:10:15.731 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:10:20.643 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:10:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22991265092210688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:10:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22991265092210688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:10:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22991265092210688 [0;39m ==> Parameters: 
2023-04-01 13:10:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22991265092210688 [0;39m <==    Updates: 1
2023-04-01 13:10:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22991265092210688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 13:10:42.268 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:10:48.249 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:11:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22991369937227776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:11:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22991369937227776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:11:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22991369937227776 [0;39m ==> Parameters: 
2023-04-01 13:11:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22991369937227776 [0;39m <==    Updates: 0
2023-04-01 13:11:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22991369937227776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 13:11:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22991390896164864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:11:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22991390896164864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:11:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22991390896164864 [0;39m ==> Parameters: 
2023-04-01 13:11:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22991390896164864 [0;39m <==    Updates: 1
2023-04-01 13:11:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22991390896164864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 13:11:12.262 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:11:16.422 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:11:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22991516742062080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:11:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22991516742062080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:11:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22991516742062080 [0;39m ==> Parameters: 
2023-04-01 13:11:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22991516742062080 [0;39m <==    Updates: 1
2023-04-01 13:11:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22991516742062080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 13:11:35.366 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:11:37.407 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:11:41.642 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:11:42.247 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:11:45.968 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:11:59.454 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:12:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22991621595467776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:12:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22991621595467776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:12:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22991621595467776 [0;39m ==> Parameters: 
2023-04-01 13:12:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22991621595467776 [0;39m <==    Updates: 0
2023-04-01 13:12:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22991621595467776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š14æ¯«ç§’
2023-04-01 13:12:01.501 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:12:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22991642562793472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:12:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22991642562793472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:12:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22991642562793472 [0;39m ==> Parameters: 
2023-04-01 13:12:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22991642562793472 [0;39m <==    Updates: 1
2023-04-01 13:12:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22991642562793472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 13:12:12.258 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:12:13.691 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:12:15.730 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:12:26.142 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:12:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22991768370941952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:12:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22991768370941952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:12:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22991768370941952 [0;39m ==> Parameters: 
2023-04-01 13:12:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22991768370941952 [0;39m <==    Updates: 1
2023-04-01 13:12:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22991768370941952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 13:12:41.948 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:12:42.662 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:12:44.434 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:12:46.513 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:12:48.557 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:12:50.597 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:13:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22991873228541952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:13:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22991873228541952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:13:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22991873228541952 [0;39m ==> Parameters: 
2023-04-01 13:13:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22991873228541952 [0;39m <==    Updates: 0
2023-04-01 13:13:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22991873228541952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 13:13:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22991894221033472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:13:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22991894221033472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:13:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22991894221033472 [0;39m ==> Parameters: 
2023-04-01 13:13:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22991894221033472 [0;39m <==    Updates: 1
2023-04-01 13:13:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22991894221033472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 13:13:12.147 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:13:12.270 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:13:14.194 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:13:16.743 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:13:18.787 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:13:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22992020024987648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:13:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22992020024987648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:13:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22992020024987648 [0;39m ==> Parameters: 
2023-04-01 13:13:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22992020024987648 [0;39m <==    Updates: 1
2023-04-01 13:13:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22992020024987648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 13:13:39.348 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:13:41.393 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:13:42.276 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:13:48.034 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:14:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22992124903559168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:14:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22992124903559168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:14:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22992124903559168 [0;39m ==> Parameters: 
2023-04-01 13:14:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22992124903559168 [0;39m <==    Updates: 0
2023-04-01 13:14:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22992124903559168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 13:14:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22992145908633600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:14:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22992145908633600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:14:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22992145908633600 [0;39m ==> Parameters: 
2023-04-01 13:14:05.025 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22992145908633600 [0;39m <==    Updates: 1
2023-04-01 13:14:05.025 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22992145908633600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 13:14:05.498 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:14:12.262 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:14:13.693 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:14:15.949 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:14:27.558 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:14:30.248 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:14:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22992271720976384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:14:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22992271720976384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:14:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22992271720976384 [0;39m ==> Parameters: 
2023-04-01 13:14:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22992271720976384 [0;39m <==    Updates: 1
2023-04-01 13:14:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22992271720976384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 13:14:41.947 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:14:42.272 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:14:46.644 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:14:54.351 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:15:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22992376578576384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:15:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22992376578576384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:15:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22992376578576384 [0;39m ==> Parameters: 
2023-04-01 13:15:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22992376578576384 [0;39m <==    Updates: 0
2023-04-01 13:15:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22992376578576384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 13:15:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22992397571067904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:15:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22992397571067904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:15:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22992397571067904 [0;39m ==> Parameters: 
2023-04-01 13:15:05.025 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22992397571067904 [0;39m <==    Updates: 1
2023-04-01 13:15:05.026 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22992397571067904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 13:15:11.662 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:15:12.265 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:15:13.703 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:15:15.741 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:15:19.822 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:15:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22992523337273344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:15:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22992523337273344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:15:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22992523337273344 [0;39m ==> Parameters: 
2023-04-01 13:15:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22992523337273344 [0;39m <==    Updates: 1
2023-04-01 13:15:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22992523337273344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 13:15:41.732 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:15:42.595 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:15:45.809 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:15:48.248 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:16:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22992628199067648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:16:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22992628199067648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:16:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22992628199067648 [0;39m ==> Parameters: 
2023-04-01 13:16:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22992628199067648 [0;39m <==    Updates: 0
2023-04-01 13:16:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22992628199067648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 13:16:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22992649195753472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:16:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22992649195753472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:16:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22992649195753472 [0;39m ==> Parameters: 
2023-04-01 13:16:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22992649195753472 [0;39m <==    Updates: 1
2023-04-01 13:16:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22992649195753472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 13:16:10.290 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:16:12.266 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:16:12.328 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:16:14.367 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:16:16.410 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:16:18.445 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:16:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22992775050039296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:16:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22992775050039296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:16:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22992775050039296 [0;39m ==> Parameters: 
2023-04-01 13:16:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22992775050039296 [0;39m <==    Updates: 1
2023-04-01 13:16:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22992775050039296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 13:16:36.408 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:16:41.670 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:16:42.649 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:16:46.249 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:16:59.048 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:17:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22992879857307648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:17:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22992879857307648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:17:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22992879857307648 [0;39m ==> Parameters: 
2023-04-01 13:17:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22992879857307648 [0;39m <==    Updates: 0
2023-04-01 13:17:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22992879857307648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 13:17:01.094 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:17:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22992900853993472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:17:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22992900853993472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:17:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22992900853993472 [0;39m ==> Parameters: 
2023-04-01 13:17:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22992900853993472 [0;39m <==    Updates: 1
2023-04-01 13:17:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22992900853993472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 13:17:12.270 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:17:13.710 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:17:15.771 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:17:23.152 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:17:25.362 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:17:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22993026695696384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:17:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22993026695696384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:17:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22993026695696384 [0;39m ==> Parameters: 
2023-04-01 13:17:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22993026695696384 [0;39m <==    Updates: 1
2023-04-01 13:17:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22993026695696384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 13:17:42.275 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:17:43.715 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:17:45.776 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:17:47.829 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:17:49.870 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:18:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22993131544907776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:18:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22993131544907776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:18:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22993131544907776 [0;39m ==> Parameters: 
2023-04-01 13:18:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22993131544907776 [0;39m <==    Updates: 0
2023-04-01 13:18:00.026 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22993131544907776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š16æ¯«ç§’
2023-04-01 13:18:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22993152520622080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:18:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22993152520622080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:18:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22993152520622080 [0;39m ==> Parameters: 
2023-04-01 13:18:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22993152520622080 [0;39m <==    Updates: 1
2023-04-01 13:18:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22993152520622080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 13:18:11.946 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:18:12.548 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:18:13.986 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:18:16.041 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:18:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22993278345547776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:18:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22993278345547776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:18:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22993278345547776 [0;39m ==> Parameters: 
2023-04-01 13:18:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22993278345547776 [0;39m <==    Updates: 1
2023-04-01 13:18:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22993278345547776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 13:18:37.946 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:18:39.988 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:18:42.269 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:18:44.087 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:18:46.116 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:19:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22993383228313600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:19:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22993383228313600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:19:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22993383228313600 [0;39m ==> Parameters: 
2023-04-01 13:19:00.032 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22993383228313600 [0;39m <==    Updates: 0
2023-04-01 13:19:00.032 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22993383228313600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š16æ¯«ç§’
2023-04-01 13:19:02.046 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:19:04.088 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:19:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22993404183056384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:19:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22993404183056384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:19:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22993404183056384 [0;39m ==> Parameters: 
2023-04-01 13:19:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22993404183056384 [0;39m <==    Updates: 1
2023-04-01 13:19:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22993404183056384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 13:19:12.150 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:19:12.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:19:16.245 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:19:28.200 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:19:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22993530020564992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:19:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22993530020564992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:19:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22993530020564992 [0;39m ==> Parameters: 
2023-04-01 13:19:35.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22993530020564992 [0;39m <==    Updates: 1
2023-04-01 13:19:35.025 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22993530020564992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 13:19:41.723 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:19:42.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:19:46.243 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:19:50.246 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:19:52.845 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:20:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22993634827833344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:20:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22993634827833344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:20:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22993634827833344 [0;39m ==> Parameters: 
2023-04-01 13:20:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22993634827833344 [0;39m <==    Updates: 0
2023-04-01 13:20:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22993634827833344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 13:20:05.032 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22993655920988160 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:20:05.033 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22993655920988160 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:20:05.033 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22993655920988160 [0;39m ==> Parameters: 
2023-04-01 13:20:05.037 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22993655920988160 [0;39m <==    Updates: 1
2023-04-01 13:20:05.037 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22993655920988160 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 13:20:12.263 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:20:15.923 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:20:17.965 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:20:35.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22993781691387904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:20:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22993781691387904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:20:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22993781691387904 [0;39m ==> Parameters: 
2023-04-01 13:20:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22993781691387904 [0;39m <==    Updates: 1
2023-04-01 13:20:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22993781691387904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-04-01 13:20:40.016 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:20:42.057 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:20:42.262 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:20:44.102 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:20:46.147 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:21:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22993886544793600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:21:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22993886544793600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:21:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22993886544793600 [0;39m ==> Parameters: 
2023-04-01 13:21:00.029 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22993886544793600 [0;39m <==    Updates: 0
2023-04-01 13:21:00.029 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22993886544793600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 13:21:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22993907478564864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:21:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22993907478564864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:21:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22993907478564864 [0;39m ==> Parameters: 
2023-04-01 13:21:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22993907478564864 [0;39m <==    Updates: 1
2023-04-01 13:21:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22993907478564864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 13:21:07.602 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:21:11.652 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:21:12.270 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:21:15.942 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:21:29.645 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:21:31.697 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:21:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22994033332850688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:21:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22994033332850688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:21:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22994033332850688 [0;39m ==> Parameters: 
2023-04-01 13:21:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22994033332850688 [0;39m <==    Updates: 1
2023-04-01 13:21:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22994033332850688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 13:21:41.936 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:21:42.260 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:21:46.025 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:21:54.190 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:21:56.649 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:22:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22994138190450688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:22:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22994138190450688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:22:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22994138190450688 [0;39m ==> Parameters: 
2023-04-01 13:22:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22994138190450688 [0;39m <==    Updates: 0
2023-04-01 13:22:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22994138190450688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 13:22:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22994159178747904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:22:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22994159178747904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:22:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22994159178747904 [0;39m ==> Parameters: 
2023-04-01 13:22:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22994159178747904 [0;39m <==    Updates: 1
2023-04-01 13:22:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22994159178747904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 13:22:11.664 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:22:12.260 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:22:15.762 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:22:18.802 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:22:20.844 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:22:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22994284944953344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:22:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22994284944953344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:22:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22994284944953344 [0;39m ==> Parameters: 
2023-04-01 13:22:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22994284944953344 [0;39m <==    Updates: 1
2023-04-01 13:22:35.004 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22994284944953344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 13:22:42.245 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:22:42.650 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:22:47.047 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:23:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22994389861273600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:23:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22994389861273600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:23:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22994389861273600 [0;39m ==> Parameters: 
2023-04-01 13:23:00.026 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22994389861273600 [0;39m <==    Updates: 0
2023-04-01 13:23:00.027 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22994389861273600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 13:23:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22994410803433472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:23:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22994410803433472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:23:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22994410803433472 [0;39m ==> Parameters: 
2023-04-01 13:23:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22994410803433472 [0;39m <==    Updates: 1
2023-04-01 13:23:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22994410803433472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 13:23:08.946 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:23:11.351 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:23:12.336 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:23:17.821 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:23:33.422 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:23:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22994536649330688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:23:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22994536649330688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:23:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22994536649330688 [0;39m ==> Parameters: 
2023-04-01 13:23:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22994536649330688 [0;39m <==    Updates: 1
2023-04-01 13:23:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22994536649330688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 13:23:35.459 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:23:42.050 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:23:42.266 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:23:46.548 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:23:57.627 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:23:59.675 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:24:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22994641511124992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:24:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22994641511124992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:24:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22994641511124992 [0;39m ==> Parameters: 
2023-04-01 13:24:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22994641511124992 [0;39m <==    Updates: 0
2023-04-01 13:24:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22994641511124992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 13:24:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22994662486839296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:24:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22994662486839296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:24:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22994662486839296 [0;39m ==> Parameters: 
2023-04-01 13:24:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22994662486839296 [0;39m <==    Updates: 1
2023-04-01 13:24:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22994662486839296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 13:24:12.382 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:24:14.391 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:24:16.429 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:24:21.721 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:24:23.780 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:24:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22994788315959296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:24:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22994788315959296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:24:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22994788315959296 [0;39m ==> Parameters: 
2023-04-01 13:24:35.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22994788315959296 [0;39m <==    Updates: 1
2023-04-01 13:24:35.025 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22994788315959296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 13:24:41.647 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:24:42.268 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:24:45.726 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:24:47.768 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:24:49.816 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:25:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22994893165170688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:25:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22994893165170688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:25:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22994893165170688 [0;39m ==> Parameters: 
2023-04-01 13:25:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22994893165170688 [0;39m <==    Updates: 0
2023-04-01 13:25:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22994893165170688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 13:25:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22994914098941952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:25:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22994914098941952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:25:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22994914098941952 [0;39m ==> Parameters: 
2023-04-01 13:25:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22994914098941952 [0;39m <==    Updates: 1
2023-04-01 13:25:05.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22994914098941952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 13:25:12.277 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:25:13.683 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:25:15.733 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:25:17.769 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:25:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22995039923867648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:25:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22995039923867648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:25:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22995039923867648 [0;39m ==> Parameters: 
2023-04-01 13:25:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22995039923867648 [0;39m <==    Updates: 1
2023-04-01 13:25:35.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22995039923867648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 13:25:42.053 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:25:42.258 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:25:44.648 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:25:46.685 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:25:48.725 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:26:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22995144823410688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:26:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22995144823410688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:26:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22995144823410688 [0;39m ==> Parameters: 
2023-04-01 13:26:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22995144823410688 [0;39m <==    Updates: 0
2023-04-01 13:26:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22995144823410688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 13:26:05.017 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22995165811707904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:26:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22995165811707904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:26:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22995165811707904 [0;39m ==> Parameters: 
2023-04-01 13:26:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22995165811707904 [0;39m <==    Updates: 1
2023-04-01 13:26:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22995165811707904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 13:26:06.148 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:26:12.290 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:26:13.732 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:26:15.782 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:26:30.232 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:26:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22995291611467776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:26:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22995291611467776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:26:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22995291611467776 [0;39m ==> Parameters: 
2023-04-01 13:26:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22995291611467776 [0;39m <==    Updates: 1
2023-04-01 13:26:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22995291611467776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-04-01 13:26:42.351 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:26:43.948 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:26:46.141 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:26:52.749 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:26:54.792 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:27:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22995396485844992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:27:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22995396485844992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:27:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22995396485844992 [0;39m ==> Parameters: 
2023-04-01 13:27:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22995396485844992 [0;39m <==    Updates: 0
2023-04-01 13:27:00.027 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22995396485844992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š14æ¯«ç§’
2023-04-01 13:27:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22995417419616256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:27:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22995417419616256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:27:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22995417419616256 [0;39m ==> Parameters: 
2023-04-01 13:27:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22995417419616256 [0;39m <==    Updates: 1
2023-04-01 13:27:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22995417419616256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 13:27:11.662 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:27:12.279 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:27:15.757 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:27:17.800 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:27:19.841 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:27:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22995543257124864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:27:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22995543257124864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:27:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22995543257124864 [0;39m ==> Parameters: 
2023-04-01 13:27:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22995543257124864 [0;39m <==    Updates: 1
2023-04-01 13:27:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22995543257124864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 13:27:41.647 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:27:42.271 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:27:45.735 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:27:48.148 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:28:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22995648110530560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:28:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22995648110530560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:28:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22995648110530560 [0;39m ==> Parameters: 
2023-04-01 13:28:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22995648110530560 [0;39m <==    Updates: 0
2023-04-01 13:28:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22995648110530560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 13:28:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22995669082050560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:28:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22995669082050560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:28:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22995669082050560 [0;39m ==> Parameters: 
2023-04-01 13:28:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22995669082050560 [0;39m <==    Updates: 1
2023-04-01 13:28:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22995669082050560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 13:28:12.260 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:28:12.268 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:28:14.293 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:28:16.335 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:28:18.373 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:28:35.000 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22995794890199040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:28:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22995794890199040 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:28:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22995794890199040 [0;39m ==> Parameters: 
2023-04-01 13:28:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22995794890199040 [0;39m <==    Updates: 1
2023-04-01 13:28:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22995794890199040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 13:28:36.352 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:28:42.312 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:28:46.393 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:28:58.734 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:29:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22995899819102208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:29:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22995899819102208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:29:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22995899819102208 [0;39m ==> Parameters: 
2023-04-01 13:29:00.035 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22995899819102208 [0;39m <==    Updates: 0
2023-04-01 13:29:00.035 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22995899819102208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š17æ¯«ç§’
2023-04-01 13:29:00.775 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:29:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22995920744484864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:29:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22995920744484864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:29:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22995920744484864 [0;39m ==> Parameters: 
2023-04-01 13:29:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22995920744484864 [0;39m <==    Updates: 1
2023-04-01 13:29:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22995920744484864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 13:29:11.657 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:29:12.260 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:29:13.693 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:29:15.948 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:29:25.085 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:29:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22996046607159296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:29:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22996046607159296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:29:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22996046607159296 [0;39m ==> Parameters: 
2023-04-01 13:29:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22996046607159296 [0;39m <==    Updates: 1
2023-04-01 13:29:35.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22996046607159296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 13:29:42.449 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:29:43.885 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:29:46.247 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:29:48.287 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:29:50.331 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:30:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22996151468953600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:30:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22996151468953600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:30:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22996151468953600 [0;39m ==> Parameters: 
2023-04-01 13:30:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22996151468953600 [0;39m <==    Updates: 0
2023-04-01 13:30:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22996151468953600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 13:30:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22996172419502080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:30:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22996172419502080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:30:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22996172419502080 [0;39m ==> Parameters: 
2023-04-01 13:30:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22996172419502080 [0;39m <==    Updates: 1
2023-04-01 13:30:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22996172419502080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 13:30:12.307 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:30:15.792 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:30:18.120 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:30:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22996298227650560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:30:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22996298227650560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:30:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22996298227650560 [0;39m ==> Parameters: 
2023-04-01 13:30:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22996298227650560 [0;39m <==    Updates: 1
2023-04-01 13:30:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22996298227650560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 13:30:42.745 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:30:42.885 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:30:45.454 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:30:47.946 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:31:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22996403118804992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:31:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22996403118804992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:31:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22996403118804992 [0;39m ==> Parameters: 
2023-04-01 13:31:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22996403118804992 [0;39m <==    Updates: 0
2023-04-01 13:31:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22996403118804992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 13:31:04.932 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:31:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22996424069353472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:31:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22996424069353472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:31:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22996424069353472 [0;39m ==> Parameters: 
2023-04-01 13:31:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22996424069353472 [0;39m <==    Updates: 1
2023-04-01 13:31:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22996424069353472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š14æ¯«ç§’
2023-04-01 13:31:06.980 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:31:12.451 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:31:13.701 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:31:15.820 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:31:29.049 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:31:31.091 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:31:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22996549898473472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:31:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22996549898473472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:31:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22996549898473472 [0;39m ==> Parameters: 
2023-04-01 13:31:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22996549898473472 [0;39m <==    Updates: 1
2023-04-01 13:31:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22996549898473472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 13:31:42.255 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:31:45.765 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:31:53.262 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:31:55.323 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:32:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22996654772850688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:32:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22996654772850688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:32:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22996654772850688 [0;39m ==> Parameters: 
2023-04-01 13:32:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22996654772850688 [0;39m <==    Updates: 0
2023-04-01 13:32:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22996654772850688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 13:32:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22996675715010560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:32:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22996675715010560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:32:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22996675715010560 [0;39m ==> Parameters: 
2023-04-01 13:32:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22996675715010560 [0;39m <==    Updates: 1
2023-04-01 13:32:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22996675715010560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 13:32:11.679 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:32:12.496 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:32:16.588 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:32:21.304 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:32:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22996801539936256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:32:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22996801539936256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:32:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22996801539936256 [0;39m ==> Parameters: 
2023-04-01 13:32:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22996801539936256 [0;39m <==    Updates: 1
2023-04-01 13:32:35.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22996801539936256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 13:32:41.990 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:32:42.691 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:32:47.386 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:32:50.338 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:33:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22996906426896384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:33:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22996906426896384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:33:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22996906426896384 [0;39m ==> Parameters: 
2023-04-01 13:33:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22996906426896384 [0;39m <==    Updates: 0
2023-04-01 13:33:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22996906426896384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 13:33:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22996927364861952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:33:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22996927364861952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:33:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22996927364861952 [0;39m ==> Parameters: 
2023-04-01 13:33:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22996927364861952 [0;39m <==    Updates: 1
2023-04-01 13:33:05.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22996927364861952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 13:33:12.753 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:33:17.079 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:33:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22997053185593344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:33:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22997053185593344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:33:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22997053185593344 [0;39m ==> Parameters: 
2023-04-01 13:33:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22997053185593344 [0;39m <==    Updates: 1
2023-04-01 13:33:35.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22997053185593344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 13:33:40.141 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:33:42.258 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:33:46.295 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:34:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22997158106107904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:34:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22997158106107904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:34:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22997158106107904 [0;39m ==> Parameters: 
2023-04-01 13:34:00.031 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22997158106107904 [0;39m <==    Updates: 0
2023-04-01 13:34:00.031 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22997158106107904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š15æ¯«ç§’
2023-04-01 13:34:04.251 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:34:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22997179039879168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:34:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22997179039879168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:34:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22997179039879168 [0;39m ==> Parameters: 
2023-04-01 13:34:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22997179039879168 [0;39m <==    Updates: 1
2023-04-01 13:34:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22997179039879168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 13:34:12.895 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:34:16.279 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:34:26.693 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:34:28.996 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:34:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22997304860610560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:34:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22997304860610560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:34:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22997304860610560 [0;39m ==> Parameters: 
2023-04-01 13:34:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22997304860610560 [0;39m <==    Updates: 1
2023-04-01 13:34:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22997304860610560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 13:34:42.268 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:34:45.745 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:34:53.486 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:35:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22997409743376384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:35:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22997409743376384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:35:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22997409743376384 [0;39m ==> Parameters: 
2023-04-01 13:35:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22997409743376384 [0;39m <==    Updates: 0
2023-04-01 13:35:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22997409743376384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 13:35:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22997430731673600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:35:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22997430731673600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:35:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22997430731673600 [0;39m ==> Parameters: 
2023-04-01 13:35:05.025 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22997430731673600 [0;39m <==    Updates: 1
2023-04-01 13:35:05.025 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22997430731673600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 13:35:12.504 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:35:20.362 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:35:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22997556518850560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:35:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22997556518850560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:35:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22997556518850560 [0;39m ==> Parameters: 
2023-04-01 13:35:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22997556518850560 [0;39m <==    Updates: 1
2023-04-01 13:35:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22997556518850560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 13:35:42.305 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:35:45.762 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:35:47.809 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:36:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22997661368061952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:36:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22997661368061952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:36:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22997661368061952 [0;39m ==> Parameters: 
2023-04-01 13:36:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22997661368061952 [0;39m <==    Updates: 0
2023-04-01 13:36:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22997661368061952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 13:36:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22997682352164864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:36:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22997682352164864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:36:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22997682352164864 [0;39m ==> Parameters: 
2023-04-01 13:36:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22997682352164864 [0;39m <==    Updates: 1
2023-04-01 13:36:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22997682352164864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 13:36:12.497 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:36:16.025 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:36:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22997808168701952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:36:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22997808168701952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:36:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22997808168701952 [0;39m ==> Parameters: 
2023-04-01 13:36:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22997808168701952 [0;39m <==    Updates: 1
2023-04-01 13:36:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22997808168701952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 13:36:35.662 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:36:38.316 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:36:42.290 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:36:46.501 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:37:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22997913055662080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:37:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22997913055662080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:37:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22997913055662080 [0;39m ==> Parameters: 
2023-04-01 13:37:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22997913055662080 [0;39m <==    Updates: 0
2023-04-01 13:37:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22997913055662080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š14æ¯«ç§’
2023-04-01 13:37:03.703 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:37:05.017 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22997934056542208 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:37:05.029 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22997934056542208 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:37:05.031 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22997934056542208 [0;39m ==> Parameters: 
2023-04-01 13:37:05.036 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22997934056542208 [0;39m <==    Updates: 1
2023-04-01 13:37:05.036 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22997934056542208 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 13:37:12.280 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:37:16.898 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:37:27.906 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:37:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22998059877273600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:37:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22998059877273600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:37:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22998059877273600 [0;39m ==> Parameters: 
2023-04-01 13:37:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22998059877273600 [0;39m <==    Updates: 1
2023-04-01 13:37:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22998059877273600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 13:37:42.272 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:37:45.756 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:37:49.952 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:37:52.385 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:38:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22998164730679296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:38:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22998164730679296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:38:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22998164730679296 [0;39m ==> Parameters: 
2023-04-01 13:38:00.030 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22998164730679296 [0;39m <==    Updates: 0
2023-04-01 13:38:00.031 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22998164730679296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š17æ¯«ç§’
2023-04-01 13:38:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22998185681227776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:38:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22998185681227776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:38:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22998185681227776 [0;39m ==> Parameters: 
2023-04-01 13:38:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22998185681227776 [0;39m <==    Updates: 1
2023-04-01 13:38:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22998185681227776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 13:38:12.477 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:38:19.111 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:38:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22998311531319296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:38:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22998311531319296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:38:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22998311531319296 [0;39m ==> Parameters: 
2023-04-01 13:38:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22998311531319296 [0;39m <==    Updates: 1
2023-04-01 13:38:35.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22998311531319296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 13:38:41.785 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:38:42.876 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:38:48.965 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:39:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22998416388919296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:39:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22998416388919296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:39:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22998416388919296 [0;39m ==> Parameters: 
2023-04-01 13:39:00.032 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22998416388919296 [0;39m <==    Updates: 0
2023-04-01 13:39:00.032 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22998416388919296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š18æ¯«ç§’
2023-04-01 13:39:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22998437331079168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:39:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22998437331079168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:39:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22998437331079168 [0;39m ==> Parameters: 
2023-04-01 13:39:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22998437331079168 [0;39m <==    Updates: 1
2023-04-01 13:39:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22998437331079168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-04-01 13:39:07.073 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:39:09.494 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:39:12.284 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:39:16.500 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:39:31.609 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:39:33.955 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:39:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22998563172782080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:39:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22998563172782080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:39:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22998563172782080 [0;39m ==> Parameters: 
2023-04-01 13:39:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22998563172782080 [0;39m <==    Updates: 1
2023-04-01 13:39:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22998563172782080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 13:39:42.594 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:39:46.998 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:39:56.331 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:39:59.004 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:40:00.026 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22998668097490944 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:40:00.027 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22998668097490944 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:40:00.034 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22998668097490944 [0;39m ==> Parameters: 
2023-04-01 13:40:00.056 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22998668097490944 [0;39m <==    Updates: 0
2023-04-01 13:40:00.057 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22998668097490944 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š31æ¯«ç§’
2023-04-01 13:40:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22998688980930560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:40:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22998688980930560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:40:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22998688980930560 [0;39m ==> Parameters: 
2023-04-01 13:40:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22998688980930560 [0;39m <==    Updates: 1
2023-04-01 13:40:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22998688980930560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-04-01 13:40:12.941 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:40:17.671 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:40:21.766 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:40:24.168 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:40:35.017 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22998814860382208 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:40:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22998814860382208 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:40:35.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22998814860382208 [0;39m ==> Parameters: 
2023-04-01 13:40:35.028 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22998814860382208 [0;39m <==    Updates: 1
2023-04-01 13:40:35.028 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22998814860382208 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-04-01 13:40:42.500 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:40:46.897 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:40:49.669 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:40:52.356 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:41:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22998919692816384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:41:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22998919692816384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:41:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22998919692816384 [0;39m ==> Parameters: 
2023-04-01 13:41:00.027 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22998919692816384 [0;39m <==    Updates: 0
2023-04-01 13:41:00.028 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22998919692816384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 13:41:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22998940630781952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:41:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22998940630781952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:41:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22998940630781952 [0;39m ==> Parameters: 
2023-04-01 13:41:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22998940630781952 [0;39m <==    Updates: 1
2023-04-01 13:41:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22998940630781952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 13:41:12.656 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:41:20.375 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:41:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22999066506039296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:41:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22999066506039296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:41:35.025 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22999066506039296 [0;39m ==> Parameters: 
2023-04-01 13:41:35.029 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22999066506039296 [0;39m <==    Updates: 1
2023-04-01 13:41:35.030 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22999066506039296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š16æ¯«ç§’
2023-04-01 13:41:42.640 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:41:44.453 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:41:46.954 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:42:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22999171367833600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:42:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22999171367833600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:42:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22999171367833600 [0;39m ==> Parameters: 
2023-04-01 13:42:00.032 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22999171367833600 [0;39m <==    Updates: 0
2023-04-01 13:42:00.032 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22999171367833600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š16æ¯«ç§’
2023-04-01 13:42:05.020 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22999192360325120 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:42:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22999192360325120 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:42:05.025 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22999192360325120 [0;39m ==> Parameters: 
2023-04-01 13:42:05.028 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22999192360325120 [0;39m <==    Updates: 1
2023-04-01 13:42:05.028 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22999192360325120 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 13:42:10.556 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:42:12.282 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:42:13.195 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:42:15.248 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:42:17.997 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:42:34.688 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:42:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22999318134919168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:42:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22999318134919168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:42:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22999318134919168 [0;39m ==> Parameters: 
2023-04-01 13:42:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22999318134919168 [0;39m <==    Updates: 1
2023-04-01 13:42:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22999318134919168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 13:42:42.275 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:42:43.728 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:42:45.776 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:42:58.819 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:43:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22999423013490688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:43:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22999423013490688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:43:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22999423013490688 [0;39m ==> Parameters: 
2023-04-01 13:43:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22999423013490688 [0;39m <==    Updates: 0
2023-04-01 13:43:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22999423013490688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 13:43:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22999443951456256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:43:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22999443951456256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:43:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22999443951456256 [0;39m ==> Parameters: 
2023-04-01 13:43:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22999443951456256 [0;39m <==    Updates: 1
2023-04-01 13:43:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22999443951456256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 13:43:12.274 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:43:12.404 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:43:14.652 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:43:16.999 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:43:23.462 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:43:35.019 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22999569843490816 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:43:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22999569843490816 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:43:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22999569843490816 [0;39m ==> Parameters: 
2023-04-01 13:43:35.031 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22999569843490816 [0;39m <==    Updates: 1
2023-04-01 13:43:35.031 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22999569843490816 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 13:43:41.934 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:43:42.768 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:43:44.496 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:43:47.133 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:43:49.376 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:44:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22999674659147776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:44:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22999674659147776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:44:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22999674659147776 [0;39m ==> Parameters: 
2023-04-01 13:44:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22999674659147776 [0;39m <==    Updates: 0
2023-04-01 13:44:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22999674659147776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š16æ¯«ç§’
2023-04-01 13:44:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22999695609696256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:44:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22999695609696256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:44:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22999695609696256 [0;39m ==> Parameters: 
2023-04-01 13:44:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22999695609696256 [0;39m <==    Updates: 1
2023-04-01 13:44:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22999695609696256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 13:44:12.280 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:44:14.044 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:44:18.149 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:44:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22999821426233344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:44:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22999821426233344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:44:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22999821426233344 [0;39m ==> Parameters: 
2023-04-01 13:44:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22999821426233344 [0;39m <==    Updates: 1
2023-04-01 13:44:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22999821426233344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 13:44:38.610 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:44:42.737 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:44:46.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:45:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m22999926338359296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:45:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22999926338359296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:45:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22999926338359296 [0;39m ==> Parameters: 
2023-04-01 13:45:00.029 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m22999926338359296 [0;39m <==    Updates: 0
2023-04-01 13:45:00.029 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m22999926338359296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š15æ¯«ç§’
2023-04-01 13:45:03.402 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:45:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m22999947309879296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:45:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22999947309879296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:45:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22999947309879296 [0;39m ==> Parameters: 
2023-04-01 13:45:05.025 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m22999947309879296 [0;39m <==    Updates: 1
2023-04-01 13:45:05.026 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m22999947309879296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 13:45:11.931 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:45:12.959 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:45:16.597 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:45:25.764 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:45:28.494 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:45:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23000073113833472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:45:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23000073113833472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:45:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23000073113833472 [0;39m ==> Parameters: 
2023-04-01 13:45:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23000073113833472 [0;39m <==    Updates: 1
2023-04-01 13:45:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23000073113833472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 13:45:42.865 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:45:47.430 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:45:51.289 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:45:53.636 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:46:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23000177984016384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:46:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23000177984016384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:46:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23000177984016384 [0;39m ==> Parameters: 
2023-04-01 13:46:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23000177984016384 [0;39m <==    Updates: 0
2023-04-01 13:46:00.026 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23000177984016384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š14æ¯«ç§’
2023-04-01 13:46:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23000198968119296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:46:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23000198968119296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:46:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23000198968119296 [0;39m ==> Parameters: 
2023-04-01 13:46:05.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23000198968119296 [0;39m <==    Updates: 1
2023-04-01 13:46:05.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23000198968119296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 13:46:13.060 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:46:17.464 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:46:20.194 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:46:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23000324784656384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:46:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23000324784656384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:46:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23000324784656384 [0;39m ==> Parameters: 
2023-04-01 13:46:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23000324784656384 [0;39m <==    Updates: 1
2023-04-01 13:46:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23000324784656384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 13:46:41.680 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:46:42.284 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:46:44.116 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:46:46.497 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:47:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23000429608701952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:47:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23000429608701952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:47:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23000429608701952 [0;39m ==> Parameters: 
2023-04-01 13:47:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23000429608701952 [0;39m <==    Updates: 0
2023-04-01 13:47:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23000429608701952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š18æ¯«ç§’
2023-04-01 13:47:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23000450634747904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:47:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23000450634747904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:47:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23000450634747904 [0;39m ==> Parameters: 
2023-04-01 13:47:05.027 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23000450634747904 [0;39m <==    Updates: 1
2023-04-01 13:47:05.027 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23000450634747904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 13:47:08.473 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:47:10.525 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:47:12.407 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:47:17.232 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:47:34.648 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:47:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23000576413536256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:47:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23000576413536256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:47:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23000576413536256 [0;39m ==> Parameters: 
2023-04-01 13:47:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23000576413536256 [0;39m <==    Updates: 1
2023-04-01 13:47:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23000576413536256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 13:47:42.273 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:47:43.731 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:47:45.962 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:47:59.503 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:48:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23000681317273600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:48:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23000681317273600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:48:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23000681317273600 [0;39m ==> Parameters: 
2023-04-01 13:48:00.029 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23000681317273600 [0;39m <==    Updates: 0
2023-04-01 13:48:00.030 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23000681317273600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š15æ¯«ç§’
2023-04-01 13:48:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23000702292987904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:48:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23000702292987904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:48:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23000702292987904 [0;39m ==> Parameters: 
2023-04-01 13:48:05.036 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23000702292987904 [0;39m <==    Updates: 1
2023-04-01 13:48:05.036 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23000702292987904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š20æ¯«ç§’
2023-04-01 13:48:12.695 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:48:16.660 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:48:23.996 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:48:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23000828054999040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:48:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23000828054999040 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:48:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23000828054999040 [0;39m ==> Parameters: 
2023-04-01 13:48:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23000828054999040 [0;39m <==    Updates: 1
2023-04-01 13:48:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23000828054999040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 13:48:42.279 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:48:50.368 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:49:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23000932937764864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:49:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23000932937764864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:49:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23000932937764864 [0;39m ==> Parameters: 
2023-04-01 13:49:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23000932937764864 [0;39m <==    Updates: 0
2023-04-01 13:49:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23000932937764864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 13:49:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23000953938644992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:49:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23000953938644992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:49:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23000953938644992 [0;39m ==> Parameters: 
2023-04-01 13:49:05.026 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23000953938644992 [0;39m <==    Updates: 1
2023-04-01 13:49:05.027 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23000953938644992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š14æ¯«ç§’
2023-04-01 13:49:12.394 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:49:17.105 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:49:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23001079771959296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:49:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23001079771959296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:49:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23001079771959296 [0;39m ==> Parameters: 
2023-04-01 13:49:35.041 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23001079771959296 [0;39m <==    Updates: 1
2023-04-01 13:49:35.042 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23001079771959296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š28æ¯«ç§’
2023-04-01 13:49:42.924 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:49:49.909 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:50:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23001184583421952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:50:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23001184583421952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:50:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23001184583421952 [0;39m ==> Parameters: 
2023-04-01 13:50:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23001184583421952 [0;39m <==    Updates: 0
2023-04-01 13:50:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23001184583421952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 13:50:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23001205592690688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:50:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23001205592690688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:50:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23001205592690688 [0;39m ==> Parameters: 
2023-04-01 13:50:05.025 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23001205592690688 [0;39m <==    Updates: 1
2023-04-01 13:50:05.026 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23001205592690688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 13:50:06.797 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:50:12.601 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:50:17.574 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:50:31.783 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:50:35.017 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23001331442782208 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:50:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23001331442782208 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:50:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23001331442782208 [0;39m ==> Parameters: 
2023-04-01 13:50:35.031 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23001331442782208 [0;39m <==    Updates: 1
2023-04-01 13:50:35.032 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23001331442782208 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š15æ¯«ç§’
2023-04-01 13:50:43.128 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:50:47.436 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:50:57.240 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:51:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23001436279410688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:51:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23001436279410688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:51:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23001436279410688 [0;39m ==> Parameters: 
2023-04-01 13:51:00.038 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23001436279410688 [0;39m <==    Updates: 0
2023-04-01 13:51:00.038 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23001436279410688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š26æ¯«ç§’
2023-04-01 13:51:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23001457234153472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:51:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23001457234153472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:51:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23001457234153472 [0;39m ==> Parameters: 
2023-04-01 13:51:05.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23001457234153472 [0;39m <==    Updates: 1
2023-04-01 13:51:05.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23001457234153472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 13:51:12.585 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:51:16.939 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:51:22.099 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:51:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23001583038107648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:51:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23001583038107648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:51:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23001583038107648 [0;39m ==> Parameters: 
2023-04-01 13:51:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23001583038107648 [0;39m <==    Updates: 1
2023-04-01 13:51:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23001583038107648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 13:51:43.032 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:51:50.002 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:52:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23001687958622208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:52:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23001687958622208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:52:00.030 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23001687958622208 [0;39m ==> Parameters: 
2023-04-01 13:52:00.061 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23001687958622208 [0;39m <==    Updates: 0
2023-04-01 13:52:00.062 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23001687958622208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š45æ¯«ç§’
2023-04-01 13:52:05.021 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23001708946919424 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:52:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23001708946919424 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:52:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23001708946919424 [0;39m ==> Parameters: 
2023-04-01 13:52:05.030 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23001708946919424 [0;39m <==    Updates: 1
2023-04-01 13:52:05.031 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23001708946919424 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 13:52:12.945 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:52:17.501 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:52:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23001834708930560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:52:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23001834708930560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:52:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23001834708930560 [0;39m ==> Parameters: 
2023-04-01 13:52:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23001834708930560 [0;39m <==    Updates: 1
2023-04-01 13:52:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23001834708930560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 13:52:43.063 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:52:49.097 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:53:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23001939600084992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:53:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23001939600084992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:53:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23001939600084992 [0;39m ==> Parameters: 
2023-04-01 13:53:00.026 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23001939600084992 [0;39m <==    Updates: 0
2023-04-01 13:53:00.026 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23001939600084992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 13:53:03.883 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:53:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23001960533856256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:53:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23001960533856256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:53:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23001960533856256 [0;39m ==> Parameters: 
2023-04-01 13:53:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23001960533856256 [0;39m <==    Updates: 1
2023-04-01 13:53:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23001960533856256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 13:53:06.497 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:53:12.997 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:53:16.986 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:53:31.498 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:53:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23002086400724992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:53:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23002086400724992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:53:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23002086400724992 [0;39m ==> Parameters: 
2023-04-01 13:53:35.025 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23002086400724992 [0;39m <==    Updates: 1
2023-04-01 13:53:35.025 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23002086400724992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 13:53:42.756 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:53:46.881 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:53:56.808 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:54:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23002191275102208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:54:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23002191275102208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:54:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23002191275102208 [0;39m ==> Parameters: 
2023-04-01 13:54:00.026 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23002191275102208 [0;39m <==    Updates: 0
2023-04-01 13:54:00.028 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23002191275102208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 13:54:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23002212213067776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:54:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23002212213067776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:54:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23002212213067776 [0;39m ==> Parameters: 
2023-04-01 13:54:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23002212213067776 [0;39m <==    Updates: 1
2023-04-01 13:54:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23002212213067776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 13:54:12.606 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:54:22.485 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:54:35.040 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23002338172211200 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:54:35.045 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23002338172211200 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:54:35.050 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23002338172211200 [0;39m ==> Parameters: 
2023-04-01 13:54:35.087 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23002338172211200 [0;39m <==    Updates: 1
2023-04-01 13:54:35.087 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23002338172211200 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š46æ¯«ç§’
2023-04-01 13:54:42.974 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:54:49.234 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:55:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23002442878816256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:55:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23002442878816256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:55:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23002442878816256 [0;39m ==> Parameters: 
2023-04-01 13:55:00.026 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23002442878816256 [0;39m <==    Updates: 0
2023-04-01 13:55:00.029 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23002442878816256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š21æ¯«ç§’
2023-04-01 13:55:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23002463892279296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:55:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23002463892279296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:55:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23002463892279296 [0;39m ==> Parameters: 
2023-04-01 13:55:05.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23002463892279296 [0;39m <==    Updates: 1
2023-04-01 13:55:05.026 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23002463892279296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 13:55:12.925 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:55:19.482 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:55:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23002589675261952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:55:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23002589675261952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:55:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23002589675261952 [0;39m ==> Parameters: 
2023-04-01 13:55:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23002589675261952 [0;39m <==    Updates: 1
2023-04-01 13:55:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23002589675261952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 13:55:39.298 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:55:42.722 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:55:47.603 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:56:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23002694541250560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:56:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23002694541250560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:56:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23002694541250560 [0;39m ==> Parameters: 
2023-04-01 13:56:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23002694541250560 [0;39m <==    Updates: 0
2023-04-01 13:56:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23002694541250560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š19æ¯«ç§’
2023-04-01 13:56:04.293 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:56:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23002715546324992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:56:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23002715546324992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:56:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23002715546324992 [0;39m ==> Parameters: 
2023-04-01 13:56:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23002715546324992 [0;39m <==    Updates: 1
2023-04-01 13:56:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23002715546324992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 13:56:12.877 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:56:17.387 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:56:29.833 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:56:35.018 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23002841396416512 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:56:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23002841396416512 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:56:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23002841396416512 [0;39m ==> Parameters: 
2023-04-01 13:56:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23002841396416512 [0;39m <==    Updates: 1
2023-04-01 13:56:35.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23002841396416512 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 13:56:42.744 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:56:47.350 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:56:55.103 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:57:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23002946233044992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:57:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23002946233044992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:57:00.031 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23002946233044992 [0;39m ==> Parameters: 
2023-04-01 13:57:00.047 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23002946233044992 [0;39m <==    Updates: 0
2023-04-01 13:57:00.047 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23002946233044992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š33æ¯«ç§’
2023-04-01 13:57:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23002967204564992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:57:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23002967204564992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:57:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23002967204564992 [0;39m ==> Parameters: 
2023-04-01 13:57:05.034 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23002967204564992 [0;39m <==    Updates: 1
2023-04-01 13:57:05.034 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23002967204564992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š20æ¯«ç§’
2023-04-01 13:57:12.985 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:57:22.571 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:57:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23003092995936256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:57:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23003092995936256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:57:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23003092995936256 [0;39m ==> Parameters: 
2023-04-01 13:57:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23003092995936256 [0;39m <==    Updates: 1
2023-04-01 13:57:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23003092995936256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 13:57:42.996 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:57:47.398 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:57:50.199 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:58:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23003197878702080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:58:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23003197878702080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:58:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23003197878702080 [0;39m ==> Parameters: 
2023-04-01 13:58:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23003197878702080 [0;39m <==    Updates: 0
2023-04-01 13:58:00.026 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23003197878702080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š14æ¯«ç§’
2023-04-01 13:58:05.032 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23003218942496768 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:58:05.036 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23003218942496768 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:58:05.037 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23003218942496768 [0;39m ==> Parameters: 
2023-04-01 13:58:05.044 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23003218942496768 [0;39m <==    Updates: 1
2023-04-01 13:58:05.044 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23003218942496768 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 13:58:12.628 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:58:17.314 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:58:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23003344645787648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:58:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23003344645787648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:58:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23003344645787648 [0;39m ==> Parameters: 
2023-04-01 13:58:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23003344645787648 [0;39m <==    Updates: 1
2023-04-01 13:58:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23003344645787648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 13:58:42.600 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:58:49.272 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:59:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23003449528553472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 13:59:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23003449528553472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 13:59:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23003449528553472 [0;39m ==> Parameters: 
2023-04-01 13:59:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23003449528553472 [0;39m <==    Updates: 0
2023-04-01 13:59:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23003449528553472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š15æ¯«ç§’
2023-04-01 13:59:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23003470525239296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:59:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23003470525239296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:59:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23003470525239296 [0;39m ==> Parameters: 
2023-04-01 13:59:05.031 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23003470525239296 [0;39m <==    Updates: 1
2023-04-01 13:59:05.032 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23003470525239296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š18æ¯«ç§’
2023-04-01 13:59:06.731 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:59:12.579 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:59:16.778 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:59:31.911 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:59:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23003596324999168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 13:59:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23003596324999168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 13:59:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23003596324999168 [0;39m ==> Parameters: 
2023-04-01 13:59:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23003596324999168 [0;39m <==    Updates: 1
2023-04-01 13:59:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23003596324999168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 13:59:42.797 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:59:47.097 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 13:59:57.055 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:00:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23003701203570688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 14:00:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23003701203570688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 14:00:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23003701203570688 [0;39m ==> Parameters: 
2023-04-01 14:00:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23003701203570688 [0;39m <==    Updates: 0
2023-04-01 14:00:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23003701203570688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 14:00:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23003722170896384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 14:00:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23003722170896384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 14:00:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23003722170896384 [0;39m ==> Parameters: 
2023-04-01 14:00:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23003722170896384 [0;39m <==    Updates: 1
2023-04-01 14:00:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23003722170896384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 14:00:12.698 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:00:22.615 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:00:35.034 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23003848096485376 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 14:00:35.041 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23003848096485376 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 14:00:35.041 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23003848096485376 [0;39m ==> Parameters: 
2023-04-01 14:00:35.051 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23003848096485376 [0;39m <==    Updates: 1
2023-04-01 14:00:35.051 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23003848096485376 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š17æ¯«ç§’
2023-04-01 14:00:42.727 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:00:49.602 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:01:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23003952828256256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 14:01:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23003952828256256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 14:01:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23003952828256256 [0;39m ==> Parameters: 
2023-04-01 14:01:01.289 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23003952828256256 [0;39m <==    Updates: 0
2023-04-01 14:01:01.289 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23003952828256256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š1285æ¯«ç§’
2023-04-01 14:01:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23003973824942080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 14:01:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23003973824942080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 14:01:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23003973824942080 [0;39m ==> Parameters: 
2023-04-01 14:01:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23003973824942080 [0;39m <==    Updates: 1
2023-04-01 14:01:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23003973824942080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 14:01:12.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:01:19.996 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:01:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23004099633090560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 14:01:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23004099633090560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 14:01:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23004099633090560 [0;39m ==> Parameters: 
2023-04-01 14:01:35.026 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23004099633090560 [0;39m <==    Updates: 1
2023-04-01 14:01:35.026 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23004099633090560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š17æ¯«ç§’
2023-04-01 14:01:43.043 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:01:47.829 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:02:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23004204541022208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 14:02:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23004204541022208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 14:02:00.029 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23004204541022208 [0;39m ==> Parameters: 
2023-04-01 14:02:00.039 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23004204541022208 [0;39m <==    Updates: 0
2023-04-01 14:02:00.040 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23004204541022208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š22æ¯«ç§’
2023-04-01 14:02:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23004225470599168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 14:02:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23004225470599168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 14:02:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23004225470599168 [0;39m ==> Parameters: 
2023-04-01 14:02:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23004225470599168 [0;39m <==    Updates: 1
2023-04-01 14:02:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23004225470599168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 14:02:05.404 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:02:12.631 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:02:17.295 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:02:29.976 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:02:35.028 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23004351387799552 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 14:02:35.031 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23004351387799552 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 14:02:35.032 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23004351387799552 [0;39m ==> Parameters: 
2023-04-01 14:02:35.042 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23004351387799552 [0;39m <==    Updates: 1
2023-04-01 14:02:35.043 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23004351387799552 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š15æ¯«ç§’
2023-04-01 14:02:42.736 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:02:47.441 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:02:54.696 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:03:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23004456182484992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 14:03:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23004456182484992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 14:03:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23004456182484992 [0;39m ==> Parameters: 
2023-04-01 14:03:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23004456182484992 [0;39m <==    Updates: 0
2023-04-01 14:03:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23004456182484992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-04-01 14:03:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23004477149810688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 14:03:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23004477149810688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 14:03:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23004477149810688 [0;39m ==> Parameters: 
2023-04-01 14:03:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23004477149810688 [0;39m <==    Updates: 1
2023-04-01 14:03:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23004477149810688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 14:03:12.265 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:03:20.256 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:03:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23004602987319296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 14:03:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23004602987319296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 14:03:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23004602987319296 [0;39m ==> Parameters: 
2023-04-01 14:03:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23004602987319296 [0;39m <==    Updates: 1
2023-04-01 14:03:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23004602987319296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 14:03:42.258 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:03:47.199 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:04:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23004707832336384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 14:04:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23004707832336384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 14:04:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23004707832336384 [0;39m ==> Parameters: 
2023-04-01 14:04:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23004707832336384 [0;39m <==    Updates: 0
2023-04-01 14:04:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23004707832336384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 14:04:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23004728770301952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 14:04:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23004728770301952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 14:04:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23004728770301952 [0;39m ==> Parameters: 
2023-04-01 14:04:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23004728770301952 [0;39m <==    Updates: 1
2023-04-01 14:04:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23004728770301952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 14:04:12.276 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:04:17.493 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:04:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23004854595227648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 14:04:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23004854595227648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 14:04:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23004854595227648 [0;39m ==> Parameters: 
2023-04-01 14:04:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23004854595227648 [0;39m <==    Updates: 1
2023-04-01 14:04:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23004854595227648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 14:04:35.101 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:04:42.273 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:04:45.872 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m22986305734578176 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-04-01 14:04:45.875 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m22986305734578176 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š2 ms -------------
2023-04-01 14:04:45.890 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m22986197412483072 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-04-01 14:04:45.890 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m22986197412483072 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/category/save
2023-04-01 14:04:45.890 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m22986197412483072 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š22985523190697984
2023-04-01 14:04:45.939 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m22986197412483072 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"22985523190697984"}
2023-04-01 14:04:45.949 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m23004900510273536 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 14:04:45.950 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m23004900510273536 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/save POST
2023-04-01 14:04:45.951 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m23004900510273536 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.save
2023-04-01 14:04:45.951 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m23004900510273536 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 14:04:45.952 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m23004900510273536 [0;39m è¯·æ±‚å‚æ•°: [{"id":200,"name":"Java","parent":0,"sort":200}]
2023-04-01 14:04:45.953 DEBUG c.j.wiki.mapper.CategoryMapper.updateByPrimaryKey :137  [32m23004900510273536 [0;39m ==>  Preparing: update category set parent = ?, `name` = ?, sort = ? where id = ?
2023-04-01 14:04:45.954 DEBUG c.j.wiki.mapper.CategoryMapper.updateByPrimaryKey :137  [32m23004900510273536 [0;39m ==> Parameters: 0(Long), Java(String), 200(Integer), 200(Long)
2023-04-01 14:04:45.956 DEBUG c.j.wiki.mapper.CategoryMapper.updateByPrimaryKey :137  [32m23004900510273536 [0;39m <==    Updates: 1
2023-04-01 14:04:45.956 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m23004900510273536 [0;39m è¿”å›žç»“æžœ: {"success":true}
2023-04-01 14:04:45.956 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m23004900510273536 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-04-01 14:04:45.959 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m23004900510273536 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š69 ms -------------
2023-04-01 14:04:46.015 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m23004900787097600 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 14:04:46.016 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m23004900787097600 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 14:04:46.016 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m23004900787097600 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 14:04:46.016 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m23004900787097600 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 14:04:46.016 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m23004900787097600 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 14:04:46.017 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m23004900787097600 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 14:04:46.018 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m23004900787097600 [0;39m ==> Parameters: 
2023-04-01 14:04:46.019 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004900787097600 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 14:04:46.019 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004900787097600 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 14:04:46.020 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004900787097600 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 14:04:46.020 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004900787097600 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 14:04:46.020 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004900787097600 [0;39m <==        Row: 200, 0, Java, 200
2023-04-01 14:04:46.021 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004900787097600 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 14:04:46.021 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004900787097600 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 14:04:46.021 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004900787097600 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 14:04:46.022 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004900787097600 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 14:04:46.022 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004900787097600 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 14:04:46.022 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004900787097600 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 14:04:46.022 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004900787097600 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 14:04:46.023 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004900787097600 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 14:04:46.023 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004900787097600 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 14:04:46.023 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004900787097600 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 14:04:46.023 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004900787097600 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 14:04:46.023 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m23004900787097600 [0;39m <==      Total: 15
2023-04-01 14:04:46.024 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m23004900787097600 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 14:04:46.024 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m23004900787097600 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2023-04-01 14:04:46.482 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:04:57.817 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m                  [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-04-01 14:04:57.817 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m                  [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/category/save
2023-04-01 14:04:57.817 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m                  [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š22985523190697984
2023-04-01 14:04:57.847 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m                  [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"22985523190697984"}
2023-04-01 14:04:57.851 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m23004950430879744 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 14:04:57.851 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m23004950430879744 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/save POST
2023-04-01 14:04:57.852 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m23004950430879744 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.save
2023-04-01 14:04:57.852 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m23004950430879744 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 14:04:57.853 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m23004950430879744 [0;39m è¯·æ±‚å‚æ•°: [{"id":200,"name":"Java","parent":500,"sort":200}]
2023-04-01 14:04:57.855 DEBUG c.j.wiki.mapper.CategoryMapper.updateByPrimaryKey :137  [32m23004950430879744 [0;39m ==>  Preparing: update category set parent = ?, `name` = ?, sort = ? where id = ?
2023-04-01 14:04:57.856 DEBUG c.j.wiki.mapper.CategoryMapper.updateByPrimaryKey :137  [32m23004950430879744 [0;39m ==> Parameters: 500(Long), Java(String), 200(Integer), 200(Long)
2023-04-01 14:04:57.863 DEBUG c.j.wiki.mapper.CategoryMapper.updateByPrimaryKey :137  [32m23004950430879744 [0;39m <==    Updates: 1
2023-04-01 14:04:57.863 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m23004950430879744 [0;39m è¿”å›žç»“æžœ: {"success":true}
2023-04-01 14:04:57.864 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m23004950430879744 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š13 ms -------------
2023-04-01 14:04:57.864 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m23004950430879744 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š47 ms -------------
2023-04-01 14:04:57.921 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m23004950724481024 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 14:04:57.922 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m23004950724481024 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 14:04:57.922 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m23004950724481024 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 14:04:57.923 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m23004950724481024 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 14:04:57.924 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m23004950724481024 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 14:04:57.925 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m23004950724481024 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 14:04:57.925 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m23004950724481024 [0;39m ==> Parameters: 
2023-04-01 14:04:57.927 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004950724481024 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 14:04:57.928 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004950724481024 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 14:04:57.928 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004950724481024 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 14:04:57.928 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004950724481024 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 14:04:57.929 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004950724481024 [0;39m <==        Row: 200, 500, Java, 200
2023-04-01 14:04:57.929 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004950724481024 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 14:04:57.929 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004950724481024 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 14:04:57.930 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004950724481024 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 14:04:57.931 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004950724481024 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 14:04:57.931 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004950724481024 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 14:04:57.931 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004950724481024 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 14:04:57.931 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004950724481024 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 14:04:57.932 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004950724481024 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 14:04:57.932 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004950724481024 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 14:04:57.932 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004950724481024 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 14:04:57.932 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23004950724481024 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 14:04:57.932 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m23004950724481024 [0;39m <==      Total: 15
2023-04-01 14:04:57.933 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m23004950724481024 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":500,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 14:04:57.933 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m23004950724481024 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š12 ms -------------
2023-04-01 14:04:59.193 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:05:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23004959486382080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 14:05:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23004959486382080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 14:05:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23004959486382080 [0;39m ==> Parameters: 
2023-04-01 14:05:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23004959486382080 [0;39m <==    Updates: 0
2023-04-01 14:05:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23004959486382080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 14:05:05.017 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23004980487262208 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 14:05:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23004980487262208 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 14:05:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23004980487262208 [0;39m ==> Parameters: 
2023-04-01 14:05:05.028 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23004980487262208 [0;39m <==    Updates: 1
2023-04-01 14:05:05.028 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23004980487262208 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 14:05:12.262 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:05:17.171 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:05:23.279 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:05:23.667 INFO  com.jiawa.wiki.websocket.WebSocketServer          :41   [32m22986234410438656 [0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šfItqoZlFRMï¼Œsession idï¼š2ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2023-04-01 14:05:28.456 INFO  com.jiawa.wiki.websocket.WebSocketServer          :32   [32m22990507848372224 [0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šNWNmXaMiasï¼Œsession idï¼š3ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2023-04-01 14:05:28.925 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m23005080764682240 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 14:05:28.925 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m23005080764682240 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 14:05:28.925 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m23005080764682240 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 14:05:28.925 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m23005080764682240 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 14:05:28.926 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m23005080764682240 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 14:05:28.928 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m23005080764682240 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 14:05:28.928 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m23005080764682240 [0;39m ==> Parameters: 
2023-04-01 14:05:28.930 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005080764682240 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 14:05:28.930 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005080764682240 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 14:05:28.931 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005080764682240 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 14:05:28.931 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005080764682240 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 14:05:28.931 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005080764682240 [0;39m <==        Row: 200, 500, Java, 200
2023-04-01 14:05:28.931 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005080764682240 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 14:05:28.932 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005080764682240 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 14:05:28.932 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005080764682240 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 14:05:28.932 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005080764682240 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 14:05:28.932 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005080764682240 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 14:05:28.933 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005080764682240 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 14:05:28.933 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005080764682240 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 14:05:28.933 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005080764682240 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 14:05:28.933 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005080764682240 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 14:05:28.934 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005080764682240 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 14:05:28.934 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005080764682240 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 14:05:28.934 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m23005080764682240 [0;39m <==      Total: 15
2023-04-01 14:05:28.936 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m23005080764682240 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":500,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 14:05:28.936 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m23005080764682240 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š11 ms -------------
2023-04-01 14:05:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23005106303799296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 14:05:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23005106303799296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 14:05:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23005106303799296 [0;39m ==> Parameters: 
2023-04-01 14:05:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23005106303799296 [0;39m <==    Updates: 1
2023-04-01 14:05:35.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23005106303799296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 14:05:38.634 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m22986305503891456 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-04-01 14:05:38.634 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m22986305503891456 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/category/save
2023-04-01 14:05:38.634 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m22986305503891456 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š22985523190697984
2023-04-01 14:05:38.638 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m22986305503891456 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"22985523190697984"}
2023-04-01 14:05:38.640 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m23005121512345600 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 14:05:38.640 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m23005121512345600 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/save POST
2023-04-01 14:05:38.640 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m23005121512345600 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.save
2023-04-01 14:05:38.641 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m23005121512345600 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 14:05:38.641 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m23005121512345600 [0;39m è¯·æ±‚å‚æ•°: [{"id":200,"name":"Java","parent":0,"sort":200}]
2023-04-01 14:05:38.642 DEBUG c.j.wiki.mapper.CategoryMapper.updateByPrimaryKey :137  [32m23005121512345600 [0;39m ==>  Preparing: update category set parent = ?, `name` = ?, sort = ? where id = ?
2023-04-01 14:05:38.642 DEBUG c.j.wiki.mapper.CategoryMapper.updateByPrimaryKey :137  [32m23005121512345600 [0;39m ==> Parameters: 0(Long), Java(String), 200(Integer), 200(Long)
2023-04-01 14:05:38.649 DEBUG c.j.wiki.mapper.CategoryMapper.updateByPrimaryKey :137  [32m23005121512345600 [0;39m <==    Updates: 1
2023-04-01 14:05:38.649 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m23005121512345600 [0;39m è¿”å›žç»“æžœ: {"success":true}
2023-04-01 14:05:38.649 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m23005121512345600 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2023-04-01 14:05:38.652 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m23005121512345600 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š18 ms -------------
2023-04-01 14:05:38.727 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m23005121877250048 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 14:05:38.728 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m23005121877250048 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-04-01 14:05:38.728 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m23005121877250048 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-04-01 14:05:38.728 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m23005121877250048 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 14:05:38.728 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m23005121877250048 [0;39m è¯·æ±‚å‚æ•°: []
2023-04-01 14:05:38.729 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m23005121877250048 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-04-01 14:05:38.729 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m23005121877250048 [0;39m ==> Parameters: 
2023-04-01 14:05:38.730 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005121877250048 [0;39m <==    Columns: id, parent, name, sort
2023-04-01 14:05:38.731 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005121877250048 [0;39m <==        Row: 100, 200, å‰ç«¯å¼€å‘, 100
2023-04-01 14:05:38.731 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005121877250048 [0;39m <==        Row: 101, 100, Vue, 101
2023-04-01 14:05:38.731 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005121877250048 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-04-01 14:05:38.732 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005121877250048 [0;39m <==        Row: 200, 0, Java, 200
2023-04-01 14:05:38.732 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005121877250048 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-04-01 14:05:38.732 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005121877250048 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-04-01 14:05:38.732 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005121877250048 [0;39m <==        Row: 300, 0, Python, 300
2023-04-01 14:05:38.732 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005121877250048 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-04-01 14:05:38.733 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005121877250048 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-04-01 14:05:38.733 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005121877250048 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-04-01 14:05:38.733 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005121877250048 [0;39m <==        Row: 401, 400, MySQL, 401
2023-04-01 14:05:38.733 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005121877250048 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-04-01 14:05:38.734 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005121877250048 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-04-01 14:05:38.734 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005121877250048 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-04-01 14:05:38.734 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m23005121877250048 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-04-01 14:05:38.734 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m23005121877250048 [0;39m <==      Total: 15
2023-04-01 14:05:38.735 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m23005121877250048 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":200,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-04-01 14:05:38.735 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m23005121877250048 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-04-01 14:05:42.261 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:05:50.197 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:06:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23005211161399296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 14:06:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23005211161399296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 14:06:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23005211161399296 [0;39m ==> Parameters: 
2023-04-01 14:06:00.026 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23005211161399296 [0;39m <==    Updates: 0
2023-04-01 14:06:00.026 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23005211161399296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 14:06:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23005232128724992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 14:06:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23005232128724992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 14:06:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23005232128724992 [0;39m ==> Parameters: 
2023-04-01 14:06:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23005232128724992 [0;39m <==    Updates: 1
2023-04-01 14:06:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23005232128724992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 14:06:12.820 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:06:16.915 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 14:06:22.484 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m23004900510273536 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-04-01 14:06:22.484 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m23004900510273536 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/category/save
2023-04-01 14:06:22.486 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m23004900510273536 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š22985523190697984
2023-04-01 14:06:22.494 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m23004900510273536 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"22985523190697984"}
2023-04-01 14:06:22.498 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m23005305466130432 [0;39m ------------- å¼€å§‹ -------------
2023-04-01 14:06:22.499 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m23005305466130432 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/save POST
2023-04-01 14:06:22.500 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m23005305466130432 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.save
2023-04-01 14:06:22.502 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m23005305466130432 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-04-01 14:06:22.503 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m23005305466130432 [0;39m è¯·æ±‚å‚æ•°: [{"id":200,"name":"Java","parent":500,"sort":200}]
2023-04-01 14:16:38.453 WARN  com.zaxxer.hikari.pool.HikariPool                 :787  [32m                  [0;39m HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=10m41s373ms322Âµs799ns).
2023-04-01 14:16:38.547 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23007889358721024 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 14:16:38.548 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23007889358721024 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 14:16:38.549 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23007889358721024 [0;39m ==> Parameters: 
2023-04-01 14:16:38.551 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23007889358721024 [0;39m <==    Updates: 1
2023-04-01 14:16:38.552 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23007889358721024 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 14:16:38.552 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23007889383886848 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 14:16:38.553 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23007889383886848 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 14:16:38.554 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23007889383886848 [0;39m ==> Parameters: 
2023-04-01 14:16:38.556 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23007889383886848 [0;39m <==    Updates: 0
2023-04-01 14:16:38.557 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23007889383886848 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 21:05:20.627 INFO  com.jiawa.wiki.WikiApplication                    :55   [32m                  [0;39m Starting WikiApplication using Java 1.8.0_271 on LAPTOP-TLCI2GAA with PID 12948 (D:\work\jiawawiki\target\classes started by k in D:\work\jiawawiki)
2023-04-01 21:05:20.626 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.1.6.Final
2023-04-01 21:05:20.631 INFO  com.jiawa.wiki.WikiApplication                    :660  [32m                  [0;39m No active profile set, falling back to default profiles: default
2023-04-01 21:05:20.766 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-04-01 21:05:20.767 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-04-01 21:05:22.541 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :250  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2023-04-01 21:05:22.550 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :128  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-04-01 21:05:22.619 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :188  [32m                  [0;39m Finished Spring Data repository scanning in 40 ms. Found 0 Redis repository interfaces.
2023-04-01 21:05:23.110 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration$$EnhancerBySpringCGLIB$$2da538da] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 21:05:23.132 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 21:05:24.409 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'defaultMQProducer' of type [org.apache.rocketmq.client.producer.DefaultMQProducer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 21:05:24.414 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonConfig' of type [com.jiawa.wiki.config.JacksonConfig$$EnhancerBySpringCGLIB$$cfdfaddb] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 21:05:24.415 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 21:05:24.417 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 21:05:24.421 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'spring.jackson-org.springframework.boot.autoconfigure.jackson.JacksonProperties' of type [org.springframework.boot.autoconfigure.jackson.JacksonProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 21:05:24.422 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'standardJacksonObjectMapperBuilderCustomizer' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration$StandardJackson2ObjectMapperBuilderCustomizer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 21:05:24.426 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 21:05:24.431 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'parameterNamesModule' of type [com.fasterxml.jackson.module.paramnames.ParameterNamesModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 21:05:24.434 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 21:05:24.485 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jsonComponentModule' of type [org.springframework.boot.jackson.JsonComponentModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 21:05:24.485 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.data.web.config.SpringDataJacksonConfiguration' of type [org.springframework.data.web.config.SpringDataJacksonConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 21:05:24.499 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonGeoModule' of type [org.springframework.data.geo.GeoModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 21:05:24.506 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapperBuilder' of type [org.springframework.http.converter.json.Jackson2ObjectMapperBuilder] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 21:05:24.531 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapper' of type [com.fasterxml.jackson.databind.ObjectMapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 21:05:29.670 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketMQTemplate' of type [org.apache.rocketmq.spring.core.RocketMQTemplate] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 21:05:29.672 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'transactionHandlerRegistry' of type [org.apache.rocketmq.spring.config.TransactionHandlerRegistry] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-04-01 21:05:30.755 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2023-04-01 21:05:30.764 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2023-04-01 21:05:30.766 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2023-04-01 21:05:30.766 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.39]
2023-04-01 21:05:30.893 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2023-04-01 21:05:30.895 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :289  [32m                  [0;39m Root WebApplicationContext: initialization completed in 10127 ms
2023-04-01 21:05:32.262 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2023-04-01 21:05:32.440 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:05:32.440 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:05:33.059 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2023-04-01 21:05:33.156 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2023-04-01 21:05:35.995 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:05:38.048 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:05:38.051 INFO  o.a.r.s.support.DefaultRocketMQListenerContainer  :243  [32m                  [0;39m running container: DefaultRocketMQListenerContainer{consumerGroup='default', nameServer='127.0.0.1:9876', topic='VOTE_TOPIC', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
2023-04-01 21:05:38.051 INFO  o.a.r.s.a.ListenerContainerConfiguration          :107  [32m                  [0;39m Register the listener to container, listenerBeanName:voteTopicConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-04-01 21:05:38.067 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2023-04-01 21:05:38.086 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2023-04-01 21:05:38.103 INFO  com.jiawa.wiki.WikiApplication                    :61   [32m                  [0;39m Started WikiApplication in 18.607 seconds (JVM running for 22.006)
2023-04-01 21:05:38.107 INFO  com.jiawa.wiki.WikiApplication                    :26   [32m                  [0;39m å¯åŠ¨æˆåŠŸï¼ï¼
2023-04-01 21:05:38.108 INFO  com.jiawa.wiki.WikiApplication                    :27   [32m                  [0;39m åœ°å€: 	http://127.0.0.1:8880
2023-04-01 21:05:40.103 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:05:42.154 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:05:59.474 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:06:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23110907588644864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:06:00.053 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m23110907588644864 [0;39m HikariPool-1 - Starting...
2023-04-01 21:06:00.308 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m23110907588644864 [0;39m HikariPool-1 - Start completed.
2023-04-01 21:06:00.314 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23110907588644864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:06:00.343 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23110907588644864 [0;39m ==> Parameters: 
2023-04-01 21:06:00.360 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23110907588644864 [0;39m <==    Updates: 0
2023-04-01 21:06:00.401 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23110907588644864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š386æ¯«ç§’
2023-04-01 21:06:01.731 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:06:03.862 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:06:05.026 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23110928644050944 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:06:05.032 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23110928644050944 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:06:05.032 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23110928644050944 [0;39m ==> Parameters: 
2023-04-01 21:06:05.039 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23110928644050944 [0;39m <==    Updates: 1
2023-04-01 21:06:05.040 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23110928644050944 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 21:06:05.898 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:06:07.920 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:06:29.461 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:06:31.500 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:06:31.732 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:06:33.536 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:06:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23111054397673472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:06:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23111054397673472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:06:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23111054397673472 [0;39m ==> Parameters: 
2023-04-01 21:06:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23111054397673472 [0;39m <==    Updates: 1
2023-04-01 21:06:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23111054397673472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 21:06:36.208 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:07:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23111159255273472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:07:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23111159255273472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:07:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23111159255273472 [0;39m ==> Parameters: 
2023-04-01 21:07:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23111159255273472 [0;39m <==    Updates: 0
2023-04-01 21:07:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23111159255273472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 21:07:01.019 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:07:02.306 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:07:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23111180197433344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:07:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23111180197433344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:07:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23111180197433344 [0;39m ==> Parameters: 
2023-04-01 21:07:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23111180197433344 [0;39m <==    Updates: 1
2023-04-01 21:07:05.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23111180197433344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 21:07:05.097 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:07:23.077 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:07:25.126 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:07:31.493 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:07:31.729 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:07:33.526 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:07:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23111306055913472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:07:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23111306055913472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:07:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23111306055913472 [0;39m ==> Parameters: 
2023-04-01 21:07:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23111306055913472 [0;39m <==    Updates: 1
2023-04-01 21:07:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23111306055913472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-04-01 21:07:49.564 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:08:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23111410905124864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:08:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23111410905124864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:08:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23111410905124864 [0;39m ==> Parameters: 
2023-04-01 21:08:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23111410905124864 [0;39m <==    Updates: 0
2023-04-01 21:08:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23111410905124864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 21:08:01.562 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:08:01.783 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:08:03.589 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:08:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23111431859867648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:08:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23111431859867648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:08:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23111431859867648 [0;39m ==> Parameters: 
2023-04-01 21:08:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23111431859867648 [0;39m <==    Updates: 1
2023-04-01 21:08:05.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23111431859867648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 21:08:11.619 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:08:13.672 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:08:31.733 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:08:33.966 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:08:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23111557709959168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:08:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23111557709959168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:08:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23111557709959168 [0;39m ==> Parameters: 
2023-04-01 21:08:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23111557709959168 [0;39m <==    Updates: 1
2023-04-01 21:08:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23111557709959168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 21:08:38.066 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:08:59.456 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:09:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23111662601113600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:09:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23111662601113600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:09:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23111662601113600 [0;39m ==> Parameters: 
2023-04-01 21:09:00.026 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23111662601113600 [0;39m <==    Updates: 0
2023-04-01 21:09:00.027 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23111662601113600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 21:09:01.510 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:09:01.743 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:09:03.559 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:09:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23111683539079168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:09:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23111683539079168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:09:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23111683539079168 [0;39m ==> Parameters: 
2023-04-01 21:09:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23111683539079168 [0;39m <==    Updates: 1
2023-04-01 21:09:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23111683539079168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 21:09:05.965 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:09:30.427 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:09:31.735 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:09:32.478 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:09:34.516 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:09:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23111809384976384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:09:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23111809384976384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:09:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23111809384976384 [0;39m ==> Parameters: 
2023-04-01 21:09:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23111809384976384 [0;39m <==    Updates: 1
2023-04-01 21:09:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23111809384976384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 21:09:36.563 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:09:52.482 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:09:54.536 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:10:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23111914229993472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:10:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23111914229993472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:10:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23111914229993472 [0;39m ==> Parameters: 
2023-04-01 21:10:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23111914229993472 [0;39m <==    Updates: 0
2023-04-01 21:10:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23111914229993472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 21:10:01.503 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:10:01.709 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:10:03.557 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:10:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23111935197319168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:10:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23111935197319168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:10:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23111935197319168 [0;39m ==> Parameters: 
2023-04-01 21:10:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23111935197319168 [0;39m <==    Updates: 1
2023-04-01 21:10:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23111935197319168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-04-01 21:10:16.594 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:10:18.623 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:10:31.740 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:10:33.590 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:10:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23112061039022080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:10:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23112061039022080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:10:35.026 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23112061039022080 [0;39m ==> Parameters: 
2023-04-01 21:10:35.028 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23112061039022080 [0;39m <==    Updates: 1
2023-04-01 21:10:35.029 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23112061039022080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š17æ¯«ç§’
2023-04-01 21:10:41.196 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:10:43.608 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:11:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23112165871456256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:11:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23112165871456256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:11:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23112165871456256 [0;39m ==> Parameters: 
2023-04-01 21:11:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23112165871456256 [0;39m <==    Updates: 0
2023-04-01 21:11:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23112165871456256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 21:11:01.519 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:11:01.744 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:11:03.562 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:11:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23112186872336384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:11:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23112186872336384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:11:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23112186872336384 [0;39m ==> Parameters: 
2023-04-01 21:11:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23112186872336384 [0;39m <==    Updates: 1
2023-04-01 21:11:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23112186872336384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 21:11:07.710 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:11:32.050 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:11:32.359 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:11:34.716 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:11:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23112312709844992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:11:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23112312709844992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:11:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23112312709844992 [0;39m ==> Parameters: 
2023-04-01 21:11:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23112312709844992 [0;39m <==    Updates: 1
2023-04-01 21:11:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23112312709844992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 21:11:58.760 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:12:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23112417517113344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:12:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23112417517113344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:12:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23112417517113344 [0;39m ==> Parameters: 
2023-04-01 21:12:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23112417517113344 [0;39m <==    Updates: 0
2023-04-01 21:12:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23112417517113344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-04-01 21:12:01.342 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:12:01.778 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:12:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23112438509604864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:12:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23112438509604864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:12:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23112438509604864 [0;39m ==> Parameters: 
2023-04-01 21:12:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23112438509604864 [0;39m <==    Updates: 1
2023-04-01 21:12:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23112438509604864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 21:12:06.322 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:12:22.861 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:12:31.742 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:12:33.551 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:12:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23112564334530560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:12:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23112564334530560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:12:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23112564334530560 [0;39m ==> Parameters: 
2023-04-01 21:12:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23112564334530560 [0;39m <==    Updates: 1
2023-04-01 21:12:35.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23112564334530560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 21:12:44.914 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:12:46.966 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:13:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23112669221490688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:13:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23112669221490688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:13:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23112669221490688 [0;39m ==> Parameters: 
2023-04-01 21:13:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23112669221490688 [0;39m <==    Updates: 0
2023-04-01 21:13:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23112669221490688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 21:13:01.726 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:13:03.603 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:13:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23112690163650560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:13:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23112690163650560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:13:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23112690163650560 [0;39m ==> Parameters: 
2023-04-01 21:13:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23112690163650560 [0;39m <==    Updates: 1
2023-04-01 21:13:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23112690163650560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 21:13:09.041 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:13:11.083 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:13:31.740 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:13:33.517 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:13:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23112816009547776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:13:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23112816009547776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:13:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23112816009547776 [0;39m ==> Parameters: 
2023-04-01 21:13:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23112816009547776 [0;39m <==    Updates: 1
2023-04-01 21:13:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23112816009547776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 21:13:37.616 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:13:59.463 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:14:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23112920858759168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:14:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23112920858759168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:14:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23112920858759168 [0;39m ==> Parameters: 
2023-04-01 21:14:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23112920858759168 [0;39m <==    Updates: 0
2023-04-01 21:14:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23112920858759168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 21:14:01.504 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:14:01.739 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:14:03.546 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:14:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23112941809307648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:14:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23112941809307648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:14:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23112941809307648 [0;39m ==> Parameters: 
2023-04-01 21:14:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23112941809307648 [0;39m <==    Updates: 1
2023-04-01 21:14:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23112941809307648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š14æ¯«ç§’
2023-04-01 21:14:05.591 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:14:27.639 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:14:31.735 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:14:33.793 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:14:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23113067646816256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:14:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23113067646816256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:14:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23113067646816256 [0;39m ==> Parameters: 
2023-04-01 21:14:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23113067646816256 [0;39m <==    Updates: 1
2023-04-01 21:14:35.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23113067646816256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 21:14:35.828 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:14:53.745 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:14:59.485 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:15:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23113172525387776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:15:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23113172525387776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:15:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23113172525387776 [0;39m ==> Parameters: 
2023-04-01 21:15:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23113172525387776 [0;39m <==    Updates: 0
2023-04-01 21:15:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23113172525387776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 21:15:02.033 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:15:04.080 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:15:05.000 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23113193459159040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:15:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23113193459159040 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:15:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23113193459159040 [0;39m ==> Parameters: 
2023-04-01 21:15:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23113193459159040 [0;39m <==    Updates: 1
2023-04-01 21:15:05.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23113193459159040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 21:15:17.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:15:31.723 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:15:31.920 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:15:33.968 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:15:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23113319342804992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:15:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23113319342804992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:15:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23113319342804992 [0;39m ==> Parameters: 
2023-04-01 21:15:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23113319342804992 [0;39m <==    Updates: 1
2023-04-01 21:15:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23113319342804992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 21:15:39.944 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:15:42.145 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:16:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23113424166850560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:16:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23113424166850560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:16:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23113424166850560 [0;39m ==> Parameters: 
2023-04-01 21:16:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23113424166850560 [0;39m <==    Updates: 0
2023-04-01 21:16:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23113424166850560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-04-01 21:16:02.353 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:16:04.686 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:16:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23113445167730688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:16:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23113445167730688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:16:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23113445167730688 [0;39m ==> Parameters: 
2023-04-01 21:16:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23113445167730688 [0;39m <==    Updates: 1
2023-04-01 21:16:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23113445167730688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 21:16:09.458 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:16:30.107 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:16:32.019 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:16:32.486 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:16:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23113570954907648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:16:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23113570954907648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:16:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23113570954907648 [0;39m ==> Parameters: 
2023-04-01 21:16:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23113570954907648 [0;39m <==    Updates: 1
2023-04-01 21:16:35.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23113570954907648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 21:16:35.283 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:16:37.959 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:16:59.462 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:17:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23113675825090560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:17:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23113675825090560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:17:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23113675825090560 [0;39m ==> Parameters: 
2023-04-01 21:17:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23113675825090560 [0;39m <==    Updates: 0
2023-04-01 21:17:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23113675825090560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 21:17:01.509 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:17:01.727 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:17:03.558 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:17:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23113696779833344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:17:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23113696779833344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:17:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23113696779833344 [0;39m ==> Parameters: 
2023-04-01 21:17:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23113696779833344 [0;39m <==    Updates: 1
2023-04-01 21:17:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23113696779833344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 21:17:06.353 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:17:25.639 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:17:27.692 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:17:31.724 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:17:32.253 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:17:34.299 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:17:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23113822659284992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:17:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23113822659284992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:17:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23113822659284992 [0;39m ==> Parameters: 
2023-04-01 21:17:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23113822659284992 [0;39m <==    Updates: 1
2023-04-01 21:17:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23113822659284992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 21:17:49.743 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:17:52.257 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:18:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23113927504302080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:18:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23113927504302080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:18:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23113927504302080 [0;39m ==> Parameters: 
2023-04-01 21:18:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23113927504302080 [0;39m <==    Updates: 0
2023-04-01 21:18:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23113927504302080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 21:18:01.739 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:18:03.800 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:18:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23113948463239168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:18:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23113948463239168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:18:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23113948463239168 [0;39m ==> Parameters: 
2023-04-01 21:18:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23113948463239168 [0;39m <==    Updates: 1
2023-04-01 21:18:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23113948463239168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 21:18:14.306 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:18:16.345 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:18:31.715 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:18:31.746 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:18:34.345 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:18:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23114074304942080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:18:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23114074304942080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:18:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23114074304942080 [0;39m ==> Parameters: 
2023-04-01 21:18:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23114074304942080 [0;39m <==    Updates: 1
2023-04-01 21:18:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23114074304942080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 21:18:38.392 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:18:40.429 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:18:59.459 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:19:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23114179179319296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:19:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23114179179319296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:19:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23114179179319296 [0;39m ==> Parameters: 
2023-04-01 21:19:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23114179179319296 [0;39m <==    Updates: 0
2023-04-01 21:19:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23114179179319296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 21:19:01.730 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:19:03.541 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:19:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23114200125673472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:19:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23114200125673472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:19:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23114200125673472 [0;39m ==> Parameters: 
2023-04-01 21:19:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23114200125673472 [0;39m <==    Updates: 1
2023-04-01 21:19:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23114200125673472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 21:19:05.580 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:19:29.696 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:19:32.221 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:19:34.653 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:19:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23114325963182080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:19:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23114325963182080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:19:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23114325963182080 [0;39m ==> Parameters: 
2023-04-01 21:19:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23114325963182080 [0;39m <==    Updates: 1
2023-04-01 21:19:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23114325963182080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 21:19:37.183 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:19:54.056 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:19:59.459 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:20:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23114430833364992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:20:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23114430833364992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:20:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23114430833364992 [0;39m ==> Parameters: 
2023-04-01 21:20:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23114430833364992 [0;39m <==    Updates: 0
2023-04-01 21:20:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23114430833364992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 21:20:01.494 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:20:01.709 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:20:03.538 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:20:05.000 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23114451750359040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:20:05.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23114451750359040 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:20:05.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23114451750359040 [0;39m ==> Parameters: 
2023-04-01 21:20:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23114451750359040 [0;39m <==    Updates: 1
2023-04-01 21:20:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23114451750359040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 21:20:18.135 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:20:29.455 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:20:31.731 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:20:33.815 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:20:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23114577638199296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:20:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23114577638199296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:20:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23114577638199296 [0;39m ==> Parameters: 
2023-04-01 21:20:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23114577638199296 [0;39m <==    Updates: 1
2023-04-01 21:20:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23114577638199296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 21:20:40.188 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:20:42.238 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:20:59.453 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:21:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23114682470633472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:21:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23114682470633472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:21:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23114682470633472 [0;39m ==> Parameters: 
2023-04-01 21:21:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23114682470633472 [0;39m <==    Updates: 0
2023-04-01 21:21:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23114682470633472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 21:21:01.723 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:21:03.547 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:21:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23114703429570560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:21:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23114703429570560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:21:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23114703429570560 [0;39m ==> Parameters: 
2023-04-01 21:21:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23114703429570560 [0;39m <==    Updates: 1
2023-04-01 21:21:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23114703429570560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 21:21:05.595 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:21:07.629 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:21:30.178 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:21:32.104 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:21:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23114829300633600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:21:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23114829300633600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:21:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23114829300633600 [0;39m ==> Parameters: 
2023-04-01 21:21:35.026 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23114829300633600 [0;39m <==    Updates: 1
2023-04-01 21:21:35.026 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23114829300633600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 21:21:35.527 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:21:58.813 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:22:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23114934099513344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:22:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23114934099513344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:22:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23114934099513344 [0;39m ==> Parameters: 
2023-04-01 21:22:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23114934099513344 [0;39m <==    Updates: 0
2023-04-01 21:22:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23114934099513344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 21:22:00.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:22:01.717 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:22:03.125 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:22:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23114955112976384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:22:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23114955112976384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:22:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23114955112976384 [0;39m ==> Parameters: 
2023-04-01 21:22:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23114955112976384 [0;39m <==    Updates: 1
2023-04-01 21:22:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23114955112976384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 21:22:05.172 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:22:22.922 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:22:31.509 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:22:31.726 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:22:33.546 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:22:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23115080937902080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:22:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23115080937902080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:22:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23115080937902080 [0;39m ==> Parameters: 
2023-04-01 21:22:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23115080937902080 [0;39m <==    Updates: 1
2023-04-01 21:22:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23115080937902080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 21:22:47.565 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:23:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23115185824862208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:23:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23115185824862208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:23:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23115185824862208 [0;39m ==> Parameters: 
2023-04-01 21:23:00.027 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23115185824862208 [0;39m <==    Updates: 0
2023-04-01 21:23:00.027 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23115185824862208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 21:23:02.014 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:23:03.545 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:23:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23115206762827776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:23:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23115206762827776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:23:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23115206762827776 [0;39m ==> Parameters: 
2023-04-01 21:23:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23115206762827776 [0;39m <==    Updates: 1
2023-04-01 21:23:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23115206762827776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 21:23:11.644 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:23:31.504 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:23:31.720 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:23:33.543 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:23:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23115332579364864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:23:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23115332579364864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:23:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23115332579364864 [0;39m ==> Parameters: 
2023-04-01 21:23:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23115332579364864 [0;39m <==    Updates: 1
2023-04-01 21:23:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23115332579364864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 21:23:38.328 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:23:59.903 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:24:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23115437449547776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:24:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23115437449547776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:24:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23115437449547776 [0;39m ==> Parameters: 
2023-04-01 21:24:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23115437449547776 [0;39m <==    Updates: 0
2023-04-01 21:24:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23115437449547776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š16æ¯«ç§’
2023-04-01 21:24:02.122 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:24:04.924 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:24:05.000 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23115458383319040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:24:05.000 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23115458383319040 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:24:05.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23115458383319040 [0;39m ==> Parameters: 
2023-04-01 21:24:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23115458383319040 [0;39m <==    Updates: 1
2023-04-01 21:24:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23115458383319040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 21:24:28.453 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:24:31.026 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:24:31.742 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:24:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23115584245993472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:24:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23115584245993472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:24:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23115584245993472 [0;39m ==> Parameters: 
2023-04-01 21:24:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23115584245993472 [0;39m <==    Updates: 1
2023-04-01 21:24:35.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23115584245993472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š14æ¯«ç§’
2023-04-01 21:24:35.120 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:24:53.384 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:25:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23115689124564992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:25:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23115689124564992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:25:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23115689124564992 [0;39m ==> Parameters: 
2023-04-01 21:25:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23115689124564992 [0;39m <==    Updates: 0
2023-04-01 21:25:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23115689124564992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 21:25:02.485 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:25:02.667 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:25:05.032 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23115710175776768 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:25:05.033 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23115710175776768 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:25:05.034 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23115710175776768 [0;39m ==> Parameters: 
2023-04-01 21:25:05.037 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23115710175776768 [0;39m <==    Updates: 1
2023-04-01 21:25:05.037 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23115710175776768 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 21:25:05.424 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:25:18.826 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:25:29.462 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:25:31.511 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:25:31.735 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:25:34.029 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:25:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23115835900039168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:25:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23115835900039168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:25:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23115835900039168 [0;39m ==> Parameters: 
2023-04-01 21:25:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23115835900039168 [0;39m <==    Updates: 1
2023-04-01 21:25:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23115835900039168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 21:25:43.927 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:25:59.727 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:26:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23115940753444864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:26:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23115940753444864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:26:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23115940753444864 [0;39m ==> Parameters: 
2023-04-01 21:26:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23115940753444864 [0;39m <==    Updates: 0
2023-04-01 21:26:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23115940753444864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 21:26:02.227 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:26:02.228 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:26:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23115961741742080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:26:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23115961741742080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:26:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23115961741742080 [0;39m ==> Parameters: 
2023-04-01 21:26:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23115961741742080 [0;39m <==    Updates: 1
2023-04-01 21:26:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23115961741742080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 21:26:10.031 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:26:32.129 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:26:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23116087545696256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:26:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23116087545696256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:26:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23116087545696256 [0;39m ==> Parameters: 
2023-04-01 21:26:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23116087545696256 [0;39m <==    Updates: 1
2023-04-01 21:26:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23116087545696256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 21:26:35.426 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:26:38.005 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:27:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23116192449433600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:27:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23116192449433600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:27:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23116192449433600 [0;39m ==> Parameters: 
2023-04-01 21:27:00.029 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23116192449433600 [0;39m <==    Updates: 0
2023-04-01 21:27:00.029 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23116192449433600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š14æ¯«ç§’
2023-04-01 21:27:00.060 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:27:02.470 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:27:04.725 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:27:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23116213404176384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:27:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23116213404176384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:27:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23116213404176384 [0;39m ==> Parameters: 
2023-04-01 21:27:05.025 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23116213404176384 [0;39m <==    Updates: 1
2023-04-01 21:27:05.026 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23116213404176384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š14æ¯«ç§’
2023-04-01 21:27:07.274 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:27:29.759 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:27:31.813 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:27:32.092 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:27:34.327 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:27:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23116339224907776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:27:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23116339224907776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:27:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23116339224907776 [0;39m ==> Parameters: 
2023-04-01 21:27:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23116339224907776 [0;39m <==    Updates: 1
2023-04-01 21:27:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23116339224907776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 21:27:36.380 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:27:53.868 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:27:59.476 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:28:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23116444053147648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:28:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23116444053147648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:28:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23116444053147648 [0;39m ==> Parameters: 
2023-04-01 21:28:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23116444053147648 [0;39m <==    Updates: 0
2023-04-01 21:28:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23116444053147648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 21:28:01.522 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:28:01.723 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:28:03.565 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:28:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23116465054027776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:28:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23116465054027776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:28:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23116465054027776 [0;39m ==> Parameters: 
2023-04-01 21:28:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23116465054027776 [0;39m <==    Updates: 1
2023-04-01 21:28:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23116465054027776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-04-01 21:28:18.370 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:28:29.513 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:28:31.562 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:28:31.730 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:28:33.597 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:28:35.000 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23116590845399040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:28:35.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23116590845399040 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:28:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23116590845399040 [0;39m ==> Parameters: 
2023-04-01 21:28:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23116590845399040 [0;39m <==    Updates: 1
2023-04-01 21:28:35.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23116590845399040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 21:28:42.925 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:29:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23116695753330688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:29:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23116695753330688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:29:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23116695753330688 [0;39m ==> Parameters: 
2023-04-01 21:29:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23116695753330688 [0;39m <==    Updates: 0
2023-04-01 21:29:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23116695753330688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-04-01 21:29:02.208 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:29:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23116716729044992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:29:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23116716729044992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:29:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23116716729044992 [0;39m ==> Parameters: 
2023-04-01 21:29:05.027 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23116716729044992 [0;39m <==    Updates: 1
2023-04-01 21:29:05.028 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23116716729044992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š15æ¯«ç§’
2023-04-01 21:29:10.488 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:29:30.206 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:29:32.097 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:29:32.957 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:29:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23116842524610560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:29:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23116842524610560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:29:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23116842524610560 [0;39m ==> Parameters: 
2023-04-01 21:29:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23116842524610560 [0;39m <==    Updates: 1
2023-04-01 21:29:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23116842524610560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 21:29:37.672 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:30:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23116947378016256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:30:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23116947378016256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:30:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23116947378016256 [0;39m ==> Parameters: 
2023-04-01 21:30:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23116947378016256 [0;39m <==    Updates: 0
2023-04-01 21:30:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23116947378016256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 21:30:01.727 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:30:03.561 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:30:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23116968370507776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:30:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23116968370507776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:30:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23116968370507776 [0;39m ==> Parameters: 
2023-04-01 21:30:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23116968370507776 [0;39m <==    Updates: 1
2023-04-01 21:30:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23116968370507776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 21:30:05.608 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:30:28.411 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:30:32.018 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:30:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23117094174461952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:30:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23117094174461952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:30:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23117094174461952 [0;39m ==> Parameters: 
2023-04-01 21:30:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23117094174461952 [0;39m <==    Updates: 1
2023-04-01 21:30:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23117094174461952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 21:30:36.120 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:30:53.839 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:31:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23117199065616384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:31:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23117199065616384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:31:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23117199065616384 [0;39m ==> Parameters: 
2023-04-01 21:31:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23117199065616384 [0;39m <==    Updates: 0
2023-04-01 21:31:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23117199065616384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 21:31:02.016 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:31:05.000 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23117219990999040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:31:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23117219990999040 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:31:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23117219990999040 [0;39m ==> Parameters: 
2023-04-01 21:31:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23117219990999040 [0;39m <==    Updates: 1
2023-04-01 21:31:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23117219990999040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 21:31:05.459 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:31:19.018 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:31:32.265 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:31:32.639 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:31:35.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23117345883033600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:31:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23117345883033600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:31:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23117345883033600 [0;39m ==> Parameters: 
2023-04-01 21:31:35.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23117345883033600 [0;39m <==    Updates: 1
2023-04-01 21:31:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23117345883033600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 21:31:35.063 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:31:44.013 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:32:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23117450757410816 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:32:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23117450757410816 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:32:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23117450757410816 [0;39m ==> Parameters: 
2023-04-01 21:32:00.032 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23117450757410816 [0;39m <==    Updates: 0
2023-04-01 21:32:00.033 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23117450757410816 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š14æ¯«ç§’
2023-04-01 21:32:02.166 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:32:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23117471691182080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:32:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23117471691182080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:32:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23117471691182080 [0;39m ==> Parameters: 
2023-04-01 21:32:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23117471691182080 [0;39m <==    Updates: 1
2023-04-01 21:32:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23117471691182080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 21:32:10.120 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:32:32.263 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:32:32.763 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:32:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23117597532884992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:32:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23117597532884992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:32:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23117597532884992 [0;39m ==> Parameters: 
2023-04-01 21:32:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23117597532884992 [0;39m <==    Updates: 1
2023-04-01 21:32:35.025 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23117597532884992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 21:32:37.722 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:33:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23117702361124864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:33:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23117702361124864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:33:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23117702361124864 [0;39m ==> Parameters: 
2023-04-01 21:33:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23117702361124864 [0;39m <==    Updates: 0
2023-04-01 21:33:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23117702361124864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 21:33:02.214 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:33:02.623 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:33:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23117723311673344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:33:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23117723311673344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:33:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23117723311673344 [0;39m ==> Parameters: 
2023-04-01 21:33:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23117723311673344 [0;39m <==    Updates: 1
2023-04-01 21:33:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23117723311673344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 21:33:07.741 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:33:29.164 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:33:31.735 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:33:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23117849195319296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:33:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23117849195319296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:33:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23117849195319296 [0;39m ==> Parameters: 
2023-04-01 21:33:35.025 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23117849195319296 [0;39m <==    Updates: 1
2023-04-01 21:33:35.026 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23117849195319296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 21:33:35.309 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:33:53.252 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:33:59.475 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:34:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23117954019364864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:34:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23117954019364864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:34:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23117954019364864 [0;39m ==> Parameters: 
2023-04-01 21:34:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23117954019364864 [0;39m <==    Updates: 0
2023-04-01 21:34:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23117954019364864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š16æ¯«ç§’
2023-04-01 21:34:02.086 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:34:04.342 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:34:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23117974986690560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:34:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23117974986690560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:34:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23117974986690560 [0;39m ==> Parameters: 
2023-04-01 21:34:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23117974986690560 [0;39m <==    Updates: 1
2023-04-01 21:34:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23117974986690560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 21:34:17.336 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:34:31.739 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:34:32.169 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:34:34.616 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:34:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23118100794839040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:34:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23118100794839040 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:34:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23118100794839040 [0;39m ==> Parameters: 
2023-04-01 21:34:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23118100794839040 [0;39m <==    Updates: 1
2023-04-01 21:34:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23118100794839040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 21:34:41.434 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:34:59.455 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:35:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23118205685993472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:35:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23118205685993472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:35:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23118205685993472 [0;39m ==> Parameters: 
2023-04-01 21:35:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23118205685993472 [0;39m <==    Updates: 0
2023-04-01 21:35:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23118205685993472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 21:35:01.723 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:35:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23118226649124864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:35:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23118226649124864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:35:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23118226649124864 [0;39m ==> Parameters: 
2023-04-01 21:35:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23118226649124864 [0;39m <==    Updates: 1
2023-04-01 21:35:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23118226649124864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 21:35:05.562 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:35:29.643 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:35:31.682 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:35:31.729 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:35:33.719 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:35:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23118352515993600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:35:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23118352515993600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:35:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23118352515993600 [0;39m ==> Parameters: 
2023-04-01 21:35:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23118352515993600 [0;39m <==    Updates: 1
2023-04-01 21:35:35.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23118352515993600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 21:35:35.751 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:35:53.729 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:35:59.451 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:36:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23118457340039168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:36:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23118457340039168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:36:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23118457340039168 [0;39m ==> Parameters: 
2023-04-01 21:36:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23118457340039168 [0;39m <==    Updates: 0
2023-04-01 21:36:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23118457340039168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 21:36:01.719 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:36:03.526 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:36:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23118478315753472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:36:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23118478315753472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:36:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23118478315753472 [0;39m ==> Parameters: 
2023-04-01 21:36:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23118478315753472 [0;39m <==    Updates: 1
2023-04-01 21:36:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23118478315753472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 21:36:17.822 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:36:29.464 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:36:31.505 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:36:31.719 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:36:33.538 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:36:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23118604123901952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:36:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23118604123901952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:36:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23118604123901952 [0;39m ==> Parameters: 
2023-04-01 21:36:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23118604123901952 [0;39m <==    Updates: 1
2023-04-01 21:36:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23118604123901952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 21:36:41.899 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:36:59.451 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:37:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23118708989890560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:37:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23118708989890560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:37:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23118708989890560 [0;39m ==> Parameters: 
2023-04-01 21:37:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23118708989890560 [0;39m <==    Updates: 0
2023-04-01 21:37:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23118708989890560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 21:37:01.489 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:37:01.719 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:37:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23118729953021952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:37:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23118729953021952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:37:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23118729953021952 [0;39m ==> Parameters: 
2023-04-01 21:37:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23118729953021952 [0;39m <==    Updates: 1
2023-04-01 21:37:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23118729953021952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 21:37:07.594 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:37:29.459 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:37:31.493 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:37:31.724 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:37:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23118855803113472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:37:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23118855803113472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:37:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23118855803113472 [0;39m ==> Parameters: 
2023-04-01 21:37:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23118855803113472 [0;39m <==    Updates: 1
2023-04-01 21:37:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23118855803113472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-04-01 21:37:35.562 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:37:59.634 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:38:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23118960639741952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:38:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23118960639741952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:38:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23118960639741952 [0;39m ==> Parameters: 
2023-04-01 21:38:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23118960639741952 [0;39m <==    Updates: 0
2023-04-01 21:38:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23118960639741952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 21:38:01.672 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:38:01.717 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:38:03.706 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:38:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23118981607067648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:38:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23118981607067648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:38:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23118981607067648 [0;39m ==> Parameters: 
2023-04-01 21:38:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23118981607067648 [0;39m <==    Updates: 1
2023-04-01 21:38:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23118981607067648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 21:38:05.745 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:38:23.753 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:38:29.459 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:38:31.501 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:38:31.732 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:38:33.805 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:38:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23119107490713600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:38:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23119107490713600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:38:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23119107490713600 [0;39m ==> Parameters: 
2023-04-01 21:38:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23119107490713600 [0;39m <==    Updates: 1
2023-04-01 21:38:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23119107490713600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 21:38:48.410 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:38:59.466 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:39:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23119212310564864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:39:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23119212310564864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:39:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23119212310564864 [0;39m ==> Parameters: 
2023-04-01 21:39:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23119212310564864 [0;39m <==    Updates: 0
2023-04-01 21:39:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23119212310564864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 21:39:01.504 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:39:01.720 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:39:03.542 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:39:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23119233294667776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:39:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23119233294667776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:39:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23119233294667776 [0;39m ==> Parameters: 
2023-04-01 21:39:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23119233294667776 [0;39m <==    Updates: 1
2023-04-01 21:39:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23119233294667776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 21:39:12.491 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:39:29.461 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:39:32.008 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:39:32.009 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:39:34.041 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:39:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23119359144759296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:39:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23119359144759296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:39:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23119359144759296 [0;39m ==> Parameters: 
2023-04-01 21:39:35.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23119359144759296 [0;39m <==    Updates: 1
2023-04-01 21:39:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23119359144759296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 21:39:36.604 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:39:38.641 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:40:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23119463993970688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:40:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23119463993970688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:40:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23119463993970688 [0;39m ==> Parameters: 
2023-04-01 21:40:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23119463993970688 [0;39m <==    Updates: 0
2023-04-01 21:40:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23119463993970688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 21:40:01.494 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:40:01.724 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:40:03.528 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:40:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23119484957102080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:40:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23119484957102080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:40:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23119484957102080 [0;39m ==> Parameters: 
2023-04-01 21:40:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23119484957102080 [0;39m <==    Updates: 1
2023-04-01 21:40:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23119484957102080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 21:40:05.565 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:40:27.606 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:40:29.640 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:40:31.730 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:40:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23119610773639168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:40:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23119610773639168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:40:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23119610773639168 [0;39m ==> Parameters: 
2023-04-01 21:40:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23119610773639168 [0;39m <==    Updates: 1
2023-04-01 21:40:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23119610773639168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 21:40:35.751 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:40:51.703 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:40:53.739 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:41:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23119715622850560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:41:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23119715622850560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:41:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23119715622850560 [0;39m ==> Parameters: 
2023-04-01 21:41:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23119715622850560 [0;39m <==    Updates: 0
2023-04-01 21:41:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23119715622850560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 21:41:01.489 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:41:01.727 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:41:03.520 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:41:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23119736632119296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:41:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23119736632119296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:41:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23119736632119296 [0;39m ==> Parameters: 
2023-04-01 21:41:05.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23119736632119296 [0;39m <==    Updates: 1
2023-04-01 21:41:05.025 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23119736632119296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 21:41:17.826 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:41:29.453 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:41:31.489 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:41:31.721 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:41:33.526 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:41:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23119862431879168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:41:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23119862431879168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:41:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23119862431879168 [0;39m ==> Parameters: 
2023-04-01 21:41:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23119862431879168 [0;39m <==    Updates: 1
2023-04-01 21:41:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23119862431879168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 21:41:39.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:41:41.901 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:41:59.459 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:42:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23119967323033600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:42:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23119967323033600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:42:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23119967323033600 [0;39m ==> Parameters: 
2023-04-01 21:42:00.027 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23119967323033600 [0;39m <==    Updates: 0
2023-04-01 21:42:00.027 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23119967323033600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 21:42:01.490 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:42:01.723 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:42:03.529 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:42:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23119988265193472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:42:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23119988265193472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:42:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23119988265193472 [0;39m ==> Parameters: 
2023-04-01 21:42:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23119988265193472 [0;39m <==    Updates: 1
2023-04-01 21:42:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23119988265193472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 21:42:07.591 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:42:29.454 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:42:31.724 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:42:33.524 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:42:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23120114081730560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:42:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23120114081730560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:42:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23120114081730560 [0;39m ==> Parameters: 
2023-04-01 21:42:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23120114081730560 [0;39m <==    Updates: 1
2023-04-01 21:42:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23120114081730560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 21:42:35.560 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:42:57.605 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:42:59.645 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:43:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23120218922553344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:43:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23120218922553344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:43:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23120218922553344 [0;39m ==> Parameters: 
2023-04-01 21:43:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23120218922553344 [0;39m <==    Updates: 0
2023-04-01 21:43:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23120218922553344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 21:43:01.692 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:43:01.739 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:43:03.733 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:43:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23120239956987904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:43:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23120239956987904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:43:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23120239956987904 [0;39m ==> Parameters: 
2023-04-01 21:43:05.026 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23120239956987904 [0;39m <==    Updates: 1
2023-04-01 21:43:05.027 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23120239956987904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 21:43:05.775 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:43:23.922 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:43:29.500 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:43:31.723 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:43:33.577 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:43:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23120365748359168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:43:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23120365748359168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:43:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23120365748359168 [0;39m ==> Parameters: 
2023-04-01 21:43:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23120365748359168 [0;39m <==    Updates: 1
2023-04-01 21:43:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23120365748359168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 21:43:45.990 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:43:48.029 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:44:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23120470626930688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:44:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23120470626930688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:44:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23120470626930688 [0;39m ==> Parameters: 
2023-04-01 21:44:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23120470626930688 [0;39m <==    Updates: 0
2023-04-01 21:44:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23120470626930688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 21:44:01.724 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:44:04.337 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:44:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23120491611033600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:44:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23120491611033600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:44:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23120491611033600 [0;39m ==> Parameters: 
2023-04-01 21:44:05.026 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23120491611033600 [0;39m <==    Updates: 1
2023-04-01 21:44:05.026 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23120491611033600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 21:44:12.116 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:44:31.482 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:44:31.713 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:44:33.514 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:44:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23120617410793472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:44:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23120617410793472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:44:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23120617410793472 [0;39m ==> Parameters: 
2023-04-01 21:44:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23120617410793472 [0;39m <==    Updates: 1
2023-04-01 21:44:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23120617410793472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 21:44:37.580 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:44:59.473 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:45:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23120722268393472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:45:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23120722268393472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:45:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23120722268393472 [0;39m ==> Parameters: 
2023-04-01 21:45:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23120722268393472 [0;39m <==    Updates: 0
2023-04-01 21:45:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23120722268393472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 21:45:01.726 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:45:03.544 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:45:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23120743248302080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:45:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23120743248302080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:45:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23120743248302080 [0;39m ==> Parameters: 
2023-04-01 21:45:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23120743248302080 [0;39m <==    Updates: 1
2023-04-01 21:45:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23120743248302080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 21:45:05.583 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:45:27.621 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:45:29.666 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:45:31.711 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:45:31.739 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:45:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23120869043867648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:45:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23120869043867648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:45:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23120869043867648 [0;39m ==> Parameters: 
2023-04-01 21:45:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23120869043867648 [0;39m <==    Updates: 1
2023-04-01 21:45:35.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23120869043867648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 21:45:35.795 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:45:52.273 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:45:54.309 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:46:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23120973922439168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:46:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23120973922439168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:46:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23120973922439168 [0;39m ==> Parameters: 
2023-04-01 21:46:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23120973922439168 [0;39m <==    Updates: 0
2023-04-01 21:46:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23120973922439168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 21:46:00.071 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:46:01.724 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:46:04.574 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:46:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23120994881376256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:46:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23120994881376256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:46:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23120994881376256 [0;39m ==> Parameters: 
2023-04-01 21:46:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23120994881376256 [0;39m <==    Updates: 1
2023-04-01 21:46:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23120994881376256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 21:46:16.348 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:46:18.391 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:46:31.714 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:46:33.584 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:46:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23121120714690560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:46:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23121120714690560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:46:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23121120714690560 [0;39m ==> Parameters: 
2023-04-01 21:46:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23121120714690560 [0;39m <==    Updates: 1
2023-04-01 21:46:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23121120714690560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 21:46:40.460 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:46:42.511 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:47:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23121225563901952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:47:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23121225563901952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:47:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23121225563901952 [0;39m ==> Parameters: 
2023-04-01 21:47:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23121225563901952 [0;39m <==    Updates: 0
2023-04-01 21:47:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23121225563901952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 21:47:01.730 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:47:02.025 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:47:04.390 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:47:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23121246560587776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:47:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23121246560587776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:47:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23121246560587776 [0;39m ==> Parameters: 
2023-04-01 21:47:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23121246560587776 [0;39m <==    Updates: 1
2023-04-01 21:47:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23121246560587776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 21:47:06.430 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:47:08.472 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:47:29.467 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:47:31.500 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:47:31.719 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:47:33.540 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:47:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23121372377124864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:47:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23121372377124864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:47:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23121372377124864 [0;39m ==> Parameters: 
2023-04-01 21:47:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23121372377124864 [0;39m <==    Updates: 1
2023-04-01 21:47:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23121372377124864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 21:47:35.579 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:47:58.123 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:48:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23121477259890688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:48:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23121477259890688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:48:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23121477259890688 [0;39m ==> Parameters: 
2023-04-01 21:48:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23121477259890688 [0;39m <==    Updates: 0
2023-04-01 21:48:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23121477259890688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-04-01 21:48:00.261 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:48:01.738 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:48:02.310 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:48:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23121498197856256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:48:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23121498197856256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:48:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23121498197856256 [0;39m ==> Parameters: 
2023-04-01 21:48:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23121498197856256 [0;39m <==    Updates: 1
2023-04-01 21:48:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23121498197856256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 21:48:06.401 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:48:22.299 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:48:24.337 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:48:29.455 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:48:31.490 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:48:31.706 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:48:33.526 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:48:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23121624039559168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:48:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23121624039559168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:48:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23121624039559168 [0;39m ==> Parameters: 
2023-04-01 21:48:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23121624039559168 [0;39m <==    Updates: 1
2023-04-01 21:48:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23121624039559168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 21:48:46.391 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:48:48.426 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:48:59.465 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:49:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23121728884576256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:49:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23121728884576256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:49:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23121728884576256 [0;39m ==> Parameters: 
2023-04-01 21:49:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23121728884576256 [0;39m <==    Updates: 0
2023-04-01 21:49:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23121728884576256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-04-01 21:49:01.717 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:49:03.537 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:49:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23121749902233600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:49:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23121749902233600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:49:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23121749902233600 [0;39m ==> Parameters: 
2023-04-01 21:49:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23121749902233600 [0;39m <==    Updates: 1
2023-04-01 21:49:05.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23121749902233600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 21:49:10.470 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:49:12.506 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:49:29.460 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:49:31.492 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:49:31.724 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:49:33.530 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:49:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23121875697799168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:49:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23121875697799168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:49:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23121875697799168 [0;39m ==> Parameters: 
2023-04-01 21:49:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23121875697799168 [0;39m <==    Updates: 1
2023-04-01 21:49:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23121875697799168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-04-01 21:49:37.594 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:50:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23121980576370688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:50:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23121980576370688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:50:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23121980576370688 [0;39m ==> Parameters: 
2023-04-01 21:50:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23121980576370688 [0;39m <==    Updates: 0
2023-04-01 21:50:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23121980576370688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 21:50:01.724 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:50:03.533 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:50:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23122001556279296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:50:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23122001556279296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:50:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23122001556279296 [0;39m ==> Parameters: 
2023-04-01 21:50:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23122001556279296 [0;39m <==    Updates: 1
2023-04-01 21:50:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23122001556279296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 21:50:05.569 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:50:29.641 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:50:31.727 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:50:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23122127377010688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:50:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23122127377010688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:50:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23122127377010688 [0;39m ==> Parameters: 
2023-04-01 21:50:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23122127377010688 [0;39m <==    Updates: 1
2023-04-01 21:50:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23122127377010688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-04-01 21:50:35.754 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:50:53.724 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:50:59.469 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:51:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23122232217833472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:51:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23122232217833472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:51:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23122232217833472 [0;39m ==> Parameters: 
2023-04-01 21:51:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23122232217833472 [0;39m <==    Updates: 0
2023-04-01 21:51:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23122232217833472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 21:51:01.503 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:51:01.719 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:51:03.539 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:51:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23122253185159168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:51:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23122253185159168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:51:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23122253185159168 [0;39m ==> Parameters: 
2023-04-01 21:51:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23122253185159168 [0;39m <==    Updates: 1
2023-04-01 21:51:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23122253185159168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-04-01 21:51:16.462 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:51:18.870 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:51:32.055 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:51:34.454 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:51:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23122379001696256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:51:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23122379001696256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:51:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23122379001696256 [0;39m ==> Parameters: 
2023-04-01 21:51:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23122379001696256 [0;39m <==    Updates: 1
2023-04-01 21:51:35.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23122379001696256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 21:51:40.926 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:51:42.958 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:51:59.455 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:52:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23122483855101952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:52:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23122483855101952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:52:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23122483855101952 [0;39m ==> Parameters: 
2023-04-01 21:52:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23122483855101952 [0;39m <==    Updates: 0
2023-04-01 21:52:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23122483855101952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-04-01 21:52:01.499 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:52:01.733 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:52:03.534 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:52:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23122504868564992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:52:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23122504868564992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:52:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23122504868564992 [0;39m ==> Parameters: 
2023-04-01 21:52:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23122504868564992 [0;39m <==    Updates: 1
2023-04-01 21:52:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23122504868564992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-04-01 21:52:07.628 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:52:32.146 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:52:34.393 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:52:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23122630659936256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:52:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23122630659936256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:52:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23122630659936256 [0;39m ==> Parameters: 
2023-04-01 21:52:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23122630659936256 [0;39m <==    Updates: 1
2023-04-01 21:52:35.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23122630659936256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 21:52:55.982 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:52:58.186 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:53:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23122735517536256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:53:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23122735517536256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:53:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23122735517536256 [0;39m ==> Parameters: 
2023-04-01 21:53:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23122735517536256 [0;39m <==    Updates: 0
2023-04-01 21:53:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23122735517536256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 21:53:01.981 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:53:02.688 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:53:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23122756514222080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:53:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23122756514222080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:53:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23122756514222080 [0;39m ==> Parameters: 
2023-04-01 21:53:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23122756514222080 [0;39m <==    Updates: 1
2023-04-01 21:53:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23122756514222080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 21:53:05.181 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:53:22.835 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:53:31.911 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:53:32.035 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:53:33.966 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:53:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23122882318176256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:53:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23122882318176256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:53:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23122882318176256 [0;39m ==> Parameters: 
2023-04-01 21:53:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23122882318176256 [0;39m <==    Updates: 1
2023-04-01 21:53:35.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23122882318176256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 21:53:44.905 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:53:46.964 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:53:59.638 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:54:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23122987221913600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:54:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23122987221913600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:54:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23122987221913600 [0;39m ==> Parameters: 
2023-04-01 21:54:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23122987221913600 [0;39m <==    Updates: 0
2023-04-01 21:54:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23122987221913600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-04-01 21:54:01.958 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:54:04.153 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:54:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23123008159879168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:54:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23123008159879168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:54:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23123008159879168 [0;39m ==> Parameters: 
2023-04-01 21:54:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23123008159879168 [0;39m <==    Updates: 1
2023-04-01 21:54:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23123008159879168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-04-01 21:54:11.036 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:54:31.652 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:54:31.745 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:54:33.683 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:54:35.040 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23123134127411200 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:54:35.076 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23123134127411200 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:54:35.076 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23123134127411200 [0;39m ==> Parameters: 
2023-04-01 21:54:35.082 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23123134127411200 [0;39m <==    Updates: 1
2023-04-01 21:54:35.082 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23123134127411200 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š19æ¯«ç§’
2023-04-01 21:54:38.024 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:55:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m23123238867570688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-04-01 21:55:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23123238867570688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-04-01 21:55:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23123238867570688 [0;39m ==> Parameters: 
2023-04-01 21:55:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m23123238867570688 [0;39m <==    Updates: 0
2023-04-01 21:55:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m23123238867570688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-04-01 21:55:01.828 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:55:04.123 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-04-01 21:55:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m23123259809730560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-04-01 21:55:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23123259809730560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-04-01 21:55:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23123259809730560 [0;39m ==> Parameters: 
2023-04-01 21:55:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m23123259809730560 [0;39m <==    Updates: 1
2023-04-01 21:55:05.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m23123259809730560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
