2023-03-05 02:01:54.516 INFO  com.jiawa.wiki.WikiApplication             :55   [32m                  [0;39m Starting WikiApplication using Java 1.8.0_271 on LAPTOP-TLCI2GAA with PID 28644 (D:\work\jiawawiki\target\classes started by k in D:\work\jiawawiki)
2023-03-05 02:01:54.521 INFO  com.jiawa.wiki.WikiApplication             :660  [32m                  [0;39m No active profile set, falling back to default profiles: default
2023-03-05 02:01:54.560 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.1.6.Final
2023-03-05 02:01:54.594 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-03-05 02:01:54.594 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-03-05 02:01:55.433 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :250  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-05 02:01:55.435 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :128  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-03-05 02:01:55.451 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :188  [32m                  [0;39m Finished Spring Data repository scanning in 4 ms. Found 0 Redis repository interfaces.
2023-03-05 02:01:55.715 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration$$EnhancerBySpringCGLIB$$895405f4] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:01:55.727 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:01:56.494 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'defaultMQProducer' of type [org.apache.rocketmq.client.producer.DefaultMQProducer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:01:56.496 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonConfig' of type [com.jiawa.wiki.config.JacksonConfig$$EnhancerBySpringCGLIB$$2b8e7af5] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:01:56.496 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:01:56.498 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:01:56.501 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'spring.jackson-org.springframework.boot.autoconfigure.jackson.JacksonProperties' of type [org.springframework.boot.autoconfigure.jackson.JacksonProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:01:56.502 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'standardJacksonObjectMapperBuilderCustomizer' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration$StandardJackson2ObjectMapperBuilderCustomizer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:01:56.504 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:01:56.506 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'parameterNamesModule' of type [com.fasterxml.jackson.module.paramnames.ParameterNamesModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:01:56.507 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:01:56.522 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jsonComponentModule' of type [org.springframework.boot.jackson.JsonComponentModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:01:56.522 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.data.web.config.SpringDataJacksonConfiguration' of type [org.springframework.data.web.config.SpringDataJacksonConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:01:56.525 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonGeoModule' of type [org.springframework.data.geo.GeoModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:01:56.527 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapperBuilder' of type [org.springframework.http.converter.json.Jackson2ObjectMapperBuilder] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:01:56.541 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapper' of type [com.fasterxml.jackson.databind.ObjectMapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:01:57.975 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketMQTemplate' of type [org.apache.rocketmq.spring.core.RocketMQTemplate] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:01:57.976 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'transactionHandlerRegistry' of type [org.apache.rocketmq.spring.config.TransactionHandlerRegistry] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:01:58.527 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2023-03-05 02:01:58.534 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2023-03-05 02:01:58.536 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2023-03-05 02:01:58.536 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.39]
2023-03-05 02:01:58.623 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2023-03-05 02:01:58.623 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :289  [32m                  [0;39m Root WebApplicationContext: initialization completed in 4027 ms
2023-03-05 02:01:59.527 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2023-03-05 02:01:59.920 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2023-03-05 02:01:59.974 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2023-03-05 02:02:00.185 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:02:00.636 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:02:02.650 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:02:04.676 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:02:04.677 INFO  o.a.r.s.support.DefaultRocketMQListenerContainer  :243  [32m                  [0;39m running container: DefaultRocketMQListenerContainer{consumerGroup='default', nameServer='127.0.0.1:9876', topic='VOTE_TOPIC', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
2023-03-05 02:02:04.678 INFO  o.a.r.s.a.ListenerContainerConfiguration          :107  [32m                  [0;39m Register the listener to container, listenerBeanName:voteTopicConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-03-05 02:02:04.689 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2023-03-05 02:02:04.700 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2023-03-05 02:02:04.734 INFO  com.jiawa.wiki.WikiApplication             :61   [32m                  [0;39m Started WikiApplication in 10.808 seconds (JVM running for 12.351)
2023-03-05 02:02:04.737 INFO  com.jiawa.wiki.WikiApplication             :26   [32m                  [0;39m å¯åŠ¨æˆåŠŸï¼ï¼
2023-03-05 02:02:04.738 INFO  com.jiawa.wiki.WikiApplication             :27   [32m                  [0;39m åœ°å€: 	http://127.0.0.1:8880
2023-03-05 02:02:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13038559200153600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:02:05.036 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m13038559200153600 [0;39m HikariPool-1 - Starting...
2023-03-05 02:02:05.213 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m13038559200153600 [0;39m HikariPool-1 - Start completed.
2023-03-05 02:02:05.219 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13038559200153600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:02:05.238 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13038559200153600 [0;39m ==> Parameters:
2023-03-05 02:02:05.245 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13038559200153600 [0;39m <==    Updates: 1
2023-03-05 02:02:05.247 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13038559200153600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š231æ¯«ç§’
2023-03-05 02:02:09.041 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:02:29.455 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:02:30.032 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:02:33.527 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:02:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13038685012496384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:02:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13038685012496384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:02:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13038685012496384 [0;39m ==> Parameters:
2023-03-05 02:02:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13038685012496384 [0;39m <==    Updates: 1
2023-03-05 02:02:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13038685012496384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 02:02:35.562 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:02:57.601 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:02:58.610 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-03-05 02:02:58.610 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2023-03-05 02:02:58.611 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 1 ms
2023-03-05 02:02:58.666 INFO  com.jiawa.wiki.websocket.WebSocketServer          :32   [32m                  [0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šeM7fl4axHGï¼Œsession idï¼š0ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2023-03-05 02:02:58.713 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13038784413306880 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:02:58.713 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13038784413306882 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:02:58.713 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13038784413306881 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:02:58.715 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13038784413306880 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-03-05 02:02:58.715 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13038784413306881 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-05 02:02:58.715 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13038784413306882 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-03-05 02:02:58.715 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13038784413306882 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-03-05 02:02:58.715 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13038784413306880 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-03-05 02:02:58.715 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13038784413306881 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-05 02:02:58.715 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13038784413306882 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:02:58.715 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13038784413306881 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:02:58.716 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13038784413306880 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:02:58.790 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13038784413306880 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-05 02:02:58.790 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13038784413306882 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-05 02:02:58.790 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13038784413306881 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-05 02:02:58.802 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13038784413306882 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-05 02:02:58.802 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13038784413306880 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-05 02:02:58.802 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13038784413306882 [0;39m ==> Parameters:
2023-03-05 02:02:58.802 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13038784413306880 [0;39m ==> Parameters:
2023-03-05 02:02:58.824 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13038784413306880 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-03-05 02:02:58.824 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13038784413306882 [0;39m <==      Total: 0
2023-03-05 02:02:58.825 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13038784413306880 [0;39m <==        Row: 2023-03-02, 0, 0
2023-03-05 02:02:58.827 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13038784413306880 [0;39m <==      Total: 1
2023-03-05 02:02:58.829 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13038784413306881 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-05 02:02:58.830 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13038784413306881 [0;39m ==> Parameters:
2023-03-05 02:02:58.832 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038784413306881 [0;39m <==    Columns: id, parent, name, sort
2023-03-05 02:02:58.832 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038784413306881 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-05 02:02:58.833 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038784413306881 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-05 02:02:58.833 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038784413306881 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-05 02:02:58.833 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038784413306881 [0;39m <==        Row: 200, 0, Java, 200
2023-03-05 02:02:58.834 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038784413306881 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-05 02:02:58.834 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038784413306881 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-05 02:02:58.834 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038784413306881 [0;39m <==        Row: 300, 0, Python, 300
2023-03-05 02:02:58.835 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038784413306881 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-05 02:02:58.835 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038784413306881 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-05 02:02:58.836 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038784413306881 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-05 02:02:58.836 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038784413306881 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-05 02:02:58.837 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038784413306881 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-05 02:02:58.837 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038784413306881 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-05 02:02:58.838 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038784413306881 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-05 02:02:58.838 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038784413306881 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-05 02:02:58.838 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13038784413306881 [0;39m <==      Total: 15
2023-03-05 02:02:58.849 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13038784413306882 [0;39m è¿”å›žç»“æžœ: {"content":[],"success":true}
2023-03-05 02:02:58.849 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13038784413306882 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š139 ms -------------
2023-03-05 02:02:58.853 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13038784413306881 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-05 02:02:58.853 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13038784413306880 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2023-03-05 02:02:58.854 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13038784413306880 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š144 ms -------------
2023-03-05 02:02:58.853 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13038784413306881 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š143 ms -------------
2023-03-05 02:02:59.634 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:03:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13038789861707776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 02:03:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13038789861707776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 02:03:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13038789861707776 [0;39m ==> Parameters:
2023-03-05 02:03:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13038789861707776 [0;39m <==    Updates: 5
2023-03-05 02:03:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13038789861707776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 02:03:00.040 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:03:03.321 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13038803753242624 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:03:03.322 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13038803753242624 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:03:03.322 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13038803753242624 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:03:03.322 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13038803753242624 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:03:03.323 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13038803753242624 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":101,"page":1,"size":1000}]
2023-03-05 02:03:03.362 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038803753242624 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-05 02:03:03.363 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038803753242624 [0;39m ==> Parameters: 101(Long)
2023-03-05 02:03:03.363 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038803753242624 [0;39m <==    Columns: count(0)
2023-03-05 02:03:03.365 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038803753242624 [0;39m <==        Row: 0
2023-03-05 02:03:03.365 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038803753242624 [0;39m <==      Total: 1
2023-03-05 02:03:03.366 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13038803753242624 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-05 02:03:03.366 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13038803753242624 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-05 02:03:03.369 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13038803753242624 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-05 02:03:03.369 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13038803753242624 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š48 ms -------------
2023-03-05 02:03:03.697 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:03:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13038810824839168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:03:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13038810824839168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:03:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13038810824839168 [0;39m ==> Parameters:
2023-03-05 02:03:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13038810824839168 [0;39m <==    Updates: 1
2023-03-05 02:03:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13038810824839168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 02:03:05.755 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:03:06.664 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13038817774800896 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:03:06.664 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13038817774800896 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/user/login POST
2023-03-05 02:03:06.665 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13038817774800896 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.UserController.login
2023-03-05 02:03:06.665 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13038817774800896 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:03:06.666 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13038817774800896 [0;39m è¯·æ±‚å‚æ•°: [{"loginName":"test"}]
2023-03-05 02:03:06.672 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m13038817774800896 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2023-03-05 02:03:06.673 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m13038817774800896 [0;39m ==> Parameters: test(String)
2023-03-05 02:03:06.676 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m13038817774800896 [0;39m <==    Columns: id, login_name, name, password
2023-03-05 02:03:06.676 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m13038817774800896 [0;39m <==        Row: 1, test, æµ‹è¯•, e70e2222a9d67c4f2eae107533359aa4
2023-03-05 02:03:06.676 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m13038817774800896 [0;39m <==      Total: 1
2023-03-05 02:03:06.680 INFO  com.jiawa.wiki.controller.UserController          :77   [32m13038817774800896 [0;39m ç”Ÿæˆå•ç‚¹ç™»å½•tokenï¼š13038817841909760ï¼Œå¹¶æ”¾å…¥redisä¸­
2023-03-05 02:03:06.856 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13038817774800896 [0;39m è¿”å›žç»“æžœ: {"content":{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"13038817841909760"},"success":true}
2023-03-05 02:03:06.856 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13038817774800896 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š192 ms -------------
2023-03-05 02:03:10.268 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13038832891072512 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:03:10.268 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13038832891072512 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:03:10.268 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13038832891072512 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:03:10.268 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13038832891072512 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:03:10.269 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13038832891072512 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":101,"page":1,"size":1000}]
2023-03-05 02:03:10.272 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038832891072512 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-05 02:03:10.273 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038832891072512 [0;39m ==> Parameters: 101(Long)
2023-03-05 02:03:10.274 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038832891072512 [0;39m <==    Columns: count(0)
2023-03-05 02:03:10.274 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038832891072512 [0;39m <==        Row: 0
2023-03-05 02:03:10.274 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038832891072512 [0;39m <==      Total: 1
2023-03-05 02:03:10.275 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13038832891072512 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-05 02:03:10.275 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13038832891072512 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-05 02:03:10.275 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13038832891072512 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-05 02:03:10.275 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13038832891072512 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-03-05 02:03:11.099 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13038836376539136 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:03:11.100 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13038836376539136 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:03:11.100 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13038836376539136 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:03:11.100 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13038836376539136 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:03:11.101 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13038836376539136 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":102,"page":1,"size":1000}]
2023-03-05 02:03:11.103 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038836376539136 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-05 02:03:11.103 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038836376539136 [0;39m ==> Parameters: 102(Long)
2023-03-05 02:03:11.104 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038836376539136 [0;39m <==    Columns: count(0)
2023-03-05 02:03:11.104 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038836376539136 [0;39m <==        Row: 0
2023-03-05 02:03:11.104 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038836376539136 [0;39m <==      Total: 1
2023-03-05 02:03:11.104 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13038836376539136 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-05 02:03:11.105 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13038836376539136 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-05 02:03:11.105 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13038836376539136 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-05 02:03:11.105 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13038836376539136 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-03-05 02:03:12.494 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m13038784413306882 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-05 02:03:12.495 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m13038784413306882 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š0 ms -------------
2023-03-05 02:03:12.498 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m13038784413306881 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-05 02:03:12.498 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m13038784413306881 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/list
2023-03-05 02:03:12.498 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m13038784413306881 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š13038817841909760
2023-03-05 02:03:12.500 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m13038784413306881 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"13038817841909760"}
2023-03-05 02:03:12.520 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13038842336645120 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:03:12.520 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13038842336645120 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/user/list GET
2023-03-05 02:03:12.520 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13038842336645120 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.UserController.list
2023-03-05 02:03:12.521 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13038842336645120 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:03:12.522 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13038842336645120 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-03-05 02:03:12.524 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m13038842336645120 [0;39m ==>  Preparing: SELECT count(0) FROM user
2023-03-05 02:03:12.524 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m13038842336645120 [0;39m ==> Parameters:
2023-03-05 02:03:12.525 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m13038842336645120 [0;39m <==    Columns: count(0)
2023-03-05 02:03:12.525 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m13038842336645120 [0;39m <==        Row: 1
2023-03-05 02:03:12.525 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m13038842336645120 [0;39m <==      Total: 1
2023-03-05 02:03:12.527 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m13038842336645120 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2023-03-05 02:03:12.527 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m13038842336645120 [0;39m ==> Parameters: 10(Integer)
2023-03-05 02:03:12.528 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m13038842336645120 [0;39m <==    Columns: id, login_name, name, password
2023-03-05 02:03:12.528 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m13038842336645120 [0;39m <==        Row: 1, test, æµ‹è¯•, e70e2222a9d67c4f2eae107533359aa4
2023-03-05 02:03:12.528 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m13038842336645120 [0;39m <==      Total: 1
2023-03-05 02:03:12.528 INFO  com.jiawa.wiki.service.UserService                :49   [32m13038842336645120 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-05 02:03:12.528 INFO  com.jiawa.wiki.service.UserService                :50   [32m13038842336645120 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-05 02:03:12.533 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13038842336645120 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"id":1,"loginName":"test","name":"æµ‹è¯•"}],"total":1},"success":true}
2023-03-05 02:03:12.533 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13038842336645120 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š13 ms -------------
2023-03-05 02:03:12.536 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m13038842336645120 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š38 ms -------------
2023-03-05 02:03:13.381 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13038845947940864 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:03:13.381 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13038845947940864 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-05 02:03:13.381 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13038845947940864 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-05 02:03:13.381 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13038845947940864 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:03:13.381 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13038845947940864 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-05 02:03:13.383 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13038845947940864 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-05 02:03:13.383 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13038845947940864 [0;39m ==> Parameters:
2023-03-05 02:03:13.384 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038845947940864 [0;39m <==    Columns: id, parent, name, sort
2023-03-05 02:03:13.384 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038845947940864 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-05 02:03:13.385 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038845947940864 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-05 02:03:13.385 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038845947940864 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-05 02:03:13.385 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038845947940864 [0;39m <==        Row: 200, 0, Java, 200
2023-03-05 02:03:13.386 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038845947940864 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-05 02:03:13.386 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038845947940864 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-05 02:03:13.386 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038845947940864 [0;39m <==        Row: 300, 0, Python, 300
2023-03-05 02:03:13.387 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038845947940864 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-05 02:03:13.387 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038845947940864 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-05 02:03:13.387 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038845947940864 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-05 02:03:13.387 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038845947940864 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-05 02:03:13.388 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038845947940864 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-05 02:03:13.388 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038845947940864 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-05 02:03:13.388 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038845947940864 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-05 02:03:13.388 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038845947940864 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-05 02:03:13.389 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13038845947940864 [0;39m <==      Total: 15
2023-03-05 02:03:13.390 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13038845947940864 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-05 02:03:13.390 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13038845947940864 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2023-03-05 02:03:13.404 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13038846044409856 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:03:13.405 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13038846044409856 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:03:13.405 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13038846044409856 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:03:13.405 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13038846044409856 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:03:13.405 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13038846044409856 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-03-05 02:03:13.406 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038846044409856 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-03-05 02:03:13.406 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038846044409856 [0;39m ==> Parameters:
2023-03-05 02:03:13.407 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038846044409856 [0;39m <==    Columns: count(0)
2023-03-05 02:03:13.407 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038846044409856 [0;39m <==        Row: 5
2023-03-05 02:03:13.407 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038846044409856 [0;39m <==      Total: 1
2023-03-05 02:03:13.408 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13038846044409856 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-03-05 02:03:13.409 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13038846044409856 [0;39m ==> Parameters: 10(Integer)
2023-03-05 02:03:13.411 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13038846044409856 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-05 02:03:13.412 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13038846044409856 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 0, 0
2023-03-05 02:03:13.412 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13038846044409856 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-05 02:03:13.413 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13038846044409856 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-05 02:03:13.413 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13038846044409856 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-05 02:03:13.413 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13038846044409856 [0;39m <==        Row: 5, Oracle å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-05 02:03:13.413 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13038846044409856 [0;39m <==      Total: 5
2023-03-05 02:03:13.414 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13038846044409856 [0;39m æ€»è¡Œæ•°ï¼š5
2023-03-05 02:03:13.414 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13038846044409856 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-05 02:03:13.421 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13038846044409856 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":5,"name":"Oracle å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-03-05 02:03:13.421 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13038846044409856 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š17 ms -------------
2023-03-05 02:03:15.551 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13038855049580544 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:03:15.552 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13038855049580544 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-05 02:03:15.552 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13038855049580544 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-05 02:03:15.552 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13038855049580544 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:03:15.552 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13038855049580544 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-05 02:03:15.554 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13038855049580544 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-05 02:03:15.555 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13038855049580544 [0;39m ==> Parameters:
2023-03-05 02:03:15.556 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038855049580544 [0;39m <==    Columns: id, parent, name, sort
2023-03-05 02:03:15.556 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038855049580544 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-05 02:03:15.556 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038855049580544 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-05 02:03:15.557 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038855049580544 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-05 02:03:15.557 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038855049580544 [0;39m <==        Row: 200, 0, Java, 200
2023-03-05 02:03:15.557 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038855049580544 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-05 02:03:15.557 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038855049580544 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-05 02:03:15.558 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038855049580544 [0;39m <==        Row: 300, 0, Python, 300
2023-03-05 02:03:15.558 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038855049580544 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-05 02:03:15.558 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038855049580544 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-05 02:03:15.558 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038855049580544 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-05 02:03:15.559 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038855049580544 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-05 02:03:15.559 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038855049580544 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-05 02:03:15.559 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038855049580544 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-05 02:03:15.559 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038855049580544 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-05 02:03:15.560 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038855049580544 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-05 02:03:15.560 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13038855049580544 [0;39m <==      Total: 15
2023-03-05 02:03:15.561 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13038855049580544 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-05 02:03:15.562 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13038855049580544 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š11 ms -------------
2023-03-05 02:03:17.681 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13038863983448064 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:03:17.681 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13038863983448065 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:03:17.681 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13038863983448064 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-03-05 02:03:17.681 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13038863983448065 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-05 02:03:17.681 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13038863983448064 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-03-05 02:03:17.682 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13038863983448065 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-05 02:03:17.682 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13038863983448065 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:03:17.682 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13038863983448064 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:03:17.682 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13038863983448065 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-05 02:03:17.682 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13038863983448064 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-05 02:03:17.682 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13038863987642368 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:03:17.682 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13038863987642368 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-03-05 02:03:17.683 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13038863987642368 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-03-05 02:03:17.683 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13038863987642368 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:03:17.683 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13038863983448065 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-05 02:03:17.683 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13038863987642368 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-05 02:03:17.683 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13038863983448065 [0;39m ==> Parameters:
2023-03-05 02:03:17.683 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13038863987642368 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-05 02:03:17.684 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13038863987642368 [0;39m ==> Parameters:
2023-03-05 02:03:17.684 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038863983448065 [0;39m <==    Columns: id, parent, name, sort
2023-03-05 02:03:17.684 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038863983448065 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-05 02:03:17.684 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038863983448065 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-05 02:03:17.685 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13038863987642368 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-03-05 02:03:17.685 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13038863983448064 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-05 02:03:17.685 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038863983448065 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-05 02:03:17.685 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13038863987642368 [0;39m <==        Row: 2023-03-02, 0, 0
2023-03-05 02:03:17.685 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13038863983448064 [0;39m ==> Parameters:
2023-03-05 02:03:17.685 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038863983448065 [0;39m <==        Row: 200, 0, Java, 200
2023-03-05 02:03:17.685 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038863983448065 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-05 02:03:17.685 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13038863987642368 [0;39m <==      Total: 1
2023-03-05 02:03:17.685 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038863983448065 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-05 02:03:17.686 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13038863983448064 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-03-05 02:03:17.686 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13038863987642368 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2023-03-05 02:03:17.686 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038863983448065 [0;39m <==        Row: 300, 0, Python, 300
2023-03-05 02:03:17.686 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13038863987642368 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-03-05 02:03:17.686 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13038863983448064 [0;39m <==        Row: 2023-03-05, 0, 0, 0, 0
2023-03-05 02:03:17.686 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038863983448065 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-05 02:03:17.687 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13038863983448064 [0;39m <==      Total: 1
2023-03-05 02:03:17.687 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038863983448065 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-05 02:03:17.687 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13038863983448064 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677945600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2023-03-05 02:03:17.687 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13038863983448064 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-03-05 02:03:17.688 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038863983448065 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-05 02:03:17.688 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038863983448065 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-05 02:03:17.688 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038863983448065 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-05 02:03:17.689 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038863983448065 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-05 02:03:17.689 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038863983448065 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-05 02:03:17.689 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038863983448065 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-05 02:03:17.689 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13038863983448065 [0;39m <==      Total: 15
2023-03-05 02:03:17.691 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13038863983448065 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-05 02:03:17.691 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13038863983448065 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š10 ms -------------
2023-03-05 02:03:18.711 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13038868303581184 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:03:18.711 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13038868303581184 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:03:18.711 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13038868303581184 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:03:18.711 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13038868303581184 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:03:18.712 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13038868303581184 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":101,"page":1,"size":1000}]
2023-03-05 02:03:18.714 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038868303581184 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-05 02:03:18.715 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038868303581184 [0;39m ==> Parameters: 101(Long)
2023-03-05 02:03:18.716 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038868303581184 [0;39m <==    Columns: count(0)
2023-03-05 02:03:18.716 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038868303581184 [0;39m <==        Row: 0
2023-03-05 02:03:18.717 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038868303581184 [0;39m <==      Total: 1
2023-03-05 02:03:18.717 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13038868303581184 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-05 02:03:18.717 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13038868303581184 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-05 02:03:18.717 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13038868303581184 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-05 02:03:18.717 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13038868303581184 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-03-05 02:03:19.156 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13038870165852160 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:03:19.156 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13038870165852160 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:03:19.156 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13038870165852160 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:03:19.157 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13038870165852160 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:03:19.157 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13038870165852160 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":102,"page":1,"size":1000}]
2023-03-05 02:03:19.159 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038870165852160 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-05 02:03:19.159 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038870165852160 [0;39m ==> Parameters: 102(Long)
2023-03-05 02:03:19.160 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038870165852160 [0;39m <==    Columns: count(0)
2023-03-05 02:03:19.160 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038870165852160 [0;39m <==        Row: 0
2023-03-05 02:03:19.160 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038870165852160 [0;39m <==      Total: 1
2023-03-05 02:03:19.161 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13038870165852160 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-05 02:03:19.161 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13038870165852160 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-05 02:03:19.161 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13038870165852160 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-05 02:03:19.161 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13038870165852160 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-03-05 02:03:19.591 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13038871994568704 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:03:19.591 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13038871994568704 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:03:19.591 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13038871994568704 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:03:19.592 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13038871994568704 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:03:19.592 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13038871994568704 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":201,"page":1,"size":1000}]
2023-03-05 02:03:19.595 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038871994568704 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-05 02:03:19.597 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038871994568704 [0;39m ==> Parameters: 201(Long)
2023-03-05 02:03:19.598 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038871994568704 [0;39m <==    Columns: count(0)
2023-03-05 02:03:19.598 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038871994568704 [0;39m <==        Row: 0
2023-03-05 02:03:19.598 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038871994568704 [0;39m <==      Total: 1
2023-03-05 02:03:19.598 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13038871994568704 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-05 02:03:19.599 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13038871994568704 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-05 02:03:19.599 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13038871994568704 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-05 02:03:19.599 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13038871994568704 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-03-05 02:03:19.947 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13038873487740928 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:03:19.947 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13038873487740928 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:03:19.949 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13038873487740928 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:03:19.949 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13038873487740928 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:03:19.949 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13038873487740928 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":202,"page":1,"size":1000}]
2023-03-05 02:03:19.950 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038873487740928 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-05 02:03:19.950 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038873487740928 [0;39m ==> Parameters: 202(Long)
2023-03-05 02:03:19.951 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038873487740928 [0;39m <==    Columns: count(0)
2023-03-05 02:03:19.951 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038873487740928 [0;39m <==        Row: 0
2023-03-05 02:03:19.951 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038873487740928 [0;39m <==      Total: 1
2023-03-05 02:03:19.952 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13038873487740928 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-05 02:03:19.952 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13038873487740928 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-05 02:03:19.952 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13038873487740928 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-05 02:03:19.952 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13038873487740928 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-03-05 02:03:20.686 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13038876587331584 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:03:20.686 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13038876587331584 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:03:20.686 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13038876587331584 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:03:20.686 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13038876587331584 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:03:20.686 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13038876587331584 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":301,"page":1,"size":1000}]
2023-03-05 02:03:20.688 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038876587331584 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-05 02:03:20.689 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038876587331584 [0;39m ==> Parameters: 301(Long)
2023-03-05 02:03:20.689 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038876587331584 [0;39m <==    Columns: count(0)
2023-03-05 02:03:20.689 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038876587331584 [0;39m <==        Row: 0
2023-03-05 02:03:20.690 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038876587331584 [0;39m <==      Total: 1
2023-03-05 02:03:20.690 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13038876587331584 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-05 02:03:20.690 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13038876587331584 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-05 02:03:20.690 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13038876587331584 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-05 02:03:20.690 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13038876587331584 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-03-05 02:03:21.109 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13038878361522176 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:03:21.110 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13038878361522176 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:03:21.110 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13038878361522176 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:03:21.110 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13038878361522176 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:03:21.111 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13038878361522176 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":302,"page":1,"size":1000}]
2023-03-05 02:03:21.113 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038878361522176 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-05 02:03:21.113 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038878361522176 [0;39m ==> Parameters: 302(Long)
2023-03-05 02:03:21.114 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038878361522176 [0;39m <==    Columns: count(0)
2023-03-05 02:03:21.114 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038878361522176 [0;39m <==        Row: 0
2023-03-05 02:03:21.114 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038878361522176 [0;39m <==      Total: 1
2023-03-05 02:03:21.114 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13038878361522176 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-05 02:03:21.115 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13038878361522176 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-05 02:03:21.115 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13038878361522176 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-05 02:03:21.115 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13038878361522176 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-03-05 02:03:21.490 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13038879959552000 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:03:21.490 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13038879959552000 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:03:21.490 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13038879959552000 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:03:21.490 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13038879959552000 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:03:21.490 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13038879959552000 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":401,"page":1,"size":1000}]
2023-03-05 02:03:21.491 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038879959552000 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-05 02:03:21.492 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038879959552000 [0;39m ==> Parameters: 401(Long)
2023-03-05 02:03:21.492 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038879959552000 [0;39m <==    Columns: count(0)
2023-03-05 02:03:21.493 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038879959552000 [0;39m <==        Row: 0
2023-03-05 02:03:21.493 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038879959552000 [0;39m <==      Total: 1
2023-03-05 02:03:21.493 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13038879959552000 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-05 02:03:21.493 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13038879959552000 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-05 02:03:21.494 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13038879959552000 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-05 02:03:21.494 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13038879959552000 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-03-05 02:03:21.908 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13038881712771072 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:03:21.909 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13038881712771072 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:03:21.909 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13038881712771072 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:03:21.909 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13038881712771072 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:03:21.909 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13038881712771072 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":501,"page":1,"size":1000}]
2023-03-05 02:03:21.911 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038881712771072 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-05 02:03:21.911 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038881712771072 [0;39m ==> Parameters: 501(Long)
2023-03-05 02:03:21.912 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038881712771072 [0;39m <==    Columns: count(0)
2023-03-05 02:03:21.912 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038881712771072 [0;39m <==        Row: 0
2023-03-05 02:03:21.912 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038881712771072 [0;39m <==      Total: 1
2023-03-05 02:03:21.912 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13038881712771072 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-05 02:03:21.912 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13038881712771072 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-05 02:03:21.912 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13038881712771072 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-05 02:03:21.912 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13038881712771072 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-03-05 02:03:22.249 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13038883143028736 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:03:22.249 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13038883143028736 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:03:22.249 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13038883143028736 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:03:22.249 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13038883143028736 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:03:22.250 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13038883143028736 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":502,"page":1,"size":1000}]
2023-03-05 02:03:22.252 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038883143028736 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-05 02:03:22.252 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038883143028736 [0;39m ==> Parameters: 502(Long)
2023-03-05 02:03:22.253 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038883143028736 [0;39m <==    Columns: count(0)
2023-03-05 02:03:22.253 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038883143028736 [0;39m <==        Row: 0
2023-03-05 02:03:22.253 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038883143028736 [0;39m <==      Total: 1
2023-03-05 02:03:22.253 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13038883143028736 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-05 02:03:22.253 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13038883143028736 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-05 02:03:22.253 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13038883143028736 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-05 02:03:22.253 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13038883143028736 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-03-05 02:03:22.565 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13038884468428800 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:03:22.566 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13038884468428800 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:03:22.566 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13038884468428800 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:03:22.566 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13038884468428800 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:03:22.566 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13038884468428800 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":503,"page":1,"size":1000}]
2023-03-05 02:03:22.567 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038884468428800 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-05 02:03:22.568 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038884468428800 [0;39m ==> Parameters: 503(Long)
2023-03-05 02:03:22.568 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038884468428800 [0;39m <==    Columns: count(0)
2023-03-05 02:03:22.568 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038884468428800 [0;39m <==        Row: 0
2023-03-05 02:03:22.569 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038884468428800 [0;39m <==      Total: 1
2023-03-05 02:03:22.569 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13038884468428800 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-05 02:03:22.569 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13038884468428800 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-05 02:03:22.569 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13038884468428800 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-05 02:03:22.570 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13038884468428800 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-03-05 02:03:23.309 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13038887588990976 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:03:23.310 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13038887588990976 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:03:23.310 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13038887588990976 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:03:23.310 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13038887588990976 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:03:23.310 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13038887588990976 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":101,"page":1,"size":1000}]
2023-03-05 02:03:23.311 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038887588990976 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-05 02:03:23.312 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038887588990976 [0;39m ==> Parameters: 101(Long)
2023-03-05 02:03:23.313 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038887588990976 [0;39m <==    Columns: count(0)
2023-03-05 02:03:23.313 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038887588990976 [0;39m <==        Row: 0
2023-03-05 02:03:23.313 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038887588990976 [0;39m <==      Total: 1
2023-03-05 02:03:23.314 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13038887588990976 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-05 02:03:23.314 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13038887588990976 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-05 02:03:23.314 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13038887588990976 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-05 02:03:23.314 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13038887588990976 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-03-05 02:03:23.709 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:03:24.910 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13038894304071680 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:03:24.910 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13038894304071680 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-05 02:03:24.911 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13038894304071680 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-05 02:03:24.911 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13038894304071680 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:03:24.911 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13038894304071680 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-05 02:03:24.911 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13038894304071680 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-05 02:03:24.912 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13038894304071680 [0;39m ==> Parameters:
2023-03-05 02:03:24.912 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038894304071680 [0;39m <==    Columns: id, parent, name, sort
2023-03-05 02:03:24.912 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038894304071680 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-05 02:03:24.913 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038894304071680 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-05 02:03:24.913 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038894304071680 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-05 02:03:24.913 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038894304071680 [0;39m <==        Row: 200, 0, Java, 200
2023-03-05 02:03:24.914 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038894304071680 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-05 02:03:24.914 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038894304071680 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-05 02:03:24.914 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038894304071680 [0;39m <==        Row: 300, 0, Python, 300
2023-03-05 02:03:24.914 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038894304071680 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-05 02:03:24.914 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038894304071680 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-05 02:03:24.915 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038894304071680 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-05 02:03:24.915 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038894304071680 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-05 02:03:24.915 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038894304071680 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-05 02:03:24.915 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038894304071680 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-05 02:03:24.915 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038894304071680 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-05 02:03:24.916 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13038894304071680 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-05 02:03:24.916 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13038894304071680 [0;39m <==      Total: 15
2023-03-05 02:03:24.916 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13038894304071680 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-05 02:03:24.917 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13038894304071680 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-03-05 02:03:24.930 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13038894387957760 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:03:24.931 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13038894387957760 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:03:24.931 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13038894387957760 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:03:24.931 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13038894387957760 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:03:24.931 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13038894387957760 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-03-05 02:03:24.932 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038894387957760 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-03-05 02:03:24.933 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038894387957760 [0;39m ==> Parameters:
2023-03-05 02:03:24.933 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038894387957760 [0;39m <==    Columns: count(0)
2023-03-05 02:03:24.933 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13038894387957760 [0;39m <==        Row: 5
2023-03-05 02:03:24.933 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13038894387957760 [0;39m <==      Total: 1
2023-03-05 02:03:24.933 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13038894387957760 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-03-05 02:03:24.935 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13038894387957760 [0;39m ==> Parameters: 10(Integer)
2023-03-05 02:03:24.935 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13038894387957760 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-05 02:03:24.935 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13038894387957760 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 0, 0
2023-03-05 02:03:24.935 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13038894387957760 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-05 02:03:24.935 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13038894387957760 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-05 02:03:24.935 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13038894387957760 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-05 02:03:24.936 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13038894387957760 [0;39m <==        Row: 5, Oracle å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-05 02:03:24.936 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13038894387957760 [0;39m <==      Total: 5
2023-03-05 02:03:24.936 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13038894387957760 [0;39m æ€»è¡Œæ•°ï¼š5
2023-03-05 02:03:24.936 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13038894387957760 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-05 02:03:24.936 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13038894387957760 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":5,"name":"Oracle å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-03-05 02:03:24.937 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13038894387957760 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-03-05 02:03:30.016 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:03:33.555 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:03:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13038936653959168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:03:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13038936653959168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:03:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13038936653959168 [0;39m ==> Parameters:
2023-03-05 02:03:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13038936653959168 [0;39m <==    Updates: 1
2023-03-05 02:03:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13038936653959168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-05 02:03:45.748 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:03:47.786 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:04:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13039041532530688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 02:04:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13039041532530688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 02:04:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13039041532530688 [0;39m ==> Parameters:
2023-03-05 02:04:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13039041532530688 [0;39m <==    Updates: 0
2023-03-05 02:04:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13039041532530688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-05 02:04:00.029 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:04:03.648 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:04:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13039062495662080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:04:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13039062495662080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:04:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13039062495662080 [0;39m ==> Parameters:
2023-03-05 02:04:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13039062495662080 [0;39m <==    Updates: 1
2023-03-05 02:04:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13039062495662080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 02:04:11.866 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:04:21.553 INFO  com.jiawa.wiki.websocket.WebSocketServer          :32   [32m13038881712771072 [0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šDLrnV7K6plï¼Œsession idï¼š1ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š2
2023-03-05 02:04:21.712 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039132548927488 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:04:21.712 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039132548927488 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-03-05 02:04:21.713 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039132548927488 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-03-05 02:04:21.713 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039132548927488 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:04:21.712 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039132548927489 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:04:21.713 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039132548927488 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-05 02:04:21.713 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039132548927489 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-03-05 02:04:21.713 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039132548927489 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-03-05 02:04:21.713 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039132548927489 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:04:21.714 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039132548927489 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-05 02:04:21.714 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13039132548927488 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-05 02:04:21.714 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13039132548927489 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-05 02:04:21.714 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13039132548927488 [0;39m ==> Parameters:
2023-03-05 02:04:21.715 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13039132548927489 [0;39m ==> Parameters:
2023-03-05 02:04:21.715 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13039132548927488 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-03-05 02:04:21.716 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13039132548927488 [0;39m <==        Row: 2023-03-05, 0, 0, 0, 0
2023-03-05 02:04:21.716 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13039132548927488 [0;39m <==      Total: 1
2023-03-05 02:04:21.716 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039132548927488 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677945600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2023-03-05 02:04:21.717 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039132548927488 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-03-05 02:04:21.717 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039132569899008 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:04:21.717 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039132569899008 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-05 02:04:21.717 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039132569899008 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-05 02:04:21.717 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039132569899008 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:04:21.718 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039132569899008 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-05 02:04:21.718 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13039132569899008 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-05 02:04:21.719 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13039132569899008 [0;39m ==> Parameters:
2023-03-05 02:04:21.720 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039132569899008 [0;39m <==    Columns: id, parent, name, sort
2023-03-05 02:04:21.720 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13039132548927489 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-03-05 02:04:21.720 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039132569899008 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-05 02:04:21.720 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13039132548927489 [0;39m <==        Row: 2023-03-02, 0, 0
2023-03-05 02:04:21.720 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039132569899008 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-05 02:04:21.720 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039132569899008 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-05 02:04:21.720 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13039132548927489 [0;39m <==      Total: 1
2023-03-05 02:04:21.721 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039132569899008 [0;39m <==        Row: 200, 0, Java, 200
2023-03-05 02:04:21.721 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039132548927489 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2023-03-05 02:04:21.721 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039132569899008 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-05 02:04:21.721 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039132548927489 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2023-03-05 02:04:21.721 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039132569899008 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-05 02:04:21.721 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039132569899008 [0;39m <==        Row: 300, 0, Python, 300
2023-03-05 02:04:21.722 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039132569899008 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-05 02:04:21.722 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039132569899008 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-05 02:04:21.722 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039132569899008 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-05 02:04:21.722 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039132569899008 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-05 02:04:21.722 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039132569899008 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-05 02:04:21.723 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039132569899008 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-05 02:04:21.723 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039132569899008 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-05 02:04:21.723 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039132569899008 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-05 02:04:21.724 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13039132569899008 [0;39m <==      Total: 15
2023-03-05 02:04:21.724 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039132569899008 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-05 02:04:21.724 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039132569899008 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-03-05 02:04:21.964 INFO  com.jiawa.wiki.websocket.WebSocketServer          :41   [32m13038884468428800 [0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šeM7fl4axHGï¼Œsession idï¼š0ï¼å½“å‰è¿žæŽ¥æ•°ï¼š1
2023-03-05 02:04:23.749 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039141092724736 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:04:23.750 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039141092724736 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:04:23.750 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039141092724736 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:04:23.750 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039141092724736 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:04:23.750 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039141092724736 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":101,"page":1,"size":1000}]
2023-03-05 02:04:23.752 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039141092724736 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-05 02:04:23.753 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039141092724736 [0;39m ==> Parameters: 101(Long)
2023-03-05 02:04:23.753 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039141092724736 [0;39m <==    Columns: count(0)
2023-03-05 02:04:23.754 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039141092724736 [0;39m <==        Row: 0
2023-03-05 02:04:23.754 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039141092724736 [0;39m <==      Total: 1
2023-03-05 02:04:23.754 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13039141092724736 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-05 02:04:23.754 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13039141092724736 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-05 02:04:23.754 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039141092724736 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-05 02:04:23.754 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039141092724736 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-03-05 02:04:24.270 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039143277957120 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:04:24.271 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039143277957120 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:04:24.271 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039143277957120 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:04:24.271 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039143277957120 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:04:24.272 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039143277957120 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":102,"page":1,"size":1000}]
2023-03-05 02:04:24.274 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039143277957120 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-05 02:04:24.275 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039143277957120 [0;39m ==> Parameters: 102(Long)
2023-03-05 02:04:24.275 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039143277957120 [0;39m <==    Columns: count(0)
2023-03-05 02:04:24.275 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039143277957120 [0;39m <==        Row: 0
2023-03-05 02:04:24.276 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039143277957120 [0;39m <==      Total: 1
2023-03-05 02:04:24.277 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13039143277957120 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-05 02:04:24.277 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13039143277957120 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-05 02:04:24.277 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039143277957120 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-05 02:04:24.277 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039143277957120 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-03-05 02:04:24.697 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039145068924928 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:04:24.697 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039145068924928 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:04:24.697 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039145068924928 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:04:24.698 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039145068924928 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:04:24.699 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039145068924928 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":201,"page":1,"size":1000}]
2023-03-05 02:04:24.701 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039145068924928 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-05 02:04:24.701 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039145068924928 [0;39m ==> Parameters: 201(Long)
2023-03-05 02:04:24.702 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039145068924928 [0;39m <==    Columns: count(0)
2023-03-05 02:04:24.702 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039145068924928 [0;39m <==        Row: 0
2023-03-05 02:04:24.702 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039145068924928 [0;39m <==      Total: 1
2023-03-05 02:04:24.703 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13039145068924928 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-05 02:04:24.703 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13039145068924928 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-05 02:04:24.703 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039145068924928 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-05 02:04:24.703 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039145068924928 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-03-05 02:04:25.379 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039147929440256 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:04:25.379 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039147929440256 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:04:25.379 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039147929440256 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:04:25.380 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039147929440256 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:04:25.380 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039147929440256 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":202,"page":1,"size":1000}]
2023-03-05 02:04:25.381 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039147929440256 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-05 02:04:25.382 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039147929440256 [0;39m ==> Parameters: 202(Long)
2023-03-05 02:04:25.382 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039147929440256 [0;39m <==    Columns: count(0)
2023-03-05 02:04:25.382 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039147929440256 [0;39m <==        Row: 0
2023-03-05 02:04:25.382 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039147929440256 [0;39m <==      Total: 1
2023-03-05 02:04:25.384 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13039147929440256 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-05 02:04:25.384 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13039147929440256 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-05 02:04:25.384 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039147929440256 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-05 02:04:25.384 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039147929440256 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-03-05 02:04:25.766 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039149552635904 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:04:25.766 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039149552635904 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:04:25.767 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039149552635904 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:04:25.767 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039149552635904 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:04:25.767 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039149552635904 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":301,"page":1,"size":1000}]
2023-03-05 02:04:25.769 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039149552635904 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-05 02:04:25.770 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039149552635904 [0;39m ==> Parameters: 301(Long)
2023-03-05 02:04:25.771 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039149552635904 [0;39m <==    Columns: count(0)
2023-03-05 02:04:25.771 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039149552635904 [0;39m <==        Row: 0
2023-03-05 02:04:25.771 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039149552635904 [0;39m <==      Total: 1
2023-03-05 02:04:25.771 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13039149552635904 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-05 02:04:25.772 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13039149552635904 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-05 02:04:25.772 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039149552635904 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-05 02:04:25.772 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039149552635904 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-03-05 02:04:26.100 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039150953533440 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:04:26.100 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039150953533440 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:04:26.101 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039150953533440 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:04:26.101 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039150953533440 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:04:26.102 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039150953533440 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":302,"page":1,"size":1000}]
2023-03-05 02:04:26.104 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039150953533440 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-05 02:04:26.104 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039150953533440 [0;39m ==> Parameters: 302(Long)
2023-03-05 02:04:26.105 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039150953533440 [0;39m <==    Columns: count(0)
2023-03-05 02:04:26.105 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039150953533440 [0;39m <==        Row: 0
2023-03-05 02:04:26.105 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039150953533440 [0;39m <==      Total: 1
2023-03-05 02:04:26.105 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13039150953533440 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-05 02:04:26.105 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13039150953533440 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-05 02:04:26.106 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039150953533440 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-05 02:04:26.106 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039150953533440 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-03-05 02:04:26.524 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039152731918336 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:04:26.524 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039152731918336 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:04:26.525 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039152731918336 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:04:26.525 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039152731918336 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:04:26.525 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039152731918336 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":401,"page":1,"size":1000}]
2023-03-05 02:04:26.527 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039152731918336 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-05 02:04:26.528 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039152731918336 [0;39m ==> Parameters: 401(Long)
2023-03-05 02:04:26.529 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039152731918336 [0;39m <==    Columns: count(0)
2023-03-05 02:04:26.529 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039152731918336 [0;39m <==        Row: 0
2023-03-05 02:04:26.529 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039152731918336 [0;39m <==      Total: 1
2023-03-05 02:04:26.529 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13039152731918336 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-05 02:04:26.529 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13039152731918336 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-05 02:04:26.530 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039152731918336 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-05 02:04:26.530 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039152731918336 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-03-05 02:04:26.918 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039154384474112 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:04:26.919 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039154384474112 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:04:26.919 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039154384474112 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:04:26.919 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039154384474112 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:04:26.919 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039154384474112 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":502,"page":1,"size":1000}]
2023-03-05 02:04:26.921 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039154384474112 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-05 02:04:26.922 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039154384474112 [0;39m ==> Parameters: 502(Long)
2023-03-05 02:04:26.922 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039154384474112 [0;39m <==    Columns: count(0)
2023-03-05 02:04:26.922 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039154384474112 [0;39m <==        Row: 0
2023-03-05 02:04:26.923 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039154384474112 [0;39m <==      Total: 1
2023-03-05 02:04:26.923 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13039154384474112 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-05 02:04:26.923 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13039154384474112 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-05 02:04:26.923 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039154384474112 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-05 02:04:26.923 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039154384474112 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-03-05 02:04:27.537 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039156976553984 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:04:27.537 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039156976553984 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:04:27.537 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039156976553984 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:04:27.537 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039156976553984 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:04:27.537 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039156976553984 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":101,"page":1,"size":1000}]
2023-03-05 02:04:27.539 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039156976553984 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-05 02:04:27.540 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039156976553984 [0;39m ==> Parameters: 101(Long)
2023-03-05 02:04:27.540 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039156976553984 [0;39m <==    Columns: count(0)
2023-03-05 02:04:27.540 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039156976553984 [0;39m <==        Row: 0
2023-03-05 02:04:27.541 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039156976553984 [0;39m <==      Total: 1
2023-03-05 02:04:27.541 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13039156976553984 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-05 02:04:27.541 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13039156976553984 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-05 02:04:27.541 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039156976553984 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-05 02:04:27.541 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039156976553984 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-03-05 02:04:30.028 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:04:31.525 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:04:33.559 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:04:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13039188299616256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:04:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13039188299616256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:04:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13039188299616256 [0;39m ==> Parameters:
2023-03-05 02:04:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13039188299616256 [0;39m <==    Updates: 1
2023-03-05 02:04:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13039188299616256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 02:04:35.584 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:04:37.611 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:04:40.284 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039210445541376 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:04:40.284 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039210445541376 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/user/login POST
2023-03-05 02:04:40.284 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039210445541376 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.UserController.login
2023-03-05 02:04:40.284 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039210445541376 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:04:40.285 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039210445541376 [0;39m è¯·æ±‚å‚æ•°: [{"loginName":"test"}]
2023-03-05 02:04:40.286 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m13039210445541376 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2023-03-05 02:04:40.286 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m13039210445541376 [0;39m ==> Parameters: test(String)
2023-03-05 02:04:40.287 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m13039210445541376 [0;39m <==    Columns: id, login_name, name, password
2023-03-05 02:04:40.287 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m13039210445541376 [0;39m <==        Row: 1, test, æµ‹è¯•, e70e2222a9d67c4f2eae107533359aa4
2023-03-05 02:04:40.288 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m13039210445541376 [0;39m <==      Total: 1
2023-03-05 02:04:40.288 INFO  com.jiawa.wiki.controller.UserController          :77   [32m13039210445541376 [0;39m ç”Ÿæˆå•ç‚¹ç™»å½•tokenï¼š13039210462318592ï¼Œå¹¶æ”¾å…¥redisä¸­
2023-03-05 02:04:40.293 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039210445541376 [0;39m è¿”å›žç»“æžœ: {"content":{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"13039210462318592"},"success":true}
2023-03-05 02:04:40.293 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039210445541376 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2023-03-05 02:04:41.392 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039215092830208 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:04:41.393 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039215092830208 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-05 02:04:41.393 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039215092830208 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-05 02:04:41.393 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039215092830208 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:04:41.394 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039215092830208 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-05 02:04:41.394 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13039215092830208 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-05 02:04:41.395 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13039215092830208 [0;39m ==> Parameters:
2023-03-05 02:04:41.395 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039215092830208 [0;39m <==    Columns: id, parent, name, sort
2023-03-05 02:04:41.396 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039215092830208 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-05 02:04:41.396 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039215092830208 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-05 02:04:41.396 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039215092830208 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-05 02:04:41.396 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039215092830208 [0;39m <==        Row: 200, 0, Java, 200
2023-03-05 02:04:41.396 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039215092830208 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-05 02:04:41.397 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039215092830208 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-05 02:04:41.397 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039215092830208 [0;39m <==        Row: 300, 0, Python, 300
2023-03-05 02:04:41.397 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039215092830208 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-05 02:04:41.397 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039215092830208 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-05 02:04:41.398 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039215092830208 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-05 02:04:41.398 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039215092830208 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-05 02:04:41.398 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039215092830208 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-05 02:04:41.398 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039215092830208 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-05 02:04:41.398 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039215092830208 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-05 02:04:41.399 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039215092830208 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-05 02:04:41.399 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13039215092830208 [0;39m <==      Total: 15
2023-03-05 02:04:41.400 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039215092830208 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-05 02:04:41.400 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039215092830208 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-03-05 02:04:41.439 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039215289962496 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:04:41.439 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039215289962496 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:04:41.439 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039215289962496 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:04:41.439 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039215289962496 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:04:41.439 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039215289962496 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-03-05 02:04:41.441 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039215289962496 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-03-05 02:04:41.441 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039215289962496 [0;39m ==> Parameters:
2023-03-05 02:04:41.442 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039215289962496 [0;39m <==    Columns: count(0)
2023-03-05 02:04:41.442 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039215289962496 [0;39m <==        Row: 5
2023-03-05 02:04:41.442 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039215289962496 [0;39m <==      Total: 1
2023-03-05 02:04:41.443 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13039215289962496 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-03-05 02:04:41.443 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13039215289962496 [0;39m ==> Parameters: 10(Integer)
2023-03-05 02:04:41.444 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039215289962496 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-05 02:04:41.444 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039215289962496 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 0, 0
2023-03-05 02:04:41.444 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039215289962496 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-05 02:04:41.445 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039215289962496 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-05 02:04:41.445 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039215289962496 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-05 02:04:41.445 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039215289962496 [0;39m <==        Row: 5, Oracle å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-05 02:04:41.445 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13039215289962496 [0;39m <==      Total: 5
2023-03-05 02:04:41.446 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13039215289962496 [0;39m æ€»è¡Œæ•°ï¼š5
2023-03-05 02:04:41.446 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13039215289962496 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-05 02:04:41.446 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039215289962496 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":5,"name":"Oracle å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-03-05 02:04:41.447 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039215289962496 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-03-05 02:04:45.292 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039231450615808 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:04:45.293 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039231450615808 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-05 02:04:45.293 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039231450615808 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-05 02:04:45.293 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039231450615808 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:04:45.293 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039231450615808 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-05 02:04:45.294 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13039231450615808 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-05 02:04:45.294 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13039231450615808 [0;39m ==> Parameters:
2023-03-05 02:04:45.295 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039231450615808 [0;39m <==    Columns: id, parent, name, sort
2023-03-05 02:04:45.295 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039231450615808 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-05 02:04:45.296 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039231450615808 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-05 02:04:45.296 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039231450615808 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-05 02:04:45.296 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039231450615808 [0;39m <==        Row: 200, 0, Java, 200
2023-03-05 02:04:45.296 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039231450615808 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-05 02:04:45.296 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039231450615808 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-05 02:04:45.297 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039231450615808 [0;39m <==        Row: 300, 0, Python, 300
2023-03-05 02:04:45.297 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039231450615808 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-05 02:04:45.297 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039231450615808 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-05 02:04:45.297 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039231450615808 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-05 02:04:45.298 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039231450615808 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-05 02:04:45.298 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039231450615808 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-05 02:04:45.298 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039231450615808 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-05 02:04:45.298 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039231450615808 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-05 02:04:45.298 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039231450615808 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-05 02:04:45.299 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13039231450615808 [0;39m <==      Total: 15
2023-03-05 02:04:45.299 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039231450615808 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-05 02:04:45.299 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039231450615808 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-03-05 02:04:46.741 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039237528162304 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:04:46.742 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039237528162304 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-05 02:04:46.742 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039237528162304 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-05 02:04:46.742 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039237528162304 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:04:46.742 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039237528162304 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-05 02:04:46.743 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13039237528162304 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-05 02:04:46.743 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13039237528162304 [0;39m ==> Parameters:
2023-03-05 02:04:46.744 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039237528162304 [0;39m <==    Columns: id, parent, name, sort
2023-03-05 02:04:46.744 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039237528162304 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-05 02:04:46.744 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039237528162304 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-05 02:04:46.744 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039237528162304 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-05 02:04:46.745 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039237528162304 [0;39m <==        Row: 200, 0, Java, 200
2023-03-05 02:04:46.745 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039237528162304 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-05 02:04:46.745 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039237528162304 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-05 02:04:46.745 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039237528162304 [0;39m <==        Row: 300, 0, Python, 300
2023-03-05 02:04:46.745 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039237528162304 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-05 02:04:46.746 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039237528162304 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-05 02:04:46.746 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039237528162304 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-05 02:04:46.746 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039237528162304 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-05 02:04:46.746 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039237528162304 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-05 02:04:46.746 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039237528162304 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-05 02:04:46.747 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039237528162304 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-05 02:04:46.747 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039237528162304 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-05 02:04:46.747 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13039237528162304 [0;39m <==      Total: 15
2023-03-05 02:04:46.748 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039237528162304 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-05 02:04:46.748 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039237528162304 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-03-05 02:04:46.788 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039237725294592 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:04:46.788 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039237725294592 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:04:46.788 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039237725294592 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:04:46.789 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039237725294592 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:04:46.789 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039237725294592 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-03-05 02:04:46.790 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039237725294592 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-03-05 02:04:46.790 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039237725294592 [0;39m ==> Parameters:
2023-03-05 02:04:46.791 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039237725294592 [0;39m <==    Columns: count(0)
2023-03-05 02:04:46.791 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039237725294592 [0;39m <==        Row: 5
2023-03-05 02:04:46.792 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039237725294592 [0;39m <==      Total: 1
2023-03-05 02:04:46.793 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13039237725294592 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-03-05 02:04:46.793 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13039237725294592 [0;39m ==> Parameters: 10(Integer)
2023-03-05 02:04:46.794 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039237725294592 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-05 02:04:46.794 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039237725294592 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 0, 0
2023-03-05 02:04:46.795 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039237725294592 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-05 02:04:46.796 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039237725294592 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-05 02:04:46.796 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039237725294592 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-05 02:04:46.796 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039237725294592 [0;39m <==        Row: 5, Oracle å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-05 02:04:46.797 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13039237725294592 [0;39m <==      Total: 5
2023-03-05 02:04:46.797 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13039237725294592 [0;39m æ€»è¡Œæ•°ï¼š5
2023-03-05 02:04:46.797 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13039237725294592 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-05 02:04:46.799 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039237725294592 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":5,"name":"Oracle å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-03-05 02:04:46.799 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039237725294592 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š11 ms -------------
2023-03-05 02:04:51.318 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m13039150953533440 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-05 02:04:51.318 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m13039150953533440 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š0 ms -------------
2023-03-05 02:04:51.321 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m13039152731918336 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-05 02:04:51.321 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m13039152731918336 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/ebook/save
2023-03-05 02:04:51.321 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m13039152731918336 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š13039210462318592
2023-03-05 02:04:51.322 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m13039152731918336 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"13039210462318592"}
2023-03-05 02:04:51.332 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039256784211968 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:04:51.332 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039256784211968 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/save POST
2023-03-05 02:04:51.332 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039256784211968 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.save
2023-03-05 02:04:51.332 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039256784211968 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:04:51.335 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039256784211968 [0;39m è¯·æ±‚å‚æ•°: [{"category1Id":200,"category2Id":201,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}]
2023-03-05 02:04:51.339 DEBUG c.jiawa.wiki.mapper.EbookMapper.updateByPrimaryKey:137  [32m13039256784211968 [0;39m ==>  Preparing: update ebook set `name` = ?, category1_id = ?, category2_id = ?, description = ?, cover = ?, doc_count = ?, view_count = ?, vote_count = ? where id = ?
2023-03-05 02:04:51.339 DEBUG c.jiawa.wiki.mapper.EbookMapper.updateByPrimaryKey:137  [32m13039256784211968 [0;39m ==> Parameters: Spring Boot å…¥é—¨æ•™ç¨‹(String), 200(Long), 201(Long), é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶(String), null, 6(Integer), 0(Integer), 0(Integer), 1(Long)
2023-03-05 02:04:51.340 DEBUG c.jiawa.wiki.mapper.EbookMapper.updateByPrimaryKey:137  [32m13039256784211968 [0;39m <==    Updates: 1
2023-03-05 02:04:51.340 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039256784211968 [0;39m è¿”å›žç»“æžœ: {"success":true}
2023-03-05 02:04:51.340 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039256784211968 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-03-05 02:04:51.342 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m13039256784211968 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š21 ms -------------
2023-03-05 02:04:51.356 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039256884875264 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:04:51.356 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039256884875264 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:04:51.356 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039256884875264 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:04:51.356 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039256884875264 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:04:51.357 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039256884875264 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-03-05 02:04:51.358 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039256884875264 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-03-05 02:04:51.358 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039256884875264 [0;39m ==> Parameters:
2023-03-05 02:04:51.359 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039256884875264 [0;39m <==    Columns: count(0)
2023-03-05 02:04:51.359 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039256884875264 [0;39m <==        Row: 5
2023-03-05 02:04:51.360 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039256884875264 [0;39m <==      Total: 1
2023-03-05 02:04:51.360 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13039256884875264 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-03-05 02:04:51.360 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13039256884875264 [0;39m ==> Parameters: 10(Integer)
2023-03-05 02:04:51.361 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039256884875264 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-05 02:04:51.362 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039256884875264 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 201, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 0, 0
2023-03-05 02:04:51.362 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039256884875264 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-05 02:04:51.362 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039256884875264 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-05 02:04:51.363 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039256884875264 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-05 02:04:51.363 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039256884875264 [0;39m <==        Row: 5, Oracle å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-05 02:04:51.363 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13039256884875264 [0;39m <==      Total: 5
2023-03-05 02:04:51.364 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13039256884875264 [0;39m æ€»è¡Œæ•°ï¼š5
2023-03-05 02:04:51.364 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13039256884875264 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-05 02:04:51.365 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039256884875264 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":201,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":5,"name":"Oracle å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-03-05 02:04:51.365 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039256884875264 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2023-03-05 02:04:52.562 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039261943205888 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:04:52.562 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039261943205888 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-03-05 02:04:52.563 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039261943205888 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-03-05 02:04:52.563 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039261947400192 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:04:52.563 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039261943205888 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:04:52.563 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039261947400192 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-03-05 02:04:52.563 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039261947400192 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-03-05 02:04:52.563 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039261943205888 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-05 02:04:52.563 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039261947400192 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:04:52.563 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039261947400192 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-05 02:04:52.563 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13039261943205888 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-05 02:04:52.564 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13039261947400192 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-05 02:04:52.564 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13039261943205888 [0;39m ==> Parameters:
2023-03-05 02:04:52.564 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13039261947400192 [0;39m ==> Parameters:
2023-03-05 02:04:52.565 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13039261943205888 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-03-05 02:04:52.565 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13039261947400192 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-03-05 02:04:52.565 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13039261943205888 [0;39m <==        Row: 2023-03-05, 0, 0, 0, 0
2023-03-05 02:04:52.565 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13039261947400192 [0;39m <==        Row: 2023-03-02, 0, 0
2023-03-05 02:04:52.565 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13039261947400192 [0;39m <==      Total: 1
2023-03-05 02:04:52.565 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13039261943205888 [0;39m <==      Total: 1
2023-03-05 02:04:52.566 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039261943205888 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677945600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2023-03-05 02:04:52.566 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039261943205888 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-03-05 02:04:52.566 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039261947400192 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2023-03-05 02:04:52.566 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039261947400192 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š3 ms -------------
2023-03-05 02:04:52.568 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039261968371712 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:04:52.568 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039261968371712 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-05 02:04:52.568 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039261968371712 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-05 02:04:52.569 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039261968371712 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:04:52.569 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039261968371712 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-05 02:04:52.569 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13039261968371712 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-05 02:04:52.570 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13039261968371712 [0;39m ==> Parameters:
2023-03-05 02:04:52.570 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039261968371712 [0;39m <==    Columns: id, parent, name, sort
2023-03-05 02:04:52.570 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039261968371712 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-05 02:04:52.571 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039261968371712 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-05 02:04:52.571 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039261968371712 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-05 02:04:52.571 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039261968371712 [0;39m <==        Row: 200, 0, Java, 200
2023-03-05 02:04:52.571 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039261968371712 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-05 02:04:52.572 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039261968371712 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-05 02:04:52.572 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039261968371712 [0;39m <==        Row: 300, 0, Python, 300
2023-03-05 02:04:52.572 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039261968371712 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-05 02:04:52.572 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039261968371712 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-05 02:04:52.572 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039261968371712 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-05 02:04:52.573 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039261968371712 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-05 02:04:52.573 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039261968371712 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-05 02:04:52.573 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039261968371712 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-05 02:04:52.573 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039261968371712 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-05 02:04:52.574 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039261968371712 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-05 02:04:52.574 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13039261968371712 [0;39m <==      Total: 15
2023-03-05 02:04:52.575 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039261968371712 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-05 02:04:52.575 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039261968371712 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-03-05 02:04:53.870 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039267429355520 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:04:53.872 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039267429355520 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:04:53.872 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039267429355520 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:04:53.872 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039267429355520 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:04:53.872 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039267429355520 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":201,"page":1,"size":1000}]
2023-03-05 02:04:53.874 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039267429355520 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-05 02:04:53.874 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039267429355520 [0;39m ==> Parameters: 201(Long)
2023-03-05 02:04:53.875 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039267429355520 [0;39m <==    Columns: count(0)
2023-03-05 02:04:53.875 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039267429355520 [0;39m <==        Row: 1
2023-03-05 02:04:53.875 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039267429355520 [0;39m <==      Total: 1
2023-03-05 02:04:53.876 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13039267429355520 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-03-05 02:04:53.876 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13039267429355520 [0;39m ==> Parameters: 201(Long), 1000(Integer)
2023-03-05 02:04:53.877 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039267429355520 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-05 02:04:53.877 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039267429355520 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 201, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 0, 0
2023-03-05 02:04:53.877 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13039267429355520 [0;39m <==      Total: 1
2023-03-05 02:04:53.877 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13039267429355520 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-05 02:04:53.878 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13039267429355520 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-05 02:04:53.878 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039267429355520 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":201,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":1},"success":true}
2023-03-05 02:04:53.878 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039267429355520 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-03-05 02:04:54.757 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039271149703168 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:04:54.758 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039271149703168 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:04:54.758 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039271149703168 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:04:54.759 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039271149703168 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:04:54.759 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039271149703168 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":202,"page":1,"size":1000}]
2023-03-05 02:04:54.760 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039271149703168 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-05 02:04:54.761 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039271149703168 [0;39m ==> Parameters: 202(Long)
2023-03-05 02:04:54.761 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039271149703168 [0;39m <==    Columns: count(0)
2023-03-05 02:04:54.762 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039271149703168 [0;39m <==        Row: 0
2023-03-05 02:04:54.762 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039271149703168 [0;39m <==      Total: 1
2023-03-05 02:04:54.762 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13039271149703168 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-05 02:04:54.762 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13039271149703168 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-05 02:04:54.762 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039271149703168 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-05 02:04:54.763 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039271149703168 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-03-05 02:04:55.376 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039273745977344 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:04:55.377 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039273745977344 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-05 02:04:55.377 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039273745977344 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-05 02:04:55.377 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039273745977344 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:04:55.377 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039273745977344 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-05 02:04:55.378 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13039273745977344 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-05 02:04:55.379 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13039273745977344 [0;39m ==> Parameters:
2023-03-05 02:04:55.380 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039273745977344 [0;39m <==    Columns: id, parent, name, sort
2023-03-05 02:04:55.380 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039273745977344 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-05 02:04:55.380 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039273745977344 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-05 02:04:55.380 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039273745977344 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-05 02:04:55.380 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039273745977344 [0;39m <==        Row: 200, 0, Java, 200
2023-03-05 02:04:55.381 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039273745977344 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-05 02:04:55.381 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039273745977344 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-05 02:04:55.381 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039273745977344 [0;39m <==        Row: 300, 0, Python, 300
2023-03-05 02:04:55.381 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039273745977344 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-05 02:04:55.381 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039273745977344 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-05 02:04:55.382 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039273745977344 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-05 02:04:55.382 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039273745977344 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-05 02:04:55.382 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039273745977344 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-05 02:04:55.382 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039273745977344 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-05 02:04:55.383 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039273745977344 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-05 02:04:55.383 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039273745977344 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-05 02:04:55.383 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13039273745977344 [0;39m <==      Total: 15
2023-03-05 02:04:55.384 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039273745977344 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-05 02:04:55.384 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039273745977344 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-03-05 02:04:55.410 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039273888583680 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:04:55.410 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039273888583680 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:04:55.411 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039273888583680 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:04:55.411 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039273888583680 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:04:55.411 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039273888583680 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-03-05 02:04:55.412 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039273888583680 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-03-05 02:04:55.412 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039273888583680 [0;39m ==> Parameters:
2023-03-05 02:04:55.413 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039273888583680 [0;39m <==    Columns: count(0)
2023-03-05 02:04:55.413 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039273888583680 [0;39m <==        Row: 5
2023-03-05 02:04:55.414 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039273888583680 [0;39m <==      Total: 1
2023-03-05 02:04:55.414 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13039273888583680 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-03-05 02:04:55.415 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13039273888583680 [0;39m ==> Parameters: 10(Integer)
2023-03-05 02:04:55.415 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039273888583680 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-05 02:04:55.415 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039273888583680 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 201, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 0, 0
2023-03-05 02:04:55.416 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039273888583680 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-05 02:04:55.416 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039273888583680 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-05 02:04:55.416 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039273888583680 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-05 02:04:55.416 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039273888583680 [0;39m <==        Row: 5, Oracle å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-05 02:04:55.416 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13039273888583680 [0;39m <==      Total: 5
2023-03-05 02:04:55.417 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13039273888583680 [0;39m æ€»è¡Œæ•°ï¼š5
2023-03-05 02:04:55.417 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13039273888583680 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-05 02:04:55.417 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039273888583680 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":201,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":5,"name":"Oracle å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-03-05 02:04:55.418 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039273888583680 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-03-05 02:04:59.014 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m13039150953533440 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-05 02:04:59.014 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m13039150953533440 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/ebook/save
2023-03-05 02:04:59.016 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m13039150953533440 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š13039210462318592
2023-03-05 02:04:59.016 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m13039150953533440 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"13039210462318592"}
2023-03-05 02:04:59.018 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039289021632512 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:04:59.018 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039289021632512 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/save POST
2023-03-05 02:04:59.018 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039289021632512 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.save
2023-03-05 02:04:59.018 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039289021632512 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:04:59.018 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039289021632512 [0;39m è¯·æ±‚å‚æ•°: [{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}]
2023-03-05 02:04:59.019 DEBUG c.jiawa.wiki.mapper.EbookMapper.updateByPrimaryKey:137  [32m13039289021632512 [0;39m ==>  Preparing: update ebook set `name` = ?, category1_id = ?, category2_id = ?, description = ?, cover = ?, doc_count = ?, view_count = ?, vote_count = ? where id = ?
2023-03-05 02:04:59.019 DEBUG c.jiawa.wiki.mapper.EbookMapper.updateByPrimaryKey:137  [32m13039289021632512 [0;39m ==> Parameters: Spring Boot å…¥é—¨æ•™ç¨‹(String), 200(Long), 202(Long), é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶(String), null, 6(Integer), 0(Integer), 0(Integer), 1(Long)
2023-03-05 02:04:59.026 DEBUG c.jiawa.wiki.mapper.EbookMapper.updateByPrimaryKey:137  [32m13039289021632512 [0;39m <==    Updates: 1
2023-03-05 02:04:59.026 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039289021632512 [0;39m è¿”å›žç»“æžœ: {"success":true}
2023-03-05 02:04:59.027 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039289021632512 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2023-03-05 02:04:59.027 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m13039289021632512 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š13 ms -------------
2023-03-05 02:04:59.039 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039289109712896 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:04:59.039 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039289109712896 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:04:59.040 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039289109712896 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:04:59.040 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039289109712896 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:04:59.040 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039289109712896 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-03-05 02:04:59.041 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039289109712896 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-03-05 02:04:59.041 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039289109712896 [0;39m ==> Parameters:
2023-03-05 02:04:59.042 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039289109712896 [0;39m <==    Columns: count(0)
2023-03-05 02:04:59.042 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039289109712896 [0;39m <==        Row: 5
2023-03-05 02:04:59.042 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039289109712896 [0;39m <==      Total: 1
2023-03-05 02:04:59.043 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13039289109712896 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-03-05 02:04:59.043 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13039289109712896 [0;39m ==> Parameters: 10(Integer)
2023-03-05 02:04:59.044 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039289109712896 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-05 02:04:59.044 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039289109712896 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 0, 0
2023-03-05 02:04:59.044 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039289109712896 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-05 02:04:59.045 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039289109712896 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-05 02:04:59.045 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039289109712896 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-05 02:04:59.045 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039289109712896 [0;39m <==        Row: 5, Oracle å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-05 02:04:59.045 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13039289109712896 [0;39m <==      Total: 5
2023-03-05 02:04:59.046 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13039289109712896 [0;39m æ€»è¡Œæ•°ï¼š5
2023-03-05 02:04:59.046 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13039289109712896 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-05 02:04:59.046 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039289109712896 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":5,"name":"Oracle å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-03-05 02:04:59.046 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039289109712896 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-03-05 02:05:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13039293190770688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 02:05:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13039293190770688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 02:05:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13039293190770688 [0;39m ==> Parameters:
2023-03-05 02:05:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13039293190770688 [0;39m <==    Updates: 0
2023-03-05 02:05:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13039293190770688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 02:05:00.029 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:05:00.214 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m13039256884875264 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-05 02:05:00.214 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m13039256884875264 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/list
2023-03-05 02:05:00.214 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m13039256884875264 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š13039210462318592
2023-03-05 02:05:00.215 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m13039256884875264 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"13039210462318592"}
2023-03-05 02:05:00.216 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039294046408704 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:05:00.216 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039294046408704 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/user/list GET
2023-03-05 02:05:00.216 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039294046408704 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.UserController.list
2023-03-05 02:05:00.216 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039294046408704 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:05:00.217 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039294046408704 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-03-05 02:05:00.217 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m13039294046408704 [0;39m ==>  Preparing: SELECT count(0) FROM user
2023-03-05 02:05:00.218 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m13039294046408704 [0;39m ==> Parameters:
2023-03-05 02:05:00.218 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m13039294046408704 [0;39m <==    Columns: count(0)
2023-03-05 02:05:00.218 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m13039294046408704 [0;39m <==        Row: 1
2023-03-05 02:05:00.219 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m13039294046408704 [0;39m <==      Total: 1
2023-03-05 02:05:00.219 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m13039294046408704 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2023-03-05 02:05:00.220 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m13039294046408704 [0;39m ==> Parameters: 10(Integer)
2023-03-05 02:05:00.220 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m13039294046408704 [0;39m <==    Columns: id, login_name, name, password
2023-03-05 02:05:00.220 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m13039294046408704 [0;39m <==        Row: 1, test, æµ‹è¯•, e70e2222a9d67c4f2eae107533359aa4
2023-03-05 02:05:00.221 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m13039294046408704 [0;39m <==      Total: 1
2023-03-05 02:05:00.221 INFO  com.jiawa.wiki.service.UserService                :49   [32m13039294046408704 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-05 02:05:00.221 INFO  com.jiawa.wiki.service.UserService                :50   [32m13039294046408704 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-05 02:05:00.221 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039294046408704 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"id":1,"loginName":"test","name":"æµ‹è¯•"}],"total":1},"success":true}
2023-03-05 02:05:00.221 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039294046408704 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-03-05 02:05:00.222 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m13039294046408704 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-03-05 02:05:01.040 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039297502515201 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:05:01.040 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039297502515200 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:05:01.041 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039297502515201 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-03-05 02:05:01.041 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039297502515200 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-03-05 02:05:01.041 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039297502515201 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-03-05 02:05:01.041 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039297502515200 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-03-05 02:05:01.041 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039297502515201 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:05:01.041 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039297502515200 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:05:01.041 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039297506709504 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:05:01.041 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039297502515201 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-05 02:05:01.041 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039297502515200 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-05 02:05:01.041 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039297506709504 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-05 02:05:01.041 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039297506709504 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-05 02:05:01.042 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039297506709504 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:05:01.042 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13039297502515200 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-05 02:05:01.042 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13039297502515201 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-05 02:05:01.042 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039297506709504 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-05 02:05:01.042 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13039297502515200 [0;39m ==> Parameters:
2023-03-05 02:05:01.042 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13039297502515201 [0;39m ==> Parameters:
2023-03-05 02:05:01.043 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13039297502515200 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-03-05 02:05:01.043 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13039297502515201 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-03-05 02:05:01.043 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m13039297502515201 [0;39m <==        Row: 2023-03-05, 0, 0, 0, 0
2023-03-05 02:05:01.043 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m13039297502515200 [0;39m <==        Row: 2023-03-02, 0, 0
2023-03-05 02:05:01.044 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m13039297502515200 [0;39m <==      Total: 1
2023-03-05 02:05:01.044 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m13039297502515201 [0;39m <==      Total: 1
2023-03-05 02:05:01.044 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039297502515200 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2023-03-05 02:05:01.044 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039297502515201 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677945600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2023-03-05 02:05:01.044 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039297502515200 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-03-05 02:05:01.044 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039297502515201 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-03-05 02:05:01.042 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13039297506709504 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-05 02:05:01.045 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13039297506709504 [0;39m ==> Parameters:
2023-03-05 02:05:01.046 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039297506709504 [0;39m <==    Columns: id, parent, name, sort
2023-03-05 02:05:01.046 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039297506709504 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-05 02:05:01.046 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039297506709504 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-05 02:05:01.047 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039297506709504 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-05 02:05:01.047 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039297506709504 [0;39m <==        Row: 200, 0, Java, 200
2023-03-05 02:05:01.047 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039297506709504 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-05 02:05:01.047 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039297506709504 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-05 02:05:01.048 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039297506709504 [0;39m <==        Row: 300, 0, Python, 300
2023-03-05 02:05:01.048 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039297506709504 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-05 02:05:01.048 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039297506709504 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-05 02:05:01.048 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039297506709504 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-05 02:05:01.048 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039297506709504 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-05 02:05:01.049 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039297506709504 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-05 02:05:01.049 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039297506709504 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-05 02:05:01.049 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039297506709504 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-05 02:05:01.049 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m13039297506709504 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-05 02:05:01.049 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m13039297506709504 [0;39m <==      Total: 15
2023-03-05 02:05:01.050 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039297506709504 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-05 02:05:01.050 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039297506709504 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2023-03-05 02:05:01.497 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:05:02.766 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039304741883904 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:05:02.767 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039304741883904 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:05:02.767 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039304741883904 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:05:02.767 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039304741883904 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:05:02.768 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039304741883904 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":202,"page":1,"size":1000}]
2023-03-05 02:05:02.770 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039304741883904 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-05 02:05:02.770 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039304741883904 [0;39m ==> Parameters: 202(Long)
2023-03-05 02:05:02.771 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039304741883904 [0;39m <==    Columns: count(0)
2023-03-05 02:05:02.771 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039304741883904 [0;39m <==        Row: 1
2023-03-05 02:05:02.771 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039304741883904 [0;39m <==      Total: 1
2023-03-05 02:05:02.771 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13039304741883904 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-03-05 02:05:02.772 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13039304741883904 [0;39m ==> Parameters: 202(Long), 1000(Integer)
2023-03-05 02:05:02.772 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039304741883904 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-05 02:05:02.772 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039304741883904 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 0, 0
2023-03-05 02:05:02.772 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13039304741883904 [0;39m <==      Total: 1
2023-03-05 02:05:02.772 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13039304741883904 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-05 02:05:02.772 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13039304741883904 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-05 02:05:02.772 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039304741883904 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":1},"success":true}
2023-03-05 02:05:02.773 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039304741883904 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-03-05 02:05:03.227 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039306675458048 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:05:03.227 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039306675458048 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:05:03.227 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039306675458048 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:05:03.227 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039306675458048 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:05:03.228 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039306675458048 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":102,"page":1,"size":1000}]
2023-03-05 02:05:03.229 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039306675458048 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-05 02:05:03.230 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039306675458048 [0;39m ==> Parameters: 102(Long)
2023-03-05 02:05:03.231 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039306675458048 [0;39m <==    Columns: count(0)
2023-03-05 02:05:03.231 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039306675458048 [0;39m <==        Row: 0
2023-03-05 02:05:03.231 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039306675458048 [0;39m <==      Total: 1
2023-03-05 02:05:03.231 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13039306675458048 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-05 02:05:03.232 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13039306675458048 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-05 02:05:03.232 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039306675458048 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-05 02:05:03.232 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039306675458048 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-03-05 02:05:03.526 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:05:03.889 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039309452087296 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:05:03.890 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039309452087296 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-05 02:05:03.890 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039309452087296 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 02:05:03.890 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039309452087296 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:05:03.890 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039309452087296 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":202,"page":1,"size":1000}]
2023-03-05 02:05:03.891 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039309452087296 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-05 02:05:03.891 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039309452087296 [0;39m ==> Parameters: 202(Long)
2023-03-05 02:05:03.892 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039309452087296 [0;39m <==    Columns: count(0)
2023-03-05 02:05:03.892 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13039309452087296 [0;39m <==        Row: 1
2023-03-05 02:05:03.892 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13039309452087296 [0;39m <==      Total: 1
2023-03-05 02:05:03.893 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13039309452087296 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-03-05 02:05:03.893 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13039309452087296 [0;39m ==> Parameters: 202(Long), 1000(Integer)
2023-03-05 02:05:03.893 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039309452087296 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-05 02:05:03.893 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13039309452087296 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 0, 0
2023-03-05 02:05:03.894 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13039309452087296 [0;39m <==      Total: 1
2023-03-05 02:05:03.894 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13039309452087296 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-05 02:05:03.894 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13039309452087296 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-05 02:05:03.894 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039309452087296 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":1},"success":true}
2023-03-05 02:05:03.894 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039309452087296 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-03-05 02:05:04.445 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039311784120320 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:05:04.446 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039311784120320 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/1 GET
2023-03-05 02:05:04.446 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039311784120320 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-03-05 02:05:04.446 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039311784120320 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:05:04.446 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039311784120320 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-03-05 02:05:04.451 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m13039311784120320 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-03-05 02:05:04.451 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m13039311784120320 [0;39m ==> Parameters: 1(Long)
2023-03-05 02:05:04.452 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m13039311784120320 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-03-05 02:05:04.452 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m13039311784120320 [0;39m <==        Row: 1, 1, 0, æ–‡æ¡£1, 1, 0, 0
2023-03-05 02:05:04.452 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m13039311784120320 [0;39m <==        Row: 2, 1, 1, æ–‡æ¡£1.1, 1, 0, 0
2023-03-05 02:05:04.452 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m13039311784120320 [0;39m <==        Row: 4, 1, 3, æ–‡æ¡£2.1, 1, 0, 0
2023-03-05 02:05:04.452 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m13039311784120320 [0;39m <==        Row: 6, 1, 5, æ–‡æ¡£2.2.1, 1, 0, 0
2023-03-05 02:05:04.453 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m13039311784120320 [0;39m <==        Row: 3, 1, 0, æ–‡æ¡£2, 2, 0, 0
2023-03-05 02:05:04.453 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m13039311784120320 [0;39m <==        Row: 5, 1, 3, æ–‡æ¡£2.2, 2, 0, 0
2023-03-05 02:05:04.453 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m13039311784120320 [0;39m <==      Total: 6
2023-03-05 02:05:04.458 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039311784120320 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":1,"id":1,"name":"æ–‡æ¡£1","parent":0,"sort":1,"viewCount":0,"voteCount":0},{"ebookId":1,"id":2,"name":"æ–‡æ¡£1.1","parent":1,"sort":1,"viewCount":0,"voteCount":0},{"ebookId":1,"id":4,"name":"æ–‡æ¡£2.1","parent":3,"sort":1,"viewCount":0,"voteCount":0},{"ebookId":1,"id":6,"name":"æ–‡æ¡£2.2.1","parent":5,"sort":1,"viewCount":0,"voteCount":0},{"ebookId":1,"id":3,"name":"æ–‡æ¡£2","parent":0,"sort":2,"viewCount":0,"voteCount":0},{"ebookId":1,"id":5,"name":"æ–‡æ¡£2.2","parent":3,"sort":2,"viewCount":0,"voteCount":0}],"success":true}
2023-03-05 02:05:04.458 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039311784120320 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š13 ms -------------
2023-03-05 02:05:04.471 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039311893172224 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:05:04.471 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039311893172224 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/1 GET
2023-03-05 02:05:04.471 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039311893172224 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-03-05 02:05:04.471 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039311893172224 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:05:04.471 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039311893172224 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-03-05 02:05:04.472 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m13039311893172224 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-03-05 02:05:04.472 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m13039311893172224 [0;39m ==> Parameters: 1(Long)
2023-03-05 02:05:04.474 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m13039311893172224 [0;39m <==      Total: 0
2023-03-05 02:05:04.476 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m13039311893172224 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-03-05 02:05:04.476 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m13039311893172224 [0;39m ==> Parameters: 1(Long)
2023-03-05 02:05:04.477 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m13039311893172224 [0;39m <==    Updates: 1
2023-03-05 02:05:04.477 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039311893172224 [0;39m è¿”å›žç»“æžœ: {"content":"","success":true}
2023-03-05 02:05:04.477 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039311893172224 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-03-05 02:05:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13039314124541952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:05:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13039314124541952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:05:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13039314124541952 [0;39m ==> Parameters:
2023-03-05 02:05:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13039314124541952 [0;39m <==    Updates: 1
2023-03-05 02:05:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13039314124541952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 02:05:05.582 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:05:05.584 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039316561432576 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:05:05.584 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039316561432576 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/vote/1 GET
2023-03-05 02:05:05.585 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039316561432576 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.vote
2023-03-05 02:05:05.585 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039316561432576 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:05:05.585 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039316561432576 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-03-05 02:05:05.596 INFO  com.jiawa.wiki.util.RedisUtil                     :31   [32m13039316561432576 [0;39m keyä¸å­˜åœ¨ï¼Œæ”¾å…¥ï¼šDOC_VOTE_1_127.0.0.1ï¼Œè¿‡æœŸ 5000 ç§’
2023-03-05 02:05:05.597 DEBUG c.j.wiki.mapper.DocMapperCust.increaseVoteCount   :137  [32m13039316561432576 [0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2023-03-05 02:05:05.598 DEBUG c.j.wiki.mapper.DocMapperCust.increaseVoteCount   :137  [32m13039316561432576 [0;39m ==> Parameters: 1(Long)
2023-03-05 02:05:05.598 DEBUG c.j.wiki.mapper.DocMapperCust.increaseVoteCount   :137  [32m13039316561432576 [0;39m <==    Updates: 1
2023-03-05 02:05:05.599 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:137  [32m13039316561432576 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2023-03-05 02:05:05.599 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:137  [32m13039316561432576 [0;39m ==> Parameters: 1(Long)
2023-03-05 02:05:05.599 TRACE com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:143  [32m13039316561432576 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-03-05 02:05:05.599 TRACE com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:143  [32m13039316561432576 [0;39m <==        Row: 1, 1, 0, æ–‡æ¡£1, 1, 1, 1
2023-03-05 02:05:05.600 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:137  [32m13039316561432576 [0;39m <==      Total: 1
2023-03-05 02:05:07.640 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:05:09.676 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:05:09.675 ERROR org.apache.rocketmq.spring.core.RocketMQTemplate  :153  [32m13039316561432576 [0;39m syncSend failed. destination:VOTE_TOPIC, message:GenericMessage [payload=ã€æ–‡æ¡£1ã€‘è¢«ç‚¹èµžï¼, headers={contentType=text/plain, id=511ac330-babd-a006-5b6c-9909c5737a38, timestamp=1677953105604}]
2023-03-05 02:05:09.688 ERROR com.jiawa.wiki.config.ControllerExceptionHandler  :59   [32m13039316561432576 [0;39m ç³»ç»Ÿå¼‚å¸¸ï¼š
org.springframework.messaging.MessagingException: No route info of this topic, VOTE_TOPIC
See http://rocketmq.apache.org/docs/faq/ for further details.; nested exception is org.apache.rocketmq.client.exception.MQClientException: No route info of this topic, VOTE_TOPIC
See http://rocketmq.apache.org/docs/faq/ for further details.
	at org.apache.rocketmq.spring.core.RocketMQTemplate.syncSend(RocketMQTemplate.java:154)
	at org.apache.rocketmq.spring.core.RocketMQTemplate.syncSend(RocketMQTemplate.java:123)
	at org.apache.rocketmq.spring.core.RocketMQTemplate.syncSend(RocketMQTemplate.java:111)
	at org.apache.rocketmq.spring.core.RocketMQTemplate.doSend(RocketMQTemplate.java:459)
	at org.apache.rocketmq.spring.core.RocketMQTemplate.doSend(RocketMQTemplate.java:50)
	at org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)
	at org.springframework.messaging.core.AbstractMessageSendingTemplate.convertAndSend(AbstractMessageSendingTemplate.java:151)
	at org.springframework.messaging.core.AbstractMessageSendingTemplate.convertAndSend(AbstractMessageSendingTemplate.java:129)
	at org.springframework.messaging.core.AbstractMessageSendingTemplate.convertAndSend(AbstractMessageSendingTemplate.java:122)
	at com.jiawa.wiki.service.DocService.vote(DocService.java:167)
	at com.jiawa.wiki.service.DocService$$FastClassBySpringCGLIB$$50aa4805.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:687)
	at com.jiawa.wiki.service.DocService$$EnhancerBySpringCGLIB$$d1ec5ca6.vote(<generated>)
	at com.jiawa.wiki.controller.DocController.vote(DocController.java:65)
	at com.jiawa.wiki.controller.DocController$$FastClassBySpringCGLIB$$36fc4971.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:58)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at com.jiawa.wiki.aspect.LogAspect.doAround(LogAspect.java:86)
	at sun.reflect.GeneratedMethodAccessor105.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691)
	at com.jiawa.wiki.controller.DocController$$EnhancerBySpringCGLIB$$b3382677.vote(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:893)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:807)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1061)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:961)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:626)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.rocketmq.client.exception.MQClientException: No route info of this topic, VOTE_TOPIC
See http://rocketmq.apache.org/docs/faq/ for further details.
	at org.apache.rocketmq.client.impl.producer.DefaultMQProducerImpl.sendDefaultImpl(DefaultMQProducerImpl.java:656)
	at org.apache.rocketmq.client.impl.producer.DefaultMQProducerImpl.send(DefaultMQProducerImpl.java:1279)
	at org.apache.rocketmq.client.producer.DefaultMQProducer.send(DefaultMQProducer.java:301)
	at org.apache.rocketmq.spring.core.RocketMQTemplate.syncSend(RocketMQTemplate.java:148)
	... 87 common frames omitted
2023-03-05 02:05:09.691 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m13039316561432576 [0;39m Resolved [org.springframework.messaging.MessagingException: No route info of this topic, VOTE_TOPIC
See http://rocketmq.apache.org/docs/faq/ for further details.; nested exception is org.apache.rocketmq.client.exception.MQClientException: No route info of this topic, VOTE_TOPIC
See http://rocketmq.apache.org/docs/faq/ for further details.]
2023-03-05 02:05:29.684 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:05:30.058 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:05:31.717 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:05:33.764 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:05:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13039440003993600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:05:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13039440003993600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:05:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13039440003993600 [0;39m ==> Parameters:
2023-03-05 02:05:35.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13039440003993600 [0;39m <==    Updates: 1
2023-03-05 02:05:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13039440003993600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 02:05:35.810 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:05:53.777 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:06:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13039544828039168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 02:06:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13039544828039168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 02:06:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13039544828039168 [0;39m ==> Parameters:
2023-03-05 02:06:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13039544828039168 [0;39m <==    Updates: 0
2023-03-05 02:06:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13039544828039168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 02:06:00.039 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:06:03.547 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:06:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13039565824724992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:06:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13039565824724992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:06:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13039565824724992 [0;39m ==> Parameters:
2023-03-05 02:06:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13039565824724992 [0;39m <==    Updates: 1
2023-03-05 02:06:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13039565824724992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 02:06:15.812 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:06:17.856 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:06:29.448 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:06:30.022 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:06:31.477 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:06:33.500 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:06:35.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13039691666427904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:06:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13039691666427904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:06:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13039691666427904 [0;39m ==> Parameters:
2023-03-05 02:06:35.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13039691666427904 [0;39m <==    Updates: 1
2023-03-05 02:06:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13039691666427904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 02:06:39.891 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:06:41.929 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:06:44.781 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039732623806464 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:06:44.781 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039732623806464 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/vote/1 GET
2023-03-05 02:06:44.781 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039732623806464 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.vote
2023-03-05 02:06:44.781 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039732623806464 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:06:44.781 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039732623806464 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-03-05 02:06:44.782 INFO  com.jiawa.wiki.util.RedisUtil                     :28   [32m13039732623806464 [0;39m keyå·²å­˜åœ¨ï¼šDOC_VOTE_1_127.0.0.1
2023-03-05 02:06:44.783 WARN  com.jiawa.wiki.config.ControllerExceptionHandler  :44   [32m13039732623806464 [0;39m ä¸šåŠ¡å¼‚å¸¸ï¼šæ‚¨å·²ç‚¹èµžè¿‡
2023-03-05 02:06:44.784 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m13039732623806464 [0;39m Resolved [com.jiawa.wiki.exception.BusinessException: æ‚¨å·²ç‚¹èµžè¿‡]
2023-03-05 02:06:47.137 INFO  com.jiawa.wiki.websocket.WebSocketServer          :41   [32m13039273888583680 [0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šDLrnV7K6plï¼Œsession idï¼š1ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2023-03-05 02:06:48.170 INFO  com.jiawa.wiki.websocket.WebSocketServer          :32   [32m13039311784120320 [0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šu21JAJ2ilhï¼Œsession idï¼š2ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2023-03-05 02:06:48.229 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039747085766656 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:06:48.229 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039747085766656 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/1 GET
2023-03-05 02:06:48.229 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039747085766656 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-03-05 02:06:48.229 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039747085766656 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:06:48.230 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039747085766656 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-03-05 02:06:48.230 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m13039747085766656 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-03-05 02:06:48.230 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m13039747085766656 [0;39m ==> Parameters: 1(Long)
2023-03-05 02:06:48.232 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m13039747085766656 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-03-05 02:06:48.232 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m13039747085766656 [0;39m <==        Row: 1, 1, 0, æ–‡æ¡£1, 1, 1, 1
2023-03-05 02:06:48.232 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m13039747085766656 [0;39m <==        Row: 2, 1, 1, æ–‡æ¡£1.1, 1, 0, 0
2023-03-05 02:06:48.232 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m13039747085766656 [0;39m <==        Row: 4, 1, 3, æ–‡æ¡£2.1, 1, 0, 0
2023-03-05 02:06:48.232 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m13039747085766656 [0;39m <==        Row: 6, 1, 5, æ–‡æ¡£2.2.1, 1, 0, 0
2023-03-05 02:06:48.233 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m13039747085766656 [0;39m <==        Row: 3, 1, 0, æ–‡æ¡£2, 2, 0, 0
2023-03-05 02:06:48.233 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m13039747085766656 [0;39m <==        Row: 5, 1, 3, æ–‡æ¡£2.2, 2, 0, 0
2023-03-05 02:06:48.233 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m13039747085766656 [0;39m <==      Total: 6
2023-03-05 02:06:48.234 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039747085766656 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":1,"id":1,"name":"æ–‡æ¡£1","parent":0,"sort":1,"viewCount":1,"voteCount":1},{"ebookId":1,"id":2,"name":"æ–‡æ¡£1.1","parent":1,"sort":1,"viewCount":0,"voteCount":0},{"ebookId":1,"id":4,"name":"æ–‡æ¡£2.1","parent":3,"sort":1,"viewCount":0,"voteCount":0},{"ebookId":1,"id":6,"name":"æ–‡æ¡£2.2.1","parent":5,"sort":1,"viewCount":0,"voteCount":0},{"ebookId":1,"id":3,"name":"æ–‡æ¡£2","parent":0,"sort":2,"viewCount":0,"voteCount":0},{"ebookId":1,"id":5,"name":"æ–‡æ¡£2.2","parent":3,"sort":2,"viewCount":0,"voteCount":0}],"success":true}
2023-03-05 02:06:48.234 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039747085766656 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-03-05 02:06:48.294 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039747358396416 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:06:48.295 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039747358396416 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/1 GET
2023-03-05 02:06:48.295 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039747358396416 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-03-05 02:06:48.295 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039747358396416 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:06:48.295 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039747358396416 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-03-05 02:06:48.296 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m13039747358396416 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-03-05 02:06:48.296 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m13039747358396416 [0;39m ==> Parameters: 1(Long)
2023-03-05 02:06:48.297 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m13039747358396416 [0;39m <==      Total: 0
2023-03-05 02:06:48.298 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m13039747358396416 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-03-05 02:06:48.298 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m13039747358396416 [0;39m ==> Parameters: 1(Long)
2023-03-05 02:06:48.301 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m13039747358396416 [0;39m <==    Updates: 1
2023-03-05 02:06:48.301 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039747358396416 [0;39m è¿”å›žç»“æžœ: {"content":"","success":true}
2023-03-05 02:06:48.302 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039747358396416 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-03-05 02:06:49.725 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039753360445440 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:06:49.725 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039753360445440 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/vote/1 GET
2023-03-05 02:06:49.725 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039753360445440 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.vote
2023-03-05 02:06:49.725 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039753360445440 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:06:49.725 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039753360445440 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-03-05 02:06:49.726 INFO  com.jiawa.wiki.util.RedisUtil                     :28   [32m13039753360445440 [0;39m keyå·²å­˜åœ¨ï¼šDOC_VOTE_1_127.0.0.1
2023-03-05 02:06:49.726 WARN  com.jiawa.wiki.config.ControllerExceptionHandler  :44   [32m13039753360445440 [0;39m ä¸šåŠ¡å¼‚å¸¸ï¼šæ‚¨å·²ç‚¹èµžè¿‡
2023-03-05 02:06:49.727 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m13039753360445440 [0;39m Resolved [com.jiawa.wiki.exception.BusinessException: æ‚¨å·²ç‚¹èµžè¿‡]
2023-03-05 02:06:50.829 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039757990957056 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:06:50.829 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039757990957056 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/2 GET
2023-03-05 02:06:50.829 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039757990957056 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-03-05 02:06:50.829 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039757990957056 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:06:50.829 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039757990957056 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-03-05 02:06:50.830 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m13039757990957056 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-03-05 02:06:50.830 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m13039757990957056 [0;39m ==> Parameters: 2(Long)
2023-03-05 02:06:50.831 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m13039757990957056 [0;39m <==      Total: 0
2023-03-05 02:06:50.831 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m13039757990957056 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-03-05 02:06:50.831 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m13039757990957056 [0;39m ==> Parameters: 2(Long)
2023-03-05 02:06:50.838 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m13039757990957056 [0;39m <==    Updates: 1
2023-03-05 02:06:50.838 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039757990957056 [0;39m è¿”å›žç»“æžœ: {"content":"","success":true}
2023-03-05 02:06:50.838 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039757990957056 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2023-03-05 02:06:52.797 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039766245347328 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:06:52.798 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039766245347328 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/vote/2 GET
2023-03-05 02:06:52.798 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039766245347328 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.vote
2023-03-05 02:06:52.798 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039766245347328 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:06:52.798 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039766245347328 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-03-05 02:06:52.800 INFO  com.jiawa.wiki.util.RedisUtil                     :31   [32m13039766245347328 [0;39m keyä¸å­˜åœ¨ï¼Œæ”¾å…¥ï¼šDOC_VOTE_2_127.0.0.1ï¼Œè¿‡æœŸ 5000 ç§’
2023-03-05 02:06:52.802 DEBUG c.j.wiki.mapper.DocMapperCust.increaseVoteCount   :137  [32m13039766245347328 [0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2023-03-05 02:06:52.802 DEBUG c.j.wiki.mapper.DocMapperCust.increaseVoteCount   :137  [32m13039766245347328 [0;39m ==> Parameters: 2(Long)
2023-03-05 02:06:52.809 DEBUG c.j.wiki.mapper.DocMapperCust.increaseVoteCount   :137  [32m13039766245347328 [0;39m <==    Updates: 1
2023-03-05 02:06:52.810 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:137  [32m13039766245347328 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2023-03-05 02:06:52.811 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:137  [32m13039766245347328 [0;39m ==> Parameters: 2(Long)
2023-03-05 02:06:52.811 TRACE com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:143  [32m13039766245347328 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-03-05 02:06:52.811 TRACE com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:143  [32m13039766245347328 [0;39m <==        Row: 2, 1, 1, æ–‡æ¡£1.1, 1, 1, 1
2023-03-05 02:06:52.812 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:137  [32m13039766245347328 [0;39m <==      Total: 1
2023-03-05 02:06:54.837 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:06:56.881 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:06:56.880 ERROR org.apache.rocketmq.spring.core.RocketMQTemplate  :153  [32m13039766245347328 [0;39m syncSend failed. destination:VOTE_TOPIC, message:GenericMessage [payload=ã€æ–‡æ¡£1.1ã€‘è¢«ç‚¹èµžï¼, headers={contentType=text/plain, id=b082b382-73ba-3554-6aef-1741eaa5f896, timestamp=1677953212812}]
2023-03-05 02:06:56.882 ERROR com.jiawa.wiki.config.ControllerExceptionHandler  :59   [32m13039766245347328 [0;39m ç³»ç»Ÿå¼‚å¸¸ï¼š
org.springframework.messaging.MessagingException: No route info of this topic, VOTE_TOPIC
See http://rocketmq.apache.org/docs/faq/ for further details.; nested exception is org.apache.rocketmq.client.exception.MQClientException: No route info of this topic, VOTE_TOPIC
See http://rocketmq.apache.org/docs/faq/ for further details.
	at org.apache.rocketmq.spring.core.RocketMQTemplate.syncSend(RocketMQTemplate.java:154)
	at org.apache.rocketmq.spring.core.RocketMQTemplate.syncSend(RocketMQTemplate.java:123)
	at org.apache.rocketmq.spring.core.RocketMQTemplate.syncSend(RocketMQTemplate.java:111)
	at org.apache.rocketmq.spring.core.RocketMQTemplate.doSend(RocketMQTemplate.java:459)
	at org.apache.rocketmq.spring.core.RocketMQTemplate.doSend(RocketMQTemplate.java:50)
	at org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)
	at org.springframework.messaging.core.AbstractMessageSendingTemplate.convertAndSend(AbstractMessageSendingTemplate.java:151)
	at org.springframework.messaging.core.AbstractMessageSendingTemplate.convertAndSend(AbstractMessageSendingTemplate.java:129)
	at org.springframework.messaging.core.AbstractMessageSendingTemplate.convertAndSend(AbstractMessageSendingTemplate.java:122)
	at com.jiawa.wiki.service.DocService.vote(DocService.java:167)
	at com.jiawa.wiki.service.DocService$$FastClassBySpringCGLIB$$50aa4805.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:687)
	at com.jiawa.wiki.service.DocService$$EnhancerBySpringCGLIB$$d1ec5ca6.vote(<generated>)
	at com.jiawa.wiki.controller.DocController.vote(DocController.java:65)
	at com.jiawa.wiki.controller.DocController$$FastClassBySpringCGLIB$$36fc4971.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:58)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at com.jiawa.wiki.aspect.LogAspect.doAround(LogAspect.java:86)
	at sun.reflect.GeneratedMethodAccessor105.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691)
	at com.jiawa.wiki.controller.DocController$$EnhancerBySpringCGLIB$$b3382677.vote(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:893)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:807)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1061)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:961)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:626)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.rocketmq.client.exception.MQClientException: No route info of this topic, VOTE_TOPIC
See http://rocketmq.apache.org/docs/faq/ for further details.
	at org.apache.rocketmq.client.impl.producer.DefaultMQProducerImpl.sendDefaultImpl(DefaultMQProducerImpl.java:656)
	at org.apache.rocketmq.client.impl.producer.DefaultMQProducerImpl.send(DefaultMQProducerImpl.java:1279)
	at org.apache.rocketmq.client.producer.DefaultMQProducer.send(DefaultMQProducer.java:301)
	at org.apache.rocketmq.spring.core.RocketMQTemplate.syncSend(RocketMQTemplate.java:148)
	... 87 common frames omitted
2023-03-05 02:06:56.884 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m13039766245347328 [0;39m Resolved [org.springframework.messaging.MessagingException: No route info of this topic, VOTE_TOPIC
See http://rocketmq.apache.org/docs/faq/ for further details.; nested exception is org.apache.rocketmq.client.exception.MQClientException: No route info of this topic, VOTE_TOPIC
See http://rocketmq.apache.org/docs/faq/ for further details.]
2023-03-05 02:06:59.477 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:07:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13039796477890560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 02:07:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13039796477890560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 02:07:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13039796477890560 [0;39m ==> Parameters:
2023-03-05 02:07:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13039796477890560 [0;39m <==    Updates: 0
2023-03-05 02:07:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13039796477890560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 02:07:00.037 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:07:00.622 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039799065776128 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:07:00.622 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039799065776128 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/4 GET
2023-03-05 02:07:00.623 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039799065776128 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-03-05 02:07:00.623 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039799065776128 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:07:00.623 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039799065776128 [0;39m è¯·æ±‚å‚æ•°: [4]
2023-03-05 02:07:00.624 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m13039799065776128 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-03-05 02:07:00.624 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m13039799065776128 [0;39m ==> Parameters: 4(Long)
2023-03-05 02:07:00.625 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m13039799065776128 [0;39m <==      Total: 0
2023-03-05 02:07:00.625 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m13039799065776128 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-03-05 02:07:00.626 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m13039799065776128 [0;39m ==> Parameters: 4(Long)
2023-03-05 02:07:00.632 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m13039799065776128 [0;39m <==    Updates: 1
2023-03-05 02:07:00.632 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039799065776128 [0;39m è¿”å›žç»“æžœ: {"content":"","success":true}
2023-03-05 02:07:00.632 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039799065776128 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š10 ms -------------
2023-03-05 02:07:01.508 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:07:03.549 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:07:04.386 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039814853136384 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:07:04.387 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039814853136384 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/vote/4 GET
2023-03-05 02:07:04.387 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039814853136384 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.vote
2023-03-05 02:07:04.387 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039814853136384 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:07:04.387 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039814853136384 [0;39m è¯·æ±‚å‚æ•°: [4]
2023-03-05 02:07:04.393 INFO  com.jiawa.wiki.util.RedisUtil                     :31   [32m13039814853136384 [0;39m keyä¸å­˜åœ¨ï¼Œæ”¾å…¥ï¼šDOC_VOTE_4_127.0.0.1ï¼Œè¿‡æœŸ 5000 ç§’
2023-03-05 02:07:04.396 DEBUG c.j.wiki.mapper.DocMapperCust.increaseVoteCount   :137  [32m13039814853136384 [0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2023-03-05 02:07:04.396 DEBUG c.j.wiki.mapper.DocMapperCust.increaseVoteCount   :137  [32m13039814853136384 [0;39m ==> Parameters: 4(Long)
2023-03-05 02:07:04.402 DEBUG c.j.wiki.mapper.DocMapperCust.increaseVoteCount   :137  [32m13039814853136384 [0;39m <==    Updates: 1
2023-03-05 02:07:04.403 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:137  [32m13039814853136384 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2023-03-05 02:07:04.404 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:137  [32m13039814853136384 [0;39m ==> Parameters: 4(Long)
2023-03-05 02:07:04.404 TRACE com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:143  [32m13039814853136384 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-03-05 02:07:04.405 TRACE com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:143  [32m13039814853136384 [0;39m <==        Row: 4, 1, 3, æ–‡æ¡£2.1, 1, 1, 1
2023-03-05 02:07:04.405 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:137  [32m13039814853136384 [0;39m <==      Total: 1
2023-03-05 02:07:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13039817487159296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:07:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13039817487159296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:07:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13039817487159296 [0;39m ==> Parameters:
2023-03-05 02:07:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13039817487159296 [0;39m <==    Updates: 1
2023-03-05 02:07:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13039817487159296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 02:07:07.636 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:07:09.661 ERROR org.apache.rocketmq.spring.core.RocketMQTemplate  :153  [32m13039814853136384 [0;39m syncSend failed. destination:VOTE_TOPIC, message:GenericMessage [payload=ã€æ–‡æ¡£2.1ã€‘è¢«ç‚¹èµžï¼, headers={contentType=text/plain, id=8e1d3f4b-199f-3775-5803-424fd13fdfdd, timestamp=1677953224405}]
2023-03-05 02:07:09.663 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 02:07:09.662 ERROR com.jiawa.wiki.config.ControllerExceptionHandler  :59   [32m13039814853136384 [0;39m ç³»ç»Ÿå¼‚å¸¸ï¼š
org.springframework.messaging.MessagingException: No route info of this topic, VOTE_TOPIC
See http://rocketmq.apache.org/docs/faq/ for further details.; nested exception is org.apache.rocketmq.client.exception.MQClientException: No route info of this topic, VOTE_TOPIC
See http://rocketmq.apache.org/docs/faq/ for further details.
	at org.apache.rocketmq.spring.core.RocketMQTemplate.syncSend(RocketMQTemplate.java:154)
	at org.apache.rocketmq.spring.core.RocketMQTemplate.syncSend(RocketMQTemplate.java:123)
	at org.apache.rocketmq.spring.core.RocketMQTemplate.syncSend(RocketMQTemplate.java:111)
	at org.apache.rocketmq.spring.core.RocketMQTemplate.doSend(RocketMQTemplate.java:459)
	at org.apache.rocketmq.spring.core.RocketMQTemplate.doSend(RocketMQTemplate.java:50)
	at org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)
	at org.springframework.messaging.core.AbstractMessageSendingTemplate.convertAndSend(AbstractMessageSendingTemplate.java:151)
	at org.springframework.messaging.core.AbstractMessageSendingTemplate.convertAndSend(AbstractMessageSendingTemplate.java:129)
	at org.springframework.messaging.core.AbstractMessageSendingTemplate.convertAndSend(AbstractMessageSendingTemplate.java:122)
	at com.jiawa.wiki.service.DocService.vote(DocService.java:167)
	at com.jiawa.wiki.service.DocService$$FastClassBySpringCGLIB$$50aa4805.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:687)
	at com.jiawa.wiki.service.DocService$$EnhancerBySpringCGLIB$$d1ec5ca6.vote(<generated>)
	at com.jiawa.wiki.controller.DocController.vote(DocController.java:65)
	at com.jiawa.wiki.controller.DocController$$FastClassBySpringCGLIB$$36fc4971.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:58)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at com.jiawa.wiki.aspect.LogAspect.doAround(LogAspect.java:86)
	at sun.reflect.GeneratedMethodAccessor105.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691)
	at com.jiawa.wiki.controller.DocController$$EnhancerBySpringCGLIB$$b3382677.vote(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:893)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:807)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1061)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:961)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:626)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.rocketmq.client.exception.MQClientException: No route info of this topic, VOTE_TOPIC
See http://rocketmq.apache.org/docs/faq/ for further details.
	at org.apache.rocketmq.client.impl.producer.DefaultMQProducerImpl.sendDefaultImpl(DefaultMQProducerImpl.java:656)
	at org.apache.rocketmq.client.impl.producer.DefaultMQProducerImpl.send(DefaultMQProducerImpl.java:1279)
	at org.apache.rocketmq.client.producer.DefaultMQProducer.send(DefaultMQProducer.java:301)
	at org.apache.rocketmq.spring.core.RocketMQTemplate.syncSend(RocketMQTemplate.java:148)
	... 87 common frames omitted
2023-03-05 02:07:09.664 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m13039814853136384 [0;39m Resolved [org.springframework.messaging.MessagingException: No route info of this topic, VOTE_TOPIC
See http://rocketmq.apache.org/docs/faq/ for further details.; nested exception is org.apache.rocketmq.client.exception.MQClientException: No route info of this topic, VOTE_TOPIC
See http://rocketmq.apache.org/docs/faq/ for further details.]
2023-03-05 02:07:26.596 INFO  com.jiawa.wiki.websocket.WebSocketServer          :41   [32m13039747358396416 [0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šu21JAJ2ilhï¼Œsession idï¼š2ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2023-03-05 02:07:27.133 INFO  com.jiawa.wiki.websocket.WebSocketServer          :32   [32m13039753360445440 [0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šZPmMCalSxFï¼Œsession idï¼š3ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2023-03-05 02:07:27.175 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039910437130240 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:07:27.176 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039910437130240 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/1 GET
2023-03-05 02:07:27.176 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039910437130240 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-03-05 02:07:27.176 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039910437130240 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:07:27.177 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039910437130240 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-03-05 02:07:27.178 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m13039910437130240 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-03-05 02:07:27.179 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m13039910437130240 [0;39m ==> Parameters: 1(Long)
2023-03-05 02:07:27.179 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m13039910437130240 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-03-05 02:07:27.179 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m13039910437130240 [0;39m <==        Row: 1, 1, 0, æ–‡æ¡£1, 1, 2, 1
2023-03-05 02:07:27.181 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m13039910437130240 [0;39m <==        Row: 2, 1, 1, æ–‡æ¡£1.1, 1, 1, 1
2023-03-05 02:07:27.182 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m13039910437130240 [0;39m <==        Row: 4, 1, 3, æ–‡æ¡£2.1, 1, 1, 1
2023-03-05 02:07:27.182 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m13039910437130240 [0;39m <==        Row: 6, 1, 5, æ–‡æ¡£2.2.1, 1, 0, 0
2023-03-05 02:07:27.182 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m13039910437130240 [0;39m <==        Row: 3, 1, 0, æ–‡æ¡£2, 2, 0, 0
2023-03-05 02:07:27.182 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m13039910437130240 [0;39m <==        Row: 5, 1, 3, æ–‡æ¡£2.2, 2, 0, 0
2023-03-05 02:07:27.182 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m13039910437130240 [0;39m <==      Total: 6
2023-03-05 02:07:27.185 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039910437130240 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":1,"id":1,"name":"æ–‡æ¡£1","parent":0,"sort":1,"viewCount":2,"voteCount":1},{"ebookId":1,"id":2,"name":"æ–‡æ¡£1.1","parent":1,"sort":1,"viewCount":1,"voteCount":1},{"ebookId":1,"id":4,"name":"æ–‡æ¡£2.1","parent":3,"sort":1,"viewCount":1,"voteCount":1},{"ebookId":1,"id":6,"name":"æ–‡æ¡£2.2.1","parent":5,"sort":1,"viewCount":0,"voteCount":0},{"ebookId":1,"id":3,"name":"æ–‡æ¡£2","parent":0,"sort":2,"viewCount":0,"voteCount":0},{"ebookId":1,"id":5,"name":"æ–‡æ¡£2.2","parent":3,"sort":2,"viewCount":0,"voteCount":0}],"success":true}
2023-03-05 02:07:27.185 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039910437130240 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š10 ms -------------
2023-03-05 02:07:27.225 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039910646845440 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:07:27.225 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039910646845440 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/1 GET
2023-03-05 02:07:27.225 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039910646845440 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-03-05 02:07:27.225 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039910646845440 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:07:27.225 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039910646845440 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-03-05 02:07:27.226 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m13039910646845440 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-03-05 02:07:27.228 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m13039910646845440 [0;39m ==> Parameters: 1(Long)
2023-03-05 02:07:27.229 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m13039910646845440 [0;39m <==      Total: 0
2023-03-05 02:07:27.229 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m13039910646845440 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-03-05 02:07:27.230 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m13039910646845440 [0;39m ==> Parameters: 1(Long)
2023-03-05 02:07:27.230 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m13039910646845440 [0;39m <==    Updates: 1
2023-03-05 02:07:27.230 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039910646845440 [0;39m è¿”å›žç»“æžœ: {"content":"","success":true}
2023-03-05 02:07:27.231 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039910646845440 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-03-05 02:07:29.524 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039920289550336 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:07:29.524 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039920289550336 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/4 GET
2023-03-05 02:07:29.524 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039920289550336 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-03-05 02:07:29.524 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039920289550336 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:07:29.524 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039920289550336 [0;39m è¯·æ±‚å‚æ•°: [4]
2023-03-05 02:07:29.525 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m13039920289550336 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-03-05 02:07:29.525 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m13039920289550336 [0;39m ==> Parameters: 4(Long)
2023-03-05 02:07:29.526 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m13039920289550336 [0;39m <==      Total: 0
2023-03-05 02:07:29.527 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m13039920289550336 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-03-05 02:07:29.527 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m13039920289550336 [0;39m ==> Parameters: 4(Long)
2023-03-05 02:07:29.528 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m13039920289550336 [0;39m <==    Updates: 1
2023-03-05 02:07:29.528 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039920289550336 [0;39m è¿”å›žç»“æžœ: {"content":"","success":true}
2023-03-05 02:07:29.528 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039920289550336 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-03-05 02:07:32.613 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039933245755392 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:07:32.613 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039933245755392 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/vote/4 GET
2023-03-05 02:07:32.613 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039933245755392 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.vote
2023-03-05 02:07:32.613 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039933245755392 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:07:32.613 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039933245755392 [0;39m è¯·æ±‚å‚æ•°: [4]
2023-03-05 02:07:32.614 INFO  com.jiawa.wiki.util.RedisUtil                     :28   [32m13039933245755392 [0;39m keyå·²å­˜åœ¨ï¼šDOC_VOTE_4_127.0.0.1
2023-03-05 02:07:32.616 WARN  com.jiawa.wiki.config.ControllerExceptionHandler  :44   [32m13039933245755392 [0;39m ä¸šåŠ¡å¼‚å¸¸ï¼šæ‚¨å·²ç‚¹èµžè¿‡
2023-03-05 02:07:32.616 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m13039933245755392 [0;39m Resolved [com.jiawa.wiki.exception.BusinessException: æ‚¨å·²ç‚¹èµžè¿‡]
2023-03-05 02:07:34.515 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039941223321600 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:07:34.515 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039941223321600 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/5 GET
2023-03-05 02:07:34.515 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039941223321600 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-03-05 02:07:34.515 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039941223321600 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:07:34.515 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039941223321600 [0;39m è¯·æ±‚å‚æ•°: [5]
2023-03-05 02:07:34.516 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m13039941223321600 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-03-05 02:07:34.516 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m13039941223321600 [0;39m ==> Parameters: 5(Long)
2023-03-05 02:07:34.516 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m13039941223321600 [0;39m <==      Total: 0
2023-03-05 02:07:34.517 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m13039941223321600 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-03-05 02:07:34.517 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m13039941223321600 [0;39m ==> Parameters: 5(Long)
2023-03-05 02:07:34.517 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m13039941223321600 [0;39m <==    Updates: 1
2023-03-05 02:07:34.518 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13039941223321600 [0;39m è¿”å›žç»“æžœ: {"content":"","success":true}
2023-03-05 02:07:34.518 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13039941223321600 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š3 ms -------------
2023-03-05 02:07:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13039943312084992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:07:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13039943312084992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:07:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13039943312084992 [0;39m ==> Parameters:
2023-03-05 02:07:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13039943312084992 [0;39m <==    Updates: 1
2023-03-05 02:07:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13039943312084992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 02:07:35.815 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13039946675916800 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:07:35.815 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13039946675916800 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/vote/5 GET
2023-03-05 02:07:35.815 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13039946675916800 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.vote
2023-03-05 02:07:35.815 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13039946675916800 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:07:35.816 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13039946675916800 [0;39m è¯·æ±‚å‚æ•°: [5]
2023-03-05 02:07:35.818 INFO  com.jiawa.wiki.util.RedisUtil                     :31   [32m13039946675916800 [0;39m keyä¸å­˜åœ¨ï¼Œæ”¾å…¥ï¼šDOC_VOTE_5_127.0.0.1ï¼Œè¿‡æœŸ 5000 ç§’
2023-03-05 02:07:35.819 DEBUG c.j.wiki.mapper.DocMapperCust.increaseVoteCount   :137  [32m13039946675916800 [0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2023-03-05 02:07:35.819 DEBUG c.j.wiki.mapper.DocMapperCust.increaseVoteCount   :137  [32m13039946675916800 [0;39m ==> Parameters: 5(Long)
2023-03-05 02:07:35.826 DEBUG c.j.wiki.mapper.DocMapperCust.increaseVoteCount   :137  [32m13039946675916800 [0;39m <==    Updates: 1
2023-03-05 02:07:35.826 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:137  [32m13039946675916800 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2023-03-05 02:07:35.827 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:137  [32m13039946675916800 [0;39m ==> Parameters: 5(Long)
2023-03-05 02:07:35.827 TRACE com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:143  [32m13039946675916800 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-03-05 02:07:35.827 TRACE com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:143  [32m13039946675916800 [0;39m <==        Row: 5, 1, 3, æ–‡æ¡£2.2, 2, 1, 1
2023-03-05 02:07:35.827 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:137  [32m13039946675916800 [0;39m <==      Total: 1
2023-03-05 02:07:35.835 ERROR org.apache.rocketmq.spring.core.RocketMQTemplate  :153  [32m13039946675916800 [0;39m syncSend failed. destination:VOTE_TOPIC, message:GenericMessage [payload=ã€æ–‡æ¡£2.2ã€‘è¢«ç‚¹èµžï¼, headers={contentType=text/plain, id=8e6bb4cd-3e60-2417-3e38-261725ac4c4b, timestamp=1677953255828}]
2023-03-05 02:07:35.836 ERROR com.jiawa.wiki.config.ControllerExceptionHandler  :59   [32m13039946675916800 [0;39m ç³»ç»Ÿå¼‚å¸¸ï¼š
org.springframework.messaging.MessagingException: No route info of this topic, VOTE_TOPIC
See http://rocketmq.apache.org/docs/faq/ for further details.; nested exception is org.apache.rocketmq.client.exception.MQClientException: No route info of this topic, VOTE_TOPIC
See http://rocketmq.apache.org/docs/faq/ for further details.
	at org.apache.rocketmq.spring.core.RocketMQTemplate.syncSend(RocketMQTemplate.java:154)
	at org.apache.rocketmq.spring.core.RocketMQTemplate.syncSend(RocketMQTemplate.java:123)
	at org.apache.rocketmq.spring.core.RocketMQTemplate.syncSend(RocketMQTemplate.java:111)
	at org.apache.rocketmq.spring.core.RocketMQTemplate.doSend(RocketMQTemplate.java:459)
	at org.apache.rocketmq.spring.core.RocketMQTemplate.doSend(RocketMQTemplate.java:50)
	at org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)
	at org.springframework.messaging.core.AbstractMessageSendingTemplate.convertAndSend(AbstractMessageSendingTemplate.java:151)
	at org.springframework.messaging.core.AbstractMessageSendingTemplate.convertAndSend(AbstractMessageSendingTemplate.java:129)
	at org.springframework.messaging.core.AbstractMessageSendingTemplate.convertAndSend(AbstractMessageSendingTemplate.java:122)
	at com.jiawa.wiki.service.DocService.vote(DocService.java:167)
	at com.jiawa.wiki.service.DocService$$FastClassBySpringCGLIB$$50aa4805.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:687)
	at com.jiawa.wiki.service.DocService$$EnhancerBySpringCGLIB$$d1ec5ca6.vote(<generated>)
	at com.jiawa.wiki.controller.DocController.vote(DocController.java:65)
	at com.jiawa.wiki.controller.DocController$$FastClassBySpringCGLIB$$36fc4971.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:58)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at com.jiawa.wiki.aspect.LogAspect.doAround(LogAspect.java:86)
	at sun.reflect.GeneratedMethodAccessor105.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691)
	at com.jiawa.wiki.controller.DocController$$EnhancerBySpringCGLIB$$b3382677.vote(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:893)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:807)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1061)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:961)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:626)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.rocketmq.client.exception.MQClientException: No route info of this topic, VOTE_TOPIC
See http://rocketmq.apache.org/docs/faq/ for further details.
	at org.apache.rocketmq.client.impl.producer.DefaultMQProducerImpl.sendDefaultImpl(DefaultMQProducerImpl.java:656)
	at org.apache.rocketmq.client.impl.producer.DefaultMQProducerImpl.send(DefaultMQProducerImpl.java:1279)
	at org.apache.rocketmq.client.producer.DefaultMQProducer.send(DefaultMQProducer.java:301)
	at org.apache.rocketmq.spring.core.RocketMQTemplate.syncSend(RocketMQTemplate.java:148)
	... 87 common frames omitted
2023-03-05 02:07:35.836 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m13039946675916800 [0;39m Resolved [org.springframework.messaging.MessagingException: No route info of this topic, VOTE_TOPIC
See http://rocketmq.apache.org/docs/faq/ for further details.; nested exception is org.apache.rocketmq.client.exception.MQClientException: No route info of this topic, VOTE_TOPIC
See http://rocketmq.apache.org/docs/faq/ for further details.]
2023-03-05 02:07:56.782 INFO  com.jiawa.wiki.WikiApplication             :55   [32m                  [0;39m Starting WikiApplication using Java 1.8.0_271 on LAPTOP-TLCI2GAA with PID 23936 (D:\work\jiawawiki\target\classes started by k in D:\work\jiawawiki)
2023-03-05 02:07:56.786 INFO  com.jiawa.wiki.WikiApplication             :660  [32m                  [0;39m No active profile set, falling back to default profiles: default
2023-03-05 02:07:56.791 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.1.6.Final
2023-03-05 02:07:56.836 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-03-05 02:07:56.836 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-03-05 02:07:57.398 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :250  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-05 02:07:57.400 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :128  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-03-05 02:07:57.416 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :188  [32m                  [0;39m Finished Spring Data repository scanning in 5 ms. Found 0 Redis repository interfaces.
2023-03-05 02:07:57.605 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration$$EnhancerBySpringCGLIB$$c060c56e] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:07:57.613 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:07:58.271 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'defaultMQProducer' of type [org.apache.rocketmq.client.producer.DefaultMQProducer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:07:58.276 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonConfig' of type [com.jiawa.wiki.config.JacksonConfig$$EnhancerBySpringCGLIB$$629b3a6f] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:07:58.277 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:07:58.279 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:07:58.283 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'spring.jackson-org.springframework.boot.autoconfigure.jackson.JacksonProperties' of type [org.springframework.boot.autoconfigure.jackson.JacksonProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:07:58.285 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'standardJacksonObjectMapperBuilderCustomizer' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration$StandardJackson2ObjectMapperBuilderCustomizer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:07:58.287 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:07:58.289 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'parameterNamesModule' of type [com.fasterxml.jackson.module.paramnames.ParameterNamesModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:07:58.290 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:07:58.306 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jsonComponentModule' of type [org.springframework.boot.jackson.JsonComponentModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:07:58.306 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.data.web.config.SpringDataJacksonConfiguration' of type [org.springframework.data.web.config.SpringDataJacksonConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:07:58.308 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonGeoModule' of type [org.springframework.data.geo.GeoModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:07:58.309 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapperBuilder' of type [org.springframework.http.converter.json.Jackson2ObjectMapperBuilder] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:07:58.323 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapper' of type [com.fasterxml.jackson.databind.ObjectMapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:07:59.630 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketMQTemplate' of type [org.apache.rocketmq.spring.core.RocketMQTemplate] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:07:59.631 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'transactionHandlerRegistry' of type [org.apache.rocketmq.spring.config.TransactionHandlerRegistry] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 02:08:00.017 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2023-03-05 02:08:00.027 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2023-03-05 02:08:00.028 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2023-03-05 02:08:00.028 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.39]
2023-03-05 02:08:00.146 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2023-03-05 02:08:00.146 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :289  [32m                  [0;39m Root WebApplicationContext: initialization completed in 3309 ms
2023-03-05 02:08:00.862 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2023-03-05 02:08:01.134 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2023-03-05 02:08:01.178 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2023-03-05 02:08:01.690 INFO  o.a.r.s.support.DefaultRocketMQListenerContainer  :243  [32m                  [0;39m running container: DefaultRocketMQListenerContainer{consumerGroup='default', nameServer='127.0.0.1:9876', topic='VOTE_TOPIC', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
2023-03-05 02:08:01.690 INFO  o.a.r.s.a.ListenerContainerConfiguration          :107  [32m                  [0;39m Register the listener to container, listenerBeanName:voteTopicConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-03-05 02:08:01.707 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2023-03-05 02:08:01.717 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2023-03-05 02:08:01.730 INFO  com.jiawa.wiki.WikiApplication             :61   [32m                  [0;39m Started WikiApplication in 5.578 seconds (JVM running for 7.035)
2023-03-05 02:08:01.733 INFO  com.jiawa.wiki.WikiApplication             :26   [32m                  [0;39m å¯åŠ¨æˆåŠŸï¼ï¼
2023-03-05 02:08:01.733 INFO  com.jiawa.wiki.WikiApplication             :27   [32m                  [0;39m åœ°å€: 	http://127.0.0.1:8880
2023-03-05 02:08:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13040069099261952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:08:05.022 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m13040069099261952 [0;39m HikariPool-1 - Starting...
2023-03-05 02:08:05.118 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m13040069099261952 [0;39m HikariPool-1 - Start completed.
2023-03-05 02:08:05.122 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13040069099261952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:08:05.137 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13040069099261952 [0;39m ==> Parameters:
2023-03-05 02:08:05.144 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13040069099261952 [0;39m <==    Updates: 1
2023-03-05 02:08:05.147 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13040069099261952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š143æ¯«ç§’
2023-03-05 02:08:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13040194940964864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:08:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13040194940964864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:08:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13040194940964864 [0;39m ==> Parameters:
2023-03-05 02:08:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13040194940964864 [0;39m <==    Updates: 1
2023-03-05 02:08:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13040194940964864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 02:09:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13040299785981952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 02:09:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13040299785981952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 02:09:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13040299785981952 [0;39m ==> Parameters:
2023-03-05 02:09:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13040299785981952 [0;39m <==    Updates: 0
2023-03-05 02:09:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13040299785981952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-05 02:09:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13040320786862080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:09:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13040320786862080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:09:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13040320786862080 [0;39m ==> Parameters:
2023-03-05 02:09:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13040320786862080 [0;39m <==    Updates: 1
2023-03-05 02:09:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13040320786862080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 02:09:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13040446615982080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:09:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13040446615982080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:09:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13040446615982080 [0;39m ==> Parameters:
2023-03-05 02:09:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13040446615982080 [0;39m <==    Updates: 1
2023-03-05 02:09:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13040446615982080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 02:10:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13040551448416256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 02:10:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13040551448416256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 02:10:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13040551448416256 [0;39m ==> Parameters:
2023-03-05 02:10:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13040551448416256 [0;39m <==    Updates: 0
2023-03-05 02:10:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13040551448416256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-05 02:10:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13040572457684992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:10:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13040572457684992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:10:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13040572457684992 [0;39m ==> Parameters:
2023-03-05 02:10:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13040572457684992 [0;39m <==    Updates: 1
2023-03-05 02:10:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13040572457684992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 02:10:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13040698261639168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:10:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13040698261639168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:10:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13040698261639168 [0;39m ==> Parameters:
2023-03-05 02:10:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13040698261639168 [0;39m <==    Updates: 1
2023-03-05 02:10:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13040698261639168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 02:11:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13040803148599296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 02:11:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13040803148599296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 02:11:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13040803148599296 [0;39m ==> Parameters:
2023-03-05 02:11:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13040803148599296 [0;39m <==    Updates: 0
2023-03-05 02:11:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13040803148599296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 02:11:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13040824086564864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:11:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13040824086564864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:11:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13040824086564864 [0;39m ==> Parameters:
2023-03-05 02:11:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13040824086564864 [0;39m <==    Updates: 1
2023-03-05 02:11:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13040824086564864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 02:11:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13040949928267776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:11:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13040949928267776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:11:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13040949928267776 [0;39m ==> Parameters:
2023-03-05 02:11:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13040949928267776 [0;39m <==    Updates: 1
2023-03-05 02:11:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13040949928267776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 02:12:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13041054781673472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 02:12:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13041054781673472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 02:12:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13041054781673472 [0;39m ==> Parameters:
2023-03-05 02:12:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13041054781673472 [0;39m <==    Updates: 0
2023-03-05 02:12:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13041054781673472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-05 02:12:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13041075774164992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:12:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13041075774164992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:12:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13041075774164992 [0;39m ==> Parameters:
2023-03-05 02:12:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13041075774164992 [0;39m <==    Updates: 1
2023-03-05 02:12:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13041075774164992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 02:12:24.287 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-03-05 02:12:24.287 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2023-03-05 02:12:24.288 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 1 ms
2023-03-05 02:12:24.334 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13041156808118272 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:12:24.335 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13041156808118272 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/6 GET
2023-03-05 02:12:24.335 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13041156808118272 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-03-05 02:12:24.335 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13041156808118272 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:12:24.336 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13041156808118272 [0;39m è¯·æ±‚å‚æ•°: [6]
2023-03-05 02:12:24.342 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m13041156808118272 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-03-05 02:12:24.342 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m13041156808118272 [0;39m ==> Parameters: 6(Long)
2023-03-05 02:12:24.354 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m13041156808118272 [0;39m <==      Total: 0
2023-03-05 02:12:24.358 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m13041156808118272 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-03-05 02:12:24.359 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m13041156808118272 [0;39m ==> Parameters: 6(Long)
2023-03-05 02:12:24.360 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m13041156808118272 [0;39m <==    Updates: 1
2023-03-05 02:12:24.362 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13041156808118272 [0;39m è¿”å›žç»“æžœ: {"content":"","success":true}
2023-03-05 02:12:24.362 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13041156808118272 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š29 ms -------------
2023-03-05 02:12:25.540 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13041161870643200 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:12:25.540 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13041161870643200 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/vote/6 GET
2023-03-05 02:12:25.540 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13041161870643200 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.vote
2023-03-05 02:12:25.540 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13041161870643200 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:12:25.540 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13041161870643200 [0;39m è¯·æ±‚å‚æ•°: [6]
2023-03-05 02:12:25.785 INFO  com.jiawa.wiki.util.RedisUtil                     :31   [32m13041161870643200 [0;39m keyä¸å­˜åœ¨ï¼Œæ”¾å…¥ï¼šDOC_VOTE_6_127.0.0.1ï¼Œè¿‡æœŸ 5000 ç§’
2023-03-05 02:12:25.788 DEBUG c.j.wiki.mapper.DocMapperCust.increaseVoteCount   :137  [32m13041161870643200 [0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2023-03-05 02:12:25.789 DEBUG c.j.wiki.mapper.DocMapperCust.increaseVoteCount   :137  [32m13041161870643200 [0;39m ==> Parameters: 6(Long)
2023-03-05 02:12:25.796 DEBUG c.j.wiki.mapper.DocMapperCust.increaseVoteCount   :137  [32m13041161870643200 [0;39m <==    Updates: 1
2023-03-05 02:12:25.797 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:137  [32m13041161870643200 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2023-03-05 02:12:25.798 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:137  [32m13041161870643200 [0;39m ==> Parameters: 6(Long)
2023-03-05 02:12:25.798 TRACE com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:143  [32m13041161870643200 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-03-05 02:12:25.800 TRACE com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:143  [32m13041161870643200 [0;39m <==        Row: 6, 1, 5, æ–‡æ¡£2.2.1, 1, 1, 1
2023-03-05 02:12:25.801 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:137  [32m13041161870643200 [0;39m <==      Total: 1
2023-03-05 02:12:26.277 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13041161870643200 [0;39m è¿”å›žç»“æžœ: {"success":true}
2023-03-05 02:12:26.278 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13041161870643200 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š739 ms -------------
2023-03-05 02:12:26.284 INFO  com.jiawa.wiki.rocketmq.VoteTopicConsumer         :25   [32m                  [0;39m ROCKETMQæ”¶åˆ°æ¶ˆæ¯ï¼šã€æ–‡æ¡£2.2.1ã€‘è¢«ç‚¹èµžï¼
2023-03-05 02:12:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13041201590702080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:12:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13041201590702080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:12:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13041201590702080 [0;39m ==> Parameters:
2023-03-05 02:12:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13041201590702080 [0;39m <==    Updates: 1
2023-03-05 02:12:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13041201590702080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 02:12:35.671 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13041204363137024 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 02:12:35.672 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13041204363137024 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/vote/6 GET
2023-03-05 02:12:35.672 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13041204363137024 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.vote
2023-03-05 02:12:35.672 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13041204363137024 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 02:12:35.672 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13041204363137024 [0;39m è¯·æ±‚å‚æ•°: [6]
2023-03-05 02:12:35.673 INFO  com.jiawa.wiki.util.RedisUtil                     :28   [32m13041204363137024 [0;39m keyå·²å­˜åœ¨ï¼šDOC_VOTE_6_127.0.0.1
2023-03-05 02:12:35.675 WARN  com.jiawa.wiki.config.ControllerExceptionHandler  :44   [32m13041204363137024 [0;39m ä¸šåŠ¡å¼‚å¸¸ï¼šæ‚¨å·²ç‚¹èµžè¿‡
2023-03-05 02:12:35.677 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m13041204363137024 [0;39m Resolved [com.jiawa.wiki.exception.BusinessException: æ‚¨å·²ç‚¹èµžè¿‡]
2023-03-05 02:13:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13041306448302080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 02:13:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13041306448302080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 02:13:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13041306448302080 [0;39m ==> Parameters:
2023-03-05 02:13:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13041306448302080 [0;39m <==    Updates: 0
2023-03-05 02:13:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13041306448302080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 02:13:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13041327428210688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:13:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13041327428210688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:13:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13041327428210688 [0;39m ==> Parameters:
2023-03-05 02:13:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13041327428210688 [0;39m <==    Updates: 1
2023-03-05 02:13:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13041327428210688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 02:13:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13041453265719296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:13:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13041453265719296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:13:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13041453265719296 [0;39m ==> Parameters:
2023-03-05 02:13:35.031 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13041453265719296 [0;39m <==    Updates: 1
2023-03-05 02:13:35.032 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13041453265719296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š18æ¯«ç§’
2023-03-05 02:14:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13041558123319296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 02:14:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13041558123319296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 02:14:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13041558123319296 [0;39m ==> Parameters:
2023-03-05 02:14:00.026 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13041558123319296 [0;39m <==    Updates: 0
2023-03-05 02:14:00.026 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13041558123319296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-05 02:14:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13041579099033600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:14:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13041579099033600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:14:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13041579099033600 [0;39m ==> Parameters:
2023-03-05 02:14:05.026 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13041579099033600 [0;39m <==    Updates: 1
2023-03-05 02:14:05.027 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13041579099033600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 02:14:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13041704919764992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:14:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13041704919764992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:14:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13041704919764992 [0;39m ==> Parameters:
2023-03-05 02:14:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13041704919764992 [0;39m <==    Updates: 1
2023-03-05 02:14:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13041704919764992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-05 02:15:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13041809760587776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 02:15:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13041809760587776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 02:15:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13041809760587776 [0;39m ==> Parameters:
2023-03-05 02:15:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13041809760587776 [0;39m <==    Updates: 0
2023-03-05 02:15:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13041809760587776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-05 02:15:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13041830727913472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:15:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13041830727913472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:15:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13041830727913472 [0;39m ==> Parameters:
2023-03-05 02:15:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13041830727913472 [0;39m <==    Updates: 1
2023-03-05 02:15:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13041830727913472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 02:15:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13041956561227776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:15:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13041956561227776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:15:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13041956561227776 [0;39m ==> Parameters:
2023-03-05 02:15:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13041956561227776 [0;39m <==    Updates: 1
2023-03-05 02:15:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13041956561227776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 02:16:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13042061397856256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 02:16:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13042061397856256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 02:16:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13042061397856256 [0;39m ==> Parameters:
2023-03-05 02:16:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13042061397856256 [0;39m <==    Updates: 0
2023-03-05 02:16:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13042061397856256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-03-05 02:16:05.020 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13042082436485120 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:16:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13042082436485120 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:16:05.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13042082436485120 [0;39m ==> Parameters:
2023-03-05 02:16:05.032 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13042082436485120 [0;39m <==    Updates: 1
2023-03-05 02:16:05.032 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13042082436485120 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 02:16:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13042208236244992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:16:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13042208236244992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:16:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13042208236244992 [0;39m ==> Parameters:
2023-03-05 02:16:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13042208236244992 [0;39m <==    Updates: 1
2023-03-05 02:16:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13042208236244992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 02:17:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13042313093844992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 02:17:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13042313093844992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 02:17:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13042313093844992 [0;39m ==> Parameters:
2023-03-05 02:17:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13042313093844992 [0;39m <==    Updates: 0
2023-03-05 02:17:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13042313093844992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 02:17:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13042334065364992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:17:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13042334065364992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:17:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13042334065364992 [0;39m ==> Parameters:
2023-03-05 02:17:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13042334065364992 [0;39m <==    Updates: 1
2023-03-05 02:17:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13042334065364992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 02:17:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13042459860930560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:17:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13042459860930560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:17:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13042459860930560 [0;39m ==> Parameters:
2023-03-05 02:17:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13042459860930560 [0;39m <==    Updates: 1
2023-03-05 02:17:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13042459860930560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 02:18:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13042564722724864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 02:18:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13042564722724864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 02:18:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13042564722724864 [0;39m ==> Parameters:
2023-03-05 02:18:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13042564722724864 [0;39m <==    Updates: 0
2023-03-05 02:18:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13042564722724864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 02:18:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13042585723604992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:18:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13042585723604992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:18:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13042585723604992 [0;39m ==> Parameters:
2023-03-05 02:18:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13042585723604992 [0;39m <==    Updates: 1
2023-03-05 02:18:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13042585723604992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 02:18:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13042711502393344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:18:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13042711502393344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:18:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13042711502393344 [0;39m ==> Parameters:
2023-03-05 02:18:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13042711502393344 [0;39m <==    Updates: 1
2023-03-05 02:18:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13042711502393344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 02:19:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13042816410324992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 02:19:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13042816410324992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 02:19:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13042816410324992 [0;39m ==> Parameters:
2023-03-05 02:19:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13042816410324992 [0;39m <==    Updates: 0
2023-03-05 02:19:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13042816410324992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-05 02:19:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13042837348290560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:19:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13042837348290560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:19:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13042837348290560 [0;39m ==> Parameters:
2023-03-05 02:19:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13042837348290560 [0;39m <==    Updates: 1
2023-03-05 02:19:05.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13042837348290560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-05 02:19:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13042963181604864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:19:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13042963181604864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:19:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13042963181604864 [0;39m ==> Parameters:
2023-03-05 02:19:35.025 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13042963181604864 [0;39m <==    Updates: 1
2023-03-05 02:19:35.029 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13042963181604864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 02:20:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13043068072759296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 02:20:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13043068072759296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 02:20:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13043068072759296 [0;39m ==> Parameters:
2023-03-05 02:20:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13043068072759296 [0;39m <==    Updates: 0
2023-03-05 02:20:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13043068072759296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 02:20:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13043089035890688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:20:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13043089035890688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:20:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13043089035890688 [0;39m ==> Parameters:
2023-03-05 02:20:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13043089035890688 [0;39m <==    Updates: 1
2023-03-05 02:20:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13043089035890688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-05 02:20:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13043214852427776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:20:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13043214852427776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:20:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13043214852427776 [0;39m ==> Parameters:
2023-03-05 02:20:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13043214852427776 [0;39m <==    Updates: 1
2023-03-05 02:20:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13043214852427776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 02:21:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13043319726804992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 02:21:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13043319726804992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 02:21:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13043319726804992 [0;39m ==> Parameters:
2023-03-05 02:21:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13043319726804992 [0;39m <==    Updates: 0
2023-03-05 02:21:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13043319726804992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 02:21:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13043340668964864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:21:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13043340668964864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:21:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13043340668964864 [0;39m ==> Parameters:
2023-03-05 02:21:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13043340668964864 [0;39m <==    Updates: 1
2023-03-05 02:21:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13043340668964864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 02:21:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13043466485501952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:21:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13043466485501952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:21:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13043466485501952 [0;39m ==> Parameters:
2023-03-05 02:21:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13043466485501952 [0;39m <==    Updates: 1
2023-03-05 02:21:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13043466485501952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 02:22:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13043571355684864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 02:22:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13043571355684864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 02:22:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13043571355684864 [0;39m ==> Parameters:
2023-03-05 02:22:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13043571355684864 [0;39m <==    Updates: 0
2023-03-05 02:22:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13043571355684864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 02:22:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13043592327204864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:22:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13043592327204864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:22:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13043592327204864 [0;39m ==> Parameters:
2023-03-05 02:22:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13043592327204864 [0;39m <==    Updates: 1
2023-03-05 02:22:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13043592327204864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 02:22:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13043718194073600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 02:22:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13043718194073600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 02:22:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13043718194073600 [0;39m ==> Parameters:
2023-03-05 02:22:35.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13043718194073600 [0;39m <==    Updates: 1
2023-03-05 02:22:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13043718194073600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 13:28:21.969 INFO  com.jiawa.wiki.WikiApplication                    :55   [32m                  [0;39m Starting WikiApplication using Java 1.8.0_271 on LAPTOP-TLCI2GAA with PID 15912 (D:\work\jiawawiki\target\classes started by k in D:\work\jiawawiki)
2023-03-05 13:28:21.980 INFO  com.jiawa.wiki.WikiApplication                    :660  [32m                  [0;39m No active profile set, falling back to default profiles: default
2023-03-05 13:28:22.018 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.1.6.Final
2023-03-05 13:28:22.065 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-03-05 13:28:22.066 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-03-05 13:28:24.642 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :250  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-05 13:28:24.644 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :128  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-03-05 13:28:24.686 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :188  [32m                  [0;39m Finished Spring Data repository scanning in 24 ms. Found 0 Redis repository interfaces.
2023-03-05 13:28:25.436 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration$$EnhancerBySpringCGLIB$$c2b1372a] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 13:28:25.449 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 13:28:27.316 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'defaultMQProducer' of type [org.apache.rocketmq.client.producer.DefaultMQProducer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 13:28:27.319 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonConfig' of type [com.jiawa.wiki.config.JacksonConfig$$EnhancerBySpringCGLIB$$64ebac2b] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 13:28:27.320 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 13:28:27.322 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 13:28:27.329 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'spring.jackson-org.springframework.boot.autoconfigure.jackson.JacksonProperties' of type [org.springframework.boot.autoconfigure.jackson.JacksonProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 13:28:27.331 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'standardJacksonObjectMapperBuilderCustomizer' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration$StandardJackson2ObjectMapperBuilderCustomizer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 13:28:27.334 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 13:28:27.337 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'parameterNamesModule' of type [com.fasterxml.jackson.module.paramnames.ParameterNamesModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 13:28:27.338 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 13:28:27.359 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jsonComponentModule' of type [org.springframework.boot.jackson.JsonComponentModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 13:28:27.360 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.data.web.config.SpringDataJacksonConfiguration' of type [org.springframework.data.web.config.SpringDataJacksonConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 13:28:27.363 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonGeoModule' of type [org.springframework.data.geo.GeoModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 13:28:27.367 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapperBuilder' of type [org.springframework.http.converter.json.Jackson2ObjectMapperBuilder] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 13:28:27.395 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapper' of type [com.fasterxml.jackson.databind.ObjectMapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 13:28:30.472 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketMQTemplate' of type [org.apache.rocketmq.spring.core.RocketMQTemplate] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 13:28:30.474 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'transactionHandlerRegistry' of type [org.apache.rocketmq.spring.config.TransactionHandlerRegistry] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 13:28:31.472 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2023-03-05 13:28:31.489 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2023-03-05 13:28:31.491 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2023-03-05 13:28:31.493 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.39]
2023-03-05 13:28:31.668 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2023-03-05 13:28:31.668 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :289  [32m                  [0;39m Root WebApplicationContext: initialization completed in 9600 ms
2023-03-05 13:28:32.662 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 13:28:33.022 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 13:28:33.632 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2023-03-05 13:28:35.872 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2023-03-05 13:28:36.707 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2023-03-05 13:28:48.077 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 13:28:48.077 INFO  o.a.r.s.support.DefaultRocketMQListenerContainer  :243  [32m                  [0;39m running container: DefaultRocketMQListenerContainer{consumerGroup='default', nameServer='127.0.0.1:9876', topic='VOTE_TOPIC', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
2023-03-05 13:28:48.080 INFO  o.a.r.s.a.ListenerContainerConfiguration          :107  [32m                  [0;39m Register the listener to container, listenerBeanName:voteTopicConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-03-05 13:28:48.131 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2023-03-05 13:28:48.153 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2023-03-05 13:28:48.229 INFO  com.jiawa.wiki.WikiApplication                    :61   [32m                  [0;39m Started WikiApplication in 31.773 seconds (JVM running for 38.62)
2023-03-05 13:28:48.242 INFO  com.jiawa.wiki.WikiApplication                    :26   [32m                  [0;39m å¯åŠ¨æˆåŠŸï¼ï¼
2023-03-05 13:28:48.243 INFO  com.jiawa.wiki.WikiApplication                    :27   [32m                  [0;39m åœ°å€: 	http://127.0.0.1:8880
2023-03-05 13:28:52.670 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 13:29:00.030 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13211427502428160 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 13:29:00.123 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m13211427502428160 [0;39m HikariPool-1 - Starting...
2023-03-05 13:29:00.529 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m13211427502428160 [0;39m HikariPool-1 - Start completed.
2023-03-05 13:29:00.538 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13211427502428160 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 13:29:00.568 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13211427502428160 [0;39m ==> Parameters: 
2023-03-05 13:29:00.582 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13211427502428160 [0;39m <==    Updates: 0
2023-03-05 13:29:00.584 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13211427502428160 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š553æ¯«ç§’
2023-03-05 13:29:02.560 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 13:29:03.410 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 13:29:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13211448411033600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 13:29:05.028 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13211448411033600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 13:29:05.028 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13211448411033600 [0;39m ==> Parameters: 
2023-03-05 13:29:05.034 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13211448411033600 [0;39m <==    Updates: 1
2023-03-05 13:29:05.034 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13211448411033600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š19æ¯«ç§’
2023-03-05 13:29:05.434 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 13:29:17.191 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 13:29:32.997 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 13:29:35.041 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13211574349205504 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 13:29:35.043 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13211574349205504 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 13:29:35.045 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13211574349205504 [0;39m ==> Parameters: 
2023-03-05 13:29:35.047 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13211574349205504 [0;39m <==    Updates: 1
2023-03-05 13:29:35.047 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13211574349205504 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-05 13:29:35.405 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 13:29:39.491 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 13:29:41.705 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 13:30:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13211679089364992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 13:30:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13211679089364992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 13:30:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13211679089364992 [0;39m ==> Parameters: 
2023-03-05 13:30:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13211679089364992 [0;39m <==    Updates: 0
2023-03-05 13:30:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13211679089364992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 13:30:02.576 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 13:30:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13211700065079296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 13:30:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13211700065079296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 13:30:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13211700065079296 [0;39m ==> Parameters: 
2023-03-05 13:30:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13211700065079296 [0;39m <==    Updates: 1
2023-03-05 13:30:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13211700065079296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-05 13:30:06.057 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 13:30:08.110 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 13:30:33.134 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 13:30:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13211825898393600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 13:30:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13211825898393600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 13:30:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13211825898393600 [0;39m ==> Parameters: 
2023-03-05 13:30:35.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13211825898393600 [0;39m <==    Updates: 1
2023-03-05 13:30:35.025 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13211825898393600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 13:30:37.219 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 13:30:55.475 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 13:30:57.535 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 13:31:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13211930714050560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 13:31:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13211930714050560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 13:31:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13211930714050560 [0;39m ==> Parameters: 
2023-03-05 13:31:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13211930714050560 [0;39m <==    Updates: 0
2023-03-05 13:31:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13211930714050560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-05 13:31:02.542 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 13:31:05.000 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13211951664599040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 13:31:05.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13211951664599040 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 13:31:05.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13211951664599040 [0;39m ==> Parameters: 
2023-03-05 13:31:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13211951664599040 [0;39m <==    Updates: 1
2023-03-05 13:31:05.003 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13211951664599040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-05 13:31:05.300 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 13:31:21.712 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:19:04.884 INFO  com.jiawa.wiki.WikiApplication                    :55   [32m                  [0;39m Starting WikiApplication using Java 1.8.0_271 on LAPTOP-TLCI2GAA with PID 14488 (D:\work\jiawawiki\target\classes started by k in D:\work\jiawawiki)
2023-03-05 14:19:04.887 INFO  com.jiawa.wiki.WikiApplication                    :660  [32m                  [0;39m No active profile set, falling back to default profiles: default
2023-03-05 14:19:04.908 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.1.6.Final
2023-03-05 14:19:05.019 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-03-05 14:19:05.020 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-03-05 14:19:07.164 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :250  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-05 14:19:07.192 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :128  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-03-05 14:19:07.344 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :188  [32m                  [0;39m Finished Spring Data repository scanning in 62 ms. Found 0 Redis repository interfaces.
2023-03-05 14:19:08.144 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration$$EnhancerBySpringCGLIB$$806bb79e] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 14:19:08.185 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 14:19:10.323 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'defaultMQProducer' of type [org.apache.rocketmq.client.producer.DefaultMQProducer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 14:19:10.327 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonConfig' of type [com.jiawa.wiki.config.JacksonConfig$$EnhancerBySpringCGLIB$$22a62c9f] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 14:19:10.329 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 14:19:10.331 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 14:19:10.335 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'spring.jackson-org.springframework.boot.autoconfigure.jackson.JacksonProperties' of type [org.springframework.boot.autoconfigure.jackson.JacksonProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 14:19:10.336 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'standardJacksonObjectMapperBuilderCustomizer' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration$StandardJackson2ObjectMapperBuilderCustomizer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 14:19:10.340 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 14:19:10.343 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'parameterNamesModule' of type [com.fasterxml.jackson.module.paramnames.ParameterNamesModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 14:19:10.344 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 14:19:10.382 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jsonComponentModule' of type [org.springframework.boot.jackson.JsonComponentModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 14:19:10.383 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.data.web.config.SpringDataJacksonConfiguration' of type [org.springframework.data.web.config.SpringDataJacksonConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 14:19:10.524 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonGeoModule' of type [org.springframework.data.geo.GeoModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 14:19:10.526 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapperBuilder' of type [org.springframework.http.converter.json.Jackson2ObjectMapperBuilder] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 14:19:10.545 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapper' of type [com.fasterxml.jackson.databind.ObjectMapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 14:19:14.756 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketMQTemplate' of type [org.apache.rocketmq.spring.core.RocketMQTemplate] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 14:19:14.757 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'transactionHandlerRegistry' of type [org.apache.rocketmq.spring.config.TransactionHandlerRegistry] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-05 14:19:16.545 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2023-03-05 14:19:16.566 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2023-03-05 14:19:16.567 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2023-03-05 14:19:16.569 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.39]
2023-03-05 14:19:16.796 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2023-03-05 14:19:16.798 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :289  [32m                  [0;39m Root WebApplicationContext: initialization completed in 11777 ms
2023-03-05 14:19:21.312 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:19:21.319 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:19:23.159 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2023-03-05 14:19:24.367 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2023-03-05 14:19:24.492 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2023-03-05 14:19:29.254 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:19:31.657 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:19:31.660 INFO  o.a.r.s.support.DefaultRocketMQListenerContainer  :243  [32m                  [0;39m running container: DefaultRocketMQListenerContainer{consumerGroup='default', nameServer='127.0.0.1:9876', topic='VOTE_TOPIC', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
2023-03-05 14:19:31.661 INFO  o.a.r.s.a.ListenerContainerConfiguration          :107  [32m                  [0;39m Register the listener to container, listenerBeanName:voteTopicConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-03-05 14:19:31.684 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2023-03-05 14:19:31.698 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2023-03-05 14:19:31.736 INFO  com.jiawa.wiki.WikiApplication                    :61   [32m                  [0;39m Started WikiApplication in 28.773 seconds (JVM running for 34.751)
2023-03-05 14:19:31.741 INFO  com.jiawa.wiki.WikiApplication                    :26   [32m                  [0;39m å¯åŠ¨æˆåŠŸï¼ï¼
2023-03-05 14:19:31.741 INFO  com.jiawa.wiki.WikiApplication                    :27   [32m                  [0;39m åœ°å€: 	http://127.0.0.1:8880
2023-03-05 14:19:34.051 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:19:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13224157106016256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:19:35.034 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m13224157106016256 [0;39m HikariPool-1 - Starting...
2023-03-05 14:19:35.283 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m13224157106016256 [0;39m HikariPool-1 - Start completed.
2023-03-05 14:19:35.293 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13224157106016256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:19:35.326 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13224157106016256 [0;39m ==> Parameters: 
2023-03-05 14:19:35.337 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13224157106016256 [0;39m <==    Updates: 1
2023-03-05 14:19:35.339 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13224157106016256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š335æ¯«ç§’
2023-03-05 14:19:36.355 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:19:47.055 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:19:49.653 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:20:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13224261963616256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:20:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13224261963616256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:20:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13224261963616256 [0;39m ==> Parameters: 
2023-03-05 14:20:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13224261963616256 [0;39m <==    Updates: 0
2023-03-05 14:20:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13224261963616256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š14æ¯«ç§’
2023-03-05 14:20:00.649 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:20:03.755 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-03-05 14:20:03.755 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2023-03-05 14:20:03.757 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 1 ms
2023-03-05 14:20:03.768 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m                  [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-05 14:20:03.769 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m                  [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://localhost:8880/demo/list
2023-03-05 14:20:03.769 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m                  [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼šnull
2023-03-05 14:20:03.769 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :49   [32m                  [0;39m tokenä¸ºç©ºï¼Œè¯·æ±‚è¢«æ‹¦æˆª
2023-03-05 14:20:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13224282930941952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:20:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13224282930941952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:20:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13224282930941952 [0;39m ==> Parameters: 
2023-03-05 14:20:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13224282930941952 [0;39m <==    Updates: 1
2023-03-05 14:20:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13224282930941952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:20:08.223 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m13224296428212224 [0;39m ------------- å¼€å§‹ -------------
2023-03-05 14:20:08.223 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m13224296428212224 [0;39m è¯·æ±‚åœ°å€: http://localhost:8880/ebook/list GET
2023-03-05 14:20:08.223 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m13224296428212224 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-05 14:20:08.224 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m13224296428212224 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-05 14:20:08.280 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m13224296428212224 [0;39m è¯·æ±‚å‚æ•°: [{"name":"Spring","page":0,"size":0}]
2023-03-05 14:20:08.333 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13224296428212224 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (`name` LIKE ?)
2023-03-05 14:20:08.333 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13224296428212224 [0;39m ==> Parameters: %Spring%(String)
2023-03-05 14:20:08.351 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13224296428212224 [0;39m <==    Columns: count(0)
2023-03-05 14:20:08.351 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m13224296428212224 [0;39m <==        Row: 1
2023-03-05 14:20:08.353 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m13224296428212224 [0;39m <==      Total: 1
2023-03-05 14:20:08.354 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13224296428212224 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( `name` like ? )
2023-03-05 14:20:08.354 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13224296428212224 [0;39m ==> Parameters: %Spring%(String)
2023-03-05 14:20:08.355 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13224296428212224 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-05 14:20:08.356 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m13224296428212224 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 8, 5
2023-03-05 14:20:08.357 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m13224296428212224 [0;39m <==      Total: 1
2023-03-05 14:20:08.359 INFO  com.jiawa.wiki.service.EbookService               :46   [32m13224296428212224 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-05 14:20:08.359 INFO  com.jiawa.wiki.service.EbookService               :47   [32m13224296428212224 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-05 14:20:08.371 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m13224296428212224 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":8,"voteCount":5}],"total":1},"success":true}
2023-03-05 14:20:08.372 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m13224296428212224 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š151 ms -------------
2023-03-05 14:20:15.260 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:20:16.844 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:20:17.302 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:20:19.350 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:20:22.700 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:20:24.776 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:20:35.018 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13224408822976512 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:20:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13224408822976512 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:20:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13224408822976512 [0;39m ==> Parameters: 
2023-03-05 14:20:35.027 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13224408822976512 [0;39m <==    Updates: 1
2023-03-05 14:20:35.027 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13224408822976512 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:20:46.815 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:20:48.246 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:20:50.634 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:20:52.679 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:21:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13224513634439168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:21:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13224513634439168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:21:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13224513634439168 [0;39m ==> Parameters: 
2023-03-05 14:21:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13224513634439168 [0;39m <==    Updates: 0
2023-03-05 14:21:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13224513634439168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 14:21:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13224534589181952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:21:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13224534589181952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:21:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13224534589181952 [0;39m ==> Parameters: 
2023-03-05 14:21:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13224534589181952 [0;39m <==    Updates: 1
2023-03-05 14:21:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13224534589181952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 14:21:15.031 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:21:17.113 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:21:17.348 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:21:21.780 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:21:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13224660439273472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:21:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13224660439273472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:21:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13224660439273472 [0;39m ==> Parameters: 
2023-03-05 14:21:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13224660439273472 [0;39m <==    Updates: 1
2023-03-05 14:21:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13224660439273472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 14:21:40.003 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:21:42.531 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:21:46.777 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:21:49.428 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:22:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13224765305262080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:22:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13224765305262080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:22:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13224765305262080 [0;39m ==> Parameters: 
2023-03-05 14:22:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13224765305262080 [0;39m <==    Updates: 0
2023-03-05 14:22:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13224765305262080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 14:22:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13224786239033344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:22:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13224786239033344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:22:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13224786239033344 [0;39m ==> Parameters: 
2023-03-05 14:22:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13224786239033344 [0;39m <==    Updates: 1
2023-03-05 14:22:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13224786239033344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:22:06.620 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:22:15.866 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:22:17.079 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:22:20.672 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:22:28.919 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:22:30.959 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:22:35.018 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13224912139456512 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:22:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13224912139456512 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:22:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13224912139456512 [0;39m ==> Parameters: 
2023-03-05 14:22:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13224912139456512 [0;39m <==    Updates: 1
2023-03-05 14:22:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13224912139456512 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-05 14:22:47.311 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:22:50.820 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:22:55.822 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:23:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13225016938336256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:23:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13225016938336256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:23:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13225016938336256 [0;39m ==> Parameters: 
2023-03-05 14:23:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13225016938336256 [0;39m <==    Updates: 0
2023-03-05 14:23:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13225016938336256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-05 14:23:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13225037951799296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:23:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13225037951799296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:23:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13225037951799296 [0;39m ==> Parameters: 
2023-03-05 14:23:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13225037951799296 [0;39m <==    Updates: 1
2023-03-05 14:23:05.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13225037951799296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:23:17.023 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:23:20.188 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:23:22.298 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:23:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13225163776724992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:23:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13225163776724992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:23:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13225163776724992 [0;39m ==> Parameters: 
2023-03-05 14:23:35.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13225163776724992 [0;39m <==    Updates: 1
2023-03-05 14:23:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13225163776724992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 14:23:44.364 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:23:46.414 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:23:46.803 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:23:50.847 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:24:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13225268613353472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:24:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13225268613353472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:24:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13225268613353472 [0;39m ==> Parameters: 
2023-03-05 14:24:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13225268613353472 [0;39m <==    Updates: 0
2023-03-05 14:24:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13225268613353472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 14:24:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13225289605844992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:24:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13225289605844992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:24:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13225289605844992 [0;39m ==> Parameters: 
2023-03-05 14:24:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13225289605844992 [0;39m <==    Updates: 1
2023-03-05 14:24:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13225289605844992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 14:24:10.533 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:24:17.116 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:24:19.370 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:24:34.606 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:24:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13225415413993472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:24:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13225415413993472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:24:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13225415413993472 [0;39m ==> Parameters: 
2023-03-05 14:24:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13225415413993472 [0;39m <==    Updates: 1
2023-03-05 14:24:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13225415413993472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:24:46.820 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:24:49.704 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:24:59.059 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:25:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13225520279982080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:25:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13225520279982080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:25:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13225520279982080 [0;39m ==> Parameters: 
2023-03-05 14:25:00.796 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13225520279982080 [0;39m <==    Updates: 0
2023-03-05 14:25:00.799 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13225520279982080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š788æ¯«ç§’
2023-03-05 14:25:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13225541251502080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:25:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13225541251502080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:25:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13225541251502080 [0;39m ==> Parameters: 
2023-03-05 14:25:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13225541251502080 [0;39m <==    Updates: 1
2023-03-05 14:25:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13225541251502080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:25:16.814 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:25:19.743 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:25:24.776 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:25:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13225667076427776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:25:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13225667076427776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:25:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13225667076427776 [0;39m ==> Parameters: 
2023-03-05 14:25:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13225667076427776 [0;39m <==    Updates: 1
2023-03-05 14:25:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13225667076427776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 14:25:46.822 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:25:50.092 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:25:52.146 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:26:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13225771925639168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:26:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13225771925639168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:26:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13225771925639168 [0;39m ==> Parameters: 
2023-03-05 14:26:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13225771925639168 [0;39m <==    Updates: 0
2023-03-05 14:26:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13225771925639168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 14:26:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13225792901353472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:26:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13225792901353472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:26:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13225792901353472 [0;39m ==> Parameters: 
2023-03-05 14:26:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13225792901353472 [0;39m <==    Updates: 1
2023-03-05 14:26:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13225792901353472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-05 14:26:16.825 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:26:20.618 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:26:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13225918713696256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:26:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13225918713696256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:26:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13225918713696256 [0;39m ==> Parameters: 
2023-03-05 14:26:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13225918713696256 [0;39m <==    Updates: 1
2023-03-05 14:26:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13225918713696256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:26:41.627 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:26:46.814 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:26:49.827 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:27:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13226023613239296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:27:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13226023613239296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:27:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13226023613239296 [0;39m ==> Parameters: 
2023-03-05 14:27:00.026 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13226023613239296 [0;39m <==    Updates: 0
2023-03-05 14:27:00.027 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13226023613239296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 14:27:03.679 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:27:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13226044563787776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:27:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13226044563787776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:27:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13226044563787776 [0;39m ==> Parameters: 
2023-03-05 14:27:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13226044563787776 [0;39m <==    Updates: 1
2023-03-05 14:27:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13226044563787776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 14:27:05.723 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:27:16.812 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:27:19.598 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:27:29.806 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:27:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13226170384519168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:27:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13226170384519168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:27:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13226170384519168 [0;39m ==> Parameters: 
2023-03-05 14:27:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13226170384519168 [0;39m <==    Updates: 1
2023-03-05 14:27:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13226170384519168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 14:27:46.823 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:27:49.377 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:27:51.854 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:27:53.892 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:28:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13226275229536256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:28:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13226275229536256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:28:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13226275229536256 [0;39m ==> Parameters: 
2023-03-05 14:28:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13226275229536256 [0;39m <==    Updates: 0
2023-03-05 14:28:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13226275229536256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š14æ¯«ç§’
2023-03-05 14:28:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13226296234610688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:28:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13226296234610688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:28:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13226296234610688 [0;39m ==> Parameters: 
2023-03-05 14:28:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13226296234610688 [0;39m <==    Updates: 1
2023-03-05 14:28:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13226296234610688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 14:28:16.822 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:28:21.421 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:28:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13226422055342080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:28:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13226422055342080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:28:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13226422055342080 [0;39m ==> Parameters: 
2023-03-05 14:28:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13226422055342080 [0;39m <==    Updates: 1
2023-03-05 14:28:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13226422055342080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:28:46.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:28:49.580 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:29:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13226526912942080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:29:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13226526912942080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:29:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13226526912942080 [0;39m ==> Parameters: 
2023-03-05 14:29:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13226526912942080 [0;39m <==    Updates: 0
2023-03-05 14:29:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13226526912942080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 14:29:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13226547884462080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:29:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13226547884462080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:29:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13226547884462080 [0;39m ==> Parameters: 
2023-03-05 14:29:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13226547884462080 [0;39m <==    Updates: 1
2023-03-05 14:29:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13226547884462080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:29:10.574 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:29:16.825 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:29:19.377 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:29:32.625 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:29:34.659 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:29:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13226673734553600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:29:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13226673734553600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:29:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13226673734553600 [0;39m ==> Parameters: 
2023-03-05 14:29:35.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13226673734553600 [0;39m <==    Updates: 1
2023-03-05 14:29:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13226673734553600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 14:29:46.820 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:29:49.361 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:29:58.744 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:30:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13226778566987776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:30:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13226778566987776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:30:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13226778566987776 [0;39m ==> Parameters: 
2023-03-05 14:30:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13226778566987776 [0;39m <==    Updates: 0
2023-03-05 14:30:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13226778566987776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-05 14:30:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13226799534313472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:30:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13226799534313472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:30:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13226799534313472 [0;39m ==> Parameters: 
2023-03-05 14:30:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13226799534313472 [0;39m <==    Updates: 1
2023-03-05 14:30:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13226799534313472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 14:30:16.802 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:30:19.368 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:30:21.410 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:30:23.455 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:30:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13226925392793600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:30:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13226925392793600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:30:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13226925392793600 [0;39m ==> Parameters: 
2023-03-05 14:30:35.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13226925392793600 [0;39m <==    Updates: 1
2023-03-05 14:30:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13226925392793600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:30:46.809 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:30:49.360 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:30:51.398 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:31:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13227030237810688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:31:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13227030237810688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:31:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13227030237810688 [0;39m ==> Parameters: 
2023-03-05 14:31:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13227030237810688 [0;39m <==    Updates: 0
2023-03-05 14:31:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13227030237810688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-05 14:31:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13227051221913600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:31:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13227051221913600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:31:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13227051221913600 [0;39m ==> Parameters: 
2023-03-05 14:31:05.025 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13227051221913600 [0;39m <==    Updates: 1
2023-03-05 14:31:05.026 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13227051221913600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 14:31:16.824 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:31:19.556 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:31:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13227177009090560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:31:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13227177009090560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:31:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13227177009090560 [0;39m ==> Parameters: 
2023-03-05 14:31:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13227177009090560 [0;39m <==    Updates: 1
2023-03-05 14:31:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13227177009090560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:31:38.498 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:31:40.538 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:31:46.807 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:31:49.367 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:32:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13227281866690560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:32:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13227281866690560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:32:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13227281866690560 [0;39m ==> Parameters: 
2023-03-05 14:32:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13227281866690560 [0;39m <==    Updates: 0
2023-03-05 14:32:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13227281866690560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 14:32:04.620 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:32:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13227302846599168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:32:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13227302846599168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:32:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13227302846599168 [0;39m ==> Parameters: 
2023-03-05 14:32:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13227302846599168 [0;39m <==    Updates: 1
2023-03-05 14:32:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13227302846599168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-03-05 14:32:16.815 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:32:19.362 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:32:26.671 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:32:28.708 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:32:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13227428688302080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:32:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13227428688302080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:32:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13227428688302080 [0;39m ==> Parameters: 
2023-03-05 14:32:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13227428688302080 [0;39m <==    Updates: 1
2023-03-05 14:32:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13227428688302080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 14:32:46.831 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:32:51.404 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:32:53.452 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:33:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13227533558484992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:33:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13227533558484992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:33:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13227533558484992 [0;39m ==> Parameters: 
2023-03-05 14:33:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13227533558484992 [0;39m <==    Updates: 0
2023-03-05 14:33:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13227533558484992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-05 14:33:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13227554517422080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:33:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13227554517422080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:33:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13227554517422080 [0;39m ==> Parameters: 
2023-03-05 14:33:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13227554517422080 [0;39m <==    Updates: 1
2023-03-05 14:33:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13227554517422080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:33:16.806 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:33:19.372 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:33:21.412 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:33:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13227680317181952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:33:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13227680317181952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:33:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13227680317181952 [0;39m ==> Parameters: 
2023-03-05 14:33:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13227680317181952 [0;39m <==    Updates: 1
2023-03-05 14:33:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13227680317181952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:33:43.452 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:33:46.803 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:33:49.571 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:34:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13227785220919296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:34:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13227785220919296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:34:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13227785220919296 [0;39m ==> Parameters: 
2023-03-05 14:34:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13227785220919296 [0;39m <==    Updates: 0
2023-03-05 14:34:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13227785220919296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-05 14:34:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13227806150496256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:34:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13227806150496256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:34:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13227806150496256 [0;39m ==> Parameters: 
2023-03-05 14:34:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13227806150496256 [0;39m <==    Updates: 1
2023-03-05 14:34:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13227806150496256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:34:10.548 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:34:16.807 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:34:19.388 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:34:34.649 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:34:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13227931971227648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:34:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13227931971227648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:34:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13227931971227648 [0;39m ==> Parameters: 
2023-03-05 14:34:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13227931971227648 [0;39m <==    Updates: 1
2023-03-05 14:34:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13227931971227648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 14:34:46.820 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:34:47.330 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:34:49.380 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:34:58.748 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:35:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13228036883353600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:35:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13228036883353600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:35:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13228036883353600 [0;39m ==> Parameters: 
2023-03-05 14:35:00.027 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13228036883353600 [0;39m <==    Updates: 0
2023-03-05 14:35:00.028 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13228036883353600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-03-05 14:35:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13228057817124864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:35:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13228057817124864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:35:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13228057817124864 [0;39m ==> Parameters: 
2023-03-05 14:35:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13228057817124864 [0;39m <==    Updates: 1
2023-03-05 14:35:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13228057817124864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:35:15.288 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:35:16.824 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:35:19.375 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:35:21.418 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:35:23.455 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:35:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13228183625273344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:35:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13228183625273344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:35:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13228183625273344 [0;39m ==> Parameters: 
2023-03-05 14:35:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13228183625273344 [0;39m <==    Updates: 1
2023-03-05 14:35:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13228183625273344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:35:45.289 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:35:46.824 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:35:47.329 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:35:49.363 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:35:51.406 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:36:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13228288529010688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:36:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13228288529010688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:36:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13228288529010688 [0;39m ==> Parameters: 
2023-03-05 14:36:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13228288529010688 [0;39m <==    Updates: 0
2023-03-05 14:36:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13228288529010688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 14:36:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13228309450199040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:36:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13228309450199040 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:36:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13228309450199040 [0;39m ==> Parameters: 
2023-03-05 14:36:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13228309450199040 [0;39m <==    Updates: 1
2023-03-05 14:36:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13228309450199040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:36:13.459 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:36:15.500 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:36:16.813 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:36:21.620 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:36:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13228435321262080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:36:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13228435321262080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:36:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13228435321262080 [0;39m ==> Parameters: 
2023-03-05 14:36:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13228435321262080 [0;39m <==    Updates: 1
2023-03-05 14:36:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13228435321262080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:36:39.581 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:36:46.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:36:47.324 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:36:49.362 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:37:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13228540183056384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:37:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13228540183056384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:37:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13228540183056384 [0;39m ==> Parameters: 
2023-03-05 14:37:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13228540183056384 [0;39m <==    Updates: 0
2023-03-05 14:37:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13228540183056384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-05 14:37:01.636 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:37:03.675 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:37:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13228561112633344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:37:05.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13228561112633344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:37:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13228561112633344 [0;39m ==> Parameters: 
2023-03-05 14:37:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13228561112633344 [0;39m <==    Updates: 1
2023-03-05 14:37:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13228561112633344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:37:15.293 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:37:16.806 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:37:17.331 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:37:19.368 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:37:25.720 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:37:27.759 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:37:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13228686966919168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:37:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13228686966919168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:37:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13228686966919168 [0;39m ==> Parameters: 
2023-03-05 14:37:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13228686966919168 [0;39m <==    Updates: 1
2023-03-05 14:37:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13228686966919168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:37:45.286 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:37:46.815 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:37:49.368 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:37:51.409 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:37:53.448 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:38:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13228791832907776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:38:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13228791832907776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:38:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13228791832907776 [0;39m ==> Parameters: 
2023-03-05 14:38:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13228791832907776 [0;39m <==    Updates: 0
2023-03-05 14:38:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13228791832907776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-05 14:38:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13228812829593600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:38:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13228812829593600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:38:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13228812829593600 [0;39m ==> Parameters: 
2023-03-05 14:38:05.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13228812829593600 [0;39m <==    Updates: 1
2023-03-05 14:38:05.025 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13228812829593600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:38:16.810 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:38:17.335 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:38:19.369 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:38:21.410 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:38:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13228938599993344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:38:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13228938599993344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:38:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13228938599993344 [0;39m ==> Parameters: 
2023-03-05 14:38:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13228938599993344 [0;39m <==    Updates: 1
2023-03-05 14:38:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13228938599993344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:38:45.488 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:38:46.820 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:38:49.563 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:38:51.598 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:39:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13229043474370560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:39:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13229043474370560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:39:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13229043474370560 [0;39m ==> Parameters: 
2023-03-05 14:39:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13229043474370560 [0;39m <==    Updates: 0
2023-03-05 14:39:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13229043474370560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 14:39:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13229064487833600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:39:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13229064487833600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:39:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13229064487833600 [0;39m ==> Parameters: 
2023-03-05 14:39:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13229064487833600 [0;39m <==    Updates: 1
2023-03-05 14:39:05.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13229064487833600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:39:09.577 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:39:15.298 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:39:16.815 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:39:19.383 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:39:31.640 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:39:33.667 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:39:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13229190287593472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:39:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13229190287593472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:39:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13229190287593472 [0;39m ==> Parameters: 
2023-03-05 14:39:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13229190287593472 [0;39m <==    Updates: 1
2023-03-05 14:39:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13229190287593472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:39:45.284 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:39:46.815 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:39:47.334 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:39:49.383 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:39:58.243 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:40:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13229295120027648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:40:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13229295120027648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:40:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13229295120027648 [0;39m ==> Parameters: 
2023-03-05 14:40:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13229295120027648 [0;39m <==    Updates: 0
2023-03-05 14:40:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13229295120027648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:40:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13229316108324864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:40:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13229316108324864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:40:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13229316108324864 [0;39m ==> Parameters: 
2023-03-05 14:40:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13229316108324864 [0;39m <==    Updates: 1
2023-03-05 14:40:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13229316108324864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 14:40:15.294 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:40:16.809 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:40:17.335 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:40:19.372 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:40:21.411 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:40:23.439 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:40:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13229441962610688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:40:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13229441962610688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:40:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13229441962610688 [0;39m ==> Parameters: 
2023-03-05 14:40:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13229441962610688 [0;39m <==    Updates: 1
2023-03-05 14:40:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13229441962610688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:40:45.282 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:40:47.202 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:40:49.599 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:41:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13229546824404992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:41:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13229546824404992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:41:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13229546824404992 [0;39m ==> Parameters: 
2023-03-05 14:41:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13229546824404992 [0;39m <==    Updates: 0
2023-03-05 14:41:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13229546824404992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 14:41:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13229567787536384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:41:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13229567787536384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:41:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13229567787536384 [0;39m ==> Parameters: 
2023-03-05 14:41:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13229567787536384 [0;39m <==    Updates: 1
2023-03-05 14:41:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13229567787536384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 14:41:11.513 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:41:13.570 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:41:15.610 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:41:16.816 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:41:17.652 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:41:19.697 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:41:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13229693608267776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:41:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13229693608267776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:41:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13229693608267776 [0;39m ==> Parameters: 
2023-03-05 14:41:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13229693608267776 [0;39m <==    Updates: 1
2023-03-05 14:41:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13229693608267776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:41:35.645 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:41:37.681 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:41:46.820 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:41:47.331 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:41:49.371 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:42:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13229798470062080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:42:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13229798470062080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:42:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13229798470062080 [0;39m ==> Parameters: 
2023-03-05 14:42:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13229798470062080 [0;39m <==    Updates: 0
2023-03-05 14:42:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13229798470062080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 14:42:01.773 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:42:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13229819408027648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:42:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13229819408027648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:42:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13229819408027648 [0;39m ==> Parameters: 
2023-03-05 14:42:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13229819408027648 [0;39m <==    Updates: 1
2023-03-05 14:42:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13229819408027648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:42:16.814 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:42:17.326 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:42:19.363 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:42:23.837 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:42:25.880 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:42:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13229945279090688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:42:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13229945279090688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:42:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13229945279090688 [0;39m ==> Parameters: 
2023-03-05 14:42:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13229945279090688 [0;39m <==    Updates: 1
2023-03-05 14:42:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13229945279090688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:42:46.806 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:42:47.330 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:42:49.369 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:42:51.409 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:43:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13230050103136256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:43:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13230050103136256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:43:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13230050103136256 [0;39m ==> Parameters: 
2023-03-05 14:43:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13230050103136256 [0;39m <==    Updates: 0
2023-03-05 14:43:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13230050103136256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-05 14:43:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13230071108210688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:43:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13230071108210688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:43:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13230071108210688 [0;39m ==> Parameters: 
2023-03-05 14:43:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13230071108210688 [0;39m <==    Updates: 1
2023-03-05 14:43:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13230071108210688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-05 14:43:13.455 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:43:15.494 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:43:16.808 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:43:17.536 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:43:19.577 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:43:21.613 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:43:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13230196924747776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:43:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13230196924747776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:43:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13230196924747776 [0;39m ==> Parameters: 
2023-03-05 14:43:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13230196924747776 [0;39m <==    Updates: 1
2023-03-05 14:43:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13230196924747776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-05 14:43:37.552 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:43:39.587 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:43:46.827 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:43:49.364 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:44:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13230301807513600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:44:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13230301807513600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:44:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13230301807513600 [0;39m ==> Parameters: 
2023-03-05 14:44:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13230301807513600 [0;39m <==    Updates: 0
2023-03-05 14:44:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13230301807513600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 14:44:01.640 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:44:03.676 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:44:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13230322758062080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:44:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13230322758062080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:44:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13230322758062080 [0;39m ==> Parameters: 
2023-03-05 14:44:05.025 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13230322758062080 [0;39m <==    Updates: 1
2023-03-05 14:44:05.025 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13230322758062080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-03-05 14:44:16.807 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:44:19.373 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:44:25.719 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:44:27.761 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:44:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13230448591376384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:44:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13230448591376384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:44:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13230448591376384 [0;39m ==> Parameters: 
2023-03-05 14:44:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13230448591376384 [0;39m <==    Updates: 1
2023-03-05 14:44:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13230448591376384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 14:44:45.293 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:44:46.809 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:44:47.334 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:44:49.375 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:44:53.462 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:45:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13230553407033344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:45:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13230553407033344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:45:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13230553407033344 [0;39m ==> Parameters: 
2023-03-05 14:45:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13230553407033344 [0;39m <==    Updates: 0
2023-03-05 14:45:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13230553407033344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-05 14:45:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13230574395330560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:45:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13230574395330560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:45:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13230574395330560 [0;39m ==> Parameters: 
2023-03-05 14:45:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13230574395330560 [0;39m <==    Updates: 1
2023-03-05 14:45:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13230574395330560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-05 14:45:15.301 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:45:16.814 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:45:17.338 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:45:19.376 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:45:21.414 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:45:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13230700224450560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:45:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13230700224450560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:45:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13230700224450560 [0;39m ==> Parameters: 
2023-03-05 14:45:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13230700224450560 [0;39m <==    Updates: 1
2023-03-05 14:45:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13230700224450560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 14:45:43.458 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:45:45.499 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:45:46.812 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:45:49.583 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:46:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13230805115604992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:46:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13230805115604992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:46:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13230805115604992 [0;39m ==> Parameters: 
2023-03-05 14:46:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13230805115604992 [0;39m <==    Updates: 0
2023-03-05 14:46:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13230805115604992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 14:46:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13230826066153472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:46:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13230826066153472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:46:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13230826066153472 [0;39m ==> Parameters: 
2023-03-05 14:46:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13230826066153472 [0;39m <==    Updates: 1
2023-03-05 14:46:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13230826066153472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 14:46:10.559 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:46:16.805 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:46:17.327 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:46:19.365 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:46:32.609 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:46:34.649 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:46:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13230951865913344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:46:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13230951865913344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:46:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13230951865913344 [0;39m ==> Parameters: 
2023-03-05 14:46:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13230951865913344 [0;39m <==    Updates: 1
2023-03-05 14:46:35.004 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13230951865913344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 14:46:46.814 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:46:49.400 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:46:58.727 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:47:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13231056744484864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:47:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13231056744484864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:47:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13231056744484864 [0;39m ==> Parameters: 
2023-03-05 14:47:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13231056744484864 [0;39m <==    Updates: 0
2023-03-05 14:47:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13231056744484864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 14:47:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13231077703421952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:47:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13231077703421952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:47:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13231077703421952 [0;39m ==> Parameters: 
2023-03-05 14:47:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13231077703421952 [0;39m <==    Updates: 1
2023-03-05 14:47:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13231077703421952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-05 14:47:15.284 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:47:16.816 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:47:19.365 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:47:23.452 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:47:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13231203553513472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:47:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13231203553513472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:47:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13231203553513472 [0;39m ==> Parameters: 
2023-03-05 14:47:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13231203553513472 [0;39m <==    Updates: 1
2023-03-05 14:47:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13231203553513472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:47:46.821 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:47:47.330 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:47:49.376 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:47:51.430 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:48:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13231308415307776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:48:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13231308415307776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:48:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13231308415307776 [0;39m ==> Parameters: 
2023-03-05 14:48:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13231308415307776 [0;39m <==    Updates: 0
2023-03-05 14:48:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13231308415307776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 14:48:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13231329365856256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:48:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13231329365856256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:48:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13231329365856256 [0;39m ==> Parameters: 
2023-03-05 14:48:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13231329365856256 [0;39m <==    Updates: 1
2023-03-05 14:48:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13231329365856256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 14:48:15.512 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:48:16.817 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:48:17.560 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:48:19.598 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:48:21.650 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:48:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13231455220142080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:48:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13231455220142080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:48:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13231455220142080 [0;39m ==> Parameters: 
2023-03-05 14:48:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13231455220142080 [0;39m <==    Updates: 1
2023-03-05 14:48:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13231455220142080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:48:37.606 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:48:39.649 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:48:45.280 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:48:46.815 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:48:49.360 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:49:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13231560065159168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:49:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13231560065159168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:49:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13231560065159168 [0;39m ==> Parameters: 
2023-03-05 14:49:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13231560065159168 [0;39m <==    Updates: 0
2023-03-05 14:49:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13231560065159168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 14:49:03.748 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:49:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13231581070233600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:49:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13231581070233600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:49:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13231581070233600 [0;39m ==> Parameters: 
2023-03-05 14:49:05.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13231581070233600 [0;39m <==    Updates: 1
2023-03-05 14:49:05.025 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13231581070233600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 14:49:15.283 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:49:16.820 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:49:19.380 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:49:25.795 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:49:27.842 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:49:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13231706895159296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:49:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13231706895159296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:49:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13231706895159296 [0;39m ==> Parameters: 
2023-03-05 14:49:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13231706895159296 [0;39m <==    Updates: 1
2023-03-05 14:49:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13231706895159296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 14:49:46.808 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:49:47.331 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:49:49.731 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:49:51.771 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:49:54.246 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:50:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13231811731787776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:50:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13231811731787776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:50:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13231811731787776 [0;39m ==> Parameters: 
2023-03-05 14:50:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13231811731787776 [0;39m <==    Updates: 0
2023-03-05 14:50:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13231811731787776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 14:50:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13231832669753344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:50:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13231832669753344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:50:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13231832669753344 [0;39m ==> Parameters: 
2023-03-05 14:50:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13231832669753344 [0;39m <==    Updates: 1
2023-03-05 14:50:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13231832669753344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 14:50:15.304 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:50:16.819 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:50:17.562 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:50:19.600 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:50:21.639 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:50:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13231958511456256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:50:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13231958511456256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:50:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13231958511456256 [0;39m ==> Parameters: 
2023-03-05 14:50:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13231958511456256 [0;39m <==    Updates: 1
2023-03-05 14:50:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13231958511456256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:50:45.769 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:50:46.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:50:47.810 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:50:51.896 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:51:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13232063410999296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:51:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13232063410999296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:51:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13232063410999296 [0;39m ==> Parameters: 
2023-03-05 14:51:00.026 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13232063410999296 [0;39m <==    Updates: 0
2023-03-05 14:51:00.026 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13232063410999296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 14:51:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13232084369936384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:51:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13232084369936384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:51:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13232084369936384 [0;39m ==> Parameters: 
2023-03-05 14:51:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13232084369936384 [0;39m <==    Updates: 1
2023-03-05 14:51:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13232084369936384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-05 14:51:09.861 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:51:16.846 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:51:17.323 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:51:19.366 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:51:31.916 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:51:33.956 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:51:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13232210186473472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:51:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13232210186473472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:51:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13232210186473472 [0;39m ==> Parameters: 
2023-03-05 14:51:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13232210186473472 [0;39m <==    Updates: 1
2023-03-05 14:51:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13232210186473472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-05 14:51:46.807 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:51:47.316 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:51:49.362 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:51:56.039 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:51:58.075 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:52:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13232315073433600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:52:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13232315073433600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:52:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13232315073433600 [0;39m ==> Parameters: 
2023-03-05 14:52:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13232315073433600 [0;39m <==    Updates: 0
2023-03-05 14:52:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13232315073433600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-05 14:52:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13232335994621952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:52:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13232335994621952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:52:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13232335994621952 [0;39m ==> Parameters: 
2023-03-05 14:52:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13232335994621952 [0;39m <==    Updates: 1
2023-03-05 14:52:05.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13232335994621952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 14:52:15.309 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:52:16.810 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:52:19.393 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:52:21.758 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:52:24.153 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:52:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13232461832130560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:52:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13232461832130560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:52:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13232461832130560 [0;39m ==> Parameters: 
2023-03-05 14:52:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13232461832130560 [0;39m <==    Updates: 1
2023-03-05 14:52:35.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13232461832130560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 14:52:46.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:52:47.857 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:52:50.160 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:52:52.201 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:53:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13232566702313472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:53:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13232566702313472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:53:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13232566702313472 [0;39m ==> Parameters: 
2023-03-05 14:53:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13232566702313472 [0;39m <==    Updates: 0
2023-03-05 14:53:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13232566702313472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-05 14:53:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13232587644473344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:53:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13232587644473344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:53:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13232587644473344 [0;39m ==> Parameters: 
2023-03-05 14:53:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13232587644473344 [0;39m <==    Updates: 1
2023-03-05 14:53:05.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13232587644473344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-05 14:53:16.282 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:53:16.810 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:53:18.320 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:53:20.358 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:53:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13232713523924992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:53:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13232713523924992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:53:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13232713523924992 [0;39m ==> Parameters: 
2023-03-05 14:53:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13232713523924992 [0;39m <==    Updates: 1
2023-03-05 14:53:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13232713523924992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-05 14:53:38.341 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:53:40.383 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:53:45.284 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:53:46.829 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:53:49.367 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:54:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13232818343776256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:54:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13232818343776256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:54:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13232818343776256 [0;39m ==> Parameters: 
2023-03-05 14:54:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13232818343776256 [0;39m <==    Updates: 0
2023-03-05 14:54:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13232818343776256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 14:54:02.427 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:54:04.451 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:54:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13232839327879168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:54:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13232839327879168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:54:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13232839327879168 [0;39m ==> Parameters: 
2023-03-05 14:54:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13232839327879168 [0;39m <==    Updates: 1
2023-03-05 14:54:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13232839327879168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 14:54:15.272 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:54:16.819 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:54:19.353 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:54:26.493 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:54:28.532 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:54:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13232965173776384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:54:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13232965173776384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:54:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13232965173776384 [0;39m ==> Parameters: 
2023-03-05 14:54:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13232965173776384 [0;39m <==    Updates: 1
2023-03-05 14:54:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13232965173776384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 14:54:46.812 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:54:47.710 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:54:49.753 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:54:53.833 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:55:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13233070018793472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:55:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13233070018793472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:55:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13233070018793472 [0;39m ==> Parameters: 
2023-03-05 14:55:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13233070018793472 [0;39m <==    Updates: 0
2023-03-05 14:55:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13233070018793472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 14:55:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13233090998702080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:55:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13233090998702080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:55:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13233090998702080 [0;39m ==> Parameters: 
2023-03-05 14:55:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13233090998702080 [0;39m <==    Updates: 1
2023-03-05 14:55:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13233090998702080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-05 14:55:17.069 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:55:19.926 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:55:21.952 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:55:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13233216848793600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:55:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13233216848793600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:55:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13233216848793600 [0;39m ==> Parameters: 
2023-03-05 14:55:35.026 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13233216848793600 [0;39m <==    Updates: 1
2023-03-05 14:55:35.026 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13233216848793600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 14:55:46.423 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:55:46.923 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:55:49.123 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:55:51.173 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:56:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13233321698004992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:56:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13233321698004992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:56:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13233321698004992 [0;39m ==> Parameters: 
2023-03-05 14:56:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13233321698004992 [0;39m <==    Updates: 0
2023-03-05 14:56:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13233321698004992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 14:56:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13233342682107904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:56:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13233342682107904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:56:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13233342682107904 [0;39m ==> Parameters: 
2023-03-05 14:56:05.025 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13233342682107904 [0;39m <==    Updates: 1
2023-03-05 14:56:05.025 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13233342682107904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 14:56:10.984 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:56:16.835 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:56:19.584 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:56:33.043 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:56:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13233468452507648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:56:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13233468452507648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:56:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13233468452507648 [0;39m ==> Parameters: 
2023-03-05 14:56:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13233468452507648 [0;39m <==    Updates: 1
2023-03-05 14:56:35.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13233468452507648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 14:56:35.095 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:56:46.832 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:56:49.924 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:56:57.285 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:56:59.346 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:57:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13233573339467776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:57:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13233573339467776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:57:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13233573339467776 [0;39m ==> Parameters: 
2023-03-05 14:57:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13233573339467776 [0;39m <==    Updates: 0
2023-03-05 14:57:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13233573339467776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-05 14:57:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13233594319376384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:57:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13233594319376384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:57:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13233594319376384 [0;39m ==> Parameters: 
2023-03-05 14:57:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13233594319376384 [0;39m <==    Updates: 1
2023-03-05 14:57:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13233594319376384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-05 14:57:16.894 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:57:24.150 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:57:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13233720110747648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:57:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13233720110747648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:57:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13233720110747648 [0;39m ==> Parameters: 
2023-03-05 14:57:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13233720110747648 [0;39m <==    Updates: 1
2023-03-05 14:57:35.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13233720110747648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-05 14:57:46.797 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:57:49.372 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:57:51.415 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:58:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13233824968347648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:58:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13233824968347648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:58:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13233824968347648 [0;39m ==> Parameters: 
2023-03-05 14:58:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13233824968347648 [0;39m <==    Updates: 0
2023-03-05 14:58:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13233824968347648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-05 14:58:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13233845935673344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:58:05.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13233845935673344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:58:05.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13233845935673344 [0;39m ==> Parameters: 
2023-03-05 14:58:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13233845935673344 [0;39m <==    Updates: 1
2023-03-05 14:58:05.003 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13233845935673344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-05 14:58:13.476 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:58:15.517 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:58:16.815 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:58:21.668 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:58:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13233971768987648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:58:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13233971768987648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:58:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13233971768987648 [0;39m ==> Parameters: 
2023-03-05 14:58:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13233971768987648 [0;39m <==    Updates: 1
2023-03-05 14:58:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13233971768987648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 14:58:39.632 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:58:46.801 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:58:49.348 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:59:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13234076639170560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 14:59:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13234076639170560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 14:59:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13234076639170560 [0;39m ==> Parameters: 
2023-03-05 14:59:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13234076639170560 [0;39m <==    Updates: 0
2023-03-05 14:59:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13234076639170560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 14:59:04.120 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:59:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13234097627467776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:59:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13234097627467776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:59:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13234097627467776 [0;39m ==> Parameters: 
2023-03-05 14:59:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13234097627467776 [0;39m <==    Updates: 1
2023-03-05 14:59:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13234097627467776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 14:59:17.321 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:59:19.340 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:59:28.193 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:59:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13234223464976384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 14:59:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13234223464976384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 14:59:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13234223464976384 [0;39m ==> Parameters: 
2023-03-05 14:59:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13234223464976384 [0;39m <==    Updates: 1
2023-03-05 14:59:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13234223464976384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-05 14:59:47.146 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:59:50.433 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 14:59:54.909 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:00:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13234328322576384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:00:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13234328322576384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:00:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13234328322576384 [0;39m ==> Parameters: 
2023-03-05 15:00:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13234328322576384 [0;39m <==    Updates: 0
2023-03-05 15:00:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13234328322576384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 15:00:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13234349289902080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:00:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13234349289902080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:00:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13234349289902080 [0;39m ==> Parameters: 
2023-03-05 15:00:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13234349289902080 [0;39m <==    Updates: 1
2023-03-05 15:00:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13234349289902080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:00:15.578 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:00:17.151 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:00:20.234 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:00:22.664 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:00:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13234475127410688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:00:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13234475127410688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:00:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13234475127410688 [0;39m ==> Parameters: 
2023-03-05 15:00:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13234475127410688 [0;39m <==    Updates: 1
2023-03-05 15:00:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13234475127410688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:00:47.137 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:00:47.478 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:00:51.981 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:01:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13234579964039168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:01:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13234579964039168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:01:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13234579964039168 [0;39m ==> Parameters: 
2023-03-05 15:01:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13234579964039168 [0;39m <==    Updates: 0
2023-03-05 15:01:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13234579964039168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 15:01:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13234600935559168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:01:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13234600935559168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:01:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13234600935559168 [0;39m ==> Parameters: 
2023-03-05 15:01:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13234600935559168 [0;39m <==    Updates: 1
2023-03-05 15:01:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13234600935559168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 15:01:10.163 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:01:12.730 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:01:17.066 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:01:20.167 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:01:34.965 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:01:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13234726789844992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:01:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13234726789844992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:01:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13234726789844992 [0;39m ==> Parameters: 
2023-03-05 15:01:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13234726789844992 [0;39m <==    Updates: 1
2023-03-05 15:01:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13234726789844992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 15:01:37.231 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:01:47.381 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:01:50.358 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:02:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13234831626473472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:02:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13234831626473472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:02:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13234831626473472 [0;39m ==> Parameters: 
2023-03-05 15:02:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13234831626473472 [0;39m <==    Updates: 0
2023-03-05 15:02:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13234831626473472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:02:02.067 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:02:05.113 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13234853038395392 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:02:05.114 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13234853038395392 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:02:05.114 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13234853038395392 [0;39m ==> Parameters: 
2023-03-05 15:02:05.145 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13234853038395392 [0;39m <==    Updates: 1
2023-03-05 15:02:05.146 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13234853038395392 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š33æ¯«ç§’
2023-03-05 15:02:15.624 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:02:17.134 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:02:17.936 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:02:20.081 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:02:27.026 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:02:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13234978422919168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:02:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13234978422919168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:02:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13234978422919168 [0;39m ==> Parameters: 
2023-03-05 15:02:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13234978422919168 [0;39m <==    Updates: 1
2023-03-05 15:02:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13234978422919168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 15:02:46.963 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:02:49.761 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:02:51.988 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:02:54.035 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:03:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13235083255353344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:03:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13235083255353344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:03:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13235083255353344 [0;39m ==> Parameters: 
2023-03-05 15:03:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13235083255353344 [0;39m <==    Updates: 0
2023-03-05 15:03:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13235083255353344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 15:03:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13235104256233472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:03:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13235104256233472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:03:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13235104256233472 [0;39m ==> Parameters: 
2023-03-05 15:03:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13235104256233472 [0;39m <==    Updates: 1
2023-03-05 15:03:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13235104256233472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:03:16.814 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:03:17.577 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:03:19.611 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:03:21.847 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:03:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13235230076964864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:03:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13235230076964864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:03:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13235230076964864 [0;39m ==> Parameters: 
2023-03-05 15:03:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13235230076964864 [0;39m <==    Updates: 1
2023-03-05 15:03:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13235230076964864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:03:44.349 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:03:46.390 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:03:46.808 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:03:50.486 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:04:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13235334947147776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:04:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13235334947147776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:04:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13235334947147776 [0;39m ==> Parameters: 
2023-03-05 15:04:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13235334947147776 [0;39m <==    Updates: 0
2023-03-05 15:04:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13235334947147776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-05 15:04:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13235355910279168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:04:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13235355910279168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:04:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13235355910279168 [0;39m ==> Parameters: 
2023-03-05 15:04:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13235355910279168 [0;39m <==    Updates: 1
2023-03-05 15:04:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13235355910279168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:04:10.491 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:04:16.827 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:04:17.326 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:04:19.372 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:04:32.535 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:04:34.580 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:04:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13235481756176384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:04:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13235481756176384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:04:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13235481756176384 [0;39m ==> Parameters: 
2023-03-05 15:04:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13235481756176384 [0;39m <==    Updates: 1
2023-03-05 15:04:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13235481756176384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:04:47.130 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:04:49.412 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:04:56.634 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:04:58.669 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:05:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13235586571833344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:05:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13235586571833344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:05:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13235586571833344 [0;39m ==> Parameters: 
2023-03-05 15:05:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13235586571833344 [0;39m <==    Updates: 0
2023-03-05 15:05:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13235586571833344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-05 15:05:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13235607602073600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:05:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13235607602073600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:05:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13235607602073600 [0;39m ==> Parameters: 
2023-03-05 15:05:05.026 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13235607602073600 [0;39m <==    Updates: 1
2023-03-05 15:05:05.026 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13235607602073600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 15:05:16.814 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:05:19.828 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:05:23.914 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:05:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13235733393444864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:05:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13235733393444864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:05:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13235733393444864 [0;39m ==> Parameters: 
2023-03-05 15:05:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13235733393444864 [0;39m <==    Updates: 1
2023-03-05 15:05:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13235733393444864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:05:45.282 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:05:46.816 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:05:49.363 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:05:51.403 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:06:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13235838272016384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:06:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13235838272016384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:06:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13235838272016384 [0;39m ==> Parameters: 
2023-03-05 15:06:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13235838272016384 [0;39m <==    Updates: 0
2023-03-05 15:06:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13235838272016384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 15:06:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13235859214176256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:06:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13235859214176256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:06:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13235859214176256 [0;39m ==> Parameters: 
2023-03-05 15:06:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13235859214176256 [0;39m <==    Updates: 1
2023-03-05 15:06:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13235859214176256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:06:15.970 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:06:16.819 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:06:18.015 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:06:20.055 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:06:22.099 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:06:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13235985076850688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:06:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13235985076850688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:06:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13235985076850688 [0;39m ==> Parameters: 
2023-03-05 15:06:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13235985076850688 [0;39m <==    Updates: 1
2023-03-05 15:06:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13235985076850688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:06:38.008 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:06:40.049 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:06:45.292 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:06:46.810 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:06:50.028 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:07:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13236089892507648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:07:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13236089892507648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:07:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13236089892507648 [0;39m ==> Parameters: 
2023-03-05 15:07:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13236089892507648 [0;39m <==    Updates: 0
2023-03-05 15:07:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13236089892507648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-05 15:07:04.665 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:07:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13236110872416256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:07:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13236110872416256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:07:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13236110872416256 [0;39m ==> Parameters: 
2023-03-05 15:07:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13236110872416256 [0;39m <==    Updates: 1
2023-03-05 15:07:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13236110872416256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:07:16.823 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:07:17.659 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:07:19.705 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:07:26.710 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:07:29.133 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:07:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13236236718313472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:07:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13236236718313472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:07:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13236236718313472 [0;39m ==> Parameters: 
2023-03-05 15:07:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13236236718313472 [0;39m <==    Updates: 1
2023-03-05 15:07:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13236236718313472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:07:45.321 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:07:46.808 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:07:49.402 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:07:51.441 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:07:53.481 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:08:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13236341550747648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:08:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13236341550747648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:08:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13236341550747648 [0;39m ==> Parameters: 
2023-03-05 15:08:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13236341550747648 [0;39m <==    Updates: 0
2023-03-05 15:08:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13236341550747648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 15:08:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13236362576793600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:08:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13236362576793600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:08:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13236362576793600 [0;39m ==> Parameters: 
2023-03-05 15:08:05.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13236362576793600 [0;39m <==    Updates: 1
2023-03-05 15:08:05.025 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13236362576793600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:08:16.824 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:08:19.379 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:08:21.420 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:08:35.041 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13236488514965504 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:08:35.043 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13236488514965504 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:08:35.043 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13236488514965504 [0;39m ==> Parameters: 
2023-03-05 15:08:35.051 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13236488514965504 [0;39m <==    Updates: 1
2023-03-05 15:08:35.051 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13236488514965504 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:08:45.509 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:08:46.823 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:08:47.549 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:08:49.592 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:08:51.629 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:09:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13236593221570560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:09:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13236593221570560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:09:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13236593221570560 [0;39m ==> Parameters: 
2023-03-05 15:09:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13236593221570560 [0;39m <==    Updates: 0
2023-03-05 15:09:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13236593221570560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 15:09:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13236614218256384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:09:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13236614218256384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:09:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13236614218256384 [0;39m ==> Parameters: 
2023-03-05 15:09:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13236614218256384 [0;39m <==    Updates: 1
2023-03-05 15:09:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13236614218256384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 15:09:07.565 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:09:09.609 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:09:16.815 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:09:17.342 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:09:19.384 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:09:31.654 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:09:33.697 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:09:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13236740038987776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:09:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13236740038987776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:09:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13236740038987776 [0;39m ==> Parameters: 
2023-03-05 15:09:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13236740038987776 [0;39m <==    Updates: 1
2023-03-05 15:09:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13236740038987776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:09:46.814 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:09:49.377 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:09:57.973 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:10:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13236844921753600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:10:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13236844921753600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:10:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13236844921753600 [0;39m ==> Parameters: 
2023-03-05 15:10:00.028 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13236844921753600 [0;39m <==    Updates: 0
2023-03-05 15:10:00.028 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13236844921753600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-03-05 15:10:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13236865838747648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:10:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13236865838747648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:10:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13236865838747648 [0;39m ==> Parameters: 
2023-03-05 15:10:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13236865838747648 [0;39m <==    Updates: 1
2023-03-05 15:10:05.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13236865838747648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 15:10:17.074 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:10:17.335 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:10:19.379 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:10:23.460 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:10:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13236991672061952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:10:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13236991672061952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:10:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13236991672061952 [0;39m ==> Parameters: 
2023-03-05 15:10:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13236991672061952 [0;39m <==    Updates: 1
2023-03-05 15:10:35.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13236991672061952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-05 15:10:45.295 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:10:46.810 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:10:49.579 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:11:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13237096550633472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:11:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13237096550633472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:11:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13237096550633472 [0;39m ==> Parameters: 
2023-03-05 15:11:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13237096550633472 [0;39m <==    Updates: 0
2023-03-05 15:11:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13237096550633472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 15:11:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13237117505376256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:11:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13237117505376256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:11:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13237117505376256 [0;39m ==> Parameters: 
2023-03-05 15:11:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13237117505376256 [0;39m <==    Updates: 1
2023-03-05 15:11:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13237117505376256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 15:11:11.535 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:11:13.579 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:11:15.619 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:11:16.809 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:11:20.122 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:11:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13237243326107648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:11:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13237243326107648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:11:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13237243326107648 [0;39m ==> Parameters: 
2023-03-05 15:11:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13237243326107648 [0;39m <==    Updates: 1
2023-03-05 15:11:35.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13237243326107648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-05 15:11:37.922 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:11:47.221 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:11:49.368 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:12:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13237348183707648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:12:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13237348183707648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:12:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13237348183707648 [0;39m ==> Parameters: 
2023-03-05 15:12:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13237348183707648 [0;39m <==    Updates: 0
2023-03-05 15:12:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13237348183707648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-05 15:12:00.420 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:12:02.462 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:12:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13237369184587776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:12:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13237369184587776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:12:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13237369184587776 [0;39m ==> Parameters: 
2023-03-05 15:12:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13237369184587776 [0;39m <==    Updates: 1
2023-03-05 15:12:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13237369184587776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 15:12:16.819 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:12:19.375 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:12:25.008 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:12:27.044 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:12:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13237494996930560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:12:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13237494996930560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:12:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13237494996930560 [0;39m ==> Parameters: 
2023-03-05 15:12:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13237494996930560 [0;39m <==    Updates: 1
2023-03-05 15:12:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13237494996930560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:12:47.107 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:12:49.912 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:12:51.950 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:12:53.992 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:13:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13237599841947648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:13:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13237599841947648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:13:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13237599841947648 [0;39m ==> Parameters: 
2023-03-05 15:13:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13237599841947648 [0;39m <==    Updates: 0
2023-03-05 15:13:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13237599841947648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-05 15:13:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13237620834439168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:13:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13237620834439168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:13:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13237620834439168 [0;39m ==> Parameters: 
2023-03-05 15:13:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13237620834439168 [0;39m <==    Updates: 1
2023-03-05 15:13:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13237620834439168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 15:13:15.291 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:13:16.805 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:13:17.330 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:13:19.372 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:13:21.406 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:13:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13237746688724992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:13:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13237746688724992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:13:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13237746688724992 [0;39m ==> Parameters: 
2023-03-05 15:13:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13237746688724992 [0;39m <==    Updates: 1
2023-03-05 15:13:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13237746688724992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:13:43.452 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:13:45.496 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:13:46.811 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:13:51.996 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:14:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13237851542130688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:14:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13237851542130688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:14:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13237851542130688 [0;39m ==> Parameters: 
2023-03-05 15:14:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13237851542130688 [0;39m <==    Updates: 0
2023-03-05 15:14:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13237851542130688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 15:14:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13237872471707648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:14:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13237872471707648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:14:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13237872471707648 [0;39m ==> Parameters: 
2023-03-05 15:14:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13237872471707648 [0;39m <==    Updates: 1
2023-03-05 15:14:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13237872471707648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:14:07.912 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:14:10.522 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:14:15.280 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:14:16.806 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:14:17.318 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:14:19.807 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:14:32.572 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:14:34.618 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:14:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13237998313410560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:14:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13237998313410560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:14:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13237998313410560 [0;39m ==> Parameters: 
2023-03-05 15:14:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13237998313410560 [0;39m <==    Updates: 1
2023-03-05 15:14:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13237998313410560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 15:14:45.293 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:14:46.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:14:49.368 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:14:56.664 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:14:58.704 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:15:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13238103225536512 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:15:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13238103225536512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:15:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13238103225536512 [0;39m ==> Parameters: 
2023-03-05 15:15:00.029 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13238103225536512 [0;39m <==    Updates: 0
2023-03-05 15:15:00.029 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13238103225536512 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 15:15:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13238124134141952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:15:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13238124134141952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:15:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13238124134141952 [0;39m ==> Parameters: 
2023-03-05 15:15:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13238124134141952 [0;39m <==    Updates: 1
2023-03-05 15:15:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13238124134141952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:15:16.816 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:15:17.608 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:15:19.632 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:15:23.912 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:15:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13238249975844864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:15:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13238249975844864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:15:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13238249975844864 [0;39m ==> Parameters: 
2023-03-05 15:15:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13238249975844864 [0;39m <==    Updates: 1
2023-03-05 15:15:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13238249975844864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:15:46.812 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:15:49.381 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:15:51.422 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:16:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13238354833444864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:16:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13238354833444864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:16:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13238354833444864 [0;39m ==> Parameters: 
2023-03-05 15:16:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13238354833444864 [0;39m <==    Updates: 0
2023-03-05 15:16:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13238354833444864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-05 15:16:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13238375842713600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:16:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13238375842713600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:16:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13238375842713600 [0;39m ==> Parameters: 
2023-03-05 15:16:05.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13238375842713600 [0;39m <==    Updates: 1
2023-03-05 15:16:05.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13238375842713600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:16:13.466 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:16:15.513 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:16:16.808 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:16:21.627 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:16:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13238501634084864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:16:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13238501634084864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:16:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13238501634084864 [0;39m ==> Parameters: 
2023-03-05 15:16:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13238501634084864 [0;39m <==    Updates: 1
2023-03-05 15:16:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13238501634084864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:16:37.559 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:16:39.600 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:16:45.299 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:16:46.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:16:49.380 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:17:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13238606500073472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:17:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13238606500073472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:17:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13238606500073472 [0;39m ==> Parameters: 
2023-03-05 15:17:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13238606500073472 [0;39m <==    Updates: 0
2023-03-05 15:17:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13238606500073472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 15:17:01.846 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:17:04.145 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:17:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13238627471593472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:17:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13238627471593472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:17:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13238627471593472 [0;39m ==> Parameters: 
2023-03-05 15:17:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13238627471593472 [0;39m <==    Updates: 1
2023-03-05 15:17:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13238627471593472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:17:16.808 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:17:17.675 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:17:19.717 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:17:26.195 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:17:28.235 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:17:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13238753283936256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:17:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13238753283936256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:17:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13238753283936256 [0;39m ==> Parameters: 
2023-03-05 15:17:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13238753283936256 [0;39m <==    Updates: 1
2023-03-05 15:17:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13238753283936256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:17:46.823 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:17:47.844 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:17:51.922 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:17:53.960 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:18:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13238858128953344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:18:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13238858128953344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:18:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13238858128953344 [0;39m ==> Parameters: 
2023-03-05 15:18:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13238858128953344 [0;39m <==    Updates: 0
2023-03-05 15:18:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13238858128953344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-05 15:18:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13238879142416384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:18:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13238879142416384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:18:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13238879142416384 [0;39m ==> Parameters: 
2023-03-05 15:18:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13238879142416384 [0;39m <==    Updates: 1
2023-03-05 15:18:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13238879142416384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-05 15:18:15.294 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:18:16.811 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:18:19.379 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:18:21.421 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:18:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13239004963147776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:18:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13239004963147776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:18:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13239004963147776 [0;39m ==> Parameters: 
2023-03-05 15:18:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13239004963147776 [0;39m <==    Updates: 1
2023-03-05 15:18:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13239004963147776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 15:18:45.511 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:18:46.813 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:18:47.553 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:18:52.145 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:19:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13239109845913600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:19:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13239109845913600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:19:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13239109845913600 [0;39m ==> Parameters: 
2023-03-05 15:19:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13239109845913600 [0;39m <==    Updates: 0
2023-03-05 15:19:00.026 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13239109845913600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 15:19:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13239130800656384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:19:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13239130800656384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:19:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13239130800656384 [0;39m ==> Parameters: 
2023-03-05 15:19:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13239130800656384 [0;39m <==    Updates: 1
2023-03-05 15:19:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13239130800656384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-05 15:19:07.657 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:19:09.710 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:19:17.142 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:19:19.363 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:19:31.773 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:19:33.813 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:19:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13239256587833344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:19:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13239256587833344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:19:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13239256587833344 [0;39m ==> Parameters: 
2023-03-05 15:19:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13239256587833344 [0;39m <==    Updates: 1
2023-03-05 15:19:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13239256587833344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 15:19:46.812 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:19:47.338 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:19:49.744 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:19:58.378 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:20:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13239361445433344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:20:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13239361445433344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:20:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13239361445433344 [0;39m ==> Parameters: 
2023-03-05 15:20:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13239361445433344 [0;39m <==    Updates: 0
2023-03-05 15:20:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13239361445433344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 15:20:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13239382433730560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:20:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13239382433730560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:20:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13239382433730560 [0;39m ==> Parameters: 
2023-03-05 15:20:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13239382433730560 [0;39m <==    Updates: 1
2023-03-05 15:20:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13239382433730560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:20:15.287 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:20:16.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:20:17.328 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:20:19.367 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:20:23.449 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:20:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13239508288016384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:20:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13239508288016384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:20:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13239508288016384 [0;39m ==> Parameters: 
2023-03-05 15:20:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13239508288016384 [0;39m <==    Updates: 1
2023-03-05 15:20:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13239508288016384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:20:46.812 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:20:47.322 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:20:49.369 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:20:51.408 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:21:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13239613112061952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:21:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13239613112061952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:21:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13239613112061952 [0;39m ==> Parameters: 
2023-03-05 15:21:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13239613112061952 [0;39m <==    Updates: 0
2023-03-05 15:21:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13239613112061952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 15:21:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13239634091970560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:21:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13239634091970560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:21:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13239634091970560 [0;39m ==> Parameters: 
2023-03-05 15:21:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13239634091970560 [0;39m <==    Updates: 1
2023-03-05 15:21:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13239634091970560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:21:13.463 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:21:15.520 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:21:16.819 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:21:21.656 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:21:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13239759942062080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:21:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13239759942062080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:21:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13239759942062080 [0;39m ==> Parameters: 
2023-03-05 15:21:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13239759942062080 [0;39m <==    Updates: 1
2023-03-05 15:21:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13239759942062080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 15:21:39.792 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:21:46.811 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:21:49.987 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:22:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13239864808050688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:22:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13239864808050688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:22:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13239864808050688 [0;39m ==> Parameters: 
2023-03-05 15:22:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13239864808050688 [0;39m <==    Updates: 0
2023-03-05 15:22:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13239864808050688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-05 15:22:01.836 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:22:03.872 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:22:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13239885783764992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:22:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13239885783764992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:22:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13239885783764992 [0;39m ==> Parameters: 
2023-03-05 15:22:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13239885783764992 [0;39m <==    Updates: 1
2023-03-05 15:22:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13239885783764992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:22:16.820 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:22:17.606 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:22:19.648 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:22:27.965 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:22:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13240011583524864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:22:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13240011583524864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:22:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13240011583524864 [0;39m ==> Parameters: 
2023-03-05 15:22:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13240011583524864 [0;39m <==    Updates: 1
2023-03-05 15:22:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13240011583524864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-05 15:22:45.286 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:22:46.817 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:22:47.326 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:22:49.711 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:22:52.007 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:22:54.049 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:23:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13240116445319168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:23:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13240116445319168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:23:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13240116445319168 [0;39m ==> Parameters: 
2023-03-05 15:23:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13240116445319168 [0;39m <==    Updates: 0
2023-03-05 15:23:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13240116445319168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š14æ¯«ç§’
2023-03-05 15:23:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13240137454587904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:23:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13240137454587904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:23:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13240137454587904 [0;39m ==> Parameters: 
2023-03-05 15:23:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13240137454587904 [0;39m <==    Updates: 1
2023-03-05 15:23:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13240137454587904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 15:23:16.813 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:23:19.573 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:23:21.612 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:23:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13240263220793344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:23:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13240263220793344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:23:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13240263220793344 [0;39m ==> Parameters: 
2023-03-05 15:23:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13240263220793344 [0;39m <==    Updates: 1
2023-03-05 15:23:35.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13240263220793344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 15:23:46.405 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:23:46.820 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:23:50.895 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:24:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13240368128724992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:24:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13240368128724992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:24:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13240368128724992 [0;39m ==> Parameters: 
2023-03-05 15:24:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13240368128724992 [0;39m <==    Updates: 0
2023-03-05 15:24:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13240368128724992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-05 15:24:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13240389079273472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:24:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13240389079273472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:24:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13240389079273472 [0;39m ==> Parameters: 
2023-03-05 15:24:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13240389079273472 [0;39m <==    Updates: 1
2023-03-05 15:24:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13240389079273472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-05 15:24:09.006 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:24:11.046 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:24:16.811 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:24:20.008 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:24:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13240514895810560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:24:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13240514895810560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:24:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13240514895810560 [0;39m ==> Parameters: 
2023-03-05 15:24:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13240514895810560 [0;39m <==    Updates: 1
2023-03-05 15:24:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13240514895810560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:24:35.129 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:24:45.803 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:24:47.106 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:24:47.848 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:24:49.893 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:24:57.608 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:24:59.655 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:25:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13240619761799168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:25:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13240619761799168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:25:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13240619761799168 [0;39m ==> Parameters: 
2023-03-05 15:25:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13240619761799168 [0;39m <==    Updates: 0
2023-03-05 15:25:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13240619761799168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-05 15:25:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13240640708153344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:25:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13240640708153344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:25:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13240640708153344 [0;39m ==> Parameters: 
2023-03-05 15:25:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13240640708153344 [0;39m <==    Updates: 1
2023-03-05 15:25:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13240640708153344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:25:16.823 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:25:17.348 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:25:19.387 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:25:23.759 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:25:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13240766570827776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:25:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13240766570827776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:25:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13240766570827776 [0;39m ==> Parameters: 
2023-03-05 15:25:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13240766570827776 [0;39m <==    Updates: 1
2023-03-05 15:25:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13240766570827776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 15:25:46.811 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:25:49.398 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:25:51.437 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:26:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13240871449399296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:26:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13240871449399296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:26:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13240871449399296 [0;39m ==> Parameters: 
2023-03-05 15:26:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13240871449399296 [0;39m <==    Updates: 0
2023-03-05 15:26:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13240871449399296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-05 15:26:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13240892425113600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:26:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13240892425113600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:26:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13240892425113600 [0;39m ==> Parameters: 
2023-03-05 15:26:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13240892425113600 [0;39m <==    Updates: 1
2023-03-05 15:26:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13240892425113600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 15:26:13.492 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:26:15.521 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:26:16.817 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:26:21.639 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:26:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13241018250039296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:26:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13241018250039296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:26:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13241018250039296 [0;39m ==> Parameters: 
2023-03-05 15:26:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13241018250039296 [0;39m <==    Updates: 1
2023-03-05 15:26:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13241018250039296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:26:39.611 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:26:46.811 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:26:49.735 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:27:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13241123078279168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:27:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13241123078279168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:27:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13241123078279168 [0;39m ==> Parameters: 
2023-03-05 15:27:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13241123078279168 [0;39m <==    Updates: 0
2023-03-05 15:27:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13241123078279168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-05 15:27:03.714 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:27:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13241144041410560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:27:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13241144041410560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:27:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13241144041410560 [0;39m ==> Parameters: 
2023-03-05 15:27:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13241144041410560 [0;39m <==    Updates: 1
2023-03-05 15:27:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13241144041410560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 15:27:15.906 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:27:17.506 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:27:20.004 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:27:25.757 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:27:27.803 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:27:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13241269891502080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:27:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13241269891502080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:27:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13241269891502080 [0;39m ==> Parameters: 
2023-03-05 15:27:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13241269891502080 [0;39m <==    Updates: 1
2023-03-05 15:27:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13241269891502080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-05 15:27:47.110 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:27:49.788 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:27:53.877 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:28:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13241374757490688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:28:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13241374757490688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:28:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13241374757490688 [0;39m ==> Parameters: 
2023-03-05 15:28:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13241374757490688 [0;39m <==    Updates: 0
2023-03-05 15:28:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13241374757490688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 15:28:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13241395703844864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:28:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13241395703844864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:28:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13241395703844864 [0;39m ==> Parameters: 
2023-03-05 15:28:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13241395703844864 [0;39m <==    Updates: 1
2023-03-05 15:28:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13241395703844864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:28:15.300 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:28:17.305 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:28:19.595 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:28:21.632 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:28:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13241521537159168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:28:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13241521537159168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:28:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13241521537159168 [0;39m ==> Parameters: 
2023-03-05 15:28:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13241521537159168 [0;39m <==    Updates: 1
2023-03-05 15:28:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13241521537159168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:28:46.251 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:28:46.808 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:28:48.603 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:28:52.690 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:29:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13241626398953472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:29:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13241626398953472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:29:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13241626398953472 [0;39m ==> Parameters: 
2023-03-05 15:29:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13241626398953472 [0;39m <==    Updates: 0
2023-03-05 15:29:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13241626398953472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-05 15:29:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13241647345307648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:29:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13241647345307648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:29:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13241647345307648 [0;39m ==> Parameters: 
2023-03-05 15:29:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13241647345307648 [0;39m <==    Updates: 1
2023-03-05 15:29:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13241647345307648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:29:10.607 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:29:17.104 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:29:17.334 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:29:19.377 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:29:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13241773182816256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:29:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13241773182816256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:29:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13241773182816256 [0;39m ==> Parameters: 
2023-03-05 15:29:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13241773182816256 [0;39m <==    Updates: 1
2023-03-05 15:29:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13241773182816256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:29:35.206 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:29:45.506 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:29:46.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:29:49.586 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:29:57.271 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:29:59.314 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:30:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13241878052999168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:30:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13241878052999168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:30:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13241878052999168 [0;39m ==> Parameters: 
2023-03-05 15:30:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13241878052999168 [0;39m <==    Updates: 0
2023-03-05 15:30:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13241878052999168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-05 15:30:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13241899016130560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:30:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13241899016130560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:30:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13241899016130560 [0;39m ==> Parameters: 
2023-03-05 15:30:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13241899016130560 [0;39m <==    Updates: 1
2023-03-05 15:30:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13241899016130560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:30:16.807 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:30:19.378 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:30:23.709 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:30:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13242024832667648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:30:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13242024832667648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:30:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13242024832667648 [0;39m ==> Parameters: 
2023-03-05 15:30:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13242024832667648 [0;39m <==    Updates: 1
2023-03-05 15:30:35.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13242024832667648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 15:30:47.242 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:30:47.944 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:30:50.410 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:31:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13242129686073344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:31:00.001 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13242129686073344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:31:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13242129686073344 [0;39m ==> Parameters: 
2023-03-05 15:31:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13242129686073344 [0;39m <==    Updates: 0
2023-03-05 15:31:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13242129686073344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 15:31:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13242150695342080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:31:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13242150695342080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:31:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13242150695342080 [0;39m ==> Parameters: 
2023-03-05 15:31:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13242150695342080 [0;39m <==    Updates: 1
2023-03-05 15:31:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13242150695342080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 15:31:11.823 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:31:13.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:31:15.898 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:31:16.806 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:31:17.931 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:31:19.960 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:31:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13242276495101952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:31:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13242276495101952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:31:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13242276495101952 [0;39m ==> Parameters: 
2023-03-05 15:31:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13242276495101952 [0;39m <==    Updates: 1
2023-03-05 15:31:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13242276495101952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:31:37.942 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:31:45.275 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:31:46.836 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:31:47.336 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:31:49.382 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:31:59.959 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:32:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13242381361090560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:32:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13242381361090560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:32:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13242381361090560 [0;39m ==> Parameters: 
2023-03-05 15:32:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13242381361090560 [0;39m <==    Updates: 0
2023-03-05 15:32:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13242381361090560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 15:32:01.977 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:32:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13242402332610560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:32:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13242402332610560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:32:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13242402332610560 [0;39m ==> Parameters: 
2023-03-05 15:32:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13242402332610560 [0;39m <==    Updates: 1
2023-03-05 15:32:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13242402332610560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:32:15.288 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:32:16.802 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:32:17.333 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:32:19.384 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:32:24.035 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:32:26.068 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:32:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13242528161730560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:32:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13242528161730560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:32:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13242528161730560 [0;39m ==> Parameters: 
2023-03-05 15:32:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13242528161730560 [0;39m <==    Updates: 1
2023-03-05 15:32:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13242528161730560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:32:46.817 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:32:47.332 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:32:49.380 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:32:51.429 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:33:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13242633019330560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:33:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13242633019330560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:33:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13242633019330560 [0;39m ==> Parameters: 
2023-03-05 15:33:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13242633019330560 [0;39m <==    Updates: 0
2023-03-05 15:33:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13242633019330560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 15:33:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13242654003433472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:33:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13242654003433472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:33:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13242654003433472 [0;39m ==> Parameters: 
2023-03-05 15:33:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13242654003433472 [0;39m <==    Updates: 1
2023-03-05 15:33:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13242654003433472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:33:13.476 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:33:15.520 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:33:16.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:33:17.570 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:33:21.649 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:33:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13242779824164864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:33:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13242779824164864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:33:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13242779824164864 [0;39m ==> Parameters: 
2023-03-05 15:33:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13242779824164864 [0;39m <==    Updates: 1
2023-03-05 15:33:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13242779824164864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 15:33:37.583 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:33:39.616 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:33:45.286 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:33:46.788 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:33:49.363 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:34:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13242884681764864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:34:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13242884681764864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:34:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13242884681764864 [0;39m ==> Parameters: 
2023-03-05 15:34:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13242884681764864 [0;39m <==    Updates: 0
2023-03-05 15:34:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13242884681764864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 15:34:01.680 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:34:03.697 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:34:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13242905649090560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:34:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13242905649090560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:34:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13242905649090560 [0;39m ==> Parameters: 
2023-03-05 15:34:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13242905649090560 [0;39m <==    Updates: 1
2023-03-05 15:34:05.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13242905649090560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 15:34:15.272 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:34:16.817 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:34:17.303 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:34:19.363 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:34:25.754 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:34:27.787 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:34:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13243031482404864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:34:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13243031482404864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:34:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13243031482404864 [0;39m ==> Parameters: 
2023-03-05 15:34:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13243031482404864 [0;39m <==    Updates: 1
2023-03-05 15:34:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13243031482404864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:34:45.288 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:34:46.791 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:34:47.309 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:34:49.344 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:34:51.380 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:34:53.426 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:35:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13243136340004864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:35:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13243136340004864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:35:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13243136340004864 [0;39m ==> Parameters: 
2023-03-05 15:35:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13243136340004864 [0;39m <==    Updates: 0
2023-03-05 15:35:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13243136340004864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-05 15:35:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13243157311524864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:35:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13243157311524864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:35:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13243157311524864 [0;39m ==> Parameters: 
2023-03-05 15:35:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13243157311524864 [0;39m <==    Updates: 1
2023-03-05 15:35:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13243157311524864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:35:15.303 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:35:16.798 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:35:17.333 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:35:19.381 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:35:21.412 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:35:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13243283136450560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:35:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13243283136450560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:35:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13243283136450560 [0;39m ==> Parameters: 
2023-03-05 15:35:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13243283136450560 [0;39m <==    Updates: 1
2023-03-05 15:35:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13243283136450560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:35:43.459 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:35:45.505 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:35:46.817 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:35:49.540 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:35:51.600 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:36:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13243387989856256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:36:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13243387989856256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:36:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13243387989856256 [0;39m ==> Parameters: 
2023-03-05 15:36:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13243387989856256 [0;39m <==    Updates: 0
2023-03-05 15:36:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13243387989856256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 15:36:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13243408961376256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:36:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13243408961376256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:36:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13243408961376256 [0;39m ==> Parameters: 
2023-03-05 15:36:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13243408961376256 [0;39m <==    Updates: 1
2023-03-05 15:36:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13243408961376256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:36:07.566 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:36:09.600 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:36:16.803 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:36:19.396 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:36:31.649 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:36:33.684 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:36:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13243534790496256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:36:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13243534790496256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:36:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13243534790496256 [0;39m ==> Parameters: 
2023-03-05 15:36:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13243534790496256 [0;39m <==    Updates: 1
2023-03-05 15:36:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13243534790496256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:36:45.302 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:36:46.806 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:36:47.335 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:36:49.352 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:36:55.726 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:36:57.772 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:37:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13243639660679168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:37:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13243639660679168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:37:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13243639660679168 [0;39m ==> Parameters: 
2023-03-05 15:37:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13243639660679168 [0;39m <==    Updates: 0
2023-03-05 15:37:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13243639660679168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 15:37:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13243660623810560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:37:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13243660623810560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:37:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13243660623810560 [0;39m ==> Parameters: 
2023-03-05 15:37:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13243660623810560 [0;39m <==    Updates: 1
2023-03-05 15:37:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13243660623810560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-05 15:37:15.292 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:37:16.819 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:37:17.335 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:37:19.380 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:37:23.460 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:37:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13243786452930560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:37:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13243786452930560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:37:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13243786452930560 [0;39m ==> Parameters: 
2023-03-05 15:37:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13243786452930560 [0;39m <==    Updates: 1
2023-03-05 15:37:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13243786452930560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:37:46.803 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:37:47.303 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:37:49.335 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:37:51.380 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:38:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13243891318919168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:38:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13243891318919168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:38:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13243891318919168 [0;39m ==> Parameters: 
2023-03-05 15:38:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13243891318919168 [0;39m <==    Updates: 0
2023-03-05 15:38:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13243891318919168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 15:38:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13243912298827776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:38:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13243912298827776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:38:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13243912298827776 [0;39m ==> Parameters: 
2023-03-05 15:38:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13243912298827776 [0;39m <==    Updates: 1
2023-03-05 15:38:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13243912298827776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:38:13.414 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:38:15.459 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:38:16.802 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:38:17.477 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:38:21.551 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:38:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13244038119559168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:38:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13244038119559168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:38:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13244038119559168 [0;39m ==> Parameters: 
2023-03-05 15:38:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13244038119559168 [0;39m <==    Updates: 1
2023-03-05 15:38:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13244038119559168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:38:37.507 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:38:39.550 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:38:45.306 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:38:46.789 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:38:47.336 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:38:49.382 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:39:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13244142964576256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:39:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13244142964576256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:39:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13244142964576256 [0;39m ==> Parameters: 
2023-03-05 15:39:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13244142964576256 [0;39m <==    Updates: 0
2023-03-05 15:39:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13244142964576256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 15:39:01.571 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:39:03.613 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:39:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13244163940290560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:39:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13244163940290560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:39:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13244163940290560 [0;39m ==> Parameters: 
2023-03-05 15:39:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13244163940290560 [0;39m <==    Updates: 1
2023-03-05 15:39:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13244163940290560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:39:15.270 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:39:16.803 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:39:17.302 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:39:19.336 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:39:25.650 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:39:27.677 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:39:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13244289765216256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:39:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13244289765216256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:39:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13244289765216256 [0;39m ==> Parameters: 
2023-03-05 15:39:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13244289765216256 [0;39m <==    Updates: 1
2023-03-05 15:39:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13244289765216256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:39:45.288 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:39:46.803 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:39:47.318 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:39:49.335 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:39:51.363 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:39:53.396 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:40:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13244394622816256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:40:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13244394622816256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:40:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13244394622816256 [0;39m ==> Parameters: 
2023-03-05 15:40:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13244394622816256 [0;39m <==    Updates: 0
2023-03-05 15:40:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13244394622816256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 15:40:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13244415606919168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:40:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13244415606919168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:40:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13244415606919168 [0;39m ==> Parameters: 
2023-03-05 15:40:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13244415606919168 [0;39m <==    Updates: 1
2023-03-05 15:40:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13244415606919168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:40:16.817 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:40:17.319 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:40:19.367 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:40:21.396 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:40:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13244541431844864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:40:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13244541431844864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:40:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13244541431844864 [0;39m ==> Parameters: 
2023-03-05 15:40:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13244541431844864 [0;39m <==    Updates: 1
2023-03-05 15:40:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13244541431844864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-05 15:40:43.430 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:40:45.462 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:40:46.833 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:40:47.508 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:40:51.573 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:41:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13244646285250560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:41:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13244646285250560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:41:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13244646285250560 [0;39m ==> Parameters: 
2023-03-05 15:41:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13244646285250560 [0;39m <==    Updates: 0
2023-03-05 15:41:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13244646285250560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:41:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13244667277742080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:41:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13244667277742080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:41:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13244667277742080 [0;39m ==> Parameters: 
2023-03-05 15:41:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13244667277742080 [0;39m <==    Updates: 1
2023-03-05 15:41:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13244667277742080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:41:07.525 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:41:09.557 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:41:15.271 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:41:16.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:41:17.322 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:41:19.336 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:41:33.644 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:41:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13244793094279168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:41:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13244793094279168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:41:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13244793094279168 [0;39m ==> Parameters: 
2023-03-05 15:41:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13244793094279168 [0;39m <==    Updates: 1
2023-03-05 15:41:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13244793094279168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:41:45.287 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:41:46.803 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:41:49.349 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:41:55.683 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:41:57.729 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:42:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13244897951879168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:42:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13244897951879168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:42:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13244897951879168 [0;39m ==> Parameters: 
2023-03-05 15:42:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13244897951879168 [0;39m <==    Updates: 0
2023-03-05 15:42:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13244897951879168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:42:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13244918927593472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:42:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13244918927593472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:42:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13244918927593472 [0;39m ==> Parameters: 
2023-03-05 15:42:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13244918927593472 [0;39m <==    Updates: 1
2023-03-05 15:42:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13244918927593472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:42:15.300 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:42:16.816 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:42:17.334 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:42:19.380 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:42:21.412 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:42:23.461 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:42:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13245044756713472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:42:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13245044756713472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:42:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13245044756713472 [0;39m ==> Parameters: 
2023-03-05 15:42:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13245044756713472 [0;39m <==    Updates: 1
2023-03-05 15:42:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13245044756713472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:42:45.315 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:42:46.807 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:42:49.356 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:42:51.395 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:43:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13245149593341952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:43:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13245149593341952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:43:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13245149593341952 [0;39m ==> Parameters: 
2023-03-05 15:43:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13245149593341952 [0;39m <==    Updates: 0
2023-03-05 15:43:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13245149593341952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 15:43:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13245170585833472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:43:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13245170585833472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:43:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13245170585833472 [0;39m ==> Parameters: 
2023-03-05 15:43:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13245170585833472 [0;39m <==    Updates: 1
2023-03-05 15:43:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13245170585833472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:43:13.430 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:43:15.474 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:43:16.805 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:43:17.509 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:43:19.538 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:43:21.571 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:43:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13245296410759168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:43:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13245296410759168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:43:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13245296410759168 [0;39m ==> Parameters: 
2023-03-05 15:43:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13245296410759168 [0;39m <==    Updates: 1
2023-03-05 15:43:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13245296410759168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:43:37.492 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:43:39.524 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:43:46.835 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:43:47.336 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:43:49.379 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:44:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13245401276747776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:44:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13245401276747776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:44:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13245401276747776 [0;39m ==> Parameters: 
2023-03-05 15:44:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13245401276747776 [0;39m <==    Updates: 0
2023-03-05 15:44:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13245401276747776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 15:44:01.569 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:44:03.605 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:44:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13245422244073472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:44:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13245422244073472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:44:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13245422244073472 [0;39m ==> Parameters: 
2023-03-05 15:44:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13245422244073472 [0;39m <==    Updates: 1
2023-03-05 15:44:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13245422244073472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:44:16.803 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:44:17.318 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:44:19.349 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:44:25.663 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:44:27.709 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:44:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13245548089970688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:44:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13245548089970688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:44:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13245548089970688 [0;39m ==> Parameters: 
2023-03-05 15:44:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13245548089970688 [0;39m <==    Updates: 1
2023-03-05 15:44:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13245548089970688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:44:45.288 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:44:46.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:44:47.320 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:44:49.352 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:44:51.396 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:44:53.429 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:45:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13245652934987776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:45:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13245652934987776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:45:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13245652934987776 [0;39m ==> Parameters: 
2023-03-05 15:45:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13245652934987776 [0;39m <==    Updates: 0
2023-03-05 15:45:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13245652934987776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 15:45:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13245673906507776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:45:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13245673906507776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:45:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13245673906507776 [0;39m ==> Parameters: 
2023-03-05 15:45:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13245673906507776 [0;39m <==    Updates: 1
2023-03-05 15:45:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13245673906507776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:45:15.288 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:45:16.821 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:45:19.366 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:45:21.396 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:45:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13245799735627776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:45:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13245799735627776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:45:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13245799735627776 [0;39m ==> Parameters: 
2023-03-05 15:45:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13245799735627776 [0;39m <==    Updates: 1
2023-03-05 15:45:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13245799735627776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:45:43.428 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:45:45.491 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:45:46.817 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:45:51.573 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:46:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13245904568061952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:46:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13245904568061952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:46:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13245904568061952 [0;39m ==> Parameters: 
2023-03-05 15:46:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13245904568061952 [0;39m <==    Updates: 0
2023-03-05 15:46:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13245904568061952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 15:46:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13245925556359168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:46:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13245925556359168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:46:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13245925556359168 [0;39m ==> Parameters: 
2023-03-05 15:46:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13245925556359168 [0;39m <==    Updates: 1
2023-03-05 15:46:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13245925556359168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:46:07.529 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:46:09.539 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:46:15.301 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:46:16.817 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:46:17.347 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:46:19.379 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:46:31.566 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:46:33.616 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:46:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13246051385479168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:46:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13246051385479168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:46:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13246051385479168 [0;39m ==> Parameters: 
2023-03-05 15:46:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13246051385479168 [0;39m <==    Updates: 1
2023-03-05 15:46:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13246051385479168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:46:45.290 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:46:46.820 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:46:47.323 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:46:49.351 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:46:55.642 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:46:57.678 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:47:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13246156234690560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:47:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13246156234690560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:47:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13246156234690560 [0;39m ==> Parameters: 
2023-03-05 15:47:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13246156234690560 [0;39m <==    Updates: 0
2023-03-05 15:47:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13246156234690560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 15:47:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13246177214599168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:47:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13246177214599168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:47:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13246177214599168 [0;39m ==> Parameters: 
2023-03-05 15:47:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13246177214599168 [0;39m <==    Updates: 1
2023-03-05 15:47:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13246177214599168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:47:15.288 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:47:16.791 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:47:17.309 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:47:19.350 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:47:21.393 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:47:23.414 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:47:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13246303047913472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:47:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13246303047913472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:47:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13246303047913472 [0;39m ==> Parameters: 
2023-03-05 15:47:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13246303047913472 [0;39m <==    Updates: 1
2023-03-05 15:47:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13246303047913472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-05 15:47:45.288 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:47:46.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:47:49.352 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:47:51.381 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:48:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13246407888736256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:48:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13246407888736256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:48:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13246407888736256 [0;39m ==> Parameters: 
2023-03-05 15:48:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13246407888736256 [0;39m <==    Updates: 0
2023-03-05 15:48:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13246407888736256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 15:48:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13246428868644864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:48:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13246428868644864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:48:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13246428868644864 [0;39m ==> Parameters: 
2023-03-05 15:48:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13246428868644864 [0;39m <==    Updates: 1
2023-03-05 15:48:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13246428868644864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:48:13.427 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:48:16.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:48:19.536 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:48:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13246554701959168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:48:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13246554701959168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:48:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13246554701959168 [0;39m ==> Parameters: 
2023-03-05 15:48:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13246554701959168 [0;39m <==    Updates: 1
2023-03-05 15:48:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13246554701959168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:48:38.443 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:48:40.492 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:48:45.290 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:48:46.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:48:47.335 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:48:49.368 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:49:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13246659576336384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:49:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13246659576336384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:49:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13246659576336384 [0;39m ==> Parameters: 
2023-03-05 15:49:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13246659576336384 [0;39m <==    Updates: 0
2023-03-05 15:49:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13246659576336384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-05 15:49:04.527 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:49:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13246680539467776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:49:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13246680539467776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:49:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13246680539467776 [0;39m ==> Parameters: 
2023-03-05 15:49:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13246680539467776 [0;39m <==    Updates: 1
2023-03-05 15:49:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13246680539467776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:49:16.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:49:19.294 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:49:26.556 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:49:28.597 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:49:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13246806368587776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:49:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13246806368587776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:49:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13246806368587776 [0;39m ==> Parameters: 
2023-03-05 15:49:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13246806368587776 [0;39m <==    Updates: 1
2023-03-05 15:49:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13246806368587776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:49:45.272 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:49:46.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:49:49.343 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:49:53.405 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:50:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13246911234576384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:50:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13246911234576384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:50:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13246911234576384 [0;39m ==> Parameters: 
2023-03-05 15:50:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13246911234576384 [0;39m <==    Updates: 0
2023-03-05 15:50:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13246911234576384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-05 15:50:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13246932180930560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:50:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13246932180930560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:50:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13246932180930560 [0;39m ==> Parameters: 
2023-03-05 15:50:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13246932180930560 [0;39m <==    Updates: 1
2023-03-05 15:50:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13246932180930560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-05 15:50:15.302 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:50:16.805 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:50:19.359 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:50:21.405 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:50:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13247058018439168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:50:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13247058018439168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:50:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13247058018439168 [0;39m ==> Parameters: 
2023-03-05 15:50:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13247058018439168 [0;39m <==    Updates: 1
2023-03-05 15:50:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13247058018439168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:50:43.461 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:50:45.520 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:50:46.819 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:50:47.538 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:50:49.571 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:50:51.615 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:51:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13247162876039168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:51:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13247162876039168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:51:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13247162876039168 [0;39m ==> Parameters: 
2023-03-05 15:51:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13247162876039168 [0;39m <==    Updates: 0
2023-03-05 15:51:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13247162876039168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:51:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13247183839170560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:51:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13247183839170560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:51:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13247183839170560 [0;39m ==> Parameters: 
2023-03-05 15:51:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13247183839170560 [0;39m <==    Updates: 1
2023-03-05 15:51:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13247183839170560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:51:07.567 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:51:09.615 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:51:15.287 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:51:16.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:51:17.318 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:51:19.351 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:51:31.649 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:51:33.693 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:51:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13247309676679168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:51:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13247309676679168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:51:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13247309676679168 [0;39m ==> Parameters: 
2023-03-05 15:51:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13247309676679168 [0;39m <==    Updates: 1
2023-03-05 15:51:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13247309676679168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:51:46.803 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:51:49.367 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:51:57.788 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:52:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13247414530084864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:52:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13247414530084864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:52:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13247414530084864 [0;39m ==> Parameters: 
2023-03-05 15:52:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13247414530084864 [0;39m <==    Updates: 0
2023-03-05 15:52:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13247414530084864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 15:52:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13247435505799168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:52:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13247435505799168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:52:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13247435505799168 [0;39m ==> Parameters: 
2023-03-05 15:52:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13247435505799168 [0;39m <==    Updates: 1
2023-03-05 15:52:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13247435505799168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:52:15.287 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:52:16.802 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:52:17.320 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:52:19.366 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:52:21.397 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:52:23.429 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:52:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13247561334919168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:52:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13247561334919168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:52:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13247561334919168 [0;39m ==> Parameters: 
2023-03-05 15:52:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13247561334919168 [0;39m <==    Updates: 1
2023-03-05 15:52:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13247561334919168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:52:46.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:52:49.365 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:52:51.412 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:53:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13247666188324864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:53:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13247666188324864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:53:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13247666188324864 [0;39m ==> Parameters: 
2023-03-05 15:53:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13247666188324864 [0;39m <==    Updates: 0
2023-03-05 15:53:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13247666188324864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 15:53:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13247687159844864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:53:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13247687159844864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:53:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13247687159844864 [0;39m ==> Parameters: 
2023-03-05 15:53:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13247687159844864 [0;39m <==    Updates: 1
2023-03-05 15:53:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13247687159844864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:53:13.444 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:53:15.474 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:53:16.789 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:53:17.509 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:53:19.557 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:53:21.601 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:53:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13247813001547776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:53:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13247813001547776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:53:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13247813001547776 [0;39m ==> Parameters: 
2023-03-05 15:53:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13247813001547776 [0;39m <==    Updates: 1
2023-03-05 15:53:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13247813001547776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-05 15:53:39.553 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:53:46.788 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:53:47.320 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:53:49.364 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:54:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13247917846564864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:54:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13247917846564864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:54:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13247917846564864 [0;39m ==> Parameters: 
2023-03-05 15:54:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13247917846564864 [0;39m <==    Updates: 0
2023-03-05 15:54:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13247917846564864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 15:54:01.569 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:54:03.616 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:54:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13247938813890560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:54:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13247938813890560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:54:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13247938813890560 [0;39m ==> Parameters: 
2023-03-05 15:54:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13247938813890560 [0;39m <==    Updates: 1
2023-03-05 15:54:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13247938813890560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-05 15:54:15.272 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:54:16.821 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:54:19.347 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:54:25.648 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:54:27.693 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:54:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13248064651399168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:54:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13248064651399168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:54:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13248064651399168 [0;39m ==> Parameters: 
2023-03-05 15:54:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13248064651399168 [0;39m <==    Updates: 1
2023-03-05 15:54:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13248064651399168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:54:45.273 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:54:46.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:54:47.304 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:54:49.320 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:54:53.413 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:55:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13248169508999168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:55:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13248169508999168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:55:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13248169508999168 [0;39m ==> Parameters: 
2023-03-05 15:55:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13248169508999168 [0;39m <==    Updates: 0
2023-03-05 15:55:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13248169508999168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:55:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13248190476324864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:55:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13248190476324864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:55:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13248190476324864 [0;39m ==> Parameters: 
2023-03-05 15:55:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13248190476324864 [0;39m <==    Updates: 1
2023-03-05 15:55:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13248190476324864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:55:15.289 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:55:16.805 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:55:17.319 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:55:19.338 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:55:21.366 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:55:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13248316305444864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:55:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13248316305444864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:55:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13248316305444864 [0;39m ==> Parameters: 
2023-03-05 15:55:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13248316305444864 [0;39m <==    Updates: 1
2023-03-05 15:55:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13248316305444864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:55:43.413 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:55:45.445 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:55:46.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:55:47.475 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:55:49.507 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:55:51.523 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:56:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13248421167239168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:56:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13248421167239168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:56:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13248421167239168 [0;39m ==> Parameters: 
2023-03-05 15:56:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13248421167239168 [0;39m <==    Updates: 0
2023-03-05 15:56:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13248421167239168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 15:56:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13248442134564864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:56:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13248442134564864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:56:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13248442134564864 [0;39m ==> Parameters: 
2023-03-05 15:56:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13248442134564864 [0;39m <==    Updates: 1
2023-03-05 15:56:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13248442134564864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:56:07.491 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:56:09.538 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:56:15.287 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:56:16.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:56:17.320 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:56:19.350 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:56:31.584 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:56:33.631 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:56:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13248567967879168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:56:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13248567967879168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:56:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13248567967879168 [0;39m ==> Parameters: 
2023-03-05 15:56:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13248567967879168 [0;39m <==    Updates: 1
2023-03-05 15:56:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13248567967879168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:56:46.820 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:56:47.319 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:56:49.350 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:56:57.710 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:57:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13248672821284864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:57:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13248672821284864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:57:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13248672821284864 [0;39m ==> Parameters: 
2023-03-05 15:57:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13248672821284864 [0;39m <==    Updates: 0
2023-03-05 15:57:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13248672821284864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 15:57:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13248693788610560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:57:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13248693788610560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:57:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13248693788610560 [0;39m ==> Parameters: 
2023-03-05 15:57:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13248693788610560 [0;39m <==    Updates: 1
2023-03-05 15:57:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13248693788610560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:57:15.273 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:57:16.805 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:57:19.364 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:57:21.395 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:57:23.428 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:57:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13248819638702080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:57:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13248819638702080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:57:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13248819638702080 [0;39m ==> Parameters: 
2023-03-05 15:57:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13248819638702080 [0;39m <==    Updates: 1
2023-03-05 15:57:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13248819638702080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:57:46.819 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:57:49.381 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:57:51.413 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:58:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13248924487913472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:58:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13248924487913472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:58:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13248924487913472 [0;39m ==> Parameters: 
2023-03-05 15:58:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13248924487913472 [0;39m <==    Updates: 0
2023-03-05 15:58:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13248924487913472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:58:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13248945451044864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:58:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13248945451044864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:58:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13248945451044864 [0;39m ==> Parameters: 
2023-03-05 15:58:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13248945451044864 [0;39m <==    Updates: 1
2023-03-05 15:58:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13248945451044864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-05 15:58:13.475 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:58:15.508 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:58:16.805 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:58:17.554 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:58:19.602 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:58:21.618 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:58:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13249071280164864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:58:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13249071280164864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:58:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13249071280164864 [0;39m ==> Parameters: 
2023-03-05 15:58:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13249071280164864 [0;39m <==    Updates: 1
2023-03-05 15:58:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13249071280164864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:58:37.554 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:58:39.599 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:58:45.304 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:58:46.834 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:58:47.349 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:58:49.382 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:59:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13249176137764864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 15:59:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13249176137764864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 15:59:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13249176137764864 [0;39m ==> Parameters: 
2023-03-05 15:59:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13249176137764864 [0;39m <==    Updates: 0
2023-03-05 15:59:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13249176137764864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 15:59:03.662 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:59:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13249197113479168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:59:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13249197113479168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:59:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13249197113479168 [0;39m ==> Parameters: 
2023-03-05 15:59:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13249197113479168 [0;39m <==    Updates: 1
2023-03-05 15:59:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13249197113479168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-05 15:59:16.819 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:59:17.350 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:59:19.396 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:59:25.709 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:59:27.756 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:59:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13249322942599168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 15:59:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13249322942599168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 15:59:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13249322942599168 [0;39m ==> Parameters: 
2023-03-05 15:59:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13249322942599168 [0;39m <==    Updates: 1
2023-03-05 15:59:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13249322942599168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 15:59:46.819 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:59:47.319 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:59:49.356 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 15:59:53.428 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:00:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13249427812782080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:00:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13249427812782080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:00:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13249427812782080 [0;39m ==> Parameters: 
2023-03-05 16:00:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13249427812782080 [0;39m <==    Updates: 0
2023-03-05 16:00:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13249427812782080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-05 16:00:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13249448796884992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:00:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13249448796884992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:00:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13249448796884992 [0;39m ==> Parameters: 
2023-03-05 16:00:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13249448796884992 [0;39m <==    Updates: 1
2023-03-05 16:00:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13249448796884992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:00:16.785 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:00:17.289 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:00:19.335 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:00:21.366 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:00:35.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13249574638587904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:00:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13249574638587904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:00:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13249574638587904 [0;39m ==> Parameters: 
2023-03-05 16:00:35.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13249574638587904 [0;39m <==    Updates: 1
2023-03-05 16:00:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13249574638587904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:00:43.396 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:00:45.430 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:00:46.806 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:00:47.461 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:00:49.480 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:00:51.515 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:01:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13249679466827776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:01:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13249679466827776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:01:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13249679466827776 [0;39m ==> Parameters: 
2023-03-05 16:01:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13249679466827776 [0;39m <==    Updates: 0
2023-03-05 16:01:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13249679466827776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:01:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13249700463513600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:01:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13249700463513600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:01:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13249700463513600 [0;39m ==> Parameters: 
2023-03-05 16:01:05.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13249700463513600 [0;39m <==    Updates: 1
2023-03-05 16:01:05.025 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13249700463513600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 16:01:07.486 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:01:09.521 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:01:15.285 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:01:16.806 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:01:17.307 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:01:19.331 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:01:33.584 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:01:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13249826263273472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:01:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13249826263273472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:01:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13249826263273472 [0;39m ==> Parameters: 
2023-03-05 16:01:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13249826263273472 [0;39m <==    Updates: 1
2023-03-05 16:01:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13249826263273472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:01:46.789 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:01:49.319 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:01:55.597 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:01:57.630 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:02:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13249931187982336 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:02:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13249931187982336 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:02:00.026 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13249931187982336 [0;39m ==> Parameters: 
2023-03-05 16:02:00.035 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13249931187982336 [0;39m <==    Updates: 0
2023-03-05 16:02:00.036 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13249931187982336 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 16:02:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13249952063033344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:02:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13249952063033344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:02:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13249952063033344 [0;39m ==> Parameters: 
2023-03-05 16:02:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13249952063033344 [0;39m <==    Updates: 1
2023-03-05 16:02:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13249952063033344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 16:02:16.806 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:02:17.308 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:02:19.337 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:02:21.374 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:02:23.385 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:02:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13250077904736256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:02:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13250077904736256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:02:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13250077904736256 [0;39m ==> Parameters: 
2023-03-05 16:02:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13250077904736256 [0;39m <==    Updates: 1
2023-03-05 16:02:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13250077904736256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:02:45.285 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:02:46.781 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:02:47.298 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:02:49.344 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:02:51.378 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:03:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13250182804279296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:03:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13250182804279296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:03:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13250182804279296 [0;39m ==> Parameters: 
2023-03-05 16:03:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13250182804279296 [0;39m <==    Updates: 0
2023-03-05 16:03:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13250182804279296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:03:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13250203775799296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:03:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13250203775799296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:03:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13250203775799296 [0;39m ==> Parameters: 
2023-03-05 16:03:05.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13250203775799296 [0;39m <==    Updates: 1
2023-03-05 16:03:05.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13250203775799296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 16:03:13.419 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:03:15.445 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:03:16.805 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:03:19.515 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:03:21.545 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:03:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13250329579753472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:03:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13250329579753472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:03:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13250329579753472 [0;39m ==> Parameters: 
2023-03-05 16:03:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13250329579753472 [0;39m <==    Updates: 1
2023-03-05 16:03:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13250329579753472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:03:37.467 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:03:39.503 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:03:45.255 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:03:46.776 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:03:47.274 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:03:49.310 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:04:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13250434420576256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:04:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13250434420576256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:04:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13250434420576256 [0;39m ==> Parameters: 
2023-03-05 16:04:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13250434420576256 [0;39m <==    Updates: 0
2023-03-05 16:04:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13250434420576256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:04:01.551 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:04:03.562 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:04:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13250455429844992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:04:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13250455429844992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:04:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13250455429844992 [0;39m ==> Parameters: 
2023-03-05 16:04:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13250455429844992 [0;39m <==    Updates: 1
2023-03-05 16:04:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13250455429844992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:04:15.269 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:04:16.788 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:04:17.290 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:04:19.330 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:04:27.638 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:04:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13250581221216256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:04:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13250581221216256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:04:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13250581221216256 [0;39m ==> Parameters: 
2023-03-05 16:04:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13250581221216256 [0;39m <==    Updates: 1
2023-03-05 16:04:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13250581221216256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:04:46.784 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:04:47.299 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:04:49.333 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:04:53.370 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:05:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13250686070427648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:05:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13250686070427648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:05:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13250686070427648 [0;39m ==> Parameters: 
2023-03-05 16:05:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13250686070427648 [0;39m <==    Updates: 0
2023-03-05 16:05:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13250686070427648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 16:05:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13250707079696384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:05:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13250707079696384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:05:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13250707079696384 [0;39m ==> Parameters: 
2023-03-05 16:05:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13250707079696384 [0;39m <==    Updates: 1
2023-03-05 16:05:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13250707079696384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:05:15.274 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:05:16.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:05:17.320 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:05:19.353 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:05:21.382 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:05:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13250832892039168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:05:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13250832892039168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:05:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13250832892039168 [0;39m ==> Parameters: 
2023-03-05 16:05:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13250832892039168 [0;39m <==    Updates: 1
2023-03-05 16:05:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13250832892039168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:05:43.428 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:05:45.475 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:05:46.803 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:05:47.492 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:05:49.536 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:05:51.571 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:06:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13250937745444864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:06:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13250937745444864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:06:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13250937745444864 [0;39m ==> Parameters: 
2023-03-05 16:06:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13250937745444864 [0;39m <==    Updates: 0
2023-03-05 16:06:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13250937745444864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 16:06:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13250958700187648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:06:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13250958700187648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:06:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13250958700187648 [0;39m ==> Parameters: 
2023-03-05 16:06:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13250958700187648 [0;39m <==    Updates: 1
2023-03-05 16:06:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13250958700187648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:06:07.507 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:06:09.554 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:06:15.288 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:06:16.820 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:06:17.320 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:06:19.349 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:06:31.585 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:06:33.617 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:06:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13251084546084864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:06:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13251084546084864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:06:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13251084546084864 [0;39m ==> Parameters: 
2023-03-05 16:06:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13251084546084864 [0;39m <==    Updates: 1
2023-03-05 16:06:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13251084546084864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:06:45.291 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:06:46.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:06:47.350 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:06:49.355 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:06:55.665 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:06:57.723 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:07:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13251189395296256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:07:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13251189395296256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:07:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13251189395296256 [0;39m ==> Parameters: 
2023-03-05 16:07:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13251189395296256 [0;39m <==    Updates: 0
2023-03-05 16:07:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13251189395296256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 16:07:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13251210371010560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:07:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13251210371010560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:07:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13251210371010560 [0;39m ==> Parameters: 
2023-03-05 16:07:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13251210371010560 [0;39m <==    Updates: 1
2023-03-05 16:07:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13251210371010560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:07:15.303 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:07:16.802 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:07:19.381 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:07:21.413 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:07:23.459 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:07:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13251336208519168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:07:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13251336208519168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:07:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13251336208519168 [0;39m ==> Parameters: 
2023-03-05 16:07:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13251336208519168 [0;39m <==    Updates: 1
2023-03-05 16:07:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13251336208519168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-05 16:07:45.272 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:07:46.802 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:07:47.316 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:07:49.333 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:07:51.365 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:08:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13251441066119168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:08:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13251441066119168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:08:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13251441066119168 [0;39m ==> Parameters: 
2023-03-05 16:08:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13251441066119168 [0;39m <==    Updates: 0
2023-03-05 16:08:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13251441066119168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-05 16:08:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13251462029250560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:08:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13251462029250560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:08:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13251462029250560 [0;39m ==> Parameters: 
2023-03-05 16:08:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13251462029250560 [0;39m <==    Updates: 1
2023-03-05 16:08:05.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13251462029250560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-05 16:08:13.397 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:08:15.445 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:08:16.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:08:17.491 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:08:19.509 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:08:21.553 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:08:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13251587866759168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:08:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13251587866759168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:08:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13251587866759168 [0;39m ==> Parameters: 
2023-03-05 16:08:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13251587866759168 [0;39m <==    Updates: 1
2023-03-05 16:08:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13251587866759168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:08:37.507 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:08:39.567 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:08:45.289 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:08:46.822 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:08:47.319 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:08:49.364 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:09:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13251692715970560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:09:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13251692715970560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:09:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13251692715970560 [0;39m ==> Parameters: 
2023-03-05 16:09:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13251692715970560 [0;39m <==    Updates: 0
2023-03-05 16:09:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13251692715970560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-05 16:09:01.600 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:09:03.617 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:09:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13251713691684864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:09:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13251713691684864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:09:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13251713691684864 [0;39m ==> Parameters: 
2023-03-05 16:09:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13251713691684864 [0;39m <==    Updates: 1
2023-03-05 16:09:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13251713691684864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-05 16:09:15.287 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:09:16.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:09:19.367 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:09:25.678 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:09:27.726 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:09:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13251839512416256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:09:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13251839512416256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:09:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13251839512416256 [0;39m ==> Parameters: 
2023-03-05 16:09:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13251839512416256 [0;39m <==    Updates: 1
2023-03-05 16:09:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13251839512416256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:09:45.257 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:09:46.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:09:47.318 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:09:49.365 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:09:51.411 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:09:53.458 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:10:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13251944382599168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:10:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13251944382599168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:10:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13251944382599168 [0;39m ==> Parameters: 
2023-03-05 16:10:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13251944382599168 [0;39m <==    Updates: 0
2023-03-05 16:10:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13251944382599168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-05 16:10:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13251965354119168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:10:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13251965354119168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:10:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13251965354119168 [0;39m ==> Parameters: 
2023-03-05 16:10:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13251965354119168 [0;39m <==    Updates: 1
2023-03-05 16:10:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13251965354119168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:10:15.277 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:10:16.807 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:10:17.308 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:10:19.368 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:10:21.412 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:10:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13252091179044864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:10:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13252091179044864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:10:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13252091179044864 [0;39m ==> Parameters: 
2023-03-05 16:10:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13252091179044864 [0;39m <==    Updates: 1
2023-03-05 16:10:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13252091179044864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:10:43.459 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:10:45.504 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:10:46.806 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:10:47.539 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:10:49.569 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:10:51.601 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:11:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13252196040839168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:11:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13252196040839168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:11:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13252196040839168 [0;39m ==> Parameters: 
2023-03-05 16:11:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13252196040839168 [0;39m <==    Updates: 0
2023-03-05 16:11:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13252196040839168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 16:11:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13252217037524992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:11:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13252217037524992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:11:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13252217037524992 [0;39m ==> Parameters: 
2023-03-05 16:11:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13252217037524992 [0;39m <==    Updates: 1
2023-03-05 16:11:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13252217037524992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:11:07.554 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:11:09.599 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:11:15.301 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:11:16.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:11:17.335 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:11:19.366 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:11:31.644 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:11:33.677 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:11:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13252342833090560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:11:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13252342833090560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:11:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13252342833090560 [0;39m ==> Parameters: 
2023-03-05 16:11:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13252342833090560 [0;39m <==    Updates: 1
2023-03-05 16:11:35.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13252342833090560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 16:11:45.276 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:11:46.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:11:49.350 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:11:55.711 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:11:57.757 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:12:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13252447694884864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:12:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13252447694884864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:12:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13252447694884864 [0;39m ==> Parameters: 
2023-03-05 16:12:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13252447694884864 [0;39m <==    Updates: 0
2023-03-05 16:12:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13252447694884864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-05 16:12:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13252468649627648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:12:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13252468649627648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:12:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13252468649627648 [0;39m ==> Parameters: 
2023-03-05 16:12:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13252468649627648 [0;39m <==    Updates: 1
2023-03-05 16:12:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13252468649627648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:12:15.273 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:12:16.803 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:12:17.335 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:12:19.380 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:12:21.413 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:12:23.432 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:12:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13252594503913472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:12:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13252594503913472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:12:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13252594503913472 [0;39m ==> Parameters: 
2023-03-05 16:12:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13252594503913472 [0;39m <==    Updates: 1
2023-03-05 16:12:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13252594503913472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:12:46.819 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:12:47.336 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:12:49.382 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:12:51.413 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:13:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13252699353124864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:13:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13252699353124864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:13:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13252699353124864 [0;39m ==> Parameters: 
2023-03-05 16:13:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13252699353124864 [0;39m <==    Updates: 0
2023-03-05 16:13:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13252699353124864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-05 16:13:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13252720341422080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:13:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13252720341422080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:13:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13252720341422080 [0;39m ==> Parameters: 
2023-03-05 16:13:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13252720341422080 [0;39m <==    Updates: 1
2023-03-05 16:13:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13252720341422080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:13:13.462 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:13:15.488 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:13:16.788 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:13:19.538 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:13:21.581 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:13:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13252846157959168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:13:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13252846157959168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:13:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13252846157959168 [0;39m ==> Parameters: 
2023-03-05 16:13:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13252846157959168 [0;39m <==    Updates: 1
2023-03-05 16:13:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13252846157959168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:13:37.537 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:13:39.585 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:13:45.289 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:13:46.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:13:47.335 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:13:49.381 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:14:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13252951002976256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:14:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13252951002976256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:14:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13252951002976256 [0;39m ==> Parameters: 
2023-03-05 16:14:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13252951002976256 [0;39m <==    Updates: 0
2023-03-05 16:14:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13252951002976256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:14:01.617 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:14:03.661 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:14:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13252971978690560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:14:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13252971978690560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:14:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13252971978690560 [0;39m ==> Parameters: 
2023-03-05 16:14:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13252971978690560 [0;39m <==    Updates: 1
2023-03-05 16:14:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13252971978690560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:14:15.302 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:14:16.802 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:14:19.339 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:14:27.724 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:14:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13253097828782080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:14:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13253097828782080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:14:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13253097828782080 [0;39m ==> Parameters: 
2023-03-05 16:14:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13253097828782080 [0;39m <==    Updates: 1
2023-03-05 16:14:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13253097828782080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:14:46.816 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:14:49.349 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:14:53.413 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:15:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13253202652827648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:15:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13253202652827648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:15:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13253202652827648 [0;39m ==> Parameters: 
2023-03-05 16:15:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13253202652827648 [0;39m <==    Updates: 0
2023-03-05 16:15:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13253202652827648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 16:15:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13253223632736256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:15:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13253223632736256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:15:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13253223632736256 [0;39m ==> Parameters: 
2023-03-05 16:15:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13253223632736256 [0;39m <==    Updates: 1
2023-03-05 16:15:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13253223632736256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:15:16.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:15:17.349 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:15:19.366 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:15:21.398 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:15:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13253349478633472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:15:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13253349478633472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:15:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13253349478633472 [0;39m ==> Parameters: 
2023-03-05 16:15:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13253349478633472 [0;39m <==    Updates: 1
2023-03-05 16:15:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13253349478633472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:15:43.414 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:15:45.446 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:15:46.834 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:15:49.499 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:15:51.524 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:16:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13253454332039168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:16:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13253454332039168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:16:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13253454332039168 [0;39m ==> Parameters: 
2023-03-05 16:16:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13253454332039168 [0;39m <==    Updates: 0
2023-03-05 16:16:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13253454332039168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 16:16:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13253475299364864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:16:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13253475299364864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:16:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13253475299364864 [0;39m ==> Parameters: 
2023-03-05 16:16:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13253475299364864 [0;39m <==    Updates: 1
2023-03-05 16:16:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13253475299364864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:16:09.538 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:16:16.819 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:16:17.318 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:16:19.348 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:16:31.570 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:16:33.619 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:16:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13253601136873472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:16:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13253601136873472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:16:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13253601136873472 [0;39m ==> Parameters: 
2023-03-05 16:16:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13253601136873472 [0;39m <==    Updates: 1
2023-03-05 16:16:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13253601136873472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:16:46.805 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:16:49.349 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:16:55.679 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:16:57.710 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:17:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13253705994473472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:17:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13253705994473472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:17:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13253705994473472 [0;39m ==> Parameters: 
2023-03-05 16:17:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13253705994473472 [0;39m <==    Updates: 0
2023-03-05 16:17:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13253705994473472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:17:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13253726961799168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:17:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13253726961799168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:17:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13253726961799168 [0;39m ==> Parameters: 
2023-03-05 16:17:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13253726961799168 [0;39m <==    Updates: 1
2023-03-05 16:17:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13253726961799168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:17:15.288 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:17:16.821 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:17:19.381 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:17:21.429 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:17:23.476 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:17:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13253852786724864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:17:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13253852786724864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:17:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13253852786724864 [0;39m ==> Parameters: 
2023-03-05 16:17:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13253852786724864 [0;39m <==    Updates: 1
2023-03-05 16:17:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13253852786724864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:17:46.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:17:47.354 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:17:49.405 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:17:51.425 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:18:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13253957648519168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:18:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13253957648519168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:18:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13253957648519168 [0;39m ==> Parameters: 
2023-03-05 16:18:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13253957648519168 [0;39m <==    Updates: 0
2023-03-05 16:18:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13253957648519168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-03-05 16:18:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13253978632622080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:18:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13253978632622080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:18:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13253978632622080 [0;39m ==> Parameters: 
2023-03-05 16:18:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13253978632622080 [0;39m <==    Updates: 1
2023-03-05 16:18:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13253978632622080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:18:13.450 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:18:15.473 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:18:16.802 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:18:17.507 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:18:19.554 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:18:21.583 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:18:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13254104440770560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:18:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13254104440770560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:18:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13254104440770560 [0;39m ==> Parameters: 
2023-03-05 16:18:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13254104440770560 [0;39m <==    Updates: 1
2023-03-05 16:18:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13254104440770560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:18:37.505 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:18:39.526 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:18:45.279 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:18:46.812 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:18:47.298 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:18:49.311 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:19:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13254209319342080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:19:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13254209319342080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:19:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13254209319342080 [0;39m ==> Parameters: 
2023-03-05 16:19:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13254209319342080 [0;39m <==    Updates: 0
2023-03-05 16:19:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13254209319342080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 16:19:01.577 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:19:03.611 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:19:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13254230278279168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:19:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13254230278279168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:19:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13254230278279168 [0;39m ==> Parameters: 
2023-03-05 16:19:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13254230278279168 [0;39m <==    Updates: 1
2023-03-05 16:19:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13254230278279168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:19:16.798 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:19:17.333 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:19:19.363 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:19:25.655 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:19:27.670 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:19:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13254356140953600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:19:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13254356140953600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:19:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13254356140953600 [0;39m ==> Parameters: 
2023-03-05 16:19:35.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13254356140953600 [0;39m <==    Updates: 1
2023-03-05 16:19:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13254356140953600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:19:45.283 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:19:46.809 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:19:47.340 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:19:49.403 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:19:53.442 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:20:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13254460994359296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:20:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13254460994359296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:20:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13254460994359296 [0;39m ==> Parameters: 
2023-03-05 16:20:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13254460994359296 [0;39m <==    Updates: 0
2023-03-05 16:20:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13254460994359296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 16:20:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13254481923936256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:20:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13254481923936256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:20:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13254481923936256 [0;39m ==> Parameters: 
2023-03-05 16:20:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13254481923936256 [0;39m <==    Updates: 1
2023-03-05 16:20:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13254481923936256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:20:15.288 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:20:16.803 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:20:19.351 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:20:21.383 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:20:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13254607744667648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:20:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13254607744667648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:20:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13254607744667648 [0;39m ==> Parameters: 
2023-03-05 16:20:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13254607744667648 [0;39m <==    Updates: 1
2023-03-05 16:20:35.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13254607744667648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-05 16:20:43.407 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:20:45.433 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:20:46.810 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:20:47.437 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:20:49.446 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:21:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13254712614850560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:21:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13254712614850560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:21:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13254712614850560 [0;39m ==> Parameters: 
2023-03-05 16:21:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13254712614850560 [0;39m <==    Updates: 0
2023-03-05 16:21:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13254712614850560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:21:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13254733594759168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:21:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13254733594759168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:21:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13254733594759168 [0;39m ==> Parameters: 
2023-03-05 16:21:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13254733594759168 [0;39m <==    Updates: 1
2023-03-05 16:21:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13254733594759168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:21:10.508 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:21:15.303 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:21:16.809 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:21:17.339 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:21:19.347 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:21:34.544 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:21:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13254859432267776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:21:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13254859432267776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:21:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13254859432267776 [0;39m ==> Parameters: 
2023-03-05 16:21:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13254859432267776 [0;39m <==    Updates: 1
2023-03-05 16:21:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13254859432267776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:21:45.289 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:21:46.860 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:21:47.315 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:21:49.332 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:21:58.582 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:22:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13254964306644992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:22:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13254964306644992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:22:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13254964306644992 [0;39m ==> Parameters: 
2023-03-05 16:22:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13254964306644992 [0;39m <==    Updates: 0
2023-03-05 16:22:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13254964306644992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 16:22:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13254985273970688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:22:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13254985273970688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:22:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13254985273970688 [0;39m ==> Parameters: 
2023-03-05 16:22:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13254985273970688 [0;39m <==    Updates: 1
2023-03-05 16:22:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13254985273970688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:22:15.284 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:22:16.816 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:22:19.362 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:22:23.400 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:22:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13255111077924864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:22:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13255111077924864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:22:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13255111077924864 [0;39m ==> Parameters: 
2023-03-05 16:22:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13255111077924864 [0;39m <==    Updates: 1
2023-03-05 16:22:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13255111077924864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 16:22:45.288 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:22:46.803 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:22:47.335 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:22:49.366 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:22:51.412 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:23:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13255215939719168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:23:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13255215939719168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:23:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13255215939719168 [0;39m ==> Parameters: 
2023-03-05 16:23:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13255215939719168 [0;39m <==    Updates: 0
2023-03-05 16:23:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13255215939719168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 16:23:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13255236911239168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:23:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13255236911239168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:23:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13255236911239168 [0;39m ==> Parameters: 
2023-03-05 16:23:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13255236911239168 [0;39m <==    Updates: 1
2023-03-05 16:23:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13255236911239168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:23:13.460 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:23:15.505 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:23:16.820 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:23:17.524 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:23:21.589 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:23:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13255362740359168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:23:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13255362740359168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:23:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13255362740359168 [0;39m ==> Parameters: 
2023-03-05 16:23:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13255362740359168 [0;39m <==    Updates: 1
2023-03-05 16:23:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13255362740359168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:23:37.553 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:23:39.584 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:23:45.272 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:23:46.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:23:47.318 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:23:49.380 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:24:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13255467593764864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:24:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13255467593764864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:24:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13255467593764864 [0;39m ==> Parameters: 
2023-03-05 16:24:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13255467593764864 [0;39m <==    Updates: 0
2023-03-05 16:24:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13255467593764864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-05 16:24:01.617 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:24:03.649 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:24:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13255488573673472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:24:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13255488573673472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:24:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13255488573673472 [0;39m ==> Parameters: 
2023-03-05 16:24:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13255488573673472 [0;39m <==    Updates: 1
2023-03-05 16:24:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13255488573673472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-05 16:24:15.288 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:24:16.791 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:24:19.367 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:24:27.725 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:24:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13255614398599168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:24:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13255614398599168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:24:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13255614398599168 [0;39m ==> Parameters: 
2023-03-05 16:24:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13255614398599168 [0;39m <==    Updates: 1
2023-03-05 16:24:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13255614398599168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-05 16:24:45.288 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:24:46.806 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:24:47.319 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:24:49.351 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:24:51.381 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:24:53.412 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:25:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13255719252004864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:25:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13255719252004864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:25:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13255719252004864 [0;39m ==> Parameters: 
2023-03-05 16:25:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13255719252004864 [0;39m <==    Updates: 0
2023-03-05 16:25:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13255719252004864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:25:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13255740223524864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:25:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13255740223524864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:25:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13255740223524864 [0;39m ==> Parameters: 
2023-03-05 16:25:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13255740223524864 [0;39m <==    Updates: 1
2023-03-05 16:25:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13255740223524864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:25:15.259 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:25:16.817 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:25:17.303 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:25:19.350 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:25:21.395 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:25:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13255866052644864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:25:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13255866052644864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:25:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13255866052644864 [0;39m ==> Parameters: 
2023-03-05 16:25:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13255866052644864 [0;39m <==    Updates: 1
2023-03-05 16:25:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13255866052644864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:25:43.443 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:25:45.477 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:25:46.806 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:25:47.507 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:25:49.537 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:25:51.584 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:26:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13255970914439168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:26:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13255970914439168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:26:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13255970914439168 [0;39m ==> Parameters: 
2023-03-05 16:26:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13255970914439168 [0;39m <==    Updates: 0
2023-03-05 16:26:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13255970914439168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 16:26:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13255991881764864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:26:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13255991881764864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:26:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13255991881764864 [0;39m ==> Parameters: 
2023-03-05 16:26:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13255991881764864 [0;39m <==    Updates: 1
2023-03-05 16:26:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13255991881764864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:26:07.522 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:26:09.554 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:26:15.304 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:26:16.790 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:26:19.368 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:26:31.617 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:26:33.664 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:26:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13256117706690560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:26:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13256117706690560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:26:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13256117706690560 [0;39m ==> Parameters: 
2023-03-05 16:26:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13256117706690560 [0;39m <==    Updates: 1
2023-03-05 16:26:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13256117706690560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:26:45.272 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:26:46.805 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:26:47.320 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:26:49.380 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:26:55.709 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:26:57.741 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:27:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13256222568484864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:27:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13256222568484864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:27:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13256222568484864 [0;39m ==> Parameters: 
2023-03-05 16:27:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13256222568484864 [0;39m <==    Updates: 0
2023-03-05 16:27:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13256222568484864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 16:27:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13256243548393472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:27:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13256243548393472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:27:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13256243548393472 [0;39m ==> Parameters: 
2023-03-05 16:27:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13256243548393472 [0;39m <==    Updates: 1
2023-03-05 16:27:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13256243548393472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 16:27:15.287 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:27:16.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:27:17.334 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:27:19.381 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:27:21.411 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:27:23.445 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:27:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13256369373319168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:27:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13256369373319168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:27:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13256369373319168 [0;39m ==> Parameters: 
2023-03-05 16:27:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13256369373319168 [0;39m <==    Updates: 1
2023-03-05 16:27:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13256369373319168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:27:45.272 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:27:46.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:27:47.304 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:27:49.350 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:27:51.381 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:28:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13256474218336256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:28:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13256474218336256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:28:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13256474218336256 [0;39m ==> Parameters: 
2023-03-05 16:28:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13256474218336256 [0;39m <==    Updates: 0
2023-03-05 16:28:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13256474218336256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:28:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13256495202439168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:28:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13256495202439168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:28:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13256495202439168 [0;39m ==> Parameters: 
2023-03-05 16:28:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13256495202439168 [0;39m <==    Updates: 1
2023-03-05 16:28:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13256495202439168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:28:13.427 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:28:15.445 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:28:16.805 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:28:17.477 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:28:19.507 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:28:21.553 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:28:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13256621018976256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:28:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13256621018976256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:28:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13256621018976256 [0;39m ==> Parameters: 
2023-03-05 16:28:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13256621018976256 [0;39m <==    Updates: 1
2023-03-05 16:28:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13256621018976256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:28:37.492 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:28:39.523 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:28:46.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:28:47.333 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:28:49.351 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:29:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13256725889159168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:29:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13256725889159168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:29:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13256725889159168 [0;39m ==> Parameters: 
2023-03-05 16:29:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13256725889159168 [0;39m <==    Updates: 0
2023-03-05 16:29:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13256725889159168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 16:29:01.570 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:29:03.616 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:29:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13256746856484864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:29:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13256746856484864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:29:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13256746856484864 [0;39m ==> Parameters: 
2023-03-05 16:29:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13256746856484864 [0;39m <==    Updates: 1
2023-03-05 16:29:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13256746856484864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:29:15.272 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:29:16.803 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:29:17.288 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:29:19.334 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:29:25.632 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:29:27.663 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:29:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13256872685604864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:29:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13256872685604864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:29:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13256872685604864 [0;39m ==> Parameters: 
2023-03-05 16:29:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13256872685604864 [0;39m <==    Updates: 1
2023-03-05 16:29:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13256872685604864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:29:46.803 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:29:49.333 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:29:51.365 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:29:53.397 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:30:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13256977543204864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:30:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13256977543204864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:30:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13256977543204864 [0;39m ==> Parameters: 
2023-03-05 16:30:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13256977543204864 [0;39m <==    Updates: 0
2023-03-05 16:30:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13256977543204864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 16:30:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13256998510530560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:30:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13256998510530560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:30:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13256998510530560 [0;39m ==> Parameters: 
2023-03-05 16:30:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13256998510530560 [0;39m <==    Updates: 1
2023-03-05 16:30:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13256998510530560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:30:15.288 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:30:16.819 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:30:17.336 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:30:19.382 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:30:21.413 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:30:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13257124339650560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:30:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13257124339650560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:30:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13257124339650560 [0;39m ==> Parameters: 
2023-03-05 16:30:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13257124339650560 [0;39m <==    Updates: 1
2023-03-05 16:30:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13257124339650560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:30:43.445 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:30:45.474 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:30:46.804 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:30:47.523 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:30:49.553 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:30:51.601 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:31:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13257229205639168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:31:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13257229205639168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:31:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13257229205639168 [0;39m ==> Parameters: 
2023-03-05 16:31:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13257229205639168 [0;39m <==    Updates: 0
2023-03-05 16:31:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13257229205639168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 16:31:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13257250172964864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:31:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13257250172964864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:31:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13257250172964864 [0;39m ==> Parameters: 
2023-03-05 16:31:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13257250172964864 [0;39m <==    Updates: 1
2023-03-05 16:31:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13257250172964864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:31:07.523 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:31:09.554 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:31:15.273 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:31:16.817 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:31:17.317 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:31:19.349 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:31:33.663 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:31:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13257376002084864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:31:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13257376002084864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:31:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13257376002084864 [0;39m ==> Parameters: 
2023-03-05 16:31:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13257376002084864 [0;39m <==    Updates: 1
2023-03-05 16:31:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13257376002084864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:31:45.287 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:31:46.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:31:47.333 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:31:49.366 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:31:55.680 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:31:57.711 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:32:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13257480855490560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:32:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13257480855490560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:32:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13257480855490560 [0;39m ==> Parameters: 
2023-03-05 16:32:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13257480855490560 [0;39m <==    Updates: 0
2023-03-05 16:32:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13257480855490560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 16:32:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13257501843787776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:32:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13257501843787776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:32:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13257501843787776 [0;39m ==> Parameters: 
2023-03-05 16:32:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13257501843787776 [0;39m <==    Updates: 1
2023-03-05 16:32:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13257501843787776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:32:15.272 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:32:16.818 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:32:17.318 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:32:19.365 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:32:21.397 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:32:23.429 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:32:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13257627664519168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:32:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13257627664519168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:32:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13257627664519168 [0;39m ==> Parameters: 
2023-03-05 16:32:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13257627664519168 [0;39m <==    Updates: 1
2023-03-05 16:32:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13257627664519168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:32:45.302 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:32:46.819 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:32:47.333 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:32:49.368 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:32:51.413 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:33:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13257732526313472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:33:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13257732526313472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:33:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13257732526313472 [0;39m ==> Parameters: 
2023-03-05 16:33:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13257732526313472 [0;39m <==    Updates: 0
2023-03-05 16:33:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13257732526313472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:33:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13257753485250560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:33:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13257753485250560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:33:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13257753485250560 [0;39m ==> Parameters: 
2023-03-05 16:33:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13257753485250560 [0;39m <==    Updates: 1
2023-03-05 16:33:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13257753485250560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:33:13.460 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:33:15.492 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:33:16.803 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:33:17.522 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:33:19.568 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:33:21.615 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:33:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13257879331147776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:33:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13257879331147776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:33:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13257879331147776 [0;39m ==> Parameters: 
2023-03-05 16:33:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13257879331147776 [0;39m <==    Updates: 1
2023-03-05 16:33:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13257879331147776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-05 16:33:37.537 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:33:39.584 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:33:46.789 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:33:49.381 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:34:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13257984176164864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:34:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13257984176164864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:34:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13257984176164864 [0;39m ==> Parameters: 
2023-03-05 16:34:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13257984176164864 [0;39m <==    Updates: 0
2023-03-05 16:34:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13257984176164864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 16:34:01.615 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:34:03.650 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:34:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13258005147684864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:34:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13258005147684864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:34:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13258005147684864 [0;39m ==> Parameters: 
2023-03-05 16:34:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13258005147684864 [0;39m <==    Updates: 1
2023-03-05 16:34:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13258005147684864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-05 16:34:16.789 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:34:19.368 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:34:25.678 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:34:27.742 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:34:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13258130980999168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:34:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13258130980999168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:34:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13258130980999168 [0;39m ==> Parameters: 
2023-03-05 16:34:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13258130980999168 [0;39m <==    Updates: 1
2023-03-05 16:34:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13258130980999168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-05 16:34:46.802 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:34:47.334 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:34:49.380 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:34:53.429 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:35:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13258235834404864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:35:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13258235834404864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:35:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13258235834404864 [0;39m ==> Parameters: 
2023-03-05 16:35:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13258235834404864 [0;39m <==    Updates: 0
2023-03-05 16:35:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13258235834404864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-05 16:35:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13258256801730560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:35:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13258256801730560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:35:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13258256801730560 [0;39m ==> Parameters: 
2023-03-05 16:35:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13258256801730560 [0;39m <==    Updates: 1
2023-03-05 16:35:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13258256801730560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-05 16:35:16.803 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:35:17.336 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:35:19.366 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:35:21.411 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:35:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13258382635044864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:35:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13258382635044864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:35:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13258382635044864 [0;39m ==> Parameters: 
2023-03-05 16:35:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13258382635044864 [0;39m <==    Updates: 1
2023-03-05 16:35:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13258382635044864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 16:35:43.459 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:35:45.507 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:35:46.819 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:35:47.553 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:35:49.600 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:35:51.647 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:36:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13258487492644864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:36:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13258487492644864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:36:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13258487492644864 [0;39m ==> Parameters: 
2023-03-05 16:36:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13258487492644864 [0;39m <==    Updates: 0
2023-03-05 16:36:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13258487492644864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 16:36:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13258508468359168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:36:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13258508468359168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:36:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13258508468359168 [0;39m ==> Parameters: 
2023-03-05 16:36:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13258508468359168 [0;39m <==    Updates: 1
2023-03-05 16:36:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13258508468359168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 16:36:07.569 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:36:09.599 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:36:16.803 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:36:17.304 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:36:19.351 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:36:31.633 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:36:33.679 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:36:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13258634293284864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:36:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13258634293284864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:36:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13258634293284864 [0;39m ==> Parameters: 
2023-03-05 16:36:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13258634293284864 [0;39m <==    Updates: 1
2023-03-05 16:36:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13258634293284864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 16:36:46.788 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:36:47.334 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:36:49.381 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:36:57.743 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:37:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m13258739146690560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-05 16:37:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13258739146690560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-05 16:37:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13258739146690560 [0;39m ==> Parameters: 
2023-03-05 16:37:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m13258739146690560 [0;39m <==    Updates: 0
2023-03-05 16:37:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m13258739146690560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-05 16:37:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13258760126599168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:37:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13258760126599168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:37:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13258760126599168 [0;39m ==> Parameters: 
2023-03-05 16:37:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13258760126599168 [0;39m <==    Updates: 1
2023-03-05 16:37:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13258760126599168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-05 16:37:15.303 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:37:16.819 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:37:17.349 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:37:19.382 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:37:21.414 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:37:23.443 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 16:37:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m13258885951524864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-05 16:37:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13258885951524864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-05 16:37:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13258885951524864 [0;39m ==> Parameters: 
2023-03-05 16:37:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m13258885951524864 [0;39m <==    Updates: 1
2023-03-05 16:37:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m13258885951524864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-05 19:37:42.611 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 19:37:45.106 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 19:37:45.623 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-05 19:37:47.664 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
