2023-03-18 16:41:01.392 INFO  com.jiawa.wiki.WikiApplication                    :55   [32m                  [0;39m Starting WikiApplication using Java 1.8.0_271 on LAPTOP-TLCI2GAA with PID 18776 (D:\work\jiawawiki\target\classes started by k in D:\work\jiawawiki)
2023-03-18 16:41:01.411 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.1.6.Final
2023-03-18 16:41:01.789 INFO  com.jiawa.wiki.WikiApplication                    :660  [32m                  [0;39m No active profile set, falling back to default profiles: default
2023-03-18 16:41:01.834 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-03-18 16:41:01.836 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-03-18 16:41:02.559 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :250  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-18 16:41:02.561 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :128  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-03-18 16:41:02.599 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :188  [32m                  [0;39m Finished Spring Data repository scanning in 15 ms. Found 0 Redis repository interfaces.
2023-03-18 16:41:02.838 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration$$EnhancerBySpringCGLIB$$2d70dbe2] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 16:41:02.848 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 16:41:03.790 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'defaultMQProducer' of type [org.apache.rocketmq.client.producer.DefaultMQProducer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 16:41:03.793 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonConfig' of type [com.jiawa.wiki.config.JacksonConfig$$EnhancerBySpringCGLIB$$cfab50e3] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 16:41:03.794 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 16:41:03.796 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 16:41:03.798 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'spring.jackson-org.springframework.boot.autoconfigure.jackson.JacksonProperties' of type [org.springframework.boot.autoconfigure.jackson.JacksonProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 16:41:03.799 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'standardJacksonObjectMapperBuilderCustomizer' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration$StandardJackson2ObjectMapperBuilderCustomizer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 16:41:03.801 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 16:41:03.804 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'parameterNamesModule' of type [com.fasterxml.jackson.module.paramnames.ParameterNamesModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 16:41:03.804 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 16:41:03.820 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jsonComponentModule' of type [org.springframework.boot.jackson.JsonComponentModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 16:41:03.820 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.data.web.config.SpringDataJacksonConfiguration' of type [org.springframework.data.web.config.SpringDataJacksonConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 16:41:03.824 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonGeoModule' of type [org.springframework.data.geo.GeoModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 16:41:03.828 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapperBuilder' of type [org.springframework.http.converter.json.Jackson2ObjectMapperBuilder] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 16:41:03.845 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapper' of type [com.fasterxml.jackson.databind.ObjectMapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 16:41:05.463 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketMQTemplate' of type [org.apache.rocketmq.spring.core.RocketMQTemplate] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 16:41:05.465 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'transactionHandlerRegistry' of type [org.apache.rocketmq.spring.config.TransactionHandlerRegistry] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 16:41:05.896 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2023-03-18 16:41:05.903 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2023-03-18 16:41:05.903 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2023-03-18 16:41:05.903 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.39]
2023-03-18 16:41:05.981 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2023-03-18 16:41:05.981 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :289  [32m                  [0;39m Root WebApplicationContext: initialization completed in 4144 ms
2023-03-18 16:41:06.690 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2023-03-18 16:41:06.982 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2023-03-18 16:41:07.027 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2023-03-18 16:41:07.581 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:41:07.581 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:41:11.678 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:41:11.679 INFO  o.a.r.s.support.DefaultRocketMQListenerContainer  :243  [32m                  [0;39m running container: DefaultRocketMQListenerContainer{consumerGroup='default', nameServer='127.0.0.1:9876', topic='VOTE_TOPIC', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
2023-03-18 16:41:11.679 INFO  o.a.r.s.a.ListenerContainerConfiguration          :107  [32m                  [0;39m Register the listener to container, listenerBeanName:voteTopicConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-03-18 16:41:11.688 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2023-03-18 16:41:11.705 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2023-03-18 16:41:11.717 INFO  com.jiawa.wiki.WikiApplication                    :61   [32m                  [0;39m Started WikiApplication in 10.826 seconds (JVM running for 12.852)
2023-03-18 16:41:11.720 INFO  com.jiawa.wiki.WikiApplication                    :26   [32m                  [0;39m å¯åŠ¨æˆåŠŸï¼ï¼
2023-03-18 16:41:11.720 INFO  com.jiawa.wiki.WikiApplication                    :27   [32m                  [0;39m åœ°å€: 	http://127.0.0.1:8880
2023-03-18 16:41:13.713 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:41:15.775 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:41:35.017 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17970934883422208 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:41:35.043 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m17970934883422208 [0;39m HikariPool-1 - Starting...
2023-03-18 16:41:35.231 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m17970934883422208 [0;39m HikariPool-1 - Start completed.
2023-03-18 16:41:35.238 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17970934883422208 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:41:35.267 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17970934883422208 [0;39m ==> Parameters: 
2023-03-18 16:41:35.274 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17970934883422208 [0;39m <==    Updates: 1
2023-03-18 16:41:35.276 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17970934883422208 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š259æ¯«ç§’
2023-03-18 16:41:37.161 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:41:37.873 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:41:39.265 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:41:41.376 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:41:43.386 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:41:55.535 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-03-18 16:41:55.536 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2023-03-18 16:41:55.538 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 2 ms
2023-03-18 16:41:55.593 INFO  com.jiawa.wiki.websocket.WebSocketServer          :32   [32m                  [0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼štMNU1BFKYLï¼Œsession idï¼š0ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2023-03-18 16:41:55.661 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971021462245376 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:41:55.661 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971021462245377 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:41:55.662 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971021462245376 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-18 16:41:55.661 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971021462245378 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:41:55.662 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971021462245376 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-18 16:41:55.663 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971021462245376 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:41:55.663 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971021462245378 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-03-18 16:41:55.663 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971021462245377 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-03-18 16:41:55.663 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971021462245378 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-03-18 16:41:55.663 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971021462245378 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:41:55.664 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971021462245377 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-03-18 16:41:55.664 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971021462245377 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:41:55.715 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971021462245377 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 16:41:55.716 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971021462245378 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 16:41:55.716 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971021462245376 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 16:41:55.727 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m17971021462245378 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-18 16:41:55.727 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m17971021462245377 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-18 16:41:55.728 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m17971021462245378 [0;39m ==> Parameters: 
2023-03-18 16:41:55.728 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m17971021462245377 [0;39m ==> Parameters: 
2023-03-18 16:41:55.752 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m17971021462245377 [0;39m <==      Total: 0
2023-03-18 16:41:55.753 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m17971021462245378 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-03-18 16:41:55.753 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m17971021462245378 [0;39m <==        Row: 2023-03-02, 0, 0
2023-03-18 16:41:55.758 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m17971021462245376 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-18 16:41:55.760 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m17971021462245378 [0;39m <==        Row: 2023-03-05, 8, 5
2023-03-18 16:41:55.759 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m17971021462245376 [0;39m ==> Parameters: 
2023-03-18 16:41:55.760 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m17971021462245378 [0;39m <==        Row: 2023-03-06, 1, 1
2023-03-18 16:41:55.761 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m17971021462245378 [0;39m <==      Total: 3
2023-03-18 16:41:55.763 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971021462245376 [0;39m <==    Columns: id, parent, name, sort
2023-03-18 16:41:55.763 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971021462245376 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-18 16:41:55.764 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971021462245376 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-18 16:41:55.764 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971021462245376 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-18 16:41:55.765 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971021462245376 [0;39m <==        Row: 200, 0, Java, 200
2023-03-18 16:41:55.765 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971021462245376 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-18 16:41:55.765 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971021462245376 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-18 16:41:55.766 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971021462245376 [0;39m <==        Row: 300, 0, Python, 300
2023-03-18 16:41:55.767 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971021462245376 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-18 16:41:55.767 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971021462245376 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-18 16:41:55.768 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971021462245376 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-18 16:41:55.768 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971021462245376 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-18 16:41:55.769 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971021462245376 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-18 16:41:55.769 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971021462245376 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-18 16:41:55.771 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971021462245376 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-18 16:41:55.771 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971021462245376 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-18 16:41:55.772 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m17971021462245376 [0;39m <==      Total: 15
2023-03-18 16:41:55.783 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971021462245377 [0;39m è¿”å›žç»“æžœ: {"content":[],"success":true}
2023-03-18 16:41:55.783 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971021462245377 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š124 ms -------------
2023-03-18 16:41:55.789 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971021462245376 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-18 16:41:55.789 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971021462245376 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š130 ms -------------
2023-03-18 16:41:55.789 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971021462245378 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1677945600000,"viewCount":0,"viewIncrease":8,"voteCount":0,"voteIncrease":5},{"date":1678032000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":1}],"success":true}
2023-03-18 16:41:55.790 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971021462245378 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š131 ms -------------
2023-03-18 16:42:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17971039699079168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 16:42:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17971039699079168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 16:42:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17971039699079168 [0;39m ==> Parameters: 
2023-03-18 16:42:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17971039699079168 [0;39m <==    Updates: 5
2023-03-18 16:42:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17971039699079168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 16:42:00.252 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971040726683648 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:00.253 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971040726683648 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-18 16:42:00.253 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971040726683648 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-18 16:42:00.253 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971040726683648 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:00.255 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971040726683648 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":101,"page":1,"size":1000}]
2023-03-18 16:42:00.412 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971040726683648 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-18 16:42:00.413 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971040726683648 [0;39m ==> Parameters: 101(Long)
2023-03-18 16:42:00.414 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m17971040726683648 [0;39m <==    Columns: count(0)
2023-03-18 16:42:00.414 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m17971040726683648 [0;39m <==        Row: 1
2023-03-18 16:42:00.415 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971040726683648 [0;39m <==      Total: 1
2023-03-18 16:42:00.417 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m17971040726683648 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-03-18 16:42:00.417 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m17971040726683648 [0;39m ==> Parameters: 101(Long), 1000(Integer)
2023-03-18 16:42:00.418 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m17971040726683648 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-18 16:42:00.418 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m17971040726683648 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, 100, 101, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-18 16:42:00.418 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m17971040726683648 [0;39m <==      Total: 1
2023-03-18 16:42:00.421 INFO  com.jiawa.wiki.service.EbookService               :48   [32m17971040726683648 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-18 16:42:00.421 INFO  com.jiawa.wiki.service.EbookService               :49   [32m17971040726683648 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-18 16:42:00.428 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971040726683648 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":100,"category2Id":101,"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":1},"success":true}
2023-03-18 16:42:00.428 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971040726683648 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š176 ms -------------
2023-03-18 16:42:01.583 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971046309302272 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:01.583 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971046309302272 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-18 16:42:01.583 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971046309302272 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-18 16:42:01.584 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971046309302272 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:01.584 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971046309302272 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":102,"page":1,"size":1000}]
2023-03-18 16:42:01.585 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971046309302272 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-18 16:42:01.586 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971046309302272 [0;39m ==> Parameters: 102(Long)
2023-03-18 16:42:01.586 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m17971046309302272 [0;39m <==    Columns: count(0)
2023-03-18 16:42:01.587 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m17971046309302272 [0;39m <==        Row: 0
2023-03-18 16:42:01.587 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971046309302272 [0;39m <==      Total: 1
2023-03-18 16:42:01.587 INFO  com.jiawa.wiki.service.EbookService               :48   [32m17971046309302272 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-18 16:42:01.587 INFO  com.jiawa.wiki.service.EbookService               :49   [32m17971046309302272 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-18 16:42:01.587 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971046309302272 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-18 16:42:01.587 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971046309302272 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-03-18 16:42:04.429 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971058246291456 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:04.429 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971058246291456 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/user/login POST
2023-03-18 16:42:04.430 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971058246291456 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.UserController.login
2023-03-18 16:42:04.430 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971058246291456 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:04.432 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971058246291456 [0;39m è¯·æ±‚å‚æ•°: [{"loginName":"test"}]
2023-03-18 16:42:04.437 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m17971058246291456 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2023-03-18 16:42:04.438 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m17971058246291456 [0;39m ==> Parameters: test(String)
2023-03-18 16:42:04.441 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m17971058246291456 [0;39m <==    Columns: id, login_name, name, password
2023-03-18 16:42:04.441 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m17971058246291456 [0;39m <==        Row: 1, test, æµ‹è¯•, e70e2222a9d67c4f2eae107533359aa4
2023-03-18 16:42:04.441 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m17971058246291456 [0;39m <==      Total: 1
2023-03-18 16:42:04.446 INFO  com.jiawa.wiki.controller.UserController          :79   [32m17971058246291456 [0;39m ç”Ÿæˆå•ç‚¹ç™»å½•tokenï¼š17971058317594624ï¼Œå¹¶æ”¾å…¥redisä¸­
2023-03-18 16:42:04.607 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971058246291456 [0;39m è¿”å›žç»“æžœ: {"content":{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"17971058317594624"},"success":true}
2023-03-18 16:42:04.607 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971058246291456 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š178 ms -------------
2023-03-18 16:42:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17971060649627648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:42:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17971060649627648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:42:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17971060649627648 [0;39m ==> Parameters: 
2023-03-18 16:42:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17971060649627648 [0;39m <==    Updates: 1
2023-03-18 16:42:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17971060649627648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 16:42:05.421 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:42:05.971 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m                  [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-18 16:42:05.971 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m                  [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š0 ms -------------
2023-03-18 16:42:05.974 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m                  [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-18 16:42:05.974 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m                  [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/list
2023-03-18 16:42:05.974 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m                  [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š17971058317594624
2023-03-18 16:42:05.977 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m                  [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"17971058317594624"}
2023-03-18 16:42:05.997 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971064822960128 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:05.997 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971064822960128 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/user/list GET
2023-03-18 16:42:05.997 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971064822960128 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.UserController.list
2023-03-18 16:42:05.997 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971064822960128 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:05.999 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971064822960128 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-03-18 16:42:06.002 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m17971064822960128 [0;39m ==>  Preparing: SELECT count(0) FROM user
2023-03-18 16:42:06.002 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m17971064822960128 [0;39m ==> Parameters: 
2023-03-18 16:42:06.003 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m17971064822960128 [0;39m <==    Columns: count(0)
2023-03-18 16:42:06.003 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m17971064822960128 [0;39m <==        Row: 1
2023-03-18 16:42:06.004 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m17971064822960128 [0;39m <==      Total: 1
2023-03-18 16:42:06.004 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m17971064822960128 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2023-03-18 16:42:06.004 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m17971064822960128 [0;39m ==> Parameters: 10(Integer)
2023-03-18 16:42:06.005 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m17971064822960128 [0;39m <==    Columns: id, login_name, name, password
2023-03-18 16:42:06.005 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m17971064822960128 [0;39m <==        Row: 1, test, æµ‹è¯•, e70e2222a9d67c4f2eae107533359aa4
2023-03-18 16:42:06.006 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m17971064822960128 [0;39m <==      Total: 1
2023-03-18 16:42:06.006 INFO  com.jiawa.wiki.service.UserService                :49   [32m17971064822960128 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-18 16:42:06.007 INFO  com.jiawa.wiki.service.UserService                :50   [32m17971064822960128 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-18 16:42:06.011 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971064822960128 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"id":1,"loginName":"test","name":"æµ‹è¯•"}],"total":1},"success":true}
2023-03-18 16:42:06.011 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971064822960128 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š15 ms -------------
2023-03-18 16:42:06.012 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m17971064822960128 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š38 ms -------------
2023-03-18 16:42:06.745 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971067960299520 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:06.745 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971067960299520 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-18 16:42:06.746 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971067960299520 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-18 16:42:06.746 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971067960299520 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:06.746 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971067960299520 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 16:42:06.747 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m17971067960299520 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-18 16:42:06.747 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m17971067960299520 [0;39m ==> Parameters: 
2023-03-18 16:42:06.748 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971067960299520 [0;39m <==    Columns: id, parent, name, sort
2023-03-18 16:42:06.748 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971067960299520 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-18 16:42:06.749 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971067960299520 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-18 16:42:06.750 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971067960299520 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-18 16:42:06.750 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971067960299520 [0;39m <==        Row: 200, 0, Java, 200
2023-03-18 16:42:06.750 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971067960299520 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-18 16:42:06.751 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971067960299520 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-18 16:42:06.751 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971067960299520 [0;39m <==        Row: 300, 0, Python, 300
2023-03-18 16:42:06.751 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971067960299520 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-18 16:42:06.752 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971067960299520 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-18 16:42:06.752 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971067960299520 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-18 16:42:06.752 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971067960299520 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-18 16:42:06.752 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971067960299520 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-18 16:42:06.753 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971067960299520 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-18 16:42:06.753 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971067960299520 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-18 16:42:06.754 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971067960299520 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-18 16:42:06.754 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m17971067960299520 [0;39m <==      Total: 15
2023-03-18 16:42:06.756 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971067960299520 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-18 16:42:06.756 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971067960299520 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š11 ms -------------
2023-03-18 16:42:06.770 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971068065157120 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:06.771 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971068065157120 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-18 16:42:06.771 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971068065157120 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-18 16:42:06.771 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971068065157120 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:06.771 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971068065157120 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-03-18 16:42:06.772 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971068065157120 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-03-18 16:42:06.772 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971068065157120 [0;39m ==> Parameters: 
2023-03-18 16:42:06.772 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m17971068065157120 [0;39m <==    Columns: count(0)
2023-03-18 16:42:06.772 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m17971068065157120 [0;39m <==        Row: 5
2023-03-18 16:42:06.774 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971068065157120 [0;39m <==      Total: 1
2023-03-18 16:42:06.774 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m17971068065157120 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-03-18 16:42:06.774 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m17971068065157120 [0;39m ==> Parameters: 10(Integer)
2023-03-18 16:42:06.775 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m17971068065157120 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-18 16:42:06.775 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m17971068065157120 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 9, 6
2023-03-18 16:42:06.775 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m17971068065157120 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, 100, 101, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-18 16:42:06.775 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m17971068065157120 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, 300, 301, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-18 16:42:06.776 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m17971068065157120 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, 400, 401, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-18 16:42:06.776 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m17971068065157120 [0;39m <==        Row: 5, Oracle å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-18 16:42:06.776 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m17971068065157120 [0;39m <==      Total: 5
2023-03-18 16:42:06.777 INFO  com.jiawa.wiki.service.EbookService               :48   [32m17971068065157120 [0;39m æ€»è¡Œæ•°ï¼š5
2023-03-18 16:42:06.777 INFO  com.jiawa.wiki.service.EbookService               :49   [32m17971068065157120 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-18 16:42:06.778 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971068065157120 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":9,"voteCount":6},{"category1Id":100,"category2Id":101,"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":300,"category2Id":301,"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":5,"name":"Oracle å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-03-18 16:42:06.778 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971068065157120 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-03-18 16:42:07.350 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971070497853440 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:07.351 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971070497853440 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-18 16:42:07.351 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971070497853440 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-18 16:42:07.351 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971070497853440 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:07.351 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971070497853440 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 16:42:07.352 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m17971070497853440 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-18 16:42:07.352 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m17971070497853440 [0;39m ==> Parameters: 
2023-03-18 16:42:07.353 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971070497853440 [0;39m <==    Columns: id, parent, name, sort
2023-03-18 16:42:07.353 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971070497853440 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-18 16:42:07.353 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971070497853440 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-18 16:42:07.353 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971070497853440 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-18 16:42:07.355 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971070497853440 [0;39m <==        Row: 200, 0, Java, 200
2023-03-18 16:42:07.355 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971070497853440 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-18 16:42:07.355 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971070497853440 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-18 16:42:07.356 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971070497853440 [0;39m <==        Row: 300, 0, Python, 300
2023-03-18 16:42:07.356 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971070497853440 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-18 16:42:07.356 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971070497853440 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-18 16:42:07.356 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971070497853440 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-18 16:42:07.357 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971070497853440 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-18 16:42:07.357 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971070497853440 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-18 16:42:07.357 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971070497853440 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-18 16:42:07.357 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971070497853440 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-18 16:42:07.357 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971070497853440 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-18 16:42:07.358 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m17971070497853440 [0;39m <==      Total: 15
2023-03-18 16:42:07.359 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971070497853440 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-18 16:42:07.359 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971070497853440 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2023-03-18 16:42:07.466 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:42:07.528 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:42:08.382 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m17971046309302272 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-18 16:42:08.383 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m17971046309302272 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/list
2023-03-18 16:42:08.383 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m17971046309302272 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š17971058317594624
2023-03-18 16:42:08.384 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m17971046309302272 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"17971058317594624"}
2023-03-18 16:42:08.385 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971074838958080 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:08.385 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971074838958080 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/user/list GET
2023-03-18 16:42:08.385 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971074838958080 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.UserController.list
2023-03-18 16:42:08.385 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971074838958080 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:08.385 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971074838958080 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-03-18 16:42:08.386 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m17971074838958080 [0;39m ==>  Preparing: SELECT count(0) FROM user
2023-03-18 16:42:08.387 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m17971074838958080 [0;39m ==> Parameters: 
2023-03-18 16:42:08.387 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m17971074838958080 [0;39m <==    Columns: count(0)
2023-03-18 16:42:08.387 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m17971074838958080 [0;39m <==        Row: 1
2023-03-18 16:42:08.387 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m17971074838958080 [0;39m <==      Total: 1
2023-03-18 16:42:08.389 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m17971074838958080 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2023-03-18 16:42:08.389 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m17971074838958080 [0;39m ==> Parameters: 10(Integer)
2023-03-18 16:42:08.390 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m17971074838958080 [0;39m <==    Columns: id, login_name, name, password
2023-03-18 16:42:08.390 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m17971074838958080 [0;39m <==        Row: 1, test, æµ‹è¯•, e70e2222a9d67c4f2eae107533359aa4
2023-03-18 16:42:08.390 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m17971074838958080 [0;39m <==      Total: 1
2023-03-18 16:42:08.390 INFO  com.jiawa.wiki.service.UserService                :49   [32m17971074838958080 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-18 16:42:08.390 INFO  com.jiawa.wiki.service.UserService                :50   [32m17971074838958080 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-18 16:42:08.391 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971074838958080 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"id":1,"loginName":"test","name":"æµ‹è¯•"}],"total":1},"success":true}
2023-03-18 16:42:08.391 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971074838958080 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-03-18 16:42:08.392 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m17971074838958080 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2023-03-18 16:42:09.007 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971077443620864 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:09.007 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971077447815168 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:09.007 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971077443620864 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-03-18 16:42:09.007 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971077447815168 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-18 16:42:09.007 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971077443620864 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-03-18 16:42:09.007 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971077443620864 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:09.007 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971077443620864 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 16:42:09.007 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971077447815168 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-18 16:42:09.008 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971077447815168 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:09.008 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971077447815168 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 16:42:09.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m17971077443620864 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-18 16:42:09.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m17971077443620864 [0;39m ==> Parameters: 
2023-03-18 16:42:09.008 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m17971077447815168 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-18 16:42:09.008 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m17971077447815168 [0;39m ==> Parameters: 
2023-03-18 16:42:09.009 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m17971077443620864 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-03-18 16:42:09.009 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971077447815168 [0;39m <==    Columns: id, parent, name, sort
2023-03-18 16:42:09.010 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m17971077443620864 [0;39m <==        Row: 2023-03-18, 9, 6, 9, 6
2023-03-18 16:42:09.010 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971077447815168 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-18 16:42:09.010 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971077447815168 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-18 16:42:09.010 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971077447815168 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-18 16:42:09.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m17971077443620864 [0;39m <==      Total: 1
2023-03-18 16:42:09.010 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971077447815168 [0;39m <==        Row: 200, 0, Java, 200
2023-03-18 16:42:09.011 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971077447815168 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-18 16:42:09.011 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971077447815168 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-18 16:42:09.011 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971077443620864 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1679068800000,"viewCount":9,"viewIncrease":9,"voteCount":6,"voteIncrease":6}],"success":true}
2023-03-18 16:42:09.011 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971077443620864 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-03-18 16:42:09.011 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971077447815168 [0;39m <==        Row: 300, 0, Python, 300
2023-03-18 16:42:09.012 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971077447815168 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-18 16:42:09.012 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971077447815168 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-18 16:42:09.012 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971077447815168 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-18 16:42:09.012 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971077447815168 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-18 16:42:09.013 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971077447815168 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-18 16:42:09.013 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971077447815168 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-18 16:42:09.013 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971077447815168 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-18 16:42:09.013 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971077447815168 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-18 16:42:09.014 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m17971077447815168 [0;39m <==      Total: 15
2023-03-18 16:42:09.016 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971077447815168 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-18 16:42:09.020 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971077447815168 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š13 ms -------------
2023-03-18 16:42:09.026 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971077527506944 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:09.026 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971077527506944 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-03-18 16:42:09.026 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971077527506944 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-03-18 16:42:09.026 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971077527506944 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:09.027 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971077527506944 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 16:42:09.027 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m17971077527506944 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-18 16:42:09.027 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m17971077527506944 [0;39m ==> Parameters: 
2023-03-18 16:42:09.028 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m17971077527506944 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-03-18 16:42:09.028 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m17971077527506944 [0;39m <==        Row: 2023-03-02, 0, 0
2023-03-18 16:42:09.028 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m17971077527506944 [0;39m <==        Row: 2023-03-05, 8, 5
2023-03-18 16:42:09.030 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m17971077527506944 [0;39m <==        Row: 2023-03-06, 1, 1
2023-03-18 16:42:09.030 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m17971077527506944 [0;39m <==      Total: 3
2023-03-18 16:42:09.030 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971077527506944 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1677945600000,"viewCount":0,"viewIncrease":8,"voteCount":0,"voteIncrease":5},{"date":1678032000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":1}],"success":true}
2023-03-18 16:42:09.031 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971077527506944 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-03-18 16:42:09.485 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:42:10.734 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m17971067960299520 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-18 16:42:10.734 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m17971067960299520 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/list
2023-03-18 16:42:10.735 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m17971067960299520 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š17971058317594624
2023-03-18 16:42:10.736 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m17971067960299520 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"17971058317594624"}
2023-03-18 16:42:10.737 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971084703961088 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:10.737 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971084703961088 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/user/list GET
2023-03-18 16:42:10.738 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971084703961088 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.UserController.list
2023-03-18 16:42:10.738 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971084703961088 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:10.738 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971084703961088 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-03-18 16:42:10.739 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m17971084703961088 [0;39m ==>  Preparing: SELECT count(0) FROM user
2023-03-18 16:42:10.740 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m17971084703961088 [0;39m ==> Parameters: 
2023-03-18 16:42:10.740 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m17971084703961088 [0;39m <==    Columns: count(0)
2023-03-18 16:42:10.740 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m17971084703961088 [0;39m <==        Row: 1
2023-03-18 16:42:10.741 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m17971084703961088 [0;39m <==      Total: 1
2023-03-18 16:42:10.741 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m17971084703961088 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2023-03-18 16:42:10.742 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m17971084703961088 [0;39m ==> Parameters: 10(Integer)
2023-03-18 16:42:10.742 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m17971084703961088 [0;39m <==    Columns: id, login_name, name, password
2023-03-18 16:42:10.742 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m17971084703961088 [0;39m <==        Row: 1, test, æµ‹è¯•, e70e2222a9d67c4f2eae107533359aa4
2023-03-18 16:42:10.743 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m17971084703961088 [0;39m <==      Total: 1
2023-03-18 16:42:10.743 INFO  com.jiawa.wiki.service.UserService                :49   [32m17971084703961088 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-18 16:42:10.743 INFO  com.jiawa.wiki.service.UserService                :50   [32m17971084703961088 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-18 16:42:10.743 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971084703961088 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"id":1,"loginName":"test","name":"æµ‹è¯•"}],"total":1},"success":true}
2023-03-18 16:42:10.744 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971084703961088 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-03-18 16:42:10.744 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m17971084703961088 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š10 ms -------------
2023-03-18 16:42:11.510 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:42:13.553 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:42:13.811 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971097597251584 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:13.812 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971097597251584 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-18 16:42:13.812 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971097597251584 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-18 16:42:13.812 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971097597251584 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:13.812 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971097597251584 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 16:42:13.813 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m17971097597251584 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-18 16:42:13.814 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m17971097597251584 [0;39m ==> Parameters: 
2023-03-18 16:42:13.814 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971097597251584 [0;39m <==    Columns: id, parent, name, sort
2023-03-18 16:42:13.814 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971097597251584 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-18 16:42:13.815 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971097597251584 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-18 16:42:13.815 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971097597251584 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-18 16:42:13.815 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971097597251584 [0;39m <==        Row: 200, 0, Java, 200
2023-03-18 16:42:13.816 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971097597251584 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-18 16:42:13.816 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971097597251584 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-18 16:42:13.816 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971097597251584 [0;39m <==        Row: 300, 0, Python, 300
2023-03-18 16:42:13.816 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971097597251584 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-18 16:42:13.817 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971097597251584 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-18 16:42:13.817 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971097597251584 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-18 16:42:13.817 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971097597251584 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-18 16:42:13.817 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971097597251584 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-18 16:42:13.817 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971097597251584 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-18 16:42:13.817 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971097597251584 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-18 16:42:13.819 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971097597251584 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-18 16:42:13.819 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m17971097597251584 [0;39m <==      Total: 15
2023-03-18 16:42:13.820 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971097597251584 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-18 16:42:13.820 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971097597251584 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2023-03-18 16:42:13.834 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971097693720576 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:13.834 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971097693720576 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-18 16:42:13.835 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971097693720576 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-18 16:42:13.835 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971097693720576 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:13.835 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971097693720576 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-03-18 16:42:13.836 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971097693720576 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-03-18 16:42:13.837 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971097693720576 [0;39m ==> Parameters: 
2023-03-18 16:42:13.837 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m17971097693720576 [0;39m <==    Columns: count(0)
2023-03-18 16:42:13.837 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m17971097693720576 [0;39m <==        Row: 5
2023-03-18 16:42:13.838 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971097693720576 [0;39m <==      Total: 1
2023-03-18 16:42:13.838 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m17971097693720576 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-03-18 16:42:13.838 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m17971097693720576 [0;39m ==> Parameters: 10(Integer)
2023-03-18 16:42:13.839 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m17971097693720576 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-18 16:42:13.840 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m17971097693720576 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 9, 6
2023-03-18 16:42:13.840 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m17971097693720576 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, 100, 101, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-18 16:42:13.840 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m17971097693720576 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, 300, 301, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-18 16:42:13.841 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m17971097693720576 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, 400, 401, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-18 16:42:13.841 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m17971097693720576 [0;39m <==        Row: 5, Oracle å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-18 16:42:13.841 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m17971097693720576 [0;39m <==      Total: 5
2023-03-18 16:42:13.842 INFO  com.jiawa.wiki.service.EbookService               :48   [32m17971097693720576 [0;39m æ€»è¡Œæ•°ï¼š5
2023-03-18 16:42:13.842 INFO  com.jiawa.wiki.service.EbookService               :49   [32m17971097693720576 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-18 16:42:13.842 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971097693720576 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":9,"voteCount":6},{"category1Id":100,"category2Id":101,"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":300,"category2Id":301,"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":5,"name":"Oracle å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-03-18 16:42:13.842 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971097693720576 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-03-18 16:42:15.267 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971103704158208 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:15.267 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971103704158208 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-18 16:42:15.268 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971103704158208 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-18 16:42:15.268 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971103704158208 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:15.268 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971103704158208 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 16:42:15.269 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m17971103704158208 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-18 16:42:15.269 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m17971103704158208 [0;39m ==> Parameters: 
2023-03-18 16:42:15.270 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971103704158208 [0;39m <==    Columns: id, parent, name, sort
2023-03-18 16:42:15.271 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971103704158208 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-18 16:42:15.271 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971103704158208 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-18 16:42:15.271 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971103704158208 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-18 16:42:15.271 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971103704158208 [0;39m <==        Row: 200, 0, Java, 200
2023-03-18 16:42:15.271 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971103704158208 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-18 16:42:15.272 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971103704158208 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-18 16:42:15.272 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971103704158208 [0;39m <==        Row: 300, 0, Python, 300
2023-03-18 16:42:15.272 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971103704158208 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-18 16:42:15.272 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971103704158208 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-18 16:42:15.272 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971103704158208 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-18 16:42:15.272 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971103704158208 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-18 16:42:15.273 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971103704158208 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-18 16:42:15.273 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971103704158208 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-18 16:42:15.273 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971103704158208 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-18 16:42:15.273 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971103704158208 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-18 16:42:15.273 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m17971103704158208 [0;39m <==      Total: 15
2023-03-18 16:42:15.274 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971103704158208 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-18 16:42:15.274 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971103704158208 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-03-18 16:42:18.867 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971118803652609 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:18.867 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971118803652608 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:18.867 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971118803652609 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-03-18 16:42:18.868 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971118803652609 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-03-18 16:42:18.868 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971118803652609 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:18.867 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971118803652608 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-03-18 16:42:18.868 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971118803652609 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 16:42:18.868 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971118803652608 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-03-18 16:42:18.868 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971118803652608 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:18.868 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971118803652608 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 16:42:18.868 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m17971118803652609 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-18 16:42:18.869 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m17971118803652609 [0;39m ==> Parameters: 
2023-03-18 16:42:18.869 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m17971118803652608 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-18 16:42:18.869 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m17971118803652608 [0;39m ==> Parameters: 
2023-03-18 16:42:18.870 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m17971118803652609 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-03-18 16:42:18.870 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m17971118803652608 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-03-18 16:42:18.870 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m17971118803652608 [0;39m <==        Row: 2023-03-18, 9, 6, 9, 6
2023-03-18 16:42:18.870 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m17971118803652609 [0;39m <==        Row: 2023-03-02, 0, 0
2023-03-18 16:42:18.871 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m17971118803652609 [0;39m <==        Row: 2023-03-05, 8, 5
2023-03-18 16:42:18.871 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m17971118803652608 [0;39m <==      Total: 1
2023-03-18 16:42:18.871 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m17971118803652609 [0;39m <==        Row: 2023-03-06, 1, 1
2023-03-18 16:42:18.871 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971118803652608 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1679068800000,"viewCount":9,"viewIncrease":9,"voteCount":6,"voteIncrease":6}],"success":true}
2023-03-18 16:42:18.871 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971118803652608 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-03-18 16:42:18.871 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m17971118803652609 [0;39m <==      Total: 3
2023-03-18 16:42:18.872 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971118803652609 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1677945600000,"viewCount":0,"viewIncrease":8,"voteCount":0,"voteIncrease":5},{"date":1678032000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":1}],"success":true}
2023-03-18 16:42:18.872 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971118803652609 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-03-18 16:42:18.874 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971118833012736 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:18.874 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971118833012736 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-18 16:42:18.874 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971118833012736 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-18 16:42:18.874 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971118833012736 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:18.875 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971118833012736 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 16:42:18.875 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m17971118833012736 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-18 16:42:18.876 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m17971118833012736 [0;39m ==> Parameters: 
2023-03-18 16:42:18.876 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971118833012736 [0;39m <==    Columns: id, parent, name, sort
2023-03-18 16:42:18.876 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971118833012736 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-18 16:42:18.877 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971118833012736 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-18 16:42:18.877 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971118833012736 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-18 16:42:18.877 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971118833012736 [0;39m <==        Row: 200, 0, Java, 200
2023-03-18 16:42:18.878 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971118833012736 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-18 16:42:18.878 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971118833012736 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-18 16:42:18.878 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971118833012736 [0;39m <==        Row: 300, 0, Python, 300
2023-03-18 16:42:18.878 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971118833012736 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-18 16:42:18.879 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971118833012736 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-18 16:42:18.879 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971118833012736 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-18 16:42:18.879 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971118833012736 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-18 16:42:18.879 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971118833012736 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-18 16:42:18.879 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971118833012736 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-18 16:42:18.880 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971118833012736 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-18 16:42:18.880 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971118833012736 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-18 16:42:18.880 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m17971118833012736 [0;39m <==      Total: 15
2023-03-18 16:42:18.881 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971118833012736 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-18 16:42:18.881 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971118833012736 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-03-18 16:42:21.934 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971131667582976 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:21.935 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971131667582976 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-18 16:42:21.935 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971131667582976 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-18 16:42:21.935 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971131667582976 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:21.935 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971131667582976 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":201,"page":1,"size":1000}]
2023-03-18 16:42:21.938 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971131667582976 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-18 16:42:21.939 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971131667582976 [0;39m ==> Parameters: 201(Long)
2023-03-18 16:42:21.939 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m17971131667582976 [0;39m <==    Columns: count(0)
2023-03-18 16:42:21.939 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m17971131667582976 [0;39m <==        Row: 0
2023-03-18 16:42:21.939 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971131667582976 [0;39m <==      Total: 1
2023-03-18 16:42:21.939 INFO  com.jiawa.wiki.service.EbookService               :48   [32m17971131667582976 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-18 16:42:21.940 INFO  com.jiawa.wiki.service.EbookService               :49   [32m17971131667582976 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-18 16:42:21.940 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971131667582976 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-18 16:42:21.940 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971131667582976 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-03-18 16:42:23.114 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971136616861696 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:23.115 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971136616861696 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-18 16:42:23.116 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971136616861696 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-18 16:42:23.116 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971136616861696 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:23.116 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971136616861696 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":101,"page":1,"size":1000}]
2023-03-18 16:42:23.122 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971136616861696 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-18 16:42:23.122 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971136616861696 [0;39m ==> Parameters: 101(Long)
2023-03-18 16:42:23.122 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m17971136616861696 [0;39m <==    Columns: count(0)
2023-03-18 16:42:23.123 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m17971136616861696 [0;39m <==        Row: 1
2023-03-18 16:42:23.123 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971136616861696 [0;39m <==      Total: 1
2023-03-18 16:42:23.123 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m17971136616861696 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-03-18 16:42:23.124 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m17971136616861696 [0;39m ==> Parameters: 101(Long), 1000(Integer)
2023-03-18 16:42:23.125 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m17971136616861696 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-18 16:42:23.125 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m17971136616861696 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, 100, 101, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-18 16:42:23.125 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m17971136616861696 [0;39m <==      Total: 1
2023-03-18 16:42:23.125 INFO  com.jiawa.wiki.service.EbookService               :48   [32m17971136616861696 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-18 16:42:23.126 INFO  com.jiawa.wiki.service.EbookService               :49   [32m17971136616861696 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-18 16:42:23.126 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971136616861696 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":100,"category2Id":101,"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":1},"success":true}
2023-03-18 16:42:23.126 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971136616861696 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š12 ms -------------
2023-03-18 16:42:24.430 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971142136565760 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:24.430 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971142136565760 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/2 GET
2023-03-18 16:42:24.431 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971142136565760 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-03-18 16:42:24.431 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971142136565760 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:24.431 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971142136565760 [0;39m è¯·æ±‚å‚æ•°: [2]
2023-03-18 16:42:24.437 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m17971142136565760 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-03-18 16:42:24.437 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m17971142136565760 [0;39m ==> Parameters: 2(Long)
2023-03-18 16:42:24.438 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m17971142136565760 [0;39m <==      Total: 0
2023-03-18 16:42:24.438 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971142136565760 [0;39m è¿”å›žç»“æžœ: {"content":[],"success":true}
2023-03-18 16:42:24.439 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971142136565760 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2023-03-18 16:42:25.595 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971147022929920 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:25.596 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971147022929920 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-03-18 16:42:25.596 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971147022929920 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-03-18 16:42:25.596 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971147022929920 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:25.596 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971147022929920 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 16:42:25.597 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m17971147022929920 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-18 16:42:25.597 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m17971147022929920 [0;39m ==> Parameters: 
2023-03-18 16:42:25.598 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m17971147022929920 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-03-18 16:42:25.598 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m17971147022929920 [0;39m <==        Row: 2023-03-18, 9, 6, 9, 6
2023-03-18 16:42:25.599 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m17971147022929920 [0;39m <==      Total: 1
2023-03-18 16:42:25.599 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971147039707136 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:25.599 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971147022929920 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1679068800000,"viewCount":9,"viewIncrease":9,"voteCount":6,"voteIncrease":6}],"success":true}
2023-03-18 16:42:25.599 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971147039707136 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-03-18 16:42:25.599 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971147022929920 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-03-18 16:42:25.600 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971147039707136 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-03-18 16:42:25.600 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971147039707136 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:25.600 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971147039707136 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 16:42:25.600 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971147043901440 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:25.600 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971147043901440 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-18 16:42:25.600 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m17971147039707136 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-18 16:42:25.600 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971147043901440 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-18 16:42:25.600 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m17971147039707136 [0;39m ==> Parameters: 
2023-03-18 16:42:25.601 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971147043901440 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:25.601 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971147043901440 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 16:42:25.601 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m17971147039707136 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-03-18 16:42:25.602 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m17971147039707136 [0;39m <==        Row: 2023-03-02, 0, 0
2023-03-18 16:42:25.602 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m17971147039707136 [0;39m <==        Row: 2023-03-05, 8, 5
2023-03-18 16:42:25.602 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m17971147039707136 [0;39m <==        Row: 2023-03-06, 1, 1
2023-03-18 16:42:25.603 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m17971147039707136 [0;39m <==      Total: 3
2023-03-18 16:42:25.603 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971147039707136 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1677945600000,"viewCount":0,"viewIncrease":8,"voteCount":0,"voteIncrease":5},{"date":1678032000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":1}],"success":true}
2023-03-18 16:42:25.603 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971147039707136 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-03-18 16:42:25.601 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m17971147043901440 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-18 16:42:25.604 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m17971147043901440 [0;39m ==> Parameters: 
2023-03-18 16:42:25.605 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971147043901440 [0;39m <==    Columns: id, parent, name, sort
2023-03-18 16:42:25.605 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971147043901440 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-18 16:42:25.605 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971147043901440 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-18 16:42:25.606 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971147043901440 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-18 16:42:25.606 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971147043901440 [0;39m <==        Row: 200, 0, Java, 200
2023-03-18 16:42:25.606 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971147043901440 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-18 16:42:25.606 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971147043901440 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-18 16:42:25.606 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971147043901440 [0;39m <==        Row: 300, 0, Python, 300
2023-03-18 16:42:25.607 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971147043901440 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-18 16:42:25.607 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971147043901440 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-18 16:42:25.607 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971147043901440 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-18 16:42:25.607 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971147043901440 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-18 16:42:25.607 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971147043901440 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-18 16:42:25.608 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971147043901440 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-18 16:42:25.608 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971147043901440 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-18 16:42:25.608 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971147043901440 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-18 16:42:25.608 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m17971147043901440 [0;39m <==      Total: 15
2023-03-18 16:42:25.610 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971147043901440 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-18 16:42:25.610 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971147043901440 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š10 ms -------------
2023-03-18 16:42:26.184 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971149493374976 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:26.184 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971149493374976 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-18 16:42:26.184 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971149493374976 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-18 16:42:26.185 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971149493374976 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:26.186 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971149493374976 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":102,"page":1,"size":1000}]
2023-03-18 16:42:26.188 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971149493374976 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-18 16:42:26.188 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971149493374976 [0;39m ==> Parameters: 102(Long)
2023-03-18 16:42:26.189 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m17971149493374976 [0;39m <==    Columns: count(0)
2023-03-18 16:42:26.189 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m17971149493374976 [0;39m <==        Row: 0
2023-03-18 16:42:26.189 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971149493374976 [0;39m <==      Total: 1
2023-03-18 16:42:26.189 INFO  com.jiawa.wiki.service.EbookService               :48   [32m17971149493374976 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-18 16:42:26.191 INFO  com.jiawa.wiki.service.EbookService               :49   [32m17971149493374976 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-18 16:42:26.191 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971149493374976 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-18 16:42:26.191 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971149493374976 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-03-18 16:42:27.096 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971153318580224 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:27.097 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971153318580224 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-18 16:42:27.097 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971153318580224 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-18 16:42:27.098 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971153318580224 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:27.098 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971153318580224 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":201,"page":1,"size":1000}]
2023-03-18 16:42:27.104 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971153318580224 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-18 16:42:27.105 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971153318580224 [0;39m ==> Parameters: 201(Long)
2023-03-18 16:42:27.105 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m17971153318580224 [0;39m <==    Columns: count(0)
2023-03-18 16:42:27.105 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m17971153318580224 [0;39m <==        Row: 0
2023-03-18 16:42:27.105 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971153318580224 [0;39m <==      Total: 1
2023-03-18 16:42:27.106 INFO  com.jiawa.wiki.service.EbookService               :48   [32m17971153318580224 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-18 16:42:27.106 INFO  com.jiawa.wiki.service.EbookService               :49   [32m17971153318580224 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-18 16:42:27.106 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971153318580224 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-18 16:42:27.106 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971153318580224 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š10 ms -------------
2023-03-18 16:42:27.778 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971156179095552 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:27.779 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971156179095552 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-18 16:42:27.779 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971156179095552 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-18 16:42:27.779 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971156179095552 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:27.779 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971156179095552 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":301,"page":1,"size":1000}]
2023-03-18 16:42:27.780 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971156179095552 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-18 16:42:27.780 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971156179095552 [0;39m ==> Parameters: 301(Long)
2023-03-18 16:42:27.781 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m17971156179095552 [0;39m <==    Columns: count(0)
2023-03-18 16:42:27.781 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m17971156179095552 [0;39m <==        Row: 1
2023-03-18 16:42:27.781 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971156179095552 [0;39m <==      Total: 1
2023-03-18 16:42:27.782 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m17971156179095552 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-03-18 16:42:27.782 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m17971156179095552 [0;39m ==> Parameters: 301(Long), 1000(Integer)
2023-03-18 16:42:27.783 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m17971156179095552 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-18 16:42:27.783 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m17971156179095552 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, 300, 301, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-18 16:42:27.783 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m17971156179095552 [0;39m <==      Total: 1
2023-03-18 16:42:27.784 INFO  com.jiawa.wiki.service.EbookService               :48   [32m17971156179095552 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-18 16:42:27.784 INFO  com.jiawa.wiki.service.EbookService               :49   [32m17971156179095552 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-18 16:42:27.784 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971156179095552 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":300,"category2Id":301,"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":1},"success":true}
2023-03-18 16:42:27.784 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971156179095552 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-03-18 16:42:29.454 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971163208749056 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:29.454 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971163208749056 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-18 16:42:29.455 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971163208749056 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-18 16:42:29.455 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971163208749056 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:29.455 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971163208749056 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":302,"page":1,"size":1000}]
2023-03-18 16:42:29.457 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971163208749056 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-18 16:42:29.458 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971163208749056 [0;39m ==> Parameters: 302(Long)
2023-03-18 16:42:29.458 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m17971163208749056 [0;39m <==    Columns: count(0)
2023-03-18 16:42:29.459 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m17971163208749056 [0;39m <==        Row: 0
2023-03-18 16:42:29.459 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971163208749056 [0;39m <==      Total: 1
2023-03-18 16:42:29.459 INFO  com.jiawa.wiki.service.EbookService               :48   [32m17971163208749056 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-18 16:42:29.460 INFO  com.jiawa.wiki.service.EbookService               :49   [32m17971163208749056 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-18 16:42:29.460 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971163208749056 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-18 16:42:29.460 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971163208749056 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-03-18 16:42:29.526 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:42:29.834 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971164802584576 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:29.834 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971164802584576 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-18 16:42:29.834 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971164802584576 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-18 16:42:29.834 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971164802584576 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:29.835 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971164802584576 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":202,"page":1,"size":1000}]
2023-03-18 16:42:29.836 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971164802584576 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-18 16:42:29.838 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971164802584576 [0;39m ==> Parameters: 202(Long)
2023-03-18 16:42:29.839 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m17971164802584576 [0;39m <==    Columns: count(0)
2023-03-18 16:42:29.839 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m17971164802584576 [0;39m <==        Row: 1
2023-03-18 16:42:29.839 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m17971164802584576 [0;39m <==      Total: 1
2023-03-18 16:42:29.839 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m17971164802584576 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-03-18 16:42:29.840 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m17971164802584576 [0;39m ==> Parameters: 202(Long), 1000(Integer)
2023-03-18 16:42:29.840 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m17971164802584576 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-18 16:42:29.840 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m17971164802584576 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 9, 6
2023-03-18 16:42:29.841 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m17971164802584576 [0;39m <==      Total: 1
2023-03-18 16:42:29.841 INFO  com.jiawa.wiki.service.EbookService               :48   [32m17971164802584576 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-18 16:42:29.841 INFO  com.jiawa.wiki.service.EbookService               :49   [32m17971164802584576 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-18 16:42:29.841 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971164802584576 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":9,"voteCount":6}],"total":1},"success":true}
2023-03-18 16:42:29.842 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971164802584576 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-03-18 16:42:31.571 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:42:31.572 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971172092284928 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:31.572 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971172092284928 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/all/1 GET
2023-03-18 16:42:31.573 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971172092284928 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.all
2023-03-18 16:42:31.573 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971172092284928 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:31.573 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971172092284928 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-03-18 16:42:31.574 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m17971172092284928 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2023-03-18 16:42:31.574 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m17971172092284928 [0;39m ==> Parameters: 1(Long)
2023-03-18 16:42:31.575 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m17971172092284928 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-03-18 16:42:31.575 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m17971172092284928 [0;39m <==        Row: 1, 1, 0, æ–‡æ¡£1, 1, 4, 2
2023-03-18 16:42:31.575 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m17971172092284928 [0;39m <==        Row: 2, 1, 1, æ–‡æ¡£1.1, 1, 1, 1
2023-03-18 16:42:31.575 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m17971172092284928 [0;39m <==        Row: 4, 1, 3, æ–‡æ¡£2.1, 1, 2, 1
2023-03-18 16:42:31.575 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m17971172092284928 [0;39m <==        Row: 6, 1, 5, æ–‡æ¡£2.2.1, 1, 1, 1
2023-03-18 16:42:31.575 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m17971172092284928 [0;39m <==        Row: 3, 1, 0, æ–‡æ¡£2, 2, 0, 0
2023-03-18 16:42:31.575 TRACE com.jiawa.wiki.mapper.DocMapper.selectByExample   :143  [32m17971172092284928 [0;39m <==        Row: 5, 1, 3, æ–‡æ¡£2.2, 2, 1, 1
2023-03-18 16:42:31.576 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByExample   :137  [32m17971172092284928 [0;39m <==      Total: 6
2023-03-18 16:42:31.581 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971172092284928 [0;39m è¿”å›žç»“æžœ: {"content":[{"ebookId":1,"id":1,"name":"æ–‡æ¡£1","parent":0,"sort":1,"viewCount":4,"voteCount":2},{"ebookId":1,"id":2,"name":"æ–‡æ¡£1.1","parent":1,"sort":1,"viewCount":1,"voteCount":1},{"ebookId":1,"id":4,"name":"æ–‡æ¡£2.1","parent":3,"sort":1,"viewCount":2,"voteCount":1},{"ebookId":1,"id":6,"name":"æ–‡æ¡£2.2.1","parent":5,"sort":1,"viewCount":1,"voteCount":1},{"ebookId":1,"id":3,"name":"æ–‡æ¡£2","parent":0,"sort":2,"viewCount":0,"voteCount":0},{"ebookId":1,"id":5,"name":"æ–‡æ¡£2.2","parent":3,"sort":2,"viewCount":1,"voteCount":1}],"success":true}
2023-03-18 16:42:31.581 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971172092284928 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2023-03-18 16:42:31.594 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971172184559616 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:31.594 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971172184559616 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/find-content/1 GET
2023-03-18 16:42:31.594 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971172184559616 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.findContent
2023-03-18 16:42:31.594 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971172184559616 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:31.594 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971172184559616 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-03-18 16:42:31.595 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m17971172184559616 [0;39m ==>  Preparing: select id , content from content where id = ?
2023-03-18 16:42:31.595 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m17971172184559616 [0;39m ==> Parameters: 1(Long)
2023-03-18 16:42:31.603 DEBUG c.j.wiki.mapper.ContentMapper.selectByPrimaryKey  :137  [32m17971172184559616 [0;39m <==      Total: 0
2023-03-18 16:42:31.604 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m17971172184559616 [0;39m ==>  Preparing: update doc set view_count = view_count + 1 where id = ?
2023-03-18 16:42:31.604 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m17971172184559616 [0;39m ==> Parameters: 1(Long)
2023-03-18 16:42:31.605 DEBUG c.j.wiki.mapper.DocMapperCust.increaseViewCount   :137  [32m17971172184559616 [0;39m <==    Updates: 1
2023-03-18 16:42:31.605 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971172184559616 [0;39m è¿”å›žç»“æžœ: {"content":"","success":true}
2023-03-18 16:42:31.607 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971172184559616 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š13 ms -------------
2023-03-18 16:42:32.697 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971176810876928 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:42:32.698 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971176810876928 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/doc/vote/1 GET
2023-03-18 16:42:32.698 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971176810876928 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.DocController.vote
2023-03-18 16:42:32.698 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971176810876928 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:42:32.698 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971176810876928 [0;39m è¯·æ±‚å‚æ•°: [1]
2023-03-18 16:42:32.701 INFO  com.jiawa.wiki.util.RedisUtil                     :31   [32m17971176810876928 [0;39m keyä¸å­˜åœ¨ï¼Œæ”¾å…¥ï¼šDOC_VOTE_1_127.0.0.1ï¼Œè¿‡æœŸ 5000 ç§’
2023-03-18 16:42:32.704 DEBUG c.j.wiki.mapper.DocMapperCust.increaseVoteCount   :137  [32m17971176810876928 [0;39m ==>  Preparing: update doc set vote_count = vote_count + 1 where id = ?
2023-03-18 16:42:32.705 DEBUG c.j.wiki.mapper.DocMapperCust.increaseVoteCount   :137  [32m17971176810876928 [0;39m ==> Parameters: 1(Long)
2023-03-18 16:42:32.706 DEBUG c.j.wiki.mapper.DocMapperCust.increaseVoteCount   :137  [32m17971176810876928 [0;39m <==    Updates: 1
2023-03-18 16:42:32.706 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:137  [32m17971176810876928 [0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2023-03-18 16:42:32.706 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:137  [32m17971176810876928 [0;39m ==> Parameters: 1(Long)
2023-03-18 16:42:32.707 TRACE com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:143  [32m17971176810876928 [0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2023-03-18 16:42:32.708 TRACE com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:143  [32m17971176810876928 [0;39m <==        Row: 1, 1, 0, æ–‡æ¡£1, 1, 5, 3
2023-03-18 16:42:32.708 DEBUG com.jiawa.wiki.mapper.DocMapper.selectByPrimaryKey:137  [32m17971176810876928 [0;39m <==      Total: 1
2023-03-18 16:42:34.745 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:42:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17971186482941952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:42:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17971186482941952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:42:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17971186482941952 [0;39m ==> Parameters: 
2023-03-18 16:42:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17971186482941952 [0;39m <==    Updates: 1
2023-03-18 16:42:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17971186482941952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 16:42:36.792 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:42:36.792 ERROR org.apache.rocketmq.spring.core.RocketMQTemplate  :153  [32m17971176810876928 [0;39m syncSend failed. destination:VOTE_TOPIC, message:GenericMessage [payload=ã€æ–‡æ¡£1ã€‘è¢«ç‚¹èµžï¼, headers={contentType=text/plain, id=9479a302-4097-eaab-0cd7-14e5c459f1a3, timestamp=1679128952712}] 
2023-03-18 16:42:36.807 ERROR com.jiawa.wiki.config.ControllerExceptionHandler  :59   [32m17971176810876928 [0;39m ç³»ç»Ÿå¼‚å¸¸ï¼š
org.springframework.messaging.MessagingException: No route info of this topic, VOTE_TOPIC
See http://rocketmq.apache.org/docs/faq/ for further details.; nested exception is org.apache.rocketmq.client.exception.MQClientException: No route info of this topic, VOTE_TOPIC
See http://rocketmq.apache.org/docs/faq/ for further details.
	at org.apache.rocketmq.spring.core.RocketMQTemplate.syncSend(RocketMQTemplate.java:154)
	at org.apache.rocketmq.spring.core.RocketMQTemplate.syncSend(RocketMQTemplate.java:123)
	at org.apache.rocketmq.spring.core.RocketMQTemplate.syncSend(RocketMQTemplate.java:111)
	at org.apache.rocketmq.spring.core.RocketMQTemplate.doSend(RocketMQTemplate.java:459)
	at org.apache.rocketmq.spring.core.RocketMQTemplate.doSend(RocketMQTemplate.java:50)
	at org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:109)
	at org.springframework.messaging.core.AbstractMessageSendingTemplate.convertAndSend(AbstractMessageSendingTemplate.java:151)
	at org.springframework.messaging.core.AbstractMessageSendingTemplate.convertAndSend(AbstractMessageSendingTemplate.java:129)
	at org.springframework.messaging.core.AbstractMessageSendingTemplate.convertAndSend(AbstractMessageSendingTemplate.java:122)
	at com.jiawa.wiki.service.DocService.vote(DocService.java:167)
	at com.jiawa.wiki.service.DocService$$FastClassBySpringCGLIB$$50aa4805.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:687)
	at com.jiawa.wiki.service.DocService$$EnhancerBySpringCGLIB$$7519e4ec.vote(<generated>)
	at com.jiawa.wiki.controller.DocController.vote(DocController.java:65)
	at com.jiawa.wiki.controller.DocController$$FastClassBySpringCGLIB$$36fc4971.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:771)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)
	at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:58)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)
	at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)
	at com.jiawa.wiki.aspect.LogAspect.doAround(LogAspect.java:86)
	at sun.reflect.GeneratedMethodAccessor103.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
	at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
	at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:749)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:691)
	at com.jiawa.wiki.controller.DocController$$EnhancerBySpringCGLIB$$9acb0879.vote(<generated>)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:197)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:141)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:893)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:807)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1061)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:961)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:626)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:733)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: org.apache.rocketmq.client.exception.MQClientException: No route info of this topic, VOTE_TOPIC
See http://rocketmq.apache.org/docs/faq/ for further details.
	at org.apache.rocketmq.client.impl.producer.DefaultMQProducerImpl.sendDefaultImpl(DefaultMQProducerImpl.java:656)
	at org.apache.rocketmq.client.impl.producer.DefaultMQProducerImpl.send(DefaultMQProducerImpl.java:1279)
	at org.apache.rocketmq.client.producer.DefaultMQProducer.send(DefaultMQProducer.java:301)
	at org.apache.rocketmq.spring.core.RocketMQTemplate.syncSend(RocketMQTemplate.java:148)
	... 87 common frames omitted
2023-03-18 16:42:36.815 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m17971176810876928 [0;39m Resolved [org.springframework.messaging.MessagingException: No route info of this topic, VOTE_TOPIC
See http://rocketmq.apache.org/docs/faq/ for further details.; nested exception is org.apache.rocketmq.client.exception.MQClientException: No route info of this topic, VOTE_TOPIC
See http://rocketmq.apache.org/docs/faq/ for further details.]
2023-03-18 16:42:37.514 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:42:40.872 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:42:42.925 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:42:53.606 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:42:55.642 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:43:00.076 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17971291646726144 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 16:43:00.079 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17971291646726144 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 16:43:00.080 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17971291646726144 [0;39m ==> Parameters: 
2023-03-18 16:43:00.083 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17971291646726144 [0;39m <==    Updates: 0
2023-03-18 16:43:00.084 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17971291646726144 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 16:43:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17971312328839168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:43:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17971312328839168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:43:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17971312328839168 [0;39m ==> Parameters: 
2023-03-18 16:43:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17971312328839168 [0;39m <==    Updates: 1
2023-03-18 16:43:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17971312328839168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-18 16:43:06.993 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:43:07.520 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:43:11.087 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:43:17.672 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:43:19.707 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:43:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17971438174736384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:43:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17971438174736384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:43:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17971438174736384 [0;39m ==> Parameters: 
2023-03-18 16:43:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17971438174736384 [0;39m <==    Updates: 1
2023-03-18 16:43:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17971438174736384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 16:43:36.198 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971443153375232 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:43:36.198 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971443153375232 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-03-18 16:43:36.199 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971443153375232 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-03-18 16:43:36.199 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971443157569536 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:43:36.199 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971443153375232 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:43:36.199 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971443157569536 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-03-18 16:43:36.199 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971443157569536 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-03-18 16:43:36.199 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971443153375232 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 16:43:36.199 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971443157569536 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:43:36.199 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971443157569536 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 16:43:36.199 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m17971443153375232 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-18 16:43:36.200 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m17971443153375232 [0;39m ==> Parameters: 
2023-03-18 16:43:36.200 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m17971443157569536 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-18 16:43:36.200 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m17971443157569536 [0;39m ==> Parameters: 
2023-03-18 16:43:36.201 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m17971443153375232 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-03-18 16:43:36.201 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m17971443153375232 [0;39m <==        Row: 2023-03-18, 10, 7, 10, 7
2023-03-18 16:43:36.201 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m17971443157569536 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-03-18 16:43:36.202 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m17971443157569536 [0;39m <==        Row: 2023-03-02, 0, 0
2023-03-18 16:43:36.202 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m17971443153375232 [0;39m <==      Total: 1
2023-03-18 16:43:36.202 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m17971443157569536 [0;39m <==        Row: 2023-03-05, 8, 5
2023-03-18 16:43:36.202 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971443153375232 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1679068800000,"viewCount":10,"viewIncrease":10,"voteCount":7,"voteIncrease":7}],"success":true}
2023-03-18 16:43:36.203 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971443153375232 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-03-18 16:43:36.203 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m17971443157569536 [0;39m <==        Row: 2023-03-06, 1, 1
2023-03-18 16:43:36.203 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m17971443157569536 [0;39m <==      Total: 3
2023-03-18 16:43:36.204 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971443157569536 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1677945600000,"viewCount":0,"viewIncrease":8,"voteCount":0,"voteIncrease":5},{"date":1678032000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":1}],"success":true}
2023-03-18 16:43:36.204 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971443157569536 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š5 ms -------------
2023-03-18 16:43:36.205 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m17971443182735360 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 16:43:36.205 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m17971443182735360 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-18 16:43:36.206 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m17971443182735360 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-18 16:43:36.206 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m17971443182735360 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 16:43:36.206 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m17971443182735360 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 16:43:36.206 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m17971443182735360 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-18 16:43:36.207 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m17971443182735360 [0;39m ==> Parameters: 
2023-03-18 16:43:36.207 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971443182735360 [0;39m <==    Columns: id, parent, name, sort
2023-03-18 16:43:36.207 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971443182735360 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-18 16:43:36.208 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971443182735360 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-18 16:43:36.208 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971443182735360 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-18 16:43:36.208 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971443182735360 [0;39m <==        Row: 200, 0, Java, 200
2023-03-18 16:43:36.208 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971443182735360 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-18 16:43:36.208 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971443182735360 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-18 16:43:36.209 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971443182735360 [0;39m <==        Row: 300, 0, Python, 300
2023-03-18 16:43:36.209 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971443182735360 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-18 16:43:36.209 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971443182735360 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-18 16:43:36.209 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971443182735360 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-18 16:43:36.209 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971443182735360 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-18 16:43:36.209 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971443182735360 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-18 16:43:36.210 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971443182735360 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-18 16:43:36.210 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971443182735360 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-18 16:43:36.210 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m17971443182735360 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-18 16:43:36.210 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m17971443182735360 [0;39m <==      Total: 15
2023-03-18 16:43:36.211 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m17971443182735360 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-18 16:43:36.211 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m17971443182735360 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-03-18 16:43:37.498 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:43:41.049 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:43:43.081 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:43:45.105 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:44:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17971543028142080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 16:44:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17971543028142080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 16:44:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17971543028142080 [0;39m ==> Parameters: 
2023-03-18 16:44:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17971543028142080 [0;39m <==    Updates: 0
2023-03-18 16:44:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17971543028142080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-18 16:44:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17971563978690560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:44:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17971563978690560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:44:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17971563978690560 [0;39m ==> Parameters: 
2023-03-18 16:44:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17971563978690560 [0;39m <==    Updates: 1
2023-03-18 16:44:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17971563978690560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 16:44:06.964 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:44:07.512 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:44:08.989 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:44:11.002 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:44:13.024 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:44:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17971689799421952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:44:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17971689799421952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:44:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17971689799421952 [0;39m ==> Parameters: 
2023-03-18 16:44:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17971689799421952 [0;39m <==    Updates: 1
2023-03-18 16:44:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17971689799421952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 16:44:35.083 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:44:37.102 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:44:37.510 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:44:43.228 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:44:59.148 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:45:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17971794677993472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 16:45:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17971794677993472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 16:45:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17971794677993472 [0;39m ==> Parameters: 
2023-03-18 16:45:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17971794677993472 [0;39m <==    Updates: 0
2023-03-18 16:45:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17971794677993472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 16:45:01.197 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:45:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17971815657902080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:45:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17971815657902080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:45:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17971815657902080 [0;39m ==> Parameters: 
2023-03-18 16:45:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17971815657902080 [0;39m <==    Updates: 1
2023-03-18 16:45:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17971815657902080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 16:45:06.979 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:45:07.522 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:45:09.009 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:45:11.041 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:45:23.226 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:45:25.259 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:45:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17971941470244864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:45:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17971941470244864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:45:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17971941470244864 [0;39m ==> Parameters: 
2023-03-18 16:45:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17971941470244864 [0;39m <==    Updates: 1
2023-03-18 16:45:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17971941470244864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 16:45:37.508 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:45:39.024 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:45:41.042 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:45:49.336 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:46:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17972046336233472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 16:46:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17972046336233472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 16:46:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17972046336233472 [0;39m ==> Parameters: 
2023-03-18 16:46:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17972046336233472 [0;39m <==    Updates: 0
2023-03-18 16:46:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17972046336233472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-18 16:46:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17972067303559168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:46:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17972067303559168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:46:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17972067303559168 [0;39m ==> Parameters: 
2023-03-18 16:46:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17972067303559168 [0;39m <==    Updates: 1
2023-03-18 16:46:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17972067303559168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 16:46:06.993 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:46:07.522 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:46:09.023 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:46:11.053 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:46:13.086 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:46:15.133 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:46:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17972193128484864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:46:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17972193128484864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:46:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17972193128484864 [0;39m ==> Parameters: 
2023-03-18 16:46:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17972193128484864 [0;39m <==    Updates: 1
2023-03-18 16:46:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17972193128484864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 16:46:36.976 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:46:37.511 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:46:39.008 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:46:41.067 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:46:43.102 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:47:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17972297986084864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 16:47:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17972297986084864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 16:47:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17972297986084864 [0;39m ==> Parameters: 
2023-03-18 16:47:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17972297986084864 [0;39m <==    Updates: 0
2023-03-18 16:47:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17972297986084864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 16:47:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17972318974382080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:47:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17972318974382080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:47:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17972318974382080 [0;39m ==> Parameters: 
2023-03-18 16:47:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17972318974382080 [0;39m <==    Updates: 1
2023-03-18 16:47:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17972318974382080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 16:47:05.121 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:47:07.165 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:47:07.524 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:47:09.195 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:47:11.227 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:47:13.259 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:47:29.210 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:47:31.257 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:47:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17972444769947648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:47:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17972444769947648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:47:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17972444769947648 [0;39m ==> Parameters: 
2023-03-18 16:47:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17972444769947648 [0;39m <==    Updates: 1
2023-03-18 16:47:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17972444769947648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 16:47:36.976 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:47:37.494 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:47:41.051 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:47:53.290 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:47:55.324 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:48:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17972549652713472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 16:48:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17972549652713472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 16:48:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17972549652713472 [0;39m ==> Parameters: 
2023-03-18 16:48:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17972549652713472 [0;39m <==    Updates: 0
2023-03-18 16:48:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17972549652713472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 16:48:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17972570649399296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:48:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17972570649399296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:48:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17972570649399296 [0;39m ==> Parameters: 
2023-03-18 16:48:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17972570649399296 [0;39m <==    Updates: 1
2023-03-18 16:48:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17972570649399296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 16:48:06.977 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:48:07.538 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:48:11.041 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:48:17.382 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:48:19.412 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:48:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17972696457547776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:48:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17972696457547776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:48:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17972696457547776 [0;39m ==> Parameters: 
2023-03-18 16:48:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17972696457547776 [0;39m <==    Updates: 1
2023-03-18 16:48:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17972696457547776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 16:48:36.992 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:48:37.535 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:48:39.022 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:48:41.042 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:48:43.088 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:48:45.134 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:49:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17972801298370560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 16:49:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17972801298370560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 16:49:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17972801298370560 [0;39m ==> Parameters: 
2023-03-18 16:49:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17972801298370560 [0;39m <==    Updates: 0
2023-03-18 16:49:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17972801298370560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 16:49:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17972822278279168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:49:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17972822278279168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:49:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17972822278279168 [0;39m ==> Parameters: 
2023-03-18 16:49:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17972822278279168 [0;39m <==    Updates: 1
2023-03-18 16:49:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17972822278279168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 16:49:07.006 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:49:07.524 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:49:09.055 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:49:11.088 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:49:13.118 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:49:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17972948107399168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:49:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17972948107399168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:49:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17972948107399168 [0;39m ==> Parameters: 
2023-03-18 16:49:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17972948107399168 [0;39m <==    Updates: 1
2023-03-18 16:49:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17972948107399168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 16:49:35.164 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:49:37.224 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:49:37.508 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:49:39.273 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:49:41.304 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:49:43.349 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:49:59.269 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:50:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17973052981776384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 16:50:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17973052981776384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 16:50:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17973052981776384 [0;39m ==> Parameters: 
2023-03-18 16:50:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17973052981776384 [0;39m <==    Updates: 0
2023-03-18 16:50:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17973052981776384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 16:50:01.293 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:50:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17973073936519168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:50:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17973073936519168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:50:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17973073936519168 [0;39m ==> Parameters: 
2023-03-18 16:50:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17973073936519168 [0;39m <==    Updates: 1
2023-03-18 16:50:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17973073936519168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 16:50:06.978 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:50:07.507 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:50:09.023 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:50:11.055 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:50:23.322 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:50:25.354 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:50:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17973199774027776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:50:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17973199774027776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:50:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17973199774027776 [0;39m ==> Parameters: 
2023-03-18 16:50:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17973199774027776 [0;39m <==    Updates: 1
2023-03-18 16:50:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17973199774027776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 16:50:36.977 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:50:37.508 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:50:41.037 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:50:47.399 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:50:49.457 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:51:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17973304640016384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 16:51:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17973304640016384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 16:51:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17973304640016384 [0;39m ==> Parameters: 
2023-03-18 16:51:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17973304640016384 [0;39m <==    Updates: 0
2023-03-18 16:51:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17973304640016384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 16:51:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17973325586370560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:51:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17973325586370560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:51:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17973325586370560 [0;39m ==> Parameters: 
2023-03-18 16:51:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17973325586370560 [0;39m <==    Updates: 1
2023-03-18 16:51:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17973325586370560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 16:51:06.979 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:51:07.524 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:51:09.024 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:51:11.060 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:51:15.118 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:51:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17973451444850688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:51:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17973451444850688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:51:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17973451444850688 [0;39m ==> Parameters: 
2023-03-18 16:51:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17973451444850688 [0;39m <==    Updates: 1
2023-03-18 16:51:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17973451444850688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 16:51:36.977 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:51:37.506 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:51:39.011 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:51:41.056 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:51:43.085 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:52:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17973556289867776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 16:52:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17973556289867776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 16:52:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17973556289867776 [0;39m ==> Parameters: 
2023-03-18 16:52:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17973556289867776 [0;39m <==    Updates: 0
2023-03-18 16:52:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17973556289867776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 16:52:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17973577269776384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:52:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17973577269776384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:52:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17973577269776384 [0;39m ==> Parameters: 
2023-03-18 16:52:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17973577269776384 [0;39m <==    Updates: 1
2023-03-18 16:52:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17973577269776384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 16:52:05.118 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:52:07.164 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:52:07.524 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:52:09.211 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:52:11.274 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:52:13.318 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:52:29.211 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:52:31.258 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:52:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17973703090507776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:52:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17973703090507776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:52:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17973703090507776 [0;39m ==> Parameters: 
2023-03-18 16:52:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17973703090507776 [0;39m <==    Updates: 1
2023-03-18 16:52:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17973703090507776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 16:52:36.996 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:52:37.508 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:52:39.038 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:52:41.069 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:52:53.317 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:52:55.338 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:53:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17973807948107776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 16:53:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17973807948107776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 16:53:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17973807948107776 [0;39m ==> Parameters: 
2023-03-18 16:53:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17973807948107776 [0;39m <==    Updates: 0
2023-03-18 16:53:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17973807948107776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-18 16:53:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17973828907044864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:53:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17973828907044864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:53:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17973828907044864 [0;39m ==> Parameters: 
2023-03-18 16:53:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17973828907044864 [0;39m <==    Updates: 1
2023-03-18 16:53:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17973828907044864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 16:53:06.977 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:53:07.494 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:53:09.024 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:53:11.073 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:53:17.398 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:53:19.429 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:53:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17973954748747776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:53:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17973954748747776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:53:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17973954748747776 [0;39m ==> Parameters: 
2023-03-18 16:53:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17973954748747776 [0;39m <==    Updates: 1
2023-03-18 16:53:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17973954748747776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 16:53:37.007 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:53:37.520 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:53:39.038 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:53:41.056 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:53:43.088 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:53:45.120 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:54:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17974059618930688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 16:54:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17974059618930688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 16:54:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17974059618930688 [0;39m ==> Parameters: 
2023-03-18 16:54:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17974059618930688 [0;39m <==    Updates: 0
2023-03-18 16:54:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17974059618930688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 16:54:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17974080603033600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:54:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17974080603033600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:54:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17974080603033600 [0;39m ==> Parameters: 
2023-03-18 16:54:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17974080603033600 [0;39m <==    Updates: 1
2023-03-18 16:54:05.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17974080603033600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 16:54:06.979 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:54:07.540 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:54:11.033 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:54:13.050 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:54:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17974206377627648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:54:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17974206377627648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:54:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17974206377627648 [0;39m ==> Parameters: 
2023-03-18 16:54:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17974206377627648 [0;39m <==    Updates: 1
2023-03-18 16:54:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17974206377627648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 16:54:35.080 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:54:37.113 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:54:37.504 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:54:39.148 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:54:43.228 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:54:59.140 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:55:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17974311239421952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 16:55:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17974311239421952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 16:55:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17974311239421952 [0;39m ==> Parameters: 
2023-03-18 16:55:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17974311239421952 [0;39m <==    Updates: 0
2023-03-18 16:55:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17974311239421952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 16:55:01.163 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:55:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17974332236107776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:55:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17974332236107776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:55:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17974332236107776 [0;39m ==> Parameters: 
2023-03-18 16:55:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17974332236107776 [0;39m <==    Updates: 1
2023-03-18 16:55:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17974332236107776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 16:55:07.523 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:55:11.030 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:55:23.198 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:55:25.231 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:55:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17974458056839168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:55:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17974458056839168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:55:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17974458056839168 [0;39m ==> Parameters: 
2023-03-18 16:55:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17974458056839168 [0;39m <==    Updates: 1
2023-03-18 16:55:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17974458056839168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 16:55:37.006 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:55:37.508 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:55:41.086 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:55:47.290 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:55:49.320 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:56:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17974562922827776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 16:56:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17974562922827776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 16:56:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17974562922827776 [0;39m ==> Parameters: 
2023-03-18 16:56:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17974562922827776 [0;39m <==    Updates: 0
2023-03-18 16:56:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17974562922827776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 16:56:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17974583898542080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:56:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17974583898542080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:56:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17974583898542080 [0;39m ==> Parameters: 
2023-03-18 16:56:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17974583898542080 [0;39m <==    Updates: 1
2023-03-18 16:56:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17974583898542080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 16:56:06.976 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:56:07.523 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:56:09.008 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:56:11.041 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:56:13.070 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:56:15.117 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:56:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17974709719273472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:56:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17974709719273472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:56:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17974709719273472 [0;39m ==> Parameters: 
2023-03-18 16:56:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17974709719273472 [0;39m <==    Updates: 1
2023-03-18 16:56:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17974709719273472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 16:56:36.978 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:56:37.506 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:56:39.006 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:56:41.040 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:56:43.072 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:57:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17974814581067776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 16:57:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17974814581067776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 16:57:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17974814581067776 [0;39m ==> Parameters: 
2023-03-18 16:57:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17974814581067776 [0;39m <==    Updates: 0
2023-03-18 16:57:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17974814581067776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 16:57:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17974835544199168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:57:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17974835544199168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:57:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17974835544199168 [0;39m ==> Parameters: 
2023-03-18 16:57:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17974835544199168 [0;39m <==    Updates: 1
2023-03-18 16:57:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17974835544199168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 16:57:05.116 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:57:07.150 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:57:07.510 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:57:09.179 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:57:11.211 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:57:13.242 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:57:29.180 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:57:31.228 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:57:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17974961381707776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:57:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17974961381707776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:57:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17974961381707776 [0;39m ==> Parameters: 
2023-03-18 16:57:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17974961381707776 [0;39m <==    Updates: 1
2023-03-18 16:57:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17974961381707776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 16:57:37.010 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:57:37.510 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:57:39.056 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:57:41.102 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:57:53.248 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:57:55.278 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:58:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17975066247696384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 16:58:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17975066247696384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 16:58:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17975066247696384 [0;39m ==> Parameters: 
2023-03-18 16:58:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17975066247696384 [0;39m <==    Updates: 0
2023-03-18 16:58:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17975066247696384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 16:58:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17975087206633472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:58:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17975087206633472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:58:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17975087206633472 [0;39m ==> Parameters: 
2023-03-18 16:58:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17975087206633472 [0;39m <==    Updates: 1
2023-03-18 16:58:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17975087206633472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 16:58:06.964 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:58:07.498 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:58:11.057 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:58:17.322 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:58:19.357 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:58:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17975213039947776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:58:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17975213039947776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:58:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17975213039947776 [0;39m ==> Parameters: 
2023-03-18 16:58:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17975213039947776 [0;39m <==    Updates: 1
2023-03-18 16:58:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17975213039947776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 16:58:36.980 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:58:37.508 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:58:39.009 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:58:41.069 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:58:43.118 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:58:45.151 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:59:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17975317893353472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 16:59:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17975317893353472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 16:59:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17975317893353472 [0;39m ==> Parameters: 
2023-03-18 16:59:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17975317893353472 [0;39m <==    Updates: 0
2023-03-18 16:59:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17975317893353472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 16:59:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17975338869067776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:59:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17975338869067776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:59:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17975338869067776 [0;39m ==> Parameters: 
2023-03-18 16:59:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17975338869067776 [0;39m <==    Updates: 1
2023-03-18 16:59:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17975338869067776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 16:59:06.993 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:59:07.508 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:59:09.052 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:59:11.073 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:59:13.117 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:59:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17975464706576384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 16:59:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17975464706576384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 16:59:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17975464706576384 [0;39m ==> Parameters: 
2023-03-18 16:59:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17975464706576384 [0;39m <==    Updates: 1
2023-03-18 16:59:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17975464706576384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 16:59:35.150 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:59:37.194 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:59:37.522 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:59:39.244 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 16:59:43.321 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:00:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17975569547399168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 17:00:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17975569547399168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 17:00:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17975569547399168 [0;39m ==> Parameters: 
2023-03-18 17:00:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17975569547399168 [0;39m <==    Updates: 0
2023-03-18 17:00:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17975569547399168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 17:00:01.274 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:00:03.318 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:00:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17975590523113472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:00:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17975590523113472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:00:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17975590523113472 [0;39m ==> Parameters: 
2023-03-18 17:00:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17975590523113472 [0;39m <==    Updates: 1
2023-03-18 17:00:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17975590523113472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 17:00:06.977 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:00:07.522 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:00:11.072 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:00:25.338 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:00:27.368 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:00:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17975716352233472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:00:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17975716352233472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:00:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17975716352233472 [0;39m ==> Parameters: 
2023-03-18 17:00:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17975716352233472 [0;39m <==    Updates: 1
2023-03-18 17:00:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17975716352233472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 17:00:36.962 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:00:37.509 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:00:38.994 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:00:41.011 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:00:49.400 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:00:51.434 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:01:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17975821209833472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 17:01:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17975821209833472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 17:01:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17975821209833472 [0;39m ==> Parameters: 
2023-03-18 17:01:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17975821209833472 [0;39m <==    Updates: 0
2023-03-18 17:01:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17975821209833472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 17:01:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17975842181353472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:01:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17975842181353472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:01:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17975842181353472 [0;39m ==> Parameters: 
2023-03-18 17:01:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17975842181353472 [0;39m <==    Updates: 1
2023-03-18 17:01:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17975842181353472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 17:01:06.993 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:01:07.524 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:01:09.023 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:01:11.050 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:01:15.490 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:01:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17975968010473472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:01:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17975968010473472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:01:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17975968010473472 [0;39m ==> Parameters: 
2023-03-18 17:01:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17975968010473472 [0;39m <==    Updates: 1
2023-03-18 17:01:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17975968010473472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 17:01:36.964 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:01:37.493 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:01:39.024 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:01:41.071 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:01:43.117 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:02:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17976072868073472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 17:02:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17976072868073472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 17:02:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17976072868073472 [0;39m ==> Parameters: 
2023-03-18 17:02:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17976072868073472 [0;39m <==    Updates: 0
2023-03-18 17:02:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17976072868073472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 17:02:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17976093843787776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:02:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17976093843787776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:02:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17976093843787776 [0;39m ==> Parameters: 
2023-03-18 17:02:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17976093843787776 [0;39m <==    Updates: 1
2023-03-18 17:02:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17976093843787776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 17:02:05.148 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:02:07.196 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:02:07.509 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:02:11.288 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:02:32.243 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:02:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17976219660324864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:02:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17976219660324864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:02:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17976219660324864 [0;39m ==> Parameters: 
2023-03-18 17:02:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17976219660324864 [0;39m <==    Updates: 1
2023-03-18 17:02:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17976219660324864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 17:02:36.962 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:02:37.495 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:02:38.993 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:02:41.013 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:02:54.302 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:02:56.352 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:03:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17976324547284992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 17:03:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17976324547284992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 17:03:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17976324547284992 [0;39m ==> Parameters: 
2023-03-18 17:03:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17976324547284992 [0;39m <==    Updates: 0
2023-03-18 17:03:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17976324547284992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 17:03:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17976345502027776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:03:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17976345502027776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:03:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17976345502027776 [0;39m ==> Parameters: 
2023-03-18 17:03:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17976345502027776 [0;39m <==    Updates: 1
2023-03-18 17:03:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17976345502027776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 17:03:07.524 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:03:09.007 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:03:11.056 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:03:18.401 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:03:20.462 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:03:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17976471322759168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:03:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17976471322759168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:03:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17976471322759168 [0;39m ==> Parameters: 
2023-03-18 17:03:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17976471322759168 [0;39m <==    Updates: 1
2023-03-18 17:03:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17976471322759168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 17:03:36.964 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:03:37.509 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:03:38.992 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:03:41.025 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:03:43.071 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:03:45.102 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:04:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17976576201330688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 17:04:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17976576201330688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 17:04:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17976576201330688 [0;39m ==> Parameters: 
2023-03-18 17:04:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17976576201330688 [0;39m <==    Updates: 0
2023-03-18 17:04:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17976576201330688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 17:04:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17976597156073472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:04:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17976597156073472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:04:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17976597156073472 [0;39m ==> Parameters: 
2023-03-18 17:04:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17976597156073472 [0;39m <==    Updates: 1
2023-03-18 17:04:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17976597156073472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 17:04:06.977 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:04:07.537 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:04:09.025 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:04:11.057 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:04:13.101 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:04:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17976722972610560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:04:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17976722972610560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:04:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17976722972610560 [0;39m ==> Parameters: 
2023-03-18 17:04:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17976722972610560 [0;39m <==    Updates: 1
2023-03-18 17:04:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17976722972610560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 17:04:37.181 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:04:37.496 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:04:39.212 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:04:43.290 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:04:59.211 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:05:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17976827851182080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 17:05:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17976827851182080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 17:05:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17976827851182080 [0;39m ==> Parameters: 
2023-03-18 17:05:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17976827851182080 [0;39m <==    Updates: 0
2023-03-18 17:05:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17976827851182080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 17:05:01.240 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:05:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17976848810119168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:05:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17976848810119168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:05:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17976848810119168 [0;39m ==> Parameters: 
2023-03-18 17:05:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17976848810119168 [0;39m <==    Updates: 1
2023-03-18 17:05:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17976848810119168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 17:05:06.963 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:05:07.510 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:05:09.007 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:05:11.041 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:05:23.275 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:05:25.319 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:05:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17976974643433472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:05:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17976974643433472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:05:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17976974643433472 [0;39m ==> Parameters: 
2023-03-18 17:05:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17976974643433472 [0;39m <==    Updates: 1
2023-03-18 17:05:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17976974643433472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 17:05:37.509 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:05:39.022 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:05:41.041 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:05:47.367 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:05:49.399 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:06:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17977079513616384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 17:06:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17977079513616384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 17:06:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17977079513616384 [0;39m ==> Parameters: 
2023-03-18 17:06:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17977079513616384 [0;39m <==    Updates: 0
2023-03-18 17:06:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17977079513616384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 17:06:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17977100472553472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:06:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17977100472553472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:06:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17977100472553472 [0;39m ==> Parameters: 
2023-03-18 17:06:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17977100472553472 [0;39m <==    Updates: 1
2023-03-18 17:06:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17977100472553472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 17:06:06.977 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:06:07.508 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:06:09.025 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:06:11.059 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:06:13.102 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:06:15.135 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:06:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17977226293284864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:06:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17977226293284864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:06:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17977226293284864 [0;39m ==> Parameters: 
2023-03-18 17:06:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17977226293284864 [0;39m <==    Updates: 1
2023-03-18 17:06:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17977226293284864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 17:06:36.989 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:06:37.507 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:06:39.009 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:06:41.056 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:06:43.100 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:07:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17977331163467776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 17:07:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17977331163467776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 17:07:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17977331163467776 [0;39m ==> Parameters: 
2023-03-18 17:07:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17977331163467776 [0;39m <==    Updates: 0
2023-03-18 17:07:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17977331163467776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 17:07:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17977352126599168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:07:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17977352126599168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:07:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17977352126599168 [0;39m ==> Parameters: 
2023-03-18 17:07:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17977352126599168 [0;39m <==    Updates: 1
2023-03-18 17:07:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17977352126599168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 17:07:05.162 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:07:07.209 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:07:07.507 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:07:09.244 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:07:11.274 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:07:30.197 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:07:32.257 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:07:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17977477959913472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:07:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17977477959913472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:07:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17977477959913472 [0;39m ==> Parameters: 
2023-03-18 17:07:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17977477959913472 [0;39m <==    Updates: 1
2023-03-18 17:07:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17977477959913472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 17:07:36.978 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:07:37.494 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:07:39.010 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:07:41.043 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:07:56.338 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:08:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17977582817513472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 17:08:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17977582817513472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 17:08:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17977582817513472 [0;39m ==> Parameters: 
2023-03-18 17:08:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17977582817513472 [0;39m <==    Updates: 0
2023-03-18 17:08:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17977582817513472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 17:08:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17977603793227776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:08:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17977603793227776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:08:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17977603793227776 [0;39m ==> Parameters: 
2023-03-18 17:08:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17977603793227776 [0;39m <==    Updates: 1
2023-03-18 17:08:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17977603793227776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 17:08:06.992 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:08:07.508 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:08:09.039 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:08:11.086 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:08:18.367 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:08:20.415 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:08:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17977729618153472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:08:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17977729618153472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:08:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17977729618153472 [0;39m ==> Parameters: 
2023-03-18 17:08:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17977729618153472 [0;39m <==    Updates: 1
2023-03-18 17:08:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17977729618153472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 17:08:36.979 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:08:37.506 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:08:39.006 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:08:41.041 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:08:43.085 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:08:45.116 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:09:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17977834454781952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 17:09:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17977834454781952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 17:09:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17977834454781952 [0;39m ==> Parameters: 
2023-03-18 17:09:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17977834454781952 [0;39m <==    Updates: 0
2023-03-18 17:09:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17977834454781952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 17:09:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17977855447273472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:09:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17977855447273472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:09:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17977855447273472 [0;39m ==> Parameters: 
2023-03-18 17:09:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17977855447273472 [0;39m <==    Updates: 1
2023-03-18 17:09:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17977855447273472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 17:09:07.534 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:09:09.039 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:09:11.071 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:09:13.117 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:09:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17977981272199168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:09:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17977981272199168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:09:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17977981272199168 [0;39m ==> Parameters: 
2023-03-18 17:09:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17977981272199168 [0;39m <==    Updates: 1
2023-03-18 17:09:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17977981272199168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 17:09:35.163 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:09:37.195 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:09:37.506 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:09:39.230 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:09:41.272 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:09:43.306 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:09:59.228 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:10:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17978086133993472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 17:10:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17978086133993472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 17:10:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17978086133993472 [0;39m ==> Parameters: 
2023-03-18 17:10:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17978086133993472 [0;39m <==    Updates: 0
2023-03-18 17:10:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17978086133993472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 17:10:01.271 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:10:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17978107126484992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:10:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17978107126484992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:10:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17978107126484992 [0;39m ==> Parameters: 
2023-03-18 17:10:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17978107126484992 [0;39m <==    Updates: 1
2023-03-18 17:10:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17978107126484992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 17:10:07.524 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:10:09.039 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:10:11.072 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:10:23.305 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:10:25.337 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:10:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17978232926244864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:10:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17978232926244864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:10:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17978232926244864 [0;39m ==> Parameters: 
2023-03-18 17:10:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17978232926244864 [0;39m <==    Updates: 1
2023-03-18 17:10:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17978232926244864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 17:10:36.979 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:10:37.525 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:10:39.025 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:10:41.055 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:10:47.398 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:10:49.448 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:11:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17978337788039168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 17:11:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17978337788039168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 17:11:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17978337788039168 [0;39m ==> Parameters: 
2023-03-18 17:11:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17978337788039168 [0;39m <==    Updates: 0
2023-03-18 17:11:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17978337788039168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 17:11:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17978358772142080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:11:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17978358772142080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:11:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17978358772142080 [0;39m ==> Parameters: 
2023-03-18 17:11:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17978358772142080 [0;39m <==    Updates: 1
2023-03-18 17:11:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17978358772142080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 17:11:07.510 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:11:09.024 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:11:11.053 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:11:15.132 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:11:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17978484592873472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:11:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17978484592873472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:11:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17978484592873472 [0;39m ==> Parameters: 
2023-03-18 17:11:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17978484592873472 [0;39m <==    Updates: 1
2023-03-18 17:11:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17978484592873472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 17:11:36.977 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:11:37.510 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:11:41.055 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:11:43.101 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:12:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17978589446279168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 17:12:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17978589446279168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 17:12:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17978589446279168 [0;39m ==> Parameters: 
2023-03-18 17:12:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17978589446279168 [0;39m <==    Updates: 0
2023-03-18 17:12:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17978589446279168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 17:12:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17978610413604864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:12:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17978610413604864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:12:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17978610413604864 [0;39m ==> Parameters: 
2023-03-18 17:12:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17978610413604864 [0;39m <==    Updates: 1
2023-03-18 17:12:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17978610413604864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 17:12:05.148 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:12:07.196 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:12:07.508 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:12:09.231 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:12:11.274 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:12:13.292 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:12:29.240 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:12:31.258 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:12:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17978736242724864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:12:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17978736242724864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:12:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17978736242724864 [0;39m ==> Parameters: 
2023-03-18 17:12:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17978736242724864 [0;39m <==    Updates: 1
2023-03-18 17:12:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17978736242724864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 17:12:36.977 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:12:37.490 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:12:39.007 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:12:41.052 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:12:53.288 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:12:55.324 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:13:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17978841129684992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 17:13:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17978841129684992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 17:13:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17978841129684992 [0;39m ==> Parameters: 
2023-03-18 17:13:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17978841129684992 [0;39m <==    Updates: 0
2023-03-18 17:13:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17978841129684992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 17:13:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17978862076039168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:13:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17978862076039168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:13:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17978862076039168 [0;39m ==> Parameters: 
2023-03-18 17:13:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17978862076039168 [0;39m <==    Updates: 1
2023-03-18 17:13:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17978862076039168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 17:13:06.977 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:13:07.508 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:13:09.007 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:13:11.055 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:13:17.354 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:13:19.399 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:13:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17978987909353472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:13:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17978987909353472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:13:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17978987909353472 [0;39m ==> Parameters: 
2023-03-18 17:13:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17978987909353472 [0;39m <==    Updates: 1
2023-03-18 17:13:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17978987909353472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 17:13:36.977 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:13:37.523 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:13:39.007 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:13:41.045 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:13:43.086 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:13:45.117 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:14:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17979092758564864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 17:14:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17979092758564864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 17:14:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17979092758564864 [0;39m ==> Parameters: 
2023-03-18 17:14:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17979092758564864 [0;39m <==    Updates: 0
2023-03-18 17:14:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17979092758564864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 17:14:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17979113738473472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:14:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17979113738473472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:14:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17979113738473472 [0;39m ==> Parameters: 
2023-03-18 17:14:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17979113738473472 [0;39m <==    Updates: 1
2023-03-18 17:14:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17979113738473472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 17:14:07.510 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:14:09.023 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:14:11.071 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:14:13.098 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:14:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17979239567593472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:14:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17979239567593472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:14:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17979239567593472 [0;39m ==> Parameters: 
2023-03-18 17:14:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17979239567593472 [0;39m <==    Updates: 1
2023-03-18 17:14:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17979239567593472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 17:14:35.147 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:14:37.167 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:14:37.511 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:14:41.241 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:15:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17979344425193472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 17:15:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17979344425193472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 17:15:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17979344425193472 [0;39m ==> Parameters: 
2023-03-18 17:15:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17979344425193472 [0;39m <==    Updates: 0
2023-03-18 17:15:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17979344425193472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 17:15:00.181 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:15:02.197 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:15:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17979365388324864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:15:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17979365388324864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:15:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17979365388324864 [0;39m ==> Parameters: 
2023-03-18 17:15:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17979365388324864 [0;39m <==    Updates: 1
2023-03-18 17:15:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17979365388324864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 17:15:06.977 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:15:07.493 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:15:09.023 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:15:11.069 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:15:26.275 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:15:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17979491225833472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:15:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17979491225833472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:15:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17979491225833472 [0;39m ==> Parameters: 
2023-03-18 17:15:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17979491225833472 [0;39m <==    Updates: 1
2023-03-18 17:15:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17979491225833472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 17:15:36.993 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:15:37.523 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:15:41.071 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:15:48.322 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:15:50.354 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:16:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17979596083433472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 17:16:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17979596083433472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 17:16:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17979596083433472 [0;39m ==> Parameters: 
2023-03-18 17:16:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17979596083433472 [0;39m <==    Updates: 0
2023-03-18 17:16:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17979596083433472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 17:16:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17979617075924992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:16:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17979617075924992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:16:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17979617075924992 [0;39m ==> Parameters: 
2023-03-18 17:16:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17979617075924992 [0;39m <==    Updates: 1
2023-03-18 17:16:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17979617075924992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 17:16:06.992 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:16:07.509 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:16:09.009 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:16:11.040 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:16:13.071 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:16:15.117 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:16:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17979742900850688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:16:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17979742900850688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:16:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17979742900850688 [0;39m ==> Parameters: 
2023-03-18 17:16:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17979742900850688 [0;39m <==    Updates: 1
2023-03-18 17:16:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17979742900850688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 17:16:36.978 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:16:37.509 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:16:39.011 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:16:41.040 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:16:43.085 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:17:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17979847741673472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 17:17:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17979847741673472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 17:17:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17979847741673472 [0;39m ==> Parameters: 
2023-03-18 17:17:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17979847741673472 [0;39m <==    Updates: 0
2023-03-18 17:17:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17979847741673472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 17:17:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17979868713193472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:17:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17979868713193472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:17:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17979868713193472 [0;39m ==> Parameters: 
2023-03-18 17:17:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17979868713193472 [0;39m <==    Updates: 1
2023-03-18 17:17:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17979868713193472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 17:17:05.116 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:17:07.164 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:17:07.522 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:17:13.261 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:17:29.195 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:17:31.225 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:17:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17979994538119168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:17:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17979994538119168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:17:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17979994538119168 [0;39m ==> Parameters: 
2023-03-18 17:17:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17979994538119168 [0;39m <==    Updates: 1
2023-03-18 17:17:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17979994538119168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 17:17:36.976 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:17:37.511 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:17:38.995 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:17:41.041 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:17:53.289 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:17:55.321 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:18:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17980099399913472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 17:18:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17980099399913472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 17:18:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17980099399913472 [0;39m ==> Parameters: 
2023-03-18 17:18:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17980099399913472 [0;39m <==    Updates: 0
2023-03-18 17:18:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17980099399913472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-18 17:18:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17980120367239168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:18:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17980120367239168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:18:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17980120367239168 [0;39m ==> Parameters: 
2023-03-18 17:18:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17980120367239168 [0;39m <==    Updates: 1
2023-03-18 17:18:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17980120367239168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 17:18:06.992 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:18:07.522 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:18:11.039 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:18:19.403 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:18:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17980246217330688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:18:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17980246217330688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:18:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17980246217330688 [0;39m ==> Parameters: 
2023-03-18 17:18:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17980246217330688 [0;39m <==    Updates: 1
2023-03-18 17:18:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17980246217330688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 17:18:36.977 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:18:37.509 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:18:41.055 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:18:43.071 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:18:45.106 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:19:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17980351053959168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 17:19:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17980351053959168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 17:19:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17980351053959168 [0;39m ==> Parameters: 
2023-03-18 17:19:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17980351053959168 [0;39m <==    Updates: 0
2023-03-18 17:19:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17980351053959168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-18 17:19:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17980372025479168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:19:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17980372025479168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:19:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17980372025479168 [0;39m ==> Parameters: 
2023-03-18 17:19:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17980372025479168 [0;39m <==    Updates: 1
2023-03-18 17:19:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17980372025479168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 17:19:06.980 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:19:07.497 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:19:09.024 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:19:11.071 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:19:13.102 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:19:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17980497862987776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:19:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17980497862987776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:19:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17980497862987776 [0;39m ==> Parameters: 
2023-03-18 17:19:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17980497862987776 [0;39m <==    Updates: 1
2023-03-18 17:19:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17980497862987776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 17:19:35.135 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:19:37.179 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:19:37.507 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:19:41.273 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:20:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17980602716393472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 17:20:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17980602716393472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 17:20:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17980602716393472 [0;39m ==> Parameters: 
2023-03-18 17:20:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17980602716393472 [0;39m <==    Updates: 0
2023-03-18 17:20:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17980602716393472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-18 17:20:00.179 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:20:02.212 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:20:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17980623683719168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:20:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17980623683719168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:20:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17980623683719168 [0;39m ==> Parameters: 
2023-03-18 17:20:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17980623683719168 [0;39m <==    Updates: 1
2023-03-18 17:20:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17980623683719168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 17:20:06.990 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:20:07.525 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:20:11.086 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:20:24.260 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:20:26.289 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:20:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17980749508644864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:20:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17980749508644864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:20:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17980749508644864 [0;39m ==> Parameters: 
2023-03-18 17:20:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17980749508644864 [0;39m <==    Updates: 1
2023-03-18 17:20:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17980749508644864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 17:20:37.507 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:20:39.024 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:20:41.069 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:20:48.336 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:20:50.355 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:21:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17980854374633472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 17:21:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17980854374633472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 17:21:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17980854374633472 [0;39m ==> Parameters: 
2023-03-18 17:21:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17980854374633472 [0;39m <==    Updates: 0
2023-03-18 17:21:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17980854374633472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-18 17:21:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17980875346153472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:21:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17980875346153472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:21:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17980875346153472 [0;39m ==> Parameters: 
2023-03-18 17:21:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17980875346153472 [0;39m <==    Updates: 1
2023-03-18 17:21:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17980875346153472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 17:21:06.978 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:21:07.493 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:21:09.023 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:21:11.055 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:21:13.113 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:21:15.135 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:21:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17981001166884864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:21:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17981001166884864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:21:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17981001166884864 [0;39m ==> Parameters: 
2023-03-18 17:21:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17981001166884864 [0;39m <==    Updates: 1
2023-03-18 17:21:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17981001166884864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 17:21:36.979 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:21:37.508 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:21:39.013 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:21:41.042 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:21:43.072 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:22:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17981106037067776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 17:22:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17981106037067776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 17:22:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17981106037067776 [0;39m ==> Parameters: 
2023-03-18 17:22:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17981106037067776 [0;39m <==    Updates: 0
2023-03-18 17:22:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17981106037067776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-18 17:22:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17981127004393472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:22:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17981127004393472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:22:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17981127004393472 [0;39m ==> Parameters: 
2023-03-18 17:22:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17981127004393472 [0;39m <==    Updates: 1
2023-03-18 17:22:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17981127004393472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 17:22:05.119 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:22:07.151 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:22:07.496 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:22:09.178 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:22:11.227 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:22:13.271 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:22:29.195 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:22:31.226 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:22:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17981252829319168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:22:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17981252829319168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:22:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17981252829319168 [0;39m ==> Parameters: 
2023-03-18 17:22:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17981252829319168 [0;39m <==    Updates: 1
2023-03-18 17:22:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17981252829319168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 17:22:37.511 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:22:41.042 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:22:53.304 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:22:55.338 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:23:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17981357695307776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 17:23:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17981357695307776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 17:23:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17981357695307776 [0;39m ==> Parameters: 
2023-03-18 17:23:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17981357695307776 [0;39m <==    Updates: 0
2023-03-18 17:23:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17981357695307776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-18 17:23:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17981378675216384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:23:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17981378675216384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:23:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17981378675216384 [0;39m ==> Parameters: 
2023-03-18 17:23:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17981378675216384 [0;39m <==    Updates: 1
2023-03-18 17:23:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17981378675216384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-18 17:23:06.974 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:23:07.523 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:23:09.023 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:23:11.041 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:23:19.398 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:23:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17981504512724992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:23:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17981504512724992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:23:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17981504512724992 [0;39m ==> Parameters: 
2023-03-18 17:23:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17981504512724992 [0;39m <==    Updates: 1
2023-03-18 17:23:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17981504512724992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-18 17:23:36.991 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:23:37.526 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:23:41.082 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:23:43.292 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:23:45.329 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:24:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17981609324187648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 17:24:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17981609324187648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 17:24:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17981609324187648 [0;39m ==> Parameters: 
2023-03-18 17:24:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17981609324187648 [0;39m <==    Updates: 0
2023-03-18 17:24:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17981609324187648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-18 17:24:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17981630337650688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:24:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17981630337650688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:24:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17981630337650688 [0;39m ==> Parameters: 
2023-03-18 17:24:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17981630337650688 [0;39m <==    Updates: 1
2023-03-18 17:24:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17981630337650688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 17:24:06.992 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:24:07.524 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:24:11.078 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:24:13.123 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:24:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17981756133216256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:24:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17981756133216256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:24:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17981756133216256 [0;39m ==> Parameters: 
2023-03-18 17:24:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17981756133216256 [0;39m <==    Updates: 1
2023-03-18 17:24:35.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17981756133216256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-18 17:24:35.175 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:24:37.222 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:24:37.520 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:24:39.275 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:24:41.304 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:24:43.336 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:24:59.272 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:25:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17981860999204864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 17:25:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17981860999204864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 17:25:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17981860999204864 [0;39m ==> Parameters: 
2023-03-18 17:25:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17981860999204864 [0;39m <==    Updates: 0
2023-03-18 17:25:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17981860999204864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-18 17:25:01.307 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:25:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17981881962336256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:25:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17981881962336256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:25:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17981881962336256 [0;39m ==> Parameters: 
2023-03-18 17:25:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17981881962336256 [0;39m <==    Updates: 1
2023-03-18 17:25:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17981881962336256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 17:25:07.519 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:25:11.072 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:25:25.374 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:25:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17982007778873344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:25:35.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17982007778873344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:25:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17982007778873344 [0;39m ==> Parameters: 
2023-03-18 17:25:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17982007778873344 [0;39m <==    Updates: 1
2023-03-18 17:25:35.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17982007778873344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 17:25:36.971 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:25:37.536 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:25:41.260 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:25:49.888 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:26:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17982112690999296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 17:26:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17982112690999296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 17:26:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17982112690999296 [0;39m ==> Parameters: 
2023-03-18 17:26:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17982112690999296 [0;39m <==    Updates: 0
2023-03-18 17:26:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17982112690999296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 17:26:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17982133658324992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:26:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17982133658324992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:26:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17982133658324992 [0;39m ==> Parameters: 
2023-03-18 17:26:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17982133658324992 [0;39m <==    Updates: 1
2023-03-18 17:26:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17982133658324992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 17:26:07.127 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:26:07.861 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:26:09.360 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:26:11.760 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:26:13.816 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:26:15.840 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:26:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17982259462279168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:26:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17982259462279168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:26:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17982259462279168 [0;39m ==> Parameters: 
2023-03-18 17:26:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17982259462279168 [0;39m <==    Updates: 1
2023-03-18 17:26:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17982259462279168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 17:26:37.257 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:26:37.633 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:26:39.388 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:26:41.566 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:26:43.597 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:27:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17982364353433600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 17:27:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17982364353433600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 17:27:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17982364353433600 [0;39m ==> Parameters: 
2023-03-18 17:27:00.997 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17982364353433600 [0;39m <==    Updates: 0
2023-03-18 17:27:00.998 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17982364353433600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š983æ¯«ç§’
2023-03-18 17:27:05.020 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17982385345925120 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:27:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17982385345925120 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:27:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17982385345925120 [0;39m ==> Parameters: 
2023-03-18 17:27:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17982385345925120 [0;39m <==    Updates: 1
2023-03-18 17:27:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17982385345925120 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 17:27:05.955 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:27:07.987 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:27:08.196 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:27:10.468 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:27:12.489 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:27:32.487 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:27:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17982511145684992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:27:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17982511145684992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:27:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17982511145684992 [0;39m ==> Parameters: 
2023-03-18 17:27:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17982511145684992 [0;39m <==    Updates: 1
2023-03-18 17:27:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17982511145684992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 17:27:37.614 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:27:39.584 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:27:41.913 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:27:57.427 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:28:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m17982616049422336 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 17:28:00.026 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17982616049422336 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 17:28:00.027 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17982616049422336 [0;39m ==> Parameters: 
2023-03-18 17:28:00.037 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m17982616049422336 [0;39m <==    Updates: 0
2023-03-18 17:28:00.037 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m17982616049422336 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-18 17:28:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m17982636932861952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 17:28:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17982636932861952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 17:28:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17982636932861952 [0;39m ==> Parameters: 
2023-03-18 17:28:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m17982636932861952 [0;39m <==    Updates: 1
2023-03-18 17:28:05.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m17982636932861952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 17:28:07.226 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:28:07.828 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:28:12.022 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 17:28:22.085 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:45:28.166 INFO  com.jiawa.wiki.WikiApplication                    :55   [32m                  [0;39m Starting WikiApplication using Java 1.8.0_271 on LAPTOP-TLCI2GAA with PID 14784 (D:\work\jiawawiki\target\classes started by k in D:\work\jiawawiki)
2023-03-18 18:45:28.167 INFO  org.hibernate.validator.internal.util.Version     :21   [32m                  [0;39m HV000001: Hibernate Validator 6.1.6.Final
2023-03-18 18:45:28.168 INFO  com.jiawa.wiki.WikiApplication                    :660  [32m                  [0;39m No active profile set, falling back to default profiles: default
2023-03-18 18:45:28.221 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2023-03-18 18:45:28.222 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255  [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2023-03-18 18:45:28.994 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :250  [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-18 18:45:28.996 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :128  [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-03-18 18:45:29.025 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :188  [32m                  [0;39m Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
2023-03-18 18:45:29.218 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQAutoConfiguration$$EnhancerBySpringCGLIB$$3b64d722] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 18:45:29.228 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 18:45:29.796 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'defaultMQProducer' of type [org.apache.rocketmq.client.producer.DefaultMQProducer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 18:45:29.799 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonConfig' of type [com.jiawa.wiki.config.JacksonConfig$$EnhancerBySpringCGLIB$$dd9f4c23] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 18:45:29.800 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$JacksonObjectMapperBuilderConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 18:45:29.802 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 18:45:29.805 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'spring.jackson-org.springframework.boot.autoconfigure.jackson.JacksonProperties' of type [org.springframework.boot.autoconfigure.jackson.JacksonProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 18:45:29.806 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'standardJacksonObjectMapperBuilderCustomizer' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$Jackson2ObjectMapperBuilderCustomizerConfiguration$StandardJackson2ObjectMapperBuilderCustomizer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 18:45:29.808 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration$ParameterNamesModuleConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 18:45:29.811 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'parameterNamesModule' of type [com.fasterxml.jackson.module.paramnames.ParameterNamesModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 18:45:29.811 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration' of type [org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 18:45:29.828 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jsonComponentModule' of type [org.springframework.boot.jackson.JsonComponentModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 18:45:29.828 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'org.springframework.data.web.config.SpringDataJacksonConfiguration' of type [org.springframework.data.web.config.SpringDataJacksonConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 18:45:29.835 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonGeoModule' of type [org.springframework.data.geo.GeoModule] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 18:45:29.838 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapperBuilder' of type [org.springframework.http.converter.json.Jackson2ObjectMapperBuilder] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 18:45:29.855 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'jacksonObjectMapper' of type [com.fasterxml.jackson.databind.ObjectMapper] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 18:45:31.801 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'rocketMQTemplate' of type [org.apache.rocketmq.spring.core.RocketMQTemplate] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 18:45:31.803 INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker:350  [32m                  [0;39m Bean 'transactionHandlerRegistry' of type [org.apache.rocketmq.spring.config.TransactionHandlerRegistry] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-18 18:45:32.358 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108  [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2023-03-18 18:45:32.365 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2023-03-18 18:45:32.366 INFO  org.apache.catalina.core.StandardService          :173  [32m                  [0;39m Starting service [Tomcat]
2023-03-18 18:45:32.366 INFO  org.apache.catalina.core.StandardEngine           :173  [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.39]
2023-03-18 18:45:32.453 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2023-03-18 18:45:32.453 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :289  [32m                  [0;39m Root WebApplicationContext: initialization completed in 4230 ms
2023-03-18 18:45:33.374 INFO  o.s.scheduling.concurrent.ThreadPoolTaskExecutor  :181  [32m                  [0;39m Initializing ExecutorService 'applicationTaskExecutor'
2023-03-18 18:45:33.878 INFO  o.s.scheduling.concurrent.ThreadPoolTaskScheduler :181  [32m                  [0;39m Initializing ExecutorService 'taskScheduler'
2023-03-18 18:45:33.957 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58   [32m                  [0;39m LiveReload server is running on port 35729
2023-03-18 18:45:33.960 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:45:33.961 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:45:37.527 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:45:39.570 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:45:39.572 INFO  o.a.r.s.support.DefaultRocketMQListenerContainer  :243  [32m                  [0;39m running container: DefaultRocketMQListenerContainer{consumerGroup='default', nameServer='127.0.0.1:9876', topic='VOTE_TOPIC', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
2023-03-18 18:45:39.573 INFO  o.a.r.s.a.ListenerContainerConfiguration          :107  [32m                  [0;39m Register the listener to container, listenerBeanName:voteTopicConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-03-18 18:45:39.584 INFO  org.apache.coyote.http11.Http11NioProtocol        :173  [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2023-03-18 18:45:39.592 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220  [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2023-03-18 18:45:39.606 INFO  com.jiawa.wiki.WikiApplication                    :61   [32m                  [0;39m Started WikiApplication in 11.924 seconds (JVM running for 13.191)
2023-03-18 18:45:39.609 INFO  com.jiawa.wiki.WikiApplication                    :26   [32m                  [0;39m å¯åŠ¨æˆåŠŸï¼ï¼
2023-03-18 18:45:39.610 INFO  com.jiawa.wiki.WikiApplication                    :27   [32m                  [0;39m åœ°å€: 	http://127.0.0.1:8880
2023-03-18 18:45:41.602 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:45:43.653 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:46:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18002245346004992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 18:46:00.032 INFO  com.zaxxer.hikari.HikariDataSource                :110  [32m18002245346004992 [0;39m HikariPool-1 - Starting...
2023-03-18 18:46:00.124 INFO  com.zaxxer.hikari.HikariDataSource                :123  [32m18002245346004992 [0;39m HikariPool-1 - Start completed.
2023-03-18 18:46:00.130 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18002245346004992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 18:46:00.144 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18002245346004992 [0;39m ==> Parameters: 
2023-03-18 18:46:00.156 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18002245346004992 [0;39m <==    Updates: 0
2023-03-18 18:46:00.157 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18002245346004992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š143æ¯«ç§’
2023-03-18 18:46:02.965 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:46:03.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:46:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18002266317524992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 18:46:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18002266317524992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 18:46:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18002266317524992 [0;39m ==> Parameters: 
2023-03-18 18:46:05.025 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18002266317524992 [0;39m <==    Updates: 1
2023-03-18 18:46:05.025 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18002266317524992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-18 18:46:07.045 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:46:09.100 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:46:31.180 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173  [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-03-18 18:46:31.180 INFO  org.springframework.web.servlet.DispatcherServlet :525  [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2023-03-18 18:46:31.182 INFO  org.springframework.web.servlet.DispatcherServlet :547  [32m                  [0;39m Completed initialization in 1 ms
2023-03-18 18:46:31.237 INFO  com.jiawa.wiki.websocket.WebSocketServer          :32   [32m                  [0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šKBSvnMg3MRï¼Œsession idï¼š0ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2023-03-18 18:46:31.296 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m18002376552222720 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 18:46:31.296 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m18002376552222722 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 18:46:31.296 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m18002376552222721 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 18:46:31.296 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m18002376552222720 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-03-18 18:46:31.296 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m18002376552222722 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-03-18 18:46:31.296 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m18002376552222721 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-18 18:46:31.297 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m18002376552222720 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-03-18 18:46:31.297 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m18002376552222721 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-18 18:46:31.297 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m18002376552222722 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-03-18 18:46:31.297 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m18002376552222720 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 18:46:31.297 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m18002376552222722 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 18:46:31.297 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m18002376552222721 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 18:46:31.344 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m18002376552222720 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 18:46:31.344 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m18002376552222721 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 18:46:31.344 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m18002376552222722 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 18:46:31.350 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m18002376552222722 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-18 18:46:31.351 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m18002376552222722 [0;39m ==> Parameters: 
2023-03-18 18:46:31.351 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m18002376552222720 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-18 18:46:31.353 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m18002376552222720 [0;39m ==> Parameters: 
2023-03-18 18:46:31.367 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m18002376552222721 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-18 18:46:31.367 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m18002376552222721 [0;39m ==> Parameters: 
2023-03-18 18:46:31.367 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m18002376552222720 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-03-18 18:46:31.367 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m18002376552222722 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-03-18 18:46:31.368 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m18002376552222720 [0;39m <==        Row: 2023-03-02, 0, 0
2023-03-18 18:46:31.368 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m18002376552222722 [0;39m <==        Row: 2023-03-18, 10, 7, 10, 7
2023-03-18 18:46:31.368 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002376552222721 [0;39m <==    Columns: id, parent, name, sort
2023-03-18 18:46:31.369 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002376552222721 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-18 18:46:31.369 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002376552222721 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-18 18:46:31.370 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002376552222721 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-18 18:46:31.370 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m18002376552222722 [0;39m <==      Total: 1
2023-03-18 18:46:31.370 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002376552222721 [0;39m <==        Row: 200, 0, Java, 200
2023-03-18 18:46:31.370 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m18002376552222720 [0;39m <==        Row: 2023-03-05, 8, 5
2023-03-18 18:46:31.370 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002376552222721 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-18 18:46:31.370 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m18002376552222720 [0;39m <==        Row: 2023-03-06, 1, 1
2023-03-18 18:46:31.371 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002376552222721 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-18 18:46:31.371 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002376552222721 [0;39m <==        Row: 300, 0, Python, 300
2023-03-18 18:46:31.371 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m18002376552222720 [0;39m <==      Total: 3
2023-03-18 18:46:31.372 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002376552222721 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-18 18:46:31.372 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002376552222721 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-18 18:46:31.373 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002376552222721 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-18 18:46:31.373 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002376552222721 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-18 18:46:31.373 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002376552222721 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-18 18:46:31.374 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002376552222721 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-18 18:46:31.374 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002376552222721 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-18 18:46:31.374 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002376552222721 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-18 18:46:31.375 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m18002376552222721 [0;39m <==      Total: 15
2023-03-18 18:46:31.394 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m18002376552222720 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1677945600000,"viewCount":0,"viewIncrease":8,"voteCount":0,"voteIncrease":5},{"date":1678032000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":1}],"success":true}
2023-03-18 18:46:31.394 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m18002376552222720 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š99 ms -------------
2023-03-18 18:46:31.394 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m18002376552222722 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1679068800000,"viewCount":10,"viewIncrease":10,"voteCount":7,"voteIncrease":7}],"success":true}
2023-03-18 18:46:31.394 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m18002376552222722 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š100 ms -------------
2023-03-18 18:46:31.395 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m18002376552222721 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-18 18:46:31.395 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m18002376552222721 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š101 ms -------------
2023-03-18 18:46:33.180 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:46:33.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:46:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18002392129867776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 18:46:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18002392129867776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 18:46:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18002392129867776 [0;39m ==> Parameters: 
2023-03-18 18:46:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18002392129867776 [0;39m <==    Updates: 1
2023-03-18 18:46:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18002392129867776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 18:46:37.256 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:46:38.535 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m18002406918983680 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 18:46:38.535 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m18002406918983680 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-18 18:46:38.536 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m18002406918983680 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-18 18:46:38.536 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m18002406918983680 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 18:46:38.537 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m18002406918983680 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":101,"page":1,"size":1000}]
2023-03-18 18:46:38.697 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002406918983680 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-18 18:46:38.698 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002406918983680 [0;39m ==> Parameters: 101(Long)
2023-03-18 18:46:38.699 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m18002406918983680 [0;39m <==    Columns: count(0)
2023-03-18 18:46:38.699 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m18002406918983680 [0;39m <==        Row: 1
2023-03-18 18:46:38.700 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002406918983680 [0;39m <==      Total: 1
2023-03-18 18:46:38.701 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m18002406918983680 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-03-18 18:46:38.701 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m18002406918983680 [0;39m ==> Parameters: 101(Long), 1000(Integer)
2023-03-18 18:46:38.702 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m18002406918983680 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-18 18:46:38.702 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m18002406918983680 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, 100, 101, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-18 18:46:38.703 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m18002406918983680 [0;39m <==      Total: 1
2023-03-18 18:46:38.704 INFO  com.jiawa.wiki.service.EbookService               :48   [32m18002406918983680 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-18 18:46:38.704 INFO  com.jiawa.wiki.service.EbookService               :49   [32m18002406918983680 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-18 18:46:38.712 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m18002406918983680 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":100,"category2Id":101,"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":1},"success":true}
2023-03-18 18:46:38.712 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m18002406918983680 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š177 ms -------------
2023-03-18 18:46:39.288 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:46:48.031 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m18002446748094464 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 18:46:48.031 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m18002446748094464 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/user/login POST
2023-03-18 18:46:48.032 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m18002446748094464 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.UserController.login
2023-03-18 18:46:48.032 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m18002446748094464 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 18:46:48.033 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m18002446748094464 [0;39m è¯·æ±‚å‚æ•°: [{"loginName":"test"}]
2023-03-18 18:46:48.040 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m18002446748094464 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user WHERE ( login_name = ? )
2023-03-18 18:46:48.041 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m18002446748094464 [0;39m ==> Parameters: test(String)
2023-03-18 18:46:48.042 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m18002446748094464 [0;39m <==    Columns: id, login_name, name, password
2023-03-18 18:46:48.042 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m18002446748094464 [0;39m <==        Row: 1, test, æµ‹è¯•, e70e2222a9d67c4f2eae107533359aa4
2023-03-18 18:46:48.042 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m18002446748094464 [0;39m <==      Total: 1
2023-03-18 18:46:48.047 INFO  com.jiawa.wiki.controller.UserController          :79   [32m18002446748094464 [0;39m ç”Ÿæˆå•ç‚¹ç™»å½•tokenï¼š18002446815203328ï¼Œå¹¶æ”¾å…¥redisä¸­
2023-03-18 18:46:48.182 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m18002446748094464 [0;39m è¿”å›žç»“æžœ: {"content":{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"18002446815203328"},"success":true}
2023-03-18 18:46:48.182 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m18002446748094464 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š151 ms -------------
2023-03-18 18:46:50.702 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m                  [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-18 18:46:50.702 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m                  [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š0 ms -------------
2023-03-18 18:46:50.705 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m                  [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-18 18:46:50.705 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m                  [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/list
2023-03-18 18:46:50.705 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m                  [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š18002446815203328
2023-03-18 18:46:50.708 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m                  [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"18002446815203328"}
2023-03-18 18:46:50.737 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m18002458097881088 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 18:46:50.737 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m18002458097881088 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/user/list GET
2023-03-18 18:46:50.737 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m18002458097881088 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.UserController.list
2023-03-18 18:46:50.738 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m18002458097881088 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 18:46:50.739 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m18002458097881088 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-03-18 18:46:50.742 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m18002458097881088 [0;39m ==>  Preparing: SELECT count(0) FROM user
2023-03-18 18:46:50.743 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m18002458097881088 [0;39m ==> Parameters: 
2023-03-18 18:46:50.743 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m18002458097881088 [0;39m <==    Columns: count(0)
2023-03-18 18:46:50.744 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m18002458097881088 [0;39m <==        Row: 1
2023-03-18 18:46:50.744 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m18002458097881088 [0;39m <==      Total: 1
2023-03-18 18:46:50.745 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m18002458097881088 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2023-03-18 18:46:50.745 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m18002458097881088 [0;39m ==> Parameters: 10(Integer)
2023-03-18 18:46:50.746 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m18002458097881088 [0;39m <==    Columns: id, login_name, name, password
2023-03-18 18:46:50.746 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m18002458097881088 [0;39m <==        Row: 1, test, æµ‹è¯•, e70e2222a9d67c4f2eae107533359aa4
2023-03-18 18:46:50.747 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m18002458097881088 [0;39m <==      Total: 1
2023-03-18 18:46:50.747 INFO  com.jiawa.wiki.service.UserService                :49   [32m18002458097881088 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-18 18:46:50.747 INFO  com.jiawa.wiki.service.UserService                :50   [32m18002458097881088 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-18 18:46:50.751 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m18002458097881088 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"id":1,"loginName":"test","name":"æµ‹è¯•"}],"total":1},"success":true}
2023-03-18 18:46:50.751 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m18002458097881088 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š14 ms -------------
2023-03-18 18:46:50.754 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m18002458097881088 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š49 ms -------------
2023-03-18 18:46:55.224 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:46:57.245 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:46:57.534 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m                  [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-18 18:46:57.535 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m                  [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š0 ms -------------
2023-03-18 18:46:57.538 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m                  [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-18 18:46:57.539 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m                  [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/save
2023-03-18 18:46:57.539 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m                  [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š18002446815203328
2023-03-18 18:46:57.543 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m                  [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"18002446815203328"}
2023-03-18 18:46:57.564 WARN  com.jiawa.wiki.config.ControllerExceptionHandler  :29   [32m                  [0;39m å‚æ•°æ ¡éªŒå¤±è´¥ï¼šã€æ˜µç§°ã€‘ä¸èƒ½ä¸ºç©º
2023-03-18 18:46:57.566 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m                  [0;39m Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.jiawa.wiki.resp.CommonResp com.jiawa.wiki.controller.UserController.save(com.jiawa.wiki.req.UserSaveReq) with 2 errors: [Field error in object 'userSaveReq' on field 'name': rejected value [null]; codes [NotNull.userSaveReq.name,NotNull.name,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userSaveReq.name,name]; arguments []; default message [name]]; default message [ã€æ˜µç§°ã€‘ä¸èƒ½ä¸ºç©º]] [Field error in object 'userSaveReq' on field 'loginName': rejected value [null]; codes [NotNull.userSaveReq.loginName,NotNull.loginName,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userSaveReq.loginName,loginName]; arguments []; default message [loginName]]; default message [ã€ç”¨æˆ·åã€‘ä¸èƒ½ä¸ºç©º]] ]
2023-03-18 18:46:58.338 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m                  [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-18 18:46:58.339 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m                  [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/save
2023-03-18 18:46:58.339 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m                  [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š18002446815203328
2023-03-18 18:46:58.341 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m                  [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"18002446815203328"}
2023-03-18 18:46:58.342 WARN  com.jiawa.wiki.config.ControllerExceptionHandler  :29   [32m                  [0;39m å‚æ•°æ ¡éªŒå¤±è´¥ï¼šã€æ˜µç§°ã€‘ä¸èƒ½ä¸ºç©º
2023-03-18 18:46:58.343 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m                  [0;39m Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.jiawa.wiki.resp.CommonResp com.jiawa.wiki.controller.UserController.save(com.jiawa.wiki.req.UserSaveReq) with 2 errors: [Field error in object 'userSaveReq' on field 'name': rejected value [null]; codes [NotNull.userSaveReq.name,NotNull.name,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userSaveReq.name,name]; arguments []; default message [name]]; default message [ã€æ˜µç§°ã€‘ä¸èƒ½ä¸ºç©º]] [Field error in object 'userSaveReq' on field 'loginName': rejected value [null]; codes [NotNull.userSaveReq.loginName,NotNull.loginName,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userSaveReq.loginName,loginName]; arguments []; default message [loginName]]; default message [ã€ç”¨æˆ·åã€‘ä¸èƒ½ä¸ºç©º]] ]
2023-03-18 18:46:58.881 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m18002376552222721 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-18 18:46:58.881 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m18002376552222721 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/save
2023-03-18 18:46:58.881 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m18002376552222721 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š18002446815203328
2023-03-18 18:46:58.883 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m18002376552222721 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"18002446815203328"}
2023-03-18 18:46:58.884 WARN  com.jiawa.wiki.config.ControllerExceptionHandler  :29   [32m18002376552222721 [0;39m å‚æ•°æ ¡éªŒå¤±è´¥ï¼šã€ç”¨æˆ·åã€‘ä¸èƒ½ä¸ºç©º
2023-03-18 18:46:58.885 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m18002376552222721 [0;39m Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.jiawa.wiki.resp.CommonResp com.jiawa.wiki.controller.UserController.save(com.jiawa.wiki.req.UserSaveReq) with 2 errors: [Field error in object 'userSaveReq' on field 'loginName': rejected value [null]; codes [NotNull.userSaveReq.loginName,NotNull.loginName,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userSaveReq.loginName,loginName]; arguments []; default message [loginName]]; default message [ã€ç”¨æˆ·åã€‘ä¸èƒ½ä¸ºç©º]] [Field error in object 'userSaveReq' on field 'name': rejected value [null]; codes [NotNull.userSaveReq.name,NotNull.name,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userSaveReq.name,name]; arguments []; default message [name]]; default message [ã€æ˜µç§°ã€‘ä¸èƒ½ä¸ºç©º]] ]
2023-03-18 18:46:59.289 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m18002376552222720 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-18 18:46:59.289 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m18002376552222720 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/save
2023-03-18 18:46:59.289 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m18002376552222720 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š18002446815203328
2023-03-18 18:46:59.291 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m18002376552222720 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"18002446815203328"}
2023-03-18 18:46:59.293 WARN  com.jiawa.wiki.config.ControllerExceptionHandler  :29   [32m18002376552222720 [0;39m å‚æ•°æ ¡éªŒå¤±è´¥ï¼šã€æ˜µç§°ã€‘ä¸èƒ½ä¸ºç©º
2023-03-18 18:46:59.293 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m18002376552222720 [0;39m Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.jiawa.wiki.resp.CommonResp com.jiawa.wiki.controller.UserController.save(com.jiawa.wiki.req.UserSaveReq) with 2 errors: [Field error in object 'userSaveReq' on field 'name': rejected value [null]; codes [NotNull.userSaveReq.name,NotNull.name,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userSaveReq.name,name]; arguments []; default message [name]]; default message [ã€æ˜µç§°ã€‘ä¸èƒ½ä¸ºç©º]] [Field error in object 'userSaveReq' on field 'loginName': rejected value [null]; codes [NotNull.userSaveReq.loginName,NotNull.loginName,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userSaveReq.loginName,loginName]; arguments []; default message [loginName]]; default message [ã€ç”¨æˆ·åã€‘ä¸èƒ½ä¸ºç©º]] ]
2023-03-18 18:46:59.641 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m18002376552222722 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-18 18:46:59.642 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m18002376552222722 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/save
2023-03-18 18:46:59.642 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m18002376552222722 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š18002446815203328
2023-03-18 18:46:59.643 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m18002376552222722 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"18002446815203328"}
2023-03-18 18:46:59.644 WARN  com.jiawa.wiki.config.ControllerExceptionHandler  :29   [32m18002376552222722 [0;39m å‚æ•°æ ¡éªŒå¤±è´¥ï¼šã€ç”¨æˆ·åã€‘ä¸èƒ½ä¸ºç©º
2023-03-18 18:46:59.646 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m18002376552222722 [0;39m Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.jiawa.wiki.resp.CommonResp com.jiawa.wiki.controller.UserController.save(com.jiawa.wiki.req.UserSaveReq) with 2 errors: [Field error in object 'userSaveReq' on field 'loginName': rejected value [null]; codes [NotNull.userSaveReq.loginName,NotNull.loginName,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userSaveReq.loginName,loginName]; arguments []; default message [loginName]]; default message [ã€ç”¨æˆ·åã€‘ä¸èƒ½ä¸ºç©º]] [Field error in object 'userSaveReq' on field 'name': rejected value [null]; codes [NotNull.userSaveReq.name,NotNull.name,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userSaveReq.name,name]; arguments []; default message [name]]; default message [ã€æ˜µç§°ã€‘ä¸èƒ½ä¸ºç©º]] ]
2023-03-18 18:47:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18002497008439296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 18:47:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18002497008439296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 18:47:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18002497008439296 [0;39m ==> Parameters: 
2023-03-18 18:47:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18002497008439296 [0;39m <==    Updates: 0
2023-03-18 18:47:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18002497008439296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 18:47:00.331 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m18002406918983680 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-18 18:47:00.332 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m18002406918983680 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/save
2023-03-18 18:47:00.332 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m18002406918983680 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š18002446815203328
2023-03-18 18:47:00.333 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m18002406918983680 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"18002446815203328"}
2023-03-18 18:47:00.334 WARN  com.jiawa.wiki.config.ControllerExceptionHandler  :29   [32m18002406918983680 [0;39m å‚æ•°æ ¡éªŒå¤±è´¥ï¼šã€ç”¨æˆ·åã€‘ä¸èƒ½ä¸ºç©º
2023-03-18 18:47:00.336 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m18002406918983680 [0;39m Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.jiawa.wiki.resp.CommonResp com.jiawa.wiki.controller.UserController.save(com.jiawa.wiki.req.UserSaveReq) with 2 errors: [Field error in object 'userSaveReq' on field 'loginName': rejected value [null]; codes [NotNull.userSaveReq.loginName,NotNull.loginName,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userSaveReq.loginName,loginName]; arguments []; default message [loginName]]; default message [ã€ç”¨æˆ·åã€‘ä¸èƒ½ä¸ºç©º]] [Field error in object 'userSaveReq' on field 'name': rejected value [null]; codes [NotNull.userSaveReq.name,NotNull.name,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userSaveReq.name,name]; arguments []; default message [name]]; default message [ã€æ˜µç§°ã€‘ä¸èƒ½ä¸ºç©º]] ]
2023-03-18 18:47:00.657 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m                  [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-18 18:47:00.658 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m                  [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/save
2023-03-18 18:47:00.658 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m                  [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š18002446815203328
2023-03-18 18:47:00.659 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m                  [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"18002446815203328"}
2023-03-18 18:47:00.660 WARN  com.jiawa.wiki.config.ControllerExceptionHandler  :29   [32m                  [0;39m å‚æ•°æ ¡éªŒå¤±è´¥ï¼šã€æ˜µç§°ã€‘ä¸èƒ½ä¸ºç©º
2023-03-18 18:47:00.661 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m                  [0;39m Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.jiawa.wiki.resp.CommonResp com.jiawa.wiki.controller.UserController.save(com.jiawa.wiki.req.UserSaveReq) with 2 errors: [Field error in object 'userSaveReq' on field 'name': rejected value [null]; codes [NotNull.userSaveReq.name,NotNull.name,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userSaveReq.name,name]; arguments []; default message [name]]; default message [ã€æ˜µç§°ã€‘ä¸èƒ½ä¸ºç©º]] [Field error in object 'userSaveReq' on field 'loginName': rejected value [null]; codes [NotNull.userSaveReq.loginName,NotNull.loginName,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userSaveReq.loginName,loginName]; arguments []; default message [loginName]]; default message [ã€ç”¨æˆ·åã€‘ä¸èƒ½ä¸ºç©º]] ]
2023-03-18 18:47:00.903 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m18002446748094464 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-18 18:47:00.904 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m18002446748094464 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/save
2023-03-18 18:47:00.904 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m18002446748094464 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š18002446815203328
2023-03-18 18:47:00.905 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m18002446748094464 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"18002446815203328"}
2023-03-18 18:47:00.907 WARN  com.jiawa.wiki.config.ControllerExceptionHandler  :29   [32m18002446748094464 [0;39m å‚æ•°æ ¡éªŒå¤±è´¥ï¼šã€æ˜µç§°ã€‘ä¸èƒ½ä¸ºç©º
2023-03-18 18:47:00.908 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m18002446748094464 [0;39m Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.jiawa.wiki.resp.CommonResp com.jiawa.wiki.controller.UserController.save(com.jiawa.wiki.req.UserSaveReq) with 2 errors: [Field error in object 'userSaveReq' on field 'name': rejected value [null]; codes [NotNull.userSaveReq.name,NotNull.name,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userSaveReq.name,name]; arguments []; default message [name]]; default message [ã€æ˜µç§°ã€‘ä¸èƒ½ä¸ºç©º]] [Field error in object 'userSaveReq' on field 'loginName': rejected value [null]; codes [NotNull.userSaveReq.loginName,NotNull.loginName,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userSaveReq.loginName,loginName]; arguments []; default message [loginName]]; default message [ã€ç”¨æˆ·åã€‘ä¸èƒ½ä¸ºç©º]] ]
2023-03-18 18:47:01.086 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m                  [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-18 18:47:01.086 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m                  [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/save
2023-03-18 18:47:01.087 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m                  [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š18002446815203328
2023-03-18 18:47:01.088 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m                  [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"18002446815203328"}
2023-03-18 18:47:01.089 WARN  com.jiawa.wiki.config.ControllerExceptionHandler  :29   [32m                  [0;39m å‚æ•°æ ¡éªŒå¤±è´¥ï¼šã€ç”¨æˆ·åã€‘ä¸èƒ½ä¸ºç©º
2023-03-18 18:47:01.090 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m                  [0;39m Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.jiawa.wiki.resp.CommonResp com.jiawa.wiki.controller.UserController.save(com.jiawa.wiki.req.UserSaveReq) with 2 errors: [Field error in object 'userSaveReq' on field 'loginName': rejected value [null]; codes [NotNull.userSaveReq.loginName,NotNull.loginName,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userSaveReq.loginName,loginName]; arguments []; default message [loginName]]; default message [ã€ç”¨æˆ·åã€‘ä¸èƒ½ä¸ºç©º]] [Field error in object 'userSaveReq' on field 'name': rejected value [null]; codes [NotNull.userSaveReq.name,NotNull.name,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userSaveReq.name,name]; arguments []; default message [name]]; default message [ã€æ˜µç§°ã€‘ä¸èƒ½ä¸ºç©º]] ]
2023-03-18 18:47:01.253 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m18002458097881088 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-18 18:47:01.254 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m18002458097881088 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/save
2023-03-18 18:47:01.254 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m18002458097881088 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š18002446815203328
2023-03-18 18:47:01.255 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m18002458097881088 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"18002446815203328"}
2023-03-18 18:47:01.256 WARN  com.jiawa.wiki.config.ControllerExceptionHandler  :29   [32m18002458097881088 [0;39m å‚æ•°æ ¡éªŒå¤±è´¥ï¼šã€ç”¨æˆ·åã€‘ä¸èƒ½ä¸ºç©º
2023-03-18 18:47:01.258 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m18002458097881088 [0;39m Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.jiawa.wiki.resp.CommonResp com.jiawa.wiki.controller.UserController.save(com.jiawa.wiki.req.UserSaveReq) with 2 errors: [Field error in object 'userSaveReq' on field 'loginName': rejected value [null]; codes [NotNull.userSaveReq.loginName,NotNull.loginName,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userSaveReq.loginName,loginName]; arguments []; default message [loginName]]; default message [ã€ç”¨æˆ·åã€‘ä¸èƒ½ä¸ºç©º]] [Field error in object 'userSaveReq' on field 'name': rejected value [null]; codes [NotNull.userSaveReq.name,NotNull.name,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userSaveReq.name,name]; arguments []; default message [name]]; default message [ã€æ˜µç§°ã€‘ä¸èƒ½ä¸ºç©º]] ]
2023-03-18 18:47:01.412 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m                  [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-18 18:47:01.413 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m                  [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/save
2023-03-18 18:47:01.414 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m                  [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š18002446815203328
2023-03-18 18:47:01.415 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m                  [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"18002446815203328"}
2023-03-18 18:47:01.416 WARN  com.jiawa.wiki.config.ControllerExceptionHandler  :29   [32m                  [0;39m å‚æ•°æ ¡éªŒå¤±è´¥ï¼šã€ç”¨æˆ·åã€‘ä¸èƒ½ä¸ºç©º
2023-03-18 18:47:01.417 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m                  [0;39m Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.jiawa.wiki.resp.CommonResp com.jiawa.wiki.controller.UserController.save(com.jiawa.wiki.req.UserSaveReq) with 2 errors: [Field error in object 'userSaveReq' on field 'loginName': rejected value [null]; codes [NotNull.userSaveReq.loginName,NotNull.loginName,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userSaveReq.loginName,loginName]; arguments []; default message [loginName]]; default message [ã€ç”¨æˆ·åã€‘ä¸èƒ½ä¸ºç©º]] [Field error in object 'userSaveReq' on field 'name': rejected value [null]; codes [NotNull.userSaveReq.name,NotNull.name,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userSaveReq.name,name]; arguments []; default message [name]]; default message [ã€æ˜µç§°ã€‘ä¸èƒ½ä¸ºç©º]] ]
2023-03-18 18:47:01.532 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m                  [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-18 18:47:01.532 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m                  [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/save
2023-03-18 18:47:01.532 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m                  [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š18002446815203328
2023-03-18 18:47:01.533 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m                  [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"18002446815203328"}
2023-03-18 18:47:01.534 WARN  com.jiawa.wiki.config.ControllerExceptionHandler  :29   [32m                  [0;39m å‚æ•°æ ¡éªŒå¤±è´¥ï¼šã€æ˜µç§°ã€‘ä¸èƒ½ä¸ºç©º
2023-03-18 18:47:01.536 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m                  [0;39m Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.jiawa.wiki.resp.CommonResp com.jiawa.wiki.controller.UserController.save(com.jiawa.wiki.req.UserSaveReq) with 2 errors: [Field error in object 'userSaveReq' on field 'name': rejected value [null]; codes [NotNull.userSaveReq.name,NotNull.name,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userSaveReq.name,name]; arguments []; default message [name]]; default message [ã€æ˜µç§°ã€‘ä¸èƒ½ä¸ºç©º]] [Field error in object 'userSaveReq' on field 'loginName': rejected value [null]; codes [NotNull.userSaveReq.loginName,NotNull.loginName,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userSaveReq.loginName,loginName]; arguments []; default message [loginName]]; default message [ã€ç”¨æˆ·åã€‘ä¸èƒ½ä¸ºç©º]] ]
2023-03-18 18:47:02.584 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m18002507787800576 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 18:47:02.585 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m18002507787800576 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-18 18:47:02.585 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m18002507787800576 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-18 18:47:02.585 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m18002507787800576 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 18:47:02.585 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m18002507787800576 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 18:47:02.586 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m18002507787800576 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-18 18:47:02.586 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m18002507787800576 [0;39m ==> Parameters: 
2023-03-18 18:47:02.587 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002507787800576 [0;39m <==    Columns: id, parent, name, sort
2023-03-18 18:47:02.587 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002507787800576 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-18 18:47:02.589 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002507787800576 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-18 18:47:02.589 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002507787800576 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-18 18:47:02.589 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002507787800576 [0;39m <==        Row: 200, 0, Java, 200
2023-03-18 18:47:02.590 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002507787800576 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-18 18:47:02.590 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002507787800576 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-18 18:47:02.590 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002507787800576 [0;39m <==        Row: 300, 0, Python, 300
2023-03-18 18:47:02.590 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002507787800576 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-18 18:47:02.591 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002507787800576 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-18 18:47:02.591 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002507787800576 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-18 18:47:02.591 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002507787800576 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-18 18:47:02.591 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002507787800576 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-18 18:47:02.592 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002507787800576 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-18 18:47:02.592 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002507787800576 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-18 18:47:02.592 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002507787800576 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-18 18:47:02.593 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m18002507787800576 [0;39m <==      Total: 15
2023-03-18 18:47:02.595 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m18002507787800576 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-18 18:47:02.595 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m18002507787800576 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š11 ms -------------
2023-03-18 18:47:02.612 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m18002507905241088 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 18:47:02.613 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m18002507905241088 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-18 18:47:02.613 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m18002507905241088 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-18 18:47:02.613 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m18002507905241088 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 18:47:02.613 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m18002507905241088 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-03-18 18:47:02.614 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002507905241088 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-03-18 18:47:02.615 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002507905241088 [0;39m ==> Parameters: 
2023-03-18 18:47:02.616 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m18002507905241088 [0;39m <==    Columns: count(0)
2023-03-18 18:47:02.616 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m18002507905241088 [0;39m <==        Row: 5
2023-03-18 18:47:02.616 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002507905241088 [0;39m <==      Total: 1
2023-03-18 18:47:02.618 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m18002507905241088 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-03-18 18:47:02.618 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m18002507905241088 [0;39m ==> Parameters: 10(Integer)
2023-03-18 18:47:02.618 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m18002507905241088 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-18 18:47:02.619 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m18002507905241088 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 10, 7
2023-03-18 18:47:02.619 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m18002507905241088 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, 100, 101, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-18 18:47:02.619 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m18002507905241088 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, 300, 301, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-18 18:47:02.619 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m18002507905241088 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, 400, 401, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-18 18:47:02.622 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m18002507905241088 [0;39m <==        Row: 5, Oracle å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-18 18:47:02.623 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m18002507905241088 [0;39m <==      Total: 5
2023-03-18 18:47:02.623 INFO  com.jiawa.wiki.service.EbookService               :48   [32m18002507905241088 [0;39m æ€»è¡Œæ•°ï¼š5
2023-03-18 18:47:02.623 INFO  com.jiawa.wiki.service.EbookService               :49   [32m18002507905241088 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-18 18:47:02.624 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m18002507905241088 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":10,"voteCount":7},{"category1Id":100,"category2Id":101,"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":300,"category2Id":301,"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":5,"name":"Oracle å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-03-18 18:47:02.624 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m18002507905241088 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š12 ms -------------
2023-03-18 18:47:02.965 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:47:03.841 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:47:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18002517954793472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 18:47:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18002517954793472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 18:47:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18002517954793472 [0;39m ==> Parameters: 
2023-03-18 18:47:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18002517954793472 [0;39m <==    Updates: 1
2023-03-18 18:47:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18002517954793472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 18:47:07.069 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:47:10.286 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m18002540092329984 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 18:47:10.286 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m18002540092329984 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-18 18:47:10.286 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m18002540092329984 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-18 18:47:10.286 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m18002540092329984 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 18:47:10.287 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m18002540092329984 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 18:47:10.288 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m18002540092329984 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-18 18:47:10.288 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m18002540092329984 [0;39m ==> Parameters: 
2023-03-18 18:47:10.289 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002540092329984 [0;39m <==    Columns: id, parent, name, sort
2023-03-18 18:47:10.289 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002540092329984 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-18 18:47:10.289 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002540092329984 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-18 18:47:10.290 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002540092329984 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-18 18:47:10.290 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002540092329984 [0;39m <==        Row: 200, 0, Java, 200
2023-03-18 18:47:10.290 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002540092329984 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-18 18:47:10.291 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002540092329984 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-18 18:47:10.291 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002540092329984 [0;39m <==        Row: 300, 0, Python, 300
2023-03-18 18:47:10.291 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002540092329984 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-18 18:47:10.291 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002540092329984 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-18 18:47:10.292 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002540092329984 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-18 18:47:10.292 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002540092329984 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-18 18:47:10.292 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002540092329984 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-18 18:47:10.292 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002540092329984 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-18 18:47:10.292 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002540092329984 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-18 18:47:10.293 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002540092329984 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-18 18:47:10.293 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m18002540092329984 [0;39m <==      Total: 15
2023-03-18 18:47:10.294 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m18002540092329984 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-18 18:47:10.294 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m18002540092329984 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-03-18 18:47:13.138 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m18002446748094464 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-18 18:47:13.139 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m18002446748094464 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š0 ms -------------
2023-03-18 18:47:13.149 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m                  [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-18 18:47:13.149 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m                  [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/category/save
2023-03-18 18:47:13.149 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m                  [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š18002446815203328
2023-03-18 18:47:13.151 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m                  [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"18002446815203328"}
2023-03-18 18:47:13.163 WARN  com.jiawa.wiki.config.ControllerExceptionHandler  :29   [32m                  [0;39m å‚æ•°æ ¡éªŒå¤±è´¥ï¼šã€æŽ’åºã€‘ä¸èƒ½ä¸ºç©º
2023-03-18 18:47:13.164 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m                  [0;39m Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.jiawa.wiki.resp.CommonResp com.jiawa.wiki.controller.CategoryController.save(com.jiawa.wiki.req.CategorySaveReq) with 2 errors: [Field error in object 'categorySaveReq' on field 'sort': rejected value [null]; codes [NotNull.categorySaveReq.sort,NotNull.sort,NotNull.java.lang.Integer,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [categorySaveReq.sort,sort]; arguments []; default message [sort]]; default message [ã€æŽ’åºã€‘ä¸èƒ½ä¸ºç©º]] [Field error in object 'categorySaveReq' on field 'name': rejected value [null]; codes [NotNull.categorySaveReq.name,NotNull.name,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [categorySaveReq.name,name]; arguments []; default message [name]]; default message [ã€åç§°ã€‘ä¸èƒ½ä¸ºç©º]] ]
2023-03-18 18:47:14.705 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m18002458097881088 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-18 18:47:14.705 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m18002458097881088 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/category/save
2023-03-18 18:47:14.706 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m18002458097881088 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š18002446815203328
2023-03-18 18:47:14.707 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m18002458097881088 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"18002446815203328"}
2023-03-18 18:47:14.708 WARN  com.jiawa.wiki.config.ControllerExceptionHandler  :29   [32m18002458097881088 [0;39m å‚æ•°æ ¡éªŒå¤±è´¥ï¼šã€æŽ’åºã€‘ä¸èƒ½ä¸ºç©º
2023-03-18 18:47:14.709 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m18002458097881088 [0;39m Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.jiawa.wiki.resp.CommonResp com.jiawa.wiki.controller.CategoryController.save(com.jiawa.wiki.req.CategorySaveReq) with 2 errors: [Field error in object 'categorySaveReq' on field 'sort': rejected value [null]; codes [NotNull.categorySaveReq.sort,NotNull.sort,NotNull.java.lang.Integer,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [categorySaveReq.sort,sort]; arguments []; default message [sort]]; default message [ã€æŽ’åºã€‘ä¸èƒ½ä¸ºç©º]] [Field error in object 'categorySaveReq' on field 'name': rejected value [null]; codes [NotNull.categorySaveReq.name,NotNull.name,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [categorySaveReq.name,name]; arguments []; default message [name]]; default message [ã€åç§°ã€‘ä¸èƒ½ä¸ºç©º]] ]
2023-03-18 18:47:15.190 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m                  [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-18 18:47:15.191 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m                  [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/category/save
2023-03-18 18:47:15.191 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m                  [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š18002446815203328
2023-03-18 18:47:15.192 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m                  [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"18002446815203328"}
2023-03-18 18:47:15.193 WARN  com.jiawa.wiki.config.ControllerExceptionHandler  :29   [32m                  [0;39m å‚æ•°æ ¡éªŒå¤±è´¥ï¼šã€æŽ’åºã€‘ä¸èƒ½ä¸ºç©º
2023-03-18 18:47:15.195 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m                  [0;39m Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.jiawa.wiki.resp.CommonResp com.jiawa.wiki.controller.CategoryController.save(com.jiawa.wiki.req.CategorySaveReq) with 2 errors: [Field error in object 'categorySaveReq' on field 'sort': rejected value [null]; codes [NotNull.categorySaveReq.sort,NotNull.sort,NotNull.java.lang.Integer,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [categorySaveReq.sort,sort]; arguments []; default message [sort]]; default message [ã€æŽ’åºã€‘ä¸èƒ½ä¸ºç©º]] [Field error in object 'categorySaveReq' on field 'name': rejected value [null]; codes [NotNull.categorySaveReq.name,NotNull.name,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [categorySaveReq.name,name]; arguments []; default message [name]]; default message [ã€åç§°ã€‘ä¸èƒ½ä¸ºç©º]] ]
2023-03-18 18:47:15.584 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m                  [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-18 18:47:15.584 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m                  [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/category/save
2023-03-18 18:47:15.585 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m                  [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š18002446815203328
2023-03-18 18:47:15.586 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m                  [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"18002446815203328"}
2023-03-18 18:47:15.587 WARN  com.jiawa.wiki.config.ControllerExceptionHandler  :29   [32m                  [0;39m å‚æ•°æ ¡éªŒå¤±è´¥ï¼šã€åç§°ã€‘ä¸èƒ½ä¸ºç©º
2023-03-18 18:47:15.588 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m                  [0;39m Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.jiawa.wiki.resp.CommonResp com.jiawa.wiki.controller.CategoryController.save(com.jiawa.wiki.req.CategorySaveReq) with 2 errors: [Field error in object 'categorySaveReq' on field 'name': rejected value [null]; codes [NotNull.categorySaveReq.name,NotNull.name,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [categorySaveReq.name,name]; arguments []; default message [name]]; default message [ã€åç§°ã€‘ä¸èƒ½ä¸ºç©º]] [Field error in object 'categorySaveReq' on field 'sort': rejected value [null]; codes [NotNull.categorySaveReq.sort,NotNull.sort,NotNull.java.lang.Integer,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [categorySaveReq.sort,sort]; arguments []; default message [sort]]; default message [ã€æŽ’åºã€‘ä¸èƒ½ä¸ºç©º]] ]
2023-03-18 18:47:15.964 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m18002376552222721 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-18 18:47:15.964 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m18002376552222721 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/category/save
2023-03-18 18:47:15.964 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m18002376552222721 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š18002446815203328
2023-03-18 18:47:15.966 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m18002376552222721 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"18002446815203328"}
2023-03-18 18:47:15.966 WARN  com.jiawa.wiki.config.ControllerExceptionHandler  :29   [32m18002376552222721 [0;39m å‚æ•°æ ¡éªŒå¤±è´¥ï¼šã€æŽ’åºã€‘ä¸èƒ½ä¸ºç©º
2023-03-18 18:47:15.969 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m18002376552222721 [0;39m Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.jiawa.wiki.resp.CommonResp com.jiawa.wiki.controller.CategoryController.save(com.jiawa.wiki.req.CategorySaveReq) with 2 errors: [Field error in object 'categorySaveReq' on field 'sort': rejected value [null]; codes [NotNull.categorySaveReq.sort,NotNull.sort,NotNull.java.lang.Integer,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [categorySaveReq.sort,sort]; arguments []; default message [sort]]; default message [ã€æŽ’åºã€‘ä¸èƒ½ä¸ºç©º]] [Field error in object 'categorySaveReq' on field 'name': rejected value [null]; codes [NotNull.categorySaveReq.name,NotNull.name,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [categorySaveReq.name,name]; arguments []; default message [name]]; default message [ã€åç§°ã€‘ä¸èƒ½ä¸ºç©º]] ]
2023-03-18 18:47:21.347 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:47:27.650 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m18002612922224640 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 18:47:27.651 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m18002612922224640 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-18 18:47:27.651 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m18002612922224640 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-18 18:47:27.651 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m18002612922224640 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 18:47:27.651 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m18002612922224640 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 18:47:27.652 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m18002612922224640 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-18 18:47:27.652 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m18002612922224640 [0;39m ==> Parameters: 
2023-03-18 18:47:27.654 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002612922224640 [0;39m <==    Columns: id, parent, name, sort
2023-03-18 18:47:27.654 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002612922224640 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-18 18:47:27.654 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002612922224640 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-18 18:47:27.655 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002612922224640 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-18 18:47:27.655 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002612922224640 [0;39m <==        Row: 200, 0, Java, 200
2023-03-18 18:47:27.655 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002612922224640 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-18 18:47:27.655 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002612922224640 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-18 18:47:27.656 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002612922224640 [0;39m <==        Row: 300, 0, Python, 300
2023-03-18 18:47:27.656 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002612922224640 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-18 18:47:27.656 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002612922224640 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-18 18:47:27.656 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002612922224640 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-18 18:47:27.657 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002612922224640 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-18 18:47:27.657 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002612922224640 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-18 18:47:27.657 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002612922224640 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-18 18:47:27.657 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002612922224640 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-18 18:47:27.657 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002612922224640 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-18 18:47:27.658 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m18002612922224640 [0;39m <==      Total: 15
2023-03-18 18:47:27.659 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m18002612922224640 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-18 18:47:27.659 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m18002612922224640 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2023-03-18 18:47:27.681 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m18002613052248064 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 18:47:27.682 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m18002613052248064 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-18 18:47:27.682 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m18002613052248064 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-18 18:47:27.682 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m18002613052248064 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 18:47:27.682 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m18002613052248064 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-03-18 18:47:27.684 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002613052248064 [0;39m ==>  Preparing: SELECT count(0) FROM ebook
2023-03-18 18:47:27.684 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002613052248064 [0;39m ==> Parameters: 
2023-03-18 18:47:27.684 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m18002613052248064 [0;39m <==    Columns: count(0)
2023-03-18 18:47:27.685 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m18002613052248064 [0;39m <==        Row: 5
2023-03-18 18:47:27.685 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002613052248064 [0;39m <==      Total: 1
2023-03-18 18:47:27.685 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m18002613052248064 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2023-03-18 18:47:27.685 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m18002613052248064 [0;39m ==> Parameters: 10(Integer)
2023-03-18 18:47:27.686 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m18002613052248064 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-18 18:47:27.686 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m18002613052248064 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 10, 7
2023-03-18 18:47:27.686 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m18002613052248064 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, 100, 101, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-18 18:47:27.686 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m18002613052248064 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, 300, 301, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-18 18:47:27.687 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m18002613052248064 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, 400, 401, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-18 18:47:27.687 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m18002613052248064 [0;39m <==        Row: 5, Oracle å…¥é—¨æ•™ç¨‹, null, null, é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-18 18:47:27.687 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m18002613052248064 [0;39m <==      Total: 5
2023-03-18 18:47:27.687 INFO  com.jiawa.wiki.service.EbookService               :48   [32m18002613052248064 [0;39m æ€»è¡Œæ•°ï¼š5
2023-03-18 18:47:27.687 INFO  com.jiawa.wiki.service.EbookService               :49   [32m18002613052248064 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-18 18:47:27.687 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m18002613052248064 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":10,"voteCount":7},{"category1Id":100,"category2Id":101,"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":300,"category2Id":301,"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0},{"description":"é›¶åŸºç¡€å…¥é—¨ Oracle å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":5,"name":"Oracle å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":5},"success":true}
2023-03-18 18:47:27.687 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m18002613052248064 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-03-18 18:47:32.454 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m18002446748094464 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-18 18:47:32.455 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m18002446748094464 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š0 ms -------------
2023-03-18 18:47:32.457 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m                  [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-18 18:47:32.457 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m                  [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/ebook/save
2023-03-18 18:47:32.457 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m                  [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š18002446815203328
2023-03-18 18:47:32.458 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m                  [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"18002446815203328"}
2023-03-18 18:47:32.466 WARN  com.jiawa.wiki.config.ControllerExceptionHandler  :29   [32m                  [0;39m å‚æ•°æ ¡éªŒå¤±è´¥ï¼šã€åç§°ã€‘ä¸èƒ½ä¸ºç©º
2023-03-18 18:47:32.467 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :207  [32m                  [0;39m Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.jiawa.wiki.resp.CommonResp com.jiawa.wiki.controller.EbookController.save(com.jiawa.wiki.req.EbookSaveReq): [Field error in object 'ebookSaveReq' on field 'name': rejected value [null]; codes [NotNull.ebookSaveReq.name,NotNull.name,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [ebookSaveReq.name,name]; arguments []; default message [name]]; default message [ã€åç§°ã€‘ä¸èƒ½ä¸ºç©º]] ]
2023-03-18 18:47:32.978 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:47:33.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:47:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18002643779719168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 18:47:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18002643779719168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 18:47:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18002643779719168 [0;39m ==> Parameters: 
2023-03-18 18:47:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18002643779719168 [0;39m <==    Updates: 1
2023-03-18 18:47:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18002643779719168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 18:47:35.022 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:47:37.072 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:47:40.710 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :32   [32m18002458097881088 [0;39m ------------- LoginInterceptor å¼€å§‹ -------------
2023-03-18 18:47:40.710 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :43   [32m18002458097881088 [0;39m æŽ¥å£ç™»å½•æ‹¦æˆªï¼šï¼Œpathï¼šhttp://127.0.0.1:8880/user/list
2023-03-18 18:47:40.710 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :47   [32m18002458097881088 [0;39m ç™»å½•æ ¡éªŒå¼€å§‹ï¼Œtokenï¼š18002446815203328
2023-03-18 18:47:40.711 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :59   [32m18002458097881088 [0;39m å·²ç™»å½•ï¼š{"id":1,"loginName":"test","name":"æµ‹è¯•","token":"18002446815203328"}
2023-03-18 18:47:40.711 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m18002667704029184 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 18:47:40.711 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m18002667704029184 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/user/list GET
2023-03-18 18:47:40.711 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m18002667704029184 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.UserController.list
2023-03-18 18:47:40.712 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m18002667704029184 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 18:47:40.712 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m18002667704029184 [0;39m è¯·æ±‚å‚æ•°: [{"page":1,"size":10}]
2023-03-18 18:47:40.714 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m18002667704029184 [0;39m ==>  Preparing: SELECT count(0) FROM user
2023-03-18 18:47:40.714 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m18002667704029184 [0;39m ==> Parameters: 
2023-03-18 18:47:40.715 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m18002667704029184 [0;39m <==    Columns: count(0)
2023-03-18 18:47:40.715 TRACE c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :143  [32m18002667704029184 [0;39m <==        Row: 1
2023-03-18 18:47:40.715 DEBUG c.j.wiki.mapper.UserMapper.selectByExample_COUNT  :137  [32m18002667704029184 [0;39m <==      Total: 1
2023-03-18 18:47:40.716 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m18002667704029184 [0;39m ==>  Preparing: select id, login_name, `name`, `password` from user LIMIT ?
2023-03-18 18:47:40.716 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m18002667704029184 [0;39m ==> Parameters: 10(Integer)
2023-03-18 18:47:40.717 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m18002667704029184 [0;39m <==    Columns: id, login_name, name, password
2023-03-18 18:47:40.717 TRACE com.jiawa.wiki.mapper.UserMapper.selectByExample  :143  [32m18002667704029184 [0;39m <==        Row: 1, test, æµ‹è¯•, e70e2222a9d67c4f2eae107533359aa4
2023-03-18 18:47:40.717 DEBUG com.jiawa.wiki.mapper.UserMapper.selectByExample  :137  [32m18002667704029184 [0;39m <==      Total: 1
2023-03-18 18:47:40.718 INFO  com.jiawa.wiki.service.UserService                :49   [32m18002667704029184 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-18 18:47:40.718 INFO  com.jiawa.wiki.service.UserService                :50   [32m18002667704029184 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-18 18:47:40.718 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m18002667704029184 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"id":1,"loginName":"test","name":"æµ‹è¯•"}],"total":1},"success":true}
2023-03-18 18:47:40.718 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m18002667704029184 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-03-18 18:47:40.719 INFO  com.jiawa.wiki.interceptor.LoginInterceptor       :68   [32m18002667704029184 [0;39m ------------- LoginInterceptor ç»“æŸ è€—æ—¶ï¼š9 ms -------------
2023-03-18 18:47:41.545 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m18002671202078720 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 18:47:41.546 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m18002671202078720 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-18 18:47:41.546 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m18002671202078720 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-18 18:47:41.546 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m18002671202078720 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 18:47:41.546 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m18002671202078720 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 18:47:41.547 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m18002671202078720 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-18 18:47:41.547 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m18002671202078720 [0;39m ==> Parameters: 
2023-03-18 18:47:41.548 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002671202078720 [0;39m <==    Columns: id, parent, name, sort
2023-03-18 18:47:41.548 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002671202078720 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-18 18:47:41.548 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002671202078720 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-18 18:47:41.549 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002671202078720 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-18 18:47:41.549 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002671202078720 [0;39m <==        Row: 200, 0, Java, 200
2023-03-18 18:47:41.549 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002671202078720 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-18 18:47:41.549 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002671202078720 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-18 18:47:41.550 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002671202078720 [0;39m <==        Row: 300, 0, Python, 300
2023-03-18 18:47:41.550 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002671202078720 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-18 18:47:41.550 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002671202078720 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-18 18:47:41.550 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002671202078720 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-18 18:47:41.551 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002671202078720 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-18 18:47:41.551 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002671202078720 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-18 18:47:41.551 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002671202078720 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-18 18:47:41.551 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002671202078720 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-18 18:47:41.551 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002671202078720 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-18 18:47:41.551 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m18002671202078720 [0;39m <==      Total: 15
2023-03-18 18:47:41.552 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m18002671202078720 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-18 18:47:41.553 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m18002671202078720 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-03-18 18:47:42.245 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m18002674138091520 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 18:47:42.245 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m18002674138091521 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 18:47:42.245 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m18002674138091520 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-18 18:47:42.245 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m18002674138091521 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-03-18 18:47:42.245 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m18002674138091520 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-18 18:47:42.245 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m18002674138091521 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-03-18 18:47:42.245 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m18002674138091520 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 18:47:42.245 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m18002674138091521 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 18:47:42.245 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m18002674138091520 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 18:47:42.246 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m18002674138091521 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 18:47:42.246 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m18002674142285824 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 18:47:42.246 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m18002674142285824 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-03-18 18:47:42.246 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m18002674138091521 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-18 18:47:42.247 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m18002674142285824 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-03-18 18:47:42.247 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m18002674142285824 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 18:47:42.247 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m18002674138091521 [0;39m ==> Parameters: 
2023-03-18 18:47:42.247 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m18002674138091520 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-18 18:47:42.247 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m18002674142285824 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 18:47:42.247 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m18002674138091520 [0;39m ==> Parameters: 
2023-03-18 18:47:42.247 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m18002674142285824 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-18 18:47:42.248 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m18002674142285824 [0;39m ==> Parameters: 
2023-03-18 18:47:42.248 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m18002674138091521 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-03-18 18:47:42.248 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m18002674138091521 [0;39m <==        Row: 2023-03-18, 10, 7, 10, 7
2023-03-18 18:47:42.248 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002674138091520 [0;39m <==    Columns: id, parent, name, sort
2023-03-18 18:47:42.248 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002674138091520 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-18 18:47:42.249 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m18002674138091521 [0;39m <==      Total: 1
2023-03-18 18:47:42.249 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m18002674142285824 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-03-18 18:47:42.249 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002674138091520 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-18 18:47:42.249 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m18002674142285824 [0;39m <==        Row: 2023-03-02, 0, 0
2023-03-18 18:47:42.249 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m18002674138091521 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1679068800000,"viewCount":10,"viewIncrease":10,"voteCount":7,"voteIncrease":7}],"success":true}
2023-03-18 18:47:42.249 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002674138091520 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-18 18:47:42.249 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m18002674138091521 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-03-18 18:47:42.249 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002674138091520 [0;39m <==        Row: 200, 0, Java, 200
2023-03-18 18:47:42.249 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m18002674142285824 [0;39m <==        Row: 2023-03-05, 8, 5
2023-03-18 18:47:42.249 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002674138091520 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-18 18:47:42.250 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m18002674142285824 [0;39m <==        Row: 2023-03-06, 1, 1
2023-03-18 18:47:42.250 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m18002674142285824 [0;39m <==      Total: 3
2023-03-18 18:47:42.250 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002674138091520 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-18 18:47:42.250 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002674138091520 [0;39m <==        Row: 300, 0, Python, 300
2023-03-18 18:47:42.250 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m18002674142285824 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1677945600000,"viewCount":0,"viewIncrease":8,"voteCount":0,"voteIncrease":5},{"date":1678032000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":1}],"success":true}
2023-03-18 18:47:42.250 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m18002674142285824 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-03-18 18:47:42.250 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002674138091520 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-18 18:47:42.250 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002674138091520 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-18 18:47:42.251 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002674138091520 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-18 18:47:42.251 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002674138091520 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-18 18:47:42.252 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002674138091520 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-18 18:47:42.252 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002674138091520 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-18 18:47:42.252 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002674138091520 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-18 18:47:42.252 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18002674138091520 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-18 18:47:42.253 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m18002674138091520 [0;39m <==      Total: 15
2023-03-18 18:47:42.253 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m18002674138091520 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-18 18:47:42.253 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m18002674138091520 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-03-18 18:47:44.524 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m18002683696910336 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 18:47:44.524 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m18002683696910336 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-18 18:47:44.524 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m18002683696910336 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-18 18:47:44.524 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m18002683696910336 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 18:47:44.524 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m18002683696910336 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":101,"page":1,"size":1000}]
2023-03-18 18:47:44.527 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002683696910336 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-18 18:47:44.527 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002683696910336 [0;39m ==> Parameters: 101(Long)
2023-03-18 18:47:44.528 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m18002683696910336 [0;39m <==    Columns: count(0)
2023-03-18 18:47:44.528 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m18002683696910336 [0;39m <==        Row: 1
2023-03-18 18:47:44.528 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002683696910336 [0;39m <==      Total: 1
2023-03-18 18:47:44.529 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m18002683696910336 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-03-18 18:47:44.529 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m18002683696910336 [0;39m ==> Parameters: 101(Long), 1000(Integer)
2023-03-18 18:47:44.530 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m18002683696910336 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-18 18:47:44.530 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m18002683696910336 [0;39m <==        Row: 2, Vue å…¥é—¨æ•™ç¨‹, 100, 101, é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-18 18:47:44.530 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m18002683696910336 [0;39m <==      Total: 1
2023-03-18 18:47:44.531 INFO  com.jiawa.wiki.service.EbookService               :48   [32m18002683696910336 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-18 18:47:44.531 INFO  com.jiawa.wiki.service.EbookService               :49   [32m18002683696910336 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-18 18:47:44.531 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m18002683696910336 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":100,"category2Id":101,"description":"é›¶åŸºç¡€å…¥é—¨ Vue å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":2,"name":"Vue å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":1},"success":true}
2023-03-18 18:47:44.531 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m18002683696910336 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š7 ms -------------
2023-03-18 18:47:45.457 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:47:48.856 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m18002701866635264 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 18:47:48.857 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m18002701866635264 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-18 18:47:48.857 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m18002701866635264 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-18 18:47:48.857 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m18002701866635264 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 18:47:48.857 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m18002701866635264 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":201,"page":1,"size":1000}]
2023-03-18 18:47:48.859 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002701866635264 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-18 18:47:48.860 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002701866635264 [0;39m ==> Parameters: 201(Long)
2023-03-18 18:47:48.861 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m18002701866635264 [0;39m <==    Columns: count(0)
2023-03-18 18:47:48.861 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m18002701866635264 [0;39m <==        Row: 0
2023-03-18 18:47:48.861 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002701866635264 [0;39m <==      Total: 1
2023-03-18 18:47:48.861 INFO  com.jiawa.wiki.service.EbookService               :48   [32m18002701866635264 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-18 18:47:48.862 INFO  com.jiawa.wiki.service.EbookService               :49   [32m18002701866635264 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-18 18:47:48.862 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m18002701866635264 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-18 18:47:48.862 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m18002701866635264 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-03-18 18:47:49.923 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m18002706341957632 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 18:47:49.923 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m18002706341957632 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-18 18:47:49.923 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m18002706341957632 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-18 18:47:49.923 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m18002706341957632 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 18:47:49.924 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m18002706341957632 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":202,"page":1,"size":1000}]
2023-03-18 18:47:49.926 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002706341957632 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-18 18:47:49.926 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002706341957632 [0;39m ==> Parameters: 202(Long)
2023-03-18 18:47:49.926 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m18002706341957632 [0;39m <==    Columns: count(0)
2023-03-18 18:47:49.928 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m18002706341957632 [0;39m <==        Row: 1
2023-03-18 18:47:49.928 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002706341957632 [0;39m <==      Total: 1
2023-03-18 18:47:49.928 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m18002706341957632 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-03-18 18:47:49.928 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m18002706341957632 [0;39m ==> Parameters: 202(Long), 1000(Integer)
2023-03-18 18:47:49.929 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m18002706341957632 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-18 18:47:49.929 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m18002706341957632 [0;39m <==        Row: 1, Spring Boot å…¥é—¨æ•™ç¨‹, 200, 202, é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 6, 10, 7
2023-03-18 18:47:49.929 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m18002706341957632 [0;39m <==      Total: 1
2023-03-18 18:47:49.929 INFO  com.jiawa.wiki.service.EbookService               :48   [32m18002706341957632 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-18 18:47:49.929 INFO  com.jiawa.wiki.service.EbookService               :49   [32m18002706341957632 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-18 18:47:49.929 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m18002706341957632 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":200,"category2Id":202,"description":"é›¶åŸºç¡€å…¥é—¨ Java å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":6,"id":1,"name":"Spring Boot å…¥é—¨æ•™ç¨‹","viewCount":10,"voteCount":7}],"total":1},"success":true}
2023-03-18 18:47:49.929 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m18002706341957632 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š6 ms -------------
2023-03-18 18:47:50.627 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m18002709294747648 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 18:47:50.628 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m18002709294747648 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-18 18:47:50.628 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m18002709294747648 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-18 18:47:50.628 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m18002709294747648 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 18:47:50.628 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m18002709294747648 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":301,"page":1,"size":1000}]
2023-03-18 18:47:50.634 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002709294747648 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-18 18:47:50.634 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002709294747648 [0;39m ==> Parameters: 301(Long)
2023-03-18 18:47:50.635 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m18002709294747648 [0;39m <==    Columns: count(0)
2023-03-18 18:47:50.635 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m18002709294747648 [0;39m <==        Row: 1
2023-03-18 18:47:50.635 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002709294747648 [0;39m <==      Total: 1
2023-03-18 18:47:50.636 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m18002709294747648 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-03-18 18:47:50.636 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m18002709294747648 [0;39m ==> Parameters: 301(Long), 1000(Integer)
2023-03-18 18:47:50.636 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m18002709294747648 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-18 18:47:50.636 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m18002709294747648 [0;39m <==        Row: 3, Python å…¥é—¨æ•™ç¨‹, 300, 301, é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-18 18:47:50.637 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m18002709294747648 [0;39m <==      Total: 1
2023-03-18 18:47:50.637 INFO  com.jiawa.wiki.service.EbookService               :48   [32m18002709294747648 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-18 18:47:50.637 INFO  com.jiawa.wiki.service.EbookService               :49   [32m18002709294747648 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-18 18:47:50.637 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m18002709294747648 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":300,"category2Id":301,"description":"é›¶åŸºç¡€å…¥é—¨ Python å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":3,"name":"Python å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":1},"success":true}
2023-03-18 18:47:50.638 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m18002709294747648 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š11 ms -------------
2023-03-18 18:47:51.097 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m18002711266070528 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 18:47:51.097 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m18002711266070528 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-18 18:47:51.097 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m18002711266070528 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-18 18:47:51.097 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m18002711266070528 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 18:47:51.097 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m18002711266070528 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":302,"page":1,"size":1000}]
2023-03-18 18:47:51.099 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002711266070528 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-18 18:47:51.099 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002711266070528 [0;39m ==> Parameters: 302(Long)
2023-03-18 18:47:51.099 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m18002711266070528 [0;39m <==    Columns: count(0)
2023-03-18 18:47:51.101 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m18002711266070528 [0;39m <==        Row: 0
2023-03-18 18:47:51.101 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002711266070528 [0;39m <==      Total: 1
2023-03-18 18:47:51.101 INFO  com.jiawa.wiki.service.EbookService               :48   [32m18002711266070528 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-18 18:47:51.101 INFO  com.jiawa.wiki.service.EbookService               :49   [32m18002711266070528 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-18 18:47:51.101 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m18002711266070528 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-18 18:47:51.101 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m18002711266070528 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-03-18 18:47:51.792 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m18002714181111808 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 18:47:51.792 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m18002714181111808 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-18 18:47:51.793 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m18002714181111808 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-18 18:47:51.793 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m18002714181111808 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 18:47:51.793 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m18002714181111808 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":401,"page":1,"size":1000}]
2023-03-18 18:47:51.795 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002714181111808 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-18 18:47:51.795 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002714181111808 [0;39m ==> Parameters: 401(Long)
2023-03-18 18:47:51.796 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m18002714181111808 [0;39m <==    Columns: count(0)
2023-03-18 18:47:51.796 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m18002714181111808 [0;39m <==        Row: 1
2023-03-18 18:47:51.796 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002714181111808 [0;39m <==      Total: 1
2023-03-18 18:47:51.798 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m18002714181111808 [0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2023-03-18 18:47:51.798 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m18002714181111808 [0;39m ==> Parameters: 401(Long), 1000(Integer)
2023-03-18 18:47:51.798 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m18002714181111808 [0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2023-03-18 18:47:51.798 TRACE com.jiawa.wiki.mapper.EbookMapper.selectByExample :143  [32m18002714181111808 [0;39m <==        Row: 4, Mysql å…¥é—¨æ•™ç¨‹, 400, 401, é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶, null, 0, 0, 0
2023-03-18 18:47:51.799 DEBUG com.jiawa.wiki.mapper.EbookMapper.selectByExample :137  [32m18002714181111808 [0;39m <==      Total: 1
2023-03-18 18:47:51.799 INFO  com.jiawa.wiki.service.EbookService               :48   [32m18002714181111808 [0;39m æ€»è¡Œæ•°ï¼š1
2023-03-18 18:47:51.799 INFO  com.jiawa.wiki.service.EbookService               :49   [32m18002714181111808 [0;39m æ€»é¡µæ•°ï¼š1
2023-03-18 18:47:51.800 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m18002714181111808 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[{"category1Id":400,"category2Id":401,"description":"é›¶åŸºç¡€å…¥é—¨ Mysql å¼€å‘ï¼Œä¼ä¸šçº§åº”ç”¨å¼€å‘æœ€ä½³é¦–é€‰æ¡†æž¶","docCount":0,"id":4,"name":"Mysql å…¥é—¨æ•™ç¨‹","viewCount":0,"voteCount":0}],"total":1},"success":true}
2023-03-18 18:47:51.800 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m18002714181111808 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-03-18 18:47:52.212 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m18002715942719488 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 18:47:52.213 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m18002715942719488 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-18 18:47:52.213 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m18002715942719488 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-18 18:47:52.213 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m18002715942719488 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 18:47:52.213 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m18002715942719488 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":501,"page":1,"size":1000}]
2023-03-18 18:47:52.214 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002715942719488 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-18 18:47:52.214 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002715942719488 [0;39m ==> Parameters: 501(Long)
2023-03-18 18:47:52.219 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m18002715942719488 [0;39m <==    Columns: count(0)
2023-03-18 18:47:52.219 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m18002715942719488 [0;39m <==        Row: 0
2023-03-18 18:47:52.219 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002715942719488 [0;39m <==      Total: 1
2023-03-18 18:47:52.220 INFO  com.jiawa.wiki.service.EbookService               :48   [32m18002715942719488 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-18 18:47:52.220 INFO  com.jiawa.wiki.service.EbookService               :49   [32m18002715942719488 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-18 18:47:52.220 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m18002715942719488 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-18 18:47:52.220 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m18002715942719488 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š8 ms -------------
2023-03-18 18:47:54.567 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m18002725820305408 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 18:47:54.567 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m18002725820305408 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-18 18:47:54.567 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m18002725820305408 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-18 18:47:54.567 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m18002725820305408 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 18:47:54.567 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m18002725820305408 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":502,"page":1,"size":1000}]
2023-03-18 18:47:54.568 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002725820305408 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-18 18:47:54.568 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002725820305408 [0;39m ==> Parameters: 502(Long)
2023-03-18 18:47:54.569 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m18002725820305408 [0;39m <==    Columns: count(0)
2023-03-18 18:47:54.569 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m18002725820305408 [0;39m <==        Row: 0
2023-03-18 18:47:54.569 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002725820305408 [0;39m <==      Total: 1
2023-03-18 18:47:54.569 INFO  com.jiawa.wiki.service.EbookService               :48   [32m18002725820305408 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-18 18:47:54.569 INFO  com.jiawa.wiki.service.EbookService               :49   [32m18002725820305408 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-18 18:47:54.569 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m18002725820305408 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-18 18:47:54.570 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m18002725820305408 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-03-18 18:47:54.844 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m18002726982127616 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 18:47:54.844 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m18002726982127616 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook/list GET
2023-03-18 18:47:54.844 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m18002726982127616 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookController.list
2023-03-18 18:47:54.844 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m18002726982127616 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 18:47:54.845 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m18002726982127616 [0;39m è¯·æ±‚å‚æ•°: [{"categoryId2":503,"page":1,"size":1000}]
2023-03-18 18:47:54.847 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002726982127616 [0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2023-03-18 18:47:54.847 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002726982127616 [0;39m ==> Parameters: 503(Long)
2023-03-18 18:47:54.847 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m18002726982127616 [0;39m <==    Columns: count(0)
2023-03-18 18:47:54.847 TRACE c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :143  [32m18002726982127616 [0;39m <==        Row: 0
2023-03-18 18:47:54.848 DEBUG c.j.wiki.mapper.EbookMapper.selectByExample_COUNT :137  [32m18002726982127616 [0;39m <==      Total: 1
2023-03-18 18:47:54.848 INFO  com.jiawa.wiki.service.EbookService               :48   [32m18002726982127616 [0;39m æ€»è¡Œæ•°ï¼š0
2023-03-18 18:47:54.848 INFO  com.jiawa.wiki.service.EbookService               :49   [32m18002726982127616 [0;39m æ€»é¡µæ•°ï¼š0
2023-03-18 18:47:54.848 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m18002726982127616 [0;39m è¿”å›žç»“æžœ: {"content":{"list":[],"total":0},"success":true}
2023-03-18 18:47:54.848 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m18002726982127616 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-03-18 18:48:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18002748645707776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 18:48:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18002748645707776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 18:48:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18002748645707776 [0;39m ==> Parameters: 
2023-03-18 18:48:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18002748645707776 [0;39m <==    Updates: 0
2023-03-18 18:48:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18002748645707776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 18:48:02.963 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:48:03.870 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:48:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18002769583673344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 18:48:05.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18002769583673344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 18:48:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18002769583673344 [0;39m ==> Parameters: 
2023-03-18 18:48:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18002769583673344 [0;39m <==    Updates: 1
2023-03-18 18:48:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18002769583673344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 18:48:07.021 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:48:09.039 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:48:11.086 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:48:33.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:48:34.993 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:48:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18002895446347776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 18:48:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18002895446347776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 18:48:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18002895446347776 [0;39m ==> Parameters: 
2023-03-18 18:48:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18002895446347776 [0;39m <==    Updates: 1
2023-03-18 18:48:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18002895446347776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 18:48:37.025 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:48:39.071 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:49:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18003000312336384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 18:49:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18003000312336384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 18:49:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18003000312336384 [0;39m ==> Parameters: 
2023-03-18 18:49:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18003000312336384 [0;39m <==    Updates: 0
2023-03-18 18:49:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18003000312336384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 18:49:01.104 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:49:03.136 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:49:03.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:49:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18003021267079168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 18:49:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18003021267079168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 18:49:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18003021267079168 [0;39m ==> Parameters: 
2023-03-18 18:49:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18003021267079168 [0;39m <==    Updates: 1
2023-03-18 18:49:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18003021267079168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 18:49:07.185 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:49:09.211 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:49:25.184 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:49:27.220 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:49:33.858 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:49:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18003147104587776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 18:49:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18003147104587776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 18:49:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18003147104587776 [0;39m ==> Parameters: 
2023-03-18 18:49:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18003147104587776 [0;39m <==    Updates: 1
2023-03-18 18:49:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18003147104587776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-18 18:49:37.074 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:49:51.289 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:50:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18003251928633344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 18:50:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18003251928633344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 18:50:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18003251928633344 [0;39m ==> Parameters: 
2023-03-18 18:50:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18003251928633344 [0;39m <==    Updates: 0
2023-03-18 18:50:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18003251928633344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 18:50:02.970 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:50:03.858 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:50:04.999 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:50:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18003272954679296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 18:50:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18003272954679296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 18:50:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18003272954679296 [0;39m ==> Parameters: 
2023-03-18 18:50:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18003272954679296 [0;39m <==    Updates: 1
2023-03-18 18:50:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18003272954679296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 18:50:07.048 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:50:15.351 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:50:33.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:50:34.991 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:50:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18003398750244864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 18:50:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18003398750244864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 18:50:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18003398750244864 [0;39m ==> Parameters: 
2023-03-18 18:50:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18003398750244864 [0;39m <==    Updates: 1
2023-03-18 18:50:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18003398750244864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 18:50:37.011 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:50:39.038 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:50:41.080 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:51:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18003503599456256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 18:51:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18003503599456256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 18:51:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18003503599456256 [0;39m ==> Parameters: 
2023-03-18 18:51:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18003503599456256 [0;39m <==    Updates: 0
2023-03-18 18:51:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18003503599456256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-18 18:51:02.953 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:51:03.862 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:51:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18003524566781952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 18:51:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18003524566781952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 18:51:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18003524566781952 [0;39m ==> Parameters: 
2023-03-18 18:51:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18003524566781952 [0;39m <==    Updates: 1
2023-03-18 18:51:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18003524566781952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 18:51:07.019 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:51:09.037 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:51:31.092 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:51:33.143 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:51:33.858 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:51:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18003650391707648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 18:51:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18003650391707648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 18:51:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18003650391707648 [0;39m ==> Parameters: 
2023-03-18 18:51:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18003650391707648 [0;39m <==    Updates: 1
2023-03-18 18:51:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18003650391707648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 18:51:37.235 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:51:39.282 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:51:55.193 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:51:57.215 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:52:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18003755249307648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 18:52:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18003755249307648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 18:52:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18003755249307648 [0;39m ==> Parameters: 
2023-03-18 18:52:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18003755249307648 [0;39m <==    Updates: 0
2023-03-18 18:52:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18003755249307648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 18:52:02.964 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:52:03.870 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:52:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18003776233410560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 18:52:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18003776233410560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 18:52:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18003776233410560 [0;39m ==> Parameters: 
2023-03-18 18:52:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18003776233410560 [0;39m <==    Updates: 1
2023-03-18 18:52:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18003776233410560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 18:52:07.070 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:52:19.260 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:52:21.279 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:52:32.982 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:52:33.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:52:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18003902079307776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 18:52:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18003902079307776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 18:52:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18003902079307776 [0;39m ==> Parameters: 
2023-03-18 18:52:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18003902079307776 [0;39m <==    Updates: 1
2023-03-18 18:52:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18003902079307776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 18:52:35.026 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:52:37.061 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:52:43.325 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:52:45.374 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:53:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18004006924324864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 18:53:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18004006924324864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 18:53:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18004006924324864 [0;39m ==> Parameters: 
2023-03-18 18:53:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18004006924324864 [0;39m <==    Updates: 0
2023-03-18 18:53:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18004006924324864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 18:53:03.864 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:53:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18004027891650560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 18:53:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18004027891650560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 18:53:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18004027891650560 [0;39m ==> Parameters: 
2023-03-18 18:53:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18004027891650560 [0;39m <==    Updates: 1
2023-03-18 18:53:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18004027891650560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 18:53:07.043 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:53:11.105 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:53:32.951 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:53:33.853 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:53:34.997 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:53:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18004153750130688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 18:53:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18004153750130688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 18:53:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18004153750130688 [0;39m ==> Parameters: 
2023-03-18 18:53:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18004153750130688 [0;39m <==    Updates: 1
2023-03-18 18:53:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18004153750130688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 18:53:37.041 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:53:39.057 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:54:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18004258599342080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 18:54:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18004258599342080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 18:54:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18004258599342080 [0;39m ==> Parameters: 
2023-03-18 18:54:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18004258599342080 [0;39m <==    Updates: 0
2023-03-18 18:54:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18004258599342080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 18:54:01.102 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:54:03.148 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:54:03.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:54:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18004279558279168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 18:54:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18004279558279168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 18:54:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18004279558279168 [0;39m ==> Parameters: 
2023-03-18 18:54:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18004279558279168 [0;39m <==    Updates: 1
2023-03-18 18:54:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18004279558279168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 18:54:05.195 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:54:09.259 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:54:25.184 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:54:27.209 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:54:32.962 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:54:33.853 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:54:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18004405391593472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 18:54:35.009 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:54:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18004405391593472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 18:54:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18004405391593472 [0;39m ==> Parameters: 
2023-03-18 18:54:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18004405391593472 [0;39m <==    Updates: 1
2023-03-18 18:54:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18004405391593472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-18 18:54:37.052 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:54:51.262 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:55:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18004510244999168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 18:55:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18004510244999168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 18:55:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18004510244999168 [0;39m ==> Parameters: 
2023-03-18 18:55:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18004510244999168 [0;39m <==    Updates: 0
2023-03-18 18:55:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18004510244999168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-18 18:55:02.977 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:55:03.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:55:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18004531220713472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 18:55:05.009 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:55:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18004531220713472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 18:55:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18004531220713472 [0;39m ==> Parameters: 
2023-03-18 18:55:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18004531220713472 [0;39m <==    Updates: 1
2023-03-18 18:55:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18004531220713472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 18:55:07.023 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:55:13.319 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:55:15.353 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:55:32.975 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:55:33.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:55:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18004657045639168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 18:55:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18004657045639168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 18:55:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18004657045639168 [0;39m ==> Parameters: 
2023-03-18 18:55:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18004657045639168 [0;39m <==    Updates: 1
2023-03-18 18:55:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18004657045639168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 18:55:37.008 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:55:39.038 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:55:41.069 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:56:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18004761903239168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 18:56:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18004761903239168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 18:56:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18004761903239168 [0;39m ==> Parameters: 
2023-03-18 18:56:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18004761903239168 [0;39m <==    Updates: 0
2023-03-18 18:56:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18004761903239168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-18 18:56:02.961 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:56:03.836 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:56:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18004782870564864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 18:56:05.006 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:56:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18004782870564864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 18:56:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18004782870564864 [0;39m ==> Parameters: 
2023-03-18 18:56:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18004782870564864 [0;39m <==    Updates: 1
2023-03-18 18:56:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18004782870564864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 18:56:07.040 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:56:09.073 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:56:31.119 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:56:33.148 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:56:33.848 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:56:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18004908703879168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 18:56:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18004908703879168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 18:56:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18004908703879168 [0;39m ==> Parameters: 
2023-03-18 18:56:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18004908703879168 [0;39m <==    Updates: 1
2023-03-18 18:56:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18004908703879168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 18:56:35.179 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:56:37.212 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:56:39.242 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:56:55.206 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:56:57.234 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:57:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18005013578256384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 18:57:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18005013578256384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 18:57:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18005013578256384 [0;39m ==> Parameters: 
2023-03-18 18:57:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18005013578256384 [0;39m <==    Updates: 0
2023-03-18 18:57:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18005013578256384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 18:57:02.968 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:57:03.832 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:57:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18005034516221952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 18:57:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18005034516221952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 18:57:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18005034516221952 [0;39m ==> Parameters: 
2023-03-18 18:57:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18005034516221952 [0;39m <==    Updates: 1
2023-03-18 18:57:05.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18005034516221952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-18 18:57:07.043 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:57:21.314 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:57:32.933 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:57:33.856 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:57:34.978 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:57:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18005160370507776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 18:57:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18005160370507776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 18:57:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18005160370507776 [0;39m ==> Parameters: 
2023-03-18 18:57:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18005160370507776 [0;39m <==    Updates: 1
2023-03-18 18:57:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18005160370507776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 18:57:37.010 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:57:43.373 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:57:45.401 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:58:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18005265223913472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 18:58:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18005265223913472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 18:58:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18005265223913472 [0;39m ==> Parameters: 
2023-03-18 18:58:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18005265223913472 [0;39m <==    Updates: 0
2023-03-18 18:58:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18005265223913472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 18:58:02.976 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:58:03.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:58:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18005286220599296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 18:58:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18005286220599296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 18:58:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18005286220599296 [0;39m ==> Parameters: 
2023-03-18 18:58:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18005286220599296 [0;39m <==    Updates: 1
2023-03-18 18:58:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18005286220599296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 18:58:05.030 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:58:07.058 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:58:09.103 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:58:11.132 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:58:32.983 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:58:33.866 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:58:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18005412003581952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 18:58:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18005412003581952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 18:58:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18005412003581952 [0;39m ==> Parameters: 
2023-03-18 18:58:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18005412003581952 [0;39m <==    Updates: 1
2023-03-18 18:58:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18005412003581952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 18:58:35.035 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:58:37.072 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:58:39.122 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:59:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18005516903124992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 18:59:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18005516903124992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 18:59:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18005516903124992 [0;39m ==> Parameters: 
2023-03-18 18:59:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18005516903124992 [0;39m <==    Updates: 0
2023-03-18 18:59:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18005516903124992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 18:59:01.180 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:59:03.232 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:59:03.854 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:59:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18005537832701952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 18:59:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18005537832701952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 18:59:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18005537832701952 [0;39m ==> Parameters: 
2023-03-18 18:59:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18005537832701952 [0;39m <==    Updates: 1
2023-03-18 18:59:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18005537832701952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 18:59:05.285 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:59:07.326 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:59:09.373 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:59:25.295 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:59:27.338 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:59:33.859 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:59:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18005663691182080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 18:59:35.010 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:59:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18005663691182080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 18:59:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18005663691182080 [0;39m ==> Parameters: 
2023-03-18 18:59:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18005663691182080 [0;39m <==    Updates: 1
2023-03-18 18:59:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18005663691182080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 18:59:37.034 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:59:49.391 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 18:59:51.435 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:00:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18005768540393472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:00:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18005768540393472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:00:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18005768540393472 [0;39m ==> Parameters: 
2023-03-18 19:00:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18005768540393472 [0;39m <==    Updates: 0
2023-03-18 19:00:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18005768540393472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 19:00:02.972 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:00:03.857 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:00:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18005789507719168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:00:05.008 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:00:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18005789507719168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:00:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18005789507719168 [0;39m ==> Parameters: 
2023-03-18 19:00:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18005789507719168 [0;39m <==    Updates: 1
2023-03-18 19:00:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18005789507719168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:00:07.052 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:00:13.491 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:00:15.539 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:00:32.983 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:00:33.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:00:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18005915320061952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:00:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18005915320061952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:00:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18005915320061952 [0;39m ==> Parameters: 
2023-03-18 19:00:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18005915320061952 [0;39m <==    Updates: 1
2023-03-18 19:00:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18005915320061952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:00:37.088 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:00:39.140 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:00:41.190 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:01:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18006020215410688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:01:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18006020215410688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:01:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18006020215410688 [0;39m ==> Parameters: 
2023-03-18 19:01:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18006020215410688 [0;39m <==    Updates: 0
2023-03-18 19:01:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18006020215410688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 19:01:02.981 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:01:03.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:01:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18006041144987648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:01:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18006041144987648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:01:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18006041144987648 [0;39m ==> Parameters: 
2023-03-18 19:01:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18006041144987648 [0;39m <==    Updates: 1
2023-03-18 19:01:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18006041144987648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:01:05.033 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:01:07.075 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:01:09.118 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:01:31.181 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:01:33.213 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:01:33.883 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:01:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18006166990884864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:01:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18006166990884864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:01:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18006166990884864 [0;39m ==> Parameters: 
2023-03-18 19:01:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18006166990884864 [0;39m <==    Updates: 1
2023-03-18 19:01:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18006166990884864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 19:01:39.345 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:01:55.258 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:01:57.292 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:02:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18006271835901952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:02:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18006271835901952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:02:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18006271835901952 [0;39m ==> Parameters: 
2023-03-18 19:02:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18006271835901952 [0;39m <==    Updates: 0
2023-03-18 19:02:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18006271835901952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-18 19:02:02.985 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:02:03.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:02:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18006292811616256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:02:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18006292811616256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:02:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18006292811616256 [0;39m ==> Parameters: 
2023-03-18 19:02:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18006292811616256 [0;39m <==    Updates: 1
2023-03-18 19:02:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18006292811616256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:02:07.078 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:02:19.320 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:02:21.367 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:02:32.972 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:02:33.877 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:02:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18006418678484992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:02:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18006418678484992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:02:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18006418678484992 [0;39m ==> Parameters: 
2023-03-18 19:02:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18006418678484992 [0;39m <==    Updates: 1
2023-03-18 19:02:35.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18006418678484992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:02:37.068 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:02:45.444 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:03:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18006523544473600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:03:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18006523544473600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:03:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18006523544473600 [0;39m ==> Parameters: 
2023-03-18 19:03:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18006523544473600 [0;39m <==    Updates: 0
2023-03-18 19:03:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18006523544473600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:03:02.958 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:03:03.876 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:03:04.992 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:03:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18006544482439168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:03:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18006544482439168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:03:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18006544482439168 [0;39m ==> Parameters: 
2023-03-18 19:03:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18006544482439168 [0;39m <==    Updates: 1
2023-03-18 19:03:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18006544482439168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:03:07.039 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:03:09.068 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:03:11.098 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:03:32.984 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:03:33.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:03:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18006670307364864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:03:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18006670307364864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:03:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18006670307364864 [0;39m ==> Parameters: 
2023-03-18 19:03:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18006670307364864 [0;39m <==    Updates: 1
2023-03-18 19:03:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18006670307364864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-18 19:03:35.022 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:03:37.073 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:03:39.111 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:04:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18006775152381952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:04:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18006775152381952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:04:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18006775152381952 [0;39m ==> Parameters: 
2023-03-18 19:04:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18006775152381952 [0;39m <==    Updates: 0
2023-03-18 19:04:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18006775152381952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:04:01.152 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:04:03.186 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:04:03.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:04:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18006796123901952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:04:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18006796123901952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:04:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18006796123901952 [0;39m ==> Parameters: 
2023-03-18 19:04:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18006796123901952 [0;39m <==    Updates: 1
2023-03-18 19:04:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18006796123901952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:04:05.232 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:04:07.282 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:04:09.321 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:04:25.248 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:04:27.304 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:04:32.972 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:04:33.868 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:04:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18006921957216256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:04:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18006921957216256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:04:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18006921957216256 [0;39m ==> Parameters: 
2023-03-18 19:04:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18006921957216256 [0;39m <==    Updates: 1
2023-03-18 19:04:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18006921957216256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:04:35.020 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:04:37.068 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:04:51.383 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:05:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18007026814816256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:05:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18007026814816256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:05:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18007026814816256 [0;39m ==> Parameters: 
2023-03-18 19:05:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18007026814816256 [0;39m <==    Updates: 0
2023-03-18 19:05:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18007026814816256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-18 19:05:02.973 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:05:03.846 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:05:04.996 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:05:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18007047832473600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:05:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18007047832473600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:05:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18007047832473600 [0;39m ==> Parameters: 
2023-03-18 19:05:05.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18007047832473600 [0;39m <==    Updates: 1
2023-03-18 19:05:05.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18007047832473600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:05:07.035 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:05:13.410 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:05:15.438 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:05:32.979 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:05:33.864 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:05:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18007173628039168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:05:35.007 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:05:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18007173628039168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:05:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18007173628039168 [0;39m ==> Parameters: 
2023-03-18 19:05:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18007173628039168 [0;39m <==    Updates: 1
2023-03-18 19:05:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18007173628039168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:05:37.047 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:05:39.058 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:05:41.088 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:06:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18007278510804992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:06:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18007278510804992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:06:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18007278510804992 [0;39m ==> Parameters: 
2023-03-18 19:06:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18007278510804992 [0;39m <==    Updates: 0
2023-03-18 19:06:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18007278510804992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-18 19:06:02.998 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:06:03.862 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:06:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18007299461353472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:06:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18007299461353472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:06:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18007299461353472 [0;39m ==> Parameters: 
2023-03-18 19:06:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18007299461353472 [0;39m <==    Updates: 1
2023-03-18 19:06:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18007299461353472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:06:05.047 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:06:07.097 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:06:09.115 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:06:31.160 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:06:33.179 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:06:33.860 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:06:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18007425311444992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:06:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18007425311444992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:06:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18007425311444992 [0;39m ==> Parameters: 
2023-03-18 19:06:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18007425311444992 [0;39m <==    Updates: 1
2023-03-18 19:06:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18007425311444992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:06:35.225 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:06:37.248 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:06:56.213 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:06:58.261 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:07:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18007530156462080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:07:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18007530156462080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:07:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18007530156462080 [0;39m ==> Parameters: 
2023-03-18 19:07:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18007530156462080 [0;39m <==    Updates: 0
2023-03-18 19:07:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18007530156462080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 19:07:02.971 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:07:03.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:07:04.996 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:07:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18007551098621952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:07:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18007551098621952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:07:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18007551098621952 [0;39m ==> Parameters: 
2023-03-18 19:07:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18007551098621952 [0;39m <==    Updates: 1
2023-03-18 19:07:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18007551098621952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:07:07.035 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:07:22.336 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:07:33.129 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:07:33.837 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:07:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18007676931936256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:07:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18007676931936256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:07:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18007676931936256 [0;39m ==> Parameters: 
2023-03-18 19:07:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18007676931936256 [0;39m <==    Updates: 1
2023-03-18 19:07:35.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18007676931936256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-18 19:07:37.457 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:07:46.417 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:08:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18007781827284992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:08:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18007781827284992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:08:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18007781827284992 [0;39m ==> Parameters: 
2023-03-18 19:08:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18007781827284992 [0;39m <==    Updates: 0
2023-03-18 19:08:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18007781827284992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:08:02.980 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:08:03.870 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:08:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18007802811387904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:08:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18007802811387904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:08:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18007802811387904 [0;39m ==> Parameters: 
2023-03-18 19:08:05.025 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18007802811387904 [0;39m <==    Updates: 1
2023-03-18 19:08:05.025 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18007802811387904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:08:05.032 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:08:07.067 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:08:09.117 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:08:11.167 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:08:33.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:08:35.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18007928640507904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:08:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18007928640507904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:08:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18007928640507904 [0;39m ==> Parameters: 
2023-03-18 19:08:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18007928640507904 [0;39m <==    Updates: 1
2023-03-18 19:08:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18007928640507904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 19:08:35.031 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:08:37.061 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:08:39.116 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:09:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18008033485524992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:09:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18008033485524992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:09:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18008033485524992 [0;39m ==> Parameters: 
2023-03-18 19:09:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18008033485524992 [0;39m <==    Updates: 0
2023-03-18 19:09:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18008033485524992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 19:09:01.160 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:09:03.181 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:09:03.843 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:09:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18008054444462080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:09:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18008054444462080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:09:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18008054444462080 [0;39m ==> Parameters: 
2023-03-18 19:09:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18008054444462080 [0;39m <==    Updates: 1
2023-03-18 19:09:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18008054444462080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 19:09:05.210 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:09:07.235 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:09:09.266 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:09:25.226 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:09:27.276 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:09:32.978 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:09:33.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:09:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18008180240027648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:09:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18008180240027648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:09:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18008180240027648 [0;39m ==> Parameters: 
2023-03-18 19:09:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18008180240027648 [0;39m <==    Updates: 1
2023-03-18 19:09:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18008180240027648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:09:37.056 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:09:49.342 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:09:51.388 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:10:00.000 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18008285089239040 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:10:00.001 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18008285089239040 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:10:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18008285089239040 [0;39m ==> Parameters: 
2023-03-18 19:10:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18008285089239040 [0;39m <==    Updates: 0
2023-03-18 19:10:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18008285089239040 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 19:10:02.989 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:10:03.873 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:10:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18008306098507776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:10:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18008306098507776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:10:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18008306098507776 [0;39m ==> Parameters: 
2023-03-18 19:10:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18008306098507776 [0;39m <==    Updates: 1
2023-03-18 19:10:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18008306098507776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:10:05.024 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:10:07.078 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:10:13.456 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:10:15.508 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:10:32.965 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:10:33.853 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:10:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18008431906656256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:10:35.004 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:10:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18008431906656256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:10:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18008431906656256 [0;39m ==> Parameters: 
2023-03-18 19:10:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18008431906656256 [0;39m <==    Updates: 1
2023-03-18 19:10:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18008431906656256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:10:37.047 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:10:39.093 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:10:41.129 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:11:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18008536793616384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:11:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18008536793616384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:11:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18008536793616384 [0;39m ==> Parameters: 
2023-03-18 19:11:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18008536793616384 [0;39m <==    Updates: 0
2023-03-18 19:11:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18008536793616384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-18 19:11:02.968 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:11:03.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:11:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18008557735776256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:11:05.004 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:11:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18008557735776256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:11:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18008557735776256 [0;39m ==> Parameters: 
2023-03-18 19:11:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18008557735776256 [0;39m <==    Updates: 1
2023-03-18 19:11:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18008557735776256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:11:07.030 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:11:09.059 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:11:31.092 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:11:33.138 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:11:33.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:11:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18008683564896256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:11:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18008683564896256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:11:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18008683564896256 [0;39m ==> Parameters: 
2023-03-18 19:11:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18008683564896256 [0;39m <==    Updates: 1
2023-03-18 19:11:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18008683564896256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:11:35.173 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:11:37.214 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:11:39.240 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:11:55.172 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:11:57.206 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:12:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18008788422496256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:12:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18008788422496256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:12:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18008788422496256 [0;39m ==> Parameters: 
2023-03-18 19:12:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18008788422496256 [0;39m <==    Updates: 0
2023-03-18 19:12:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18008788422496256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:12:02.980 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:12:03.877 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:12:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18008809414987776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:12:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18008809414987776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:12:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18008809414987776 [0;39m ==> Parameters: 
2023-03-18 19:12:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18008809414987776 [0;39m <==    Updates: 1
2023-03-18 19:12:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18008809414987776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:12:07.053 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:12:19.250 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:12:21.298 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:12:32.979 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:12:33.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:12:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18008935248302080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:12:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18008935248302080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:12:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18008935248302080 [0;39m ==> Parameters: 
2023-03-18 19:12:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18008935248302080 [0;39m <==    Updates: 1
2023-03-18 19:12:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18008935248302080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:12:37.043 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:12:43.346 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:12:45.389 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:13:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18009040093319168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:13:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18009040093319168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:13:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18009040093319168 [0;39m ==> Parameters: 
2023-03-18 19:13:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18009040093319168 [0;39m <==    Updates: 0
2023-03-18 19:13:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18009040093319168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:13:02.949 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:13:03.836 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:13:04.972 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:13:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18009061048061952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:13:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18009061048061952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:13:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18009061048061952 [0;39m ==> Parameters: 
2023-03-18 19:13:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18009061048061952 [0;39m <==    Updates: 1
2023-03-18 19:13:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18009061048061952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:13:07.008 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:13:09.077 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:13:11.113 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:13:32.985 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:13:33.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:13:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18009186889764864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:13:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18009186889764864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:13:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18009186889764864 [0;39m ==> Parameters: 
2023-03-18 19:13:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18009186889764864 [0;39m <==    Updates: 1
2023-03-18 19:13:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18009186889764864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:13:35.036 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:13:37.095 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:13:39.122 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:14:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18009291734781952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:14:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18009291734781952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:14:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18009291734781952 [0;39m ==> Parameters: 
2023-03-18 19:14:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18009291734781952 [0;39m <==    Updates: 0
2023-03-18 19:14:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18009291734781952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 19:14:01.170 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:14:03.206 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:14:03.863 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:14:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18009312756633600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:14:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18009312756633600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:14:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18009312756633600 [0;39m ==> Parameters: 
2023-03-18 19:14:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18009312756633600 [0;39m <==    Updates: 1
2023-03-18 19:14:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18009312756633600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:14:07.305 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:14:09.356 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:14:27.290 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:14:32.987 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:14:33.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:14:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18009438548004864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:14:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18009438548004864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:14:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18009438548004864 [0;39m ==> Parameters: 
2023-03-18 19:14:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18009438548004864 [0;39m <==    Updates: 1
2023-03-18 19:14:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18009438548004864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:14:37.068 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:14:49.330 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:14:51.357 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:15:00.000 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18009543380439040 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:15:00.001 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18009543380439040 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:15:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18009543380439040 [0;39m ==> Parameters: 
2023-03-18 19:15:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18009543380439040 [0;39m <==    Updates: 0
2023-03-18 19:15:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18009543380439040 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 19:15:02.978 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:15:03.864 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:15:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18009564410679296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:15:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18009564410679296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:15:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18009564410679296 [0;39m ==> Parameters: 
2023-03-18 19:15:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18009564410679296 [0;39m <==    Updates: 1
2023-03-18 19:15:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18009564410679296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:15:05.030 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:15:07.082 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:15:15.443 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:15:32.976 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:15:33.887 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:15:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18009690239799296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:15:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18009690239799296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:15:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18009690239799296 [0;39m ==> Parameters: 
2023-03-18 19:15:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18009690239799296 [0;39m <==    Updates: 1
2023-03-18 19:15:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18009690239799296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 19:15:35.030 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:15:37.071 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:15:39.106 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:15:41.146 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:16:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18009795072233472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:16:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18009795072233472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:16:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18009795072233472 [0;39m ==> Parameters: 
2023-03-18 19:16:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18009795072233472 [0;39m <==    Updates: 0
2023-03-18 19:16:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18009795072233472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 19:16:02.985 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:16:03.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:16:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18009816043753472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:16:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18009816043753472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:16:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18009816043753472 [0;39m ==> Parameters: 
2023-03-18 19:16:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18009816043753472 [0;39m <==    Updates: 1
2023-03-18 19:16:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18009816043753472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 19:16:07.078 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:16:09.119 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:16:31.169 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:16:33.207 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:16:33.875 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:16:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18009941893844992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:16:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18009941893844992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:16:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18009941893844992 [0;39m ==> Parameters: 
2023-03-18 19:16:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18009941893844992 [0;39m <==    Updates: 1
2023-03-18 19:16:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18009941893844992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:16:39.357 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:16:55.262 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:16:57.298 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:17:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18010046705307648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:17:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18010046705307648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:17:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18010046705307648 [0;39m ==> Parameters: 
2023-03-18 19:17:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18010046705307648 [0;39m <==    Updates: 0
2023-03-18 19:17:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18010046705307648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 19:17:02.972 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:17:03.860 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:17:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18010067710382080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:17:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18010067710382080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:17:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18010067710382080 [0;39m ==> Parameters: 
2023-03-18 19:17:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18010067710382080 [0;39m <==    Updates: 1
2023-03-18 19:17:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18010067710382080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:17:05.025 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:17:07.043 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:17:19.362 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:17:21.403 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:17:32.992 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:17:33.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:17:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18010193522724864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:17:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18010193522724864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:17:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18010193522724864 [0;39m ==> Parameters: 
2023-03-18 19:17:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18010193522724864 [0;39m <==    Updates: 1
2023-03-18 19:17:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18010193522724864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:17:37.084 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:17:43.459 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:17:45.509 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:18:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18010298397102080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:18:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18010298397102080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:18:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18010298397102080 [0;39m ==> Parameters: 
2023-03-18 19:18:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18010298397102080 [0;39m <==    Updates: 0
2023-03-18 19:18:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18010298397102080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 19:18:02.999 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:18:03.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:18:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18010319330873344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:18:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18010319330873344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:18:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18010319330873344 [0;39m ==> Parameters: 
2023-03-18 19:18:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18010319330873344 [0;39m <==    Updates: 1
2023-03-18 19:18:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18010319330873344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:18:05.035 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:18:07.073 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:18:09.108 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:18:11.161 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:18:32.983 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:18:33.853 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:18:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18010445180964864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:18:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18010445180964864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:18:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18010445180964864 [0;39m ==> Parameters: 
2023-03-18 19:18:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18010445180964864 [0;39m <==    Updates: 1
2023-03-18 19:18:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18010445180964864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:18:37.061 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:18:39.090 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:19:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18010550038564864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:19:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18010550038564864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:19:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18010550038564864 [0;39m ==> Parameters: 
2023-03-18 19:19:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18010550038564864 [0;39m <==    Updates: 0
2023-03-18 19:19:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18010550038564864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 19:19:01.161 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:19:03.190 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:19:03.862 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:19:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18010571043639296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:19:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18010571043639296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:19:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18010571043639296 [0;39m ==> Parameters: 
2023-03-18 19:19:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18010571043639296 [0;39m <==    Updates: 1
2023-03-18 19:19:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18010571043639296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:19:05.248 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:19:07.279 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:19:09.330 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:19:27.279 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:19:32.980 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:19:33.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:19:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18010696830816256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:19:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18010696830816256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:19:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18010696830816256 [0;39m ==> Parameters: 
2023-03-18 19:19:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18010696830816256 [0;39m <==    Updates: 1
2023-03-18 19:19:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18010696830816256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:19:35.035 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:19:37.074 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:19:51.383 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:20:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18010801684221952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:20:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18010801684221952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:20:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18010801684221952 [0;39m ==> Parameters: 
2023-03-18 19:20:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18010801684221952 [0;39m <==    Updates: 0
2023-03-18 19:20:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18010801684221952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 19:20:02.973 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:20:03.862 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:20:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18010822680907776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:20:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18010822680907776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:20:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18010822680907776 [0;39m ==> Parameters: 
2023-03-18 19:20:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18010822680907776 [0;39m <==    Updates: 1
2023-03-18 19:20:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18010822680907776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:20:05.024 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:20:07.082 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:20:13.410 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:20:15.457 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:20:32.976 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:20:33.859 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:20:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18010948518416384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:20:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18010948518416384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:20:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18010948518416384 [0;39m ==> Parameters: 
2023-03-18 19:20:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18010948518416384 [0;39m <==    Updates: 1
2023-03-18 19:20:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18010948518416384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:20:35.026 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:20:37.070 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:20:39.110 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:20:41.165 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:21:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18011053350850560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:21:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18011053350850560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:21:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18011053350850560 [0;39m ==> Parameters: 
2023-03-18 19:21:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18011053350850560 [0;39m <==    Updates: 0
2023-03-18 19:21:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18011053350850560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 19:21:02.991 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:21:03.847 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:21:05.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18011074351730688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:21:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18011074351730688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:21:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18011074351730688 [0;39m ==> Parameters: 
2023-03-18 19:21:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18011074351730688 [0;39m <==    Updates: 1
2023-03-18 19:21:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18011074351730688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:21:07.078 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:21:09.130 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:21:31.201 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:21:33.252 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:21:33.872 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:21:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18011200168267776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:21:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18011200168267776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:21:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18011200168267776 [0;39m ==> Parameters: 
2023-03-18 19:21:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18011200168267776 [0;39m <==    Updates: 1
2023-03-18 19:21:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18011200168267776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-18 19:21:35.306 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:21:37.347 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:21:39.408 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:21:55.280 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:21:57.335 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:22:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18011304992313344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:22:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18011304992313344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:22:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18011304992313344 [0;39m ==> Parameters: 
2023-03-18 19:22:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18011304992313344 [0;39m <==    Updates: 0
2023-03-18 19:22:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18011304992313344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:22:02.975 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:22:03.876 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:22:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18011326018359296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:22:05.015 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:22:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18011326018359296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:22:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18011326018359296 [0;39m ==> Parameters: 
2023-03-18 19:22:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18011326018359296 [0;39m <==    Updates: 1
2023-03-18 19:22:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18011326018359296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:22:07.057 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:22:19.385 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:22:21.426 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:22:32.988 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:22:33.870 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:22:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18011451847479296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:22:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18011451847479296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:22:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18011451847479296 [0;39m ==> Parameters: 
2023-03-18 19:22:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18011451847479296 [0;39m <==    Updates: 1
2023-03-18 19:22:35.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18011451847479296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:22:35.029 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:22:37.073 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:22:43.492 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:22:45.540 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:23:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18011556679913472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:23:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18011556679913472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:23:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18011556679913472 [0;39m ==> Parameters: 
2023-03-18 19:23:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18011556679913472 [0;39m <==    Updates: 0
2023-03-18 19:23:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18011556679913472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 19:23:03.000 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:23:03.857 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:23:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18011577647239168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:23:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18011577647239168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:23:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18011577647239168 [0;39m ==> Parameters: 
2023-03-18 19:23:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18011577647239168 [0;39m <==    Updates: 1
2023-03-18 19:23:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18011577647239168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:23:05.038 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:23:07.078 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:23:09.128 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:23:11.175 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:23:32.980 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:23:33.868 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:23:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18011703459581952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:23:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18011703459581952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:23:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18011703459581952 [0;39m ==> Parameters: 
2023-03-18 19:23:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18011703459581952 [0;39m <==    Updates: 1
2023-03-18 19:23:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18011703459581952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:23:35.034 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:23:37.073 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:23:39.128 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:24:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18011808363319296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:24:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18011808363319296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:24:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18011808363319296 [0;39m ==> Parameters: 
2023-03-18 19:24:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18011808363319296 [0;39m <==    Updates: 0
2023-03-18 19:24:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18011808363319296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 19:24:03.235 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:24:03.858 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:24:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18011829318062080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:24:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18011829318062080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:24:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18011829318062080 [0;39m ==> Parameters: 
2023-03-18 19:24:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18011829318062080 [0;39m <==    Updates: 1
2023-03-18 19:24:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18011829318062080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:24:09.387 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:24:25.281 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:24:27.337 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:24:32.969 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:24:33.843 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:24:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18011955138793472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:24:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18011955138793472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:24:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18011955138793472 [0;39m ==> Parameters: 
2023-03-18 19:24:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18011955138793472 [0;39m <==    Updates: 1
2023-03-18 19:24:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18011955138793472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:24:35.024 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:24:37.063 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:24:49.389 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:24:51.442 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:25:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18012059979616256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:25:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18012059979616256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:25:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18012059979616256 [0;39m ==> Parameters: 
2023-03-18 19:25:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18012059979616256 [0;39m <==    Updates: 0
2023-03-18 19:25:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18012059979616256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:25:03.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:25:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18012080951136256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:25:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18012080951136256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:25:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18012080951136256 [0;39m ==> Parameters: 
2023-03-18 19:25:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18012080951136256 [0;39m <==    Updates: 1
2023-03-18 19:25:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18012080951136256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:25:05.036 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:25:07.069 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:25:13.514 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:25:15.556 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:25:32.987 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:25:33.838 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:25:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18012206776061952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:25:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18012206776061952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:25:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18012206776061952 [0;39m ==> Parameters: 
2023-03-18 19:25:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18012206776061952 [0;39m <==    Updates: 1
2023-03-18 19:25:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18012206776061952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:25:37.068 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:25:41.126 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:26:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18012311696576512 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:26:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18012311696576512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:26:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18012311696576512 [0;39m ==> Parameters: 
2023-03-18 19:26:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18012311696576512 [0;39m <==    Updates: 0
2023-03-18 19:26:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18012311696576512 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 19:26:02.992 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:26:03.848 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:26:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18012332659707904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:26:05.016 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:26:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18012332659707904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:26:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18012332659707904 [0;39m ==> Parameters: 
2023-03-18 19:26:05.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18012332659707904 [0;39m <==    Updates: 1
2023-03-18 19:26:05.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18012332659707904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:26:07.048 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:26:09.085 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:26:31.146 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:26:33.193 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:26:33.873 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:26:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18012458451079168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:26:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18012458451079168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:26:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18012458451079168 [0;39m ==> Parameters: 
2023-03-18 19:26:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18012458451079168 [0;39m <==    Updates: 1
2023-03-18 19:26:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18012458451079168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:26:37.261 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:26:39.294 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:26:55.243 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:26:57.279 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:27:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18012563308679168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:27:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18012563308679168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:27:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18012563308679168 [0;39m ==> Parameters: 
2023-03-18 19:27:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18012563308679168 [0;39m <==    Updates: 0
2023-03-18 19:27:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18012563308679168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:27:02.975 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:27:03.864 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:27:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18012584276004864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:27:05.006 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:27:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18012584276004864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:27:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18012584276004864 [0;39m ==> Parameters: 
2023-03-18 19:27:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18012584276004864 [0;39m <==    Updates: 1
2023-03-18 19:27:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18012584276004864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:27:07.038 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:27:19.332 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:27:21.377 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:27:32.990 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:27:33.864 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:27:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18012710100930560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:27:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18012710100930560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:27:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18012710100930560 [0;39m ==> Parameters: 
2023-03-18 19:27:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18012710100930560 [0;39m <==    Updates: 1
2023-03-18 19:27:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18012710100930560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:27:35.036 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:27:37.089 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:27:45.472 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:28:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18012814958530560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:28:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18012814958530560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:28:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18012814958530560 [0;39m ==> Parameters: 
2023-03-18 19:28:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18012814958530560 [0;39m <==    Updates: 0
2023-03-18 19:28:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18012814958530560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:28:02.989 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:28:03.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:28:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18012835930050560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:28:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18012835930050560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:28:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18012835930050560 [0;39m ==> Parameters: 
2023-03-18 19:28:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18012835930050560 [0;39m <==    Updates: 1
2023-03-18 19:28:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18012835930050560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:28:05.020 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:28:07.052 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:28:09.085 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:28:11.128 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:28:33.849 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:28:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18012961750781952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:28:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18012961750781952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:28:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18012961750781952 [0;39m ==> Parameters: 
2023-03-18 19:28:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18012961750781952 [0;39m <==    Updates: 1
2023-03-18 19:28:35.003 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18012961750781952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 19:28:35.019 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:28:37.062 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:28:39.095 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:29:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18013066671296512 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:29:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18013066671296512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:29:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18013066671296512 [0;39m ==> Parameters: 
2023-03-18 19:29:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18013066671296512 [0;39m <==    Updates: 0
2023-03-18 19:29:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18013066671296512 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:29:01.141 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:29:03.209 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:29:03.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:29:05.019 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18013087647010816 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:29:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18013087647010816 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:29:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18013087647010816 [0;39m ==> Parameters: 
2023-03-18 19:29:05.026 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18013087647010816 [0;39m <==    Updates: 1
2023-03-18 19:29:05.026 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18013087647010816 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:29:05.242 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:29:07.279 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:29:09.320 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:29:25.247 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:29:27.297 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:29:32.977 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:29:33.849 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:29:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18013213434187776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:29:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18013213434187776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:29:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18013213434187776 [0;39m ==> Parameters: 
2023-03-18 19:29:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18013213434187776 [0;39m <==    Updates: 1
2023-03-18 19:29:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18013213434187776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 19:29:37.053 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:29:51.379 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:30:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18013318283399168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:30:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18013318283399168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:30:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18013318283399168 [0;39m ==> Parameters: 
2023-03-18 19:30:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18013318283399168 [0;39m <==    Updates: 0
2023-03-18 19:30:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18013318283399168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:30:02.993 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:30:03.872 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:30:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18013339254919168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:30:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18013339254919168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:30:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18013339254919168 [0;39m ==> Parameters: 
2023-03-18 19:30:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18013339254919168 [0;39m <==    Updates: 1
2023-03-18 19:30:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18013339254919168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:30:07.077 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:30:13.425 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:30:15.477 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:30:32.975 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:30:33.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:30:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18013465084039168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:30:35.007 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:30:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18013465084039168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:30:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18013465084039168 [0;39m ==> Parameters: 
2023-03-18 19:30:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18013465084039168 [0;39m <==    Updates: 1
2023-03-18 19:30:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18013465084039168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:30:37.037 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:30:39.096 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:30:41.120 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:31:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18013569933250560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:31:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18013569933250560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:31:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18013569933250560 [0;39m ==> Parameters: 
2023-03-18 19:31:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18013569933250560 [0;39m <==    Updates: 0
2023-03-18 19:31:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18013569933250560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 19:31:02.974 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:31:03.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:31:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18013590904770560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:31:05.005 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:31:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18013590904770560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:31:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18013590904770560 [0;39m ==> Parameters: 
2023-03-18 19:31:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18013590904770560 [0;39m <==    Updates: 1
2023-03-18 19:31:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18013590904770560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:31:07.028 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:31:09.070 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:31:31.127 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:31:33.159 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:31:33.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:31:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18013716729696256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:31:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18013716729696256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:31:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18013716729696256 [0;39m ==> Parameters: 
2023-03-18 19:31:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18013716729696256 [0;39m <==    Updates: 1
2023-03-18 19:31:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18013716729696256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:31:35.206 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:31:37.236 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:31:39.280 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:31:55.229 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:31:57.253 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:32:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18013821650210816 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:32:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18013821650210816 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:32:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18013821650210816 [0;39m ==> Parameters: 
2023-03-18 19:32:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18013821650210816 [0;39m <==    Updates: 0
2023-03-18 19:32:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18013821650210816 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 19:32:02.972 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:32:03.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:32:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18013842554621952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:32:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18013842554621952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:32:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18013842554621952 [0;39m ==> Parameters: 
2023-03-18 19:32:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18013842554621952 [0;39m <==    Updates: 1
2023-03-18 19:32:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18013842554621952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:32:05.019 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:32:07.048 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:32:19.304 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:32:21.336 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:32:32.987 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:32:33.874 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:32:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18013968408907776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:32:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18013968408907776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:32:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18013968408907776 [0;39m ==> Parameters: 
2023-03-18 19:32:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18013968408907776 [0;39m <==    Updates: 1
2023-03-18 19:32:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18013968408907776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 19:32:37.094 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:32:43.380 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:32:45.427 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:33:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18014073253924864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:33:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18014073253924864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:33:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18014073253924864 [0;39m ==> Parameters: 
2023-03-18 19:33:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18014073253924864 [0;39m <==    Updates: 0
2023-03-18 19:33:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18014073253924864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 19:33:03.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:33:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18014094233833472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:33:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18014094233833472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:33:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18014094233833472 [0;39m ==> Parameters: 
2023-03-18 19:33:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18014094233833472 [0;39m <==    Updates: 1
2023-03-18 19:33:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18014094233833472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 19:33:05.053 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:33:07.102 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:33:09.154 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:33:11.194 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:33:32.982 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:33:33.886 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:33:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18014220054564864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:33:35.006 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:33:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18014220054564864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:33:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18014220054564864 [0;39m ==> Parameters: 
2023-03-18 19:33:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18014220054564864 [0;39m <==    Updates: 1
2023-03-18 19:33:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18014220054564864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:33:37.037 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:33:39.089 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:34:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18014324912164864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:34:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18014324912164864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:34:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18014324912164864 [0;39m ==> Parameters: 
2023-03-18 19:34:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18014324912164864 [0;39m <==    Updates: 0
2023-03-18 19:34:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18014324912164864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:34:01.129 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:34:03.176 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:34:03.870 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:34:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18014345892073472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:34:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18014345892073472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:34:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18014345892073472 [0;39m ==> Parameters: 
2023-03-18 19:34:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18014345892073472 [0;39m <==    Updates: 1
2023-03-18 19:34:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18014345892073472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:34:07.244 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:34:09.268 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:34:25.223 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:34:27.265 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:34:33.870 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:34:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18014471708610560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:34:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18014471708610560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:34:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18014471708610560 [0;39m ==> Parameters: 
2023-03-18 19:34:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18014471708610560 [0;39m <==    Updates: 1
2023-03-18 19:34:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18014471708610560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:34:37.070 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:34:49.290 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:34:51.321 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:35:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18014576562016256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:35:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18014576562016256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:35:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18014576562016256 [0;39m ==> Parameters: 
2023-03-18 19:35:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18014576562016256 [0;39m <==    Updates: 0
2023-03-18 19:35:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18014576562016256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:35:02.988 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:35:03.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:35:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18014597533536256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:35:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18014597533536256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:35:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18014597533536256 [0;39m ==> Parameters: 
2023-03-18 19:35:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18014597533536256 [0;39m <==    Updates: 1
2023-03-18 19:35:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18014597533536256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:35:05.019 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:35:07.051 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:35:13.382 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:35:15.429 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:35:32.987 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:35:33.845 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:35:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18014723354267648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:35:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18014723354267648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:35:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18014723354267648 [0;39m ==> Parameters: 
2023-03-18 19:35:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18014723354267648 [0;39m <==    Updates: 1
2023-03-18 19:35:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18014723354267648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:35:35.034 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:35:37.068 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:35:39.110 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:35:41.156 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:36:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18014828274782208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:36:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18014828274782208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:36:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18014828274782208 [0;39m ==> Parameters: 
2023-03-18 19:36:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18014828274782208 [0;39m <==    Updates: 0
2023-03-18 19:36:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18014828274782208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:36:02.995 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:36:03.836 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:36:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18014849208553472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:36:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18014849208553472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:36:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18014849208553472 [0;39m ==> Parameters: 
2023-03-18 19:36:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18014849208553472 [0;39m <==    Updates: 1
2023-03-18 19:36:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18014849208553472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:36:05.040 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:36:07.087 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:36:09.116 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:36:33.193 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:36:33.873 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:36:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18014975033479168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:36:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18014975033479168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:36:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18014975033479168 [0;39m ==> Parameters: 
2023-03-18 19:36:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18014975033479168 [0;39m <==    Updates: 1
2023-03-18 19:36:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18014975033479168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:36:35.225 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:36:37.261 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:36:39.302 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:36:57.268 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:37:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18015079886884864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:37:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18015079886884864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:37:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18015079886884864 [0;39m ==> Parameters: 
2023-03-18 19:37:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18015079886884864 [0;39m <==    Updates: 0
2023-03-18 19:37:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18015079886884864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 19:37:02.991 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:37:03.872 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:37:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18015100862599168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:37:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18015100862599168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:37:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18015100862599168 [0;39m ==> Parameters: 
2023-03-18 19:37:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18015100862599168 [0;39m <==    Updates: 1
2023-03-18 19:37:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18015100862599168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:37:05.039 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:37:07.076 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:37:21.349 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:37:32.990 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:37:33.885 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:37:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18015226683330560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:37:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18015226683330560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:37:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18015226683330560 [0;39m ==> Parameters: 
2023-03-18 19:37:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18015226683330560 [0;39m <==    Updates: 1
2023-03-18 19:37:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18015226683330560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:37:35.021 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:37:37.065 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:37:43.399 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:37:45.424 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:38:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18015331540930560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:38:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18015331540930560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:38:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18015331540930560 [0;39m ==> Parameters: 
2023-03-18 19:38:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18015331540930560 [0;39m <==    Updates: 0
2023-03-18 19:38:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18015331540930560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:38:02.973 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:38:03.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:38:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18015352508256256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:38:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18015352508256256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:38:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18015352508256256 [0;39m ==> Parameters: 
2023-03-18 19:38:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18015352508256256 [0;39m <==    Updates: 1
2023-03-18 19:38:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18015352508256256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:38:07.064 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:38:09.112 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:38:11.158 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:38:33.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:38:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18015478333181952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:38:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18015478333181952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:38:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18015478333181952 [0;39m ==> Parameters: 
2023-03-18 19:38:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18015478333181952 [0;39m <==    Updates: 1
2023-03-18 19:38:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18015478333181952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:38:35.019 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:38:37.050 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:38:39.111 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:39:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18015583245307904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:39:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18015583245307904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:39:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18015583245307904 [0;39m ==> Parameters: 
2023-03-18 19:39:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18015583245307904 [0;39m <==    Updates: 0
2023-03-18 19:39:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18015583245307904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:39:01.185 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:39:03.218 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:39:03.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:39:05.017 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18015604221022208 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:39:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18015604221022208 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:39:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18015604221022208 [0;39m ==> Parameters: 
2023-03-18 19:39:05.025 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18015604221022208 [0;39m <==    Updates: 1
2023-03-18 19:39:05.025 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18015604221022208 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:39:05.256 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:39:07.303 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:39:28.263 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:39:33.848 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:39:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18015730037559296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:39:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18015730037559296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:39:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18015730037559296 [0;39m ==> Parameters: 
2023-03-18 19:39:35.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18015730037559296 [0;39m <==    Updates: 1
2023-03-18 19:39:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18015730037559296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 19:39:37.053 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:39:50.318 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:39:52.350 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:40:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18015834869993472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:40:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18015834869993472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:40:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18015834869993472 [0;39m ==> Parameters: 
2023-03-18 19:40:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18015834869993472 [0;39m <==    Updates: 0
2023-03-18 19:40:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18015834869993472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 19:40:03.000 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:40:03.873 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:40:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18015855833124864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:40:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18015855833124864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:40:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18015855833124864 [0;39m ==> Parameters: 
2023-03-18 19:40:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18015855833124864 [0;39m <==    Updates: 1
2023-03-18 19:40:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18015855833124864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:40:05.037 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:40:07.088 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:40:14.394 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:40:16.426 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:40:32.991 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:40:33.849 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:40:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18015981662244864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:40:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18015981662244864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:40:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18015981662244864 [0;39m ==> Parameters: 
2023-03-18 19:40:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18015981662244864 [0;39m <==    Updates: 1
2023-03-18 19:40:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18015981662244864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:40:35.037 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:40:37.084 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:40:39.112 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:40:41.137 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:41:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18016086515650560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:41:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18016086515650560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:41:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18016086515650560 [0;39m ==> Parameters: 
2023-03-18 19:41:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18016086515650560 [0;39m <==    Updates: 0
2023-03-18 19:41:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18016086515650560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:41:03.005 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:41:03.836 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:41:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18016107487170560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:41:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18016107487170560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:41:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18016107487170560 [0;39m ==> Parameters: 
2023-03-18 19:41:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18016107487170560 [0;39m <==    Updates: 1
2023-03-18 19:41:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18016107487170560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:41:05.036 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:41:07.086 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:41:09.133 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:41:33.236 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:41:33.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:41:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18016233312096256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:41:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18016233312096256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:41:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18016233312096256 [0;39m ==> Parameters: 
2023-03-18 19:41:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18016233312096256 [0;39m <==    Updates: 1
2023-03-18 19:41:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18016233312096256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:41:39.354 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:41:55.305 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:41:57.336 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:42:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18016338232610816 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:42:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18016338232610816 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:42:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18016338232610816 [0;39m ==> Parameters: 
2023-03-18 19:42:00.026 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18016338232610816 [0;39m <==    Updates: 0
2023-03-18 19:42:00.026 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18016338232610816 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:42:02.987 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:42:03.838 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:42:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18016359137021952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:42:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18016359137021952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:42:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18016359137021952 [0;39m ==> Parameters: 
2023-03-18 19:42:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18016359137021952 [0;39m <==    Updates: 1
2023-03-18 19:42:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18016359137021952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:42:05.019 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:42:07.050 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:42:19.380 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:42:21.428 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:42:32.970 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:42:33.849 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:42:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18016484991307776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:42:35.009 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:42:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18016484991307776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:42:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18016484991307776 [0;39m ==> Parameters: 
2023-03-18 19:42:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18016484991307776 [0;39m <==    Updates: 1
2023-03-18 19:42:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18016484991307776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-03-18 19:42:37.048 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:42:45.574 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:43:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18016589848907776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:43:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18016589848907776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:43:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18016589848907776 [0;39m ==> Parameters: 
2023-03-18 19:43:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18016589848907776 [0;39m <==    Updates: 0
2023-03-18 19:43:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18016589848907776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:43:03.016 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:43:03.865 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:43:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18016610812039168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:43:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18016610812039168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:43:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18016610812039168 [0;39m ==> Parameters: 
2023-03-18 19:43:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18016610812039168 [0;39m <==    Updates: 1
2023-03-18 19:43:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18016610812039168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 19:43:05.052 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:43:07.103 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:43:09.154 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:43:11.194 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:43:32.991 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:43:33.872 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:43:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18016736641159168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:43:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18016736641159168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:43:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18016736641159168 [0;39m ==> Parameters: 
2023-03-18 19:43:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18016736641159168 [0;39m <==    Updates: 1
2023-03-18 19:43:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18016736641159168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:43:35.038 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:43:37.075 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:43:39.102 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:44:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18016841490370560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:44:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18016841490370560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:44:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18016841490370560 [0;39m ==> Parameters: 
2023-03-18 19:44:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18016841490370560 [0;39m <==    Updates: 0
2023-03-18 19:44:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18016841490370560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:44:01.167 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:44:03.206 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:44:03.864 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:44:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18016862495444992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:44:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18016862495444992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:44:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18016862495444992 [0;39m ==> Parameters: 
2023-03-18 19:44:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18016862495444992 [0;39m <==    Updates: 1
2023-03-18 19:44:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18016862495444992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:44:09.323 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:44:27.300 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:44:32.989 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:44:33.843 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:44:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18016988291010560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:44:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18016988291010560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:44:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18016988291010560 [0;39m ==> Parameters: 
2023-03-18 19:44:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18016988291010560 [0;39m <==    Updates: 1
2023-03-18 19:44:35.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18016988291010560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 19:44:35.020 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:44:37.051 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:44:49.337 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:44:51.382 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:45:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18017093144416256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:45:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18017093144416256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:45:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18017093144416256 [0;39m ==> Parameters: 
2023-03-18 19:45:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18017093144416256 [0;39m <==    Updates: 0
2023-03-18 19:45:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18017093144416256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-18 19:45:02.988 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:45:03.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:45:05.019 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:45:05.019 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18017114178850816 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:45:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18017114178850816 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:45:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18017114178850816 [0;39m ==> Parameters: 
2023-03-18 19:45:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18017114178850816 [0;39m <==    Updates: 1
2023-03-18 19:45:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18017114178850816 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-18 19:45:07.054 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:45:13.422 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:45:15.458 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:45:33.003 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:45:33.883 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:45:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18017239936667648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:45:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18017239936667648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:45:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18017239936667648 [0;39m ==> Parameters: 
2023-03-18 19:45:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18017239936667648 [0;39m <==    Updates: 1
2023-03-18 19:45:35.002 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18017239936667648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 19:45:35.034 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:45:37.084 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:45:39.110 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:45:41.125 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:46:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18017344823627776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:46:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18017344823627776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:46:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18017344823627776 [0;39m ==> Parameters: 
2023-03-18 19:46:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18017344823627776 [0;39m <==    Updates: 0
2023-03-18 19:46:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18017344823627776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 19:46:02.977 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:46:03.848 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:46:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18017365820313600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:46:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18017365820313600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:46:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18017365820313600 [0;39m ==> Parameters: 
2023-03-18 19:46:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18017365820313600 [0;39m <==    Updates: 1
2023-03-18 19:46:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18017365820313600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 19:46:07.059 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:46:09.115 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:46:31.177 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:46:33.193 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:46:33.872 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:46:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18017491615879168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:46:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18017491615879168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:46:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18017491615879168 [0;39m ==> Parameters: 
2023-03-18 19:46:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18017491615879168 [0;39m <==    Updates: 1
2023-03-18 19:46:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18017491615879168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:46:35.230 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:46:39.301 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:46:55.223 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:46:57.252 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:47:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18017596502839296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:47:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18017596502839296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:47:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18017596502839296 [0;39m ==> Parameters: 
2023-03-18 19:47:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18017596502839296 [0;39m <==    Updates: 0
2023-03-18 19:47:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18017596502839296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:47:02.975 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:47:03.863 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:47:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18017617440804864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:47:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18017617440804864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:47:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18017617440804864 [0;39m ==> Parameters: 
2023-03-18 19:47:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18017617440804864 [0;39m <==    Updates: 1
2023-03-18 19:47:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18017617440804864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 19:47:07.058 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:47:19.300 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:47:21.341 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:47:32.989 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:47:33.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:47:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18017743265730560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:47:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18017743265730560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:47:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18017743265730560 [0;39m ==> Parameters: 
2023-03-18 19:47:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18017743265730560 [0;39m <==    Updates: 1
2023-03-18 19:47:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18017743265730560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:47:35.021 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:47:37.057 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:47:43.399 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:47:45.425 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:48:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18017848119136256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:48:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18017848119136256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:48:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18017848119136256 [0;39m ==> Parameters: 
2023-03-18 19:48:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18017848119136256 [0;39m <==    Updates: 0
2023-03-18 19:48:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18017848119136256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:48:02.988 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:48:03.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:48:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18017869090656256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:48:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18017869090656256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:48:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18017869090656256 [0;39m ==> Parameters: 
2023-03-18 19:48:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18017869090656256 [0;39m <==    Updates: 1
2023-03-18 19:48:05.004 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18017869090656256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 19:48:05.020 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:48:07.053 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:48:09.085 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:48:11.127 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:48:32.988 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:48:33.849 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:48:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18017994915581952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:48:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18017994915581952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:48:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18017994915581952 [0;39m ==> Parameters: 
2023-03-18 19:48:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18017994915581952 [0;39m <==    Updates: 1
2023-03-18 19:48:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18017994915581952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:48:35.019 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:48:37.055 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:48:39.110 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:49:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18018099836096512 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:49:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18018099836096512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:49:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18018099836096512 [0;39m ==> Parameters: 
2023-03-18 19:49:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18018099836096512 [0;39m <==    Updates: 0
2023-03-18 19:49:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18018099836096512 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:49:03.185 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:49:03.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:49:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18018120769867776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:49:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18018120769867776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:49:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18018120769867776 [0;39m ==> Parameters: 
2023-03-18 19:49:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18018120769867776 [0;39m <==    Updates: 1
2023-03-18 19:49:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18018120769867776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 19:49:09.277 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:49:25.232 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:49:27.278 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:49:32.992 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:49:33.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:49:35.017 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18018246632542208 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:49:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18018246632542208 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:49:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18018246632542208 [0;39m ==> Parameters: 
2023-03-18 19:49:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18018246632542208 [0;39m <==    Updates: 1
2023-03-18 19:49:35.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18018246632542208 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 19:49:37.059 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:49:49.351 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:49:51.404 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:50:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18018351444004864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:50:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18018351444004864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:50:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18018351444004864 [0;39m ==> Parameters: 
2023-03-18 19:50:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18018351444004864 [0;39m <==    Updates: 0
2023-03-18 19:50:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18018351444004864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:50:02.992 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:50:03.890 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:50:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18018372419719168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:50:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18018372419719168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:50:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18018372419719168 [0;39m ==> Parameters: 
2023-03-18 19:50:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18018372419719168 [0;39m <==    Updates: 1
2023-03-18 19:50:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18018372419719168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:50:05.023 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:50:07.058 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:50:13.453 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:50:15.495 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:50:32.982 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:50:33.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:50:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18018498240450560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:50:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18018498240450560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:50:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18018498240450560 [0;39m ==> Parameters: 
2023-03-18 19:50:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18018498240450560 [0;39m <==    Updates: 1
2023-03-18 19:50:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18018498240450560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 19:50:35.021 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:50:37.057 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:50:41.157 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:51:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18018603098050560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:51:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18018603098050560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:51:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18018603098050560 [0;39m ==> Parameters: 
2023-03-18 19:51:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18018603098050560 [0;39m <==    Updates: 0
2023-03-18 19:51:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18018603098050560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:51:02.973 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:51:03.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:51:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18018624065376256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:51:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18018624065376256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:51:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18018624065376256 [0;39m ==> Parameters: 
2023-03-18 19:51:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18018624065376256 [0;39m <==    Updates: 1
2023-03-18 19:51:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18018624065376256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:51:05.020 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:51:07.052 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:51:09.128 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:51:31.176 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:51:33.220 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:51:33.868 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:51:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18018749894496256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:51:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18018749894496256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:51:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18018749894496256 [0;39m ==> Parameters: 
2023-03-18 19:51:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18018749894496256 [0;39m <==    Updates: 1
2023-03-18 19:51:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18018749894496256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:51:39.337 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:51:55.263 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:51:57.304 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:52:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18018854810816512 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:52:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18018854810816512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:52:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18018854810816512 [0;39m ==> Parameters: 
2023-03-18 19:52:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18018854810816512 [0;39m <==    Updates: 0
2023-03-18 19:52:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18018854810816512 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:52:02.987 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:52:03.868 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:52:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18018875719421952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:52:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18018875719421952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:52:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18018875719421952 [0;39m ==> Parameters: 
2023-03-18 19:52:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18018875719421952 [0;39m <==    Updates: 1
2023-03-18 19:52:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18018875719421952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:52:05.019 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:52:07.060 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:52:19.335 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:52:21.396 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:52:33.001 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:52:33.857 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:52:35.018 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18019001611456512 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:52:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18019001611456512 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:52:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18019001611456512 [0;39m ==> Parameters: 
2023-03-18 19:52:35.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18019001611456512 [0;39m <==    Updates: 1
2023-03-18 19:52:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18019001611456512 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 19:52:37.069 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:52:43.455 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:52:45.504 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:53:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18019106427113472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:53:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18019106427113472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:53:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18019106427113472 [0;39m ==> Parameters: 
2023-03-18 19:53:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18019106427113472 [0;39m <==    Updates: 0
2023-03-18 19:53:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18019106427113472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 19:53:02.983 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:53:03.873 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:53:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18019127394439168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:53:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18019127394439168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:53:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18019127394439168 [0;39m ==> Parameters: 
2023-03-18 19:53:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18019127394439168 [0;39m <==    Updates: 1
2023-03-18 19:53:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18019127394439168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:53:07.088 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:53:09.138 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:53:11.169 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:53:32.991 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:53:33.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:53:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18019253219364864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:53:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18019253219364864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:53:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18019253219364864 [0;39m ==> Parameters: 
2023-03-18 19:53:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18019253219364864 [0;39m <==    Updates: 1
2023-03-18 19:53:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18019253219364864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 19:53:35.022 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:53:37.058 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:53:39.120 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:54:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18019358076964864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:54:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18019358076964864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:54:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18019358076964864 [0;39m ==> Parameters: 
2023-03-18 19:54:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18019358076964864 [0;39m <==    Updates: 0
2023-03-18 19:54:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18019358076964864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 19:54:01.172 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:54:03.207 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:54:03.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:54:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18019379048484864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:54:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18019379048484864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:54:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18019379048484864 [0;39m ==> Parameters: 
2023-03-18 19:54:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18019379048484864 [0;39m <==    Updates: 1
2023-03-18 19:54:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18019379048484864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 19:54:05.237 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:54:07.277 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:54:28.258 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:54:32.987 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:54:33.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:54:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18019504869216256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:54:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18019504869216256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:54:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18019504869216256 [0;39m ==> Parameters: 
2023-03-18 19:54:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18019504869216256 [0;39m <==    Updates: 1
2023-03-18 19:54:35.004 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18019504869216256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 19:54:37.085 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:54:50.306 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:54:52.337 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:55:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18019609726816256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:55:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18019609726816256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:55:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18019609726816256 [0;39m ==> Parameters: 
2023-03-18 19:55:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18019609726816256 [0;39m <==    Updates: 0
2023-03-18 19:55:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18019609726816256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:55:03.887 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:55:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18019630698336256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:55:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18019630698336256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:55:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18019630698336256 [0;39m ==> Parameters: 
2023-03-18 19:55:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18019630698336256 [0;39m <==    Updates: 1
2023-03-18 19:55:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18019630698336256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:55:05.020 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:55:07.051 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:55:14.374 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:55:16.412 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:55:32.971 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:55:33.837 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:55:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18019756519067648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:55:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18019756519067648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:55:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18019756519067648 [0;39m ==> Parameters: 
2023-03-18 19:55:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18019756519067648 [0;39m <==    Updates: 1
2023-03-18 19:55:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18019756519067648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:55:37.070 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:55:39.109 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:55:41.163 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:56:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18019861401833472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:56:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18019861401833472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:56:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18019861401833472 [0;39m ==> Parameters: 
2023-03-18 19:56:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18019861401833472 [0;39m <==    Updates: 0
2023-03-18 19:56:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18019861401833472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 19:56:03.873 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:56:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18019882373353472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:56:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18019882373353472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:56:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18019882373353472 [0;39m ==> Parameters: 
2023-03-18 19:56:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18019882373353472 [0;39m <==    Updates: 1
2023-03-18 19:56:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18019882373353472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 19:56:05.024 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:56:07.053 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:56:09.089 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:56:31.130 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:56:33.161 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:56:33.864 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:56:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18020008198279168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:56:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18020008198279168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:56:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18020008198279168 [0;39m ==> Parameters: 
2023-03-18 19:56:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18020008198279168 [0;39m <==    Updates: 1
2023-03-18 19:56:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18020008198279168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 19:56:35.190 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:56:37.232 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:56:39.262 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:56:55.208 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:56:57.252 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:57:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18020113051684864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:57:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18020113051684864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:57:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18020113051684864 [0;39m ==> Parameters: 
2023-03-18 19:57:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18020113051684864 [0;39m <==    Updates: 0
2023-03-18 19:57:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18020113051684864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 19:57:02.990 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:57:03.838 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:57:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18020134027399168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:57:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18020134027399168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:57:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18020134027399168 [0;39m ==> Parameters: 
2023-03-18 19:57:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18020134027399168 [0;39m <==    Updates: 1
2023-03-18 19:57:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18020134027399168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 19:57:05.023 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:57:07.058 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:57:19.300 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:57:21.341 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:57:32.989 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:57:33.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:57:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18020259852324864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:57:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18020259852324864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:57:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18020259852324864 [0;39m ==> Parameters: 
2023-03-18 19:57:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18020259852324864 [0;39m <==    Updates: 1
2023-03-18 19:57:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18020259852324864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 19:57:37.053 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:57:43.398 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:57:45.430 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:58:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18020364764450816 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:58:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18020364764450816 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:58:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18020364764450816 [0;39m ==> Parameters: 
2023-03-18 19:58:00.026 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18020364764450816 [0;39m <==    Updates: 0
2023-03-18 19:58:00.026 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18020364764450816 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:58:02.972 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:58:03.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:58:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18020385673056256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:58:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18020385673056256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:58:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18020385673056256 [0;39m ==> Parameters: 
2023-03-18 19:58:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18020385673056256 [0;39m <==    Updates: 1
2023-03-18 19:58:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18020385673056256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:58:07.052 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:58:09.111 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:58:11.158 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:58:33.849 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:58:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18020511497981952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:58:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18020511497981952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:58:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18020511497981952 [0;39m ==> Parameters: 
2023-03-18 19:58:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18020511497981952 [0;39m <==    Updates: 1
2023-03-18 19:58:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18020511497981952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:58:37.050 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:58:39.085 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:59:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18020616418496512 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 19:59:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18020616418496512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 19:59:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18020616418496512 [0;39m ==> Parameters: 
2023-03-18 19:59:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18020616418496512 [0;39m <==    Updates: 0
2023-03-18 19:59:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18020616418496512 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 19:59:01.125 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:59:03.179 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:59:03.849 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:59:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18020637348073472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:59:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18020637348073472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:59:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18020637348073472 [0;39m ==> Parameters: 
2023-03-18 19:59:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18020637348073472 [0;39m <==    Updates: 1
2023-03-18 19:59:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18020637348073472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:59:05.203 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:59:09.296 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:59:27.261 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:59:33.008 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:59:33.873 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:59:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18020763177193472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 19:59:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18020763177193472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 19:59:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18020763177193472 [0;39m ==> Parameters: 
2023-03-18 19:59:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18020763177193472 [0;39m <==    Updates: 1
2023-03-18 19:59:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18020763177193472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 19:59:37.097 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 19:59:51.333 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:00:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18020868026404864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:00:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18020868026404864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:00:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18020868026404864 [0;39m ==> Parameters: 
2023-03-18 20:00:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18020868026404864 [0;39m <==    Updates: 0
2023-03-18 20:00:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18020868026404864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:00:02.975 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:00:03.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:00:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18020889002119168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:00:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18020889002119168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:00:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18020889002119168 [0;39m ==> Parameters: 
2023-03-18 20:00:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18020889002119168 [0;39m <==    Updates: 1
2023-03-18 20:00:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18020889002119168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 20:00:07.038 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:00:13.400 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:00:15.425 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:00:33.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:00:34.990 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:00:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18021014822850560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:00:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18021014822850560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:00:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18021014822850560 [0;39m ==> Parameters: 
2023-03-18 20:00:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18021014822850560 [0;39m <==    Updates: 1
2023-03-18 20:00:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18021014822850560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:00:37.037 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:00:41.113 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:01:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18021119680450560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:01:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18021119680450560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:01:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18021119680450560 [0;39m ==> Parameters: 
2023-03-18 20:01:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18021119680450560 [0;39m <==    Updates: 0
2023-03-18 20:01:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18021119680450560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:01:02.989 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:01:03.884 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:01:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18021140651970560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:01:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18021140651970560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:01:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18021140651970560 [0;39m ==> Parameters: 
2023-03-18 20:01:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18021140651970560 [0;39m <==    Updates: 1
2023-03-18 20:01:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18021140651970560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:01:05.021 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:01:07.052 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:01:09.085 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:01:33.181 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:01:33.846 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:01:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18021266481090560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:01:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18021266481090560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:01:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18021266481090560 [0;39m ==> Parameters: 
2023-03-18 20:01:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18021266481090560 [0;39m <==    Updates: 1
2023-03-18 20:01:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18021266481090560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:01:37.249 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:01:39.312 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:01:55.225 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:01:57.262 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:02:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18021371397410816 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:02:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18021371397410816 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:02:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18021371397410816 [0;39m ==> Parameters: 
2023-03-18 20:02:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18021371397410816 [0;39m <==    Updates: 0
2023-03-18 20:02:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18021371397410816 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 20:02:02.987 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:02:03.849 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:02:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18021392301821952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:02:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18021392301821952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:02:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18021392301821952 [0;39m ==> Parameters: 
2023-03-18 20:02:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18021392301821952 [0;39m <==    Updates: 1
2023-03-18 20:02:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18021392301821952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:02:05.019 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:02:07.050 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:02:19.287 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:02:21.320 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:02:32.993 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:02:33.855 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:02:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18021518151913472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:02:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18021518151913472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:02:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18021518151913472 [0;39m ==> Parameters: 
2023-03-18 20:02:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18021518151913472 [0;39m <==    Updates: 1
2023-03-18 20:02:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18021518151913472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:02:35.024 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:02:37.069 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:02:43.386 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:02:45.426 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:03:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18021623009513472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:03:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18021623009513472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:03:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18021623009513472 [0;39m ==> Parameters: 
2023-03-18 20:03:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18021623009513472 [0;39m <==    Updates: 0
2023-03-18 20:03:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18021623009513472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:03:03.868 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:03:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18021643976839168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:03:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18021643976839168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:03:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18021643976839168 [0;39m ==> Parameters: 
2023-03-18 20:03:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18021643976839168 [0;39m <==    Updates: 1
2023-03-18 20:03:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18021643976839168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:03:07.048 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:03:09.087 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:03:11.121 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:03:32.975 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:03:33.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:03:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18021769801764864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:03:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18021769801764864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:03:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18021769801764864 [0;39m ==> Parameters: 
2023-03-18 20:03:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18021769801764864 [0;39m <==    Updates: 1
2023-03-18 20:03:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18021769801764864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:03:37.038 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:03:39.085 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:04:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18021874684530688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:04:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18021874684530688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:04:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18021874684530688 [0;39m ==> Parameters: 
2023-03-18 20:04:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18021874684530688 [0;39m <==    Updates: 0
2023-03-18 20:04:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18021874684530688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 20:04:01.144 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:04:03.182 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:04:03.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:04:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18021895626690560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:04:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18021895626690560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:04:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18021895626690560 [0;39m ==> Parameters: 
2023-03-18 20:04:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18021895626690560 [0;39m <==    Updates: 1
2023-03-18 20:04:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18021895626690560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:04:05.207 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:04:09.282 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:04:25.222 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:04:27.264 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:04:33.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:04:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18022021451616256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:04:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18022021451616256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:04:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18022021451616256 [0;39m ==> Parameters: 
2023-03-18 20:04:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18022021451616256 [0;39m <==    Updates: 1
2023-03-18 20:04:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18022021451616256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:04:37.051 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:04:49.299 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:04:51.321 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:05:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18022126372130816 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:05:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18022126372130816 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:05:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18022126372130816 [0;39m ==> Parameters: 
2023-03-18 20:05:00.026 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18022126372130816 [0;39m <==    Updates: 0
2023-03-18 20:05:00.026 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18022126372130816 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:05:02.987 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:05:03.868 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:05:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18022147276541952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:05:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18022147276541952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:05:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18022147276541952 [0;39m ==> Parameters: 
2023-03-18 20:05:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18022147276541952 [0;39m <==    Updates: 1
2023-03-18 20:05:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18022147276541952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:05:07.049 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:05:13.381 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:05:15.412 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:05:32.987 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:05:33.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:05:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18022273101467648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:05:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18022273101467648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:05:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18022273101467648 [0;39m ==> Parameters: 
2023-03-18 20:05:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18022273101467648 [0;39m <==    Updates: 1
2023-03-18 20:05:35.002 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18022273101467648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 20:05:35.034 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:05:37.065 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:05:39.109 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:05:41.156 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:06:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18022378013593600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:06:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18022378013593600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:06:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18022378013593600 [0;39m ==> Parameters: 
2023-03-18 20:06:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18022378013593600 [0;39m <==    Updates: 0
2023-03-18 20:06:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18022378013593600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 20:06:02.976 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:06:03.843 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:06:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18022398955753472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:06:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18022398955753472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:06:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18022398955753472 [0;39m ==> Parameters: 
2023-03-18 20:06:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18022398955753472 [0;39m <==    Updates: 1
2023-03-18 20:06:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18022398955753472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:06:05.024 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:06:07.067 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:06:09.122 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:06:31.191 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:06:33.231 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:06:33.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:06:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18022524780679168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:06:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18022524780679168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:06:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18022524780679168 [0;39m ==> Parameters: 
2023-03-18 20:06:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18022524780679168 [0;39m <==    Updates: 1
2023-03-18 20:06:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18022524780679168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:06:37.317 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:06:39.350 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:06:55.300 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:06:57.332 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:07:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18022629634084864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:07:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18022629634084864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:07:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18022629634084864 [0;39m ==> Parameters: 
2023-03-18 20:07:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18022629634084864 [0;39m <==    Updates: 0
2023-03-18 20:07:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18022629634084864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 20:07:02.991 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:07:03.880 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:07:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18022650605604864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:07:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18022650605604864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:07:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18022650605604864 [0;39m ==> Parameters: 
2023-03-18 20:07:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18022650605604864 [0;39m <==    Updates: 1
2023-03-18 20:07:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18022650605604864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:07:05.037 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:07:07.072 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:07:19.357 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:07:21.392 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:07:32.989 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:07:33.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:07:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18022776430530560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:07:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18022776430530560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:07:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18022776430530560 [0;39m ==> Parameters: 
2023-03-18 20:07:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18022776430530560 [0;39m <==    Updates: 1
2023-03-18 20:07:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18022776430530560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:07:37.070 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:07:43.450 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:07:45.515 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:08:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18022881338462208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:08:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18022881338462208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:08:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18022881338462208 [0;39m ==> Parameters: 
2023-03-18 20:08:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18022881338462208 [0;39m <==    Updates: 0
2023-03-18 20:08:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18022881338462208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 20:08:03.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:08:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18022902251261952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:08:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18022902251261952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:08:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18022902251261952 [0;39m ==> Parameters: 
2023-03-18 20:08:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18022902251261952 [0;39m <==    Updates: 1
2023-03-18 20:08:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18022902251261952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:08:05.020 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:08:07.050 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:08:11.143 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:08:32.988 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:08:33.844 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:08:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18023028076187648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:08:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18023028076187648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:08:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18023028076187648 [0;39m ==> Parameters: 
2023-03-18 20:08:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18023028076187648 [0;39m <==    Updates: 1
2023-03-18 20:08:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18023028076187648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:08:35.018 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:08:37.051 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:08:39.109 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:09:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18023132996702208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:09:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18023132996702208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:09:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18023132996702208 [0;39m ==> Parameters: 
2023-03-18 20:09:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18023132996702208 [0;39m <==    Updates: 0
2023-03-18 20:09:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18023132996702208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 20:09:01.180 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:09:03.219 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:09:03.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:09:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18023153934667776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:09:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18023153934667776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:09:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18023153934667776 [0;39m ==> Parameters: 
2023-03-18 20:09:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18023153934667776 [0;39m <==    Updates: 1
2023-03-18 20:09:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18023153934667776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:09:05.248 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:09:09.303 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:09:27.310 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:09:32.992 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:09:33.872 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:09:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18023279755399168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:09:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18023279755399168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:09:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18023279755399168 [0;39m ==> Parameters: 
2023-03-18 20:09:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18023279755399168 [0;39m <==    Updates: 1
2023-03-18 20:09:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18023279755399168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:09:37.103 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:09:49.342 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:09:51.393 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:10:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18023384608804864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:10:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18023384608804864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:10:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18023384608804864 [0;39m ==> Parameters: 
2023-03-18 20:10:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18023384608804864 [0;39m <==    Updates: 0
2023-03-18 20:10:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18023384608804864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:10:02.991 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:10:03.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:10:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18023405580324864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:10:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18023405580324864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:10:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18023405580324864 [0;39m ==> Parameters: 
2023-03-18 20:10:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18023405580324864 [0;39m <==    Updates: 1
2023-03-18 20:10:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18023405580324864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:10:05.022 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:10:07.058 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:10:13.431 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:10:15.469 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:10:33.886 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:10:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18023531409444864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:10:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18023531409444864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:10:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18023531409444864 [0;39m ==> Parameters: 
2023-03-18 20:10:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18023531409444864 [0;39m <==    Updates: 1
2023-03-18 20:10:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18023531409444864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 20:10:35.022 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:10:37.053 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:10:41.126 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:11:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18023636262850560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:11:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18023636262850560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:11:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18023636262850560 [0;39m ==> Parameters: 
2023-03-18 20:11:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18023636262850560 [0;39m <==    Updates: 0
2023-03-18 20:11:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18023636262850560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 20:11:02.989 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:11:03.853 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:11:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18023657230176256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:11:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18023657230176256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:11:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18023657230176256 [0;39m ==> Parameters: 
2023-03-18 20:11:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18023657230176256 [0;39m <==    Updates: 1
2023-03-18 20:11:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18023657230176256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:11:05.020 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:11:07.056 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:11:09.086 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:11:31.142 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:11:33.203 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:11:33.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:11:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18023783059296256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:11:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18023783059296256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:11:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18023783059296256 [0;39m ==> Parameters: 
2023-03-18 20:11:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18023783059296256 [0;39m <==    Updates: 1
2023-03-18 20:11:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18023783059296256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:11:37.311 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:11:39.347 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:11:55.236 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:11:57.278 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:12:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18023887975616512 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:12:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18023887975616512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:12:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18023887975616512 [0;39m ==> Parameters: 
2023-03-18 20:12:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18023887975616512 [0;39m <==    Updates: 0
2023-03-18 20:12:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18023887975616512 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 20:12:02.985 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:12:03.849 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:12:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18023908884221952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:12:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18023908884221952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:12:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18023908884221952 [0;39m ==> Parameters: 
2023-03-18 20:12:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18023908884221952 [0;39m <==    Updates: 1
2023-03-18 20:12:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18023908884221952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:12:07.085 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:12:19.319 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:12:21.357 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:12:33.848 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:12:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18024034734313472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:12:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18024034734313472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:12:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18024034734313472 [0;39m ==> Parameters: 
2023-03-18 20:12:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18024034734313472 [0;39m <==    Updates: 1
2023-03-18 20:12:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18024034734313472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:12:35.042 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:12:37.083 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:12:43.401 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:12:45.433 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:13:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18024139633856512 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:13:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18024139633856512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:13:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18024139633856512 [0;39m ==> Parameters: 
2023-03-18 20:13:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18024139633856512 [0;39m <==    Updates: 0
2023-03-18 20:13:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18024139633856512 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:13:03.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:13:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18024160559239168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:13:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18024160559239168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:13:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18024160559239168 [0;39m ==> Parameters: 
2023-03-18 20:13:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18024160559239168 [0;39m <==    Updates: 1
2023-03-18 20:13:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18024160559239168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:13:07.051 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:13:09.082 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:13:11.121 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:13:33.864 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:13:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18024286384164864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:13:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18024286384164864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:13:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18024286384164864 [0;39m ==> Parameters: 
2023-03-18 20:13:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18024286384164864 [0;39m <==    Updates: 1
2023-03-18 20:13:35.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18024286384164864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 20:13:37.022 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:13:39.065 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:14:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18024391237570560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:14:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18024391237570560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:14:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18024391237570560 [0;39m ==> Parameters: 
2023-03-18 20:14:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18024391237570560 [0;39m <==    Updates: 0
2023-03-18 20:14:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18024391237570560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:14:03.166 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:14:03.870 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:14:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18024412204896256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:14:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18024412204896256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:14:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18024412204896256 [0;39m ==> Parameters: 
2023-03-18 20:14:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18024412204896256 [0;39m <==    Updates: 1
2023-03-18 20:14:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18024412204896256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:14:07.237 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:14:09.287 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:14:25.205 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:14:27.237 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:14:33.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:14:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18024538034016256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:14:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18024538034016256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:14:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18024538034016256 [0;39m ==> Parameters: 
2023-03-18 20:14:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18024538034016256 [0;39m <==    Updates: 1
2023-03-18 20:14:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18024538034016256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:14:37.051 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:14:49.279 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:14:51.320 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:15:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18024642946142208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:15:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18024642946142208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:15:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18024642946142208 [0;39m ==> Parameters: 
2023-03-18 20:15:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18024642946142208 [0;39m <==    Updates: 0
2023-03-18 20:15:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18024642946142208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:15:03.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:15:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18024663858941952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:15:05.003 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:15:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18024663858941952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:15:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18024663858941952 [0;39m ==> Parameters: 
2023-03-18 20:15:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18024663858941952 [0;39m <==    Updates: 1
2023-03-18 20:15:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18024663858941952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 20:15:07.035 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:15:13.373 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:15:15.428 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:15:32.986 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:15:33.844 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:15:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18024789709033472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:15:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18024789709033472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:15:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18024789709033472 [0;39m ==> Parameters: 
2023-03-18 20:15:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18024789709033472 [0;39m <==    Updates: 1
2023-03-18 20:15:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18024789709033472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:15:35.024 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:15:37.053 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:15:39.094 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:15:41.123 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:16:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18024894575022080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:16:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18024894575022080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:16:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18024894575022080 [0;39m ==> Parameters: 
2023-03-18 20:16:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18024894575022080 [0;39m <==    Updates: 0
2023-03-18 20:16:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18024894575022080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 20:16:03.873 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:16:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18024915538153472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:16:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18024915538153472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:16:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18024915538153472 [0;39m ==> Parameters: 
2023-03-18 20:16:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18024915538153472 [0;39m <==    Updates: 1
2023-03-18 20:16:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18024915538153472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:16:05.024 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:16:07.052 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:16:09.087 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:16:31.137 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:16:33.184 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:16:33.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:16:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18025041363079168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:16:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18025041363079168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:16:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18025041363079168 [0;39m ==> Parameters: 
2023-03-18 20:16:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18025041363079168 [0;39m <==    Updates: 1
2023-03-18 20:16:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18025041363079168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:16:35.208 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:16:39.302 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:16:55.230 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:16:57.260 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:17:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18025146212290560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:17:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18025146212290560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:17:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18025146212290560 [0;39m ==> Parameters: 
2023-03-18 20:17:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18025146212290560 [0;39m <==    Updates: 0
2023-03-18 20:17:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18025146212290560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 20:17:03.870 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:17:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18025167188004864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:17:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18025167188004864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:17:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18025167188004864 [0;39m ==> Parameters: 
2023-03-18 20:17:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18025167188004864 [0;39m <==    Updates: 1
2023-03-18 20:17:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18025167188004864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:17:05.021 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:17:07.057 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:17:21.349 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:17:32.989 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:17:33.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:17:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18025293012930560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:17:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18025293012930560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:17:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18025293012930560 [0;39m ==> Parameters: 
2023-03-18 20:17:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18025293012930560 [0;39m <==    Updates: 1
2023-03-18 20:17:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18025293012930560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:17:35.036 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:17:37.111 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:17:43.398 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:17:45.430 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:18:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18025397887307776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:18:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18025397887307776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:18:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18025397887307776 [0;39m ==> Parameters: 
2023-03-18 20:18:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18025397887307776 [0;39m <==    Updates: 0
2023-03-18 20:18:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18025397887307776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:18:03.868 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:18:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18025418833661952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:18:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18025418833661952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:18:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18025418833661952 [0;39m ==> Parameters: 
2023-03-18 20:18:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18025418833661952 [0;39m <==    Updates: 1
2023-03-18 20:18:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18025418833661952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:18:07.086 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:18:09.126 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:18:11.174 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:18:32.987 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:18:33.874 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:18:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18025544662781952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:18:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18025544662781952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:18:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18025544662781952 [0;39m ==> Parameters: 
2023-03-18 20:18:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18025544662781952 [0;39m <==    Updates: 1
2023-03-18 20:18:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18025544662781952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:18:35.035 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:18:37.068 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:18:39.109 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:19:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18025649545547776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:19:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18025649545547776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:19:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18025649545547776 [0;39m ==> Parameters: 
2023-03-18 20:19:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18025649545547776 [0;39m <==    Updates: 0
2023-03-18 20:19:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18025649545547776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 20:19:01.178 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:19:03.216 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:19:03.875 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:19:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18025670517067776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:19:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18025670517067776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:19:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18025670517067776 [0;39m ==> Parameters: 
2023-03-18 20:19:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18025670517067776 [0;39m <==    Updates: 1
2023-03-18 20:19:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18025670517067776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 20:19:05.248 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:19:07.284 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:19:26.232 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:19:28.261 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:19:32.991 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:19:33.872 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:19:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18025796337799168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:19:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18025796337799168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:19:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18025796337799168 [0;39m ==> Parameters: 
2023-03-18 20:19:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18025796337799168 [0;39m <==    Updates: 1
2023-03-18 20:19:35.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18025796337799168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 20:19:35.023 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:19:37.060 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:19:50.302 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:19:52.333 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:20:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18025901182816256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:20:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18025901182816256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:20:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18025901182816256 [0;39m ==> Parameters: 
2023-03-18 20:20:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18025901182816256 [0;39m <==    Updates: 0
2023-03-18 20:20:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18025901182816256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:20:03.870 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:20:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18025922162724864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:20:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18025922162724864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:20:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18025922162724864 [0;39m ==> Parameters: 
2023-03-18 20:20:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18025922162724864 [0;39m <==    Updates: 1
2023-03-18 20:20:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18025922162724864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 20:20:07.037 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:20:14.375 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:20:16.409 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:20:32.974 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:20:33.853 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:20:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18026047987650560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:20:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18026047987650560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:20:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18026047987650560 [0;39m ==> Parameters: 
2023-03-18 20:20:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18026047987650560 [0;39m <==    Updates: 1
2023-03-18 20:20:35.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18026047987650560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 20:20:35.021 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:20:37.070 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:20:39.119 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:20:41.174 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:21:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18026152845250560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:21:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18026152845250560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:21:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18026152845250560 [0;39m ==> Parameters: 
2023-03-18 20:21:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18026152845250560 [0;39m <==    Updates: 0
2023-03-18 20:21:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18026152845250560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:21:02.973 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:21:03.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:21:05.020 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18026173879685120 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:21:05.020 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:21:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18026173879685120 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:21:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18026173879685120 [0;39m ==> Parameters: 
2023-03-18 20:21:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18026173879685120 [0;39m <==    Updates: 1
2023-03-18 20:21:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18026173879685120 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 20:21:07.052 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:21:09.097 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:21:31.173 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:21:33.220 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:21:33.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:21:35.018 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18026299700416512 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:21:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18026299700416512 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:21:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18026299700416512 [0;39m ==> Parameters: 
2023-03-18 20:21:35.025 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18026299700416512 [0;39m <==    Updates: 1
2023-03-18 20:21:35.025 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18026299700416512 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:21:37.298 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:21:39.320 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:21:55.263 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:21:57.304 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:22:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18026404562210816 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:22:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18026404562210816 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:22:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18026404562210816 [0;39m ==> Parameters: 
2023-03-18 20:22:00.026 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18026404562210816 [0;39m <==    Updates: 0
2023-03-18 20:22:00.026 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18026404562210816 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:22:02.970 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:22:03.848 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:22:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18026425462427648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:22:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18026425462427648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:22:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18026425462427648 [0;39m ==> Parameters: 
2023-03-18 20:22:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18026425462427648 [0;39m <==    Updates: 1
2023-03-18 20:22:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18026425462427648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:22:07.034 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:22:19.341 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:22:21.380 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:22:33.008 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:22:33.859 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:22:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18026551320907776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:22:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18026551320907776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:22:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18026551320907776 [0;39m ==> Parameters: 
2023-03-18 20:22:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18026551320907776 [0;39m <==    Updates: 1
2023-03-18 20:22:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18026551320907776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:22:35.060 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:22:37.108 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:22:43.411 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:22:45.455 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:23:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18026656170119168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:23:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18026656170119168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:23:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18026656170119168 [0;39m ==> Parameters: 
2023-03-18 20:23:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18026656170119168 [0;39m <==    Updates: 0
2023-03-18 20:23:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18026656170119168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š17æ¯«ç§’
2023-03-18 20:23:03.864 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:23:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18026677170999296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:23:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18026677170999296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:23:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18026677170999296 [0;39m ==> Parameters: 
2023-03-18 20:23:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18026677170999296 [0;39m <==    Updates: 1
2023-03-18 20:23:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18026677170999296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 20:23:07.023 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:23:11.099 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:23:32.975 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:23:33.886 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:23:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18026802966564864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:23:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18026802966564864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:23:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18026802966564864 [0;39m ==> Parameters: 
2023-03-18 20:23:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18026802966564864 [0;39m <==    Updates: 1
2023-03-18 20:23:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18026802966564864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:23:37.051 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:23:39.101 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:24:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18026907824164864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:24:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18026907824164864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:24:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18026907824164864 [0;39m ==> Parameters: 
2023-03-18 20:24:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18026907824164864 [0;39m <==    Updates: 0
2023-03-18 20:24:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18026907824164864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 20:24:03.182 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:24:03.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:24:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18026928791490560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:24:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18026928791490560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:24:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18026928791490560 [0;39m ==> Parameters: 
2023-03-18 20:24:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18026928791490560 [0;39m <==    Updates: 1
2023-03-18 20:24:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18026928791490560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:24:05.222 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:24:09.290 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:24:25.220 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:24:27.264 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:24:33.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:24:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18027054616416256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:24:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18027054616416256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:24:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18027054616416256 [0;39m ==> Parameters: 
2023-03-18 20:24:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18027054616416256 [0;39m <==    Updates: 1
2023-03-18 20:24:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18027054616416256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:24:37.069 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:24:49.305 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:24:51.375 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:25:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18027159474016256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:25:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18027159474016256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:25:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18027159474016256 [0;39m ==> Parameters: 
2023-03-18 20:25:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18027159474016256 [0;39m <==    Updates: 0
2023-03-18 20:25:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18027159474016256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:25:02.971 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:25:03.849 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:25:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18027180441341952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:25:05.003 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:25:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18027180441341952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:25:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18027180441341952 [0;39m ==> Parameters: 
2023-03-18 20:25:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18027180441341952 [0;39m <==    Updates: 1
2023-03-18 20:25:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18027180441341952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:25:07.034 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:25:13.403 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:25:15.456 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:25:32.987 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:25:33.874 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:25:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18027306295627776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:25:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18027306295627776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:25:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18027306295627776 [0;39m ==> Parameters: 
2023-03-18 20:25:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18027306295627776 [0;39m <==    Updates: 1
2023-03-18 20:25:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18027306295627776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:25:37.085 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:25:39.125 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:25:41.174 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:26:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18027411149033472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:26:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18027411149033472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:26:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18027411149033472 [0;39m ==> Parameters: 
2023-03-18 20:26:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18027411149033472 [0;39m <==    Updates: 0
2023-03-18 20:26:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18027411149033472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:26:02.992 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:26:03.872 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:26:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18027432120553472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:26:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18027432120553472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:26:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18027432120553472 [0;39m ==> Parameters: 
2023-03-18 20:26:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18027432120553472 [0;39m <==    Updates: 1
2023-03-18 20:26:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18027432120553472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 20:26:05.039 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:26:07.087 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:26:09.122 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:26:31.193 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:26:33.230 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:26:33.872 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:26:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18027557941284864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:26:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18027557941284864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:26:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18027557941284864 [0;39m ==> Parameters: 
2023-03-18 20:26:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18027557941284864 [0;39m <==    Updates: 1
2023-03-18 20:26:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18027557941284864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:26:35.262 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:26:37.300 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:26:39.332 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:26:55.283 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:26:57.308 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:27:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18027662798884864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:27:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18027662798884864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:27:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18027662798884864 [0;39m ==> Parameters: 
2023-03-18 20:27:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18027662798884864 [0;39m <==    Updates: 0
2023-03-18 20:27:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18027662798884864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:27:03.843 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:27:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18027683766210560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:27:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18027683766210560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:27:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18027683766210560 [0;39m ==> Parameters: 
2023-03-18 20:27:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18027683766210560 [0;39m <==    Updates: 1
2023-03-18 20:27:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18027683766210560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:27:05.021 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:27:07.055 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:27:19.354 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:27:21.399 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:27:32.957 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:27:33.853 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:27:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18027809595330560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:27:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18027809595330560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:27:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18027809595330560 [0;39m ==> Parameters: 
2023-03-18 20:27:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18027809595330560 [0;39m <==    Updates: 1
2023-03-18 20:27:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18027809595330560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:27:37.021 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:27:43.430 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:27:45.482 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:28:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18027914448736256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:28:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18027914448736256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:28:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18027914448736256 [0;39m ==> Parameters: 
2023-03-18 20:28:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18027914448736256 [0;39m <==    Updates: 0
2023-03-18 20:28:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18027914448736256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:28:02.988 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:28:03.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:28:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18027935420256256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:28:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18027935420256256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:28:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18027935420256256 [0;39m ==> Parameters: 
2023-03-18 20:28:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18027935420256256 [0;39m <==    Updates: 1
2023-03-18 20:28:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18027935420256256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:28:05.020 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:28:07.051 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:28:09.111 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:28:11.158 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:28:32.988 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:28:33.874 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:28:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18028061249376256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:28:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18028061249376256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:28:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18028061249376256 [0;39m ==> Parameters: 
2023-03-18 20:28:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18028061249376256 [0;39m <==    Updates: 1
2023-03-18 20:28:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18028061249376256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 20:28:35.019 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:28:37.084 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:28:39.125 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:29:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18028166119559168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:29:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18028166119559168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:29:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18028166119559168 [0;39m ==> Parameters: 
2023-03-18 20:29:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18028166119559168 [0;39m <==    Updates: 0
2023-03-18 20:29:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18028166119559168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 20:29:01.185 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:29:03.210 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:29:03.865 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:29:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18028187124633600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:29:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18028187124633600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:29:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18028187124633600 [0;39m ==> Parameters: 
2023-03-18 20:29:05.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18028187124633600 [0;39m <==    Updates: 1
2023-03-18 20:29:05.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18028187124633600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:29:05.248 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:29:09.342 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:29:27.277 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:29:32.991 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:29:33.872 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:29:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18028312920199168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:29:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18028312920199168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:29:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18028312920199168 [0;39m ==> Parameters: 
2023-03-18 20:29:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18028312920199168 [0;39m <==    Updates: 1
2023-03-18 20:29:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18028312920199168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:29:35.023 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:29:37.058 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:29:49.337 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:29:51.369 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:30:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18028417773604864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:30:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18028417773604864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:30:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18028417773604864 [0;39m ==> Parameters: 
2023-03-18 20:30:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18028417773604864 [0;39m <==    Updates: 0
2023-03-18 20:30:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18028417773604864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:30:02.990 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:30:03.870 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:30:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18028438745124864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:30:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18028438745124864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:30:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18028438745124864 [0;39m ==> Parameters: 
2023-03-18 20:30:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18028438745124864 [0;39m <==    Updates: 1
2023-03-18 20:30:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18028438745124864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:30:07.057 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:30:15.425 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:30:32.974 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:30:33.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:30:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18028564570050560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:30:35.005 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:30:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18028564570050560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:30:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18028564570050560 [0;39m ==> Parameters: 
2023-03-18 20:30:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18028564570050560 [0;39m <==    Updates: 1
2023-03-18 20:30:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18028564570050560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:30:37.037 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:30:39.089 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:30:41.113 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:31:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18028669423456256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:31:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18028669423456256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:31:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18028669423456256 [0;39m ==> Parameters: 
2023-03-18 20:31:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18028669423456256 [0;39m <==    Updates: 0
2023-03-18 20:31:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18028669423456256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 20:31:03.870 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:31:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18028690394976256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:31:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18028690394976256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:31:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18028690394976256 [0;39m ==> Parameters: 
2023-03-18 20:31:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18028690394976256 [0;39m <==    Updates: 1
2023-03-18 20:31:05.004 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18028690394976256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 20:31:05.035 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:31:07.070 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:31:09.127 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:31:31.194 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:31:33.868 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:31:35.018 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18028816282816512 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:31:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18028816282816512 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:31:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18028816282816512 [0;39m ==> Parameters: 
2023-03-18 20:31:35.026 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18028816282816512 [0;39m <==    Updates: 1
2023-03-18 20:31:35.026 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18028816282816512 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:31:35.289 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:31:37.328 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:31:58.304 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:32:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18028921140416512 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:32:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18028921140416512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:32:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18028921140416512 [0;39m ==> Parameters: 
2023-03-18 20:32:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18028921140416512 [0;39m <==    Updates: 0
2023-03-18 20:32:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18028921140416512 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:32:02.971 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:32:03.837 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:32:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18028942074187776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:32:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18028942074187776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:32:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18028942074187776 [0;39m ==> Parameters: 
2023-03-18 20:32:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18028942074187776 [0;39m <==    Updates: 1
2023-03-18 20:32:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18028942074187776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:32:07.049 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:32:20.356 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:32:22.387 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:32:32.992 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:32:33.873 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:32:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18029067903307776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:32:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18029067903307776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:32:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18029067903307776 [0;39m ==> Parameters: 
2023-03-18 20:32:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18029067903307776 [0;39m <==    Updates: 1
2023-03-18 20:32:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18029067903307776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 20:32:35.025 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:32:37.053 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:32:46.455 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:33:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18029172794462208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:33:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18029172794462208 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:33:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18029172794462208 [0;39m ==> Parameters: 
2023-03-18 20:33:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18029172794462208 [0;39m <==    Updates: 0
2023-03-18 20:33:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18029172794462208 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:33:02.992 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:33:03.853 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:33:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18029193728233472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:33:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18029193728233472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:33:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18029193728233472 [0;39m ==> Parameters: 
2023-03-18 20:33:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18029193728233472 [0;39m <==    Updates: 1
2023-03-18 20:33:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18029193728233472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 20:33:05.024 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:33:07.061 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:33:09.106 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:33:11.136 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:33:32.975 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:33:33.865 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:33:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18029319553159168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:33:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18029319553159168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:33:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18029319553159168 [0;39m ==> Parameters: 
2023-03-18 20:33:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18029319553159168 [0;39m <==    Updates: 1
2023-03-18 20:33:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18029319553159168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:33:35.023 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:33:37.089 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:33:39.128 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:34:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18029424402370560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:34:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18029424402370560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:34:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18029424402370560 [0;39m ==> Parameters: 
2023-03-18 20:34:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18029424402370560 [0;39m <==    Updates: 0
2023-03-18 20:34:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18029424402370560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 20:34:01.182 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:34:03.212 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:34:03.837 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:34:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18029445373890560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:34:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18029445373890560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:34:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18029445373890560 [0;39m ==> Parameters: 
2023-03-18 20:34:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18029445373890560 [0;39m <==    Updates: 1
2023-03-18 20:34:05.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18029445373890560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 20:34:05.237 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:34:07.280 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:34:09.322 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:34:25.250 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:34:27.286 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:34:32.988 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:34:33.868 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:34:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18029571207204864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:34:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18029571207204864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:34:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18029571207204864 [0;39m ==> Parameters: 
2023-03-18 20:34:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18029571207204864 [0;39m <==    Updates: 1
2023-03-18 20:34:35.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18029571207204864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 20:34:35.021 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:34:37.050 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:34:49.328 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:34:51.351 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:35:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18029676115136512 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:35:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18029676115136512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:35:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18029676115136512 [0;39m ==> Parameters: 
2023-03-18 20:35:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18029676115136512 [0;39m <==    Updates: 0
2023-03-18 20:35:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18029676115136512 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-18 20:35:02.972 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:35:03.853 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:35:05.003 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:35:05.019 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18029697090850816 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:35:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18029697090850816 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:35:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18029697090850816 [0;39m ==> Parameters: 
2023-03-18 20:35:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18029697090850816 [0;39m <==    Updates: 1
2023-03-18 20:35:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18029697090850816 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 20:35:07.034 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:35:15.412 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:35:32.986 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:35:33.849 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:35:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18029822882222080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:35:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18029822882222080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:35:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18029822882222080 [0;39m ==> Parameters: 
2023-03-18 20:35:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18029822882222080 [0;39m <==    Updates: 1
2023-03-18 20:35:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18029822882222080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 20:35:35.026 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:35:37.083 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:35:39.131 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:35:41.157 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:36:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18029927731433472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:36:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18029927731433472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:36:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18029927731433472 [0;39m ==> Parameters: 
2023-03-18 20:36:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18029927731433472 [0;39m <==    Updates: 0
2023-03-18 20:36:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18029927731433472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 20:36:02.969 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:36:03.853 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:36:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18029948698759168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:36:05.007 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:36:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18029948698759168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:36:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18029948698759168 [0;39m ==> Parameters: 
2023-03-18 20:36:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18029948698759168 [0;39m <==    Updates: 1
2023-03-18 20:36:05.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18029948698759168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 20:36:07.038 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:36:09.068 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:36:33.137 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:36:33.872 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:36:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18030074523684864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:36:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18030074523684864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:36:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18030074523684864 [0;39m ==> Parameters: 
2023-03-18 20:36:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18030074523684864 [0;39m <==    Updates: 1
2023-03-18 20:36:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18030074523684864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:36:35.161 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:36:37.191 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:36:39.230 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:36:55.176 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:36:57.207 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:37:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18030179381284864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:37:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18030179381284864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:37:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18030179381284864 [0;39m ==> Parameters: 
2023-03-18 20:37:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18030179381284864 [0;39m <==    Updates: 0
2023-03-18 20:37:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18030179381284864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 20:37:02.974 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:37:03.853 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:37:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18030200348610560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:37:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18030200348610560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:37:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18030200348610560 [0;39m ==> Parameters: 
2023-03-18 20:37:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18030200348610560 [0;39m <==    Updates: 1
2023-03-18 20:37:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18030200348610560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 20:37:05.021 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:37:07.052 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:37:19.258 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:37:21.298 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:37:32.965 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:37:33.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:37:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18030326177730560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:37:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18030326177730560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:37:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18030326177730560 [0;39m ==> Parameters: 
2023-03-18 20:37:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18030326177730560 [0;39m <==    Updates: 1
2023-03-18 20:37:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18030326177730560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:37:37.036 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:37:45.353 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:38:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18030431098245120 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:38:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18030431098245120 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:38:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18030431098245120 [0;39m ==> Parameters: 
2023-03-18 20:38:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18030431098245120 [0;39m <==    Updates: 0
2023-03-18 20:38:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18030431098245120 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 20:38:03.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:38:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18030451998461952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:38:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18030451998461952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:38:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18030451998461952 [0;39m ==> Parameters: 
2023-03-18 20:38:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18030451998461952 [0;39m <==    Updates: 1
2023-03-18 20:38:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18030451998461952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:38:05.018 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:38:07.049 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:38:09.078 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:38:11.111 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:38:33.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:38:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18030577827581952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:38:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18030577827581952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:38:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18030577827581952 [0;39m ==> Parameters: 
2023-03-18 20:38:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18030577827581952 [0;39m <==    Updates: 1
2023-03-18 20:38:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18030577827581952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:38:35.018 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:38:37.056 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:38:39.089 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:39:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18030682701959168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:39:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18030682701959168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:39:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18030682701959168 [0;39m ==> Parameters: 
2023-03-18 20:39:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18030682701959168 [0;39m <==    Updates: 0
2023-03-18 20:39:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18030682701959168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-18 20:39:01.108 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:39:03.147 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:39:03.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:39:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18030703681867776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:39:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18030703681867776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:39:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18030703681867776 [0;39m ==> Parameters: 
2023-03-18 20:39:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18030703681867776 [0;39m <==    Updates: 1
2023-03-18 20:39:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18030703681867776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:39:05.170 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:39:07.210 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:39:09.254 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:39:25.209 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:39:27.234 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:39:32.975 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:39:33.872 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:39:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18030829502599168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:39:35.007 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:39:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18030829502599168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:39:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18030829502599168 [0;39m ==> Parameters: 
2023-03-18 20:39:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18030829502599168 [0;39m <==    Updates: 1
2023-03-18 20:39:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18030829502599168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:39:37.039 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:39:49.302 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:39:51.332 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:40:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18030934351810560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:40:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18030934351810560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:40:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18030934351810560 [0;39m ==> Parameters: 
2023-03-18 20:40:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18030934351810560 [0;39m <==    Updates: 0
2023-03-18 20:40:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18030934351810560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-18 20:40:02.990 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:40:03.870 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:40:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18030955327524864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:40:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18030955327524864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:40:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18030955327524864 [0;39m ==> Parameters: 
2023-03-18 20:40:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18030955327524864 [0;39m <==    Updates: 1
2023-03-18 20:40:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18030955327524864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 20:40:05.022 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:40:07.058 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:40:13.377 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:40:15.415 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:40:32.972 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:40:33.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:40:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18031081156644864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:40:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18031081156644864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:40:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18031081156644864 [0;39m ==> Parameters: 
2023-03-18 20:40:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18031081156644864 [0;39m <==    Updates: 1
2023-03-18 20:40:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18031081156644864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:40:37.052 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:40:41.110 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:41:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18031186010050560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:41:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18031186010050560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:41:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18031186010050560 [0;39m ==> Parameters: 
2023-03-18 20:41:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18031186010050560 [0;39m <==    Updates: 0
2023-03-18 20:41:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18031186010050560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 20:41:02.989 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:41:03.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:41:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18031206973181952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:41:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18031206973181952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:41:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18031206973181952 [0;39m ==> Parameters: 
2023-03-18 20:41:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18031206973181952 [0;39m <==    Updates: 1
2023-03-18 20:41:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18031206973181952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 20:41:05.018 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:41:07.049 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:41:09.070 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:41:31.112 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:41:33.142 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:41:33.865 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:41:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18031332831662080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:41:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18031332831662080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:41:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18031332831662080 [0;39m ==> Parameters: 
2023-03-18 20:41:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18031332831662080 [0;39m <==    Updates: 1
2023-03-18 20:41:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18031332831662080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 20:41:35.173 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:41:39.226 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:41:57.235 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:42:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18031437714427904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:42:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18031437714427904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:42:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18031437714427904 [0;39m ==> Parameters: 
2023-03-18 20:42:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18031437714427904 [0;39m <==    Updates: 0
2023-03-18 20:42:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18031437714427904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-18 20:42:02.955 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:42:03.854 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:42:04.993 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:42:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18031458656587776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:42:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18031458656587776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:42:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18031458656587776 [0;39m ==> Parameters: 
2023-03-18 20:42:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18031458656587776 [0;39m <==    Updates: 1
2023-03-18 20:42:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18031458656587776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 20:42:07.018 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:42:19.263 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:42:21.292 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:42:32.963 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:42:33.865 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:42:34.993 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:42:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18031584481513472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:42:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18031584481513472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:42:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18031584481513472 [0;39m ==> Parameters: 
2023-03-18 20:42:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18031584481513472 [0;39m <==    Updates: 1
2023-03-18 20:42:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18031584481513472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 20:42:37.024 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:42:45.380 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:43:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18031689334919168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:43:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18031689334919168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:43:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18031689334919168 [0;39m ==> Parameters: 
2023-03-18 20:43:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18031689334919168 [0;39m <==    Updates: 0
2023-03-18 20:43:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18031689334919168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 20:43:02.975 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:43:03.858 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:43:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18031710310633472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:43:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18031710310633472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:43:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18031710310633472 [0;39m ==> Parameters: 
2023-03-18 20:43:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18031710310633472 [0;39m <==    Updates: 1
2023-03-18 20:43:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18031710310633472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:43:07.038 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:43:09.075 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:43:11.112 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:43:33.853 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:43:34.989 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:43:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18031836127170560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:43:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18031836127170560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:43:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18031836127170560 [0;39m ==> Parameters: 
2023-03-18 20:43:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18031836127170560 [0;39m <==    Updates: 1
2023-03-18 20:43:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18031836127170560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 20:43:37.020 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:43:39.051 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:44:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18031940988964864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:44:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18031940988964864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:44:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18031940988964864 [0;39m ==> Parameters: 
2023-03-18 20:44:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18031940988964864 [0;39m <==    Updates: 0
2023-03-18 20:44:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18031940988964864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 20:44:01.095 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:44:03.134 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:44:03.853 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:44:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18031961956290560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:44:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18031961956290560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:44:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18031961956290560 [0;39m ==> Parameters: 
2023-03-18 20:44:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18031961956290560 [0;39m <==    Updates: 1
2023-03-18 20:44:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18031961956290560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:44:05.190 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:44:07.226 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:44:09.251 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:44:25.174 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:44:27.219 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:44:32.973 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:44:33.841 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:44:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18032087781216256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:44:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18032087781216256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:44:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18032087781216256 [0;39m ==> Parameters: 
2023-03-18 20:44:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18032087781216256 [0;39m <==    Updates: 1
2023-03-18 20:44:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18032087781216256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:44:35.020 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:44:37.062 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:44:49.265 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:44:51.294 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:45:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18032192701730816 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:45:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18032192701730816 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:45:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18032192701730816 [0;39m ==> Parameters: 
2023-03-18 20:45:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18032192701730816 [0;39m <==    Updates: 0
2023-03-18 20:45:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18032192701730816 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 20:45:03.855 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:45:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18032213635502080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:45:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18032213635502080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:45:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18032213635502080 [0;39m ==> Parameters: 
2023-03-18 20:45:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18032213635502080 [0;39m <==    Updates: 1
2023-03-18 20:45:05.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18032213635502080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:45:07.041 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:45:15.351 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:45:33.849 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:45:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18032339456233472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:45:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18032339456233472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:45:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18032339456233472 [0;39m ==> Parameters: 
2023-03-18 20:45:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18032339456233472 [0;39m <==    Updates: 1
2023-03-18 20:45:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18032339456233472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 20:45:35.024 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:45:37.056 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:45:39.087 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:45:41.116 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:46:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18032444309639168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:46:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18032444309639168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:46:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18032444309639168 [0;39m ==> Parameters: 
2023-03-18 20:46:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18032444309639168 [0;39m <==    Updates: 0
2023-03-18 20:46:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18032444309639168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-18 20:46:02.976 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:46:03.887 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:46:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18032465285353472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:46:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18032465285353472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:46:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18032465285353472 [0;39m ==> Parameters: 
2023-03-18 20:46:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18032465285353472 [0;39m <==    Updates: 1
2023-03-18 20:46:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18032465285353472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:46:07.039 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:46:09.075 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:46:31.129 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:46:33.152 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:46:33.853 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:46:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18032591114473472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:46:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18032591114473472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:46:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18032591114473472 [0;39m ==> Parameters: 
2023-03-18 20:46:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18032591114473472 [0;39m <==    Updates: 1
2023-03-18 20:46:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18032591114473472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:46:35.194 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:46:39.261 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:46:57.238 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:47:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18032695963684864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:47:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18032695963684864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:47:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18032695963684864 [0;39m ==> Parameters: 
2023-03-18 20:47:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18032695963684864 [0;39m <==    Updates: 0
2023-03-18 20:47:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18032695963684864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 20:47:02.974 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:47:03.853 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:47:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18032716935204864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:47:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18032716935204864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:47:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18032716935204864 [0;39m ==> Parameters: 
2023-03-18 20:47:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18032716935204864 [0;39m <==    Updates: 1
2023-03-18 20:47:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18032716935204864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:47:07.083 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:47:21.322 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:47:32.957 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:47:33.837 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:47:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18032842755936256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:47:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18032842755936256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:47:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18032842755936256 [0;39m ==> Parameters: 
2023-03-18 20:47:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18032842755936256 [0;39m <==    Updates: 1
2023-03-18 20:47:35.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18032842755936256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-18 20:47:37.019 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:47:43.355 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:47:45.382 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:48:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18032947676450816 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:48:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18032947676450816 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:48:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18032947676450816 [0;39m ==> Parameters: 
2023-03-18 20:48:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18032947676450816 [0;39m <==    Updates: 0
2023-03-18 20:48:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18032947676450816 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 20:48:02.964 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:48:03.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:48:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18032968576667648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:48:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18032968576667648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:48:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18032968576667648 [0;39m ==> Parameters: 
2023-03-18 20:48:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18032968576667648 [0;39m <==    Updates: 1
2023-03-18 20:48:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18032968576667648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 20:48:07.034 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:48:11.117 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:48:32.963 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:48:33.854 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:48:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18033094435147776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:48:35.009 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:48:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18033094435147776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:48:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18033094435147776 [0;39m ==> Parameters: 
2023-03-18 20:48:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18033094435147776 [0;39m <==    Updates: 1
2023-03-18 20:48:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18033094435147776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:48:37.040 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:48:39.065 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:49:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18033199288553472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:49:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18033199288553472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:49:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18033199288553472 [0;39m ==> Parameters: 
2023-03-18 20:49:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18033199288553472 [0;39m <==    Updates: 0
2023-03-18 20:49:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18033199288553472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-18 20:49:01.091 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:49:03.124 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:49:03.866 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:49:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18033220234907648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:49:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18033220234907648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:49:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18033220234907648 [0;39m ==> Parameters: 
2023-03-18 20:49:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18033220234907648 [0;39m <==    Updates: 1
2023-03-18 20:49:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18033220234907648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:49:05.147 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:49:07.193 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:49:09.231 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:49:27.209 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:49:32.991 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:49:33.862 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:49:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18033346080804864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:49:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18033346080804864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:49:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18033346080804864 [0;39m ==> Parameters: 
2023-03-18 20:49:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18033346080804864 [0;39m <==    Updates: 1
2023-03-18 20:49:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18033346080804864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:49:35.022 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:49:37.052 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:49:49.246 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:49:51.274 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:50:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18033450938404864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:50:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18033450938404864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:50:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18033450938404864 [0;39m ==> Parameters: 
2023-03-18 20:50:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18033450938404864 [0;39m <==    Updates: 0
2023-03-18 20:50:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18033450938404864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 20:50:02.974 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:50:03.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:50:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18033471909924864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:50:05.006 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:50:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18033471909924864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:50:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18033471909924864 [0;39m ==> Parameters: 
2023-03-18 20:50:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18033471909924864 [0;39m <==    Updates: 1
2023-03-18 20:50:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18033471909924864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:50:07.036 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:50:15.355 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:50:32.966 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:50:33.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:50:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18033597730656256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:50:35.004 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:50:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18033597730656256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:50:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18033597730656256 [0;39m ==> Parameters: 
2023-03-18 20:50:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18033597730656256 [0;39m <==    Updates: 1
2023-03-18 20:50:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18033597730656256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:50:37.035 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:50:41.110 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:51:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18033702588256256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:51:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18033702588256256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:51:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18033702588256256 [0;39m ==> Parameters: 
2023-03-18 20:51:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18033702588256256 [0;39m <==    Updates: 0
2023-03-18 20:51:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18033702588256256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 20:51:02.965 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:51:03.844 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:51:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18033723563970560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:51:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18033723563970560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:51:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18033723563970560 [0;39m ==> Parameters: 
2023-03-18 20:51:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18033723563970560 [0;39m <==    Updates: 1
2023-03-18 20:51:05.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18033723563970560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 20:51:07.036 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:51:09.068 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:51:31.118 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:51:33.158 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:51:33.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:51:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18033849405673472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:51:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18033849405673472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:51:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18033849405673472 [0;39m ==> Parameters: 
2023-03-18 20:51:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18033849405673472 [0;39m <==    Updates: 1
2023-03-18 20:51:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18033849405673472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:51:35.211 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:51:39.278 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:51:57.216 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:52:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18033954263273472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:52:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18033954263273472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:52:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18033954263273472 [0;39m ==> Parameters: 
2023-03-18 20:52:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18033954263273472 [0;39m <==    Updates: 0
2023-03-18 20:52:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18033954263273472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-18 20:52:02.977 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:52:03.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:52:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18033975238987776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:52:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18033975238987776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:52:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18033975238987776 [0;39m ==> Parameters: 
2023-03-18 20:52:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18033975238987776 [0;39m <==    Updates: 1
2023-03-18 20:52:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18033975238987776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-18 20:52:07.061 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:52:19.262 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:52:21.299 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:52:32.962 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:52:33.872 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:52:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18034101063913472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:52:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18034101063913472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:52:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18034101063913472 [0;39m ==> Parameters: 
2023-03-18 20:52:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18034101063913472 [0;39m <==    Updates: 1
2023-03-18 20:52:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18034101063913472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:52:37.023 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:52:43.333 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:52:45.379 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:53:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18034205917319168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:53:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18034205917319168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:53:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18034205917319168 [0;39m ==> Parameters: 
2023-03-18 20:53:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18034205917319168 [0;39m <==    Updates: 0
2023-03-18 20:53:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18034205917319168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 20:53:02.976 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:53:03.872 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:53:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18034226888839168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:53:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18034226888839168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:53:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18034226888839168 [0;39m ==> Parameters: 
2023-03-18 20:53:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18034226888839168 [0;39m <==    Updates: 1
2023-03-18 20:53:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18034226888839168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 20:53:05.023 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:53:07.057 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:53:09.089 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:53:11.120 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:53:32.959 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:53:33.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:53:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18034352705376256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:53:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18034352705376256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:53:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18034352705376256 [0;39m ==> Parameters: 
2023-03-18 20:53:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18034352705376256 [0;39m <==    Updates: 1
2023-03-18 20:53:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18034352705376256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 20:53:37.022 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:53:39.051 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:54:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18034457571364864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:54:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18034457571364864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:54:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18034457571364864 [0;39m ==> Parameters: 
2023-03-18 20:54:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18034457571364864 [0;39m <==    Updates: 0
2023-03-18 20:54:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18034457571364864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 20:54:01.095 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:54:03.128 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:54:03.870 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:54:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18034478538690560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:54:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18034478538690560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:54:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18034478538690560 [0;39m ==> Parameters: 
2023-03-18 20:54:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18034478538690560 [0;39m <==    Updates: 1
2023-03-18 20:54:05.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18034478538690560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 20:54:09.228 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:54:25.173 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:54:27.227 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:54:33.858 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:54:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18034604363616256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:54:35.004 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:54:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18034604363616256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:54:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18034604363616256 [0;39m ==> Parameters: 
2023-03-18 20:54:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18034604363616256 [0;39m <==    Updates: 1
2023-03-18 20:54:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18034604363616256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 20:54:37.036 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:54:51.278 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:55:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18034709217021952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:55:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18034709217021952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:55:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18034709217021952 [0;39m ==> Parameters: 
2023-03-18 20:55:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18034709217021952 [0;39m <==    Updates: 0
2023-03-18 20:55:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18034709217021952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:55:02.957 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:55:03.857 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:55:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18034730188541952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:55:05.003 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:55:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18034730188541952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:55:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18034730188541952 [0;39m ==> Parameters: 
2023-03-18 20:55:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18034730188541952 [0;39m <==    Updates: 1
2023-03-18 20:55:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18034730188541952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:55:07.034 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:55:15.358 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:55:32.963 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:55:33.838 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:55:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18034856038633472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:55:35.008 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:55:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18034856038633472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:55:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18034856038633472 [0;39m ==> Parameters: 
2023-03-18 20:55:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18034856038633472 [0;39m <==    Updates: 1
2023-03-18 20:55:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18034856038633472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 20:55:37.038 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:55:39.075 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:55:41.103 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:56:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18034960929787904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:56:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18034960929787904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:56:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18034960929787904 [0;39m ==> Parameters: 
2023-03-18 20:56:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18034960929787904 [0;39m <==    Updates: 0
2023-03-18 20:56:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18034960929787904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:56:02.976 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:56:03.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:56:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18034981863559168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:56:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18034981863559168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:56:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18034981863559168 [0;39m ==> Parameters: 
2023-03-18 20:56:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18034981863559168 [0;39m <==    Updates: 1
2023-03-18 20:56:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18034981863559168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:56:05.023 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:56:07.075 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:56:09.103 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:56:31.145 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:56:33.176 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:56:33.839 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:56:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18035107692679168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:56:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18035107692679168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:56:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18035107692679168 [0;39m ==> Parameters: 
2023-03-18 20:56:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18035107692679168 [0;39m <==    Updates: 1
2023-03-18 20:56:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18035107692679168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:56:35.208 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:56:37.239 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:56:39.277 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:56:55.231 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:56:57.252 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:57:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18035212546084864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:57:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18035212546084864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:57:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18035212546084864 [0;39m ==> Parameters: 
2023-03-18 20:57:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18035212546084864 [0;39m <==    Updates: 0
2023-03-18 20:57:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18035212546084864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:57:03.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:57:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18035233509216256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:57:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18035233509216256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:57:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18035233509216256 [0;39m ==> Parameters: 
2023-03-18 20:57:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18035233509216256 [0;39m <==    Updates: 1
2023-03-18 20:57:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18035233509216256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:57:07.021 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:57:19.299 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:57:21.322 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:57:33.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:57:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18035359338336256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:57:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18035359338336256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:57:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18035359338336256 [0;39m ==> Parameters: 
2023-03-18 20:57:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18035359338336256 [0;39m <==    Updates: 1
2023-03-18 20:57:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18035359338336256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:57:37.056 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:57:43.354 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:57:45.390 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:57:55.766 INFO  com.jiawa.wiki.websocket.WebSocketServer          :41   [32m18002714181111808 [0;39m è¿žæŽ¥å…³é—­ï¼Œtokenï¼šKBSvnMg3MRï¼Œsession idï¼š0ï¼å½“å‰è¿žæŽ¥æ•°ï¼š0
2023-03-18 20:58:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18035464254656512 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:58:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18035464254656512 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:58:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18035464254656512 [0;39m ==> Parameters: 
2023-03-18 20:58:00.026 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18035464254656512 [0;39m <==    Updates: 0
2023-03-18 20:58:00.026 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18035464254656512 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:58:03.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:58:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18035485163261952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:58:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18035485163261952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:58:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18035485163261952 [0;39m ==> Parameters: 
2023-03-18 20:58:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18035485163261952 [0;39m <==    Updates: 1
2023-03-18 20:58:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18035485163261952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 20:58:07.041 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:58:09.084 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:58:11.108 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:58:33.866 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:58:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18035611017547776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:58:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18035611017547776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:58:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18035611017547776 [0;39m ==> Parameters: 
2023-03-18 20:58:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18035611017547776 [0;39m <==    Updates: 1
2023-03-18 20:58:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18035611017547776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 20:58:37.035 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:58:39.070 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:59:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18035715875147776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 20:59:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18035715875147776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 20:59:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18035715875147776 [0;39m ==> Parameters: 
2023-03-18 20:59:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18035715875147776 [0;39m <==    Updates: 0
2023-03-18 20:59:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18035715875147776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 20:59:01.124 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:59:03.178 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:59:03.863 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:59:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18035736813113344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:59:05.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18035736813113344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:59:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18035736813113344 [0;39m ==> Parameters: 
2023-03-18 20:59:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18035736813113344 [0;39m <==    Updates: 1
2023-03-18 20:59:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18035736813113344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:59:05.193 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:59:07.230 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:59:09.255 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:59:25.224 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:59:27.261 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:59:32.976 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:59:33.872 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:59:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18035862667399168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 20:59:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18035862667399168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 20:59:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18035862667399168 [0;39m ==> Parameters: 
2023-03-18 20:59:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18035862667399168 [0;39m <==    Updates: 1
2023-03-18 20:59:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18035862667399168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 20:59:37.038 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 20:59:51.315 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:00:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18035967520804864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:00:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18035967520804864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:00:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18035967520804864 [0;39m ==> Parameters: 
2023-03-18 21:00:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18035967520804864 [0;39m <==    Updates: 0
2023-03-18 21:00:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18035967520804864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:00:02.968 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:00:03.853 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:00:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18035988488130560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:00:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18035988488130560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:00:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18035988488130560 [0;39m ==> Parameters: 
2023-03-18 21:00:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18035988488130560 [0;39m <==    Updates: 1
2023-03-18 21:00:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18035988488130560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:00:07.037 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:00:13.349 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:00:15.377 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:00:32.973 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:00:33.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:00:35.004 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:00:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18036114313056256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:00:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18036114313056256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:00:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18036114313056256 [0;39m ==> Parameters: 
2023-03-18 21:00:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18036114313056256 [0;39m <==    Updates: 1
2023-03-18 21:00:35.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18036114313056256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-18 21:00:37.036 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:00:39.067 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:00:41.094 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:01:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18036219170656256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:01:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18036219170656256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:01:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18036219170656256 [0;39m ==> Parameters: 
2023-03-18 21:01:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18036219170656256 [0;39m <==    Updates: 0
2023-03-18 21:01:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18036219170656256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:01:02.960 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:01:03.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:01:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18036240142176256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:01:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18036240142176256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:01:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18036240142176256 [0;39m ==> Parameters: 
2023-03-18 21:01:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18036240142176256 [0;39m <==    Updates: 1
2023-03-18 21:01:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18036240142176256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:01:07.019 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:01:09.051 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:01:31.095 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:01:33.110 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:01:33.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:01:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18036365967101952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:01:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18036365967101952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:01:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18036365967101952 [0;39m ==> Parameters: 
2023-03-18 21:01:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18036365967101952 [0;39m <==    Updates: 1
2023-03-18 21:01:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18036365967101952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:01:35.141 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:01:37.179 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:01:39.222 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:01:57.185 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:02:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18036470820507648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:02:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18036470820507648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:02:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18036470820507648 [0;39m ==> Parameters: 
2023-03-18 21:02:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18036470820507648 [0;39m <==    Updates: 0
2023-03-18 21:02:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18036470820507648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:02:02.977 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:02:03.855 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:02:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18036491817193472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:02:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18036491817193472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:02:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18036491817193472 [0;39m ==> Parameters: 
2023-03-18 21:02:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18036491817193472 [0;39m <==    Updates: 1
2023-03-18 21:02:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18036491817193472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:02:07.041 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:02:19.241 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:02:21.271 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:02:33.858 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:02:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18036617642119168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:02:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18036617642119168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:02:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18036617642119168 [0;39m ==> Parameters: 
2023-03-18 21:02:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18036617642119168 [0;39m <==    Updates: 1
2023-03-18 21:02:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18036617642119168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 21:02:37.069 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:02:43.318 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:02:45.356 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:03:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18036722495524864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:03:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18036722495524864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:03:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18036722495524864 [0;39m ==> Parameters: 
2023-03-18 21:03:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18036722495524864 [0;39m <==    Updates: 0
2023-03-18 21:03:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18036722495524864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-18 21:03:02.975 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:03:03.887 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:03:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18036743471239168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:03:05.007 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:03:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18036743471239168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:03:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18036743471239168 [0;39m ==> Parameters: 
2023-03-18 21:03:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18036743471239168 [0;39m <==    Updates: 1
2023-03-18 21:03:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18036743471239168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:03:07.037 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:03:11.102 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:03:32.991 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:03:33.853 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:03:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18036869291970560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:03:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18036869291970560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:03:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18036869291970560 [0;39m ==> Parameters: 
2023-03-18 21:03:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18036869291970560 [0;39m <==    Updates: 1
2023-03-18 21:03:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18036869291970560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:03:37.058 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:03:39.104 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:04:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18036974145376256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:04:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18036974145376256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:04:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18036974145376256 [0;39m ==> Parameters: 
2023-03-18 21:04:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18036974145376256 [0;39m <==    Updates: 0
2023-03-18 21:04:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18036974145376256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 21:04:01.159 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:04:03.181 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:04:03.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:04:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18036995116896256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:04:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18036995116896256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:04:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18036995116896256 [0;39m ==> Parameters: 
2023-03-18 21:04:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18036995116896256 [0;39m <==    Updates: 1
2023-03-18 21:04:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18036995116896256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:04:05.213 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:04:07.244 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:04:09.273 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:04:25.237 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:04:27.274 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:04:32.965 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:04:33.840 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:04:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18037120941821952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:04:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18037120941821952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:04:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18037120941821952 [0;39m ==> Parameters: 
2023-03-18 21:04:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18037120941821952 [0;39m <==    Updates: 1
2023-03-18 21:04:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18037120941821952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:04:37.052 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:04:49.315 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:04:51.351 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:05:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18037225799421952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:05:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18037225799421952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:05:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18037225799421952 [0;39m ==> Parameters: 
2023-03-18 21:05:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18037225799421952 [0;39m <==    Updates: 0
2023-03-18 21:05:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18037225799421952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 21:05:02.971 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:05:03.858 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:05:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18037246770941952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:05:05.003 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:05:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18037246770941952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:05:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18037246770941952 [0;39m ==> Parameters: 
2023-03-18 21:05:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18037246770941952 [0;39m <==    Updates: 1
2023-03-18 21:05:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18037246770941952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:05:07.034 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:05:15.436 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:05:32.963 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:05:33.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:05:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18037372625227776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:05:35.009 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:05:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18037372625227776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:05:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18037372625227776 [0;39m ==> Parameters: 
2023-03-18 21:05:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18037372625227776 [0;39m <==    Updates: 1
2023-03-18 21:05:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18037372625227776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 21:05:37.049 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:05:39.104 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:05:41.140 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:06:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18037477503799296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:06:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18037477503799296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:06:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18037477503799296 [0;39m ==> Parameters: 
2023-03-18 21:06:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18037477503799296 [0;39m <==    Updates: 0
2023-03-18 21:06:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18037477503799296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:06:02.976 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:06:03.859 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:06:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18037498445959168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:06:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18037498445959168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:06:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18037498445959168 [0;39m ==> Parameters: 
2023-03-18 21:06:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18037498445959168 [0;39m <==    Updates: 1
2023-03-18 21:06:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18037498445959168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:06:07.038 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:06:09.087 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:06:31.122 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:06:33.161 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:06:33.856 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:06:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18037624266690560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:06:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18037624266690560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:06:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18037624266690560 [0;39m ==> Parameters: 
2023-03-18 21:06:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18037624266690560 [0;39m <==    Updates: 1
2023-03-18 21:06:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18037624266690560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:06:35.193 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:06:39.267 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:06:55.191 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:06:57.214 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:07:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18037729120096256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:07:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18037729120096256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:07:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18037729120096256 [0;39m ==> Parameters: 
2023-03-18 21:07:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18037729120096256 [0;39m <==    Updates: 0
2023-03-18 21:07:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18037729120096256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 21:07:03.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:07:05.005 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:07:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18037750095810560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:07:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18037750095810560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:07:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18037750095810560 [0;39m ==> Parameters: 
2023-03-18 21:07:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18037750095810560 [0;39m <==    Updates: 1
2023-03-18 21:07:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18037750095810560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:07:07.037 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:07:19.236 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:07:21.265 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:07:33.862 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:07:34.988 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:07:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18037875920736256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:07:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18037875920736256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:07:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18037875920736256 [0;39m ==> Parameters: 
2023-03-18 21:07:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18037875920736256 [0;39m <==    Updates: 1
2023-03-18 21:07:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18037875920736256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:07:37.019 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:07:43.306 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:07:45.341 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:08:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18037980778336256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:08:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18037980778336256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:08:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18037980778336256 [0;39m ==> Parameters: 
2023-03-18 21:08:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18037980778336256 [0;39m <==    Updates: 0
2023-03-18 21:08:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18037980778336256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:08:02.988 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:08:03.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:08:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18038001749856256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:08:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18038001749856256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:08:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18038001749856256 [0;39m ==> Parameters: 
2023-03-18 21:08:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18038001749856256 [0;39m <==    Updates: 1
2023-03-18 21:08:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18038001749856256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 21:08:07.052 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:08:09.111 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:08:11.141 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:08:32.972 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:08:33.864 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:08:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18038127599947776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:08:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18038127599947776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:08:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18038127599947776 [0;39m ==> Parameters: 
2023-03-18 21:08:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18038127599947776 [0;39m <==    Updates: 1
2023-03-18 21:08:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18038127599947776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:08:37.041 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:08:39.068 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:09:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18038232457547776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:09:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18038232457547776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:09:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18038232457547776 [0;39m ==> Parameters: 
2023-03-18 21:09:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18038232457547776 [0;39m <==    Updates: 0
2023-03-18 21:09:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18038232457547776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 21:09:01.102 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:09:03.131 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:09:03.888 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:09:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18038253424873472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:09:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18038253424873472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:09:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18038253424873472 [0;39m ==> Parameters: 
2023-03-18 21:09:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18038253424873472 [0;39m <==    Updates: 1
2023-03-18 21:09:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18038253424873472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 21:09:05.178 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:09:07.208 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:09:09.241 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:09:25.177 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:09:27.222 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:09:33.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:09:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18038379249799168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:09:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18038379249799168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:09:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18038379249799168 [0;39m ==> Parameters: 
2023-03-18 21:09:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18038379249799168 [0;39m <==    Updates: 1
2023-03-18 21:09:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18038379249799168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š0æ¯«ç§’
2023-03-18 21:09:35.023 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:09:37.059 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:09:51.278 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:10:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18038484103204864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:10:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18038484103204864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:10:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18038484103204864 [0;39m ==> Parameters: 
2023-03-18 21:10:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18038484103204864 [0;39m <==    Updates: 0
2023-03-18 21:10:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18038484103204864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:10:03.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:10:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18038505074724864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:10:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18038505074724864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:10:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18038505074724864 [0;39m ==> Parameters: 
2023-03-18 21:10:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18038505074724864 [0;39m <==    Updates: 1
2023-03-18 21:10:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18038505074724864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-18 21:10:07.035 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:10:13.329 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:10:15.350 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:10:32.973 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:10:33.868 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:10:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18038630899650560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:10:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18038630899650560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:10:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18038630899650560 [0;39m ==> Parameters: 
2023-03-18 21:10:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18038630899650560 [0;39m <==    Updates: 1
2023-03-18 21:10:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18038630899650560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:10:37.037 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:10:39.056 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:10:41.084 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:11:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18038735753056256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:11:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18038735753056256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:11:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18038735753056256 [0;39m ==> Parameters: 
2023-03-18 21:11:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18038735753056256 [0;39m <==    Updates: 0
2023-03-18 21:11:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18038735753056256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:11:03.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:11:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18038756720381952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:11:05.003 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:11:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18038756720381952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:11:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18038756720381952 [0;39m ==> Parameters: 
2023-03-18 21:11:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18038756720381952 [0;39m <==    Updates: 1
2023-03-18 21:11:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18038756720381952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:11:07.036 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:11:09.099 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:11:33.141 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:11:33.853 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:11:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18038882549501952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:11:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18038882549501952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:11:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18038882549501952 [0;39m ==> Parameters: 
2023-03-18 21:11:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18038882549501952 [0;39m <==    Updates: 1
2023-03-18 21:11:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18038882549501952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 21:11:35.187 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:11:37.218 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:11:39.264 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:11:55.172 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:11:57.213 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:12:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18038987432267776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:12:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18038987432267776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:12:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18038987432267776 [0;39m ==> Parameters: 
2023-03-18 21:12:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18038987432267776 [0;39m <==    Updates: 0
2023-03-18 21:12:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18038987432267776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 21:12:02.993 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:12:03.864 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:12:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18039008399593472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:12:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18039008399593472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:12:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18039008399593472 [0;39m ==> Parameters: 
2023-03-18 21:12:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18039008399593472 [0;39m <==    Updates: 1
2023-03-18 21:12:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18039008399593472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:12:05.024 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:12:07.056 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:12:21.279 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:12:33.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:12:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18039134228713472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:12:35.008 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:12:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18039134228713472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:12:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18039134228713472 [0;39m ==> Parameters: 
2023-03-18 21:12:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18039134228713472 [0;39m <==    Updates: 1
2023-03-18 21:12:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18039134228713472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:12:37.047 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:12:43.322 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:12:45.378 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:13:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18039239073730560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:13:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18039239073730560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:13:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18039239073730560 [0;39m ==> Parameters: 
2023-03-18 21:13:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18039239073730560 [0;39m <==    Updates: 0
2023-03-18 21:13:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18039239073730560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 21:13:02.975 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:13:03.872 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:13:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18039260053639168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:13:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18039260053639168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:13:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18039260053639168 [0;39m ==> Parameters: 
2023-03-18 21:13:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18039260053639168 [0;39m <==    Updates: 1
2023-03-18 21:13:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18039260053639168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:13:05.022 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:13:07.053 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:13:09.097 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:13:11.121 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:13:32.974 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:13:33.853 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:13:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18039385874370560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:13:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18039385874370560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:13:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18039385874370560 [0;39m ==> Parameters: 
2023-03-18 21:13:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18039385874370560 [0;39m <==    Updates: 1
2023-03-18 21:13:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18039385874370560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:13:37.037 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:13:39.069 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:14:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18039490727776256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:14:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18039490727776256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:14:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18039490727776256 [0;39m ==> Parameters: 
2023-03-18 21:14:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18039490727776256 [0;39m <==    Updates: 0
2023-03-18 21:14:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18039490727776256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-18 21:14:01.112 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:14:03.142 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:14:03.852 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:14:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18039511699296256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:14:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18039511699296256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:14:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18039511699296256 [0;39m ==> Parameters: 
2023-03-18 21:14:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18039511699296256 [0;39m <==    Updates: 1
2023-03-18 21:14:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18039511699296256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:14:05.174 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:14:09.249 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:14:25.180 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:14:27.203 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:14:32.965 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:14:33.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:14:34.987 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:14:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18039637524221952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:14:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18039637524221952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:14:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18039637524221952 [0;39m ==> Parameters: 
2023-03-18 21:14:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18039637524221952 [0;39m <==    Updates: 1
2023-03-18 21:14:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18039637524221952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:14:37.019 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:14:49.234 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:14:51.265 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:15:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18039742381821952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:15:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18039742381821952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:15:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18039742381821952 [0;39m ==> Parameters: 
2023-03-18 21:15:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18039742381821952 [0;39m <==    Updates: 0
2023-03-18 21:15:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18039742381821952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:15:02.977 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:15:03.857 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:15:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18039763353341952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:15:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18039763353341952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:15:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18039763353341952 [0;39m ==> Parameters: 
2023-03-18 21:15:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18039763353341952 [0;39m <==    Updates: 1
2023-03-18 21:15:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18039763353341952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:15:07.039 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:15:13.304 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:15:15.346 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:15:32.986 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:15:33.854 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:15:35.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18039889174073344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:15:35.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18039889174073344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:15:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18039889174073344 [0;39m ==> Parameters: 
2023-03-18 21:15:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18039889174073344 [0;39m <==    Updates: 1
2023-03-18 21:15:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18039889174073344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:15:35.017 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:15:37.055 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:15:39.087 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:15:41.132 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:16:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18039994061033472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:16:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18039994061033472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:16:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18039994061033472 [0;39m ==> Parameters: 
2023-03-18 21:16:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18039994061033472 [0;39m <==    Updates: 0
2023-03-18 21:16:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18039994061033472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:16:02.976 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:16:03.853 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:16:05.017 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18040015070302208 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:16:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18040015070302208 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:16:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18040015070302208 [0;39m ==> Parameters: 
2023-03-18 21:16:05.025 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18040015070302208 [0;39m <==    Updates: 1
2023-03-18 21:16:05.026 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18040015070302208 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:16:07.059 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:16:09.102 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:16:33.193 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:16:33.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:16:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18040140849090560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:16:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18040140849090560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:16:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18040140849090560 [0;39m ==> Parameters: 
2023-03-18 21:16:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18040140849090560 [0;39m <==    Updates: 1
2023-03-18 21:16:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18040140849090560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:16:37.247 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:16:39.275 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:16:55.238 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:16:57.282 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:17:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18040245706690560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:17:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18040245706690560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:17:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18040245706690560 [0;39m ==> Parameters: 
2023-03-18 21:17:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18040245706690560 [0;39m <==    Updates: 0
2023-03-18 21:17:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18040245706690560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:17:03.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:17:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18040266678210560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:17:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18040266678210560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:17:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18040266678210560 [0;39m ==> Parameters: 
2023-03-18 21:17:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18040266678210560 [0;39m <==    Updates: 1
2023-03-18 21:17:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18040266678210560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:17:07.005 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:17:19.322 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:17:21.355 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:17:32.989 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:17:33.845 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:17:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18040392503136256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:17:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18040392503136256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:17:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18040392503136256 [0;39m ==> Parameters: 
2023-03-18 21:17:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18040392503136256 [0;39m <==    Updates: 1
2023-03-18 21:17:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18040392503136256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 21:17:35.036 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:17:37.078 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:17:43.383 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:17:45.430 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:18:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18040497356541952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:18:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18040497356541952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:18:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18040497356541952 [0;39m ==> Parameters: 
2023-03-18 21:18:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18040497356541952 [0;39m <==    Updates: 0
2023-03-18 21:18:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18040497356541952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:18:02.987 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:18:03.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:18:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18040518357422080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:18:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18040518357422080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:18:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18040518357422080 [0;39m ==> Parameters: 
2023-03-18 21:18:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18040518357422080 [0;39m <==    Updates: 1
2023-03-18 21:18:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18040518357422080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 21:18:05.025 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:18:07.050 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:18:09.096 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:18:11.110 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:18:33.856 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:18:34.992 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:18:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18040644178153472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:18:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18040644178153472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:18:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18040644178153472 [0;39m ==> Parameters: 
2023-03-18 21:18:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18040644178153472 [0;39m <==    Updates: 1
2023-03-18 21:18:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18040644178153472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 21:18:37.018 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:18:39.048 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:19:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18040749035753472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:19:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18040749035753472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:19:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18040749035753472 [0;39m ==> Parameters: 
2023-03-18 21:19:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18040749035753472 [0;39m <==    Updates: 0
2023-03-18 21:19:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18040749035753472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:19:01.084 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:19:03.116 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:19:03.873 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:19:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18040770015662080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:19:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18040770015662080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:19:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18040770015662080 [0;39m ==> Parameters: 
2023-03-18 21:19:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18040770015662080 [0;39m <==    Updates: 1
2023-03-18 21:19:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18040770015662080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:19:05.161 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:19:07.201 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:19:09.222 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:19:25.162 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:19:27.199 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:19:33.855 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:19:34.975 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:19:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18040895828004864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:19:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18040895828004864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:19:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18040895828004864 [0;39m ==> Parameters: 
2023-03-18 21:19:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18040895828004864 [0;39m <==    Updates: 1
2023-03-18 21:19:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18040895828004864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:19:37.008 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:19:49.231 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:19:51.255 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:20:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18041000685604864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:20:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18041000685604864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:20:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18041000685604864 [0;39m ==> Parameters: 
2023-03-18 21:20:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18041000685604864 [0;39m <==    Updates: 0
2023-03-18 21:20:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18041000685604864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:20:02.974 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:20:03.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:20:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18041021652930560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:20:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18041021652930560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:20:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18041021652930560 [0;39m ==> Parameters: 
2023-03-18 21:20:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18041021652930560 [0;39m <==    Updates: 1
2023-03-18 21:20:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18041021652930560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:20:07.036 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:20:13.284 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:20:15.314 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:20:32.966 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:20:33.853 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:20:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18041147477856256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:20:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18041147477856256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:20:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18041147477856256 [0;39m ==> Parameters: 
2023-03-18 21:20:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18041147477856256 [0;39m <==    Updates: 1
2023-03-18 21:20:35.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18041147477856256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:20:37.021 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:20:39.051 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:20:41.089 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:21:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18041252356427776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:21:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18041252356427776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:21:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18041252356427776 [0;39m ==> Parameters: 
2023-03-18 21:21:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18041252356427776 [0;39m <==    Updates: 0
2023-03-18 21:21:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18041252356427776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 21:21:03.854 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:21:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18041273336336384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:21:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18041273336336384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:21:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18041273336336384 [0;39m ==> Parameters: 
2023-03-18 21:21:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18041273336336384 [0;39m <==    Updates: 1
2023-03-18 21:21:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18041273336336384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 21:21:07.042 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:21:09.078 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:21:31.141 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:21:33.171 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:21:33.843 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:21:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18041399131901952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:21:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18041399131901952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:21:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18041399131901952 [0;39m ==> Parameters: 
2023-03-18 21:21:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18041399131901952 [0;39m <==    Updates: 1
2023-03-18 21:21:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18041399131901952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:21:35.210 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:21:37.250 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:21:39.272 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:21:57.263 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:22:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18041504023056384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:22:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18041504023056384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:22:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18041504023056384 [0;39m ==> Parameters: 
2023-03-18 21:22:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18041504023056384 [0;39m <==    Updates: 0
2023-03-18 21:22:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18041504023056384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-18 21:22:03.865 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:22:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18041524965216256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:22:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18041524965216256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:22:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18041524965216256 [0;39m ==> Parameters: 
2023-03-18 21:22:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18041524965216256 [0;39m <==    Updates: 1
2023-03-18 21:22:05.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18041524965216256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 21:22:05.531 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:22:07.573 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:22:19.601 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:22:21.977 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:22:33.399 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:22:34.177 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:22:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18041650827890688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:22:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18041650827890688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:22:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18041650827890688 [0;39m ==> Parameters: 
2023-03-18 21:22:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18041650827890688 [0;39m <==    Updates: 1
2023-03-18 21:22:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18041650827890688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-18 21:22:38.026 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:22:44.797 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:22:47.386 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:23:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18041755656130560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:23:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18041755656130560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:23:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18041755656130560 [0;39m ==> Parameters: 
2023-03-18 21:23:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18041755656130560 [0;39m <==    Updates: 0
2023-03-18 21:23:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18041755656130560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-18 21:23:04.285 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:23:05.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18041776661204992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:23:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18041776661204992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:23:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18041776661204992 [0;39m ==> Parameters: 
2023-03-18 21:23:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18041776661204992 [0;39m <==    Updates: 1
2023-03-18 21:23:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18041776661204992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 21:23:05.277 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:23:07.335 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:23:11.490 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:23:33.428 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:23:33.907 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:23:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18041902481936384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:23:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18041902481936384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:23:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18041902481936384 [0;39m ==> Parameters: 
2023-03-18 21:23:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18041902481936384 [0;39m <==    Updates: 1
2023-03-18 21:23:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18041902481936384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-18 21:23:37.526 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:23:59.580 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:24:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18042007305981952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:24:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18042007305981952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:24:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18042007305981952 [0;39m ==> Parameters: 
2023-03-18 21:24:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18042007305981952 [0;39m <==    Updates: 0
2023-03-18 21:24:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18042007305981952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-18 21:24:01.635 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:24:03.674 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:24:03.875 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:24:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18042028311056384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:24:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18042028311056384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:24:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18042028311056384 [0;39m ==> Parameters: 
2023-03-18 21:24:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18042028311056384 [0;39m <==    Updates: 1
2023-03-18 21:24:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18042028311056384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 21:24:05.712 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:24:07.757 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:24:23.701 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:24:25.754 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:24:33.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:24:35.008 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:24:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18042154123399168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:24:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18042154123399168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:24:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18042154123399168 [0;39m ==> Parameters: 
2023-03-18 21:24:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18042154123399168 [0;39m <==    Updates: 1
2023-03-18 21:24:35.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18042154123399168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:24:37.050 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:24:47.834 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:24:49.881 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:25:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18042258955833344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:25:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18042258955833344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:25:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18042258955833344 [0;39m ==> Parameters: 
2023-03-18 21:25:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18042258955833344 [0;39m <==    Updates: 0
2023-03-18 21:25:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18042258955833344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:25:03.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:25:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18042279948324864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:25:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18042279948324864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:25:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18042279948324864 [0;39m ==> Parameters: 
2023-03-18 21:25:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18042279948324864 [0;39m <==    Updates: 1
2023-03-18 21:25:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18042279948324864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 21:25:07.082 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:25:13.967 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:25:32.984 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:25:33.856 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:25:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18042405781639168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:25:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18042405781639168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:25:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18042405781639168 [0;39m ==> Parameters: 
2023-03-18 21:25:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18042405781639168 [0;39m <==    Updates: 1
2023-03-18 21:25:35.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18042405781639168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 21:25:37.075 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:25:39.127 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:26:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18042510635044864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:26:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18042510635044864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:26:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18042510635044864 [0;39m ==> Parameters: 
2023-03-18 21:26:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18042510635044864 [0;39m <==    Updates: 0
2023-03-18 21:26:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18042510635044864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:26:01.152 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:26:03.191 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:26:03.859 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:26:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18042531640119296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:26:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18042531640119296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:26:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18042531640119296 [0;39m ==> Parameters: 
2023-03-18 21:26:05.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18042531640119296 [0;39m <==    Updates: 1
2023-03-18 21:26:05.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18042531640119296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:26:09.310 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:26:25.264 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:26:27.306 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:26:32.965 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:26:33.866 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:26:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18042657469239296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:26:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18042657469239296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:26:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18042657469239296 [0;39m ==> Parameters: 
2023-03-18 21:26:35.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18042657469239296 [0;39m <==    Updates: 1
2023-03-18 21:26:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18042657469239296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:26:37.063 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:26:51.408 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:27:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18042762289090560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:27:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18042762289090560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:27:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18042762289090560 [0;39m ==> Parameters: 
2023-03-18 21:27:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18042762289090560 [0;39m <==    Updates: 0
2023-03-18 21:27:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18042762289090560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:27:02.960 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:27:03.860 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:27:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18042783277387776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:27:05.009 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:27:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18042783277387776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:27:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18042783277387776 [0;39m ==> Parameters: 
2023-03-18 21:27:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18042783277387776 [0;39m <==    Updates: 1
2023-03-18 21:27:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18042783277387776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-18 21:27:07.053 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:27:15.467 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:27:32.960 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:27:33.861 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:27:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18042909110702080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:27:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18042909110702080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:27:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18042909110702080 [0;39m ==> Parameters: 
2023-03-18 21:27:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18042909110702080 [0;39m <==    Updates: 1
2023-03-18 21:27:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18042909110702080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-18 21:27:37.045 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:27:41.141 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:28:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18043013930553344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:28:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18043013930553344 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:28:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18043013930553344 [0;39m ==> Parameters: 
2023-03-18 21:28:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18043013930553344 [0;39m <==    Updates: 0
2023-03-18 21:28:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18043013930553344 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-18 21:28:02.959 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:28:03.877 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:28:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18043034906267648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:28:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18043034906267648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:28:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18043034906267648 [0;39m ==> Parameters: 
2023-03-18 21:28:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18043034906267648 [0;39m <==    Updates: 1
2023-03-18 21:28:05.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18043034906267648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 21:28:07.046 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:28:09.086 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:28:33.180 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:28:33.862 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:28:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18043160781524992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:28:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18043160781524992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:28:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18043160781524992 [0;39m ==> Parameters: 
2023-03-18 21:28:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18043160781524992 [0;39m <==    Updates: 1
2023-03-18 21:28:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18043160781524992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-18 21:28:39.306 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:28:55.235 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:28:57.287 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:29:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18043265622347776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:29:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18043265622347776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:29:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18043265622347776 [0;39m ==> Parameters: 
2023-03-18 21:29:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18043265622347776 [0;39m <==    Updates: 0
2023-03-18 21:29:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18043265622347776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:29:02.987 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:29:03.869 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:29:05.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18043286572896256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:29:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18043286572896256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:29:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18043286572896256 [0;39m ==> Parameters: 
2023-03-18 21:29:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18043286572896256 [0;39m <==    Updates: 1
2023-03-18 21:29:05.007 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18043286572896256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 21:29:05.035 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:29:07.077 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:29:19.336 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:29:21.381 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:29:32.985 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:29:33.873 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:29:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18043412435570688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:29:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18043412435570688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:29:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18043412435570688 [0;39m ==> Parameters: 
2023-03-18 21:29:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18043412435570688 [0;39m <==    Updates: 1
2023-03-18 21:29:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18043412435570688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-18 21:29:37.083 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:29:43.435 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:29:45.477 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:30:00.002 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18043517251227648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:30:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18043517251227648 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:30:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18043517251227648 [0;39m ==> Parameters: 
2023-03-18 21:30:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18043517251227648 [0;39m <==    Updates: 0
2023-03-18 21:30:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18043517251227648 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:30:02.977 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:30:03.864 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:30:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18043538277273600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:30:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18043538277273600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:30:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18043538277273600 [0;39m ==> Parameters: 
2023-03-18 21:30:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18043538277273600 [0;39m <==    Updates: 1
2023-03-18 21:30:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18043538277273600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 21:30:07.071 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:30:09.123 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:30:11.162 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:30:32.967 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:30:33.873 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:30:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18043664085422080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:30:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18043664085422080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:30:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18043664085422080 [0;39m ==> Parameters: 
2023-03-18 21:30:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18043664085422080 [0;39m <==    Updates: 1
2023-03-18 21:30:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18043664085422080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:30:35.025 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:30:37.079 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:30:39.130 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:31:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18043768955604992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:31:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18043768955604992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:31:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18043768955604992 [0;39m ==> Parameters: 
2023-03-18 21:31:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18043768955604992 [0;39m <==    Updates: 0
2023-03-18 21:31:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18043768955604992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:31:01.166 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:31:03.225 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:31:03.879 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:31:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18043789935513600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:31:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18043789935513600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:31:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18043789935513600 [0;39m ==> Parameters: 
2023-03-18 21:31:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18043789935513600 [0;39m <==    Updates: 1
2023-03-18 21:31:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18043789935513600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:31:05.260 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:31:07.303 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:31:09.344 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:31:25.280 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:31:27.310 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:31:32.964 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:31:33.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:31:35.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18043915722690560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:31:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18043915722690560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:31:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18043915722690560 [0;39m ==> Parameters: 
2023-03-18 21:31:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18043915722690560 [0;39m <==    Updates: 1
2023-03-18 21:31:35.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18043915722690560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:31:37.052 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:31:51.394 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:32:00.032 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18044020693536768 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:32:00.033 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18044020693536768 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:32:00.034 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18044020693536768 [0;39m ==> Parameters: 
2023-03-18 21:32:00.043 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18044020693536768 [0;39m <==    Updates: 0
2023-03-18 21:32:00.043 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18044020693536768 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:32:02.974 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:32:03.866 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:32:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18044041539227648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:32:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18044041539227648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:32:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18044041539227648 [0;39m ==> Parameters: 
2023-03-18 21:32:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18044041539227648 [0;39m <==    Updates: 1
2023-03-18 21:32:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18044041539227648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:32:07.045 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:32:15.484 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:32:32.980 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:32:33.855 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:32:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18044167401902080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:32:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18044167401902080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:32:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18044167401902080 [0;39m ==> Parameters: 
2023-03-18 21:32:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18044167401902080 [0;39m <==    Updates: 1
2023-03-18 21:32:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18044167401902080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:32:37.066 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:32:41.160 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:33:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18044272259502080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:33:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18044272259502080 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:33:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18044272259502080 [0;39m ==> Parameters: 
2023-03-18 21:33:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18044272259502080 [0;39m <==    Updates: 0
2023-03-18 21:33:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18044272259502080 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:33:03.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:33:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18044293256187904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:33:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18044293256187904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:33:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18044293256187904 [0;39m ==> Parameters: 
2023-03-18 21:33:05.026 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18044293256187904 [0;39m <==    Updates: 1
2023-03-18 21:33:05.026 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18044293256187904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:33:07.089 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:33:09.132 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:33:31.188 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:33:33.238 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:33:33.877 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:33:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18044419068530688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:33:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18044419068530688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:33:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18044419068530688 [0;39m ==> Parameters: 
2023-03-18 21:33:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18044419068530688 [0;39m <==    Updates: 1
2023-03-18 21:33:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18044419068530688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:33:37.316 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:33:56.267 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:33:58.315 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:34:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18044523909353472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:34:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18044523909353472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:34:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18044523909353472 [0;39m ==> Parameters: 
2023-03-18 21:34:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18044523909353472 [0;39m <==    Updates: 0
2023-03-18 21:34:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18044523909353472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:34:02.991 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:34:03.849 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:34:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18044544855707648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:34:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18044544855707648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:34:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18044544855707648 [0;39m ==> Parameters: 
2023-03-18 21:34:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18044544855707648 [0;39m <==    Updates: 1
2023-03-18 21:34:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18044544855707648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:34:07.077 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:34:20.366 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:34:22.397 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:34:33.878 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:34:35.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18044670743547904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:34:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18044670743547904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:34:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18044670743547904 [0;39m ==> Parameters: 
2023-03-18 21:34:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18044670743547904 [0;39m <==    Updates: 1
2023-03-18 21:34:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18044670743547904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 21:34:37.062 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:34:44.438 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:34:46.483 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:35:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18044775571787776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:35:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18044775571787776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:35:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18044775571787776 [0;39m ==> Parameters: 
2023-03-18 21:35:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18044775571787776 [0;39m <==    Updates: 0
2023-03-18 21:35:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18044775571787776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-18 21:35:03.862 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:35:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18044796564279296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:35:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18044796564279296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:35:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18044796564279296 [0;39m ==> Parameters: 
2023-03-18 21:35:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18044796564279296 [0;39m <==    Updates: 1
2023-03-18 21:35:05.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18044796564279296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 21:35:05.045 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:35:07.102 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:35:09.146 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:35:11.200 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:35:32.985 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:35:33.868 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:35:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18044922397593600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:35:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18044922397593600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:35:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18044922397593600 [0;39m ==> Parameters: 
2023-03-18 21:35:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18044922397593600 [0;39m <==    Updates: 1
2023-03-18 21:35:35.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18044922397593600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:35:37.091 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:35:39.136 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:36:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18045027238416384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:36:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18045027238416384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:36:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18045027238416384 [0;39m ==> Parameters: 
2023-03-18 21:36:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18045027238416384 [0;39m <==    Updates: 0
2023-03-18 21:36:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18045027238416384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:36:01.195 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:36:03.248 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:36:03.868 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:36:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18045048184770560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:36:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18045048184770560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:36:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18045048184770560 [0;39m ==> Parameters: 
2023-03-18 21:36:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18045048184770560 [0;39m <==    Updates: 1
2023-03-18 21:36:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18045048184770560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:36:05.298 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:36:07.347 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:36:09.388 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:36:25.319 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:36:27.364 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:36:33.011 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:36:33.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:36:35.028 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18045174110359552 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:36:35.028 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18045174110359552 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:36:35.029 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18045174110359552 [0;39m ==> Parameters: 
2023-03-18 21:36:35.036 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18045174110359552 [0;39m <==    Updates: 1
2023-03-18 21:36:35.036 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18045174110359552 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:36:35.052 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:36:37.075 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:36:49.417 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:36:51.461 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:37:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18045278909239296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:37:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18045278909239296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:37:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18045278909239296 [0;39m ==> Parameters: 
2023-03-18 21:37:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18045278909239296 [0;39m <==    Updates: 0
2023-03-18 21:37:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18045278909239296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 21:37:03.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:37:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18045299843010560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:37:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18045299843010560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:37:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18045299843010560 [0;39m ==> Parameters: 
2023-03-18 21:37:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18045299843010560 [0;39m <==    Updates: 1
2023-03-18 21:37:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18045299843010560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:37:07.091 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:37:13.512 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:37:15.569 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:37:32.968 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:37:33.858 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:37:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18045425693102080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:37:35.010 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:37:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18045425693102080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:37:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18045425693102080 [0;39m ==> Parameters: 
2023-03-18 21:37:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18045425693102080 [0;39m <==    Updates: 1
2023-03-18 21:37:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18045425693102080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:37:37.036 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:37:39.082 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:37:41.131 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:38:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18045530571673600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:38:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18045530571673600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:38:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18045530571673600 [0;39m ==> Parameters: 
2023-03-18 21:38:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18045530571673600 [0;39m <==    Updates: 0
2023-03-18 21:38:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18045530571673600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:38:03.862 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:38:05.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18045551488667648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:38:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18045551488667648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:38:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18045551488667648 [0;39m ==> Parameters: 
2023-03-18 21:38:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18045551488667648 [0;39m <==    Updates: 1
2023-03-18 21:38:05.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18045551488667648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:38:05.018 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:38:07.062 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:38:09.120 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:38:33.206 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:38:33.874 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:38:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18045677342953472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:38:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18045677342953472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:38:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18045677342953472 [0;39m ==> Parameters: 
2023-03-18 21:38:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18045677342953472 [0;39m <==    Updates: 1
2023-03-18 21:38:35.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18045677342953472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 21:38:35.254 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:38:37.280 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:38:39.321 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:38:55.256 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:38:57.314 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:39:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18045782200553472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:39:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18045782200553472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:39:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18045782200553472 [0;39m ==> Parameters: 
2023-03-18 21:39:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18045782200553472 [0;39m <==    Updates: 0
2023-03-18 21:39:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18045782200553472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:39:03.875 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:39:04.993 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:39:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18045803176267776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:39:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18045803176267776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:39:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18045803176267776 [0;39m ==> Parameters: 
2023-03-18 21:39:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18045803176267776 [0;39m <==    Updates: 1
2023-03-18 21:39:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18045803176267776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:39:07.049 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:39:21.403 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:39:32.962 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:39:33.877 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:39:35.000 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18045928967639040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:39:35.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18045928967639040 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:39:35.001 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18045928967639040 [0;39m ==> Parameters: 
2023-03-18 21:39:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18045928967639040 [0;39m <==    Updates: 1
2023-03-18 21:39:35.008 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18045928967639040 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:39:35.015 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:39:37.057 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:39:43.440 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:39:45.484 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:40:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18046033871376384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:40:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18046033871376384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:40:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18046033871376384 [0;39m ==> Parameters: 
2023-03-18 21:40:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18046033871376384 [0;39m <==    Updates: 0
2023-03-18 21:40:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18046033871376384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:40:02.974 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:40:03.846 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:40:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18046054800953344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:40:05.001 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:40:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18046054800953344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:40:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18046054800953344 [0;39m ==> Parameters: 
2023-03-18 21:40:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18046054800953344 [0;39m <==    Updates: 1
2023-03-18 21:40:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18046054800953344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:40:07.055 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:40:11.120 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:40:33.878 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:40:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18046180680404992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:40:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18046180680404992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:40:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18046180680404992 [0;39m ==> Parameters: 
2023-03-18 21:40:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18046180680404992 [0;39m <==    Updates: 1
2023-03-18 21:40:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18046180680404992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:40:37.102 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:40:39.132 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:41:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18046285542199296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:41:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18046285542199296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:41:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18046285542199296 [0;39m ==> Parameters: 
2023-03-18 21:41:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18046285542199296 [0;39m <==    Updates: 0
2023-03-18 21:41:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18046285542199296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:41:01.211 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:41:03.263 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:41:03.870 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:41:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18046306480164864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:41:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18046306480164864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:41:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18046306480164864 [0;39m ==> Parameters: 
2023-03-18 21:41:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18046306480164864 [0;39m <==    Updates: 1
2023-03-18 21:41:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18046306480164864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:41:07.357 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:41:09.409 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:41:25.311 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:41:27.349 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:41:32.974 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:41:33.866 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:41:35.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18046432347033600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:41:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18046432347033600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:41:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18046432347033600 [0;39m ==> Parameters: 
2023-03-18 21:41:35.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18046432347033600 [0;39m <==    Updates: 1
2023-03-18 21:41:35.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18046432347033600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:41:37.051 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:41:51.457 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:42:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18046537204633600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:42:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18046537204633600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:42:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18046537204633600 [0;39m ==> Parameters: 
2023-03-18 21:42:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18046537204633600 [0;39m <==    Updates: 0
2023-03-18 21:42:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18046537204633600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:42:02.967 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:42:03.849 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:42:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18046558134210560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:42:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18046558134210560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:42:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18046558134210560 [0;39m ==> Parameters: 
2023-03-18 21:42:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18046558134210560 [0;39m <==    Updates: 1
2023-03-18 21:42:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18046558134210560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:42:05.021 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:42:07.071 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:42:13.517 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:42:15.552 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:42:33.875 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:42:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18046683984302080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:42:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18046683984302080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:42:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18046683984302080 [0;39m ==> Parameters: 
2023-03-18 21:42:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18046683984302080 [0;39m <==    Updates: 1
2023-03-18 21:42:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18046683984302080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:42:37.066 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:42:39.086 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:42:41.134 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:43:00.012 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18046788850290688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:43:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18046788850290688 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:43:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18046788850290688 [0;39m ==> Parameters: 
2023-03-18 21:43:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18046788850290688 [0;39m <==    Updates: 0
2023-03-18 21:43:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18046788850290688 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:43:02.990 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:43:03.862 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:43:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18046809817616384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:43:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18046809817616384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:43:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18046809817616384 [0;39m ==> Parameters: 
2023-03-18 21:43:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18046809817616384 [0;39m <==    Updates: 1
2023-03-18 21:43:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18046809817616384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:43:07.063 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:43:09.119 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:43:31.193 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:43:33.236 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:43:33.848 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:43:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18046935646736384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:43:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18046935646736384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:43:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18046935646736384 [0;39m ==> Parameters: 
2023-03-18 21:43:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18046935646736384 [0;39m <==    Updates: 1
2023-03-18 21:43:35.019 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18046935646736384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:43:35.263 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:43:39.345 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:43:55.295 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:43:57.351 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:44:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18047040521113600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:44:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18047040521113600 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:44:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18047040521113600 [0;39m ==> Parameters: 
2023-03-18 21:44:00.021 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18047040521113600 [0;39m <==    Updates: 0
2023-03-18 21:44:00.021 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18047040521113600 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-18 21:44:02.970 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:44:03.854 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:44:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18047061475856384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:44:05.012 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:44:05.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18047061475856384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:44:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18047061475856384 [0;39m ==> Parameters: 
2023-03-18 21:44:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18047061475856384 [0;39m <==    Updates: 1
2023-03-18 21:44:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18047061475856384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-18 21:44:07.066 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:44:21.453 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:44:32.990 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:44:33.844 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:44:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18047187313364992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:44:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18047187313364992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:44:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18047187313364992 [0;39m ==> Parameters: 
2023-03-18 21:44:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18047187313364992 [0;39m <==    Updates: 1
2023-03-18 21:44:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18047187313364992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:44:37.093 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:44:43.506 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:44:45.563 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:45:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18047292141604864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:45:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18047292141604864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:45:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18047292141604864 [0;39m ==> Parameters: 
2023-03-18 21:45:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18047292141604864 [0;39m <==    Updates: 0
2023-03-18 21:45:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18047292141604864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:45:02.994 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:45:03.870 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:45:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18047313113124864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:45:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18047313113124864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:45:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18047313113124864 [0;39m ==> Parameters: 
2023-03-18 21:45:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18047313113124864 [0;39m <==    Updates: 1
2023-03-18 21:45:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18047313113124864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:45:05.037 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:45:07.087 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:45:11.171 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:45:33.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:45:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18047438929661952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:45:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18047438929661952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:45:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18047438929661952 [0;39m ==> Parameters: 
2023-03-18 21:45:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18047438929661952 [0;39m <==    Updates: 1
2023-03-18 21:45:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18047438929661952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 21:45:35.033 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:45:37.073 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:45:39.117 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:46:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18047543829204992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:46:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18047543829204992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:46:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18047543829204992 [0;39m ==> Parameters: 
2023-03-18 21:46:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18047543829204992 [0;39m <==    Updates: 0
2023-03-18 21:46:00.022 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18047543829204992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:46:03.189 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:46:03.862 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:46:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18047564809113600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:46:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18047564809113600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:46:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18047564809113600 [0;39m ==> Parameters: 
2023-03-18 21:46:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18047564809113600 [0;39m <==    Updates: 1
2023-03-18 21:46:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18047564809113600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:46:05.247 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:46:09.329 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:46:27.268 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:46:32.960 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:46:33.847 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:46:35.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18047690642427904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:46:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18047690642427904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:46:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18047690642427904 [0;39m ==> Parameters: 
2023-03-18 21:46:35.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18047690642427904 [0;39m <==    Updates: 1
2023-03-18 21:46:35.026 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18047690642427904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:46:37.058 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:46:49.360 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:46:51.402 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:47:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18047795470667776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:47:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18047795470667776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:47:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18047795470667776 [0;39m ==> Parameters: 
2023-03-18 21:47:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18047795470667776 [0;39m <==    Updates: 0
2023-03-18 21:47:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18047795470667776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-18 21:47:03.879 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:47:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18047816446382080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:47:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18047816446382080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:47:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18047816446382080 [0;39m ==> Parameters: 
2023-03-18 21:47:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18047816446382080 [0;39m <==    Updates: 1
2023-03-18 21:47:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18047816446382080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:47:05.042 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:47:07.084 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:47:15.493 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:47:27.602 INFO  com.jiawa.wiki.websocket.WebSocketServer          :32   [32m                  [0;39m æœ‰æ–°è¿žæŽ¥ï¼štokenï¼šo8hySs8OIGï¼Œsession idï¼š1ï¼Œå½“å‰è¿žæŽ¥æ•°ï¼š1
2023-03-18 21:47:28.546 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m18047915163521024 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 21:47:28.548 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m18047915163521024 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2023-03-18 21:47:28.548 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m18047915163521024 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.getStatistic
2023-03-18 21:47:28.548 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m18047915163521024 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 21:47:28.549 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m18047915163521024 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 21:47:28.550 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m18047915163521024 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-18 21:47:28.550 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m18047915163521024 [0;39m ==> Parameters: 
2023-03-18 21:47:28.553 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m18047915163521024 [0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2023-03-18 21:47:28.554 TRACE c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :143  [32m18047915163521024 [0;39m <==        Row: 2023-03-18, 10, 7, 10, 7
2023-03-18 21:47:28.556 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.getStatistic :137  [32m18047915163521024 [0;39m <==      Total: 1
2023-03-18 21:47:28.558 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m18047915163521024 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1679068800000,"viewCount":10,"viewIncrease":10,"voteCount":7,"voteIncrease":7}],"success":true}
2023-03-18 21:47:28.558 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m18047915163521024 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š14 ms -------------
2023-03-18 21:47:28.605 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m18047915410984960 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 21:47:28.605 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m18047915410984960 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2023-03-18 21:47:28.605 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m18047915410984960 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.EbookSnapshotController.get30Statistic
2023-03-18 21:47:28.605 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m18047915410984960 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 21:47:28.606 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m18047915410984960 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 21:47:28.606 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m18047915410984960 [0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2023-03-18 21:47:28.606 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m18047915410984960 [0;39m ==> Parameters: 
2023-03-18 21:47:28.607 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m18047915410984960 [0;39m <==    Columns: date, viewIncrease, voteIncrease
2023-03-18 21:47:28.608 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m18047915410984960 [0;39m <==        Row: 2023-03-02, 0, 0
2023-03-18 21:47:28.609 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m18047915410984960 [0;39m <==        Row: 2023-03-05, 8, 5
2023-03-18 21:47:28.609 TRACE c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :143  [32m18047915410984960 [0;39m <==        Row: 2023-03-06, 1, 1
2023-03-18 21:47:28.609 DEBUG c.j.w.m.EbookSnapshotMapperCust.get30Statistic    :137  [32m18047915410984960 [0;39m <==      Total: 3
2023-03-18 21:47:28.609 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m18047915410984960 [0;39m è¿”å›žç»“æžœ: {"content":[{"date":1677686400000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0},{"date":1677945600000,"viewCount":0,"viewIncrease":8,"voteCount":0,"voteIncrease":5},{"date":1678032000000,"viewCount":0,"viewIncrease":1,"voteCount":0,"voteIncrease":1}],"success":true}
2023-03-18 21:47:28.609 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m18047915410984960 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š4 ms -------------
2023-03-18 21:47:28.615 INFO  com.jiawa.wiki.aspect.LogAspect                   :53   [32m18047915452928000 [0;39m ------------- å¼€å§‹ -------------
2023-03-18 21:47:28.615 INFO  com.jiawa.wiki.aspect.LogAspect                   :54   [32m18047915452928000 [0;39m è¯·æ±‚åœ°å€: http://127.0.0.1:8880/category/all GET
2023-03-18 21:47:28.615 INFO  com.jiawa.wiki.aspect.LogAspect                   :55   [32m18047915452928000 [0;39m ç±»åæ–¹æ³•: com.jiawa.wiki.controller.CategoryController.all
2023-03-18 21:47:28.616 INFO  com.jiawa.wiki.aspect.LogAspect                   :56   [32m18047915452928000 [0;39m è¿œç¨‹åœ°å€: 127.0.0.1
2023-03-18 21:47:28.616 INFO  com.jiawa.wiki.aspect.LogAspect                   :78   [32m18047915452928000 [0;39m è¯·æ±‚å‚æ•°: []
2023-03-18 21:47:28.617 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m18047915452928000 [0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2023-03-18 21:47:28.617 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m18047915452928000 [0;39m ==> Parameters: 
2023-03-18 21:47:28.619 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18047915452928000 [0;39m <==    Columns: id, parent, name, sort
2023-03-18 21:47:28.619 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18047915452928000 [0;39m <==        Row: 100, 0, å‰ç«¯å¼€å‘, 100
2023-03-18 21:47:28.620 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18047915452928000 [0;39m <==        Row: 101, 100, Vue, 101
2023-03-18 21:47:28.620 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18047915452928000 [0;39m <==        Row: 102, 100, HTML & CSS, 102
2023-03-18 21:47:28.620 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18047915452928000 [0;39m <==        Row: 200, 0, Java, 200
2023-03-18 21:47:28.620 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18047915452928000 [0;39m <==        Row: 201, 200, åŸºç¡€åº”ç”¨, 201
2023-03-18 21:47:28.621 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18047915452928000 [0;39m <==        Row: 202, 200, æ¡†æž¶åº”ç”¨, 202
2023-03-18 21:47:28.621 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18047915452928000 [0;39m <==        Row: 300, 0, Python, 300
2023-03-18 21:47:28.621 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18047915452928000 [0;39m <==        Row: 301, 300, åŸºç¡€åº”ç”¨, 301
2023-03-18 21:47:28.622 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18047915452928000 [0;39m <==        Row: 302, 300, è¿›é˜¶æ–¹å‘åº”ç”¨, 302
2023-03-18 21:47:28.622 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18047915452928000 [0;39m <==        Row: 400, 0, æ•°æ®åº“, 400
2023-03-18 21:47:28.622 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18047915452928000 [0;39m <==        Row: 401, 400, MySQL, 401
2023-03-18 21:47:28.622 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18047915452928000 [0;39m <==        Row: 500, 0, å…¶å®ƒ, 500
2023-03-18 21:47:28.622 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18047915452928000 [0;39m <==        Row: 501, 500, æœåŠ¡å™¨, 501
2023-03-18 21:47:28.623 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18047915452928000 [0;39m <==        Row: 502, 500, å¼€å‘å·¥å…·, 502
2023-03-18 21:47:28.623 TRACE c.jiawa.wiki.mapper.CategoryMapper.selectByExample:143  [32m18047915452928000 [0;39m <==        Row: 503, 500, çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€, 503
2023-03-18 21:47:28.623 DEBUG c.jiawa.wiki.mapper.CategoryMapper.selectByExample:137  [32m18047915452928000 [0;39m <==      Total: 15
2023-03-18 21:47:28.625 INFO  com.jiawa.wiki.aspect.LogAspect                   :93   [32m18047915452928000 [0;39m è¿”å›žç»“æžœ: {"content":[{"id":100,"name":"å‰ç«¯å¼€å‘","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"åŸºç¡€åº”ç”¨","parent":200,"sort":201},{"id":202,"name":"æ¡†æž¶åº”ç”¨","parent":200,"sort":202},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"åŸºç¡€åº”ç”¨","parent":300,"sort":301},{"id":302,"name":"è¿›é˜¶æ–¹å‘åº”ç”¨","parent":300,"sort":302},{"id":400,"name":"æ•°æ®åº“","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"å…¶å®ƒ","parent":0,"sort":500},{"id":501,"name":"æœåŠ¡å™¨","parent":500,"sort":501},{"id":502,"name":"å¼€å‘å·¥å…·","parent":500,"sort":502},{"id":503,"name":"çƒ­é—¨æœåŠ¡ç«¯è¯­è¨€","parent":500,"sort":503}],"success":true}
2023-03-18 21:47:28.625 INFO  com.jiawa.wiki.aspect.LogAspect                   :94   [32m18047915452928000 [0;39m ------------- ç»“æŸ è€—æ—¶ï¼š10 ms -------------
2023-03-18 21:47:33.145 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:47:33.895 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:47:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18047942288084992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:47:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18047942288084992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:47:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18047942288084992 [0;39m ==> Parameters: 
2023-03-18 21:47:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18047942288084992 [0;39m <==    Updates: 1
2023-03-18 21:47:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18047942288084992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:47:37.667 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:47:41.777 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:48:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18048047137296384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:48:00.012 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18048047137296384 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:48:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18048047137296384 [0;39m ==> Parameters: 
2023-03-18 21:48:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18048047137296384 [0;39m <==    Updates: 0
2023-03-18 21:48:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18048047137296384 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-18 21:48:04.321 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:48:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18048068075261952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:48:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18048068075261952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:48:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18048068075261952 [0;39m ==> Parameters: 
2023-03-18 21:48:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18048068075261952 [0;39m <==    Updates: 1
2023-03-18 21:48:05.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18048068075261952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 21:48:08.211 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:48:32.821 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:48:33.874 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:48:35.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18048193904381952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:48:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18048193904381952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:48:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18048193904381952 [0;39m ==> Parameters: 
2023-03-18 21:48:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18048193904381952 [0;39m <==    Updates: 1
2023-03-18 21:48:35.006 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18048193904381952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 21:48:39.523 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:48:54.896 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:48:56.935 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:49:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18048298774564864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:49:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18048298774564864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:49:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18048298774564864 [0;39m ==> Parameters: 
2023-03-18 21:49:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18048298774564864 [0;39m <==    Updates: 0
2023-03-18 21:49:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18048298774564864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 21:49:03.873 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:49:05.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18048319758667776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:49:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18048319758667776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:49:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18048319758667776 [0;39m ==> Parameters: 
2023-03-18 21:49:05.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18048319758667776 [0;39m <==    Updates: 1
2023-03-18 21:49:05.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18048319758667776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:49:07.046 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:49:21.023 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:49:33.912 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:49:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18048445591982080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:49:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18048445591982080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:49:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18048445591982080 [0;39m ==> Parameters: 
2023-03-18 21:49:35.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18048445591982080 [0;39m <==    Updates: 1
2023-03-18 21:49:35.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18048445591982080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:49:37.267 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:49:43.164 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:49:45.204 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:50:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18048550436999168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:50:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18048550436999168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:50:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18048550436999168 [0;39m ==> Parameters: 
2023-03-18 21:50:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18048550436999168 [0;39m <==    Updates: 0
2023-03-18 21:50:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18048550436999168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:50:03.557 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:50:04.273 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:50:05.015 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18048571442073600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:50:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18048571442073600 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:50:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18048571442073600 [0;39m ==> Parameters: 
2023-03-18 21:50:05.019 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18048571442073600 [0;39m <==    Updates: 1
2023-03-18 21:50:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18048571442073600 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-18 21:50:08.468 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:50:10.916 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:50:32.997 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:50:33.865 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:50:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18048697246027776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:50:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18048697246027776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:50:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18048697246027776 [0;39m ==> Parameters: 
2023-03-18 21:50:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18048697246027776 [0;39m <==    Updates: 1
2023-03-18 21:50:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18048697246027776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-18 21:50:35.041 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:50:39.430 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:50:57.104 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:50:59.146 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:51:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18048802091044864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:51:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18048802091044864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:51:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18048802091044864 [0;39m ==> Parameters: 
2023-03-18 21:51:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18048802091044864 [0;39m <==    Updates: 0
2023-03-18 21:51:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18048802091044864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:51:03.876 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:51:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18048823066759168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:51:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18048823066759168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:51:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18048823066759168 [0;39m ==> Parameters: 
2023-03-18 21:51:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18048823066759168 [0;39m <==    Updates: 1
2023-03-18 21:51:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18048823066759168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:51:07.215 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:51:21.201 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:51:23.244 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:51:33.855 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:51:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18048948908462080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:51:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18048948908462080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:51:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18048948908462080 [0;39m ==> Parameters: 
2023-03-18 21:51:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18048948908462080 [0;39m <==    Updates: 1
2023-03-18 21:51:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18048948908462080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 21:51:37.050 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:51:45.306 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:51:47.349 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:52:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18049053736701952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:52:00.003 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18049053736701952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:52:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18049053736701952 [0;39m ==> Parameters: 
2023-03-18 21:52:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18049053736701952 [0;39m <==    Updates: 0
2023-03-18 21:52:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18049053736701952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:52:02.973 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:52:03.855 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:52:05.001 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18049074699833344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:52:05.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18049074699833344 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:52:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18049074699833344 [0;39m ==> Parameters: 
2023-03-18 21:52:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18049074699833344 [0;39m <==    Updates: 1
2023-03-18 21:52:05.013 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18049074699833344 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-18 21:52:07.059 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:52:11.451 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:52:34.249 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:52:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18049200541536256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:52:35.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18049200541536256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:52:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18049200541536256 [0;39m ==> Parameters: 
2023-03-18 21:52:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18049200541536256 [0;39m <==    Updates: 1
2023-03-18 21:52:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18049200541536256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:52:37.788 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:52:59.528 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:53:00.006 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18049305407524864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:53:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18049305407524864 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:53:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18049305407524864 [0;39m ==> Parameters: 
2023-03-18 21:53:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18049305407524864 [0;39m <==    Updates: 0
2023-03-18 21:53:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18049305407524864 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:53:01.947 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:53:03.871 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:53:03.996 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:53:05.016 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18049326420987904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:53:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18049326420987904 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:53:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18049326420987904 [0;39m ==> Parameters: 
2023-03-18 21:53:05.025 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18049326420987904 [0;39m <==    Updates: 1
2023-03-18 21:53:05.027 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18049326420987904 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:53:08.072 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:53:24.040 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:53:26.082 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:53:33.860 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:53:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18049452199776256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:53:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18049452199776256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:53:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18049452199776256 [0;39m ==> Parameters: 
2023-03-18 21:53:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18049452199776256 [0;39m <==    Updates: 1
2023-03-18 21:53:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18049452199776256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:53:37.943 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:53:48.138 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:53:50.449 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:54:00.001 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18049557040599040 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:54:00.001 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18049557040599040 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:54:00.002 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18049557040599040 [0;39m ==> Parameters: 
2023-03-18 21:54:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18049557040599040 [0;39m <==    Updates: 0
2023-03-18 21:54:00.011 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18049557040599040 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:54:02.997 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:54:04.147 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:54:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18049578024701952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:54:05.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18049578024701952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:54:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18049578024701952 [0;39m ==> Parameters: 
2023-03-18 21:54:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18049578024701952 [0;39m <==    Updates: 1
2023-03-18 21:54:05.012 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18049578024701952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:54:07.545 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:54:13.034 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:54:15.076 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:54:32.986 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:54:33.865 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:54:35.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18049703887376384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:54:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18049703887376384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:54:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18049703887376384 [0;39m ==> Parameters: 
2023-03-18 21:54:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18049703887376384 [0;39m <==    Updates: 1
2023-03-18 21:54:35.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18049703887376384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:54:37.482 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:54:42.350 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:55:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18049808765947904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:55:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18049808765947904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:55:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18049808765947904 [0;39m ==> Parameters: 
2023-03-18 21:55:00.026 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18049808765947904 [0;39m <==    Updates: 0
2023-03-18 21:55:00.027 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18049808765947904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 21:55:03.891 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:55:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18049829695524864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:55:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18049829695524864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:55:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18049829695524864 [0;39m ==> Parameters: 
2023-03-18 21:55:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18049829695524864 [0;39m <==    Updates: 1
2023-03-18 21:55:05.015 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18049829695524864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:55:05.610 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:55:08.035 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:55:10.080 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:55:33.865 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:55:34.172 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:55:35.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18049955524644864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:55:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18049955524644864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:55:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18049955524644864 [0;39m ==> Parameters: 
2023-03-18 21:55:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18049955524644864 [0;39m <==    Updates: 1
2023-03-18 21:55:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18049955524644864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š7æ¯«ç§’
2023-03-18 21:55:36.214 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:55:38.255 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:55:58.786 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:56:00.004 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18050060373856256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:56:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18050060373856256 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:56:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18050060373856256 [0;39m ==> Parameters: 
2023-03-18 21:56:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18050060373856256 [0;39m <==    Updates: 0
2023-03-18 21:56:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18050060373856256 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:56:03.859 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:56:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18050081387319296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:56:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18050081387319296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:56:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18050081387319296 [0;39m ==> Parameters: 
2023-03-18 21:56:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18050081387319296 [0;39m <==    Updates: 1
2023-03-18 21:56:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18050081387319296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 21:56:08.048 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:56:22.890 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:56:32.989 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:56:33.866 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:56:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18050207208050688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:56:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18050207208050688 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:56:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18050207208050688 [0;39m ==> Parameters: 
2023-03-18 21:56:35.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18050207208050688 [0;39m <==    Updates: 1
2023-03-18 21:56:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18050207208050688 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-18 21:56:35.026 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:56:37.063 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:56:44.944 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:56:46.976 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:57:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18050312082427904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:57:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18050312082427904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:57:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18050312082427904 [0;39m ==> Parameters: 
2023-03-18 21:57:00.025 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18050312082427904 [0;39m <==    Updates: 0
2023-03-18 21:57:00.026 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18050312082427904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:57:03.444 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:57:04.236 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:57:05.011 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18050333032976384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:57:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18050333032976384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:57:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18050333032976384 [0;39m ==> Parameters: 
2023-03-18 21:57:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18050333032976384 [0;39m <==    Updates: 1
2023-03-18 21:57:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18050333032976384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 21:57:06.045 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:57:08.085 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:57:10.127 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:57:12.176 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:57:32.978 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:57:33.860 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:57:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18050458824347648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:57:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18050458824347648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:57:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18050458824347648 [0;39m ==> Parameters: 
2023-03-18 21:57:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18050458824347648 [0;39m <==    Updates: 1
2023-03-18 21:57:35.005 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18050458824347648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 21:57:37.303 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:57:39.367 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:58:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18050563702919168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:58:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18050563702919168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:58:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18050563702919168 [0;39m ==> Parameters: 
2023-03-18 21:58:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18050563702919168 [0;39m <==    Updates: 0
2023-03-18 21:58:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18050563702919168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:58:01.845 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:58:03.855 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:58:03.886 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:58:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18050584699604992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:58:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18050584699604992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:58:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18050584699604992 [0;39m ==> Parameters: 
2023-03-18 21:58:05.024 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18050584699604992 [0;39m <==    Updates: 1
2023-03-18 21:58:05.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18050584699604992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 21:58:07.966 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:58:10.011 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:58:27.982 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:58:33.862 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:58:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18050710507753472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:58:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18050710507753472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:58:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18050710507753472 [0;39m ==> Parameters: 
2023-03-18 21:58:35.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18050710507753472 [0;39m <==    Updates: 1
2023-03-18 21:58:35.021 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18050710507753472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 21:58:37.063 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:58:52.336 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:59:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18050815390519296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 21:59:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18050815390519296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 21:59:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18050815390519296 [0;39m ==> Parameters: 
2023-03-18 21:59:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18050815390519296 [0;39m <==    Updates: 0
2023-03-18 21:59:00.025 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18050815390519296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:59:03.447 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:59:04.346 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:59:05.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18050836345262080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:59:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18050836345262080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:59:05.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18050836345262080 [0;39m ==> Parameters: 
2023-03-18 21:59:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18050836345262080 [0;39m <==    Updates: 1
2023-03-18 21:59:05.020 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18050836345262080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 21:59:05.492 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:59:07.531 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:59:14.388 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:59:16.850 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:59:32.967 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:59:33.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:59:35.010 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18050962174382080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 21:59:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18050962174382080 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 21:59:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18050962174382080 [0;39m ==> Parameters: 
2023-03-18 21:59:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18050962174382080 [0;39m <==    Updates: 1
2023-03-18 21:59:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18050962174382080 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 21:59:37.060 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 21:59:41.131 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:00:00.005 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18051067011010560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 22:00:00.005 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18051067011010560 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 22:00:00.006 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18051067011010560 [0;39m ==> Parameters: 
2023-03-18 22:00:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18051067011010560 [0;39m <==    Updates: 0
2023-03-18 22:00:00.010 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18051067011010560 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š5æ¯«ç§’
2023-03-18 22:00:03.859 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:00:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18051087990919168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 22:00:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18051087990919168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 22:00:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18051087990919168 [0;39m ==> Parameters: 
2023-03-18 22:00:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18051087990919168 [0;39m <==    Updates: 1
2023-03-18 22:00:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18051087990919168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 22:00:07.234 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:00:31.263 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:00:34.346 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:00:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18051213845204992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 22:00:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18051213845204992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 22:00:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18051213845204992 [0;39m ==> Parameters: 
2023-03-18 22:00:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18051213845204992 [0;39m <==    Updates: 1
2023-03-18 22:00:35.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18051213845204992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 22:00:35.695 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:00:38.034 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:00:53.316 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:00:55.357 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:01:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18051318677639168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 22:01:00.007 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18051318677639168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 22:01:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18051318677639168 [0;39m ==> Parameters: 
2023-03-18 22:01:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18051318677639168 [0;39m <==    Updates: 0
2023-03-18 22:01:00.017 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18051318677639168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 22:01:03.887 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:01:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18051339640770560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 22:01:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18051339640770560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 22:01:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18051339640770560 [0;39m ==> Parameters: 
2023-03-18 22:01:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18051339640770560 [0;39m <==    Updates: 1
2023-03-18 22:01:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18051339640770560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 22:01:05.021 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:01:07.062 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:01:19.455 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:01:34.370 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:01:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18051465507639296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 22:01:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18051465507639296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 22:01:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18051465507639296 [0;39m ==> Parameters: 
2023-03-18 22:01:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18051465507639296 [0;39m <==    Updates: 1
2023-03-18 22:01:35.022 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18051465507639296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 22:01:38.016 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:01:41.530 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:01:44.113 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:02:00.014 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18051570365239296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 22:02:00.015 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18051570365239296 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 22:02:00.016 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18051570365239296 [0;39m ==> Parameters: 
2023-03-18 22:02:00.024 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18051570365239296 [0;39m <==    Updates: 0
2023-03-18 22:02:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18051570365239296 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 22:02:03.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:02:05.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18051591307399168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 22:02:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18051591307399168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 22:02:05.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18051591307399168 [0;39m ==> Parameters: 
2023-03-18 22:02:05.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18051591307399168 [0;39m <==    Updates: 1
2023-03-18 22:02:05.010 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18051591307399168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 22:02:07.063 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:02:11.133 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:02:32.979 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:02:33.859 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:02:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18051717115547648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 22:02:35.002 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18051717115547648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 22:02:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18051717115547648 [0;39m ==> Parameters: 
2023-03-18 22:02:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18051717115547648 [0;39m <==    Updates: 1
2023-03-18 22:02:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18051717115547648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 22:02:35.019 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:02:37.063 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:02:39.104 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:03:00.007 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18051821994119168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 22:03:00.008 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18051821994119168 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 22:03:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18051821994119168 [0;39m ==> Parameters: 
2023-03-18 22:03:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18051821994119168 [0;39m <==    Updates: 0
2023-03-18 22:03:00.019 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18051821994119168 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 22:03:03.582 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:03:03.859 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:03:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18051842948861952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 22:03:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18051842948861952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 22:03:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18051842948861952 [0;39m ==> Parameters: 
2023-03-18 22:03:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18051842948861952 [0;39m <==    Updates: 1
2023-03-18 22:03:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18051842948861952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 22:03:07.677 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:03:09.928 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:03:27.864 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:03:32.968 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:03:33.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:03:35.013 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18051968819924992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 22:03:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18051968819924992 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 22:03:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18051968819924992 [0;39m ==> Parameters: 
2023-03-18 22:03:35.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18051968819924992 [0;39m <==    Updates: 1
2023-03-18 22:03:35.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18051968819924992 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 22:03:37.067 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:03:49.908 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:03:51.953 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:04:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18052073690107904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 22:04:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18052073690107904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 22:04:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18052073690107904 [0;39m ==> Parameters: 
2023-03-18 22:04:00.026 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18052073690107904 [0;39m <==    Updates: 0
2023-03-18 22:04:00.027 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18052073690107904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 22:04:04.326 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:04:05.006 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18052094619684864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 22:04:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18052094619684864 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 22:04:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18052094619684864 [0;39m ==> Parameters: 
2023-03-18 22:04:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18052094619684864 [0;39m <==    Updates: 1
2023-03-18 22:04:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18052094619684864 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 22:04:07.048 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:04:14.622 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:04:16.666 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:04:33.423 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:04:33.858 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:04:35.002 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18052220432027648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 22:04:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18052220432027648 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 22:04:35.003 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18052220432027648 [0;39m ==> Parameters: 
2023-03-18 22:04:35.011 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18052220432027648 [0;39m <==    Updates: 1
2023-03-18 22:04:35.011 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18052220432027648 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 22:04:35.467 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:04:37.511 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:04:41.588 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:05:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18052325318987776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 22:05:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18052325318987776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 22:05:00.011 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18052325318987776 [0;39m ==> Parameters: 
2023-03-18 22:05:00.023 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18052325318987776 [0;39m <==    Updates: 0
2023-03-18 22:05:00.024 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18052325318987776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š15æ¯«ç§’
2023-03-18 22:05:04.328 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:05:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18052346286313472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 22:05:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18052346286313472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 22:05:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18052346286313472 [0;39m ==> Parameters: 
2023-03-18 22:05:05.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18052346286313472 [0;39m <==    Updates: 1
2023-03-18 22:05:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18052346286313472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 22:05:05.257 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:05:07.302 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:05:09.346 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:05:33.427 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:05:33.863 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:05:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18052472098656256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 22:05:35.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18052472098656256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 22:05:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18052472098656256 [0;39m ==> Parameters: 
2023-03-18 22:05:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18052472098656256 [0;39m <==    Updates: 1
2023-03-18 22:05:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18052472098656256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 22:05:35.467 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:05:39.539 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:05:55.484 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:05:57.521 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:06:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18052576973033472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 22:06:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18052576973033472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 22:06:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18052576973033472 [0;39m ==> Parameters: 
2023-03-18 22:06:00.018 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18052576973033472 [0;39m <==    Updates: 0
2023-03-18 22:06:00.018 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18052576973033472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 22:06:04.325 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:06:05.003 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18052597923581952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 22:06:05.004 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18052597923581952 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 22:06:05.005 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18052597923581952 [0;39m ==> Parameters: 
2023-03-18 22:06:05.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18052597923581952 [0;39m <==    Updates: 1
2023-03-18 22:06:05.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18052597923581952 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 22:06:07.463 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:06:20.125 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:06:22.486 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:06:32.982 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:06:34.323 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:06:35.004 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18052723756896256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 22:06:35.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18052723756896256 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 22:06:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18052723756896256 [0;39m ==> Parameters: 
2023-03-18 22:06:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18052723756896256 [0;39m <==    Updates: 1
2023-03-18 22:06:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18052723756896256 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 22:06:37.466 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:06:44.544 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:06:47.112 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:07:00.003 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18052828610301952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 22:07:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18052828610301952 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 22:07:00.004 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18052828610301952 [0;39m ==> Parameters: 
2023-03-18 22:07:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18052828610301952 [0;39m <==    Updates: 0
2023-03-18 22:07:00.015 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18052828610301952 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š12æ¯«ç§’
2023-03-18 22:07:03.856 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:07:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18052849627959296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 22:07:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18052849627959296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 22:07:05.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18052849627959296 [0;39m ==> Parameters: 
2023-03-18 22:07:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18052849627959296 [0;39m <==    Updates: 1
2023-03-18 22:07:05.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18052849627959296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 22:07:07.924 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:07:12.315 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:07:32.971 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:07:34.027 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:07:35.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18052975457079296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 22:07:35.014 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18052975457079296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 22:07:35.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18052975457079296 [0;39m ==> Parameters: 
2023-03-18 22:07:35.017 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18052975457079296 [0;39m <==    Updates: 1
2023-03-18 22:07:35.017 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18052975457079296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 22:07:37.052 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:07:39.093 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:08:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18053080310484992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 22:08:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18053080310484992 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 22:08:00.014 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18053080310484992 [0;39m ==> Parameters: 
2023-03-18 22:08:00.022 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18053080310484992 [0;39m <==    Updates: 0
2023-03-18 22:08:00.023 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18053080310484992 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 22:08:01.146 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:08:03.823 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:08:03.851 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:08:05.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18053101261033472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 22:08:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18053101261033472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 22:08:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18053101261033472 [0;39m ==> Parameters: 
2023-03-18 22:08:05.016 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18053101261033472 [0;39m <==    Updates: 1
2023-03-18 22:08:05.016 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18053101261033472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š8æ¯«ç§’
2023-03-18 22:08:05.876 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:08:09.962 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:08:27.923 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:08:32.984 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:08:33.863 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:08:35.009 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18053227094347776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 22:08:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18053227094347776 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 22:08:35.010 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18053227094347776 [0;39m ==> Parameters: 
2023-03-18 22:08:35.018 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18053227094347776 [0;39m <==    Updates: 1
2023-03-18 22:08:35.018 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18053227094347776 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š9æ¯«ç§’
2023-03-18 22:08:37.469 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:08:52.364 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:09:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18053331951947776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 22:09:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18053331951947776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 22:09:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18053331951947776 [0;39m ==> Parameters: 
2023-03-18 22:09:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18053331951947776 [0;39m <==    Updates: 0
2023-03-18 22:09:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18053331951947776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 22:09:03.862 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:09:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18053352906690560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 22:09:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18053352906690560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 22:09:05.006 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18053352906690560 [0;39m ==> Parameters: 
2023-03-18 22:09:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18053352906690560 [0;39m <==    Updates: 1
2023-03-18 22:09:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18053352906690560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
2023-03-18 22:09:05.425 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:09:07.925 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:09:16.447 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:09:32.983 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:09:33.867 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:09:35.012 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18053478760976384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 22:09:35.012 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18053478760976384 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 22:09:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18053478760976384 [0;39m ==> Parameters: 
2023-03-18 22:09:35.022 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18053478760976384 [0;39m <==    Updates: 1
2023-03-18 22:09:35.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18053478760976384 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 22:09:37.366 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:09:41.470 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:10:00.008 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18053583605993472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 22:10:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18053583605993472 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 22:10:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18053583605993472 [0;39m ==> Parameters: 
2023-03-18 22:10:00.020 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18053583605993472 [0;39m <==    Updates: 0
2023-03-18 22:10:00.020 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18053583605993472 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š11æ¯«ç§’
2023-03-18 22:10:03.912 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:10:05.014 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18053604602679296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 22:10:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18053604602679296 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 22:10:05.015 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18053604602679296 [0;39m ==> Parameters: 
2023-03-18 22:10:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18053604602679296 [0;39m <==    Updates: 1
2023-03-18 22:10:05.024 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18053604602679296 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š10æ¯«ç§’
2023-03-18 22:10:07.456 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:10:09.502 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:10:31.594 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:10:34.001 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:10:34.201 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:10:35.008 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18053730406633472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 22:10:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18053730406633472 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 22:10:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18053730406633472 [0;39m ==> Parameters: 
2023-03-18 22:10:35.013 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18053730406633472 [0;39m <==    Updates: 1
2023-03-18 22:10:35.014 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18053730406633472 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š6æ¯«ç§’
2023-03-18 22:10:38.111 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:10:59.190 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:11:00.016 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18053835297787904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 22:11:00.017 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18053835297787904 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 22:11:00.019 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18053835297787904 [0;39m ==> Parameters: 
2023-03-18 22:11:00.029 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18053835297787904 [0;39m <==    Updates: 0
2023-03-18 22:11:00.030 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18053835297787904 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š13æ¯«ç§’
2023-03-18 22:11:04.310 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:11:05.005 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18053856223170560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 22:11:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18053856223170560 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 22:11:05.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18053856223170560 [0;39m ==> Parameters: 
2023-03-18 22:11:05.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18053856223170560 [0;39m <==    Updates: 1
2023-03-18 22:11:05.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18053856223170560 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-18 22:11:08.785 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:11:24.399 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:11:34.201 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:11:35.007 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18053982060679168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 22:11:35.007 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18053982060679168 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 22:11:35.008 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18053982060679168 [0;39m ==> Parameters: 
2023-03-18 22:11:35.009 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18053982060679168 [0;39m <==    Updates: 1
2023-03-18 22:11:35.009 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18053982060679168 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š2æ¯«ç§’
2023-03-18 22:11:35.986 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:11:38.405 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:11:47.007 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:11:49.584 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:12:00.009 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :32   [32m18054086926667776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§å¼€å§‹
2023-03-18 22:12:00.009 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18054086926667776 [0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1, ebook t2 set t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.`date` = curdate() and t1.ebook_id = t2.id; update ebook_snapshot t1 left join (select ebook_id, view_count, vote_count from ebook_snapshot where `date` = date_sub(curdate(), interval 1 day)) t2 on t1.ebook_id = t2.ebook_id set t1.view_increase = (t1.view_count - ifnull(t2.view_count, 0)), t1.vote_increase = (t1.vote_count - ifnull(t2.vote_count, 0)) where t1.`date` = curdate();
2023-03-18 22:12:00.010 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18054086926667776 [0;39m ==> Parameters: 
2023-03-18 22:12:00.013 DEBUG c.j.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137  [32m18054086926667776 [0;39m <==    Updates: 0
2023-03-18 22:12:00.013 INFO  com.jiawa.wiki.job.EbookSnapshotJob               :35   [32m18054086926667776 [0;39m ç”Ÿæˆä»Šæ—¥ç”µå­ä¹¦å¿«ç…§ç»“æŸï¼Œè€—æ—¶ï¼š4æ¯«ç§’
2023-03-18 22:12:04.476 INFO  RocketmqRemoting                                  :95   [32m                  [0;39m closeChannel: close the connection to remote address[] result: true
2023-03-18 22:12:05.020 INFO  com.jiawa.wiki.job.DocJob                         :30   [32m18054107944325120 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®å¼€å§‹
2023-03-18 22:12:05.020 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18054107944325120 [0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2023-03-18 22:12:05.021 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18054107944325120 [0;39m ==> Parameters: 
2023-03-18 22:12:05.023 DEBUG c.jiawa.wiki.mapper.DocMapperCust.updateEbookInfo :137  [32m18054107944325120 [0;39m <==    Updates: 1
2023-03-18 22:12:05.023 INFO  com.jiawa.wiki.job.DocJob                         :33   [32m18054107944325120 [0;39m æ›´æ–°ç”µå­ä¹¦ä¸‹çš„æ–‡æ¡£æ•°æ®ç»“æŸï¼Œè€—æ—¶ï¼š3æ¯«ç§’
